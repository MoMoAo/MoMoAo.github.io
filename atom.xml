<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MoMoAoğŸ“</title>
  
  <subtitle>MoMoAo&#39;s Blog</subtitle>
  <link href="https://momoao.github.io/atom.xml" rel="self"/>
  
  <link href="https://momoao.github.io/"/>
  <updated>2023-10-22T08:39:08.339Z</updated>
  <id>https://momoao.github.io/</id>
  
  <author>
    <name>MoMoAoğŸ“</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MySQLæŸ¥è¯¢</title>
    <link href="https://momoao.github.io/posts/202310221559.html"/>
    <id>https://momoao.github.io/posts/202310221559.html</id>
    <published>2023-10-22T08:19:03.000Z</published>
    <updated>2023-10-22T08:39:08.339Z</updated>
    
    <content type="html"><![CDATA[<h1>MySQLæŸ¥è¯¢</h1><h2 id="å¤šè¡¨å…³ç³»">å¤šè¡¨å…³ç³»</h2><h3 id="æ¦‚è¿°">æ¦‚è¿°</h3><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022160421110.png" alt="image-20231022160421110"></p><h3 id="ä¸€å¯¹å¤š">ä¸€å¯¹å¤š</h3><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022160605948.png" alt="image-20231022160605948"></p><h3 id="å¤šå¯¹å¤š">å¤šå¯¹å¤š</h3><p>ä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾</p><p>ä¸€é—¨è¯¾å¯ä»¥è¢«å¤šä¸ªå­¦ç”Ÿé€‰è¡ŒÂ·</p><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022160748200.png" alt="image-20231022160748200"></p><h3 id="ä¸€å¯¹ä¸€">ä¸€å¯¹ä¸€</h3><p>å› ä¸ºæ•°æ®è¿‡å¤šï¼Œå°†ä¸€ä¸ªè¡¨æ‹†åˆ†æˆä¸¤ä¸ªè¡¨</p><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022161533960.png" alt="image-20231022161533960"></p><h2 id="å¤šè¡¨æŸ¥è¯¢æ¦‚è¿°">å¤šè¡¨æŸ¥è¯¢æ¦‚è¿°</h2><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022163004033.png" alt="image-20231022163004033"></p><h3 id="è¿æ¥æŸ¥è¯¢">è¿æ¥æŸ¥è¯¢</h3><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022163013211.png" alt="image-20231022163013211"></p><h2 id="å†…è¿æ¥">å†…è¿æ¥</h2><p>ç›¸å½“äºAã€Bäº¤é›†éƒ¨åˆ†æ•°æ®</p><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022163246721.png" alt="image-20231022163246721"></p><h3 id="éšå¼å†…è¿æ¥">éšå¼å†…è¿æ¥</h3><p><img src="../assets/image/MySQL%E6%9F%A5%E8%AF%A2_Image/image-20231022163432872.png" alt="image-20231022163432872"></p><h3 id="æ˜¾ç¤ºå†…è¿æ¥">æ˜¾ç¤ºå†…è¿æ¥</h3><h2 id="å¤–è¿æ¥">å¤–è¿æ¥</h2><h2 id="è‡ªè¿æ¥">è‡ªè¿æ¥</h2><p>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</p><h2 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢</h2><h2 id="å¤šè¡¨æŸ¥è¯¢æ¡ˆä¾‹">å¤šè¡¨æŸ¥è¯¢æ¡ˆä¾‹</h2>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»MySQLæŸ¥è¯¢æ–¹é¢çš„ç²¾è®²ï¼Œå¤šè¡¨æŸ¥è¯¢ç­‰</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://momoao.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://momoao.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>JUC</title>
    <link href="https://momoao.github.io/posts/202310201322.html"/>
    <id>https://momoao.github.io/posts/202310201322.html</id>
    <published>2023-10-20T05:19:03.000Z</published>
    <updated>2023-10-20T06:17:20.960Z</updated>
    
    <content type="html"><![CDATA[<h1>JUC</h1><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="Javaæœ‰å“ªäº›å®ç°å¤šçº¿ç¨‹çš„æ–¹å¼">Javaæœ‰å“ªäº›å®ç°å¤šçº¿ç¨‹çš„æ–¹å¼</h3><p>Javaä¸­æœ‰å¤šç§æ–¹å¼æ¥å®ç°å¤šçº¿ç¨‹ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p>ç»§æ‰¿Threadç±»ï¼š<br>æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ª<code>java.lang.Thread</code>ç±»ï¼Œç„¶åé‡å†™<code>run()</code>æ–¹æ³•ï¼Œåœ¨<code>run()</code>æ–¹æ³•ä¸­å®šä¹‰çº¿ç¨‹çš„ä»»åŠ¡ã€‚ä¹‹åï¼Œæ‚¨å¯ä»¥åˆ›å»ºè¯¥ç±»çš„å®ä¾‹å¹¶è°ƒç”¨<code>start()</code>æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line"><span class="type">MyThread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure></li><li><p>å®ç°Runnableæ¥å£ï¼š<br>å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ç°<code>java.lang.Runnable</code>æ¥å£ï¼Œç„¶åå®ç°<code>run()</code>æ–¹æ³•ã€‚å†åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>Thread</code>ç±»çš„æ„é€ å‡½æ•°ï¼Œç„¶åå¯åŠ¨çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line"><span class="type">MyRunnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"><span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(runnable);</span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼š<br>å¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼æ¥å®ç°çº¿ç¨‹ï¼Œå°†<code>Runnable</code>æ¥å£çš„<code>run()</code>æ–¹æ³•åœ¨<code>Thread</code>ç±»çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">thread.start();</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨çº¿ç¨‹æ± ï¼š<br>Javaæä¾›äº†<code>java.util.concurrent</code>åŒ…ï¼Œå…¶ä¸­åŒ…æ‹¬<code>Executor</code>æ¡†æ¶å’Œçº¿ç¨‹æ± ï¼Œç”¨äºæ›´é«˜çº§çš„çº¿ç¨‹ç®¡ç†ã€‚é€šè¿‡çº¿ç¨‹æ± ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†å’Œé‡ç”¨çº¿ç¨‹ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>); <span class="comment">// åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± </span></span><br><span class="line">executor.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨Callableå’ŒFutureï¼š<br><code>java.util.concurrent</code>åŒ…è¿˜æä¾›äº†<code>Callable</code>å’Œ<code>Future</code>æ¥å£ï¼Œå…è®¸çº¿ç¨‹æ‰§è¡Œæœ‰è¿”å›å€¼çš„ä»»åŠ¡ï¼Œå¹¶èƒ½å¤Ÿè·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚</p></li></ol><p>è¿™äº›æ˜¯Javaä¸­å®ç°å¤šçº¿ç¨‹çš„ä¸€äº›å¸¸è§æ–¹å¼ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©é€‚åˆæ‚¨çš„ç‰¹å®šæƒ…å†µçš„æ–¹å¼ã€‚æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéƒ½éœ€è¦æ³¨æ„çº¿ç¨‹åŒæ­¥ã€çº¿ç¨‹é—´é€šä¿¡å’Œå¼‚å¸¸å¤„ç†ç­‰å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç›¸å…³é—®é¢˜ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»JAVAçš„å¹¶å‘ç¼–ç¨‹çŸ¥è¯†</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="å¤šçº¿ç¨‹" scheme="https://momoao.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>é»‘é©¬å¤´æ¡è¯¾å ‚ç¬”è®°</title>
    <link href="https://momoao.github.io/posts/202310151032.html"/>
    <id>https://momoao.github.io/posts/202310151032.html</id>
    <published>2023-10-15T00:19:03.000Z</published>
    <updated>2023-10-23T03:34:44.434Z</updated>
    
    <content type="html"><![CDATA[<h1>é»‘é©¬å¤´æ¡è¯¾å ‚ç¬”è®°</h1><h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h2><h3 id="é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</h3><p>åŠŸèƒ½æ¶æ„å›¾</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015103451690.png" alt="image-20231015103451690"></p><h4 id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h4><h5 id="åŸºç¡€å±‚">åŸºç¡€å±‚</h5><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015103520443.png" alt="image-20231015103520443"></p><h4 id="æœåŠ¡å±‚">æœåŠ¡å±‚</h4><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015103533029.png" alt="image-20231015103533029"></p><h4 id="æ€»ç»“">æ€»ç»“</h4><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015103548300.png" alt="image-20231015103548300"></p><h3 id="nacos">nacos</h3><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015104152072-16973377123771.png" alt="image-20231015104152072"></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull nacos/nacos-server:<span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> --env <span class="attribute">MODE</span>=standalone --name nacos <span class="attribute">--restart</span>=always  -d -p 8848:8848 nacos/nacos-server:1.2.0</span><br></pre></td></tr></table></figure><h3 id="åˆè¯†å·¥ç¨‹æ­å»º">åˆè¯†å·¥ç¨‹æ­å»º</h3><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015104905957.png" alt="image-20231015104905957"></p><p>å¼‚å¸¸å¤„ç†</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015105351328.png" alt="image-20231015105351328"></p><h3 id="ç™»å½•">ç™»å½•</h3><p>éœ€æ±‚åˆ†æ</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015105413371.png" alt="image-20231015105413371"></p><p>è¡¨ç»“æ„åˆ†æ</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015105550366.png" alt="image-20231015105550366"></p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015110938216.png" alt="image-20231015110938216"></p><p>æ‰‹åŠ¨åŠ å¯†</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111006632.png" alt="image-20231015111006632"></p><p>ç™»å½•è¿‡ç¨‹</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111037075.png" alt="image-20231015111037075"></p><p>ç”¨æˆ·ç«¯</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111129672.png" alt="image-20231015111129672"></p><p>è¿è¥ç«¯</p><p>æ‰€æœ‰å¾®æœåŠ¡éƒ½æ˜¯è¿™ä¸ªç»“æ„</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111138620.png" alt="image-20231015111138620"></p><p>æ¥å£å®šä¹‰</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111335892.png" alt="image-20231015111335892"></p><p>æ€è·¯åˆ†æ</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111410160.png" alt="image-20231015111410160"></p><h3 id="æ¥å£å·¥å…·">æ¥å£å·¥å…·</h3><h4 id="Postman">Postman</h4><p>Postmanæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ç½‘é¡µè°ƒè¯•ä¸å‘é€ç½‘é¡µHTTPè¯·æ±‚çš„Chromeæ’ä»¶ã€‚postmanè¢«500ä¸‡å¼€å‘è€…å’Œè¶…100,000å®¶å…¬å¸ç”¨äºæ¯æœˆè®¿é—®1.3äº¿ä¸ªAPIã€‚</p><p>å®˜æ–¹ç½‘å€ï¼š<a href="https://www.postman.com/">https://www.postman.com/</a></p><h4 id="Swagger">Swagger</h4><p>é¡¹ç›®åŸºäºå‰åç«¯åˆ†ç¦»çš„æ¶æ„è¿›è¡Œå¼€å‘ï¼Œå‰åç«¯åˆ†ç¦»æ¶æ„æ€»ä½“ä¸ŠåŒ…æ‹¬å‰ç«¯å’ŒæœåŠ¡ç«¯ï¼Œé€šå¸¸æ˜¯å¤šäººåä½œå¼€å‘</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111531874.png" alt="image-20231015111531874"></p><p>Swagger æ˜¯ä¸€ä¸ªè§„èŒƒå’Œå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡(<a href="https://swagger.io/">https://swagger.io/</a>)ã€‚ å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼š</p><ol><li><p>ä½¿å¾—å‰åç«¯åˆ†ç¦»å¼€å‘æ›´åŠ æ–¹ä¾¿ï¼Œæœ‰åˆ©äºå›¢é˜Ÿåä½œ</p></li><li><p>æ¥å£çš„æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆï¼Œé™ä½åç«¯å¼€å‘äººå‘˜ç¼–å†™æ¥å£æ–‡æ¡£çš„è´Ÿæ‹…</p></li><li><p>åŠŸèƒ½æµ‹è¯•</p></li></ol><h4 id="knife4j">knife4j</h4><p>knife4jæ˜¯ä¸ºJava MVCæ¡†æ¶é›†æˆSwaggerç”ŸæˆApiæ–‡æ¡£çš„å¢å¼ºè§£å†³æ–¹æ¡ˆ,å‰èº«æ˜¯swagger-bootstrap-ui,å–åkni4jæ˜¯å¸Œæœ›å®ƒèƒ½åƒä¸€æŠŠåŒ•é¦–ä¸€æ ·å°å·§,è½»é‡,å¹¶ä¸”åŠŸèƒ½å¼ºæ‚!</p><p>giteeåœ°å€ï¼š<a href="https://gitee.com/xiaoym/knife4j">https://gitee.com/xiaoym/knife4j</a><br>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://doc.xiaominfo.com/">https://doc.xiaominfo.com/</a><br>æ•ˆæœæ¼”ç¤ºï¼š<a href="http://knife4j.xiaominfo.com/doc.html">http://knife4j.xiaominfo.com/doc.html</a></p><h3 id="ç½‘å…³">ç½‘å…³</h3><h4 id="appç«¯ç½‘å…³">appç«¯ç½‘å…³</h4><p>æ¦‚è¿°</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111659242.png" alt="image-20231015111659242"></p><p>é¡¹ç›®ä¸­ç½‘å…³çš„æœåŠ¡å·¥ç¨‹ç»“æ„</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111718366.png" alt="image-20231015111718366"></p><h4 id="è®¤è¯è¿‡æ»¤å™¨">è®¤è¯è¿‡æ»¤å™¨</h4><p>å…¨å±€è¿‡æ»¤å™¨å®ç°jwtæ ¡éªŒ</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111901046.png" alt="image-20231015111901046"></p><h3 id="å‰ç«¯é›†æˆ">å‰ç«¯é›†æˆ</h3><h4 id="nginxé…ç½®">nginxé…ç½®</h4><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231015111928487.png" alt="image-20231015111928487"></p><h4 id="å¯åŠ¨appå‰ç«¯å·¥ç¨‹">å¯åŠ¨appå‰ç«¯å·¥ç¨‹</h4><h3 id="ç”¨æˆ·å¾®æœåŠ¡æ­å»º">ç”¨æˆ·å¾®æœåŠ¡æ­å»º</h3><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231018095829026.png" alt="image-20231018095829026"></p><h2 id="Freemarker">Freemarker</h2><p>FreeMarkerï¼ˆåˆç§°ä½œFreeMarker Template Engineï¼‰æ˜¯ä¸€ä¸ªæµè¡Œçš„æ¨¡æ¿å¼•æ“ï¼Œç”¨äºç”Ÿæˆæ–‡æœ¬è¾“å‡ºï¼Œé€šå¸¸ç”¨äºWebåº”ç”¨ç¨‹åºä¸­ç”ŸæˆHTMLã€XMLã€JSONç­‰åŠ¨æ€å†…å®¹ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒJavaç¼–å†™ï¼Œå¯ä»¥é›†æˆåˆ°Javaåº”ç”¨ç¨‹åºä¸­ï¼Œä¹Ÿæœ‰å„ç§å…¶ä»–è¯­è¨€çš„ç«¯å£ã€‚</p><p>freemarkerä½œä¸ºSpringMVCè§†å›¾è¾“å‡º</p><h3 id="åŸºç¡€è¯­æ³•">åŸºç¡€è¯­æ³•</h3><h4 id="åŸºç¡€è¯­æ³•ç§ç±»">åŸºç¡€è¯­æ³•ç§ç±»</h4><p>æ³¨é‡Šã€æ’å€¼ã€FTLæŒ‡ä»¤ã€æ–‡æœ¬</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231020154940360.png" alt="image-20231020154940360"></p><h4 id="é›†åˆæŒ‡ä»¤">é›†åˆæŒ‡ä»¤</h4><p>é›†åˆæŒ‡ä»¤-List</p><h5 id="javaä»£ç ">javaä»£ç </h5><p>åˆå§‹åŒ–2ä¸ªå¯¹è±¡ï¼Œå°è£…åˆ°äº†listå’Œmapä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">list</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    <span class="comment">//------------------------------------</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">stu1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    stu1.setName(<span class="string">&quot;å°å¼º&quot;</span>);</span><br><span class="line">    stu1.setAge(<span class="number">18</span>);</span><br><span class="line">    stu1.setMoney(<span class="number">1000.86f</span>);</span><br><span class="line">    stu1.setBirthday(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°çº¢å¯¹è±¡æ¨¡å‹æ•°æ®</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">stu2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    stu2.setName(<span class="string">&quot;å°çº¢&quot;</span>);</span><br><span class="line">    stu2.setMoney(<span class="number">200.1f</span>);</span><br><span class="line">    stu2.setAge(<span class="number">19</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†ä¸¤ä¸ªå¯¹è±¡æ¨¡å‹æ•°æ®å­˜æ”¾åˆ°Listé›†åˆä¸­</span></span><br><span class="line">    List&lt;Student&gt; stus = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    stus.add(stu1);</span><br><span class="line">    stus.add(stu2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘modelä¸­å­˜æ”¾Listé›†åˆæ•°æ®</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;stus&quot;</span>,stus);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mapæ•°æ®</span></span><br><span class="line">    Map&lt;String,Student&gt; stuMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    stuMap.put(<span class="string">&quot;stu1&quot;</span>,stu1);</span><br><span class="line">    stuMap.put(<span class="string">&quot;stu2&quot;</span>,stu2);</span><br><span class="line"></span><br><span class="line">    model.addAttribute(<span class="string">&quot;stuMap&quot;</span>,stuMap);</span><br><span class="line">    <span class="comment">//æ—¥æœŸ</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;today&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é•¿æ•°å€¼</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;point&quot;</span>,<span class="number">38473897438743L</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;02-list&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="listæ•°æ®å±•ç¤º">listæ•°æ®å±•ç¤º</h5><ul><li>&lt;#if stus??&gt;<ul><li>åˆ¤æ–­stusæ˜¯å¦ä¸ºç©º</li></ul></li><li>&lt;#list stus as stu&gt;<ul><li>ä»stusä¸­å–å‡ºä¹ˆä¸€ä¸ªå…ƒç´ å‘½åä¸ºstu</li></ul></li><li>${<a href="http://stu.name">stu.name</a>}<ul><li>å–å‡ºå…ƒç´ ä¸­çš„å±æ€§</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;#-- list æ•°æ®çš„å±•ç¤º --&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>å±•ç¤ºlistä¸­çš„stuæ•°æ®:<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>åºå·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>é’±åŒ…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;#if stus??&gt;</span><br><span class="line">        &lt;#list stus as stu&gt;</span><br><span class="line">            &lt;#if stu.name==&#x27;å°çº¢&#x27;&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">&quot;color:#ff0000&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu_index + 1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.age&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.money&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            &lt;#else &gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu_index + 1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.age&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stu.money&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            &lt;/#if&gt;</span><br><span class="line">        &lt;/#list&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line"></span><br><span class="line">    stusé›†åˆçš„å¤§å°ï¼š$&#123;stus?size&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="mapæ•°æ®å±•ç¤º">mapæ•°æ®å±•ç¤º</h5><ul><li>æ–¹å¼ä¸€<ul><li>map[â€˜keynameâ€™].property</li></ul></li><li>æ–¹å¼äºŒ<ul><li>map.keyname.property</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;#-- Map æ•°æ®çš„å±•ç¤º --&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>mapæ•°æ®çš„å±•ç¤ºï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;###&quot;</span>&gt;</span>æ–¹å¼ä¸€ï¼šé€šè¿‡map[&#x27;keyname&#x27;].property<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">è¾“å‡ºstu1çš„å­¦ç”Ÿä¿¡æ¯ï¼š<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å§“åï¼š$&#123;stuMap[&#x27;stu1&#x27;].name&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¹´é¾„ï¼š$&#123;stuMap[&#x27;stu1&#x27;].age&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;###&quot;</span>&gt;</span>æ–¹å¼äºŒï¼šé€šè¿‡map.keyname.property<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">è¾“å‡ºstu2çš„å­¦ç”Ÿä¿¡æ¯ï¼š<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å§“åï¼š$&#123;stuMap.stu2.name&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¹´é¾„ï¼š$&#123;stuMap.stu2.age&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;###&quot;</span>&gt;</span>éå†mapä¸­ä¸¤ä¸ªå­¦ç”Ÿä¿¡æ¯ï¼š<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>åºå·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>é’±åŒ…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &lt;#list stuMap?keys as key&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;key_index + 1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stuMap[key].name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stuMap[key].age&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;stuMap[key].money&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ifæŒ‡ä»¤">ifæŒ‡ä»¤</h4><p><strong>åœ¨freemarkerä¸­ï¼Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œ=ä¸==æ˜¯ä¸€æ ·çš„</strong></p><p>æŒ‡ä»¤æ ¼å¼</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="meta">#<span class="keyword">if</span> expression&gt;</span></span><br><span class="line">&lt;<span class="meta">#<span class="keyword">else</span>&gt;</span></span><br><span class="line">&lt;/<span class="meta">#<span class="keyword">if</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¼”ç¤ºï¼š</p><p>â€‹éœ€æ±‚ï¼šåœ¨listé›†åˆä¸­åˆ¤æ–­å­¦ç”Ÿä¸ºå°çº¢çš„æ•°æ®å­—ä½“æ˜¾ç¤ºä¸ºçº¢è‰²ã€‚</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023093655783.png" alt="image-20231023093655783"></p><h4 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h4><h5 id="æ•°å­¦è¿ç®—">æ•°å­¦è¿ç®—</h5><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023093730027.png" alt="image-20231023093730027"></p><h5 id="æ¯”è¾ƒè¿ç®—ç¬¦">æ¯”è¾ƒè¿ç®—ç¬¦</h5><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023093755969.png" alt="image-20231023093755969"></p><h5 id="é€»è¾‘è¿ç®—ç¬¦">é€»è¾‘è¿ç®—ç¬¦</h5><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101222242.png" alt="image-20231023101222242"></p><h4 id="ç©ºå€¼å¤„ç†">ç©ºå€¼å¤„ç†</h4><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101233697.png" alt="image-20231023101233697"></p><h4 id="å†…å»ºå‡½æ•°">å†…å»ºå‡½æ•°</h4><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101304953.png" alt="image-20231023101304953"></p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101330781.png" alt="image-20231023101330781"></p><h3 id="é™æ€æ–‡ä»¶ç”Ÿæˆ">é™æ€æ–‡ä»¶ç”Ÿæˆ</h3><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101458684.png" alt="image-20231023101458684"></p><h2 id="MinIO">MinIO</h2><h3 id="ç®€ä»‹">ç®€ä»‹</h3><p>å¯¹è±¡å­˜å‚¨æ–¹å¼å¯¹æ¯”</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101803641.png" alt="image-20231023101803641"></p><p>å¸¸è§çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101819239.png" alt="image-20231023101819239"></p><h4 id="æ¦‚è¿°">æ¦‚è¿°</h4><p><a href="http://docs.minio.org.cn/docs/">å®˜ç½‘</a></p><p><img src="../assets/image/%E9%BB%91%E9%A9%AC%E5%A4%B4%E6%9D%A1%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231023101838044.png" alt="image-20231023101838044"></p><h3 id="å¼€ç®±ä½¿ç”¨">å¼€ç®±ä½¿ç”¨</h3><p>å‚è€ƒï¼š[Dockerç¬”è®°-MinIOæ­å»º]</p><h3 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h3><h3 id="å°è£…MinIOä¸ºstarter">å°è£…MinIOä¸ºstarter</h3><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="Fegin">Fegin</h3><p>Feignæ˜¯ä¸€ä¸ªåŸºäºHTTPçš„å®¢æˆ·ç«¯åº“ï¼Œå®ƒæ˜¯Netflixå¼€å‘çš„ï¼Œç”¨äºç®€åŒ–HTTPå®¢æˆ·ç«¯çš„å¼€å‘ã€‚Feignçš„ä¸»è¦ç›®æ ‡æ˜¯ä½¿ç¼–å†™HTTPå®¢æˆ·ç«¯å˜å¾—æ›´åŠ ç®€å•ã€ä¼˜é›…å’Œå£°æ˜å¼ï¼Œå°¤å…¶é€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡ä¹‹é—´é€šä¿¡ã€‚ä»¥ä¸‹æ˜¯å…³äºFeignçš„é‡è¦ä¿¡æ¯ï¼š</p><p><strong>ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼š</strong></p><ol><li><p><strong>å£°æ˜å¼API</strong>ï¼šFeignå…è®¸ä½ å®šä¹‰HTTPå®¢æˆ·ç«¯çš„è¯·æ±‚æ¥å£ï¼Œå°±åƒå®šä¹‰æœåŠ¡æ¥å£ä¸€æ ·ã€‚è¿™ä½¿å¾—å®¢æˆ·ç«¯ä»£ç æ›´åŠ ç›´è§‚å’Œæ˜“äºç†è§£ï¼Œæ— éœ€ç¼–å†™å¤§é‡çš„HTTPè¯·æ±‚å’Œå“åº”çš„å¤„ç†ä»£ç ã€‚</p></li><li><p><strong>é›†æˆæ€§</strong>ï¼šFeigné›†æˆäº†å¤šç§HTTPå®¢æˆ·ç«¯å®ç°ï¼ˆå¦‚Apache HttpClientã€OkHttpï¼‰ï¼Œå› æ­¤ä½ å¯ä»¥é€‰æ‹©æœ€é€‚åˆä½ çš„é¡¹ç›®çš„å®ç°ã€‚</p></li><li><p><strong>æœåŠ¡å‘ç°</strong>ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒFeigné€šå¸¸ä¸æœåŠ¡æ³¨å†Œå’Œå‘ç°å·¥å…·ï¼ˆå¦‚Eurekaã€Consulï¼‰é›†æˆï¼Œå¯ä»¥é€šè¿‡æœåŠ¡åæ¥å‘ç°å’Œè°ƒç”¨å…¶ä»–å¾®æœåŠ¡ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç URLã€‚</p></li><li><p><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šFeignå¯ä»¥ä¸è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¦‚Ribbonï¼‰é›†æˆï¼Œè‡ªåŠ¨åˆ†å‘è¯·æ±‚åˆ°å¯ç”¨çš„æœåŠ¡å®ä¾‹ï¼Œæé«˜äº†åº”ç”¨çš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚</p></li><li><p><strong>è¯·æ±‚å’Œå“åº”ç¼–ç </strong>ï¼šFeignæ”¯æŒè¯·æ±‚å’Œå“åº”çš„ç¼–ç å’Œè§£ç ï¼ŒåŒ…æ‹¬JSONã€XMLç­‰ã€‚å®ƒå¯ä»¥ä¸å„ç§åºåˆ—åŒ–å’Œååºåˆ—åŒ–åº“é›†æˆï¼Œå¦‚Jacksonã€Gsonç­‰ã€‚</p></li></ol><p><strong>å¦‚ä½•ä½¿ç”¨Feignï¼š</strong></p><ol><li><p><strong>æ·»åŠ ä¾èµ–</strong>ï¼šé¦–å…ˆï¼Œä½ éœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ Feignçš„ä¾èµ–ã€‚åœ¨Mavenä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ·»åŠ ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºFeignå®¢æˆ·ç«¯æ¥å£</strong>ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨äºå£°æ˜éœ€è¦è°ƒç”¨çš„è¿œç¨‹æœåŠ¡çš„æ–¹æ³•ã€‚è¿™ä¸ªæ¥å£ä¸Šä½¿ç”¨<code>@FeignClient</code>æ³¨è§£æ¥æŒ‡å®šè¦è®¿é—®çš„æœåŠ¡åç§°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;my-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyServiceClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/resource&quot;)</span></span><br><span class="line">    Resource <span class="title function_">getResource</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨Feignå®¢æˆ·ç«¯</strong>ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­æ³¨å…¥Feignå®¢æˆ·ç«¯æ¥å£ï¼Œå¹¶ç›´æ¥è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚Feignå°†è´Ÿè´£å‘å‡ºHTTPè¯·æ±‚ï¼Œå°†å“åº”ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> MyServiceClient myServiceClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> myServiceClient.getResource();</span><br><span class="line">    <span class="comment">// å¤„ç†èµ„æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>Feignä½¿HTTPå®¢æˆ·ç«¯çš„å¼€å‘è¿‡ç¨‹å˜å¾—æ›´åŠ ç®€å•å’Œæ˜“äºç»´æŠ¤ï¼Œç‰¹åˆ«é€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡ä¹‹é—´é€šä¿¡ï¼Œå¸®åŠ©å¼€å‘è€…é¿å…äº†å¤§é‡çš„æ‰‹åŠ¨HTTPè¯·æ±‚å’Œå“åº”å¤„ç†ä»£ç ã€‚å®ƒçš„é›†æˆæ€§å’Œå£°æ˜å¼APIä½¿å¾—æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿæ›´åŠ ä¾¿æ·ã€‚</p><h3 id="Nacos">Nacos</h3><p>Nacosï¼ˆå‰èº«ä¸ºé˜¿é‡Œå·´å·´çš„Dubbo Nacosï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ–¹å¼æ¥å®ç°å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ³¨å†Œã€å‘ç°ã€é…ç½®å’Œç®¡ç†ã€‚Nacosæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¤šç§äº‘ç¯å¢ƒï¼Œå¹¶ä¸”é€‚ç”¨äºå„ç§ç±»å‹çš„åº”ç”¨ï¼ŒåŒ…æ‹¬äº‘åŸç”Ÿåº”ç”¨ã€å¾®æœåŠ¡æ¶æ„ã€å®¹å™¨åŒ–åº”ç”¨ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯Nacosçš„å…³é”®ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li><p><strong>æœåŠ¡æ³¨å†Œå’Œå‘ç°</strong>ï¼šNacoså…è®¸æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶æ³¨å†Œå…¶æœåŠ¡ï¼Œå¹¶å…è®¸æœåŠ¡æ¶ˆè´¹è€…åŠ¨æ€åœ°å‘ç°å¯ç”¨çš„æœåŠ¡ã€‚è¿™æœ‰åŠ©äºæ„å»ºå¼¹æ€§çš„ã€å¯æ‰©å±•çš„å¾®æœåŠ¡æ¶æ„ã€‚</p></li><li><p><strong>åŠ¨æ€é…ç½®ç®¡ç†</strong>ï¼šNacosæä¾›äº†é…ç½®ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸å°†åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯å­˜å‚¨åœ¨NacosæœåŠ¡å™¨ä¸Šï¼Œå¹¶åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–å’Œæ›´æ–°é…ç½®ã€‚è¿™å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå®ç°é…ç½®çƒ­æ›´æ–°ã€‚</p></li><li><p><strong>æœåŠ¡å’Œå®ä¾‹ç®¡ç†</strong>ï¼šNacoså…è®¸ç®¡ç†å„ä¸ªæœåŠ¡çš„çŠ¶æ€ã€å…ƒæ•°æ®å’Œå®ä¾‹çš„å¥åº·çŠ¶æ€ï¼Œä»¥ç¡®ä¿é«˜å¯ç”¨æ€§å’Œå¯é æ€§ã€‚</p></li><li><p><strong>å‘½åç©ºé—´å’Œå¤šç¯å¢ƒæ”¯æŒ</strong>ï¼šNacosæ”¯æŒå¤šä¸ªå‘½åç©ºé—´ï¼Œå…è®¸åœ¨ä¸åŒç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¸­ç®¡ç†ä¸åŒçš„é…ç½®å’ŒæœåŠ¡æ³¨å†Œä¿¡æ¯ã€‚</p></li><li><p><strong>å¥åº·æ£€æŸ¥å’Œæ•…éšœè½¬ç§»</strong>ï¼šNacoså¯ä»¥å®šæœŸæ£€æŸ¥æœåŠ¡çš„å¥åº·çŠ¶æ€ï¼Œå¹¶åœ¨æœåŠ¡ä¸å¯ç”¨æ—¶è§¦å‘æ•…éšœè½¬ç§»ã€‚è¿™æœ‰åŠ©äºç»´æŠ¤å¯é çš„æœåŠ¡æ²»ç†ã€‚</p></li><li><p><strong>å¤šè¯­è¨€å’Œå¤šæ¡†æ¶æ”¯æŒ</strong>ï¼šNacosæä¾›äº†å¤šç§å®¢æˆ·ç«¯SDKå’Œé€‚é…å™¨ï¼Œé€‚ç”¨äºä¸åŒç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼ŒåŒ…æ‹¬Javaã€Goã€Pythonã€Node.jsç­‰ã€‚</p></li><li><p><strong>å¯è§†åŒ–ç®¡ç†ç•Œé¢</strong>ï¼šNacosæä¾›äº†ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„Webç•Œé¢ï¼Œç”¨äºç®¡ç†æœåŠ¡ã€é…ç½®å’Œå®ä¾‹ï¼Œä»¥åŠæŸ¥çœ‹æœåŠ¡çš„æ‹“æ‰‘å›¾ã€‚</p></li><li><p><strong>äº‘åŸç”Ÿå’Œå®¹å™¨åŒ–æ”¯æŒ</strong>ï¼šNacosè¢«è®¾è®¡ä¸ºäº‘åŸç”Ÿåº”ç”¨å’Œå®¹å™¨åŒ–ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥è½»æ¾ä¸Kubernetesã€Dockerç­‰é›†æˆã€‚</p></li><li><p><strong>é›†ç¾¤å’Œé«˜å¯ç”¨æ€§</strong>ï¼šNacosæ”¯æŒæ„å»ºå¤šèŠ‚ç‚¹çš„Nacosé›†ç¾¤ï¼Œä»¥ç¡®ä¿é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li></ol><p>Nacosçš„æ¶æ„åŸºäºä¸‰å¤§ç»„ä»¶ï¼šå‘½åæœåŠ¡ã€åŠ¨æ€é…ç½®å’Œå…ƒæ•°æ®ç®¡ç†ã€‚å®ƒé€‚ç”¨äºå„ç§åº”ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬å¾®æœåŠ¡æ¶æ„ã€äº‘åŸç”Ÿåº”ç”¨ã€å®¹å™¨ç¼–æ’å’ŒDevOpsã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒNacosæ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„æœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†å¹³å°ï¼Œä½¿å¾®æœåŠ¡æ¶æ„æ›´åŠ å®¹æ˜“å®ç°å’Œç®¡ç†ã€‚å®ƒæ˜¯äº‘åŸç”Ÿåº”ç”¨å¼€å‘çš„æœ‰åŠ›å·¥å…·ï¼Œæœ‰åŠ©äºæ„å»ºé«˜åº¦å¯æ‰©å±•å’Œå¯ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§é»‘é©¬å¤´æ¡è¯¾å ‚ç¬”è®°</summary>
    
    
    
    <category term="é¡¹ç›®" scheme="https://momoao.github.io/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="Springcloud" scheme="https://momoao.github.io/tags/Springcloud/"/>
    
    <category term="Springboot" scheme="https://momoao.github.io/tags/Springboot/"/>
    
    <category term="Nacos" scheme="https://momoao.github.io/tags/Nacos/"/>
    
  </entry>
  
  <entry>
    <title>Docker</title>
    <link href="https://momoao.github.io/posts/202310120920.html"/>
    <id>https://momoao.github.io/posts/202310120920.html</id>
    <published>2023-10-10T10:19:03.000Z</published>
    <updated>2023-10-23T03:34:47.212Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker</h1><div class="note info flat"><p>å‚è€ƒï¼šç¬”è®°å‚è€ƒé»‘é©¬ç¨‹åºå‘˜å¾®æœåŠ¡æ¡†æ¶ç¬”è®°</p></div><p><a href="https://b11et3un53m.feishu.cn/wiki/Rfocw7ctXij2RBkShcucLZbrn2d">é»‘é©¬ç¨‹åºå‘˜-å¾®æœåŠ¡æ¡†æ¶</a></p><h2 id="å®‰è£…docker">å®‰è£…docker</h2><h3 id="å¸è½½æ—§ç‰ˆ">å¸è½½æ—§ç‰ˆ</h3><p>é¦–å…ˆå¦‚æœç³»ç»Ÿä¸­å·²ç»å­˜åœ¨æ—§çš„Dockerï¼Œåˆ™å…ˆå¸è½½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">    docker-client \</span><br><span class="line">    docker-client-latest \</span><br><span class="line">    docker-common \</span><br><span class="line">    docker-latest \</span><br><span class="line">    docker-latest-logrotate \</span><br><span class="line">    docker-logrotate \</span><br><span class="line">    docker-engine</span><br></pre></td></tr></table></figure><h3 id="é…ç½®docketçš„yumåº“">é…ç½®docketçš„yumåº“</h3><p>é¦–å…ˆè¦å®‰è£…ä¸€ä¸ªyumå·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œé…ç½®Dockerçš„yumæºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…docker-2">å®‰è£…docker</h3><p>æ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…Docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å’Œæ ¡éªŒ">å¯åŠ¨å’Œæ ¡éªŒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨Docker</span></span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢Docker</span></span><br><span class="line">systemctl stop docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œdocker pså‘½ä»¤ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure><h3 id="é…ç½®é•œåƒåŠ é€Ÿ">é…ç½®é•œåƒåŠ é€Ÿ</h3><p>è¿™é‡Œä»¥é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿä¸ºä¾‹ã€‚</p><h4 id="æ³¨å†Œé˜¿é‡Œäº‘è´¦å·">æ³¨å†Œé˜¿é‡Œäº‘è´¦å·</h4><p>é¦–å…ˆè®¿é—®é˜¿é‡Œäº‘ç½‘ç«™:</p><p><a href="https://www.aliyun.com/">https://www.aliyun.com/</a></p><p>æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p><h4 id="å¼€é€šé•œåƒæœåŠ¡">å¼€é€šé•œåƒæœåŠ¡</h4><p>åœ¨é¦–é¡µçš„äº§å“ä¸­ï¼Œæ‰¾åˆ°é˜¿é‡Œäº‘çš„<strong>å®¹å™¨é•œåƒæœåŠ¡</strong>ï¼š</p><p><img src="../assets/image/Docker_Image/image-20231012094400418.png" alt="image-20231012094400418"></p><p>ç‚¹å‡»åè¿›å…¥æ§åˆ¶å°</p><p><img src="../assets/image/Docker_Image/image-20231012094415099.png" alt="image-20231012094415099"></p><p>é¦–æ¬¡å¯èƒ½éœ€è¦é€‰æ‹©ç«‹åˆ»å¼€é€šï¼Œç„¶åè¿›å…¥æ§åˆ¶å°ã€‚</p><h4 id="é…ç½®é•œåƒåŠ é€Ÿ-2">é…ç½®é•œåƒåŠ é€Ÿ</h4><p>æ‰¾åˆ°<strong>é•œåƒå·¥å…·</strong>ä¸‹çš„<strong>é•œåƒ****åŠ é€Ÿå™¨</strong>ï¼š</p><p><img src="../assets/image/Docker_Image/image-20231012094429046.png" alt="image-20231012094429046"></p><p>é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œå³å¯æ‰¾åˆ°é…ç½®çš„æ–‡æ¡£è¯´æ˜ï¼š</p><p><img src="../assets/image/Docker_Image/16970750731111.png" alt="img"></p><p>å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶å†…å®¹ï¼Œæ³¨æ„æŠŠå…¶ä¸­çš„é•œåƒåŠ é€Ÿåœ°å€æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://xxxx.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯Docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²MinIO">éƒ¨ç½²MinIO</h2><p>æ‹‰å–é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pull minio/minio</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">9000</span>:<span class="number">9000</span> -p <span class="number">9001</span>:<span class="number">9001</span> --name minio -v <span class="regexp">/home/mi</span>nio<span class="regexp">/data:/</span>data -e <span class="string">&quot;MINIO_ROOT_USER=minio&quot;</span> -e <span class="string">&quot;MINIO_ROOT_PASSWORD=minio123&quot;</span> minio<span class="regexp">/minio server /</span>data --console-address <span class="string">&quot;:9001&quot;</span></span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°è§£è¯»</p><ul><li><p><code>docker run</code>: è¿™æ˜¯ Docker ä¸­ç”¨äºå¯åŠ¨å®¹å™¨çš„å‘½ä»¤ã€‚</p></li><li><p><code>-p 9000:9000</code>: è¿™éƒ¨åˆ†æŒ‡å®šäº†ç«¯å£æ˜ å°„ï¼Œå°†ä¸»æœºçš„ç«¯å£ 9000 æ˜ å°„åˆ°å®¹å™¨çš„ç«¯å£ 9000ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä¸»æœºçš„ 9000 ç«¯å£è®¿é—®å®¹å™¨ä¸­è¿è¡Œçš„ MinIO æœåŠ¡ã€‚</p><ul><li>å·¦ä¾§ä»£è¡¨ä¸»æœºç«¯å£ï¼Œå³ä¾§ä»£è¡¨å®¹å™¨å†…ç«¯å£</li><li>æ³¨æ„ï¼šå®¹å™¨ä¸­å¹¶æ²¡æœ‰ç«¯å£ï¼Œåªæ˜¯å°†å®¹å™¨ä¸­çš„ç›‘å¬ç«¯å£æ˜ å°„åˆ°æœ¬æœºçš„æŒ‡å®šç«¯å£ä¸Š</li></ul></li><li><p><code>--name minio</code>: ä½¿ç”¨ <code>--name</code> æ ‡å¿—ï¼Œæ‚¨ä¸ºå®¹å™¨æŒ‡å®šäº†ä¸€ä¸ªåç§°ï¼Œå³ â€œminioâ€ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å¼•ç”¨å®¹å™¨ï¼Œè€Œä¸å¿…ä¾èµ–äºå®¹å™¨çš„ IDã€‚</p></li><li><p><code>-d</code>: è¿™æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œè¡¨ç¤ºä»¥åå°ï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œè¿™æ„å‘³ç€å®¹å™¨å°†åœ¨åå°è¿è¡Œï¼Œè€Œä¸ä¼šå ç”¨ç»ˆç«¯ã€‚</p></li><li><p><code>--restart=always</code>: ä½¿ç”¨ <code>--restart</code> æ ‡å¿—ï¼Œæ‚¨æŒ‡å®šå®¹å™¨çš„é‡å¯ç­–ç•¥ã€‚<code>always</code> è¡¨ç¤ºå®¹å™¨å°†åœ¨é€€å‡ºæ—¶è‡ªåŠ¨é‡æ–°å¯åŠ¨ã€‚</p><ul><li><p><strong>no</strong>ï¼šé»˜è®¤ç­–ç•¥ã€‚å®¹å™¨é€€å‡ºæ—¶ï¼Œä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚</p></li><li><p><strong>always</strong>ï¼šå®¹å™¨æ€»æ˜¯ä¼šè‡ªåŠ¨é‡å¯ï¼Œæ— è®ºé€€å‡ºåŸå› æ˜¯ä»€ä¹ˆ</p></li><li><p><strong>on-failure</strong>ï¼šåªæœ‰åœ¨å®¹å™¨ä»¥éé›¶é€€å‡ºä»£ç ï¼ˆå¤±è´¥ï¼‰é€€å‡ºæ—¶æ‰ä¼šè‡ªåŠ¨é‡å¯ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> <span class="attribute">--restart</span>=on-failure[:max-retries] &lt;image&gt;</span><br></pre></td></tr></table></figure><p><code>max-retries</code> å¯é€‰å‚æ•°è¡¨ç¤ºæœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸ºæ— é™é‡è¯•</p></li><li><p><strong>unless-stopped</strong>ï¼šå®¹å™¨ä¼šåœ¨é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯ï¼Œé™¤éæ‰‹åŠ¨åœæ­¢å®¹å™¨ã€‚</p></li></ul></li><li><p><code>-e &quot;MINIO_ACCESS_KEY=minio&quot; -e &quot;MINIO_SECRET_KEY=minio123&quot;</code>: è¿™éƒ¨åˆ†é€šè¿‡ <code>-e</code> æ ‡å¿—è®¾ç½®äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œåˆ†åˆ«æ˜¯ MinIO è®¿é—®å¯†é’¥å’Œç§˜å¯†å¯†é’¥ã€‚è¿™æ˜¯ä¸ºäº†é…ç½® MinIO æœåŠ¡çš„èº«ä»½éªŒè¯ã€‚</p></li><li><p><code>-v /home/data:/data -v /home/config:/root.minio</code>: ä½¿ç”¨ <code>-v</code> æ ‡å¿—ï¼Œæ‚¨ä¸ºå®¹å™¨æ·»åŠ äº†ä¸¤ä¸ªæ•°æ®å·ã€‚å·¦ä¾§æ˜¯ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œå³ä¾§æ˜¯å®¹å™¨ä¸­çš„è·¯å¾„ã€‚è¿™å…è®¸æ‚¨å°†ä¸»æœºä¸Šçš„ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œä»¥ä¾¿ MinIO å®¹å™¨å¯ä»¥è®¿é—®ä¸»æœºä¸Šçš„æ•°æ®å’Œé…ç½®ã€‚</p><ul><li><code>/home/data:/data</code> æŒ‚è½½äº†ä¸»æœºä¸Šçš„ <code>/home/data</code> ç›®å½•åˆ°å®¹å™¨å†…çš„ <code>/data</code> ç›®å½•ï¼Œç”¨äºå­˜å‚¨ MinIO æ•°æ®ã€‚</li><li><code>/home/config:/root.minio</code> æŒ‚è½½äº†ä¸»æœºä¸Šçš„ <code>/home/config</code> ç›®å½•åˆ°å®¹å™¨å†…çš„ <code>/root.minio</code> ç›®å½•ï¼Œç”¨äºå­˜å‚¨ MinIO çš„é…ç½®ã€‚</li></ul></li><li><p>minio/minio</p><ul><li>ä½¿ç”¨çš„é•œåƒçš„åç§°</li></ul></li><li><p>server</p><ul><li><p><code>server</code> æ˜¯ MinIO é•œåƒçš„å‚æ•°ï¼ŒæŒ‡å®šäº†è¦è¿è¡Œçš„ MinIO æœåŠ¡å™¨æ¨¡å¼ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>server</code> å‚æ•°å‘Šè¯‰ MinIO é•œåƒä»¥æœåŠ¡å™¨æ¨¡å¼è¿è¡Œï¼Œä»¥ä¾¿å¯ä»¥é€šè¿‡è¯¥å®¹å™¨æä¾›å¯¹è±¡å­˜å‚¨æœåŠ¡</p></li><li><p><strong>server</strong>ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ï¼šç”¨äºè¿è¡Œ MinIO æœåŠ¡å™¨ã€‚è¿™æ˜¯æ ‡å‡†çš„å¯¹è±¡å­˜å‚¨æ¨¡å¼ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢å¯¹è±¡æ•°æ®ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> -p 9000:9000 minio/minio server /data</span></span><br></pre></td></tr></table></figure></li><li><p><strong>gateway</strong>ï¼šç”¨äºå°† MinIO ä¸å…¶ä»–äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚ Amazon S3ã€Google Cloud Storageã€Azure Blob Storageï¼‰é›†æˆï¼Œå……å½“ç½‘å…³ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> run -p <span class="number">9000</span>:<span class="number">9000</span> minio/minio gateway s3://&lt;bucket-name&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>nas</strong>ï¼šå°† MinIO ç”¨ä½œç½‘ç»œé™„åŠ å­˜å‚¨ï¼ˆNetwork Attached Storageï¼‰ï¼Œå…è®¸é€šè¿‡ NFS æˆ– SMB/CIFS åè®®è®¿é—®å¯¹è±¡å­˜å‚¨ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> -p 9000:9000 minio/minio nas /export</span></span><br></pre></td></tr></table></figure></li><li><p><strong>erasure</strong>ï¼šä½¿ç”¨ MinIO Erasure Code æ¨¡å¼ï¼Œé€šè¿‡æ•°æ®åˆ†ç‰‡å’Œå†—ä½™æ¥æä¾›é«˜å¯ç”¨æ€§å’Œæ•°æ®æ¢å¤ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> -p 9000:9000 minio/minio erasure &lt;<span class="built_in">alias</span>&gt; &lt;path&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>/data</p><ul><li><code>/data</code> æ˜¯ MinIO æœåŠ¡å™¨å°†ç”¨äºå­˜å‚¨å¯¹è±¡æ•°æ®çš„ç›®å½•è·¯å¾„ã€‚è¿™æ˜¯ MinIO é•œåƒæ‰€éœ€çš„å‚æ•°å€¼ï¼Œå®ƒå‘Šè¯‰ MinIO æœåŠ¡å™¨åœ¨å®¹å™¨å†…çš„å“ªä¸ªç›®å½•ä¸­å­˜å‚¨å¯¹è±¡æ•°æ®ã€‚<code>/data</code> åœ¨å®¹å™¨å†…æ˜¯ MinIO æœåŠ¡å™¨çš„å·¥ä½œç›®å½•ï¼Œè¿™æ˜¯MinIOæœåŠ¡å™¨åœ¨å…¶ä¸­å­˜å‚¨ä¸Šä¼ çš„å¯¹è±¡æ–‡ä»¶çš„ä½ç½®ã€‚</li><li>ä¸Šé¢å‚æ•°ä¸­æœ‰æŒ‡å®šå°†ä¸»æœºçš„<code>/home/data</code>æŒ‚è½½åˆ°<code>/data</code>ä¸Š</li></ul></li><li><p><code>--console-address &quot;:9001&quot;</code></p><ul><li>æ˜¯ MinIO å¯åŠ¨å‘½ä»¤ä¸­çš„ä¸€ä¸ªå‚æ•°ï¼Œå®ƒç”¨äºé…ç½® MinIO ç®¡ç†æ§åˆ¶å°çš„ç›‘å¬åœ°å€ã€‚MinIO ç®¡ç†æ§åˆ¶å°æ˜¯ä¸€ä¸ª Web ç•Œé¢ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§ MinIO æœåŠ¡å™¨çš„è¿è¡Œã€‚</li></ul></li></ul></li></ul><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="Dockerä¸­å¸¸è§çš„æ¦‚å¿µ">Dockerä¸­å¸¸è§çš„æ¦‚å¿µ</h3><p>Docker æ˜¯ä¸€ç§å®¹å™¨åŒ–å¹³å°ï¼Œæ¶‰åŠè®¸å¤šå¸¸è§çš„æ¦‚å¿µå’Œç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åœ¨ Docker ä¸­å¸¸è§çš„å…³é”®æ¦‚å¿µï¼š</p><ol><li><p><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šå®¹å™¨æ˜¯ Docker ä¸­çš„åŸºæœ¬å•å…ƒï¼Œç”¨äºå°è£…åº”ç”¨ç¨‹åºå’Œå…¶ä¾èµ–é¡¹ï¼Œä»¥ä¾¿åœ¨ä¸åŒç¯å¢ƒä¸­è¿›è¡Œéƒ¨ç½²å’Œè¿è¡Œã€‚å®¹å™¨æä¾›äº†éš”ç¦»ã€è½»é‡çº§å’Œå¯ç§»æ¤çš„ç¯å¢ƒã€‚</p></li><li><p><strong>é•œåƒï¼ˆImageï¼‰</strong>ï¼šé•œåƒæ˜¯å®¹å™¨çš„æ¨¡æ¿ï¼ŒåŒ…å«äº†è¿è¡Œå®¹å™¨æ‰€éœ€çš„æ–‡ä»¶ç³»ç»Ÿã€åº“å’Œé…ç½®ã€‚å®¹å™¨æ˜¯ä»é•œåƒåˆ›å»ºçš„å®ä¾‹ã€‚é•œåƒé€šå¸¸å­˜å‚¨åœ¨ä»“åº“ä¸­ï¼Œå¦‚ Docker Hubï¼Œå¯ä»¥å…±äº«å’Œä¸‹è½½ã€‚</p></li><li><p><strong>Dockerfile</strong>ï¼šDockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†æ„å»º Docker é•œåƒæ‰€éœ€çš„æŒ‡ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨ Dockerfile å®šä¹‰é•œåƒçš„æ„å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬åŸºç¡€é•œåƒã€æ–‡ä»¶å¤åˆ¶ã€å‘½ä»¤æ‰§è¡Œç­‰ã€‚</p></li><li><p><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong>ï¼šä»“åº“æ˜¯å­˜å‚¨ Docker é•œåƒçš„åœ°æ–¹ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªé•œåƒæ ‡ç­¾ã€‚Docker Hub æ˜¯ä¸€ä¸ªå…¬å…± Docker ä»“åº“ï¼Œè¿˜å¯ä»¥é…ç½®ç§æœ‰ä»“åº“ä»¥å­˜å‚¨è‡ªå®šä¹‰é•œåƒã€‚</p></li><li><p><strong>å®¹å™¨æ³¨å†Œè¡¨ï¼ˆRegistryï¼‰</strong>ï¼šå®¹å™¨æ³¨å†Œè¡¨æ˜¯å­˜å‚¨ Docker é•œåƒçš„æœåŠ¡å™¨ã€‚Docker Hub æ˜¯ä¸€ä¸ªå¸¸è§çš„å…¬å…±å®¹å™¨æ³¨å†Œè¡¨ï¼Œä½†ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ­å»ºç§æœ‰æ³¨å†Œè¡¨ã€‚</p></li><li><p><strong>Docker Compose</strong>ï¼šDocker Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚å®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰å¤šä¸ªå®¹å™¨çš„é…ç½®å’Œå…³ç³»ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤æ¥å¯åŠ¨æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p></li><li><p><strong>Docker Swarm</strong>ï¼šDocker Swarm æ˜¯ Docker çš„é›†ç¾¤å’Œç¼–æ’å·¥å…·ï¼Œç”¨äºå°†å¤šä¸ª Docker ä¸»æœºç»„ç»‡ä¸ºä¸€ä¸ªå•ä¸€çš„é›†ç¾¤ï¼Œä»¥å®ç°å®¹å™¨çš„è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§ã€‚</p></li><li><p><strong>Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤ç¨‹åº</strong>ï¼šDocker å®¢æˆ·ç«¯æ˜¯ç”¨æˆ·ä¸ Docker äº¤äº’çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œ Docker å®ˆæŠ¤ç¨‹åºæ˜¯åå°æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†å®¹å™¨çš„åˆ›å»ºã€è¿è¡Œå’Œé”€æ¯ã€‚</p></li><li><p><strong>ç½‘ç»œï¼ˆNetworkï¼‰</strong>ï¼šDocker å…è®¸ä½ åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œä»¥éš”ç¦»å®¹å™¨ï¼Œè¿˜æ”¯æŒå°†å®¹å™¨è¿æ¥åˆ°ä¸»æœºç½‘ç»œæˆ–å…¶ä»–ç½‘ç»œã€‚è¿™æœ‰åŠ©äºå®¹å™¨ä¹‹é—´é€šä¿¡å’Œè®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</p></li><li><p><strong>å·ï¼ˆVolumeï¼‰</strong>ï¼šDocker å·ç”¨äºåœ¨å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®ï¼Œæˆ–å°†æ•°æ®æŒä¹…åŒ–ã€‚å®ƒä»¬æ˜¯å®¹å™¨ä¸­çš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å®¹å™¨ä¹‹é—´æˆ–ä¸ä¸»æœºä¹‹é—´å…±äº«ã€‚</p></li><li><p><strong>Compose æ–‡ä»¶</strong>ï¼šCompose æ–‡ä»¶æ˜¯ Docker Compose çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†åº”ç”¨ç¨‹åºçš„å®šä¹‰ã€æœåŠ¡é…ç½®å’Œå…³ç³»ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸ä»¥ <code>docker-compose.yml</code> å‘½åã€‚</p></li><li><p><strong>Swarm æœåŠ¡ï¼ˆServiceï¼‰</strong>ï¼šåœ¨ Docker Swarm ä¸­ï¼ŒæœåŠ¡æ˜¯å®šä¹‰åº”ç”¨ç¨‹åºçš„å•å…ƒã€‚å®ƒåŒ…æ‹¬å®¹å™¨çš„é•œåƒã€å‰¯æœ¬æ•°ã€ç½‘ç»œé…ç½®å’Œå…¶ä»–å‚æ•°ã€‚</p></li></ol><p>è¿™äº›æ¦‚å¿µæ˜¯ Docker ä¸­çš„åŸºç¡€ï¼Œäº†è§£å®ƒä»¬å°†æœ‰åŠ©äºä½ æ›´å¥½åœ°ç†è§£å’Œç®¡ç† Docker å®¹å™¨åŒ–ç¯å¢ƒã€‚ Docker æä¾›äº†å¹¿æ³›çš„æ–‡æ¡£å’Œç¤¾åŒºèµ„æºï¼Œä»¥å¸®åŠ©ä½ æ›´æ·±å…¥åœ°å­¦ä¹ è¿™äº›æ¦‚å¿µå’Œå¦‚ä½•ä½¿ç”¨ Dockerã€‚</p><h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h3><p>Docker æ˜¯ä¸€ç§æµè¡Œçš„å®¹å™¨åŒ–å¹³å°ï¼Œç”¨äºæ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ Docker å‘½ä»¤ï¼š</p><ol><li><p><strong>é•œåƒæ“ä½œ</strong>:</p><ul><li><code>docker pull &lt;é•œåƒåç§°&gt;</code>: ä¸‹è½½ Docker é•œåƒã€‚</li><li><code>docker build -t &lt;é•œåƒåç§°&gt; &lt;Dockerfileè·¯å¾„&gt;</code>: æ„å»ºé•œåƒã€‚</li><li><code>docker images</code> æˆ– <code>docker image ls</code>: åˆ—å‡ºæ‰€æœ‰æœ¬åœ°é•œåƒã€‚</li><li><code>docker rmi &lt;é•œåƒID&gt;</code>: åˆ é™¤æœ¬åœ°é•œåƒã€‚</li></ul></li><li><p><strong>å®¹å™¨æ“ä½œ</strong>:</p><ul><li><code>docker run &lt;é€‰é¡¹&gt; &lt;é•œåƒåç§°&gt;</code>: è¿è¡Œå®¹å™¨ã€‚</li><li><code>docker ps</code> æˆ– <code>docker container ls</code>: åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚</li><li><code>docker ps -a</code> æˆ– <code>docker container ls -a</code>: åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬åœæ­¢çš„ã€‚</li><li><code>docker start &lt;å®¹å™¨ID&gt;</code>: å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨ã€‚</li><li><code>docker stop &lt;å®¹å™¨ID&gt;</code>: åœæ­¢å®¹å™¨ã€‚</li><li><code>docker rm &lt;å®¹å™¨ID&gt;</code>: åˆ é™¤å®¹å™¨ã€‚</li><li><code>docker exec -it &lt;å®¹å™¨ID&gt; &lt;å‘½ä»¤&gt;</code>: åœ¨è¿è¡Œçš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ã€‚</li></ul></li><li><p><strong>æ—¥å¿—å’Œä¿¡æ¯</strong>:</p><ul><li><code>docker logs &lt;å®¹å™¨ID&gt;</code>: æŸ¥çœ‹å®¹å™¨æ—¥å¿—ã€‚</li><li><code>docker inspect &lt;å®¹å™¨æˆ–é•œåƒID&gt;</code>: æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</li></ul></li><li><p><strong>ç½‘ç»œ</strong>:</p><ul><li><code>docker network ls</code>: åˆ—å‡º Docker ç½‘ç»œã€‚</li><li><code>docker network create &lt;ç½‘ç»œåç§°&gt;</code>: åˆ›å»ºæ–°çš„ Docker ç½‘ç»œã€‚</li><li><code>docker network connect &lt;ç½‘ç»œåç§°&gt; &lt;å®¹å™¨ID&gt;</code>: å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œã€‚</li><li><code>docker network disconnect &lt;ç½‘ç»œåç§°&gt; &lt;å®¹å™¨ID&gt;</code>: ä»ç½‘ç»œä¸­æ–­å¼€å®¹å™¨ã€‚</li></ul></li><li><p><strong>æ•°æ®å·</strong>:</p><ul><li><code>docker volume ls</code>: åˆ—å‡º Docker æ•°æ®å·ã€‚</li><li><code>docker volume create &lt;å·åç§°&gt;</code>: åˆ›å»ºæ–°çš„ Docker æ•°æ®å·ã€‚</li><li><code>docker run -v &lt;å·åç§°&gt;:&lt;å®¹å™¨è·¯å¾„&gt;</code>: å¯åŠ¨å®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·ã€‚</li></ul></li><li><p><strong>Docker Compose</strong>:</p><ul><li><code>docker-compose up</code>: ä½¿ç”¨ Docker Compose å¯åŠ¨å¤šä¸ªå®¹å™¨ã€‚</li><li><code>docker-compose down</code>: åœæ­¢å¹¶ç§»é™¤ Docker Compose ä¸­å®šä¹‰çš„å®¹å™¨ã€‚</li></ul></li><li><p><strong>å…¶ä»–</strong>:</p><ul><li><code>docker system prune</code>: æ¸…ç†ä¸ä½¿ç”¨çš„é•œåƒã€å®¹å™¨å’Œæ•°æ®å·ã€‚</li><li><code>docker info</code>: æŸ¥çœ‹ Docker ç³»ç»Ÿä¿¡æ¯ã€‚</li></ul></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§çš„ Docker å‘½ä»¤ï¼Œä½†è¿˜æœ‰è®¸å¤šå…¶ä»–å‘½ä»¤å’Œé€‰é¡¹å¯ç”¨äºæ›´å¤æ‚çš„ Docker æ“ä½œã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>docker --help</code> æˆ– <code>docker &lt;command&gt; --help</code> æŸ¥çœ‹æ¯ä¸ªå‘½ä»¤çš„è¯¦ç»†è¯´æ˜å’Œé€‰é¡¹ã€‚</p><h3 id="å®¹å™¨å’Œé•œåƒçš„å…³ç³»">å®¹å™¨å’Œé•œåƒçš„å…³ç³»</h3><p>å®¹å™¨å’Œé•œåƒæ˜¯ Docker ä¸­ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼Œå®ƒä»¬ä¹‹é—´æœ‰å¯†åˆ‡çš„å…³ç³»ï¼Œä½†åˆæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯å®¹å™¨å’Œé•œåƒä¹‹é—´çš„å…³ç³»ï¼š</p><ol><li><p><strong>é•œåƒï¼ˆImagesï¼‰</strong>ï¼š</p><ul><li>é•œåƒæ˜¯ä¸€ä¸ªåªè¯»çš„æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ã€‚é•œåƒæ˜¯åº”ç”¨ç¨‹åºçš„é™æ€å¿«ç…§ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå®¹å™¨ã€‚</li><li>é•œåƒé€šå¸¸ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå±‚ï¼ˆlayersï¼‰ç»„æˆï¼Œæ¯ä¸ªå±‚åŒ…å«äº†ä¸€ç»„æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿçš„æ›´æ”¹ã€‚è¿™äº›å±‚æ„æˆäº†ä¸€ä¸ªé•œåƒçš„å®Œæ•´æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>é•œåƒå¯ä»¥ä» Docker Hubï¼ˆæˆ–å…¶ä»–é•œåƒä»“åº“ï¼‰ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Dockerfile æ„å»ºã€‚Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†åˆ›å»ºé•œåƒçš„æ„å»ºæŒ‡ä»¤ã€‚</li></ul></li><li><p><strong>å®¹å™¨ï¼ˆContainersï¼‰</strong>ï¼š</p><ul><li>å®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œå…¶ä¸­åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œï¼Œå¹¶ä¸”ä¸ä¸»æœºç³»ç»Ÿéš”ç¦»ã€‚</li><li>å®¹å™¨æ˜¯å¯è¿è¡Œçš„ï¼Œå¯ä»¥å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å’Œç§»åŠ¨ã€‚å®¹å™¨è¿è¡Œæ—¶å¯ä»¥è¯»å†™ï¼Œå…è®¸åº”ç”¨ç¨‹åºåœ¨å®¹å™¨å†…éƒ¨ç”Ÿæˆæˆ–ä¿®æ”¹æ–‡ä»¶ã€‚</li><li>å®¹å™¨æ˜¯è½»é‡çº§çš„ï¼Œå¯ä»¥å¿«é€Ÿå¯åŠ¨ï¼Œå¹¶ä¸”åœ¨ä¸åŒç¯å¢ƒä¸­ä¿æŒä¸€è‡´æ€§ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬å…±äº«ç›¸åŒçš„é•œåƒã€‚</li></ul></li></ol><p>å…³ç³»ï¼š</p><ul><li>å®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„å®ä¾‹ã€‚å½“æ‚¨è¿è¡Œä¸€ä¸ªé•œåƒæ—¶ï¼ŒDocker åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨ç»§æ‰¿äº†é•œåƒçš„æ–‡ä»¶ç³»ç»Ÿå’Œè®¾ç½®ã€‚</li><li>å¤šä¸ªå®¹å™¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„é•œåƒï¼Œä½†æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå®ƒä»¬å¯ä»¥è¿è¡Œç›¸åŒçš„åº”ç”¨ç¨‹åºï¼Œä½†å½¼æ­¤ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>é•œåƒæ˜¯é™æ€çš„ï¼Œä¸ä¼šæ”¹å˜ã€‚å®¹å™¨æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥è¿è¡Œã€åœæ­¢ã€åˆ é™¤ï¼Œè€Œä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œä¿®æ”¹ã€‚</li></ul><p>æ€»ç»“ï¼šé•œåƒæ˜¯åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡æ¿ï¼Œå®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚å®¹å™¨ä½¿ç”¨é•œåƒçš„æ–‡ä»¶ç³»ç»Ÿå’Œè®¾ç½®æ¥è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œä¿®æ”¹ã€‚è¿™ç§åˆ†ç¦»å’Œå¯ç§»æ¤æ€§ä½¿å¾—å®¹å™¨æˆä¸ºä¸€ç§å¼ºå¤§çš„åº”ç”¨ç¨‹åºéƒ¨ç½²å’Œç®¡ç†å·¥å…·ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Dockerçš„å®‰è£…ã€ä½¿ç”¨å’ŒåŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://momoao.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Docker" scheme="https://momoao.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Maven</title>
    <link href="https://momoao.github.io/posts/202310161341.html"/>
    <id>https://momoao.github.io/posts/202310161341.html</id>
    <published>2023-10-10T10:19:03.000Z</published>
    <updated>2023-10-16T07:58:06.305Z</updated>
    
    <content type="html"><![CDATA[<h1>Maven</h1>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Mavençš„å®‰è£…å’Œä½¿ç”¨</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://momoao.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Maven" scheme="https://momoao.github.io/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>Mysqlä¼˜åŒ–</title>
    <link href="https://momoao.github.io/posts/202310090917.html"/>
    <id>https://momoao.github.io/posts/202310090917.html</id>
    <published>2023-10-09T00:19:03.000Z</published>
    <updated>2023-10-22T05:04:50.337Z</updated>
    
    <content type="html"><![CDATA[<h1>Mysqlä¼˜åŒ–</h1><h2 id="ç´¢å¼•">ç´¢å¼•</h2><h3 id="ç§ç±»">ç§ç±»</h3><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009092427508.png" alt="image-20231009092427508"></p><h3 id="äºŒå‰æ ‘">äºŒå‰æ ‘</h3><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009092807083.png" alt="image-20231009092807083"></p><p>ç¼ºç‚¹</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009093012133.png" alt="image-20231009093012133"></p><h3 id="çº¢é»‘æ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰">çº¢é»‘æ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰</h3><p>å¦‚æœè¿ç»­ä¸¤ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå°±ä¼šè‡ªåŠ¨è¿›è¡Œå¹³è¡¡</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009093152914.png" alt="image-20231009093152914"></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009093315712.png" alt="image-20231009093315712"></p><h3 id="Bæ ‘ï¼ˆå¹³è¡¡å¤šè·¯æ ‘ï¼‰">Bæ ‘ï¼ˆå¹³è¡¡å¤šè·¯æ ‘ï¼‰</h3><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009093747603.png" alt="image-20231009093747603"></p><p>ç»“æ„</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009094040528.png" alt="image-20231009094040528"></p><p>ä¾‹å¦‚ï¼šä¸€ä¸ªä¸‰é˜¶Bæ ‘ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ä¸º2æ—¶ï¼Œåœ¨æ¥æ–°çš„æ•°æ®å°±ä¼šåˆ›å»ºæ–°çš„å­èŠ‚ç‚¹</p><p>ç¼ºç‚¹ï¼šå¯¹ä¸€ä¸ªèŒƒå›´å†…çš„æ‰€æœ‰æ•°æ®è¿›è¡ŒæŸ¥æ‰¾å¾ˆéº»çƒ¦</p><p>ä¾‹å¦‚ï¼šæ‰¾1~5çš„æ•°æ®ï¼Œå°±ä¼šä»1å¼€å§‹æ‰¾ä¸€ä¸ªä¸€ä¸ªæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°5</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009094339955.png" alt="image-20231009094339955"></p><h3 id="B-æ ‘">B+æ ‘</h3><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009094416308.png" alt="image-20231009094416308"></p><p>å°†æ‰€æœ‰æ•°æ®éƒ½å­˜åœ¨å¶å­ç»“ç‚¹</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009094440684.png" alt="image-20231009094440684"></p><ul><li>ä¼˜ç‚¹ï¼š<ul><li>å› ä¸ºåªæœ‰å¶å­èŠ‚ç‚¹æ‰å­˜æ•°æ®ï¼Œæ‰€ä»¥å…¶ä»–èŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰æ›´å¤šçš„ç©ºé—´å­˜å‚¨ç´¢å¼•</li><li>å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç´¢å¼•çš„å¢å¤šï¼Œæ‰€ä»¥æŸ¥æ‰¾å­—æ•°å°±å˜å°‘äº†</li><li>æŸ¥æ‰¾åŸç†<ul><li>æ‰¾åˆ°ä¸€ä¸ªç£ç›˜é¡µå°±å°†è¿™ä¸ªç£ç›˜é¡µä¼ è¾“åˆ°å†…å­˜ä¸­ï¼Œç„¶ååœ¨å†…å­˜ä¸­è¿›è¡Œåˆ¤æ–­</li><li>åˆå› ä¸ºç£ç›˜é¡µä¸­åªæœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼ è¾“åˆ°å†…å­˜ä¸­çš„é€Ÿåº¦å°±å˜å¿«äº†ï¼Œå¯ä»¥æ›´å¿«çš„è¿›è¡ŒæŸ¥æ‰¾ï¼Œæœ€ç»ˆæ‰¾åˆ°æ•°æ®</li></ul></li><li>å› ä¸ºå¶å­èŠ‚ç‚¹ä¹‹é—´æ˜¯åŒé“¾è¡¨ç»“æ„ï¼Œæ‰€ä»¥èŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œå¯ä»¥æ›´å¿«çš„æ‰¾åˆ°èŒƒå›´å†…çš„æ‰€æœ‰æ•°æ®</li></ul></li></ul><h3 id="Bæ ‘å’ŒB-æ ‘çš„åŒºåˆ«">Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«</h3><p>B+æ ‘å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009100023370.png" alt="image-20231009100023370"></p><h3 id="å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®ç´¢å¼•ï¼Œè¿˜ä¼šåˆ›å»ºB-æ ‘å—">å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®ç´¢å¼•ï¼Œè¿˜ä¼šåˆ›å»ºB+æ ‘å—</h3><p>ä¼šçš„ï¼</p><p>åº•å±‚ä¼šæœ‰ä¸€ä¸ªéšè—ç´¢å¼•å«row-id</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009100120652.png" alt="image-20231009100120652"></p><h2 id="Hashç´¢å¼•">Hashç´¢å¼•</h2><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009100315895.png" alt="image-20231009100315895"></p><p>åªæœ‰Memoryæ”¯æŒHashç´¢å¼•</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009100328482.png" alt="image-20231009100328482"></p><p>ç´¢å¼•åŸç†</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009100353313.png" alt="image-20231009100353313"></p><ul><li>ä¼˜ç‚¹<ul><li>æŸ¥è¯¢æ•ˆç‡é«˜</li></ul></li><li>ç¼ºç‚¹<ul><li>ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢å’Œæ’åº</li></ul></li></ul><h2 id="èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«">èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„åŒºåˆ«</h2><p>èšé›†ç´¢å¼•ï¼šç´¢å¼•å’Œæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·</p><p>éèšé›†ç´¢å¼•ï¼šç´¢å¼•å’Œæ•°æ®ä¸å­˜å‚¨åœ¨ä¸€èµ·</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009101137281.png" alt="image-20231009101137281"></p><p>éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜æ•°æ®ï¼Œå­˜å‚¨æŒ‡é’ˆï¼ŒæŒ‡å‘æ•°æ®å—çš„æŸè¡Œ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009101501849.png" alt="image-20231009101501849"></p><h2 id="äºŒçº§ç´¢å¼•">äºŒçº§ç´¢å¼•</h2><p>éƒ½æ˜¯éèšé›†ç´¢å¼•</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009101811893.png" alt="image-20231009101811893"></p><p>ä¾‹å¦‚ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009101904247.png" alt="image-20231009101904247"></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009101929869.png" alt="image-20231009101929869"></p><p>æŸ¥æ‰¾çš„æ—¶å€™å°±ä¼šæ¯”æ™®é€šæŸ¥æ‰¾æ›´å¿«</p><p>æ™®é€šæŸ¥æ‰¾ï¼šæŸ¥æ‰¾æ¯ä¸€æ¡æ•°æ®ç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„age</p><p>ç´¢å¼•æŸ¥æ‰¾ï¼šåœ¨ageçš„ç´¢å¼•è¡¨ä¸­æ‰¾åˆ°å¯¹åº”ä¸»é”®çš„å€¼å³å¯æ‰¾åˆ°æ‰€ä»¥æ•°æ®</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009102011065.png" alt="image-20231009102011065"></p><h2 id="è¦†ç›–ç´¢å¼•">è¦†ç›–ç´¢å¼•</h2><p>è¦†ç›–ç´¢å¼•æ˜¯ä¸€ä¸ªå¥½çš„ç°è±¡</p><p>å¦‚æœåªæŸ¥æ‰¾ä¸»é”®ï¼Œè¿˜æ˜¯é€šè¿‡ageç´¢å¼•æŸ¥æ‰¾ï¼Œæ‹¿åˆ°ä¸»é”®ç›´æ¥è¿”å›å³å¯</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009102157757.png" alt="image-20231009102157757"></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009102301020.png" alt="image-20231009102301020"></p><p>è¦†ç›–ç´¢å¼•çš„å…³é”®åœ¨äºï¼Œè¿™ä¸ªç´¢å¼•è¡¨ä¸­åŒ…å«äº†æŸ¥è¯¢ä¸­çš„æ‰€æœ‰åˆ—ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”¨äºæŸ¥æ‰¾çš„åˆ—ã€‚è¿™æ„å‘³ç€æ•°æ®åº“å¯ä»¥ä»ç´¢å¼•æœ¬èº«ä¸­è·å–æŸ¥è¯¢æ‰€éœ€çš„æ•°æ®ï¼Œè€Œæ— éœ€æŸ¥æ‰¾å®é™…çš„æ•°æ®è¡Œã€‚</p><h2 id="ç´¢å¼•ä¸‹æ¨">ç´¢å¼•ä¸‹æ¨</h2><p>æ˜¯äºŒçº§ç´¢å¼•çš„ä¼˜åŒ–</p><p>ä¸ä½¿ç”¨ç´¢å¼•ä¸‹æ¨æ—¶ï¼š</p><p>æ ¹æ®nameå’ŒageæŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼Œå› ä¸ºnameå’Œageæ˜¯äºŒçº§ç´¢å¼•ï¼Œå¯ä»¥æ ¹æ®ç´¢å¼•æŸ¥æ‰¾idï¼Œä½†æ˜¯è¦å›næ¬¡è¡¨ï¼Œæ‰èƒ½æŸ¥å‡ºæ‰€æœ‰æ•°æ®</p><p>æ¯ä¸€æ¬¡æ‰¾åˆ°äºŒçº§ç´¢å¼•éƒ½è¦è¿›è¡Œå›è¡¨æ“ä½œ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009102531986.png" alt="image-20231009102531986"></p><h3 id="ç´¢å¼•ä¸‹æ¨ä½œç”¨">ç´¢å¼•ä¸‹æ¨ä½œç”¨</h3><p>åœ¨äºŒçº§ç´¢å¼•è¡¨ä¸­æŸ¥å‡ºç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰idï¼Œä¸€èµ·è¿›è¡Œå›è¡¨æ“ä½œï¼Œè¿™æ ·å°±ä¼šå°†å›è¡¨çš„æ¬¡æ•°ç”±næ¬¡å˜ä¸ºä¸€æ¬¡</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009102920735.png" alt="image-20231009102920735"></p><h2 id="å•åˆ—ã€ç»„åˆç´¢å¼•">å•åˆ—ã€ç»„åˆç´¢å¼•</h2><h3 id="å•åˆ—ç´¢å¼•">å•åˆ—ç´¢å¼•</h3><p>å•åˆ—ç´¢å¼•æ˜¯åŸºäºå•ä¸ªè¡¨åˆ—çš„ç´¢å¼•ï¼Œç”¨äºåŠ é€Ÿå¯¹å•ä¸ªåˆ—çš„æœç´¢å’Œæ’åº</p><p>æé—®ï¼šå¦‚æœåˆ—æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªåˆ—å˜ä¸ºç´¢å¼•çš„æ—¶å€™ä¹Ÿæ˜¯ä¹Ÿèƒ½æ’åºå—</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009124718785.png" alt="image-20231009124718785"></p><p>åœ¨åˆ›å»ºæ•°æ®åº“æ—¶æŒ‡å®šæ’åºè§„åˆ™ä¹Ÿå¯ä»¥å®ç°æ”¯æŒä¸­æ–‡çš„æ’åº</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009124753360.png" alt="image-20231009124753360"></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009125038927.png" alt="image-20231009125038927"></p><p>æ‰€ä»¥ç´¢å¼•é¡µä¹Ÿä¼šå½¢æˆB+æ ‘çš„æ ¼å¼</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009125057311.png" alt="image-20231009125057311"></p><h3 id="è”åˆç´¢å¼•">è”åˆç´¢å¼•</h3><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009125136271.png" alt="image-20231009125136271"></p><p>ä¼šå…ˆæŒ‰ç…§ç¬¬ä¸€ä¸ªåˆ—æ¥æ’åº</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009125225612.png" alt="image-20231009125225612"></p><p>æ‰€ä»¥ï¼Œå½“è”åˆç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—æ˜¯aæ—¶ï¼Œåªèƒ½åœ¨æ¡ä»¶ä¸ºaå¼€å¤´çš„ä»»æ„ç»„åˆæ¡ä»¶æ—¶ä½¿ç”¨è¿™ä¸ªç´¢å¼•</p><p>å› ä¸ºåªæœ‰ç¬¬ä¸€åˆ—æ˜¯æœ‰åºçš„ï¼Œè€Œå…¶ä»–ç´¢å¼•åˆ—æ˜¯æ— éœ€çš„ï¼Œåªæœ‰æœ‰åºçš„æ‰èƒ½åœ¨B+æ ‘ä¸­é€šè¿‡äºŒåˆ†æ³•æŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•°æ®</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009125419742.png" alt="image-20231009125419742"></p><h3 id="åˆ†åˆ«çš„ä½¿ç”¨åœºæ™¯å’Œä¼˜åŠ¿ã€">åˆ†åˆ«çš„ä½¿ç”¨åœºæ™¯å’Œä¼˜åŠ¿ã€</h3><h4 id="è”åˆç´¢å¼•çš„ä¼˜åŠ¿">è”åˆç´¢å¼•çš„ä¼˜åŠ¿</h4><p>å‡å°‘å¼€é”€</p><p>å¯ä»¥å‡å°‘ç£ç›˜çš„å¼€é”€ï¼Œåˆ›å»ºä¸€ä¸ªè”åˆç´¢å¼•ï¼ˆa,b,cï¼‰ç›¸å½“äºåˆ›å»ºäº†(a)  (a,b)  (a,c)  (a,b,c)å››ä¸ªï¼Œ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009130121755.png" alt="image-20231009130121755"></p><p>è¦†ç›–ç´¢å¼•</p><p>å¦‚åˆ›å»ºè”åˆç´¢å¼•(a,b,c)</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009130231667.png" alt="image-20231009130231667"></p><p>æ•ˆç‡é«˜</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009144048185.png" alt="image-20231009144048185"></p><h2 id="ç´¢å¼•ä¼˜ç¼ºç‚¹">ç´¢å¼•ä¼˜ç¼ºç‚¹</h2><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009145310249.png" alt="image-20231009145310249"></p><p>ä»€ä¹ˆæ—¶å€™ç”¨å¥½</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009145542541.png" alt="image-20231009145542541"></p><h1>ä¼˜åŒ–</h1><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009145724838.png" alt="image-20231009145724838"></p><h2 id="Explain">Explain</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p>å«ä¹‰</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009154025546.png" alt="image-20231009154025546"></p><p>ä½œç”¨</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009154235795.png" alt="image-20231009154235795"></p><p>ç”¨æ³•</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009154246445.png" alt="image-20231009154246445"></p><p>explainæŸ¥å‡ºçš„æ•°æ®çš„å«ä¹‰</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009155057037.png" alt="image-20231009155057037"></p><h3 id="idåˆ—ã€tableåˆ—">idåˆ—ã€tableåˆ—</h3><p>å…ˆæ‰§è¡Œidå¤§çš„ï¼Œidç›¸åŒæ—¶ï¼Œå…ˆæ‰§è¡Œä¸‹æ–¹çš„</p><p>å¯ä»¥çœ‹è§å…ˆæ‰«æçš„productsè¡¨ï¼Œåæ‰«æçš„ordersè¡¨</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009164908787.png" alt="image-20231009164908787"></p><p>ä½¿ç”¨unionå…³é”®å­—</p><p>idä¸ºnullæ—¶æœ€åæ‰§è¡Œ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231009181539069.png" alt="image-20231009181539069"></p><p>æ‰“å¼€è¡ç”Ÿè¡¨åˆå¹¶ä¼˜åŒ–ä¹‹åï¼Œå‘ç°ä¹‹å‰idä¸º1å’Œ2çš„è¯­å¥ï¼Œéƒ½å˜ä¸ºäº†1ï¼Œè¿™æ˜¯å› ä¸ºè¡å°„è¡¨åˆå¹¶ä¼˜åŒ–</p><h2 id="æ’å…¥æ•°æ®">æ’å…¥æ•°æ®</h2><h3 id="insertä¼˜åŒ–">insertä¼˜åŒ–</h3><p>æ¯ä¸€æ¬¡insertéƒ½è¦å»ºç«‹é“¾æ¥ï¼Œæ‰€ä»¥å°½é‡æ‰¹é‡æ’å…¥</p><ul><li>æ‰¹é‡æ’å…¥<ul><li>ä¸€æ¬¡æ•°æ®500~1000æ¡è¾ƒä¸ºåˆé€‚</li><li>æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œå¯ä»¥åˆ†ä¸ºå¤šæ‰¹æ’å…¥</li></ul></li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡<ul><li>å› ä¸ºäº‹åŠ¡é»˜è®¤æäº¤ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰§è¡ŒSQLè¯­å¥éƒ½ä¼šå¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ï¼Œè¾ƒä¸ºæµªè´¹èµ„æº</li><li>ä½¿ç”¨start transactionå’Œcommitæ¥æ‰‹åŠ¨æäº¤äº‹åŠ¡</li></ul></li><li>ä¸»é”®é¡ºåºæ’å…¥<ul><li>å¤šæ¡æ•°æ®æ’å…¥æ—¶ï¼Œè¦æŒ‰ä¸»é”®çš„é¡ºåºæ’åˆ—åå†™åˆ°SQLè¯­å¥ä¸­ï¼Œåœ¨è¿›è¡Œæ’å…¥</li></ul></li></ul><h3 id="loadæŒ‡ä»¤">loadæŒ‡ä»¤</h3><p>åŒæ ·æ˜¯æ’å…¥insertå’ŒloadåŒæ ·æ’å…¥100wæ¡æ•°æ®ï¼Œinsertè€—æ—¶15åˆ†é’Ÿï¼Œloadè€—æ—¶16ç§’</p><p>å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®(æ¯”å¦‚: å‡ ç™¾ä¸‡çš„è®°å½•)ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤è¿›è¡Œæ’å…¥ã€‚æ“ä½œå¦‚ä¸‹ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010080320476.png" alt="image-20231010080320476"></p><p>æŒ‡ä»¤æ¼”ç¤º</p><p><code>â€“-local-infile</code>ä»£è¡¨å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶åŠ è½½æœ¬åœ°æ–‡ä»¶</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql â€“-<span class="keyword">local</span>-<span class="keyword">infile</span> -<span class="keyword">u</span> root -p</span><br></pre></td></tr></table></figure><p>è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º1ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global local_infile <span class="operator">=</span> <span class="number">1</span><span class="comment">;</span></span><br></pre></td></tr></table></figure><p>åŠ è½½æœ¬åœ°æ–‡ä»¶<code>/root/sql1.log</code>æ¯åˆ—æ•°æ®ç”¨<code>ï¼Œ</code>åˆ†å‰²ï¼Œæ¯è¡Œæ•°æ®ç”¨<code>\n</code>åˆ†å‰²</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span> data <span class="keyword">local</span> infile <span class="string">&#x27;/root/sql1.log&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> tb_user fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span> lines terminated <span class="keyword">by</span> <span class="string">&#x27;\n&#x27;</span> ;</span><br></pre></td></tr></table></figure><p>å®Œæˆæ•°æ®æ’å…¥</p><h2 id="ä¸»é”®ä¼˜åŒ–">ä¸»é”®ä¼˜åŒ–</h2><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨(index organized table IOT)ã€‚</p><p>InnoDBçš„é€»è¾‘ç»“æ„å›¾ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010081714528.png" alt="image-20231010081714528"></p><p>çœ‹å•ä½æ¢ç®—å‡ºï¼Œä¸€ä¸ªåŒºä¸­æœ‰64ä¸ªé¡µ</p><p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œæ•°æ®è¡Œæ˜¯è®°å½•åœ¨é€»è¾‘ç»“æ„ page é¡µä¸­çš„ï¼Œè€Œæ¯ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œé»˜è®¤16Kã€‚é‚£ä¹Ÿå°±æ„å‘³ç€ï¼Œ ä¸€ä¸ªé¡µä¸­æ‰€å­˜å‚¨çš„è¡Œä¹Ÿæ˜¯æœ‰é™çš„ï¼Œå¦‚æœæ’å…¥çš„æ•°æ®è¡Œrowåœ¨è¯¥é¡µå­˜å‚¨ä¸å°ï¼Œå°†ä¼šå­˜å‚¨åˆ°ä¸‹ä¸€ä¸ªé¡µä¸­ï¼Œé¡µä¸é¡µä¹‹é—´ä¼šé€šè¿‡æŒ‡é’ˆè¿æ¥</p><ul><li><p>é¡µåˆ†è£‚</p><ul><li><p>é¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€åŠï¼Œä¹Ÿå¯ä»¥å¡«å……100%ã€‚æ¯ä¸ªé¡µåŒ…å«äº†2-Nè¡Œæ•°æ®(å¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œ</p><p>æº¢å‡º)ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚</p><ul><li>InnoDB å­˜å‚¨å¼•æ“é»˜è®¤æƒ…å†µä¸‹æ”¯æŒçš„æœ€å¤§è¡Œå¤§å°æ˜¯çº¦ 8,060 å­—èŠ‚ï¼Œæ‰€ä»¥ä¸€è¡Œæ•°æ®çš„å¤§å°ä¸ä¼šè¶…è¿‡16k</li></ul></li></ul></li></ul><h3 id="é¡µåˆ†è£‚">é¡µåˆ†è£‚</h3><h4 id="ä¸»é”®é¡ºåºæ’å…¥æ•ˆæœ">ä¸»é”®é¡ºåºæ’å…¥æ•ˆæœ</h4><p>ä»ç£ç›˜ä¸­ç”³è¯·é¡µï¼Œ ä¸»é”®é¡ºåºæ’å…¥</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082532578.png" alt="image-20231010082532578"></p><p>ç¬¬ä¸€ä¸ªé¡µæ²¡æœ‰æ»¡ï¼Œç»§ç»­å¾€ç¬¬ä¸€é¡µæ’å…¥</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082553216.png" alt="image-20231010082553216"></p><p>å½“ç¬¬ä¸€ä¸ªä¹Ÿå†™æ»¡ä¹‹åï¼Œå†å†™å…¥ç¬¬äºŒä¸ªé¡µï¼Œé¡µä¸é¡µä¹‹é—´ä¼šé€šè¿‡æŒ‡é’ˆè¿æ¥</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082605517.png" alt="image-20231010082605517"></p><p>å½“ç¬¬äºŒé¡µå†™æ»¡äº†ï¼Œå†å¾€ç¬¬ä¸‰é¡µå†™å…¥</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082614342.png" alt="image-20231010082614342"></p><h4 id="ä¸»é”®ä¹±åºæ’å…¥æ•ˆæœ">ä¸»é”®ä¹±åºæ’å…¥æ•ˆæœ</h4><p>åŠ å…¥1#,2#é¡µéƒ½å·²ç»å†™æ»¡äº†ï¼Œå­˜æ”¾äº†å¦‚å›¾æ‰€ç¤ºçš„æ•°æ®</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082626266.png" alt="image-20231010082626266"></p><p>æ­¤æ—¶å†æ’å…¥idä¸º50çš„è®°å½•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡ä¼šå†æ¬¡å¼€å¯ä¸€ä¸ªé¡µï¼Œå†™å…¥æ–°çš„é¡µä¸­å—ï¼Ÿ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082640495.png" alt="image-20231010082640495"></p><p>ä¸ä¼šã€‚å› ä¸ºï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æ˜¯æœ‰é¡ºåºçš„ã€‚æŒ‰ç…§é¡ºåºï¼Œåº”è¯¥å­˜å‚¨åœ¨47ä¹‹åã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082708315.png" alt="image-20231010082708315"></p><p>ä½†æ˜¯47æ‰€åœ¨çš„1#é¡µï¼Œå·²ç»å†™æ»¡äº†ï¼Œå­˜å‚¨ä¸äº†50å¯¹åº”çš„æ•°æ®äº†ã€‚ é‚£ä¹ˆæ­¤æ—¶ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µ 3#ã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082730339.png" alt="image-20231010082730339"></p><p>ä½†æ˜¯å¹¶ä¸ä¼šç›´æ¥å°†50å­˜å…¥3#é¡µï¼Œè€Œæ˜¯ä¼šå°†1#é¡µåä¸€åŠçš„æ•°æ®ï¼Œç§»åŠ¨åˆ°3#é¡µï¼Œç„¶ååœ¨3#é¡µï¼Œæ’å…¥50ã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082753793.png" alt="image-20231010082753793"></p><p>ç§»åŠ¨æ•°æ®ï¼Œå¹¶æ’å…¥idä¸º50çš„æ•°æ®ä¹‹åï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼Œè¿™ä¸‰ä¸ªé¡µä¹‹é—´çš„æ•°æ®é¡ºåºæ˜¯æœ‰é—®é¢˜çš„ã€‚ 1#çš„ä¸‹ä¸€ä¸ªé¡µï¼Œåº”è¯¥æ˜¯3#ï¼Œ 3#çš„ä¸‹ä¸€ä¸ªé¡µæ˜¯2#ã€‚ æ‰€ä»¥ï¼Œæ­¤æ—¶ï¼Œéœ€è¦é‡æ–°è®¾ç½®é“¾è¡¨æŒ‡é’ˆã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082834103.png" alt="image-20231010082834103"></p><p>ä¸Šè¿°çš„è¿™ç§ç°è±¡ï¼Œç§°ä¹‹ä¸º â€œé¡µåˆ†è£‚â€ï¼Œæ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„æ“ä½œã€‚</p><h3 id="é¡µåˆå¹¶">é¡µåˆå¹¶</h3><p>ç›®å‰è¡¨ä¸­å·²æœ‰æ•°æ®çš„ç´¢å¼•ç»“æ„(å¶å­èŠ‚ç‚¹)å¦‚ä¸‹ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082929944.png" alt="image-20231010082929944"></p><p>å½“æˆ‘ä»¬å¯¹å·²æœ‰æ•°æ®è¿›è¡Œåˆ é™¤æ—¶ï¼Œå…·ä½“çš„æ•ˆæœå¦‚ä¸‹:</p><p>å½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010082944510.png" alt="image-20231010082944510"></p><p>å½“æˆ‘ä»¬ç»§ç»­åˆ é™¤2#çš„æ•°æ®è®°å½•</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010083006977.png" alt="image-20231010083006977"></p><p>å½“é¡µä¸­åˆ é™¤çš„è®°å½•è¾¾åˆ° MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰æˆ–åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010083035107.png" alt="image-20231010083035107"></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010083048428.png" alt="image-20231010083048428"></p><p>åˆ é™¤æ•°æ®ï¼Œå¹¶å°†é¡µåˆå¹¶ä¹‹åï¼Œå†æ¬¡æ’å…¥æ–°çš„æ•°æ®21ï¼Œåˆ™ç›´æ¥æ’å…¥3#é¡µ</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010083102535.png" alt="image-20231010083102535"></p><p>è¿™ä¸ªé‡Œé¢æ‰€å‘ç”Ÿçš„åˆå¹¶é¡µçš„è¿™ä¸ªç°è±¡ï¼Œå°±ç§°ä¹‹ä¸º â€œé¡µåˆå¹¶â€ã€‚</p><p>MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–è€…åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®šã€‚</p><h3 id="ç´¢å¼•è®¾è®¡åŸåˆ™">ç´¢å¼•è®¾è®¡åŸåˆ™</h3><ul><li>æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦ã€‚</li><li>æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨AUTO_INCREMENTè‡ªå¢ä¸»é”®ã€‚</li><li>å°½é‡ä¸è¦ä½¿ç”¨UUIDåšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å·ã€‚<ul><li>ä½¿ç”¨UUIDä½œä¸ºä¸»é”®ä¼šå¯¼è‡´ç´¢å¼•æ ‘çš„é«˜åº¦å¢åŠ ï¼Œå› ä¸ºUUIDçš„éšæœºæ€§ä¼šä½¿å¾—ç´¢å¼•æ ‘å®ç°å¹³è¡¡åï¼Œä¹Ÿæ›´åŠ æ·±ã€‚</li><li>UUIDé€šå¸¸æ¯”æ•´æ•°ä¸»é”®æ›´å¤§ï¼Œå ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚è¿™ä¼šå¯¼è‡´B+æ ‘åƒå†…å­˜ä¼ è¾“ç£ç›˜é¡µæ—¶é€ æˆæ›´å¤§çš„å¼€é”€</li></ul></li><li>ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹ã€‚<ul><li>ä¼šæ”¹å˜B+æ ‘çš„ç»“æ„ï¼Œé€ æˆé¢å¤–çš„æ€§èƒ½å¼€é”€</li></ul></li></ul><h2 id="order-byä¼˜åŒ–">order byä¼˜åŒ–</h2><ul><li><p>MySQLçš„æ’åºï¼Œæœ‰ä¸¤ç§æ–¹å¼</p><ul><li>ï¼ˆä½¿ç”¨å­—æ®µæ’åºï¼‰Using filesort : é€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒºsortbufferä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å« FileSort æ’åº</li><li>ï¼ˆä½¿ç”¨ç´¢å¼•æ’åºï¼‰Using index : é€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸º using indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜ã€‚</li></ul></li><li><p>å¯¹äºä»¥ä¸Šçš„ä¸¤ç§æ’åºæ–¹å¼ï¼ŒUsing indexçš„æ€§èƒ½é«˜ï¼Œè€ŒUsing filesortçš„æ€§èƒ½ä½ï¼Œæˆ‘ä»¬åœ¨ä¼˜åŒ–æ’åº</p><p>æ“ä½œæ—¶ï¼Œå°½é‡è¦ä¼˜åŒ–ä¸º Using index</p></li></ul><h3 id="Using-filesort">Using filesort</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084216298.png" alt="image-20231010084216298"></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age, phone ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084234907.png" alt="image-20231010084234907"></p><p>ç”±äº age, phone éƒ½æ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥æ­¤æ—¶å†æ’åºæ—¶ï¼Œå‡ºç°Using filesortï¼Œ æ’åºæ€§èƒ½è¾ƒä½ã€‚</p><h3 id="Using-index">Using index</h3><p>åˆ›å»ºç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_user_age_phone_aa <span class="keyword">on</span> tb_user(age,phone);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084330857.png" alt="image-20231010084330857"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age , phone;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084348514.png" alt="image-20231010084348514"></p><p>å»ºç«‹ç´¢å¼•ä¹‹åï¼Œå†æ¬¡è¿›è¡Œæ’åºæŸ¥è¯¢ï¼Œå°±ç”±åŸæ¥çš„Using filesortï¼Œ å˜ä¸ºäº† Using indexï¼Œæ€§èƒ½å°±æ˜¯æ¯”è¾ƒé«˜çš„äº†</p><h5 id="åˆ›å»ºç´¢å¼•åï¼Œæ ¹æ®age-phoneè¿›è¡Œé™åºæ’åº">åˆ›å»ºç´¢å¼•åï¼Œæ ¹æ®age, phoneè¿›è¡Œé™åºæ’åº</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span> , phone <span class="keyword">desc</span> ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084431468.png" alt="image-20231010084431468"></p><p>ä¹Ÿå‡ºç° Using indexï¼Œ ä½†æ˜¯æ­¤æ—¶Extraä¸­å‡ºç°äº† Backward index scanï¼Œè¿™ä¸ªä»£è¡¨åå‘æ‰«æç´¢å¼•ï¼Œå› ä¸ºåœ¨MySQLä¸­æˆ‘ä»¬åˆ›å»ºçš„ç´¢å¼•ï¼Œé»˜è®¤ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ˜¯ä»å°åˆ°å¤§æ’åºçš„ï¼Œè€Œæ­¤æ—¶æˆ‘ä»¬æŸ¥è¯¢æ’åºæ—¶ï¼Œæ˜¯ä»å¤§åˆ°å°ï¼Œæ‰€ä»¥ï¼Œåœ¨æ‰«ææ—¶ï¼Œå°±æ˜¯åå‘æ‰«æï¼Œå°±ä¼šå‡ºç° Backward index scanã€‚ åœ¨MySQL8ç‰ˆæœ¬ä¸­ï¼Œæ”¯æŒé™åºç´¢å¼•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºé™åºç´¢å¼•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX index_name <span class="keyword">ON</span> table_name (column_name <span class="keyword">DESC</span>)</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®age-phoneè¿›è¡Œé™åºä¸€ä¸ªå‡åºï¼Œä¸€ä¸ªé™åº">æ ¹æ®age, phoneè¿›è¡Œé™åºä¸€ä¸ªå‡åºï¼Œä¸€ä¸ªé™åº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span> , phone <span class="keyword">desc</span> ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084611840.png" alt="image-20231010084611840"></p><p>å› ä¸ºåˆ›å»ºç´¢å¼•æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šé¡ºåºï¼Œé»˜è®¤éƒ½æ˜¯æŒ‰ç…§å‡åºæ’åºçš„ï¼Œè€ŒæŸ¥è¯¢æ—¶ï¼Œä¸€ä¸ªå‡åºï¼Œä¸€ä¸ªé™åºï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°Using filesortã€‚</p><p>ä½¿ç”¨<code>show index from tb_user</code>å¯ä»¥æŸ¥çœ‹åˆ°ç´¢å¼•æ˜¯å‡åºè¿˜æ˜¯é™åº</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084626269.png" alt="image-20231010084626269"></p><p>ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œè¿™ä¸ªè”åˆç´¢å¼•ä¸­ age å‡åºæ’åºï¼Œphone å€’åºæ’åºã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_user_age_phone_ad <span class="keyword">on</span> tb_user(age <span class="keyword">asc</span> ,phone <span class="keyword">desc</span>);</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084804616.png" alt="image-20231010084804616"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> id,age,phone <span class="keyword">from</span> tb_user <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span> , phone <span class="keyword">desc</span> ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084820923.png" alt="image-20231010084820923"></p><p>å‡åº/é™åºè”åˆç´¢å¼•ç»“æ„å›¾ç¤º:</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084942346.png" alt="image-20231010084942346"></p><p><strong>æ³¨æ„ï¼šåœ¨ä¿è¯ageå‡åºçš„æƒ…å†µä¸‹ï¼Œphoneåªåœ¨ä¸€ä¸ªå­èŠ‚ç‚¹å†…æ˜¯é™åºçš„</strong></p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010084946212.png" alt="image-20231010084946212"></p><h3 id="order-byä¼˜åŒ–åŸåˆ™">order byä¼˜åŒ–åŸåˆ™:</h3><ul><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åº, ä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰</li><li>å¦‚æœä¸å¯é¿å…çš„å‡ºç°filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å°sort_buffer_size(é»˜è®¤256k)</li></ul><h2 id="group-byä¼˜åŒ–">group byä¼˜åŒ–</h2><p>åœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹SQLï¼ŒæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> profession , <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_user <span class="keyword">group</span> <span class="keyword">by</span> profession ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010085308765.png" alt="image-20231010085308765"></p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨é’ˆå¯¹äº profession ï¼Œ ageï¼Œ status åˆ›å»ºä¸€ä¸ªè”åˆç´¢å¼•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> index idx_user_pro_age_sta <span class="keyword">on</span> tb_user(profession , age , status); </span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€ï¼Œå†æ‰§è¡Œå‰é¢ç›¸åŒçš„SQLæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> profession , <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> tb_user <span class="keyword">group</span> <span class="keyword">by</span> profession ;</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010085410024.png" alt="image-20231010085410024"></p><p>å†æ‰§è¡Œå¦‚ä¸‹çš„åˆ†ç»„æŸ¥è¯¢SQLï¼ŒæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010085422099.png" alt="image-20231010085422099"></p><p>è¿™é‡Œæ²¡æœ‰ä½¿ç”¨æœ€å·¦å‰ç¼€</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010085431922.png" alt="image-20231010085431922"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå¦‚æœä»…ä»…æ ¹æ®ageåˆ†ç»„ï¼Œå°±ä¼šå‡ºç° Using temporary ï¼›è€Œå¦‚æœæ˜¯ æ ¹æ®profession,ageä¸¤ä¸ªå­—æ®µåŒæ—¶åˆ†ç»„ï¼Œåˆ™ä¸ä¼šå‡ºç° Using temporaryã€‚åŸå› æ˜¯å› ä¸ºå¯¹äºåˆ†ç»„æ“ä½œï¼Œåœ¨è”åˆç´¢å¼•ä¸­ï¼Œä¹Ÿæ˜¯ç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™çš„ã€‚</p><h4 id="æ‰€ä»¥ï¼Œåœ¨åˆ†ç»„æ“ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹ä¸¤ç‚¹è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æå‡æ€§èƒ½ï¼š">æ‰€ä»¥ï¼Œåœ¨åˆ†ç»„æ“ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹ä¸¤ç‚¹è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æå‡æ€§èƒ½ï¼š</h4><ul><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡ã€‚<ul><li>æ³¨æ„ï¼šè”åˆç´¢å¼•è¦ä½¿ç”¨æœ€å·¦å‰ç¼€</li></ul></li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ul><h2 id="limitä¼˜åŒ–">limitä¼˜åŒ–</h2><p>åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œå¦‚æœè¿›è¡Œlimitåˆ†é¡µæŸ¥è¯¢ï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œè¶Šå¾€åï¼Œåˆ†é¡µæŸ¥è¯¢æ•ˆç‡è¶Šä½ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹æ‰§è¡Œlimitåˆ†é¡µæŸ¥è¯¢è€—æ—¶å¯¹æ¯”ï¼š</p><p><img src="../assets/image/Mysql%E4%BC%98%E5%8C%96_Image/image-20231010090658656.png" alt="image-20231010090658656"></p><p>é€šè¿‡æµ‹è¯•æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œè¶Šå¾€åï¼Œåˆ†é¡µæŸ¥è¯¢æ•ˆç‡è¶Šä½ï¼Œè¿™å°±æ˜¯åˆ†é¡µæŸ¥è¯¢çš„é—®é¢˜æ‰€åœ¨ã€‚</p><p>å› ä¸ºï¼Œå½“åœ¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ‰§è¡Œ limit 2000000,10 ï¼Œæ­¤æ—¶éœ€è¦MySQLæ’åºå‰2000010 è®°å½•ï¼Œä»…ä»…è¿”å› 2000000 - 2000010 çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§</p><p>ä¼˜åŒ–æ€è·¯: ä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»º è¦†ç›–ç´¢å¼• èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_sku t , (<span class="keyword">select</span> id <span class="keyword">from</span> tb_sku <span class="keyword">order</span> <span class="keyword">by</span> id limit <span class="number">2000000</span>,<span class="number">10</span>) a <span class="keyword">where</span> t.id <span class="operator">=</span> a.id;</span><br></pre></td></tr></table></figure><p>è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç´¢å¼•ï¼Œå®ƒåŒ…å«äº†æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰åˆ—ï¼Œä»è€Œé¿å…äº†å¯¹å®é™…æ•°æ®è¡Œçš„æŸ¥æ‰¾ã€‚è¿™ç§ç´¢å¼•èƒ½å¤Ÿç›´æ¥æ»¡è¶³æŸ¥è¯¢çš„éœ€æ±‚ï¼Œè€Œä¸éœ€è¦è®¿é—®è¡¨ä¸­çš„å®é™…æ•°æ®è¡Œï¼Œå› æ­¤å¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p><h2 id="countä¼˜åŒ–">countä¼˜åŒ–</h2><h2 id="updateä¼˜åŒ–">updateä¼˜åŒ–</h2><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="çº¢é»‘æ ‘æ˜¯æ€ä¹ˆä¿è¯å¹³è¡¡çš„">çº¢é»‘æ ‘æ˜¯æ€ä¹ˆä¿è¯å¹³è¡¡çš„</h3><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒé€šè¿‡ä¸€ç³»åˆ—çš„è§„åˆ™æ¥ä¿è¯æ ‘çš„é«˜åº¦å§‹ç»ˆä¿æŒåœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„èŒƒå›´å†…ï¼Œä»è€Œä¿è¯äº†åŸºæœ¬çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ€§èƒ½åœ¨æœ€åæƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŒåœ¨å¯¹æ•°æ—¶é—´å¤æ‚åº¦å†…ã€‚</p><p>çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ä¸»è¦ä¾èµ–äºä»¥ä¸‹äº”ä¸ªæ€§è´¨ï¼š</p><ol><li><p><strong>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²ï¼Œè¦ä¹ˆæ˜¯é»‘è‰²ã€‚</strong></p></li><li><p><strong>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ã€‚</strong></p></li><li><p><strong>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼‰æ˜¯é»‘è‰²çš„ã€‚</strong></p></li><li><p><strong>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚</strong></p></li><li><p><strong>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶å­èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œå‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ•°ç›®è¢«ç§°ä¸ºé»‘é«˜åº¦ã€‚</strong></p></li></ol><p>è¿™äº›è§„åˆ™ç¡®ä¿äº†çº¢é»‘æ ‘åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€ã€‚è¿™ä½¿å¾—çº¢é»‘æ ‘ä¿æŒäº†ç›¸å¯¹å¹³è¡¡ï¼Œä»è€Œä¿è¯äº†å¯¹æ•°æ—¶é—´çš„æ“ä½œå¤æ‚åº¦ã€‚</p><p>å½“æ’å…¥æˆ–åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œçº¢é»‘æ ‘å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é€šè¿‡æ—‹è½¬å’Œé‡æ–°ç€è‰²ç­‰æ“ä½œæ¥ä¿æŒè¿™äº›æ€§è´¨ã€‚</p><p>å…·ä½“çš„æ“ä½œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol><li><p><strong>å·¦æ—‹ï¼ˆLeft Rotationï¼‰</strong></p></li><li><p><strong>å³æ—‹ï¼ˆRight Rotationï¼‰</strong></p></li><li><p><strong>å˜è‰²ï¼ˆColor Flipï¼‰</strong></p></li><li><p><strong>æ’å…¥</strong></p></li><li><p><strong>åˆ é™¤</strong></p></li></ol><p>è¿™äº›æ“ä½œä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ï¼Œä½¿å…¶åœ¨æ’å…¥å’Œåˆ é™¤ç­‰åŠ¨æ€æ“ä½œæ—¶èƒ½å¤Ÿä¿æŒè¾ƒå¥½çš„æ€§èƒ½ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶çº¢é»‘æ ‘å¯ä»¥ä¿è¯ç›¸å¯¹å¹³è¡¡ï¼Œä½†å®ƒä¸æ˜¯ç»å¯¹å¹³è¡¡çš„ï¼Œå› æ­¤åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰å…¶ä»–å¹³è¡¡æ ‘ç»“æ„æ›´é€‚åˆçš„åœºæ™¯ã€‚</p><h3 id="explainå…³é”®å­—">explainå…³é”®å­—</h3><p><code>EXPLAIN</code> æ˜¯ä¸€ä¸ªåœ¨ MySQL ä¸­ç”¨äºæŸ¥è¯¢ä¼˜åŒ–çš„å…³é”®å­—ã€‚å½“ä½ æ‰§è¡Œä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥æ—¶ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢å‰åŠ ä¸Š <code>EXPLAIN</code> å…³é”®å­—ï¼ŒMySQL å°†ä¼šè§£é‡Šè¯¥æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œè€Œä¸ä¼šå®é™…æ‰§è¡ŒæŸ¥è¯¢ï¼Œä»è€Œå¸®åŠ©ä½ åˆ†æå’Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚</p><p><code>EXPLAIN</code> è¿”å›ä¸€ä¸ªæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„ç»“æœé›†ï¼Œè¿™ä¸ªç»“æœé›†åŒ…å«æœ‰å…³æŸ¥è¯¢æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š</p><ol><li><p><strong>æ‰§è¡Œé¡ºåºï¼š</strong> æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­çš„æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œé¡ºåºã€‚</p></li><li><p><strong>è®¿é—®ç±»å‹ï¼š</strong> æ¯ä¸ªæ­¥éª¤çš„æ•°æ®è®¿é—®æ–¹å¼ï¼Œä¾‹å¦‚å…¨è¡¨æ‰«æã€ç´¢å¼•æ‰«æã€èŒƒå›´æ‰«æç­‰ã€‚</p></li><li><p><strong>æ‰«æçš„è¡¨ï¼š</strong> åœ¨æŸ¥è¯¢æ‰§è¡Œä¸­æ¶‰åŠçš„è¡¨çš„åç§°ã€‚</p></li><li><p><strong>æ‰«æçš„è¡Œæ•°ï¼š</strong> æ¯ä¸ªæ­¥éª¤æ‰«æçš„è¡Œæ•°ä¼°è®¡å€¼ã€‚</p></li><li><p><strong>ä½¿ç”¨çš„ç´¢å¼•ï¼š</strong> å¦‚æœæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå°†æ˜¾ç¤ºä½¿ç”¨çš„ç´¢å¼•åç§°ã€‚</p></li><li><p><strong>é¢å¤–ä¿¡æ¯ï¼š</strong> æä¾›æœ‰å…³æŸ¥è¯¢æ‰§è¡Œçš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨äº†ä¸´æ—¶è¡¨ã€æ–‡ä»¶æ’åºç­‰ã€‚</p></li></ol><p>é€šè¿‡åˆ†æ <code>EXPLAIN</code> çš„è¾“å‡ºï¼Œä½ å¯ä»¥äº†è§£åˆ°æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œå¹¶å†³å®šæ˜¯å¦éœ€è¦è¿›è¡Œç´¢å¼•ä¼˜åŒ–ã€é‡å†™æŸ¥è¯¢æˆ–è€…è°ƒæ•´æ•°æ®åº“è¡¨ç»“æ„ç­‰æ“ä½œæ¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>EXPLAIN</code> å…³é”®å­—ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> your_table <span class="keyword">WHERE</span> column1 <span class="operator">=</span> <span class="string">&#x27;value&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šè¿°æŸ¥è¯¢åï¼Œä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„ç»“æœé›†ï¼Œä»ä¸­å¯ä»¥äº†è§£åˆ°æŸ¥è¯¢çš„æ‰§è¡Œæ–¹å¼å’Œå¯èƒ½çš„ä¼˜åŒ–æœºä¼šã€‚</p><p><code>EXPLAIN</code> æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚æŸ¥è¯¢æˆ–éœ€è¦ä¼˜åŒ–æ€§èƒ½çš„æŸ¥è¯¢æ—¶ã€‚å®ƒå¯ä»¥å¸®åŠ©æ•°æ®åº“ç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜æ›´å¥½åœ°ç†è§£æ•°æ®åº“å¼•æ“æ˜¯å¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢çš„ï¼Œä»è€Œåšå‡ºæœ‰é’ˆå¯¹æ€§çš„æ€§èƒ½ä¼˜åŒ–å†³ç­–ã€‚</p><h3 id="æ’åºè§„åˆ™">æ’åºè§„åˆ™</h3><p>MySQLä¸­å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œè¿™æ ·ä½ å¯ä»¥å®ç°ç‰¹å®šçš„æ’åºéœ€æ±‚ã€‚è‡ªå®šä¹‰æ’åºè§„åˆ™é€šå¸¸é€šè¿‡ä½¿ç”¨<code>COLLATE</code>å­å¥æ¥å®ç°ï¼Œ<code>COLLATE</code>å­å¥å…è®¸ä½ æŒ‡å®šç”¨äºæ’åºå’Œæ¯”è¾ƒçš„å­—ç¬¦é›†ä»¥åŠæ’åºè§„åˆ™ã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æ’åºè§„åˆ™çš„ç¤ºä¾‹ä»¥åŠå®ƒä»¬çš„åŒºåˆ«ï¼š</p><ol><li><p><strong>é»˜è®¤æ’åºè§„åˆ™ï¼ˆBinary Sortingï¼‰ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQL ä½¿ç”¨äºŒè¿›åˆ¶æ’åºè§„åˆ™ï¼Œå®ƒå°†å­—ç¬¦æŒ‰å…¶å­—èŠ‚å€¼è¿›è¡Œæ’åºã€‚è¿™æ„å‘³ç€å¤§å†™å­—æ¯ä¼šæ’åœ¨å°å†™å­—æ¯å‰ï¼Œè€Œä¸è€ƒè™‘å®ƒä»¬çš„å­—æ¯é¡ºåºã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> user_table <span class="keyword">ORDER</span> <span class="keyword">BY</span> name;</span><br></pre></td></tr></table></figure></li><li><p><strong>è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼ˆCase-Insensitive Sortingï¼‰ï¼š</strong> å¦‚æœä½ æƒ³è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™çš„æ’åºï¼Œå¯ä»¥ä½¿ç”¨<code>COLLATE</code>å­å¥æ¥æŒ‡å®šä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„æ’åºè§„åˆ™ï¼Œå¦‚<code>utf8_general_ci</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> user_table <span class="keyword">ORDER</span> <span class="keyword">BY</span> name <span class="keyword">COLLATE</span> utf8_general_ci;</span><br></pre></td></tr></table></figure></li><li><p><strong>è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼ˆAccent-Insensitive Sortingï¼‰ï¼š</strong> å¦‚æœä½ éœ€è¦è¿›è¡Œä¸åŒºåˆ†é‡éŸ³ç¬¦å·ï¼ˆdiacriticsï¼‰çš„æ’åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œå¦‚<code>utf8_general_ci</code>ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> user_table <span class="keyword">ORDER</span> <span class="keyword">BY</span> name <span class="keyword">COLLATE</span> utf8_general_ci;</span><br></pre></td></tr></table></figure></li></ol><p>ä¸­æ–‡åˆ—ä¹Ÿèƒ½å®ç°æ’åºï¼Œä½†éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œä¸­æ–‡æ’åºéœ€è¦ä½¿ç”¨æ”¯æŒä¸­æ–‡å­—ç¬¦é›†çš„æ’åºè§„åˆ™ã€‚é€šå¸¸ï¼ŒUTF-8å­—ç¬¦é›†çš„ä¸€äº›æ’åºè§„åˆ™å¯ä»¥ç”¨äºä¸­æ–‡æ’åºã€‚ä¾‹å¦‚ï¼Œ<code>utf8_general_ci</code>æ’åºè§„åˆ™å¯ä»¥ç”¨äºä¸åŒºåˆ†å¤§å°å†™å’Œä¸åŒºåˆ†é‡éŸ³ç¬¦å·çš„ä¸­æ–‡æ’åºã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ éœ€è¦æ›´ç²¾ç»†çš„ä¸­æ–‡æ’åºï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ç‰¹å®šçš„ä¸­æ–‡æ’åºè§„åˆ™ï¼Œä¾‹å¦‚<code>utf8_unicode_ci</code>æˆ–<code>utf8mb4_unicode_ci</code>ã€‚è¿™äº›è§„åˆ™è€ƒè™‘äº†ä¸­æ–‡å­—ç¬¦çš„å­—æ¯é¡ºåºå’Œé‡éŸ³ç¬¦å·ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°æ»¡è¶³ä¸­æ–‡æ’åºéœ€æ±‚ã€‚</p><p>æ€»ä¹‹ï¼ŒMySQLå…è®¸ä½ åˆ›å»ºè‡ªå®šä¹‰æ’åºè§„åˆ™ï¼Œä»¥æ»¡è¶³ä¸åŒè¯­è¨€å’Œæ’åºéœ€æ±‚ã€‚ä½ å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™æ¥å®ç°ä½ çš„æ’åºéœ€æ±‚ï¼ŒåŒ…æ‹¬ä¸­æ–‡åˆ—çš„æ’åºã€‚</p><h3 id="MySQL8-0ä¸­çš„é™åºç´¢å¼•å’Œç´¢å¼•çš„åŒºåˆ«">MySQL8.0ä¸­çš„é™åºç´¢å¼•å’Œç´¢å¼•çš„åŒºåˆ«</h3><p>MySQL 8.0 ä¸­çš„é™åºç´¢å¼•å’Œæ™®é€šç´¢å¼•ä¸»è¦æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p><ol><li><p><strong>ç´¢å¼•æ’åºæ–¹å¼ï¼š</strong></p><ul><li><strong>æ™®é€šç´¢å¼•ï¼ˆå‡åºç´¢å¼•ï¼‰ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLçš„ç´¢å¼•æ˜¯å‡åºçš„ï¼Œè¿™æ„å‘³ç€ç´¢å¼•ä¼šæŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºå­˜å‚¨æ•°æ®ã€‚</li><li><strong>é™åºç´¢å¼•ï¼š</strong> é™åºç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç´¢å¼•ï¼Œå®ƒä¼šæŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºå­˜å‚¨æ•°æ®ã€‚</li></ul></li><li><p><strong>æŸ¥è¯¢æ€§èƒ½ï¼š</strong></p><ul><li><strong>æ™®é€šç´¢å¼•ï¼ˆå‡åºç´¢å¼•ï¼‰ï¼š</strong> å½“æ‚¨ä½¿ç”¨æ™®é€šç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼ŒMySQLå¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ˆä¾‹å¦‚<code>WHERE</code>å­å¥ä¸­ä½¿ç”¨<code>BETWEEN</code>æˆ–<code>&gt;</code>å’Œ<code>&lt;</code>ç­‰æ¡ä»¶ï¼‰æ—¶ã€‚</li><li><strong>é™åºç´¢å¼•ï¼š</strong> é™åºç´¢å¼•åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹å¯èƒ½ä¼šé™ä½æŸ¥è¯¢æ€§èƒ½ï¼Œå› ä¸ºå®ƒä¸å¦‚å‡åºç´¢å¼•é‚£æ ·æœ‰æ•ˆåœ°æ”¯æŒå‡åºçš„æŸ¥è¯¢ã€‚å¦‚æœæ‚¨çš„æŸ¥è¯¢é€šå¸¸éœ€è¦æŒ‰å‡åºæ’åºç»“æœï¼Œä½¿ç”¨é™åºç´¢å¼•å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li></ul></li><li><p><strong>è¯­æ³•å’Œåˆ›å»ºæ–¹å¼ï¼š</strong></p><ul><li><strong>æ™®é€šç´¢å¼•ï¼ˆå‡åºç´¢å¼•ï¼‰ï¼š</strong> æ™®é€šç´¢å¼•æ˜¯é»˜è®¤çš„ç´¢å¼•ç±»å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>CREATE INDEX</code>è¯­å¥æˆ–åœ¨è¡¨å®šä¹‰ä¸­çš„åˆ—ä¸Šä½¿ç”¨<code>INDEX</code>å…³é”®å­—æ¥åˆ›å»ºå®ƒä»¬ã€‚</li><li><strong>é™åºç´¢å¼•ï¼š</strong> è‹¥è¦åˆ›å»ºé™åºç´¢å¼•ï¼Œæ‚¨éœ€è¦æ˜ç¡®æŒ‡å®š<code>DESC</code>å…³é”®å­—ï¼Œä¾‹å¦‚ï¼š<code>CREATE INDEX index_name ON table_name (column_name DESC)</code>ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li><strong>æ™®é€šç´¢å¼•ï¼ˆå‡åºç´¢å¼•ï¼‰ï¼š</strong> æ™®é€šç´¢å¼•é€šå¸¸é€‚ç”¨äºå¤§å¤šæ•°æŸ¥è¯¢åœºæ™¯ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦å‡åºæ’åºç»“æœæˆ–æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ã€‚</li><li><strong>é™åºç´¢å¼•ï¼š</strong> é™åºç´¢å¼•é€‚ç”¨äºä¸€äº›ç‰¹æ®Šéœ€æ±‚ï¼Œä¾‹å¦‚éœ€è¦æŒ‰é™åºæ’åºçš„æŸ¥è¯¢ï¼Œæˆ–è€…æŸäº›ç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œæ™®é€šç´¢å¼•å’Œé™åºç´¢å¼•çš„ä¸»è¦åŒºåˆ«åœ¨äºç´¢å¼•çš„æ’åºæ–¹å¼ä»¥åŠå¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ã€‚åœ¨é€‰æ‹©ç´¢å¼•ç±»å‹æ—¶ï¼Œåº”æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚å’ŒæŸ¥è¯¢æ¨¡å¼æ¥å†³å®šä½¿ç”¨å“ªç§ç±»å‹çš„ç´¢å¼•ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ™®é€šç´¢å¼•ï¼ˆå‡åºç´¢å¼•ï¼‰æ˜¯é»˜è®¤å’Œå¸¸ç”¨çš„ç´¢å¼•ç±»å‹ï¼Œè€Œé™åºç´¢å¼•åˆ™æ˜¯ç”¨äºç‰¹æ®Šæƒ…å†µçš„é€‰é¡¹ã€‚</p><h3 id="explain">explain</h3><p><code>EXPLAIN</code> æ˜¯ MySQL ä¸­ç”¨äºæŸ¥è¯¢ä¼˜åŒ–çš„å…³é”®å·¥å…·ä¹‹ä¸€ã€‚æ‰§è¡Œ <code>EXPLAIN</code> æŸ¥è¯¢å¯ä»¥è®©æ‚¨æŸ¥çœ‹ MySQL æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æ‰§è¡Œè®¡åˆ’ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£æŸ¥è¯¢æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œå¹¶å¸®åŠ©æ‚¨è¿›è¡Œæ€§èƒ½è°ƒä¼˜ã€‚<code>EXPLAIN</code> æŸ¥è¯¢è¿”å›ä¸€ç»„åˆ—ï¼Œæ¯åˆ—éƒ½æä¾›äº†æœ‰å…³æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’çš„é‡è¦ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ <code>EXPLAIN</code> æŸ¥è¯¢è¿”å›çš„åˆ—çš„å«ä¹‰ï¼š</p><ol><li><p><strong>idï¼ˆæ ‡è¯†ç¬¦ï¼‰ï¼š</strong> è¿™æ˜¯æŸ¥è¯¢çš„æ ‡è¯†ç¬¦ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚åœ¨å¤æ‚æŸ¥è¯¢ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°å¤šä¸ªæŸ¥è¯¢æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚è¿™äº›æ ‡è¯†ç¬¦çš„å€¼æŒ‰ç…§æŸ¥è¯¢æ‰§è¡Œçš„é¡ºåºé€’å¢ã€‚</p></li><li><p><strong>select_typeï¼ˆæŸ¥è¯¢ç±»å‹ï¼‰ï¼š</strong> è¿™æ˜¯æè¿°æŸ¥è¯¢ç±»å‹çš„åˆ—ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼š</p><ul><li><code>SIMPLE</code>ï¼šç®€å•æŸ¥è¯¢ï¼Œä¸åŒ…å«å­æŸ¥è¯¢æˆ–è”æ¥ã€‚</li><li><code>PRIMARY</code>ï¼šæœ€å¤–å±‚æŸ¥è¯¢ã€‚</li><li><code>SUBQUERY</code>ï¼šå­æŸ¥è¯¢ã€‚</li><li><code>DERIVED</code>ï¼šæ´¾ç”Ÿè¡¨ï¼Œé€šå¸¸æ˜¯ä»å­æŸ¥è¯¢æˆ–ä¸´æ—¶è¡¨ä¸­æ´¾ç”Ÿå‡ºçš„ç»“æœã€‚</li><li><code>UNION</code>ï¼šè”åˆæŸ¥è¯¢ã€‚</li><li><code>UNION RESULT</code>ï¼šè”åˆæŸ¥è¯¢çš„ç»“æœã€‚</li><li><code>DEPENDENT SUBQUERY</code>ï¼šä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„å­æŸ¥è¯¢ã€‚</li><li>ç­‰ç­‰ã€‚</li></ul></li><li><p><strong>tableï¼ˆè¡¨åï¼‰ï¼š</strong> è¿™æ˜¯æŸ¥è¯¢æ¶‰åŠçš„è¡¨çš„åç§°ã€‚å¦‚æœæŸ¥è¯¢æ¶‰åŠå¤šä¸ªè¡¨ï¼Œæ‚¨ä¼šçœ‹åˆ°å¤šä¸ªè¡¨åä»¥é€—å·åˆ†éš”ã€‚</p></li><li><p><strong>partitionsï¼ˆåˆ†åŒºï¼‰ï¼š</strong> å¦‚æœæŸ¥è¯¢ä½¿ç”¨äº†åˆ†åŒºè¡¨ï¼Œè¿™ä¸€åˆ—ä¼šæ˜¾ç¤ºæŸ¥è¯¢æ¶‰åŠçš„åˆ†åŒºã€‚</p></li><li><p><strong>typeï¼ˆè®¿é—®ç±»å‹ï¼‰ï¼š</strong> è¿™æ˜¯æŸ¥è¯¢æ‰§è¡Œçš„è®¿é—®æ–¹å¼ï¼Œé€šå¸¸è¡¨ç¤ºäº†å¦‚ä½•è®¿é—®è¡¨æ¥æ£€ç´¢æ•°æ®ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼š</p><ul><li><code>ALL</code>ï¼šå…¨è¡¨æ‰«æï¼ŒæŸ¥è¯¢å°†æ£€ç´¢æ•´ä¸ªè¡¨ã€‚</li><li><code>INDEX</code>ï¼šä½¿ç”¨ç´¢å¼•æ‰«ææ¥æ£€ç´¢æ•°æ®ã€‚</li><li><code>RANGE</code>ï¼šä½¿ç”¨ç´¢å¼•èŒƒå›´æ‰«æã€‚</li><li><code>REF</code>ï¼šä½¿ç”¨éå”¯ä¸€ç´¢å¼•æ¥æŸ¥æ‰¾å•ä¸ªè¡Œã€‚</li><li><code>FULLTEXT</code>ï¼šä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚</li><li><code>CONST</code>ï¼šä½¿ç”¨å¸¸é‡å€¼ã€‚</li><li><code>SYSTEM</code>ï¼šç³»ç»Ÿè¡¨çš„è®¿é—®ã€‚</li><li>ç­‰ç­‰ã€‚</li></ul></li><li><p><strong>possible_keysï¼ˆå¯èƒ½çš„ç´¢å¼•ï¼‰ï¼š</strong> è¿™åˆ—æ˜¾ç¤ºäº†å¯èƒ½ç”¨äºæŸ¥è¯¢çš„ç´¢å¼•åˆ—è¡¨ã€‚è¿™äº›ç´¢å¼•æ˜¯ä¼˜åŒ–å™¨è€ƒè™‘ä½¿ç”¨çš„æ½œåœ¨ç´¢å¼•ã€‚å¤šä¸ªç´¢å¼•ä»¥é€—å·åˆ†éš”ã€‚</p></li><li><p><strong>keyï¼ˆå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼‰ï¼š</strong> è¿™æ˜¯æŸ¥è¯¢å®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œåˆ™ä¸º <code>NULL</code>ã€‚</p></li><li><p><strong>key_lenï¼ˆç´¢å¼•é•¿åº¦ï¼‰ï¼š</strong> è¿™æ˜¯ä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦ï¼Œé€šå¸¸ä»¥å­—èŠ‚ä¸ºå•ä½è¡¨ç¤ºã€‚</p></li><li><p><strong>refï¼ˆç´¢å¼•ä¹‹é—´çš„æ¯”è¾ƒå€¼ï¼‰ï¼š</strong> å¦‚æœæŸ¥è¯¢æ¶‰åŠå¤šä¸ªè¡¨ï¼Œè¿™åˆ—æ˜¾ç¤ºäº†ç”¨äºæ¯”è¾ƒçš„åˆ—æˆ–å¸¸é‡å€¼ã€‚</p></li><li><p><strong>rowsï¼ˆæ‰«æçš„è¡Œæ•°ï¼‰ï¼š</strong> è¿™æ˜¯ä¼°è®¡çš„æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰«æçš„è¡Œæ•°ã€‚å®ƒä¸ä¸€å®šæ˜¯å‡†ç¡®çš„ï¼Œä½†å¯ä»¥ç”¨äºè¯„ä¼°æŸ¥è¯¢çš„ç›¸å¯¹æˆæœ¬ã€‚</p></li><li><p><strong>filteredï¼ˆè¿‡æ»¤ç‡ï¼‰ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œè¡¨ç¤ºä¼˜åŒ–å™¨æ ¹æ®ç´¢å¼•é€‰æ‹©çš„è¡Œæ•°å æ€»è¡Œæ•°çš„ç™¾åˆ†æ¯”ã€‚å®ƒç”¨äºè¯„ä¼°æŸ¥è¯¢çš„é€‰æ‹©æ€§ã€‚</p></li><li><p><strong>Extraï¼ˆé™„åŠ ä¿¡æ¯ï¼‰ï¼š</strong> è¿™åˆ—åŒ…å«äº†é¢å¤–çš„æ‰§è¡Œè®¡åˆ’ä¿¡æ¯ï¼Œå¯èƒ½åŒ…æ‹¬æ’åºæ–¹å¼ã€ä½¿ç”¨çš„ä¸´æ—¶è¡¨ã€ä½¿ç”¨çš„æ–‡ä»¶æ’åºã€ä½¿ç”¨çš„ç´¢å¼•ç±»å‹ç­‰ç­‰ã€‚</p></li></ol><p>é€šè¿‡åˆ†æ <code>EXPLAIN</code> æŸ¥è¯¢çš„è¾“å‡ºï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°ç†è§£æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¯†åˆ«æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œç´¢å¼•ä¼˜åŒ–ã€æŸ¥è¯¢é‡å†™æˆ–å…¶ä»–æ€§èƒ½è°ƒæ•´ã€‚è¿™äº›åˆ—æä¾›äº†æœ‰å…³æŸ¥è¯¢æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼Œæœ‰åŠ©äºä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚</p><h4 id="Extraä¸­å¯èƒ½å¾—å€¼">Extraä¸­å¯èƒ½å¾—å€¼</h4><p>åœ¨ MySQL çš„ <code>EXPLAIN</code> æŸ¥è¯¢è¾“å‡ºä¸­ï¼Œ<code>Extra</code> åˆ—åŒ…å«äº†ä¸€äº›é¢å¤–çš„æ‰§è¡Œè®¡åˆ’ä¿¡æ¯ï¼Œç”¨äºæä¾›æœ‰å…³æŸ¥è¯¢æ‰§è¡Œçš„è¿›ä¸€æ­¥ä¸Šä¸‹æ–‡ã€‚è¿™äº›é¢å¤–çš„ä¿¡æ¯æœ‰åŠ©äºç†è§£æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ä¸­çš„ä¸€äº›ç»†èŠ‚å’Œç‰¹æ®Šæƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½åŒ…å«åœ¨ <code>Extra</code> åˆ—ä¸­çš„ä¿¡æ¯ï¼š</p><ol><li><p><strong>Using indexï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰ï¼Œè¿™æ„å‘³ç€æŸ¥è¯¢çš„ç»“æœå¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–ï¼Œè€Œä¸éœ€è¦è®¿é—®è¡¨çš„å®é™…æ•°æ®è¡Œã€‚è¿™é€šå¸¸ä¼šæé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå› ä¸ºå®ƒå‡å°‘äº†ç£ç›˜I/Oæ“ä½œã€‚</p></li><li><p><strong>Using whereï¼š</strong> è¡¨ç¤ºåœ¨æŸ¥è¯¢æ‰§è¡Œä¸­ä½¿ç”¨äº† <code>WHERE</code> å­å¥è¿›è¡Œæ¡ä»¶è¿‡æ»¤ã€‚è¿™æ˜¯å¤§å¤šæ•°æŸ¥è¯¢çš„æ­£å¸¸è¡Œä¸ºã€‚</p></li><li><p><strong>Using filesortï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œä¸­éœ€è¦è¿›è¡Œæ–‡ä»¶æ’åºï¼Œé€šå¸¸æ˜¯å› ä¸ºæ²¡æœ‰åˆé€‚çš„ç´¢å¼•æ¥æ”¯æŒæ’åºæ“ä½œï¼Œæˆ–è€… <code>ORDER BY</code> å­å¥åŒ…å«å¤æ‚çš„æ’åºæ¡ä»¶ã€‚</p></li><li><p><strong>Using join bufferï¼š</strong> è¡¨ç¤ºåœ¨è¿æ¥æ“ä½œä¸­ä½¿ç”¨äº†è¿æ¥ç¼“å†²åŒºã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨è¿æ¥è¡¨çš„å¤§å°è¾ƒå¤§æˆ–è¿æ¥æ“ä½œå¤æ‚çš„æƒ…å†µä¸‹ã€‚</p></li><li><p><strong>Impossible WHEREï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢çš„ <code>WHERE</code> å­å¥åŒ…å«äº†ä¸å¯èƒ½æ»¡è¶³çš„æ¡ä»¶ï¼Œå› æ­¤æŸ¥è¯¢ä¸ä¼šè¿”å›ä»»ä½•ç»“æœã€‚è¿™å¯ä»¥å¸®åŠ©æ‚¨è¯†åˆ«æŸ¥è¯¢æ¡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</p></li><li><p><strong>Select tables optimized awayï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢ä¼˜åŒ–å™¨å·²ç»ä¼˜åŒ–æ‰äº†ä¸éœ€è¦çš„è¡¨ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨æ²¡æœ‰ä½¿ç”¨çš„è¡¨æˆ–æ²¡æœ‰è¿æ¥æ¡ä»¶çš„è¡¨ã€‚</p></li><li><p><strong>No tables usedï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ²¡æœ‰ä½¿ç”¨ä»»ä½•è¡¨ï¼Œé€šå¸¸æ˜¯ç”±äº <code>SELECT</code> å­å¥ä¸­æ²¡æœ‰æŒ‡å®šè¡¨æˆ–æŸ¥è¯¢æ¡ä»¶è¢«ä¼˜åŒ–æ‰äº†ã€‚</p></li><li><p><strong>Distinctï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œä¸­ä½¿ç”¨äº† <code>DISTINCT</code> å…³é”®å­—æ¥å»é‡ç»“æœé›†ã€‚</p></li><li><p><strong>Full scan on NULL keyï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œä¸­å‘ç”Ÿäº†å¯¹ç´¢å¼•ä¸Šçš„ NULL é”®çš„å®Œæ•´æ‰«æã€‚</p></li><li><p><strong>Range checked for each recordï¼š</strong> è¡¨ç¤ºåœ¨æŸ¥è¯¢æ‰§è¡Œä¸­å¯¹æ¯ä¸ªè®°å½•éƒ½è¿›è¡Œäº†èŒƒå›´æ£€æŸ¥ï¼Œé€šå¸¸å‘ç”Ÿåœ¨ä½¿ç”¨èŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢ã€‚</p></li><li><p><strong>Using temporaryï¼š</strong> å¦‚å‰é¢æåˆ°çš„ï¼Œåœ¨æ’åºã€åˆ†ç»„å’Œè¿æ¥ç­‰æ“ä½œä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å¤„ç†ä¸­é—´ç»“æœã€‚</p></li><li><p><strong>Using filesortï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œä¸­éœ€è¦ä½¿ç”¨æ–‡ä»¶æ’åºæ¥æ»¡è¶³æ’åºæ“ä½œçš„è¦æ±‚ã€‚</p></li><li><p><strong>Using index conditionï¼š</strong> è¡¨ç¤ºæŸ¥è¯¢æ‰§è¡Œä¸­ä½¿ç”¨äº†ç´¢å¼•æ¡ä»¶æ¨é€ä¼˜åŒ–ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†æŸ¥è¯¢è¿‡æ»¤æ“ä½œå¯ä»¥åœ¨ç´¢å¼•å±‚é¢æ‰§è¡Œï¼Œè€Œä¸éœ€è¦è®¿é—®è¡¨çš„å®é™…æ•°æ®ã€‚</p></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§çš„ <code>Extra</code> åˆ—ä¸­å¯èƒ½åŒ…å«çš„ä¿¡æ¯ã€‚ç†è§£ <code>Extra</code> åˆ—ä¸­çš„å†…å®¹å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¯†åˆ«æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ã€‚ä¸åŒçš„ <code>Extra</code> ä¿¡æ¯å¯èƒ½éœ€è¦ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Mysqlä¼˜åŒ–çš„åŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://momoao.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://momoao.github.io/tags/MySQL/"/>
    
    <category term="ä¼˜åŒ–" scheme="https://momoao.github.io/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Javaé›†åˆæ¡†æ¶</title>
    <link href="https://momoao.github.io/posts/202310071028.html"/>
    <id>https://momoao.github.io/posts/202310071028.html</id>
    <published>2023-10-07T00:19:03.000Z</published>
    <updated>2023-10-07T02:37:30.343Z</updated>
    
    <content type="html"><![CDATA[<h1>Javaé›†åˆæ¡†æ¶</h1><h2 id="å¸¸ç”¨ç»“æ„">å¸¸ç”¨ç»“æ„</h2><p><img src="../assets/image/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6_Image/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.png" alt="Javaé›†åˆæ¡†æ¶"></p><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Javaé›†åˆæ¡†æ¶çš„åŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis-Plus</title>
    <link href="https://momoao.github.io/posts/202309142103.html"/>
    <id>https://momoao.github.io/posts/202309142103.html</id>
    <published>2023-09-14T10:19:03.000Z</published>
    <updated>2023-10-18T11:26:10.816Z</updated>
    
    <content type="html"><![CDATA[<h1>MyBatis-Plus</h1><div class="note info flat"><p>å‚è€ƒï¼šå­¦ä¹ å‚è€ƒBç«™å°šç¡…è°·-MyBatisPlusæ•™ç¨‹</p></div><p><a href="https://baomidou.com/pages/24112f/">MyBatis-Pluså®˜ç½‘æ–‡æ¡£</a></p><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p><strong>MyBatis-Plus</strong>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <strong>MyBatis****çš„å¢å¼ºå·¥å…·</strong>ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Š<strong>åªåšå¢å¼ºä¸åšæ”¹å˜</strong>ï¼Œä¸º</p><p><strong>ç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿ</strong>ã€‚</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915155128685.png" alt="image-20230915155128685"></p><h3 id="ç‰¹æ€§"><strong>ç‰¹æ€§</strong></h3><p><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p><p><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</p><p><strong>å¼ºå¤§çš„</strong> <strong>CRUD</strong> <strong>æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ†</p><p>CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</p><p><strong>æ”¯æŒ</strong> <strong>Lambda</strong> <strong>å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p><p><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±</p><p>é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p><p><strong>æ”¯æŒ</strong> <strong>ActiveRecord</strong> <strong>æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼º</p><p>å¤§çš„ CRUD æ“ä½œ</p><p><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</p><p><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€</p><p>Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</p><p><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰</p><p>åŒäºæ™®é€š List æŸ¥è¯¢</p><p><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€</p><p>Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</p><p><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡º</p><p>æ…¢æŸ¥è¯¢</p><p><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²</p><p>è¯¯æ“ä½œ</p><h3 id="æ”¯æŒæ•°æ®åº“">æ”¯æŒæ•°æ®åº“</h3><p>ä»»ä½•èƒ½ä½¿ç”¨MyBatisè¿›è¡Œ CRUD, å¹¶ä¸”æ”¯æŒæ ‡å‡† SQL çš„æ•°æ®åº“ï¼Œå…·ä½“æ”¯æŒæƒ…å†µå¦‚ä¸‹</p><p>MySQLï¼ŒOracleï¼ŒDB2ï¼ŒH2ï¼ŒHSQLï¼ŒSQLiteï¼ŒPostgreSQLï¼ŒSQLServerï¼ŒPhoenixï¼ŒGauss ï¼Œ</p><p>ClickHouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼ŒCubridï¼ŒGoldilocksï¼Œcsiidb</p><p>è¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®</p><p>åº“ï¼Œç€šé«˜æ•°æ®åº“</p><h3 id="æ¡†æ¶ç»“æ„">æ¡†æ¶ç»“æ„</h3><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915155214820.png" alt="image-20230915155214820"></p><h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><p>IDEï¼šidea 2022.3</p><p>JDKï¼šJDK8+</p><p>æ„å»ºå·¥å…·ï¼šmaven 3.5.4</p><p>MySQLç‰ˆæœ¬ï¼šMySQL 8.3</p><p>Spring Bootï¼š2.6.3</p><p>MyBatis-Plusï¼š3.5.1</p><h2 id="åˆè¯†">åˆè¯†</h2><p>åœ¨iocå®¹å™¨ä¸­åªèƒ½å­˜åœ¨ç±»å¯¹åº”çš„beanä¸èƒ½å­˜åœ¨æ¥å£å¯¹åº”çš„bean</p><h3 id="æ•°æ®åº“">æ•°æ®åº“</h3><p>ä½¿ç”¨MySQLåˆ›å»ºæ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `mybatis_plus` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;</span><br><span class="line">use `mybatis_plus`;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">`id` bigint(20) NOT NULL COMMENT &#x27;ä¸»é”®ID&#x27;,</span><br><span class="line">`name` varchar(30) DEFAULT NULL COMMENT &#x27;å§“å&#x27;,</span><br><span class="line">`age` int(11) DEFAULT NULL COMMENT &#x27;å¹´é¾„&#x27;,</span><br><span class="line">`email` varchar(50) DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user (id, name, age, email) VALUES</span><br><span class="line">(1, &#x27;Jone&#x27;, 18, &#x27;test1@baomidou.com&#x27;),</span><br><span class="line">(2, &#x27;Jack&#x27;, 20, &#x27;test2@baomidou.com&#x27;),</span><br><span class="line">(3, &#x27;Tom&#x27;, 28, &#x27;test3@baomidou.com&#x27;),</span><br><span class="line">(4, &#x27;Sandy&#x27;, 21, &#x27;test4@baomidou.com&#x27;),</span><br><span class="line">(5, &#x27;Billie&#x27;, 24, &#x27;test5@baomidou.com&#x27;);</span><br></pre></td></tr></table></figure><h3 id="IDEA">IDEA</h3><p>ä½¿ç”¨IDEAåˆ›å»ºSpringBootå·¥ç¨‹</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915151757559.png" alt="image-20230915151757559"></p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915151831974.png" alt="image-20230915151831974"></p><p>å¼•å…¥mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®application-yml">é…ç½®application.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment"># é…ç½®æ•°æ®æºç±»å‹</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="comment"># é…ç½®è¿æ¥æ•°æ®åº“çš„å„ä¸ªä¿¡æ¯</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;userSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">mysql123456</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¯åŠ¨ç±»">åˆ›å»ºå¯åŠ¨ç±»</h3><p>åœ¨Spring Bootå¯åŠ¨ç±»ä¸­æ·»åŠ @MapperScanæ³¨è§£ï¼Œæ‰«æmapperåŒ…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisplusApplication</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MybatisplusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å®ä½“">æ·»åŠ å®ä½“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ </span></span><br><span class="line"><span class="comment">//@NoArgsConstructor</span></span><br><span class="line"><span class="comment">//æ‰€æœ‰å‚æ•°çš„æœ‰å‚æ„é€ </span></span><br><span class="line"><span class="comment">//@AllArgsConstructor</span></span><br><span class="line"><span class="comment">//@Getter</span></span><br><span class="line"><span class="comment">//@Setter</span></span><br><span class="line"><span class="comment">//@EqualsAndHashCode</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ Mapper">æ·»åŠ Mapper</h3><p>BaseMapperæ¥å£ç”±MaBatis-plusæä¾›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•">æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆï¼Œè‹¥æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™å¯ä»¥è®¾ç½®nullä¸ºå‚æ•°</span></span><br><span class="line">        <span class="comment">//ç›¸å½“äºselect (æ‰€æœ‰åˆ—åï¼Œå¹¶é*) from User</span></span><br><span class="line">        List&lt;User&gt; list = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‘ç°    private UserMapper userMapper;è¿™è¡ŒæŠ¥é”™ï¼Œæ˜¯å› ä¸ºUserMapper æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç³»ç»Ÿä¼šç”»çº¢çº¿æç¤ºï¼šâ€œæ— æ³•è‡ªåŠ¨è£…é…ï¼Œæ‰¾ä¸åˆ°â€˜UserMapperâ€™çš„beanâ€ï¼Œè¿™æ˜¯å› ä¸ºUserMapper ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¦åœ¨UserMapper æ¥å£çš„å®šä¹‰ä¸ŠåŠ ä¸€ä¸ª@Repositoryæ³¨è§£</p><p>å°†è¿™ä¸ªæ¥å£æ ‡è¯†ä¸ºæŒä¹…å±‚ç»„ä»¶ï¼ˆç±»ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡è¯†ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ æ—¥å¿—åŠŸèƒ½">æ·»åŠ æ—¥å¿—åŠŸèƒ½</h3><p>åœ¨ymlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ è¿™ä¸ªåŠŸèƒ½åè¾“å‡ºçš„æ—¥å¿—ä¸­å°†å‡ºç°MyBatis-Plusè‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œçš„SQLè¯­å¥</p><h3 id="CRUDæµ‹è¯•">CRUDæµ‹è¯•</h3><h4 id="å¢åŠ ">å¢åŠ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å®ç°æ–°å¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//INSERT INTO user ( id, name, age, email ) VALUES ( ?, ?, ?, ? )</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="comment">//user.setId(100L);</span></span><br><span class="line">    user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">23</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;zhangsan@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">    System.out.println(<span class="string">&quot;id:&quot;</span>+user.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤">åˆ é™¤</h4><p>ä¸€å…±æœ‰5ç§æ–¹æ³•</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915175602725.png" alt="image-20230915175602725"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡idåˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE id=?</span></span><br><span class="line">    <span class="comment">//æ³¨æ„è¿™é‡Œå› ä¸ºIDçš„å€¼è¶…å‡ºäº†intçš„èŒƒå›´ï¼Œæ‰€ä»¥è¦åŠ ä¸€ä¸ªLï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°å­—æ˜¯ä¸€ä¸ªé•¿æ•´æ•°</span></span><br><span class="line">    <span class="comment">/*int result = userMapper.deleteById(1492767055210991617L);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;result:&quot;+result);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®mapé›†åˆä¸­æ‰€è®¾ç½®çš„æ¡ä»¶åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">        map.put(&quot;name&quot;, &quot;å¼ ä¸‰&quot;);</span></span><br><span class="line"><span class="comment">        map.put(&quot;age&quot;, 23);</span></span><br><span class="line"><span class="comment">        int result = userMapper.deleteByMap(map);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;result:&quot;+result);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é€šè¿‡å¤šä¸ªidå®ç°æ‰¹é‡åˆ é™¤</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    List&lt;Long&gt; list = Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteBatchIds(list);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Serializable</code> æ˜¯ Java ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæ ‡è®°ç±»çš„å®ä¾‹å¯ä»¥è¢«åºåˆ—åŒ–ï¼ˆå³ï¼Œå¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ä»¥ä¾¿äºå­˜å‚¨æˆ–ä¼ è¾“ï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¯ä»¥ååºåˆ—åŒ–ï¼ˆå°†å­—èŠ‚åºåˆ—é‡æ–°è½¬æ¢ä¸ºå¯¹è±¡ï¼‰ã€‚<code>Serializable</code> æ¥å£åœ¨ Java æ ‡å‡†åº“ä¸­ä½äº <code>java.io</code> åŒ…ä¸­ã€‚</p><h4 id="æ›´æ”¹">æ›´æ”¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//UPDATE user SET name=?, email=? WHERE id=?</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">4L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;lisi@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: UPDATE<span class="built_in"> user </span><span class="built_in">SET</span> <span class="attribute">name</span>=?, <span class="attribute">email</span>=? WHERE <span class="attribute">id</span>=?</span><br><span class="line">==&gt; Parameters: æå››(String), lisi@atguigu.com(String), 4(Long)</span><br><span class="line">&lt;==    Updates: 1</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢">æŸ¥è¯¢</h4><p>Serializableç±»å‹çš„å‚æ•°ä»£è¡¨è¿™ä¸ªå‚æ•°å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915181717416.png" alt="image-20230915181717416"></p><ol><li>æ ¹æ®idæŸ¥è¯¢</li><li>æ ¹æ®idæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ï¼ˆåˆ©ç”¨çš„<code>where id in (?,?,?)</code>çš„æ–¹å¼ï¼‰</li><li>æ ¹æ®Map&lt;String,Object&gt;ä¸­çš„å…·ä½“å‚æ•°æŸ¥è¯¢ç”¨æˆ·</li><li>æŸ¥è¯¢æ‰€æœ‰ä¿¡æ¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE id=?</span></span><br><span class="line">    <span class="comment">/*User user = userMapper.selectById(1L);</span></span><br><span class="line"><span class="comment">    System.out.println(user);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®å¤šä¸ªidæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    <span class="comment">/*List&lt;Long&gt; list = Arrays.asList(1L, 2L, 3L);</span></span><br><span class="line"><span class="comment">    List&lt;User&gt; users = userMapper.selectBatchIds(list);</span></span><br><span class="line"><span class="comment">    users.forEach(System.out::println);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®mapé›†åˆä¸­çš„æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">    map.put(&quot;name&quot;, &quot;Jack&quot;);</span></span><br><span class="line"><span class="comment">    map.put(&quot;age&quot;, 20);</span></span><br><span class="line"><span class="comment">    List&lt;User&gt; users = userMapper.selectByMap(map);</span></span><br><span class="line"><span class="comment">    users.forEach(System.out::println);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = userMapper.selectMapById(1L);</span></span><br><span class="line"><span class="comment">    System.out.println(map);*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> id,name,age,email <span class="keyword">FROM</span> <span class="keyword">user</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: </span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: id, name, age, email</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">1</span>, Jone, <span class="number">18</span>, test1<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">2</span>, Jack, <span class="number">20</span>, test2<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">3</span>, Tom, <span class="number">28</span>, test3<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">4</span>, æå››, <span class="number">21</span>, lisi<span class="variable">@atguigu</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">5</span>, Billie, <span class="number">24</span>, test5<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰CRUD">è‡ªå®šä¹‰CRUD</h3><p>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmapperç›®å½•ï¼ˆå¿…é¡»æ˜¯mapperï¼‰ï¼Œåˆ›å»ºæ˜ å°„æ–‡ä»¶UserMapper.xml</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915183357703.png" alt="image-20230915183357703"></p><p>ç»™UserMapperç±»å¢åŠ å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Map&lt;String, Object&gt; <span class="title function_">selectMapById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†è‡ªå·±å®šä¹‰çš„æ–¹æ³•åœ¨UserMapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œå®ç°ï¼Œä¹‹åå°±å¯ä»¥ç”¨äº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatisplus.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Map&lt;String, Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectMapById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age,email from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é€šç”¨Service">é€šç”¨Service</h3><p>è¯´æ˜:</p><p>é€šç”¨ Service CRUD å°è£…IServiceæ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD é‡‡ç”¨ get æŸ¥è¯¢å•è¡Œ remove åˆ é™¤ list æŸ¥è¯¢é›†åˆ page åˆ†é¡µ å‰ç¼€å‘½åæ–¹å¼åŒºåˆ† Mapper å±‚é¿å…æ··æ·†ï¼Œæ³›å‹ T ä¸ºä»»æ„å®ä½“å¯¹è±¡</p><p>å»ºè®®å¦‚æœå­˜åœ¨è‡ªå®šä¹‰é€šç”¨ Service æ–¹æ³•çš„å¯èƒ½ï¼Œè¯·åˆ›å»ºè‡ªå·±çš„ IBaseService ç»§æ‰¿</p><p>Mybatis-Plus æä¾›çš„åŸºç±»</p><p>å®˜ç½‘åœ°å€ï¼š<a href="https://baomidou.com/pages/49cc81/#service-crud-%E6%8E%A5%E5%8F%A3">https://baomidou.com/pages/49cc81/#service-crud-æ¥å£</a></p><p>MyBatis-Plusä¸­æœ‰ä¸€ä¸ªæ¥å£ IServiceå’Œå…¶å®ç°ç±» ServiceImplï¼Œå°è£…äº†å¸¸è§çš„ä¸šåŠ¡å±‚é€»è¾‘</p><p>è¯¦æƒ…æŸ¥çœ‹æºç IServiceå’ŒServiceImpl</p><h4 id="åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»">åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* UserServiceç»§æ‰¿IServiceæ¨¡æ¿æä¾›çš„åŸºç¡€åŠŸèƒ½</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®ç°æ¥å£çš„æ—¶å€™è®°å¾—ç»§æ‰¿ServiceImplï¼Œå› ä¸ºæ¥å£ä¸­æœ‰å¥½å¤šæ–¹æ³•éƒ½æ²¡å®ç°ï¼Œæ‰€ä»¥è¦ç»§æ‰¿ServiceImplï¼Œå…¶ä¸­æœ‰æ‰€æœ‰å®ç°å¥½çš„æ–¹æ³•</p><p>æ³¨è§£@Serviceç”¨äºå°†ç±»æ ‡è¯†ä¸ºä¸€ä¸ªæœåŠ¡å±‚çš„ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•é€šç”¨Service">æµ‹è¯•é€šç”¨Service</h3><h4 id="æŸ¥è¯¢æ€»è®°å½•æ•°">æŸ¥è¯¢æ€»è®°å½•æ•°</h4><p>count()çš„å®ç°åœ¨ServiceImplä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="comment">//SELECT COUNT( * ) FROM user</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ‰¹é‡æ·»åŠ ">æ‰¹é‡æ·»åŠ </h4><p>BaseMapper<T>æ¥å£åªæä¾›åº•å±‚æ•°æ®æ“ä½œæ–¹å¼ï¼Œæ‰€ä»¥IService<T>æä¾›ä¸€äº›é«˜çº§çš„ä¸šåŠ¡æ“ä½œ</p><p>saveBatch()çš„å®ç°åœ¨ServiceImplä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertMore</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ‰¹é‡æ·»åŠ </span></span><br><span class="line">        <span class="comment">//INSERT INTO user ( id, name, age ) VALUES ( ?, ?, ? )</span></span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setName(<span class="string">&quot;ybc&quot;</span>+i);</span><br><span class="line">            user.setAge(<span class="number">20</span>+i);</span><br><span class="line">            list.add(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> userService.saveBatch(list);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BaseMapper-T-å’ŒIService-T-çš„å…³ç³»å’Œä½¿ç”¨æ€»ç»“">BaseMapper&lt;T&gt;å’ŒIService&lt;T&gt;çš„å…³ç³»å’Œä½¿ç”¨æ€»ç»“</h3><p>ä½¿ç”¨æ–¹å¼ä¸åŒ</p><h4 id="BaseMapper">BaseMapper</h4><p>å†™ä¸€ä¸ªè‡ªå·±çš„æ¥å£ç»§æ‰¿BaseMapperå¹¶æŒ‡å®šè¦è¿›è¡Œæ“ä½œçš„å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨è§£ç”¨äºå°†æ¥å£æ ‡è¯†ä¸ºç»„ä»¶</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Map&lt;String, Object&gt; <span class="title function_">selectMapById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨mapperï¼ˆå¿…é¡»æ˜¯è¿™ä¸ªç›®å½•ï¼‰ä¸­å†™xmlå®šä¹‰è‡ªå·±å£°æ˜çš„æ–¹æ³•selectMapById()</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915190350792.png" alt="image-20230915190350792"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatisplus.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Map&lt;String, Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectMapById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age,email from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥ç”¨äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Object&gt; map = userMapper.selectMapById(<span class="number">1L</span>);</span><br><span class="line">      System.out.println(map);</span><br></pre></td></tr></table></figure><h4 id="IService">IService</h4><p>ç±»ServiceImplå¯¹BaseMapperæ¥å£æ ¹æ®IServiceæ¥å£è¿›è¡Œäº†å¢å¼º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceImpl</span>&lt;M <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;T&gt;, T&gt; <span class="keyword">implements</span> <span class="title class_">IService</span>&lt;T&gt; &#123;</span><br><span class="line">    ...è¿™é‡Œå®ç°äº†å¾ˆå¤šé«˜çº§çš„ä¸šåŠ¡æ–¹æ³•ï¼Œæ¯”BaseMapperä¸­çš„åŠŸèƒ½æ›´å¼ºå¤§</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰è‡ªå·±çš„æ¥å£ç»§æ‰¿IService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°è‡ªå·±å®šä¹‰çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥ä½¿ç”¨ServiceImplä¸­çš„é«˜çº§ä¸šåŠ¡æ–¹æ³•äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="comment">//SELECT COUNT( * ) FROM user</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="AIæ€»ç»“">AIæ€»ç»“</h4><p><code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶ä¸­çš„ä¸¤ä¸ªé‡è¦æ¥å£ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºååŠ©å¼€å‘è€…åœ¨Javaåº”ç”¨ä¸­è¿›è¡Œæ•°æ®æŒä¹…åŒ–æ“ä½œã€‚è¿™ä¸¤ä¸ªæ¥å£çš„å…³ç³»å¦‚ä¸‹ï¼š</p><ol><li><p><strong><code>IService&lt;T&gt;</code> æ¥å£</strong>ï¼š</p><ul><li><p><code>IService&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶æä¾›çš„ä¸€ä¸ªé«˜çº§æœåŠ¡æ¥å£ï¼Œç”¨äºå®šä¹‰æ•°æ®è®¿é—®æœåŠ¡çš„ä¸€äº›é€šç”¨æ–¹æ³•ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>IService&lt;T&gt;</code> çš„å®ç°ç±»ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶æä¾›å¯¹æ•°æ®æŒä¹…åŒ–çš„é«˜çº§æ“ä½œã€‚</p></li><li><p><code>IService&lt;T&gt;</code> æ¥å£æä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ•°æ®æ“ä½œçš„æ–¹æ³•ï¼Œä¾‹å¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰ã€‚è¿™äº›æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼é€šå¸¸éƒ½ä¸å®ä½“ç±» <code>T</code> ç›¸å…³ï¼Œç”¨äºå®Œæˆæ•°æ®æ“ä½œã€‚</p></li><li><p>å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè‡ªå®šä¹‰å®ç° <code>IService&lt;T&gt;</code> æ¥å£çš„ç±»ï¼Œä»¥æä¾›ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„æ•°æ®æ“ä½œã€‚</p></li></ul></li><li><p><strong><code>BaseMapper&lt;T&gt;</code> æ¥å£</strong>ï¼š</p><ul><li><p><code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶æä¾›çš„ä¸€ä¸ªåŸºç¡€æ•°æ®è®¿é—®æ¥å£ï¼Œç”¨äºå®šä¹‰é€šç”¨çš„æ•°æ®è®¿é—®æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰ã€‚</p></li><li><p><code>BaseMapper&lt;T&gt;</code> æ¥å£ä¸­çš„æ–¹æ³•é€šå¸¸æ˜¯ç›´æ¥ä¸åº•å±‚æ•°æ®åº“æ“ä½œç›¸å…³çš„ï¼Œä¾‹å¦‚å¢ã€åˆ ã€æ”¹ã€æŸ¥çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ä¹Ÿä¸å®ä½“ç±» <code>T</code> ç›¸å…³ã€‚</p></li><li><p><code>BaseMapper&lt;T&gt;</code> æ¥å£çš„å®ç°ç±»é€šå¸¸æ˜¯ç”± MyBatis-Plus è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™äº›å®ç°ç±»ä¼šæ ¹æ®å®ä½“ç±»çš„å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ SQL è¯­å¥ï¼Œä»è€Œå®ç°äº†é€šç”¨çš„æ•°æ®è®¿é—®æ“ä½œã€‚</p></li></ul></li><li><p><strong>å…³ç³»</strong>ï¼š</p><ul><li><p><code>IService&lt;T&gt;</code> æ¥å£å’Œ <code>BaseMapper&lt;T&gt;</code> æ¥å£é€šå¸¸ä¸€èµ·ä½¿ç”¨ã€‚<code>IService&lt;T&gt;</code> æ¥å£å®šä¹‰äº†ä¸€äº›é«˜çº§çš„ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œè€Œ <code>BaseMapper&lt;T&gt;</code> æ¥å£æä¾›äº†åº•å±‚çš„æ•°æ®æ“ä½œæ–¹æ³•ã€‚</p></li><li><p><code>IService&lt;T&gt;</code> æ¥å£çš„å®ç°ç±»é€šå¸¸ä¼šè°ƒç”¨ <code>BaseMapper&lt;T&gt;</code> æ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ•°æ®æŒä¹…åŒ–æ“ä½œã€‚è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>IService&lt;T&gt;</code> çš„å®ç°ç±»ä¸­å°è£…æ›´é«˜çº§çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œåº•å±‚çš„æ•°æ®æ“ä½œåˆ™å§”æ‰˜ç»™ <code>BaseMapper&lt;T&gt;</code>ã€‚</p></li><li><p>é€šè¿‡ç»“åˆä½¿ç”¨ <code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code>ï¼Œå¼€å‘è€…å¯ä»¥æ›´è½»æ¾åœ°å®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®çš„åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li></ul></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶ä¸­ç”¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æŒä¹…åŒ–æ“ä½œçš„ä¸¤ä¸ªå…³é”®æ¥å£ï¼Œå®ƒä»¬ååŒå·¥ä½œä»¥å®ç°æ•°æ®æ“ä½œå’Œä¸šåŠ¡é€»è¾‘çš„åˆ†ç¦»å’Œé‡ç”¨ã€‚è¿™æœ‰åŠ©äºç®€åŒ–ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h2 id="å¸¸ç”¨æ³¨è§£">å¸¸ç”¨æ³¨è§£</h2><p>æ“ä½œçš„è¡¨åç”±å®ä½“ç±»çš„åå­—å†³å®šï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ³¨è§£è¿›è¡Œæ›´æ”¹</p><h3 id="æŒ‡å®šæ‰€æœ‰è¡¨çš„å‰ç¼€">æŒ‡å®šæ‰€æœ‰è¡¨çš„å‰ç¼€</h3><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¡¨åçš„å‰ç¼€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"><span class="attr">global-config:</span></span><br><span class="line"><span class="attr">db-config:</span></span><br><span class="line"><span class="attr">table-prefix:</span> <span class="string">t_</span> </span><br></pre></td></tr></table></figure><h3 id="TableName">@TableName</h3><p>æ›´æ”¹å®ä½“ç±»å¯¹åº”çš„è¡¨å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="TableId">@TableId</h3><p>MyBatis-Plusåªèƒ½é»˜è®¤å°†idä½œä¸ºä¸»é”®ï¼Œå¦‚æœæ”¹åä¸ºuidå°†ä¸ä¼šè‡ªåŠ¨èµ‹å€¼ï¼Œéœ€è¦ä½¿ç”¨æ³¨è§£ç‰¹åˆ«å£°æ˜</p><p>ä½¿ç”¨æ³¨è§£@TableIdå°†æŠŠè¿™ä¸ªå±æ€§å¯¹åº”çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“ä¸­ä¸»é”®å«uidï¼Œè¿™é‡Œä¹Ÿå«uidï¼Œå°±å¯ä»¥ä½¿ç”¨@TableIdå°†è¿™ä¸ªå±æ€§å¯¹åº”çš„å­—æ®µæ ‡è¯†ä¸ºä¸»é”®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†å±æ€§æ‰€å¯¹åº”çš„å­—æ®µæŒ‡å®šä¸ºä¸»é”®</span></span><br><span class="line"><span class="meta">@TableId</span></span><br><span class="line"><span class="keyword">private</span> Long uid</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨ç±»ä¸­ä¸è¿›è¡Œæ›´æ”¹ï¼Œä»ç„¶ä½¿ç”¨idï¼Œä½†æ˜¯ æƒ³å¯¹åº”æ•°æ®åº“ä¸­çš„uidï¼Œå°±éœ€è¦ç‰¹åˆ«å£°æ˜</p><p>(ä¸ç‰¹æ„è®¾ç½®å±æ€§ï¼Œé»˜è®¤ä¸ºvalue)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId(&quot;uid&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä¸Šé¢è¿™ä¸ªæŒ‡å®šä»¥å¤–è¿˜æƒ³è¦æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ï¼š</p><p>é»˜è®¤çš„ç”Ÿæˆç­–ç•¥ï¼šé›ªèŠ±ç®—æ³•</p><p>IdType.AUTOï¼šè‡ªåŠ¨é€’å¢ï¼Œå¹¶ä¸æ˜¯é›ªèŠ±ç®—æ³•äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@TableIdæ³¨è§£çš„valueå±æ€§ç”¨äºæŒ‡å®šä¸»é”®çš„å­—æ®µ</span></span><br><span class="line"><span class="comment">//@TableIdæ³¨è§£çš„typeå±æ€§è®¾ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥</span></span><br><span class="line"><span class="comment">//@TableId(value = &quot;uid&quot;, type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨ç”Ÿæˆç­–ç•¥</p><table><thead><tr><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>IdType.ASSIGN_IDï¼ˆé»˜è®¤ï¼‰</td><td>åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆæ•°æ®idï¼Œä¸æ•°æ®åº“idæ˜¯å¦è®¾ç½®è‡ªå¢æ— å…³</td></tr><tr><td>IdType.AUTO</td><td>ä½¿ç”¨æ•°æ®åº“çš„è‡ªå¢ç­–ç•¥ï¼Œæ³¨æ„ï¼Œè¯¥ç±»å‹è¯·ç¡®ä¿æ•°æ®åº“è®¾ç½®äº†idè‡ªå¢ï¼Œ</td></tr></tbody></table><p>ä¹Ÿå¯ä»¥é€šè¿‡å…¨å±€é…ç½®ï¼Œé…ç½®æ‰€æœ‰å®ä¾‹çš„idçš„ç”Ÿæˆç­–ç•¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"><span class="attr">global-config:</span></span><br><span class="line"><span class="attr">db-config:</span></span><br><span class="line"><span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h4 id="é›ªèŠ±ç®—æ³•">é›ªèŠ±ç®—æ³•</h4><h5 id="èƒŒæ™¯">èƒŒæ™¯</h5><p>éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå»åº”å¯¹æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œä»¥åº”å¯¹é€æ¸å¢é•¿çš„è®¿é—®å‹åŠ›å’Œæ•°æ®é‡ã€‚</p><p>æ•°æ®åº“çš„æ‰©å±•æ–¹å¼ä¸»è¦åŒ…æ‹¬ï¼šä¸šåŠ¡åˆ†åº“ã€ä¸»ä»å¤åˆ¶ï¼Œæ•°æ®åº“åˆ†è¡¨ã€‚</p><h5 id="æ•°æ®åº“åˆ†è¡¨">æ•°æ®åº“åˆ†è¡¨</h5><p>å°†ä¸åŒä¸šåŠ¡æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œèƒ½å¤Ÿæ”¯æ’‘ç™¾ä¸‡ç”šè‡³åƒä¸‡ç”¨æˆ·è§„æ¨¡çš„ä¸šåŠ¡ï¼Œä½†å¦‚æœä¸šåŠ¡</p><p>ç»§ç»­å‘å±•ï¼ŒåŒä¸€ä¸šåŠ¡çš„å•è¡¨æ•°æ®ä¹Ÿä¼šè¾¾åˆ°å•å°æ•°æ®åº“æœåŠ¡å™¨çš„å¤„ç†ç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œæ·˜å®çš„å‡ äº¿ç”¨æˆ·æ•°æ®ï¼Œ</p><p>å¦‚æœå…¨éƒ¨å­˜æ”¾åœ¨ä¸€å°æ•°æ®åº“æœåŠ¡å™¨çš„ä¸€å¼ è¡¨ä¸­ï¼Œè‚¯å®šæ˜¯æ— æ³•æ»¡è¶³æ€§èƒ½è¦æ±‚çš„ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹å•è¡¨æ•°æ®è¿›</p><p>è¡Œæ‹†åˆ†ã€‚</p><p>å•è¡¨æ•°æ®æ‹†åˆ†æœ‰ä¸¤ç§æ–¹å¼ï¼šå‚ç›´åˆ†è¡¨å’Œæ°´å¹³åˆ†è¡¨ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916153953975.png" alt="image-20230916153953975"></p><h5 id="å‚ç›´åˆ†è¡¨">å‚ç›´åˆ†è¡¨</h5><p>å‚ç›´åˆ†è¡¨é€‚åˆå°†è¡¨ä¸­æŸäº›ä¸å¸¸ç”¨ä¸”å äº†å¤§é‡ç©ºé—´çš„åˆ—æ‹†åˆ†å‡ºå»ã€‚</p><p>ä¾‹å¦‚ï¼Œå‰é¢ç¤ºæ„å›¾ä¸­çš„ nickname å’Œ description å­—æ®µï¼Œå‡è®¾æˆ‘ä»¬æ˜¯ä¸€ä¸ªå©šæ‹ç½‘ç«™ï¼Œç”¨æˆ·åœ¨ç­›é€‰å…¶ä»–ç”¨</p><p>æˆ·çš„æ—¶å€™ï¼Œä¸»è¦æ˜¯ç”¨ age å’Œ sex ä¸¤ä¸ªå­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œ nickname å’Œ description ä¸¤ä¸ªå­—æ®µä¸»è¦ç”¨äºå±•</p><p>ç¤ºï¼Œä¸€èˆ¬ä¸ä¼šåœ¨ä¸šåŠ¡æŸ¥è¯¢ä¸­ç”¨åˆ°ã€‚description æœ¬èº«åˆæ¯”è¾ƒé•¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸¤ä¸ªå­—æ®µç‹¬ç«‹åˆ°å¦å¤–</p><p>ä¸€å¼ è¡¨ä¸­ï¼Œè¿™æ ·åœ¨æŸ¥è¯¢ age å’Œ sex æ—¶ï¼Œå°±èƒ½å¸¦æ¥ä¸€å®šçš„æ€§èƒ½æå‡ã€‚</p><h5 id="æ°´å¹³åˆ†è¡¨">æ°´å¹³åˆ†è¡¨</h5><p>æ°´å¹³åˆ†è¡¨é€‚åˆè¡¨è¡Œæ•°ç‰¹åˆ«å¤§çš„è¡¨ï¼Œæœ‰çš„å…¬å¸è¦æ±‚å•è¡¨è¡Œæ•°è¶…è¿‡ 5000 ä¸‡å°±å¿…é¡»è¿›è¡Œåˆ†è¡¨ï¼Œè¿™ä¸ªæ•°å­—å¯ä»¥</p><p>ä½œä¸ºå‚è€ƒï¼Œä½†å¹¶ä¸æ˜¯ç»å¯¹æ ‡å‡†ï¼Œå…³é”®è¿˜æ˜¯è¦çœ‹è¡¨çš„è®¿é—®æ€§èƒ½ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒå¤æ‚çš„è¡¨ï¼Œå¯èƒ½è¶…è¿‡ 1000</p><p>ä¸‡å°±è¦åˆ†è¡¨äº†ï¼›è€Œå¯¹äºä¸€äº›ç®€å•çš„è¡¨ï¼Œå³ä½¿å­˜å‚¨æ•°æ®è¶…è¿‡ 1 äº¿è¡Œï¼Œä¹Ÿå¯ä»¥ä¸åˆ†è¡¨ã€‚</p><p>ä½†ä¸ç®¡æ€æ ·ï¼Œå½“çœ‹åˆ°è¡¨çš„æ•°æ®é‡è¾¾åˆ°åƒä¸‡çº§åˆ«æ—¶ï¼Œä½œä¸ºæ¶æ„å¸ˆå°±è¦è­¦è§‰èµ·æ¥ï¼Œå› ä¸ºè¿™å¾ˆå¯èƒ½æ˜¯æ¶æ„çš„æ€§</p><p>èƒ½ç“¶é¢ˆæˆ–è€…éšæ‚£ã€‚</p><p>æ°´å¹³åˆ†è¡¨ç›¸æ¯”å‚ç›´åˆ†è¡¨ï¼Œä¼šå¼•å…¥æ›´å¤šçš„å¤æ‚æ€§ï¼Œä¾‹å¦‚è¦æ±‚å…¨å±€å”¯ä¸€çš„æ•°æ®idè¯¥å¦‚ä½•å¤„ç†</p><h6 id="ä¸»é”®è‡ªå¢">ä¸»é”®è‡ªå¢</h6><p>â‘ ä»¥æœ€å¸¸è§çš„ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå¯ä»¥æŒ‰ç…§ 1000000 çš„èŒƒå›´å¤§å°è¿›è¡Œåˆ†æ®µï¼Œ1 ~ 999999 æ”¾åˆ°è¡¨ 1ä¸­ï¼Œ</p><p>1000000 ~ 1999999 æ”¾åˆ°è¡¨2ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>â‘¡å¤æ‚ç‚¹ï¼šåˆ†æ®µå¤§å°çš„é€‰å–ã€‚åˆ†æ®µå¤ªå°ä¼šå¯¼è‡´åˆ‡åˆ†åå­è¡¨æ•°é‡è¿‡å¤šï¼Œå¢åŠ ç»´æŠ¤å¤æ‚åº¦ï¼›åˆ†æ®µå¤ªå¤§å¯èƒ½ä¼š</p><p>å¯¼è‡´å•è¡¨ä¾ç„¶å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œä¸€èˆ¬å»ºè®®åˆ†æ®µå¤§å°åœ¨ 100 ä¸‡è‡³ 2000 ä¸‡ä¹‹é—´ï¼Œå…·ä½“éœ€è¦æ ¹æ®ä¸šåŠ¡é€‰å–åˆé€‚</p><p>çš„åˆ†æ®µå¤§å°ã€‚</p><p>â‘¢ä¼˜ç‚¹ï¼šå¯ä»¥éšç€æ•°æ®çš„å¢åŠ å¹³æ»‘åœ°æ‰©å……æ–°çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œç°åœ¨çš„ç”¨æˆ·æ˜¯ 100 ä¸‡ï¼Œå¦‚æœå¢åŠ åˆ° 1000 ä¸‡ï¼Œ</p><p>åªéœ€è¦å¢åŠ æ–°çš„è¡¨å°±å¯ä»¥äº†ï¼ŒåŸæœ‰çš„æ•°æ®ä¸éœ€è¦åŠ¨ã€‚</p><p>â‘£ç¼ºç‚¹ï¼šåˆ†å¸ƒä¸å‡åŒ€ã€‚å‡å¦‚æŒ‰ç…§ 1000 ä¸‡æ¥è¿›è¡Œåˆ†è¡¨ï¼Œæœ‰å¯èƒ½æŸä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡åªæœ‰ 1 æ¡ï¼Œè€Œ</p><p>å¦å¤–ä¸€ä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡æœ‰ 1000 ä¸‡æ¡ã€‚</p><h6 id="å–æ¨¡">å–æ¨¡</h6><p>â‘ åŒæ ·ä»¥ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬ä¸€å¼€å§‹å°±è§„åˆ’äº† 10 ä¸ªæ•°æ®åº“è¡¨ï¼Œå¯ä»¥ç®€å•åœ°ç”¨ user_id % 10 çš„å€¼æ¥</p><p>è¡¨ç¤ºæ•°æ®æ‰€å±çš„æ•°æ®åº“è¡¨ç¼–å·ï¼ŒID ä¸º 985 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·ä¸º 5 çš„å­è¡¨ä¸­ï¼ŒID ä¸º 10086 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·</p><p>ä¸º 6 çš„å­è¡¨ä¸­ã€‚</p><p>â‘¡å¤æ‚ç‚¹ï¼šåˆå§‹è¡¨æ•°é‡çš„ç¡®å®šã€‚è¡¨æ•°é‡å¤ªå¤šç»´æŠ¤æ¯”è¾ƒéº»çƒ¦ï¼Œè¡¨æ•°é‡å¤ªå°‘åˆå¯èƒ½å¯¼è‡´å•è¡¨æ€§èƒ½å­˜åœ¨é—®é¢˜ã€‚</p><p>â‘¢ä¼˜ç‚¹ï¼šè¡¨åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ã€‚</p><p>â‘£ç¼ºç‚¹ï¼šæ‰©å……æ–°çš„è¡¨å¾ˆéº»çƒ¦ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¦é‡åˆ†å¸ƒã€‚</p><h6 id="é›ªèŠ±ç®—æ³•-2">é›ªèŠ±ç®—æ³•</h6><p>é›ªèŠ±ç®—æ³•æ˜¯ç”±Twitterå…¬å¸ƒçš„åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿä¿è¯ä¸åŒè¡¨çš„ä¸»é”®çš„ä¸é‡å¤æ€§ï¼Œä»¥åŠç›¸åŒè¡¨çš„</p><p>ä¸»é”®çš„æœ‰åºæ€§ã€‚</p><p>â‘ æ ¸å¿ƒæ€æƒ³ï¼š</p><p>é•¿åº¦å…±64bitï¼ˆä¸€ä¸ªlongå‹ï¼‰ã€‚</p><p>é¦–å…ˆæ˜¯ä¸€ä¸ªç¬¦å·ä½ï¼Œ1bitæ ‡è¯†ï¼Œç”±äºlongåŸºæœ¬ç±»å‹åœ¨Javaä¸­æ˜¯å¸¦ç¬¦å·çš„ï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œæ­£æ•°æ˜¯0ï¼Œè´Ÿ</p><p>æ•°æ˜¯1ï¼Œæ‰€ä»¥idä¸€èˆ¬æ˜¯æ­£æ•°ï¼Œæœ€é«˜ä½æ˜¯0ã€‚</p><p>41bitæ—¶é—´æˆª(æ¯«ç§’çº§)ï¼Œå­˜å‚¨çš„æ˜¯æ—¶é—´æˆªçš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´æˆª - å¼€å§‹æ—¶é—´æˆª)ï¼Œç»“æœçº¦ç­‰äº69.73å¹´ã€‚</p><p>10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼Œå¯ä»¥éƒ¨ç½²åœ¨1024ä¸ªèŠ‚ç‚¹ï¼‰ã€‚</p><p>12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ã€‚</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916154134835.png" alt="image-20230916154134835"></p><p>â‘¡ä¼˜ç‚¹ï¼šæ•´ä½“ä¸ŠæŒ‰ç…§æ—¶é—´è‡ªå¢æ’åºï¼Œå¹¶ä¸”æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå†…ä¸ä¼šäº§ç”ŸIDç¢°æ’ï¼Œå¹¶ä¸”æ•ˆç‡è¾ƒé«˜ã€‚</p><h3 id="TableField">@TableField</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//æŒ‡å®šå±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</span></span><br><span class="line"><span class="meta">@TableField(&quot;user_name&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure><h3 id="TableLogic"><strong>@TableLogic</strong></h3><p>ä½¿ç”¨è¿™ä¸ªæ³¨è§£æ—¶ï¼Œæ³¨æ„è¡¨ä¸­è¦æœ‰è¿™ä¸ªåˆ—ï¼ŒisDeletedå¯¹åº”çš„è¡¨ä¸­åˆ—åæ˜¯is_deletedï¼ˆintï¼‰</p><p>0è¡¨ç¤ºè¿˜å­˜åœ¨     1è¡¨ç¤ºè¢«åˆ é™¤  ã€å¦‚æœè¿™ä¸ªå­—æ®µæ˜¯nullï¼Œé‚£ä¹ˆç­‰æ•ˆäº1ã€‘</p><p><strong>å¦‚æœå®ä¾‹ç±»ä¸­æœ‰è¿™ä¸ªæ³¨è§£å’Œå±æ€§ï¼Œåœ¨æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œä¼šå°†è¡¨ä¸­å¯¹åº”çš„å­—æ®µçš„is_deletedæ”¹ä¸º0ï¼Œè€Œä¸æ˜¯ç‰©ç†åˆ é™¤æ•°æ®</strong></p><p><strong>å¹¶ä¸”æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨whereæ·»åŠ æ¡ä»¶<code>is_deleted=0</code>ï¼Œè¡¨ç¤ºæ²¡æœ‰è¢«é€»è¾‘åˆ é™¤çš„å­—æ®µ</strong></p><p><code>@TableLogic</code> æ³¨è§£é€šå¸¸ä¸å®ä½“ç±»çš„å­—æ®µä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæ ‡è®°å“ªä¸ªå­—æ®µè¡¨ç¤ºé€»è¾‘åˆ é™¤çŠ¶æ€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer isDeleted;</span><br></pre></td></tr></table></figure><h4 id="é€»è¾‘åˆ é™¤">é€»è¾‘åˆ é™¤</h4><p>ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®</p><p>é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“</p><p>ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•</p><p>ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤</p><h4 id="å®ç°é€»è¾‘åˆ é™¤">å®ç°é€»è¾‘åˆ é™¤</h4><p><strong>step1</strong>**ï¼š**æ•°æ®åº“ä¸­åˆ›å»ºé€»è¾‘åˆ é™¤çŠ¶æ€åˆ—ï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º0</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916165948632.png" alt="image-20230916165948632"></p><p><strong>step2</strong>**ï¼š**å®ä½“ç±»ä¸­æ·»åŠ é€»è¾‘åˆ é™¤å±æ€§</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916170003305.png" alt="image-20230916170003305"></p><p><strong>step3</strong>**ï¼š**æµ‹è¯•</p><p>æµ‹è¯•åˆ é™¤åŠŸèƒ½ï¼ŒçœŸæ­£æ‰§è¡Œçš„æ˜¯ä¿®æ”¹</p><p>UPDATE t_user SET is_deleted=1 WHERE id=? AND is_deleted=0</p><p>æµ‹è¯•æŸ¥è¯¢åŠŸèƒ½ï¼Œè¢«é€»è¾‘åˆ é™¤çš„æ•°æ®é»˜è®¤ä¸ä¼šè¢«æŸ¥è¯¢</p><p>SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0</p><h2 id="æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£">æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£</h2><h3 id="wapperä»‹ç»">wapperä»‹ç»</h3><p>(wapper==åŒ…è£…å™¨ï¼ˆæ¡ä»¶æ„é€ å™¨ï¼‰)</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916171406754.png" alt="image-20230916171406754"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Wrapper</span> ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»</span><br><span class="line">    AbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ <span class="keyword">sql</span> çš„ <span class="keyword">where</span> æ¡ä»¶</span><br><span class="line">    QueryWrapper ï¼š æŸ¥è¯¢æ¡ä»¶å°è£…</span><br><span class="line">    UpdateWrapper ï¼š <span class="keyword">Update</span> æ¡ä»¶å°è£…</span><br><span class="line">    AbstractLambdaWrapper ï¼š ä½¿ç”¨Lambda è¯­æ³•</span><br><span class="line">        LambdaQueryWrapper ï¼šç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢<span class="keyword">Wrapper</span></span><br><span class="line">        LambdaUpdateWrapper ï¼š Lambda æ›´æ–°å°è£…<span class="keyword">Wrapper</span></span><br></pre></td></tr></table></figure><details class="folding-tag" yellow><summary> æŸ¥çœ‹AbstractWrapperæŠ½è±¡ç±»ç»“æ„ </summary>              <div class='content'>              <p><img src="../assets/image/MyBatis-Plus_Image/AbstractWrapper.png" alt="AbstractWrapper"></p>              </div>            </details><h3 id="QueryWrapper"><strong>QueryWrapper</strong></h3><h4 id="ç»„ä»¶æŸ¥è¯¢æ¡ä»¶">ç»„ä»¶æŸ¥è¯¢æ¡ä»¶</h4><p>åœ¨æ¡ä»¶æ„é€ å™¨ä¸­ï¼Œæ„é€ æ¡ä»¶,ç„¶åæŸ¥è¯¢æ—¶ä½¿ç”¨è¿™ä¸ªåŒ…è£…å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œé‚®ç®±ä¿¡æ¯ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jack&quot;</span>)</span><br><span class="line">        .between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">        .isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (<span class="type">name</span> <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> age <span class="keyword">BETWEEN</span> ? <span class="keyword">AND</span> ? <span class="keyword">AND</span> email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br><span class="line">==&gt; Parameters: %Jack%(String), <span class="number">20</span>(<span class="type">Integer</span>), <span class="number">30</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, age, email, is_deleted</span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">2</span>, Jack, <span class="number">20</span>, test2@baomidou.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="ç»„è£…æ’åºæ¡ä»¶">ç»„è£…æ’åºæ¡ä»¶</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŒ‰ç…§å¹´é¾„çš„é™åºæ’åºï¼Œè‹¥å¹´é¾„ç›¸åŒï¼Œåˆ™æŒ‰ç…§idå‡åºæ’åº</span></span><br><span class="line">    <span class="comment">//SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,uid ASC</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.orderByDesc(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">        .orderByAsc(<span class="string">&quot;uid&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> id,name,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted<span class="operator">=</span><span class="number">0</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span>,id <span class="keyword">ASC</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: </span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: id, name, age, email, is_deleted</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">2</span>, Jack, <span class="number">20</span>, test2<span class="variable">@baomidou</span>.com, <span class="number">0</span></span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="æ¡ä»¶çš„ä¼˜å…ˆçº§">æ¡ä»¶çš„ä¼˜å…ˆçº§</h4><p>è¿™é‡Œå‰ä¸¤ä¸ªæ¡ä»¶ä¹‹é—´æ˜¯<code>å¹¶ä¸”</code>ï¼Œå¯ä»¥ç¿»è¯‘ä¸ºandï¼Œåˆå› ä¸ºåœ¨ä¸¤ä¸ªæ¡ä»¶ä¹‹é—´ä¼šé»˜è®¤åŠ andï¼Œæ‰€ä»¥ä¸ä¼šåˆ»æ„å£°æ˜ï¼Œä½†æ˜¯<code>æˆ–</code>éœ€è¦åˆ»æ„å£°æ˜</p><p>updateï¼ˆï¼‰ä¸­éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œè¦å°†æ ¹æ®å³è¾¹çš„åŒ…è£…å™¨æŸ¥åˆ°çš„æ•°æ®æ”¹ä¸ºå·¦è¾¹çš„å®ä¾‹ç±»çš„å¯¹è±¡çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ï¼ˆå¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰Tomï¼‰æˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    <span class="comment">//UPDATE t_user SET user_name=?, email=? WHERE is_deleted=0 AND (age &gt; ? AND user_name LIKE ? OR email IS NULL)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>)</span><br><span class="line">        .like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Tom&quot;</span>)</span><br><span class="line">        .or()</span><br><span class="line">        .isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, queryWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> name=?, email=? <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (age &gt; ? <span class="keyword">AND</span> name <span class="keyword">LIKE</span> ? <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">==&gt; Parameters: å°æ˜(<span class="keyword">String</span>), test@atguigu.com(<span class="keyword">String</span>), <span class="number">20</span>(Integer), %Tom%(<span class="keyword">String</span>)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„andéœ€è¦ç‰¹æ®Šå£°æ˜æ˜¯å› ä¸ºï¼Œç¬¬ä¸€ä¸ªæ¡ä»¶æ˜¯ä¸€ä½“ï¼Œåä¸¤ä¸ªæ¡ä»¶æ˜¯ä¸€ä½“</p><p>å½“ä½¿ç”¨äº†<code>and()</code>æˆ–è€…<code>or()</code>æ–¹æ³•çš„æ—¶å€™å¦‚æœæ¡ä»¶ä¸­æœ‰lambdaè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆlambdaè¡¨è¾¾å¼ä¼˜å…ˆæ‰§è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰oå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    <span class="comment">//lambdaä¸­çš„æ¡ä»¶ä¼˜å…ˆæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//UPDATE t_user SET user_name=?, email=? WHERE is_deleted=0 AND (user_name LIKE ? AND (age &gt; ? OR email IS NULL))</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">        .and(i-&gt;i.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).or().isNotNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;å°çº¢&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, queryWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨sqlè¯­å¥ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œandä¸¤è¾¹åŠ äº†<code>()</code>çš„ä¸€è¾¹ä¼šå…ˆæ‰§è¡Œ</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> name=?, email=? <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (name <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> (age &gt; ? <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>))</span><br><span class="line">==&gt; Parameters: å°çº¢(<span class="keyword">String</span>), test@atguigu.com(<span class="keyword">String</span>), %o%(<span class="keyword">String</span>), <span class="number">20</span>(Integer)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="ç»„è£…selectå­å¥">ç»„è£…selectå­å¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·çš„ç”¨æˆ·åã€å¹´é¾„ã€é‚®ç®±ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT name,age,email FROM t_user WHERE is_deleted=0</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.select(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="comment">//selectMaps()è¿”å›Mapé›†åˆåˆ—è¡¨ï¼Œé€šå¸¸é…åˆselect()ä½¿ç”¨ï¼Œé¿å…Userå¯¹è±¡ä¸­æ²¡æœ‰è¢«æŸ¥è¯¢åˆ°çš„åˆ—å€¼ä¸ºnull</span></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> name,age,email <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted<span class="operator">=</span><span class="number">0</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: </span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: name, age, email</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: å°çº¢, <span class="number">18</span>, test<span class="variable">@atguigu</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: Jack, <span class="number">20</span>, test2<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: å°æ˜, <span class="number">28</span>, test<span class="variable">@atguigu</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: æå››, <span class="number">21</span>, lisi<span class="variable">@atguigu</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: Billie, <span class="number">24</span>, test5<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="å®ç°å­æŸ¥è¯¢">å®ç°å­æŸ¥è¯¢</h4><p><code>queryWrapper.inSql(&quot;id&quot;, &quot;select id from user where id &lt;= 100&quot;);</code></p><p>æ„æ€æ˜¯ï¼šidè¦åœ¨åé¢æŸ¥åˆ°çš„ç»“æœé›†ä¸­å­˜åœ¨==<code>id IN (select id from user where id &lt;= 100)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test07</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢idå°äºç­‰äº100çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,user_name AS name,age,email,is_deleted FROM user WHERE is_deleted=0 AND (id IN (select id from user where id &lt;= 100))</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.inSql(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;select id from user where id &lt;= 100&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: SELECT id,name,age,email,is_deleted FROM user WHERE is_deleted=<span class="number">0</span> AND (id <span class="title function_">IN</span> <span class="params">(select id from user where id &lt;= <span class="number">100</span>)</span>)</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, name, age, email, is_deleted</span><br><span class="line">&lt;==        Row: <span class="number">1</span>, å°çº¢, <span class="number">18</span>, test<span class="meta">@atguigu</span>.com, <span class="number">0</span></span><br><span class="line">&lt;==        Row: <span class="number">2</span>, Jack, <span class="number">20</span>, test2<span class="meta">@baomidou</span>.com, <span class="number">0</span></span><br><span class="line">&lt;==        Row: <span class="number">3</span>, å°æ˜, <span class="number">28</span>, test<span class="meta">@atguigu</span>.com, <span class="number">0</span></span><br><span class="line">&lt;==        Row: <span class="number">4</span>, æå››, <span class="number">21</span>, lisi<span class="meta">@atguigu</span>.com, <span class="number">0</span></span><br><span class="line">&lt;==        Row: <span class="number">5</span>, Billie, <span class="number">24</span>, test5<span class="meta">@baomidou</span>.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="UpdateWrapper"><strong>UpdateWrapper</strong></h3><p>ä½¿ç”¨<code>UpdateWrapper</code>è¿›è¡Œupdateæ“ä½œæ—¶ï¼Œéœ€è¦å°†ä¿®æ”¹çš„æ•°æ®å†™åˆ°ä¸€ä¸ªå®ä¾‹ç±»çš„å¯¹è±¡ä¸­</p><p>ä½†åœ¨<code>UpdateWrapper</code>ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨<code>set()</code>è®¾ç½®æƒ³è¦ä¿®æ”¹çš„æ•°æ®</p><p>è¿™é‡Œçš„<code>update()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯nullï¼Œä¹Ÿæ˜¯å› ä¸ºä¸Šé¢è¿™ä¸ªåŸå› ï¼Œä¹‹å‰è¿™ä¸ªå‚æ•°æ˜¯å®ä¾‹ç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™é‡Œç”¨<code>set()</code>å·²ç»è®¾ç½®è¿‡äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦å®ä¾‹ç±»å¯¹è±¡äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test08</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .and(i -&gt; i.gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    updateWrapper.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å°é»‘&quot;</span>).set(<span class="string">&quot;email&quot;</span>,<span class="string">&quot;abc@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;resultï¼š&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> name=?,email=? <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (name <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> (age &gt; ? <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="literal">NULL</span>))</span><br><span class="line">==&gt; Parameters: å°é»‘(<span class="keyword">String</span>), abc@atguigu.com(<span class="keyword">String</span>), %a%(<span class="keyword">String</span>), <span class="number">20</span>(Integer)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="condition"><strong>condition</strong></h3><p>åœ¨çœŸæ­£å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»„è£…æ¡ä»¶æ˜¯å¸¸è§çš„åŠŸèƒ½ï¼Œè€Œè¿™äº›æ¡ä»¶æ•°æ®æ¥æºäºç”¨æˆ·è¾“å…¥ï¼Œæ˜¯å¯é€‰çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç»„è£…è¿™äº›æ¡ä»¶æ—¶ï¼Œå¿…é¡»å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†è¿™äº›æ¡ä»¶ï¼Œè‹¥é€‰æ‹©åˆ™éœ€è¦ç»„è£…è¯¥æ¡ä»¶ï¼Œè‹¥æ²¡æœ‰é€‰æ‹©åˆ™ä¸€å®šä¸èƒ½ç»„è£…ï¼Œä»¥å…å½±å“SQLæ‰§è¡Œçš„ç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test09</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//SELECT id,name,age,email,is_deleted FROM user WHERE is_deleted=0 AND (name LIKE ? AND age &gt;= ? AND age &lt;= ?)</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//è¿™æ ·åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºæ›´å¥½</span></span><br><span class="line">    <span class="keyword">if</span>(StringUtils.isNotBlank(username))&#123;</span><br><span class="line">        <span class="comment">//isNotBlankåˆ¤æ–­æŸä¸ªå­—ç¬¦åˆ›æ˜¯å¦ä¸ä¸ºç©ºå­—ç¬¦ä¸²ã€ä¸ä¸ºnullã€ä¸ä¸ºç©ºç™½ç¬¦</span></span><br><span class="line">        queryWrapper.like(<span class="string">&quot;name&quot;</span>, username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ageBegin != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.ge(<span class="string">&quot;age&quot;</span>, ageBegin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ageEnd != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.le(<span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (<span class="type">name</span> <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> age &gt;= ? <span class="keyword">AND</span> age &lt;= ?)</span><br><span class="line">==&gt; Parameters: %a%(String), <span class="number">20</span>(<span class="type">Integer</span>), <span class="number">30</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, age, email, is_deleted</span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">2</span>, Jack, <span class="number">21</span>, abc@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">4</span>, Alita, <span class="number">21</span>, lisi@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œ<code>AbstractWrapper</code>çš„ä¸€äº›æ–¹æ³•å…·æœ‰å¾ˆå¥½çš„é‡è½½ï¼Œè¿™äº›é‡è½½æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¸ƒå°”ç±»å‹ï¼Œåªæœ‰å¸ƒå°”ç±»å‹ä¸ºtrueæ—¶æ‰ä¼šæŠŠåé¢çš„æ¡ä»¶ç»„è£…è¿›å»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), <span class="string">&quot;name&quot;</span>, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸º<code>ageBegin</code>æ˜¯<code>null</code>æ‰€ä»¥ä¸è¿›è¡Œç»„è£…</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (<span class="type">name</span> <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> age &lt;= ?)</span><br><span class="line">==&gt; Parameters: %a%(String), <span class="number">30</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, age, email, is_deleted</span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">2</span>, Jack, <span class="number">21</span>, abc@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">4</span>, Alita, <span class="number">21</span>, lisi@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="LambdaQueryWrapper"><strong>LambdaQueryWrapper</strong></h3><p>è¿™é‡Œçš„<code>User::getName</code>ä»£è¡¨Userå®ä¾‹ç±»ä¸­Nameå±æ€§å¯¹åº”çš„å­—æ®µï¼Œä¸Šé¢çš„ä»£ç æ¼”ç¤ºä¸­æ˜¯ç›´æ¥å†™å­—æ®µåï¼Œä¸æ–¹ä¾¿è¿›è¡Œä¿®æ”¹å¦‚æœè¿™æ ·å†™ï¼Œå½“æ•°æ®åº“è¡¨ä¸­çš„åˆ—æ”¹åæ—¶ï¼Œåªéœ€è¦åœ¨å®ä¾‹ç±»çš„å¯¹åº”çš„å±æ€§ä¸Šæ”¹æ³¨è§£å‚æ•°å°±è¡Œï¼Œä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//è¿™ä¸ªæ³¨è§£ç”¨äºæ”¹ä¸»é”®çš„åˆ«å</span></span><br><span class="line"><span class="meta">@TableId(&quot;uid&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æŒ‡å®šå±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</span></span><br><span class="line">   <span class="meta">@TableField(&quot;user_name&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure><p>å¦‚æœç¬¦åˆ<code>StringUtils.isNotBlank(username)</code>æ¡ä»¶ï¼Œå°±ç»„è£…åˆ°sqlä¸­ï¼š<code>username</code>like<code>User::getName</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test11</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, User::getAge, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, User::getAge, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (<span class="type">name</span> <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> age &lt;= ?)</span><br><span class="line">==&gt; Parameters: %a%(String), <span class="number">30</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, age, email, is_deleted</span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">2</span>, Jack, <span class="number">21</span>, abc@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">4</span>, Alita, <span class="number">21</span>, lisi@atguigu.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="LambdaUpdateWrapper"><strong>LambdaUpdateWrapper</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test12</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(User::getName, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .and(i -&gt; i.gt(User::getAge, <span class="number">20</span>).or().isNull(User::getEmail));</span><br><span class="line">    updateWrapper.set(User::getName, <span class="string">&quot;å°é»‘&quot;</span>).set(User::getEmail,<span class="string">&quot;abc@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;resultï¼š&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> name=?,email=? <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (name <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> (age &gt; ? <span class="keyword">OR</span> email <span class="keyword">IS</span> <span class="literal">NULL</span>))</span><br><span class="line">==&gt; Parameters: å°é»‘(<span class="keyword">String</span>), abc@atguigu.com(<span class="keyword">String</span>), %a%(<span class="keyword">String</span>), <span class="number">20</span>(Integer)</span><br><span class="line">&lt;==    Updates: <span class="number">2</span></span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶">æ’ä»¶</h2><h3 id="åˆ†é¡µæ’ä»¶">åˆ†é¡µæ’ä»¶</h3><p>MyBatis Plusè‡ªå¸¦åˆ†é¡µæ’ä»¶ï¼Œåªè¦ç®€å•çš„é…ç½®å³å¯å®ç°åˆ†é¡µåŠŸèƒ½</p><h4 id="æ·»åŠ é…ç½®ç±»">æ·»åŠ é…ç½®ç±»</h4><p>(Interceptor==æ‹¦æˆªå™¨)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ‰«æmapperæ¥å£æ‰€åœ¨çš„åŒ…</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="comment">//æ·»åŠ ä¹è§‚é”æ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-2">æµ‹è¯•</h4><p>å‚æ•°ä¸­å†™çš„æ˜¯ç¬¬äºŒé¡µï¼Œä½†æ˜¯åœ¨è½¬æ¢ä¸ºSQLè¯­å¥æ—¶ä¼šå˜ä¸º3ï¼Œå› ä¸ºSQLè¯­å¥ä¸­è¦çš„æ˜¯ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºç¬¬äºŒé¡µï¼Œæ¯é¡µæœ€å¤š3æ¡æ•°æ®</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    System.out.println(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> total <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: </span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: total</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">5</span></span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">1</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> id,name,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted<span class="operator">=</span><span class="number">0</span> LIMIT ?,?</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: <span class="number">3</span>(Long), <span class="number">3</span>(Long)</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: id, name, age, email, is_deleted</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">4</span>, å°é»‘, <span class="number">21</span>, abc<span class="variable">@atguigu</span>.com, <span class="number">0</span></span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">5</span>, Billie, <span class="number">24</span>, test5<span class="variable">@baomidou</span>.com, <span class="number">0</span></span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">2</span></span><br></pre></td></tr></table></figure><details class="folding-tag" yellow><summary> æŸ¥çœ‹Pageç±»ã€IPageæ¥å£ä¹‹é—´çš„å…³ç³» </summary>              <div class='content'>              <p><img src="../assets/image/MyBatis-Plus_Image/Page-16949520639831.png" alt="Page"></p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹Pageç±»ç»“æ„ </summary>              <div class='content'>              <p><img src="../assets/image/MyBatis-Plus_Image/Page.png" alt="Page"></p>              </div>            </details><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//è·å–æ‰€åœ¨é¡µçš„æ‰€æœ‰æ•°æ®ï¼Œè¿”å›çš„æ˜¯List&lt;user&gt;</span></span><br><span class="line">    System.out.println(page.getRecords());</span><br><span class="line">    <span class="comment">//è·å–æ€»é¡µæ•°</span></span><br><span class="line">    System.out.println(page.getPages());</span><br><span class="line">    <span class="comment">//è·å–æ€»è®°å½•æ•°</span></span><br><span class="line">    System.out.println(page.getTotal());</span><br><span class="line">    <span class="comment">//è·å–æœ‰æ²¡æœ‰ä¸‹ä¸€é¡µ</span></span><br><span class="line">    System.out.println(page.hasNext());</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰ä¸Šä¸€é¡µ</span></span><br><span class="line">    System.out.println(page.hasPrevious());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[User(<span class="attribute">id</span>=4, <span class="attribute">name</span>=å°é»‘, <span class="attribute">age</span>=21, <span class="attribute">email</span>=abc@atguigu.com, <span class="attribute">isDeleted</span>=0), User(<span class="attribute">id</span>=5, <span class="attribute">name</span>=Billie, <span class="attribute">age</span>=24, <span class="attribute">email</span>=test5@baomidou.com, <span class="attribute">isDeleted</span>=0)]</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="xmlè‡ªå®šä¹‰åˆ†é¡µ">xmlè‡ªå®šä¹‰åˆ†é¡µ</h4><p>è‡ªå®šä¹‰åˆ†é¡µæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡å¹´é¾„æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¹¶åˆ†é¡µ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page MyBatis-Plusæ‰€æä¾›çš„åˆ†é¡µå¯¹è±¡ï¼Œå¿…é¡»ä½äºç¬¬ä¸€ä¸ªå‚æ•°çš„ä½ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Page&lt;User&gt; <span class="title function_">selectPageVo</span><span class="params">(<span class="meta">@Param(&quot;page&quot;)</span> Page&lt;User&gt; page, <span class="meta">@Param(&quot;age&quot;)</span> Integer age)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SQLç‰‡æ®µï¼Œè®°å½•åŸºç¡€å­—æ®µ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;BaseColumns&quot;</span>&gt;</span>id,username,age,email<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Page&lt;User&gt; selectPageVo(@Param(&quot;page&quot;) Page&lt;User&gt; page, @Param(&quot;age&quot;) Integer age);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPageVo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select uid,user_name,age,email from user where age &gt; #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.yml</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mybatis-plus</span><span class="punctuation">:</span></span><br><span class="line"><span class="comment"># é…ç½®ç±»å‹åˆ«åæ‰€å¯¹åº”çš„åŒ…</span></span><br><span class="line">  <span class="attribute">type-aliases-package</span><span class="punctuation">:</span> <span class="string">com.atguigu.mybatisplus.pojo</span></span><br></pre></td></tr></table></figure><h3 id="ä¹è§‚é”">ä¹è§‚é”</h3><h4 id="åœºæ™¯">åœºæ™¯</h4><p>ä¸€ä»¶å•†å“ï¼Œæˆæœ¬ä»·æ˜¯80å…ƒï¼Œå”®ä»·æ˜¯100å…ƒã€‚è€æ¿å…ˆæ˜¯é€šçŸ¥å°æï¼Œè¯´ä½ å»æŠŠå•†å“ä»·æ ¼å¢åŠ 50å…ƒã€‚å°</p><p>ææ­£åœ¨ç©æ¸¸æˆï¼Œè€½æäº†ä¸€ä¸ªå°æ—¶ã€‚æ­£å¥½ä¸€ä¸ªå°æ—¶åï¼Œè€æ¿è§‰å¾—å•†å“ä»·æ ¼å¢åŠ åˆ°150å…ƒï¼Œä»·æ ¼å¤ª</p><p>é«˜ï¼Œå¯èƒ½ä¼šå½±å“é”€é‡ã€‚åˆé€šçŸ¥å°ç‹ï¼Œä½ æŠŠå•†å“ä»·æ ¼é™ä½30å…ƒã€‚</p><p>æ­¤æ—¶ï¼Œå°æå’Œå°ç‹åŒæ—¶æ“ä½œå•†å“åå°ç³»ç»Ÿã€‚å°ææ“ä½œçš„æ—¶å€™ï¼Œç³»ç»Ÿå…ˆå–å‡ºå•†å“ä»·æ ¼100å…ƒï¼›å°ç‹</p><p>ä¹Ÿåœ¨æ“ä½œï¼Œå–å‡ºçš„å•†å“ä»·æ ¼ä¹Ÿæ˜¯100å…ƒã€‚å°æå°†ä»·æ ¼åŠ äº†50å…ƒï¼Œå¹¶å°†100+50=150å…ƒå­˜å…¥äº†æ•°æ®</p><p>åº“ï¼›å°ç‹å°†å•†å“å‡äº†30å…ƒï¼Œå¹¶å°†100-30=70å…ƒå­˜å…¥äº†æ•°æ®åº“ã€‚æ˜¯çš„ï¼Œå¦‚æœæ²¡æœ‰é”ï¼Œå°æçš„æ“ä½œå°±</p><p>å®Œå…¨è¢«å°ç‹çš„è¦†ç›–äº†ã€‚</p><p>ç°åœ¨å•†å“ä»·æ ¼æ˜¯70å…ƒï¼Œæ¯”æˆæœ¬ä»·ä½10å…ƒã€‚å‡ åˆ†é’Ÿåï¼Œè¿™ä¸ªå•†å“å¾ˆå¿«å‡ºå”®äº†1åƒå¤šä»¶å•†å“ï¼Œè€æ¿äº1</p><p>ä¸‡å¤šã€‚</p><h4 id="ä¹è§‚é”å’Œæ‚²è§‚é”">ä¹è§‚é”å’Œæ‚²è§‚é”</h4><p>ä¸Šé¢çš„æ•…äº‹ï¼Œå¦‚æœæ˜¯ä¹è§‚é”ï¼Œå°ç‹ä¿å­˜ä»·æ ¼å‰ï¼Œä¼šæ£€æŸ¥ä¸‹ä»·æ ¼æ˜¯å¦è¢«äººä¿®æ”¹è¿‡äº†ã€‚å¦‚æœè¢«ä¿®æ”¹è¿‡</p><p>äº†ï¼Œåˆ™é‡æ–°å–å‡ºçš„è¢«ä¿®æ”¹åçš„ä»·æ ¼ï¼Œ150å…ƒï¼Œè¿™æ ·ä»–ä¼šå°†120å…ƒå­˜å…¥æ•°æ®åº“ã€‚</p><p>å¦‚æœæ˜¯æ‚²è§‚é”ï¼Œå°æå–å‡ºæ•°æ®åï¼Œå°ç‹åªèƒ½ç­‰å°ææ“ä½œå®Œä¹‹åï¼Œæ‰èƒ½å¯¹ä»·æ ¼è¿›è¡Œæ“ä½œï¼Œä¹Ÿä¼šä¿è¯</p><p>æœ€ç»ˆçš„ä»·æ ¼æ˜¯120å…ƒã€‚</p><h4 id="æ¨¡æ‹Ÿä¿®æ”¹å†²çª">æ¨¡æ‹Ÿä¿®æ”¹å†²çª</h4><h5 id="æ•°æ®åº“ä¸­å¢åŠ å•†å“è¡¨">æ•°æ®åº“ä¸­å¢åŠ å•†å“è¡¨</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_product</span><br><span class="line">(</span><br><span class="line">    id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å•†å“åç§°&#x27;</span>,</span><br><span class="line">    price <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä»·æ ¼&#x27;</span>,</span><br><span class="line">    VERSION <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ æ•°æ®">æ·»åŠ æ•°æ®</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_product (id, <span class="type">NAME</span>, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¤–æ˜Ÿäººç¬”è®°æœ¬&#x27;</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ å®ä½“-2">æ·»åŠ å®ä½“</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatisplus.entity;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ mapper">æ·»åŠ mapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Product&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æµ‹è¯•-3">æµ‹è¯•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œå¯èƒ½æŠ¥é”™ï¼Œä½†æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œï¼ŒæŠ¥é”™æ˜¯å› ä¸ºIDEAæ‰¾ä¸åˆ°ProductMapperçš„Beanï¼Œåœ¨æ¥å£ProductMapperä¸Šä½¿ç”¨æ³¨è§£@RepositoryæŠŠæ¥å£@Repositoryæ ‡è¯†ä¸ºæŒä¹…å±‚ç»„ä»¶å³å¯ä¸æŠ¥é”™</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProductMapper productMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testConcurrentUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//1ã€å°æ</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p1</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æå–å‡ºçš„ä»·æ ¼ï¼š&quot;</span> + p1.getPrice());</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2ã€å°ç‹</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p2</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°ç‹å–å‡ºçš„ä»·æ ¼ï¼š&quot;</span> + p2.getPrice());</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="comment">//3ã€å°æå°†ä»·æ ¼åŠ äº†50å…ƒï¼Œå­˜å…¥äº†æ•°æ®åº“</span></span><br><span class="line">    p1.setPrice(p1.getPrice() + <span class="number">50</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> productMapper.updateById(p1);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æä¿®æ”¹ç»“æœï¼š&quot;</span> + result1);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//4ã€å°ç‹å°†å•†å“å‡äº†30å…ƒï¼Œå­˜å…¥äº†æ•°æ®åº“</span></span><br><span class="line">    p2.setPrice(p2.getPrice() - <span class="number">30</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> productMapper.updateById(p2);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°ç‹ä¿®æ”¹ç»“æœï¼š&quot;</span> + result2);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æœ€åçš„ç»“æœ</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p3</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    <span class="comment">//ä»·æ ¼è¦†ç›–ï¼Œæœ€åçš„ç»“æœï¼š70</span></span><br><span class="line">    System.out.println(<span class="string">&quot;æœ€åçš„ç»“æœï¼š&quot;</span> + p3.getPrice());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¹è§‚é”å®ç°æµç¨‹">ä¹è§‚é”å®ç°æµç¨‹</h4><p>æ•°æ®åº“ä¸­æ·»åŠ versionå­—æ®µ</p><p>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰version</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,`name`,price,`version` <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p>æ›´æ–°æ—¶ï¼Œversion + 1ï¼Œå¦‚æœwhereè¯­å¥ä¸­çš„versionç‰ˆæœ¬ä¸å¯¹ï¼Œåˆ™æ›´æ–°å¤±è´¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price<span class="operator">=</span>price<span class="operator">+</span><span class="number">50</span>, `version`<span class="operator">=</span>`version` <span class="operator">+</span> <span class="number">1</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span>`version`<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="Mybatis-Plus-å®ç°ä¹è§‚é”"><strong>Mybatis-Plus****å®ç°ä¹è§‚é”</strong></h4><h5 id="ä¿®æ”¹å®ä½“ç±»"><strong>ä¿®æ”¹å®ä½“ç±»</strong></h5><p>priceæ˜¯è¿™ä¸ªå‘˜å·¥å–å‡ºçš„ä»·æ ¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatisplus.entity;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.Version;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®"><strong>æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ‰«æmapperæ¥å£æ‰€åœ¨çš„åŒ…</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span></span><br><span class="line">        <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="comment">//æ·»åŠ ä¹è§‚é”æ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æµ‹è¯•ä¿®æ”¹å†²çª"><strong>æµ‹è¯•ä¿®æ”¹å†²çª</strong></h5><p>å°ææŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p>SELECT id,name,price,version FROM t_product WHERE id=?</p><p>å°ç‹æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p>SELECT id,name,price,version FROM t_product WHERE id=?</p><p>å°æä¿®æ”¹å•†å“ä»·æ ¼ï¼Œè‡ªåŠ¨å°†version+1</p><p>UPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p><p>Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 150(Integer), 1(Integer), 1(Long), 0(Integer)</p><p>å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼ï¼Œæ­¤æ—¶versionå·²æ›´æ–°ï¼Œæ¡ä»¶ä¸æˆç«‹ï¼Œä¿®æ”¹å¤±è´¥</p><p>UPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p><p>Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 70(Integer), 1(Integer), 1(Long), 0(Integer)</p><p>æœ€ç»ˆï¼Œå°ç‹ä¿®æ”¹å¤±è´¥ï¼ŒæŸ¥è¯¢ä»·æ ¼ï¼š150</p><p>SELECT id,name,price,version FROM t_product WHERE id=?</p><h5 id="ä¼˜åŒ–æµç¨‹"><strong>ä¼˜åŒ–æµç¨‹</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testConcurrentVersionUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å°æå–æ•°æ®</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p1</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°ç‹å–æ•°æ®</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p2</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°æä¿®æ”¹ + 50</span></span><br><span class="line">    p1.setPrice(p1.getPrice() + <span class="number">50</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> productMapper.updateById(p1);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°æä¿®æ”¹çš„ç»“æœï¼š&quot;</span> + result1);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°ç‹ä¿®æ”¹ - 30</span></span><br><span class="line">    p2.setPrice(p2.getPrice() - <span class="number">30</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> productMapper.updateById(p2);</span><br><span class="line">    System.out.println(<span class="string">&quot;å°ç‹ä¿®æ”¹çš„ç»“æœï¼š&quot;</span> + result2);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(result2 == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="comment">//å¤±è´¥é‡è¯•ï¼Œé‡æ–°è·å–versionå¹¶æ›´æ–°</span></span><br><span class="line">    p2 = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">        p2.setPrice(p2.getPrice() - <span class="number">30</span>);</span><br><span class="line">    result2 = productMapper.updateById(p2);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;å°ç‹ä¿®æ”¹é‡è¯•çš„ç»“æœï¼š&quot;</span> + result2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è€æ¿çœ‹ä»·æ ¼</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">p3</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;è€æ¿çœ‹ä»·æ ¼ï¼š&quot;</span> + p3.getPrice());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">850429804</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line"></span><br><span class="line">ã€å°æå–æ•°æ®ã€‘</span><br><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,price,<span class="keyword">version</span> <span class="keyword">FROM</span> t_product <span class="keyword">WHERE</span> id=?</span><br><span class="line">==&gt; Parameters: <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, price, <span class="keyword">version</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">1</span>, å¤–æ˜Ÿäººç¬”è®°æœ¬, <span class="number">100</span>, <span class="number">1</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">282</span>ffbf5]</span><br><span class="line">å°ææŸ¥è¯¢çš„å•†å“ä»·æ ¼ï¼š<span class="number">100</span></span><br><span class="line"></span><br><span class="line">ã€å°ç‹å–æ•°æ®ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">47406941</span>] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">1642905321</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,price,<span class="keyword">version</span> <span class="keyword">FROM</span> t_product <span class="keyword">WHERE</span> id=?</span><br><span class="line">==&gt; Parameters: <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, price, <span class="keyword">version</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">1</span>, å¤–æ˜Ÿäººç¬”è®°æœ¬, <span class="number">100</span>, <span class="number">1</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">47406941</span>]</span><br><span class="line">å°ç‹æŸ¥è¯¢çš„å•†å“ä»·æ ¼ï¼š<span class="number">100</span></span><br><span class="line"></span><br><span class="line">ã€å°æä¿®æ”¹æ•°æ®å¹¶å†™å…¥ï¼ˆæˆåŠŸï¼‰ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">2440022</span>a] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">1399691256</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> t_product <span class="keyword">SET</span> <span class="type">name</span>=?, price=?, version=? <span class="keyword">WHERE</span> id=? <span class="keyword">AND</span> version=?</span><br><span class="line">==&gt; Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), <span class="number">150</span>(<span class="type">Integer</span>), <span class="number">2</span>(<span class="type">Integer</span>), <span class="number">1</span>(Long), <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">2440022</span>a]</span><br><span class="line"></span><br><span class="line">ã€å°ç‹ä¿®æ”¹å¹¶å†™å…¥ï¼ˆå¤±è´¥ï¼‰å› ä¸ºç‰ˆæœ¬å·å¯¹ä¸ä¸Šã€‘</span><br><span class="line">ã€å› ä¸ºå†™å…¥çš„æ—¶å€™å’Œè‡ªå·±å½“æ—¶æŸ¥çš„ç‰ˆæœ¬å·å¯¹ä¸ä¸Šï¼Œæ‰€ä»¥åœ¨è‡ªå·±ä¿®æ”¹æ•°æ®çš„æ—¶å€™æœ‰äººæ›´æ”¹äº†æ•°æ®ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">123</span>d7057] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">488928549</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> t_product <span class="keyword">SET</span> <span class="type">name</span>=?, price=?, version=? <span class="keyword">WHERE</span> id=? <span class="keyword">AND</span> version=?</span><br><span class="line">==&gt; Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), <span class="number">70</span>(<span class="type">Integer</span>), <span class="number">2</span>(<span class="type">Integer</span>), <span class="number">1</span>(Long), <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    Updates: <span class="number">0</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">123</span>d7057]</span><br><span class="line"></span><br><span class="line">ã€å°ç‹é‡æ–°æŸ¥æ•°æ®ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">32e652</span>b6] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">1268786037</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,price,<span class="keyword">version</span> <span class="keyword">FROM</span> t_product <span class="keyword">WHERE</span> id=?</span><br><span class="line">==&gt; Parameters: <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, price, <span class="keyword">version</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">1</span>, å¤–æ˜Ÿäººç¬”è®°æœ¬, <span class="number">150</span>, <span class="number">2</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">32e652</span>b6]</span><br><span class="line"></span><br><span class="line">ã€å°ç‹ä¿®æ”¹æ•°æ®å¹¶å†™å…¥ï¼ˆæˆåŠŸï¼‰ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">3289079</span>a] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">855277727</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">UPDATE</span> t_product <span class="keyword">SET</span> <span class="type">name</span>=?, price=?, version=? <span class="keyword">WHERE</span> id=? <span class="keyword">AND</span> version=?</span><br><span class="line">==&gt; Parameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), <span class="number">120</span>(<span class="type">Integer</span>), <span class="number">3</span>(<span class="type">Integer</span>), <span class="number">1</span>(Long), <span class="number">2</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    Updates: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">3289079</span>a]</span><br><span class="line"></span><br><span class="line">ã€è€æ¿æŸ¥è¯¢æ•°æ®ï¼ˆå’Œæƒ³è±¡ä¸€æ ·ï¼‰ã€‘</span><br><span class="line">Creating a <span class="built_in">new</span> SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">12</span>a14b74] was <span class="keyword">not</span> registered <span class="keyword">for</span> synchronization because synchronization <span class="keyword">is</span> <span class="keyword">not</span> active</span><br><span class="line">JDBC <span class="keyword">Connection</span> [HikariProxyConnection@<span class="number">1760443245</span> wrapping com.mysql.cj.jdbc.ConnectionImpl@<span class="number">2</span>aaf152b] will <span class="keyword">not</span> be managed <span class="keyword">by</span> Spring</span><br><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,price,<span class="keyword">version</span> <span class="keyword">FROM</span> t_product <span class="keyword">WHERE</span> id=?</span><br><span class="line">==&gt; Parameters: <span class="number">1</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, price, <span class="keyword">version</span></span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">1</span>, å¤–æ˜Ÿäººç¬”è®°æœ¬, <span class="number">120</span>, <span class="number">3</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br><span class="line">Closing non transactional SqlSession [org.apache.ibatis.<span class="keyword">session</span>.defaults.DefaultSqlSession@<span class="number">12</span>a14b74]</span><br><span class="line">è€æ¿æŸ¥è¯¢çš„å•†å“ä»·æ ¼ï¼š<span class="number">120</span></span><br></pre></td></tr></table></figure><h2 id="é€šç”¨æšä¸¾">é€šç”¨æšä¸¾</h2><p>è¡¨ä¸­çš„æœ‰äº›å­—æ®µå€¼æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚æ€§åˆ«ï¼ˆç”·æˆ–å¥³ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatis-Plusçš„é€šç”¨æšä¸¾æ¥å®ç°</p><h3 id="æ•°æ®åº“è¡¨æ·»åŠ å­—æ®µsex"><strong>æ•°æ®åº“è¡¨æ·»åŠ å­—æ®µ</strong>sex</h3><p><img src="../assets/image/MyBatis-Plus_Image/image-20230919100412431.png" alt="image-20230919100412431"></p><h3 id="åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹"><strong>åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹</strong></h3><p>å› ä¸ºæšä¸¾ä¸­å…¨æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥åªç”¨@Getterå°±å¯ä»¥äº†</p><p>è¿™é‡Œä¸¤ä¸ªå±æ€§ï¼Œç¬¬ä¸€ä¸ªå¿…é¡»å«sexï¼Œè¦å’Œæ•°æ®åº“è¡¨ä¸­åˆ—åä¸€æ ·ï¼Œç¬¬äºŒä¸ªå¯ä»¥æ”¹å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatisplus.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.EnumValue;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Date:2022/2/15</span></span><br><span class="line"><span class="comment"> * Author:ybc</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SexEnum</span> &#123;</span><br><span class="line">    MALE(<span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">    FEMALE(<span class="number">2</span>, <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span> <span class="comment">//å°†æ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§çš„å€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> String sexName;</span><br><span class="line"></span><br><span class="line">    SexEnum(Integer sex, String sexName) &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.sexName = sexName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ä¾‹ç±»ä¹Ÿè¦å¢åŠ SexEnumå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatisplus.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mybatisplus.enums.SexEnum;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class="line"><span class="keyword">import</span> lombok.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Date:2022/2/12</span></span><br><span class="line"><span class="comment"> * Author:ybc</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">//è®¾ç½®å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨å</span></span><br><span class="line"><span class="comment">//@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†å±æ€§æ‰€å¯¹åº”çš„å­—æ®µæŒ‡å®šä¸ºä¸»é”®</span></span><br><span class="line">    <span class="comment">//@TableIdæ³¨è§£çš„valueå±æ€§ç”¨äºæŒ‡å®šä¸»é”®çš„å­—æ®µ</span></span><br><span class="line">    <span class="comment">//@TableIdæ³¨è§£çš„typeå±æ€§è®¾ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥</span></span><br><span class="line">    <span class="comment">//@TableId(value = &quot;uid&quot;, type = IdType.AUTO)</span></span><br><span class="line"><span class="comment">//    @TableId(&quot;uid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‡å®šå±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</span></span><br><span class="line"><span class="comment">//    @TableField(&quot;user_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SexEnum sex;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer isDeleted;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ‰«æé€šç”¨æšä¸¾"><strong>é…ç½®æ‰«æé€šç”¨æšä¸¾</strong></h3><p>ä¸åŠ è¿™ä¸ªåŒ…å°±ä¼šå¯¼è‡´é”™è¯¯ï¼šIncorrect integer value:â€˜MALEâ€™ for column â€˜sexâ€™ at row 1</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"> <span class="attr">type-enums-package:</span> <span class="string">com.atguigu.mybatisplus.enums</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•-4"><strong>æµ‹è¯•</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusEnumTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">33</span>);</span><br><span class="line">        user.setSex(SexEnum.MALE);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">        System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç ç”Ÿæˆå™¨"><strong>ä»£ç ç”Ÿæˆå™¨</strong></h2><h3 id="å¼•å…¥ä¾èµ–"><strong>å¼•å…¥ä¾èµ–</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¿«é€Ÿç”Ÿæˆ"><strong>å¿«é€Ÿç”Ÿæˆ</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastAutoGeneratorTest</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        FastAutoGenerator.create(<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/mybatis_plus?characterEncoding=utf-8&amp;userSSL=false&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.author(<span class="string">&quot;atguigu&quot;</span>) <span class="comment">// è®¾ç½®ä½œè€…</span></span><br><span class="line">                            <span class="comment">//.enableSwagger() // å¼€å¯ swagger æ¨¡å¼</span></span><br><span class="line">                            .fileOverride() <span class="comment">// è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">                            .outputDir(<span class="string">&quot;D://mybatis_plus&quot;</span>); <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.atguigu&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                            .moduleName(<span class="string">&quot;mybatisplus&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…æ¨¡å—å</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, <span class="string">&quot;D://mybatis_plus&quot;</span>)); <span class="comment">// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.addInclude(<span class="string">&quot;t_user&quot;</span>) <span class="comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å</span></span><br><span class="line">                            .addTablePrefix(<span class="string">&quot;t_&quot;</span>, <span class="string">&quot;c_&quot;</span>); <span class="comment">// è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .templateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>()) <span class="comment">// ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®userè¡¨å¯ä»¥ç”Ÿæˆä»¥ä¸‹å†…å®¹</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230919114349036.png" alt="image-20230919114349036"></p><h1>ç¬”è®°</h1><p>SpringBootç‰ˆæœ¬</p> <div class="row">    <embed src="https://blog.tianao.top/assets/files/MyBatisPlus(SpringBoot).pdf" width="100%" height="550" type="application/pdf"></div><p>Springç‰ˆæœ¬</p> <div class="row">    <embed src="https://blog.tianao.top/assets/files/MyBatisPlus(Spring).pdf" width="100%" height="550" type="application/pdf"></div><h1>AIæ€»ç»“</h1><p>MyBatis-Plus æ˜¯ MyBatis çš„ä¸€ä¸ªå¢å¼ºå·¥å…·åŒ…ï¼Œå®ƒç®€åŒ–äº†åœ¨ Java åº”ç”¨ä¸­ä½¿ç”¨ MyBatis è¿›è¡Œæ•°æ®åº“è®¿é—®çš„å¼€å‘å·¥ä½œã€‚MyBatis-Plus æä¾›äº†ä¸€äº›æ–¹ä¾¿çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä½¿å¼€å‘äººå‘˜æ›´è½»æ¾åœ°ä¸æ•°æ®åº“äº¤äº’ï¼Œå‡å°‘äº†ç¼–å†™æ ·æ¿ä»£ç çš„å·¥ä½œã€‚ä»¥ä¸‹æ˜¯ MyBatis-Plus çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li><p><strong>åŸºäº MyBatis</strong>ï¼šMyBatis-Plus æ˜¯ MyBatis çš„æ‰©å±•ï¼Œå®ƒå……åˆ†åˆ©ç”¨äº† MyBatis çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå› æ­¤ä¸ MyBatis é«˜åº¦å…¼å®¹ï¼Œå¯ä»¥ä¸ç°æœ‰çš„ MyBatis é¡¹ç›®é›†æˆã€‚</p></li><li><p><strong>ä»£ç ç”Ÿæˆå™¨</strong>ï¼šMyBatis-Plus æä¾›äº†ä¸€ä¸ªä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»ã€Mapper æ¥å£å’ŒXMLæ˜ å°„æ–‡ä»¶ï¼Œå‡å°‘äº†æ‰‹åŠ¨ç¼–å†™è¿™äº›æ–‡ä»¶çš„å·¥ä½œé‡ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨å¿«é€Ÿå¼€å‘åŸå‹æˆ–æ–°é¡¹ç›®æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p></li><li><p><strong>å¼ºå¤§çš„æŸ¥è¯¢æ„å»ºå™¨</strong>ï¼šMyBatis-Plus æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æŸ¥è¯¢æ„å»ºå™¨ï¼Œå…è®¸å¼€å‘äººå‘˜ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œä¸å¿…ç¼–å†™å¤æ‚çš„ SQLã€‚è¿™ä½¿å¾—æ„å»ºå¤æ‚æŸ¥è¯¢å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p></li><li><p><strong>é€šç”¨ CRUD æ“ä½œ</strong>ï¼šMyBatis-Plus æä¾›äº†é€šç”¨çš„ CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œæ–¹æ³•ï¼Œæ— éœ€ç¼–å†™SQLè¯­å¥ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’ŒæŸ¥è¯¢ã€‚</p></li><li><p><strong>åˆ†é¡µæŸ¥è¯¢æ”¯æŒ</strong>ï¼šMyBatis-Plus å†…ç½®äº†åˆ†é¡µæŸ¥è¯¢çš„æ”¯æŒï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ“ä½œã€‚</p></li><li><p><strong>æ¡ä»¶æ„é€ å™¨</strong>ï¼šMyBatis-Plus æä¾›äº†æ¡ä»¶æ„é€ å™¨ï¼Œå…è®¸æ‚¨ä»¥ä¸€ç§æ›´åŠ ç›´è§‚çš„æ–¹å¼æ„å»ºå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Œé¿å…æ‰‹åŠ¨æ‹¼æ¥ SQL è¯­å¥ã€‚</p></li><li><p><strong>é€»è¾‘åˆ é™¤</strong>ï¼šMyBatis-Plus æ”¯æŒé€»è¾‘åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡æ ‡è®°åˆ é™¤æ ‡å¿—è€Œä¸æ˜¯ç‰©ç†åˆ é™¤æ¥åˆ é™¤è®°å½•ï¼Œä»è€Œä¿ç•™æ•°æ®çš„å®Œæ•´æ€§ã€‚</p></li><li><p><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šMyBatis-Plus å…è®¸æ‚¨åœ¨æ’å…¥æˆ–æ›´æ–°è®°å½•æ—¶è‡ªåŠ¨å¡«å……æŸäº›å­—æ®µï¼Œä¾‹å¦‚åˆ›å»ºæ—¶é—´æˆ–ä¿®æ”¹æ—¶é—´å­—æ®µï¼Œå‡å°‘äº†æ‰‹åŠ¨è®¾ç½®è¿™äº›å­—æ®µçš„å·¥ä½œã€‚</p></li><li><p><strong>ä¹è§‚é”æ”¯æŒ</strong>ï¼šMyBatis-Plus æ”¯æŒä¹è§‚é”ï¼Œç”¨äºå¤„ç†å¹¶å‘æ›´æ–°æ“ä½œï¼Œä»¥é¿å…æ•°æ®å†²çªã€‚</p></li><li><p><strong>å¤šæ•°æ®æºæ”¯æŒ</strong>ï¼šMyBatis-Plus æä¾›äº†å¯¹å¤šæ•°æ®æºçš„æ”¯æŒï¼Œå¯ä»¥åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­è½»æ¾ç®¡ç†å¤šä¸ªæ•°æ®åº“è¿æ¥ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒMyBatis-Plus æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“è®¿é—®å·¥å…·ï¼Œå®ƒç®€åŒ–äº†ä¸æ•°æ®åº“çš„äº¤äº’ï¼Œå‡å°‘äº†å¼€å‘å·¥ä½œé‡ï¼Œå¹¶æä¾›äº†è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚å®ƒå¹¿æ³›ç”¨äº Java é¡¹ç›®ä¸­ï¼Œç‰¹åˆ«æ˜¯åŸºäº MyBatis çš„æ•°æ®åº“è®¿é—®å±‚çš„å¼€å‘ã€‚å¦‚æœæ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ªä½¿ç”¨ MyBatis çš„ Java åº”ç”¨ç¨‹åºï¼ŒMyBatis-Plus å¯èƒ½æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„å·¥å…·åŒ…ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆç‡å¹¶æ”¹å–„ä»£ç è´¨é‡ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»MyBatis-Plusçš„ä½¿ç”¨å’ŒåŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="MyBatis" scheme="https://momoao.github.io/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰çº§ç½‘ç»œæŠ€æœ¯</title>
    <link href="https://momoao.github.io/posts/202309121527.html"/>
    <id>https://momoao.github.io/posts/202309121527.html</id>
    <published>2023-09-11T07:30:03.000Z</published>
    <updated>2023-09-24T06:35:29.549Z</updated>
    
    <content type="html"><![CDATA[<h1>è®¡ç®—æœºä¸‰çº§ç½‘ç»œæŠ€æœ¯</h1><h1>å¾—åˆ†ç»“æ„</h1><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230908154557976.png" alt="image-20230908154557976"></p><h1>çŸ¥è¯†ç‚¹è®°å½•</h1><h2 id="ç¬¬ä¸€ç« ">ç¬¬ä¸€ç« </h2><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230908162909118.png" alt="image-20230908162909118"></p><h3 id="RPR">RPR</h3><ul><li>å¯ä»¥ä¸ºä¸åŒçš„ä¸šåŠ¡æ•°æ®åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§</li><li>èƒ½åœ¨50msçš„æ—¶é—´å†…éš”ç¦»å‡ºç°æ•…éšœçš„ç»“ç‚¹å’Œå…‰çº¤æ®µ</li><li>å†…ç¯å’Œå¤–ç¯éƒ½å¯ä»¥ç”¨äºä¼ è¾“æ•°æ®åˆ†ç»„å’Œæ§åˆ¶åˆ†ç»„</li><li>æ˜¯ä¸€ç§ç”¨äºç›´æ¥åœ¨å…‰çº¤ä¸Šé«˜æ•ˆä¼ è¾“IPåˆ†ç»„çš„ä¼ è¾“æŠ€æœ¯</li><li>æ•°æ®å¸§ç”±ç›®çš„ç»“ç‚¹å›æ”¶</li><li>åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡ŒSRPå…¬å¹³ç®—æ³•</li><li>ä¸¤ä¸ªRPRèŠ‚ç‚¹ä¹‹é—´çš„è£¸å…‰çº¤æœ€å¤§é•¿åº¦ä¸º100å…¬é‡Œ</li><li>å°†æ²¿<strong>é¡ºæ—¶é’ˆ</strong>ä¼ è¾“çš„å…‰çº¤å«åš<strong>å¤–ç¯</strong>ï¼Œå°†æ²¿<strong>é€†æ—¶é’ˆ</strong>ä¼ è¾“çš„å…‰çº¤å«åš<strong>å†…ç¯</strong>ã€‚å†…ç¯å’Œå¤–ç¯å¯ä»¥ç”¨<strong>ç»Ÿè®¡å¤ç”¨</strong>çš„æ–¹å¼ä¼ è¾“IPåˆ†ç»„<ul><li>å†…ç¯å’Œå¤–ç¯éƒ½å¯ä»¥ä¼ è¾“æ•°æ®åˆ†ç»„å’Œæ§åˆ¶åˆ†ç»„</li></ul></li></ul><h3 id="ITU">ITU</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911165341499.png" alt="image-20230911165341499"></p><p>OC-3ï¼š155.52Mbps</p><p>OC-12ï¼š622.08Mbps</p><p>OC-24ï¼š1.244Gbps</p><p>OC-48ï¼š2.488Gbps</p><p>OC-192ï¼š9.954Gbps</p><h3 id="HFC">HFC</h3><ul><li>==å…‰çº¤åŒè½´ç”µç¼†æ··åˆç½‘</li><li>æ˜¯ä¸€ä¸ªåŒå‘ä¼ è¾“ç³»ç»Ÿ</li><li>å…‰çº¤ç»“ç‚¹é€šè¿‡åŒè½´ç”µç¼†ä¸‹å¼•çº¿ä¸ºç”¨æˆ·æä¾›æœåŠ¡</li><li>ä¸ºæœ‰çº¿ç”µè§†ç”¨æˆ·æä¾›ä¸€ç§Internetæ¥å…¥æ–¹å¼</li></ul><h3 id="IPV6">IPV6</h3><p>åŒå†’å·å‹ç¼©ï¼šä¸èƒ½çœç•¥éå…¨0æ®µçš„0</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911170901677.png" alt="image-20230911170901677"></p><h3 id="IEEE802-11">IEEE802.11</h3><ul><li>å„ç§åè®®ä¼ è¾“æœ€å¤§é€Ÿç‡<ul><li>802.11bï¼š11Mbpsï¼Œæœ€å¤§å®¹é‡33</li><li>802.11aï¼š54Mbpsï¼ˆå·¥ä½œé¢‘æ®µ5GHzï¼Œé‡‡ç”¨äº†å¤šè½½æ³¢è°ƒåˆ¶æŠ€æœ¯ï¼‰æœ€å¤§å®¹é‡432<ul><li>802.11jï¼šæ˜¯802.11açš„è¡¥å……ï¼Œåœ¨4.9GHz~5.0GHzè¿™ä¸ªæ— çº¿é¢‘ç‡èŒƒå›´å†…å¢åŠ ä¿¡é“</li><li>802.11gï¼š54Mbpsï¼ˆå·¥ä½œé¢‘æ®µ2.4 GHz ï¼‰ï¼Œæœ€å¤§å®¹é‡132</li></ul></li><li>802.11nï¼š600Mbps</li></ul></li></ul><h3 id="IEEE802-16">IEEE802.16</h3><p>æä¾›å®½å¸¦åŸåŸŸç½‘ç”¨æˆ·è®¿é—®Internetæ‰€éœ€è¦çš„è·¯æœåŠ¡</p><p>ä¼ è¾“é€Ÿç‡ï¼š32~134Mbps</p><p>ä½¿ç”¨æ— çº¿é¢‘æ®µ10~66GHz</p><p>ä¸ä¹‹å¯¹åº”çš„è®ºå›ç»„ç»‡WiMAX</p><h3 id="ä»¥å¤ªç½‘æŠ€æœ¯">ä»¥å¤ªç½‘æŠ€æœ¯</h3><p>å…‰ä»¥å¤ªç½‘ç”¨å…‰ä¿¡å·æ¥ä¼ è¾“æ•°æ®ï¼Œä»¥ä¿¡å…ƒä¸ºå•ä½ä¼ è¾“æ•°æ®çš„æ˜¯ATMç½‘</p><ul><li>èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚åˆ†é…å¸¦å®½</li><li>å…·æœ‰ä¿æŠ¤ç”¨æˆ·å’Œç½‘ç»œèµ„æºå®‰å…¨çš„è®¤è¯å’ŒæˆæƒåŠŸèƒ½</li><li>æä¾›åˆ†çº§çš„QoSæœåŠ¡</li><li>æ”¯æŒMPLSï¼ˆå¤šåè®®æ ‡è®°äº¤æ¢ï¼‰åè®®</li></ul><h3 id="æ— çº¿æ¥å…¥æŠ€æœ¯">æ— çº¿æ¥å…¥æŠ€æœ¯</h3><ul><li>åˆ†ç±»<ul><li>æ— çº¿å±€åŸŸç½‘æ¥å…¥ï¼ˆIEEE  802.11æ ‡å‡†ï¼‰<ul><li>WLAN</li></ul></li><li>æ— çº¿åŸåŸŸç½‘æ¥å…¥ï¼ˆIEEE  802.16æ ‡å‡†ï¼‰<ul><li>WiMAX<ul><li>å¯ä»¥åœ¨50kmå†…æä¾›70Mbit/sçš„é€Ÿåº¦</li></ul></li></ul></li><li>Ad hocæ¥å…¥</li></ul></li></ul><p>WLAN ã€WiMAXã€Wi Fi ã€WMANã€Ad hoc</p><h3 id="å®½å¸¦æ¥å…¥æŠ€æœ¯">å®½å¸¦æ¥å…¥æŠ€æœ¯</h3><ul><li>åˆ†ç±»<ul><li>æ•°å­—ç”¨æˆ·çº¿xDSLæŠ€æœ¯</li><li>å…‰çº¤åŒè½´ç”µç¼†æ··åˆç½‘HFCæŠ€æœ¯</li><li>å…‰çº¤æ¥å…¥æŠ€æœ¯</li><li>æ— çº¿æ¥å…¥æŠ€æœ¯<ul><li>æ— çº¿å±€åŸŸç½‘æ¥å…¥</li><li>æ— çº¿åŸåŸŸç½‘æ¥å…¥</li><li>æ— çº¿Ad hocæ¥å…¥</li></ul></li><li>å±€åŸŸç½‘æ¥å…¥æŠ€æœ¯</li></ul></li></ul><h3 id="QoS">QoS</h3><p>QoSï¼ˆQuality of Serviceï¼‰æ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºç®¡ç†å’Œæ§åˆ¶ç½‘ç»œä¸Šçš„æ•°æ®æµï¼Œä»¥ç¡®ä¿ä¸åŒç±»å‹çš„æ•°æ®æµèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­å¾—åˆ°é€‚å½“çš„å¸¦å®½ã€å»¶è¿Ÿã€ä¸¢åŒ…ç‡ç­‰æœåŠ¡è´¨é‡å‚æ•°ã€‚QoSæŠ€æœ¯çš„ä¸»è¦ç›®æ ‡æ˜¯æ»¡è¶³ç½‘ç»œä¸Šä¸åŒåº”ç”¨å’ŒæœåŠ¡çš„æ€§èƒ½éœ€æ±‚ï¼Œå¹¶ç¡®ä¿å…³é”®åº”ç”¨çš„è‰¯å¥½è¿è¡Œã€‚</p><p>å±äºQoSæŠ€æœ¯çš„æœ‰</p><ul><li>Diffservï¼ˆåŒºåˆ†æœåŠ¡ï¼‰</li><li>RSVPï¼ˆèµ„æºé¢„ç•™ï¼‰</li><li>MPLSï¼ˆå¤šåè®®æ ‡è®°äº¤æ¢ï¼‰</li></ul><h3 id="APON">APON</h3><p>å…‰çº¤æ¥å…¥æŠ€æœ¯</p><h3 id="HFC-2">HFC</h3><p>æ¥å…¥æ–¹å¼é‡‡ç”¨å…±äº«å¼çš„ä¼ è¾“æ–¹å¼ï¼Œæ‰€æœ‰ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ä¿¡å·çš„å‘é€ã€æ¥æ”¶ä½¿ç”¨åŒä¸€ä¸ªä¸Šè¡Œå’Œä¸‹è¡Œé€šé“ã€‚å› æ­¤HFCç½‘ä¸Šçš„ç”¨æˆ·è¶Šå¤šï¼Œæ¯ä¸ªç”¨æˆ·å®é™…å¯ç”¨çš„å¸¦å®½å°±è¶Šçª„</p><p><strong>ç»„æˆ</strong>ï¼šæœ‰çº¿ç”µè§†å¤´ç«¯ã€é•¿è·ç¦»å¹²çº¿ã€æ”¾å¤§å™¨ã€é¦ˆçº¿ã€ä¸‹å¼•çº¿</p><p><strong>ä¼ è¾“é€Ÿç‡</strong>:10~36Mbps</p><p>HFCé€šè¿‡ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨å°†ç”¨æˆ·è®¡ç®—æœºä¸åŒè½´ç”µç¼†è¿æ¥èµ·æ¥</p><h3 id="å…‰çº¤ä¼ è¾“ç³»ç»Ÿ">å…‰çº¤ä¼ è¾“ç³»ç»Ÿ</h3><p>ä¸­ç»§è·ç¦»å¯è¾¾100å…¬é‡Œä»¥ä¸Š</p><h3 id="Cable-Modem">Cable Modem</h3><p>åˆ©ç”¨é¢‘åˆ†å¤ç”¨(FDM)çš„æ–¹æ³•ï¼Œå°†ä¿¡é“åˆ†ä¸ºä¸Šè¡Œä¿¡é“å’Œä¸‹è¡Œä¿¡é“</p><p>æŠŠç”¨æˆ·è®¡ç®—æœºå’Œæœ‰çº¿ç”µè§†åŒè½´ç”µç¼†è¿æ¥èµ·æ¥</p><p>ä¼ è¾“é€Ÿç‡å¯è¾¾10~36Mbps</p><h3 id="æ±‡èšå±‚">æ±‡èšå±‚</h3><p>ä¸æä¾›ç”¨æˆ·è®¿é—®Internetæ‰€éœ€çš„è·¯ç”±æœåŠ¡</p><p>åŸºæœ¬åŠŸèƒ½</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911175749527.png" alt="image-20230911175749527"></p><h3 id="æ ¸å¿ƒäº¤æ¢å±‚">æ ¸å¿ƒäº¤æ¢å±‚</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911182423848.png" alt="image-20230911182423848"></p><h3 id="å®½å¸¦åŸåŸŸç½‘">å®½å¸¦åŸåŸŸç½‘</h3><p>ç»“æ„ï¼ˆä¸‰ä¸ªå¹³å°ä¸€ä¸ªå‡ºå£ï¼‰</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911175533514.png" alt="image-20230911175533514"></p><p>å…‰ä»¥å¤ªç½‘</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911180322849.png" alt="image-20230911180322849"></p><p>å¸¦å†…ç®¡ç†ï¼šåˆ©ç”¨ä¼ ç»Ÿç”µä¿¡ç½‘è¿›è¡Œçš„ç½‘ç»œç®¡ç†ï¼Œå¦‚æ•°æ®é€šä¿¡ç½‘ï¼ˆDCNï¼‰æˆ–å…¬å…±äº¤æ¢ç”µè¯ç½‘ï¼ˆPSTNï¼‰æ‹¨å·ï¼Œå¯¹ç½‘ç»œè®¾å¤‡è¿›è¡Œé…ç½®</p><p>å¸¦å¤–ç®¡ç†ï¼šåˆ©ç”¨IPåè®®è¿›è¡Œçš„ç½‘ç»œç®¡ç†ï¼Œåˆ©ç”¨çš„æ˜¯SNMPåè®®</p><h3 id="æœåŠ¡å™¨æŠ€æœ¯">æœåŠ¡å™¨æŠ€æœ¯</h3><ul><li>æœåŠ¡å™¨ç£ç›˜æ€§èƒ½è¡¨ç°åœ¨ç£ç›˜å­˜å‚¨å®¹é‡ä¸I/Oé€Ÿåº¦</li><li>æœåŠ¡å™¨<strong>å¯é æ€§</strong>é€šå¸¸ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰ï¼Œç”¨å¹³å‡ç»´ä¿®æ—¶é—´ï¼ˆMTBRï¼‰æ¥åº¦é‡ç³»ç»Ÿ<strong>å¯ç»´æŠ¤æ€§</strong>ï¼Œè€Œ<strong>å¯ç”¨æ€§=MTBF/(MTBF+MTBR)</strong></li></ul><h3 id="SDN">SDN</h3><p>ä¸»è¦ç”¨äºå¹¿åŸŸç½‘ä¸­ï¼ˆè€ŒéåŸåŸŸç½‘ï¼‰</p><h3 id="ADSL">ADSL</h3><p>ä½¿ç”¨ä¸€å¯¹é“œåŒç»çº¿</p><p>ADSL Modemï¼ˆè§£è°ƒå™¨ï¼‰ç”¨äºè¿æ¥è®¡ç®—æœº</p><p>æä¾›éå¯¹ç§°å¸¦å®½ç‰¹æ€§</p><ul><li>ä¸Šè¡Œé€Ÿåº¦ï¼š64Kbit/s ~ 640Kbit/s</li><li>ä¸‹è¡Œé€Ÿåº¦ï¼š500Kbit/s ~ 7Mbit/s</li></ul><p>åœ¨ç°æœ‰ç”¨æˆ·ç”µè¯çº¿ä¸Šæ”¯æŒç”µè¯ä¸šåŠ¡å’Œæ•°å­—ä¸šåŠ¡</p><p>xDSLæŒ‰ä¸Šè¡Œå’Œä¸‹è¡Œé€Ÿç‡åˆ†ä¸ºé€Ÿç‡å¯¹ç§°å’Œéå¯¹ç§°</p><p>HDSLä¸Šè¡Œä¼ è¾“é€Ÿç‡ä¸º1.544Mbps</p><h3 id="å…‰æ¥å…¥ç½‘">å…‰æ¥å…¥ç½‘</h3><p>å…‰æ¥å…¥ç½‘ä¸é€‚å®œä½¿ç”¨å¤æ‚çš„æ¿€å…‰å™¨åŠå…¶ä»–å¤æ‚å…‰å™¨ä»¶ï¼Œä»¥å‡å°‘å¤§é‡ç”¨æˆ·æ¥å…¥æ—¶çš„å®‰è£…ã€ç»´æŠ¤çš„å·¥ä½œé‡ï¼Œä»¥é™ä½æˆæœ¬æé«˜ç³»ç»Ÿå¯é æ€§ã€‚è¿™äº›è¦æ±‚æ„å‘³ç€æ— æºå…‰æ¥å…¥ç½‘æ¯”æœ‰æºå…‰æ¥å…¥ç½‘æ›´ç¬¦åˆå®é™…åº”ç”¨</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911172000367.png" alt="image-20230911172000367"></p><h2 id="ç¬¬äºŒç« ">ç¬¬äºŒç« </h2><h3 id="ç£ç›˜é˜µåˆ—æŠ€æœ¯">ç£ç›˜é˜µåˆ—æŠ€æœ¯</h3><p>RAIDèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜ç£ç›˜å­˜å‚¨å®¹é‡ï¼Œä½†ä¸èƒ½æé«˜å®¹é”™ç‡</p><h3 id="æœåŠ¡å™¨æŠ€æœ¯-2">æœåŠ¡å™¨æŠ€æœ¯</h3><p>æ³¨æ„ï¼šé›†ç¾¤æœåŠ¡å™¨ä¸­ä¸€ä¸ªä¸»æœºå‡ºç°æ•…éšœï¼Œè™½ç„¶ä¸ä¼šå½±å“ç³»ç»Ÿçš„<strong>æ­£å¸¸æœåŠ¡</strong>ï¼Œä½†æ˜¯ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½</p><p>ä½¿ç”¨RISCç»“æ„å¤„ç†å™¨çš„æœåŠ¡å™¨é€šå¸¸ä½¿ç”¨<strong>UNIX</strong>æ“ä½œç³»ç»Ÿ</p><p>åˆ†å¸ƒå¼**å†…å­˜è®¿é—®æŠ€æœ¯ï¼ˆNUMAï¼‰<strong>å°†å¯¹ç§°å¤šå¤„ç†å™¨ï¼ˆSMPï¼‰å’Œ</strong>é›†ç¾¤ï¼ˆClusterï¼‰**æŠ€æœ¯ç»“åˆ</p><p><strong>ClusteræŠ€æœ¯</strong>ï¼šä¸€ä¸ªä¸»æœºä¸Šçš„ç¨‹åºå¼‚å¸¸ï¼Œè¯¥ä¸»æœºä¸Šçš„ç¨‹åºå°†ç«‹å³è½¬ç§»è‡³å…¶ä»–ä¸»æœº</p><p><strong>B/S</strong>ï¼šæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼</p><p>æœåŠ¡å™¨<strong>ç£ç›˜æ€§èƒ½</strong>ï¼šç”±ç£ç›˜å®¹é‡å’ŒI/Oé€Ÿåº¦å†³å®š</p><p>çƒ­æ’æ‹”ï¼šä¸èƒ½æ›´æ¢<strong>ä¸»èƒŒæ¿</strong>ã€<strong>ä¸»æ¿</strong></p><ul><li>ä¸ºäº†æé«˜æœåŠ¡å™¨æ€§èƒ½é‡‡ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ï¼š<ul><li>å¯¹ç§°å¤šå¤„ç†ï¼ˆSMPï¼‰</li><li>é›†ç¾¤ï¼ˆClusterï¼‰</li><li>éä¸€è‡´å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰</li><li>é«˜æ€§èƒ½å­˜å‚¨ä¸æ™ºèƒ½I/OæŠ€æœ¯</li><li>æœåŠ¡å¤„ç†å™¨ä¸æœåŠ¡æ§åˆ¶ï¼ˆISCï¼‰</li><li>åº”æ€¥ç®¡ç†ç«¯å£ï¼ˆEMPï¼‰</li><li>çƒ­æ’æ‹”</li></ul></li></ul><p>å‡é‡‡å–äº†é“¾è·¯å†—ä½™çš„æ–¹æ³•</p><p>æ ¸å¿ƒå±‚ç›®å‰ä¸»è¦é‡‡ç”¨GE/10GEç½‘ç»œæŠ€æœ¯</p><p>açš„æˆæœ¬é«˜ï¼Œå¯é æ€§é«˜</p><p>bæ›´æ˜“å½¢æˆå¸¦å®½ç“¶é¢ˆï¼Œå®¹æ˜“å½¢æˆå•ç‚¹æ•…éšœ</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916090403212.png" alt="image-20230916090403212"></p><h3 id="è·¯ç”±å™¨æŠ€æœ¯">è·¯ç”±å™¨æŠ€æœ¯</h3><ul><li>æ€§èƒ½æŒ‡æ ‡<ul><li>ååé‡</li><li>èƒŒæ¿èƒ½åŠ›</li><li>ä¸¢åŒ…ç‡</li><li>æ—¶å»¶ä¸æ—¶å»¶æŠ–åŠ¨</li><li>çªå‘å¤„ç†èƒ½åŠ›</li><li>è·¯ç”±è¡¨å®¹é‡</li><li>æœåŠ¡è´¨é‡</li><li>ç½‘ç®¡èƒ½åŠ›</li><li>å¯é æ€§</li><li>å¯ç”¨æ€§</li></ul></li></ul><p><strong>è·¯ç”±å™¨çš„åŒ…è½¬å‘èƒ½åŠ›</strong>ï¼šä¸<strong>ç«¯å£æ•°é‡ã€ç«¯å£é€Ÿç‡ã€åŒ…é•¿åº¦å’ŒåŒ…ç±»å‹</strong>æœ‰å…³</p><p>ååæ˜¯è·¯ç”±å™¨çš„åŒ…è½¬å‘èƒ½åŠ›</p><p><strong>èƒŒæ¿èƒ½åŠ›å†³å®šäº†è·¯ç”±å™¨çš„ååé‡</strong></p><p>è¯­éŸ³ã€è§†é¢‘ä¸šåŠ¡å¯¹å»¶æ—¶æŠ–åŠ¨è¦æ±‚<strong>è¾ƒé«˜</strong></p><p>è·¯ç”±å™¨çš„çªå‘å¤„ç†èƒ½åŠ›æ˜¯ä»¥<strong>æœ€å°å¸§é—´éš”çš„å‘é€æ•°æ®åŒ…</strong>è€Œ<strong>ä¸å¼•èµ·ä¸¢å¤±çš„æœ€å¤§å‘é€é€Ÿç‡</strong>æ¥è¡¡é‡çš„ï¼Œè€Œä¸å•å•åªæ˜¯ä»¥æœ€å°å¸§é—´éš”æ¥è¡¡é‡</p><p><strong>ä¸¢åŒ…ç‡</strong>æ˜¯è¡¡é‡è·¯ç”±å™¨è¶…è´Ÿè·å·¥ä½œèƒ½åŠ›çš„æŒ‡æ ‡ä¹‹ä¸€</p><p><strong>è·¯ç”±å™¨çš„æœåŠ¡è´¨é‡</strong>ï¼šä¸»è¦è¡¨ç°åœ¨é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ä¸æ”¯æŒçš„Qosåè®®ç±»å‹ä¸Š</p><p><strong>ä¼ ç»Ÿè·¯ç”±å™¨</strong>é‡‡ç”¨<strong>å…±äº«èƒŒæ¿</strong>çš„ç»“æ„ï¼Œ<strong>é«˜æ€§èƒ½è·¯ç”±å™¨</strong>é‡‡ç”¨<strong>å¯äº¤æ¢å¼</strong>ç»“æ„</p><p>é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ï¼šæŒ‡è·¯ç”±å™¨çš„é˜Ÿåˆ—è°ƒåº¦ç®—æ³•å’Œ<strong>æ‹¥å¡ç®¡ç†æœºåˆ¶</strong></p><p>é«˜ç«¯è·¯ç”±å™¨å¯é ä¸å¯ç”¨æ€§æŒ‡æ ‡ï¼š</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916091237962.png" alt="image-20230916091237962"></p><h3 id="ç½‘ç»œéœ€æ±‚åˆ†æ">ç½‘ç»œéœ€æ±‚åˆ†æ</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916084311163.png" alt="image-20230916084311163"></p><h3 id="ç½‘ç»œç³»ç»Ÿåˆ†å±‚è®¾è®¡">ç½‘ç»œç³»ç»Ÿåˆ†å±‚è®¾è®¡</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916092304990.png" alt="image-20230916092304990"></p><h2 id="ç¬¬å››ç« ">ç¬¬å››ç« </h2><h3 id="BGP">BGP</h3><p>BGPæ˜¯ä¸åŒè‡ªæ²»ç³»ç»Ÿçš„è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯çš„åè®®</p><p>BGPå‘è¨€äººéœ€è¦å‘¨æœŸæ€§ï¼ˆä¸€èˆ¬é—´éš”æ˜¯30ç§’ï¼‰äº¤æ¢â€œä¿æ´»åˆ†ç»„â€ï¼ˆkeepliveï¼‰</p><p>ä¸€ä¸ªBGPå‘è¨€äººä¸å…¶ä»–è‡ªæ²»ç³»ç»Ÿä¸­BGPå‘è¨€äººäº¤æ¢è·¯ç”±ä¿¡æ¯ä½¿ç”¨TCPè¿æ¥</p><p>openç”¨äºä¸ç›¸é‚»çš„å¦ä¸€ä¸ªBGPå‘è¨€äººç®€å†å…³ç³»</p><ul><li><p>ä½¿ç”¨updateåˆ†ç»„æ›´æ–°è·¯ç”±æ—¶ï¼Œä¸€ä¸ªæŠ¥æ–‡åªèƒ½å¢åŠ ä¸€æ¡è·¯ç”±</p><ul><li>æ‰€ä»¥ï¼šå½“è·¯ç”±ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒBGPå‘è¨€äººé€šè¿‡updateé€šçŸ¥ç›¸é‚»è‡ªæ²»ç³»ç»Ÿ</li></ul></li><li><p>BGPåè®®äº¤æ¢è·¯ç”±ä¿¡æ¯çš„èŠ‚ç‚¹æ•°ä¸å°äºè‡ªæ²»ç³»ç»Ÿæ•°</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨BGPä¸­ï¼ŒèŠ‚ç‚¹æ˜¯æŒ‡è¿è¡ŒBGPåè®®çš„è·¯ç”±å™¨ã€‚ç†è®ºä¸Šï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿéƒ½å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªBGPè·¯ç”±å™¨ã€‚å› æ­¤ï¼Œå¦‚æœä½ æœ‰<span class="built_in">N</span>ä¸ªè‡ªæ²»ç³»ç»Ÿï¼Œé‚£ä¹ˆè‡³å°‘åº”è¯¥æœ‰<span class="built_in">N</span>ä¸ªBGPè·¯ç”±å™¨æ¥è¡¨ç¤ºè¿™äº›è‡ªæ²»ç³»ç»Ÿã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿéƒ½éœ€è¦è‡³å°‘ä¸€ä¸ªBGPèŠ‚ç‚¹æ¥è¡¨ç¤ºå’Œäº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure></li></ul><p>BGP4é‡‡ç”¨<strong>è·¯ç”±å‘é‡</strong>åè®®</p><p>BGPæ˜¯è¾¹ç•Œç½‘å…³åè®®ï¼Œä¸æ˜¯å†…éƒ¨ç½‘å…³åè®®</p><h3 id="å†…éƒ¨ç½‘å…³åè®®">å†…éƒ¨ç½‘å…³åè®®</h3><ul><li>RIP</li><li>OSPF</li><li>IGRP</li></ul><h3 id="OSPF">OSPF</h3><p>OSPFä½¿ç”¨åˆ†å¸ƒå¼é“¾è·¯çŠ¶æ€åè®®</p><p>é“¾è·¯çŠ¶æ€æ•°æ®åº“å­˜å‚¨ç€å…¨ç½‘çš„æ‹“æ‰‘ç»“æ„å›¾ï¼ˆä¸æ˜¯è·¯ç”±è¡¨ï¼‰ï¼Œå¹¶ä¸”åœ¨å…¨ç½‘å†…ä¿æŒä¸€è‡´</p><p>OSPFåè®®è¦æ±‚å½“é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é‡‡ç”¨æ´ªæ³›æ³•ï¼ˆfloodingï¼‰ï¼Œå‘æ‰€æœ‰è·¯ç”±å™¨å‘é€ä¿¡æ¯ã€‚</p><p>ä¸ºäº†ä½¿ç”¨è§„æ¨¡æ›´å¤§çš„ç½‘ç»œï¼Œå¹¶ä½¿æ›´æ–°è¿‡ç¨‹æ‰‹é“¾æ›´å¿«ï¼ŒOSPFåè®®å°†ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ†ä¸ºè¯ºå¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå«åšåŒºåŸŸã€‚</p><p>æ¯ä¸ªåŒºåŸŸæœ‰ä¸€ä¸ª32ä½çš„åŒºåŸŸæ ‡è¯†ç¬¦ï¼ˆç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼‰ï¼Œåœ¨ä¸€ä¸ªåŒºåŸŸå†…çš„è·¯ç”±å™¨ä¸è¶…è¿‡200ä¸ª</p><p>é“¾è·¯çŠ¶æ€â€œåº¦é‡â€ä¸»è¦æ˜¯æŒ‡è´¹ç”¨ã€è·ç¦»ã€å»¶æ—¶ã€å®½å¸¦ç­‰</p><h3 id="RIP">RIP</h3><ul><li>è·¯ç”±åˆ·æ–°æŠ¥æ–‡ä¸»è¦å†…å®¹æ˜¯ç”±è¯ºå¹²ï¼ˆVã€Dï¼‰ç»„æˆçš„è¡¨<ul><li>Vä»£è¡¨<code>çŸ¢é‡</code>ï¼Œæ ‡è¯†è¯¥è·¯ç”±å™¨å¯ä»¥è¾¾åˆ°çš„ç›®æ ‡ç½‘ç»œï¼ˆæˆ–ç›®æ ‡ä¸»æœºï¼‰</li><li>Dä»£è¡¨<code>è·ç¦»</code>ï¼šæŒ‡å‡ºè¯¥è·¯ç”±å™¨åˆ°è¾¾ç›®æ ‡ç½‘ç»œï¼ˆæˆ–ç›®æ ‡ä¸»æœºï¼‰çš„è·ç¦»ï¼ˆè®°å½•è·¯ç”±å™¨çš„è·³æ•°ï¼‰</li></ul></li></ul><p>è·¯ç”±å™¨åœ¨æ¥æ”¶ï¼ˆVã€Dï¼‰æŠ¥æ–‡åæŒ‰ç…§æœ€çŸ­è·¯å¾„åŸåˆ™æ›´æ–°è·¯ç”±è¡¨</p><p>è¦æ±‚è·¯ç”±å™¨å‘¨æœŸæ€§åœ°å‘å¤–å‘é€è·¯ç”±åˆ·æ–°æŠ¥æ–‡</p><p>è·¯ç”±å™¨åœ¨æ¥æ”¶åˆ°ï¼ˆVã€Dï¼‰æŠ¥æ–‡åæŒ‰ç…§æœ€çŸ­è·¯å¾„åŸåˆ™æ›´æ–°è·¯ç”±è¡¨</p><p>RIPåè®®å®ç°ç®€å•ï¼Œä½†ä¸é€‚ç”¨äºå¤§å‹ç½‘ç»œç»“æ„</p><p><strong>OSPFå’ŒRIPéƒ½é‡‡ç”¨äº†æœ€çŸ­è·¯å¾„ä¼˜å…ˆåŸåˆ™</strong></p><h3 id="AIæ€»ç»“">AIæ€»ç»“</h3><h4 id="RIP-2">RIP</h4><p>RIPï¼ˆRouting Information Protocolï¼‰æ˜¯ä¸€ç§è€æ—§çš„å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ï¼Œç”¨äºåœ¨å°å‹å’Œä¸­å‹ç½‘ç»œä¸­è·¯ç”±æ•°æ®åŒ…ã€‚å®ƒæœ€æ—©å‡ºç°åœ¨1980å¹´ä»£ï¼Œå¹¶ç»å†äº†å¤šä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­æœ€å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯RIPç‰ˆæœ¬1ï¼ˆRIPv1ï¼‰å’ŒRIPç‰ˆæœ¬2ï¼ˆRIPv2ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…³äºRIPçš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li><p><strong>è·³æ•°çŸ¢é‡åè®®</strong>ï¼šRIPæ˜¯ä¸€ç§è·³æ•°çŸ¢é‡åè®®ï¼Œå®ƒä½¿ç”¨&quot;è·³æ•°&quot;ï¼ˆhop countï¼‰æ¥è¡¡é‡è·¯å¾„çš„è·ç¦»ã€‚æ¯ä¸ªè·¯ç”±å™¨é€šè¿‡è·Ÿè¸ªåˆ°ç›®æ ‡ç½‘ç»œçš„è·³æ•°æ¥é€‰æ‹©æœ€ä½³è·¯å¾„ï¼Œè¾ƒå°‘çš„è·³æ•°è¡¨ç¤ºæ›´çŸ­çš„è·¯å¾„ã€‚ç„¶è€Œï¼Œè¿™ç§åº¦é‡æ–¹å¼å¿½ç•¥äº†å¸¦å®½å’Œå»¶è¿Ÿç­‰å› ç´ ã€‚</p></li><li><p><strong>RIPv1 vs. RIPv2</strong>ï¼š</p><ul><li><strong>RIPv1</strong>ï¼šRIPv1æ˜¯RIPçš„æ—©æœŸç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨å¹¿æ’­æ–¹å¼å‘é€è·¯ç”±æ›´æ–°ï¼Œå¹¶æ²¡æœ‰æä¾›å¯¹å­ç½‘æ©ç çš„æ”¯æŒã€‚æ­¤å¤–ï¼ŒRIPv1æ²¡æœ‰è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå› æ­¤å®¹æ˜“å—åˆ°å®‰å…¨å¨èƒã€‚</li><li><strong>RIPv2</strong>ï¼šRIPv2æ˜¯RIPçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œæ”¯æŒVLSMï¼ˆå¯å˜é•¿åº¦å­ç½‘æ©ç ï¼‰å’ŒCIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰ã€‚å®ƒä¹Ÿå¯ä»¥ä½¿ç”¨å¤šæ’­æ–¹å¼å‘é€è·¯ç”±æ›´æ–°ï¼Œæä¾›äº†ä¸€äº›åŸºæœ¬çš„å®‰å…¨ç‰¹æ€§ï¼Œå¦‚èº«ä»½éªŒè¯ã€‚</li></ul></li><li><p><strong>æœ€å¤§è·³æ•°é™åˆ¶</strong>ï¼šRIPé™åˆ¶äº†è·¯å¾„çš„æœ€å¤§è·³æ•°ä¸º15ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªç½‘ç»œè·ç¦»æŸä¸ªç›®æ ‡ç½‘ç»œçš„è·³æ•°è¶…è¿‡15ï¼ŒRIPå°†ä¸å†è€ƒè™‘è¯¥è·¯å¾„ã€‚è¿™ç§é™åˆ¶å¯èƒ½ä¸é€‚ç”¨äºå¤§å‹ç½‘ç»œã€‚</p></li><li><p><strong>è·¯ç”±æ›´æ–°å’Œå®šæœŸå¹¿æ’­</strong>ï¼šRIPè·¯ç”±å™¨ä¼šå®šæœŸå¹¿æ’­è·¯ç”±ä¿¡æ¯ï¼Œä»¥ç¡®ä¿ç½‘ç»œæ‹“æ‰‘çš„åŠæ—¶æ›´æ–°ã€‚è·¯ç”±å™¨è¿˜ä¼šåœ¨ç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶å‘é€è·¯ç”±æ›´æ–°ã€‚</p></li><li><p><strong>è‡ªåŠ¨æ±‡æ€»</strong>ï¼šRIPé€šå¸¸ä¼šè‡ªåŠ¨å¯¹å…·æœ‰ç›¸åŒç½‘ç»œå‰ç¼€çš„è·¯ç”±è¿›è¡Œæ±‡æ€»ï¼Œä»¥å‡å°è·¯ç”±è¡¨çš„å¤§å°ã€‚è¿™æœ‰åŠ©äºå‡å°‘è·¯ç”±å™¨çš„è´Ÿè½½ã€‚</p></li><li><p><strong>ä¸é€‚åˆå¤§å‹ç½‘ç»œ</strong>ï¼šç”±äºå…¶è·³æ•°çŸ¢é‡ç‰¹æ€§å’Œå…¶ä»–é™åˆ¶ï¼ŒRIPåœ¨å¤§å‹å¤æ‚ç½‘ç»œä¸­é€šå¸¸ä¸è¢«è§†ä¸ºæœ€ä½³é€‰æ‹©ã€‚å®ƒçš„è·¯ç”±ä¿¡æ¯å¯èƒ½ä¼šäº§ç”Ÿè¾ƒå¤§çš„æ§åˆ¶æŠ¥æ–‡é‡ï¼Œå¯¼è‡´ç½‘ç»œæ‹¥å µå’Œæ…¢é€Ÿæ”¶æ•›ã€‚</p></li><li><p><strong>è¢«æ›´ç°ä»£çš„åè®®æ›¿ä»£</strong>ï¼šéšç€æ—¶é—´çš„æ¨ç§»ï¼ŒRIPé€æ¸è¢«æ›´ç°ä»£çš„å†…éƒ¨è·¯ç”±åè®®å¦‚OSPFå’ŒEIGRPæ‰€å–ä»£ã€‚è¿™äº›åè®®æä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€å¯æ‰©å±•æ€§å’ŒåŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹ä¼ä¸šç½‘ç»œå’Œäº’è”ç½‘æœåŠ¡æä¾›å•†ç¯å¢ƒä¸­ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒRIPæ˜¯ä¸€ç§ç®€å•çš„å†…éƒ¨è·¯ç”±åè®®ï¼Œé€‚ç”¨äºå°å‹ç½‘ç»œæˆ–ç”¨äºæ•™è‚²å’Œå®éªŒç›®çš„ã€‚ç„¶è€Œï¼Œåœ¨å¤§å‹å¤æ‚ç½‘ç»œä¸­ï¼Œé€šå¸¸æ›´å…ˆè¿›çš„è·¯ç”±åè®®è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä»¥æ»¡è¶³æ›´é«˜çš„æ€§èƒ½å’Œå¯ç®¡ç†æ€§éœ€æ±‚ã€‚</p><h4 id="OSPF-2">OSPF</h4><p>OSPFï¼ˆOpen Shortest Path Firstï¼‰æ˜¯ä¸€ç§ç”¨äºå†…éƒ¨è·¯ç”±çš„å¼€æ”¾å¼é“¾è·¯çŠ¶æ€è·¯ç”±åè®®ã€‚å®ƒæ˜¯ä¸€ç§å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ï¼Œé€šå¸¸ç”¨äºä¼ä¸šå’Œäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰ç½‘ç»œä¸­ï¼Œç”¨äºç¡®å®šæ•°æ®åŒ…åœ¨æœ¬åœ°ç½‘ç»œä¸­çš„æœ€ä½³è·¯å¾„ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³OSPFçš„ä¸€äº›å…³é”®ä¿¡æ¯ï¼š</p><ol><li><p><strong>é“¾è·¯çŠ¶æ€è·¯ç”±åè®®</strong>ï¼šOSPFæ˜¯ä¸€ç§é“¾è·¯çŠ¶æ€è·¯ç”±åè®®ï¼Œå®ƒé€šè¿‡äº¤æ¢é“¾è·¯çŠ¶æ€ä¿¡æ¯æ¥ç»´æŠ¤å…³äºæ•´ä¸ªç½‘ç»œæ‹“æ‰‘çš„ç²¾ç¡®è§†å›¾ã€‚æ¯ä¸ªOSPFè·¯ç”±å™¨éƒ½ç»´æŠ¤ä¸€ä¸ªé“¾è·¯çŠ¶æ€æ•°æ®åº“ï¼ˆLSDBï¼‰ï¼Œå…¶ä¸­åŒ…å«äº†å…³äºç½‘ç»œä¸­çš„æ‰€æœ‰è·¯ç”±å™¨å’Œé“¾è·¯çš„ä¿¡æ¯ã€‚</p></li><li><p><strong>è‡ªæ²»ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨</strong>ï¼šOSPFé€šå¸¸ç”¨äºå•ä¸ªè‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰å†…éƒ¨ï¼Œä»¥ç¡®ä¿è¯¥ASå†…çš„è·¯ç”±ä¿¡æ¯çš„å¯é åˆ†å‘ã€‚å®ƒä¸ç”¨äºè¿æ¥ä¸åŒASä¹‹é—´çš„è·¯ç”±ï¼Œè¿™æ˜¯BGPç­‰å¤–éƒ¨ç½‘å…³åè®®çš„ä»»åŠ¡ã€‚</p></li><li><p><strong>åŒºåŸŸåŒ–</strong>ï¼šOSPFç½‘ç»œå¯ä»¥åˆ†æˆå¤šä¸ªåŒºåŸŸï¼ˆAreaï¼‰ï¼Œæ¯ä¸ªåŒºåŸŸæœ‰è‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ã€‚è¿™ç§å±‚æ¬¡åŒ–ç»“æ„å‡å°‘äº†LSDBçš„è§„æ¨¡ï¼Œæé«˜äº†è·¯ç”±å™¨è®¡ç®—å’Œæ•°æ®åº“æ›´æ–°çš„æ•ˆç‡ã€‚åŒºåŸŸä¹‹é—´çš„è·¯ç”±ä¿¡æ¯äº¤æ¢ç”±Area Border Routerï¼ˆABRï¼‰å’ŒBackbone Areaï¼ˆArea 0ï¼‰å®Œæˆã€‚</p></li><li><p><strong>è·¯ç”±è®¡ç®—</strong>ï¼šOSPFä½¿ç”¨Dijkstraç®—æ³•æ¥è®¡ç®—æœ€çŸ­è·¯å¾„æ ‘ï¼Œç¡®å®šæ•°æ®åŒ…çš„æœ€ä½³è·¯å¾„ã€‚æ¯ä¸ªè·¯ç”±å™¨éƒ½ç»´æŠ¤ä¸€ä¸ªæœ€çŸ­è·¯å¾„æ ‘ï¼Œè¯¥æ ‘ä»£è¡¨åˆ°è¾¾ç½‘ç»œä¸­æ¯ä¸ªç›®æ ‡çš„æœ€ä½³è·¯å¾„ã€‚</p></li><li><p><strong>è·¯ç”±åº¦é‡</strong>ï¼šOSPFä½¿ç”¨æˆæœ¬ï¼ˆCostï¼‰æ¥è¡¡é‡è·¯å¾„çš„å¼€é”€ï¼Œé€šå¸¸ä¸é“¾è·¯å¸¦å®½ç›¸å…³ã€‚è¾ƒä½çš„æˆæœ¬è¡¨ç¤ºæ›´å¥½çš„è·¯å¾„ã€‚ç®¡ç†å‘˜å¯ä»¥æ‰‹åŠ¨é…ç½®æˆæœ¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚</p></li><li><p><strong>å¯ç”¨æ€§å’Œå¿«é€Ÿæ”¶æ•›</strong>ï¼šOSPFè®¾è®¡äº†å¤šç§æœºåˆ¶æ¥ç¡®ä¿ç½‘ç»œçš„é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿæ”¶æ•›ã€‚è¿™åŒ…æ‹¬Helloåè®®ç”¨äºé‚»å±…å‘ç°ã€LSUï¼ˆLink State Updateï¼‰åˆ†ç»„ç”¨äºé“¾è·¯çŠ¶æ€ä¿¡æ¯çš„æ›´æ–°ã€LSAckç”¨äºç¡®è®¤ã€ä»¥åŠå¿«é€Ÿé‡æ–°è®¡ç®—å’Œæ”¶æ•›æœºåˆ¶ç­‰ã€‚</p></li><li><p><strong>è®¤è¯å’Œå®‰å…¨æ€§</strong>ï¼šOSPFæ”¯æŒè®¤è¯æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿åªæœ‰æˆæƒçš„è·¯ç”±å™¨å¯ä»¥å‚ä¸OSPFè¿‡ç¨‹ï¼Œä»è€Œå¢å¼ºäº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚</p></li><li><p><strong>OSPFç‰ˆæœ¬</strong>ï¼šæœ€åˆçš„OSPFç‰ˆæœ¬æ˜¯OSPFv1ï¼Œåæ¥å‘å±•äº†OSPFv2å’ŒOSPFv3ï¼Œåˆ†åˆ«ç”¨äºIPv4å’ŒIPv6ç½‘ç»œã€‚</p></li><li><p><strong>åº”ç”¨é¢†åŸŸ</strong>ï¼šOSPFå¸¸è¢«ç”¨äºå¤§å‹ä¼ä¸šç½‘ç»œã€æ ¡å›­ç½‘ç»œã€æ•°æ®ä¸­å¿ƒå’ŒISPç½‘ç»œä¸­ï¼Œå› ä¸ºå®ƒå¯¹äºå¤æ‚ç½‘ç»œæ‹“æ‰‘çš„æ”¯æŒå’Œä¼˜ç§€çš„æ”¶æ•›æ€§èƒ½éå¸¸é€‚ç”¨ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒOSPFæ˜¯ä¸€ç§å¼ºå¤§çš„å†…éƒ¨è·¯ç”±åè®®ï¼Œå®ƒå…è®¸ç½‘ç»œç®¡ç†å‘˜å»ºç«‹é«˜åº¦å¯é çš„å†…éƒ¨ç½‘ç»œæ‹“æ‰‘ï¼Œå¹¶ç¡®ä¿æ•°æ®åŒ…ä»¥æœ€ä½³è·¯å¾„è¿›è¡Œè·¯ç”±ã€‚å®ƒçš„ä¼˜ç‚¹åŒ…æ‹¬å¿«é€Ÿæ”¶æ•›ã€é“¾è·¯çŠ¶æ€ä¿¡æ¯çš„ç²¾ç¡®æ€§ä»¥åŠæ”¯æŒIPv6ç­‰ç°ä»£ç½‘ç»œè¦æ±‚ã€‚</p><h4 id="BGP-2">BGP</h4><p>BGPï¼ˆBorder Gateway Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨äº’è”ç½‘ä¸­è·¯ç”±æ•°æ®æµé‡çš„åè®®ã€‚å®ƒæ˜¯äº’è”ç½‘ä¸Šæœ€å¸¸ç”¨çš„è·¯ç”±åè®®ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºæ§åˆ¶æ•°æ®åŒ…åœ¨ä¸åŒè‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ä¹‹é—´çš„è·¯ç”±é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯å…³äºBGPçš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li><p><strong>è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰</strong>ï¼šäº’è”ç½‘ä¸Šçš„ç½‘ç»œè¢«åˆ’åˆ†ä¸ºå¤šä¸ªè‡ªæ²»ç³»ç»Ÿï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿä»£è¡¨ä¸€ç»„ç”±å•ä¸€ç®¡ç†å®ä½“æ§åˆ¶çš„IPåœ°å€å—ã€‚BGPç”¨äºåœ¨ä¸åŒè‡ªæ²»ç³»ç»Ÿä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚</p></li><li><p><strong>BGPè·¯ç”±å™¨</strong>ï¼šBGPè·¯ç”±å™¨æ˜¯è¿è¡ŒBGPåè®®çš„ç½‘ç»œè®¾å¤‡ï¼Œå®ƒä»¬è´Ÿè´£ä¸å…¶ä»–BGPè·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œå¹¶æ ¹æ®è¿™äº›ä¿¡æ¯å†³å®šå¦‚ä½•è·¯ç”±æ•°æ®åŒ…ã€‚BGPè·¯ç”±å™¨å¯ä»¥æ˜¯ä¼ä¸šå†…éƒ¨çš„è¾¹ç•Œè·¯ç”±å™¨ï¼ˆBorder Routerï¼‰æˆ–äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰ä¹‹é—´çš„æ ¸å¿ƒè·¯ç”±å™¨ã€‚</p></li><li><p><strong>BGPè·¯ç”±è¡¨</strong>ï¼šBGPè·¯ç”±å™¨ç»´æŠ¤ä¸€ä¸ªåºå¤§çš„è·¯ç”±è¡¨ï¼Œå…¶ä¸­åŒ…å«äº†å…³äºäº’è”ç½‘ä¸Šçš„å„ç§ç½‘ç»œçš„ä¿¡æ¯ã€‚è¿™äº›è·¯ç”±è¡¨æ¡ç›®åŒ…æ‹¬ç›®æ ‡ç½‘ç»œçš„å‰ç¼€ã€ä¸‹ä¸€è·³è·¯ç”±å™¨å’ŒASè·¯å¾„ç­‰ä¿¡æ¯ã€‚</p></li><li><p><strong>BGPé‚»å±…å…³ç³»</strong>ï¼šBGPè·¯ç”±å™¨ä¹‹é—´å»ºç«‹é‚»å±…å…³ç³»ï¼Œä»¥äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚è¿™äº›é‚»å±…å…³ç³»å¯ä»¥é€šè¿‡ç›´è¿è¿æ¥æˆ–é€šè¿‡TCP/IPç½‘ç»œå»ºç«‹ã€‚</p></li><li><p><strong>è·¯ç”±ç­–ç•¥</strong>ï¼šBGPå…è®¸ç½‘ç»œç®¡ç†å‘˜å®šä¹‰è·¯ç”±ç­–ç•¥ï¼Œä»¥ç¡®å®šå¦‚ä½•é€‰æ‹©æœ€ä½³è·¯å¾„æ¥è·¯ç”±æ•°æ®åŒ…ã€‚è¿™äº›ç­–ç•¥å¯ä»¥åŸºäºASè·¯å¾„ã€å‰ç¼€é•¿åº¦ã€ASå‰ç¼€ç­‰å¤šä¸ªå› ç´ è¿›è¡Œé…ç½®ã€‚</p></li><li><p><strong>BGPè·¯ç”±é€‰æ‹©è¿‡ç¨‹</strong>ï¼šBGPä½¿ç”¨è·¯å¾„çŸ¢é‡ç®—æ³•æ¥é€‰æ‹©æœ€ä½³è·¯ç”±ã€‚å®ƒè€ƒè™‘äº†å¤šä¸ªå› ç´ ï¼ŒåŒ…æ‹¬ASè·¯å¾„ã€å‰ç¼€é•¿åº¦å’Œè·¯ç”±ç­–ç•¥ï¼Œä»¥ç¡®å®šæœ€ä½³è·¯å¾„ã€‚</p></li><li><p><strong>BGPç‰ˆæœ¬</strong>ï¼šç›®å‰å¹¿æ³›ä½¿ç”¨çš„æ˜¯BGP-4ç‰ˆæœ¬ï¼Œå®ƒåœ¨ä¹‹å‰çš„ç‰ˆæœ¬åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›å’Œæ‰©å±•ï¼Œä»¥æé«˜è·¯ç”±çš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li><li><p><strong>BGPçš„åº”ç”¨</strong>ï¼šBGPä¸»è¦ç”¨äºäº’è”ç½‘æ ¸å¿ƒè·¯ç”±ï¼Œå®ƒå†³å®šäº†æ•°æ®åŒ…å¦‚ä½•ç©¿è¶Šå¤šä¸ªè‡ªæ²»ç³»ç»Ÿã€‚æ­¤å¤–ï¼ŒBGPè¿˜å¯ä»¥ç”¨äºä¼ä¸šå†…éƒ¨ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ªç«™ç‚¹ä¹‹é—´å»ºç«‹å¹¿åŸŸç½‘è¿æ¥æ—¶ã€‚</p></li><li><p><strong>BGPçš„å®‰å…¨æ€§</strong>ï¼šç”±äºBGPçš„åˆ†å¸ƒæ€§å’Œå¼€æ”¾æ€§ï¼Œå®ƒå®¹æ˜“å—åˆ°è·¯ç”±åŠ«æŒå’Œæ¬ºéª—ç­‰å®‰å…¨å¨èƒã€‚ä¸ºäº†æé«˜BGPçš„å®‰å…¨æ€§ï¼Œä¸€äº›å®‰å…¨æœºåˆ¶å¦‚BGPè·¯ç”±éªŒè¯ï¼ˆBGP RPKIï¼‰å’ŒBGPç›‘æ§å·¥å…·å¾—åˆ°äº†å¹¿æ³›éƒ¨ç½²ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒBGPæ˜¯äº’è”ç½‘ä¸Šç”¨äºè·¯ç”±æ§åˆ¶çš„å…³é”®åè®®ï¼Œå®ƒç¡®ä¿äº†å…¨çƒç½‘ç»œçš„å¯è¾¾æ€§å’Œç¨³å®šæ€§ã€‚ç”±äºå…¶å¤æ‚æ€§å’Œé‡è¦æ€§ï¼ŒBGPçš„é…ç½®å’Œç®¡ç†éœ€è¦é«˜åº¦çš„ä¸“ä¸šçŸ¥è¯†å’Œç»éªŒã€‚</p><h2 id="é¢˜åº“">é¢˜åº“</h2><h3 id="IPåœ°å€è®¡ç®—">IPåœ°å€è®¡ç®—</h3><p>ç½‘ç»œåœ°å€ï¼šä¸»æœºä½å˜0</p><p>ç›´æ¥å¹¿æ’­åœ°å€ï¼šä¸»æœºä½å˜1</p><p>ä¸»æœºå·ï¼šç½‘ç»œä¸ºå˜0</p><p>å­ç½‘ç¬¬ä¸€ä¸ªå¯ç”¨ipåœ°å€ï¼šç½‘ç»œåœ°å€+1</p><h3 id="NATè½¬æ¢">NATè½¬æ¢</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911185634062.png" alt="image-20230911185634062"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911185647419.png" alt="image-20230911185647419"></p><h3 id="å¤§é¢˜">å¤§é¢˜</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230922150904782.png" alt="image-20230922150904782"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230922151052558.png" alt="image-20230922151052558"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230923183337784.png" alt="image-20230923183337784"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230923183715431.png" alt="image-20230923183715431"></p><h4 id="DHCP">DHCP</h4><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230923190416670.png" alt="image-20230923190416670"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230923190427976.png" alt="image-20230923190427976"></p><h4 id="sniffer">sniffer</h4><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230923190709500.png" alt="image-20230923190709500"></p><h1>AIæ€»ç»“</h1><h2 id="ç¬¬ä¸€ç« -2">ç¬¬ä¸€ç« </h2><h3 id="RPR-2">RPR</h3><p>RPRï¼ˆRapid Spanning Tree Protocolï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„åè®®ï¼Œæ—¨åœ¨è§£å†³ç¯è·¯é—®é¢˜å’Œæé«˜ç½‘ç»œå¯é æ€§ã€‚å®ƒå…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹ç‚¹ï¼š</p><ol><li><p><strong>ç¯è·¯é˜²æŠ¤</strong>ï¼šRPRé˜²æ­¢ä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯å½¢æˆï¼Œé¿å…å¹¿æ’­é£æš´å’Œæ•°æ®åŒ…æ´ªæ³›ç­‰é—®é¢˜ï¼Œä»è€Œæé«˜ç½‘ç»œæ€§èƒ½ã€‚</p></li><li><p><strong>å¿«é€Ÿæ”¶æ•›</strong>ï¼šRPRèƒ½å¤Ÿå¿«é€Ÿæ£€æµ‹ç½‘ç»œæ•…éšœå¹¶å¿«é€Ÿæ¢å¤ï¼Œé™ä½ç½‘ç»œä¸­æ–­çš„æ—¶é—´ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„STPæ›´å¿«é€Ÿã€‚</p></li><li><p><strong>å†—ä½™è·¯å¾„</strong>ï¼šRPRæ”¯æŒå¤šä¸ªè·¯å¾„ï¼Œå½“ä¸»è·¯å¾„å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥è¿…é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œæé«˜ç½‘ç»œå¯ç”¨æ€§ã€‚</p></li><li><p><strong>QoSæ”¯æŒ</strong>ï¼šRPRå…è®¸é…ç½®ä¸åŒçš„æœåŠ¡è´¨é‡ï¼Œç¡®ä¿å…³é”®åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚</p></li><li><p><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šRPRä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œä¸éœ€è¦ä¸­å¤®æ§åˆ¶å™¨ï¼Œæé«˜äº†ç½‘ç»œçš„å¯ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§ã€‚</p></li><li><p><strong>é€‚ç”¨æ€§</strong>ï¼šRPRé€šå¸¸ç”¨äºå¤§å‹ä»¥å¤ªç½‘ç½‘ç»œï¼Œå¦‚åŸåŸŸç½‘å’Œå¹¿åŸŸç½‘ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿæ¢å¤çš„åº”ç”¨åœºæ™¯ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒRPRæŠ€æœ¯æ—¨åœ¨æ”¹å–„ä»¥å¤ªç½‘ç½‘ç»œçš„æ€§èƒ½å’Œå¯é æ€§ï¼Œé€šè¿‡é˜²æ­¢ç¯è·¯å’Œå¿«é€Ÿæ¢å¤æ•…éšœæ¥ç¡®ä¿ç½‘ç»œçš„é«˜å¯ç”¨æ€§ã€‚è¿™å¯¹äºå¤§å‹ç½‘ç»œå’Œå…³é”®åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚</p><h3 id="STP">STP</h3><p>STPï¼ˆSpanning Tree Protocolï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„åè®®ï¼Œæ—¨åœ¨é˜²æ­¢ç½‘ç»œä¸­çš„ç¯è·¯å¹¶ç¡®ä¿æ•°æ®åŒ…ä¼ è¾“çš„ç¨³å®šæ€§ã€‚STPæ˜¯IEEE 802.1Dæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ„å»ºä¸€ä¸ªæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œä»¥é¿å…å¹¿æ’­é£æš´å’Œæ•°æ®åŒ…æ´ªæ³›ã€‚</p><p>ä»¥ä¸‹æ˜¯STPæŠ€æœ¯çš„å…³é”®æ¦‚å¿µå’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>ç¯è·¯é˜²æŠ¤</strong>ï¼šSTPçš„ä¸»è¦ç›®æ ‡æ˜¯é˜²æ­¢ä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯ã€‚ç¯è·¯å¯èƒ½å¯¼è‡´æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ï¼Œä»è€Œè€—å°½ç½‘ç»œèµ„æºå¹¶é™ä½æ€§èƒ½ã€‚STPé€šè¿‡é€‰æ‹©ä¸€æ¡ä¸»è¦è·¯å¾„ï¼Œå°†å…¶ä»–å†—ä½™è·¯å¾„ç¦ç”¨ï¼Œä»¥ç¡®ä¿ç½‘ç»œä¸­ä¸å­˜åœ¨ç¯è·¯ã€‚</p></li><li><p><strong>æ¡¥å’Œäº¤æ¢æœº</strong>ï¼šSTPåè®®é€‚ç”¨äºæ¡¥å’Œäº¤æ¢æœºï¼ˆä¹Ÿç§°ä¸ºç½‘æ¡¥å’Œäº¤æ¢æœºï¼‰ï¼Œè¿™äº›è®¾å¤‡åœ¨ä»¥å¤ªç½‘ç½‘ç»œä¸­ä¼ è¾“æ•°æ®å¸§ã€‚æ¯ä¸ªæ¡¥æˆ–äº¤æ¢æœºå‚ä¸STPåè®®ï¼Œå…±åŒåå•†å¹¶ç»´æŠ¤æ‹“æ‰‘ä¿¡æ¯ã€‚</p></li><li><p><strong>æ ‘çŠ¶æ‹“æ‰‘</strong>ï¼šSTPæ„å»ºä¸€ä¸ªæ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œå…¶ä¸­ä¸€ä¸ªæ¡¥æˆ–äº¤æ¢æœºè¢«é€‰ä¸ºæ ¹æ¡¥ï¼ˆRoot Bridgeï¼‰ï¼Œæ‰€æœ‰å…¶ä»–æ¡¥æˆ–äº¤æ¢æœºéƒ½é€šè¿‡æœ€ä½³è·¯å¾„è¿æ¥åˆ°æ ¹æ¡¥ã€‚è¿™ç¡®ä¿äº†æ— ç¯çš„ç½‘ç»œæ‹“æ‰‘ã€‚</p></li><li><p><strong>ç«¯å£çŠ¶æ€</strong>ï¼šSTPå®šä¹‰äº†ç«¯å£çŠ¶æ€ï¼ŒåŒ…æ‹¬é˜»å¡ã€ç›‘å¬ã€å­¦ä¹ å’Œè½¬å‘çŠ¶æ€ã€‚åœ¨æ ‘çŠ¶æ‹“æ‰‘ä¸­ï¼Œåªæœ‰ä¸€ä¸ªç«¯å£å¤„äºè½¬å‘çŠ¶æ€ï¼Œå…¶ä½™ç«¯å£å¤„äºé˜»å¡çŠ¶æ€ï¼Œä»¥é˜²æ­¢ç¯è·¯ã€‚</p></li><li><p><strong>æ•…éšœæ¢å¤</strong>ï¼šSTPèƒ½å¤Ÿæ£€æµ‹åˆ°ç½‘ç»œä¸­çš„æ‹“æ‰‘æ›´æ”¹ï¼Œä¾‹å¦‚é“¾è·¯æ•…éšœæˆ–è®¾å¤‡æ·»åŠ /ç§»é™¤ï¼Œå¹¶è‡ªåŠ¨é‡æ–°è®¡ç®—æ‹“æ‰‘ä»¥é€‚åº”è¿™äº›æ›´æ”¹ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</p></li><li><p><strong>å¤šä¸ªå˜ç§</strong>ï¼šSTPæœ‰å‡ ä¸ªå˜ç§ï¼ŒåŒ…æ‹¬ç»å…¸STPï¼ˆCSTPï¼‰ã€å¿«é€ŸSTPï¼ˆRSTPï¼‰ï¼Œä»¥åŠæ›´å¿«é€Ÿçš„å¤šé‡å®ä¾‹STPï¼ˆMSTPï¼‰ã€‚è¿™äº›å˜ç§å¢å¼ºäº†STPçš„æ€§èƒ½å’Œå¿«é€Ÿæ•…éšœæ¢å¤èƒ½åŠ›ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒSTPæŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„å…³é”®åè®®ï¼Œæ—¨åœ¨é˜²æ­¢ç¯è·¯å¹¶ç¡®ä¿ç½‘ç»œçš„å¯é æ€§ã€‚å®ƒé€šè¿‡æ„å»ºæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼Œå¹¶èƒ½å¤Ÿåœ¨ç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è¿›è¡Œè°ƒæ•´ï¼Œä»¥ç»´æŠ¤ç½‘ç»œçš„ç¨³å®šæ€§ã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSTPçš„æ”¶æ•›é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œå› æ­¤åœ¨è¦æ±‚æ›´å¿«é€Ÿçš„ç½‘ç»œæ¢å¤çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å…¶ä»–åè®®ï¼Œå¦‚RSTPæˆ–MSTPã€‚</p><h3 id="RPRå’ŒSTPåŒºåˆ«">RPRå’ŒSTPåŒºåˆ«</h3><p>RPRï¼ˆRapid Spanning Tree Protocolï¼‰å’ŒSTPï¼ˆSpanning Tree Protocolï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„ç½‘ç»œåè®®ï¼Œç”¨äºä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯é˜²æŠ¤ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ï¼š</p><ol><li><p><strong>ç›®æ ‡</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRçš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜ä»¥å¤ªç½‘ç½‘ç»œçš„æ¢å¤é€Ÿåº¦å’Œæ€§èƒ½ã€‚å®ƒæ—¨åœ¨å¿«é€Ÿæ£€æµ‹ç½‘ç»œä¸­çš„æ•…éšœå¹¶è¿…é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œä»¥å‡å°‘ç½‘ç»œä¸­æ–­æ—¶é—´ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPçš„ä¸»è¦ç›®æ ‡æ˜¯é˜²æ­¢ç½‘ç»œä¸­çš„ç¯è·¯ï¼Œè€Œä¸æ˜¯å¼ºè°ƒå¿«é€Ÿæ¢å¤ã€‚STPæ„å»ºä¸€ä¸ªæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œç¡®ä¿æ•°æ®åŒ…ä¸ä¼šåœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ã€‚</p></li></ul></li><li><p><strong>æ”¶æ•›é€Ÿåº¦</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRè¢«è®¾è®¡ä¸ºå¿«é€Ÿæ”¶æ•›çš„åè®®ï¼Œé€šå¸¸èƒ½å¤Ÿåœ¨æ¯«ç§’çº§åˆ«å†…æ£€æµ‹åˆ°ç½‘ç»œæ•…éšœå¹¶å¿«é€Ÿæ¢å¤ï¼Œé™ä½ç½‘ç»œä¸­æ–­çš„å½±å“ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPçš„æ”¶æ•›é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œé€šå¸¸éœ€è¦å‡ ç§’é’Ÿæˆ–æ›´é•¿æ—¶é—´æ¥æ¢å¤ç½‘ç»œã€‚è¿™æ˜¯å› ä¸ºSTPä½¿ç”¨å®šæ—¶å™¨å’ŒçŠ¶æ€æœºæ¥ç¡®å®šæœ€ä½³è·¯å¾„ï¼Œéœ€è¦ä¸€äº›æ—¶é—´æ¥è®¡ç®—å’Œé€‰æ‹©æ–°çš„è·¯å¾„ã€‚</p></li></ul></li><li><p><strong>æ‹“æ‰‘ç»“æ„</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRå…è®¸å¤šä¸ªè·¯å¾„åŒæ—¶å­˜åœ¨äºç½‘ç»œä¸­ï¼Œä»¥æé«˜å†—ä½™æ€§ã€‚å¦‚æœä¸»è·¯å¾„å‡ºç°æ•…éšœï¼ŒRPRå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œç¡®ä¿ç½‘ç»œçš„è¿é€šæ€§ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPæ„å»ºä¸€ä¸ªæ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªä¸»è·¯å¾„ï¼Œå…¶ä»–è·¯å¾„å¤„äºé˜»å¡çŠ¶æ€ã€‚è¿™å¯ä»¥é˜²æ­¢ç¯è·¯ï¼Œä½†æ˜¯å¯¹äºå†—ä½™è·¯å¾„çš„åˆ©ç”¨æœ‰é™ã€‚</p></li></ul></li><li><p><strong>åˆ†å¸ƒå¼ vs. é›†ä¸­å¼</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRé‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç‹¬ç«‹è¿›è¡Œå†³ç­–ï¼Œè€Œæ— éœ€ä¸­å¤®æ§åˆ¶å™¨ã€‚è¿™æé«˜äº†ç½‘ç»œçš„å¯ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPé€šå¸¸æ˜¯é›†ä¸­å¼çš„ï¼Œç½‘ç»œä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹è¢«é€‰ä¸ºæ ¹æ¡¥ï¼Œç„¶åè®¡ç®—è·¯å¾„ä»¥è¿æ¥åˆ°æ ¹æ¡¥ã€‚è¿™ç§é›†ä¸­å¼æ–¹æ³•å¯ä»¥å¯¼è‡´æ€§èƒ½ç“¶é¢ˆå’Œå•ç‚¹æ•…éšœã€‚</p></li></ul></li><li><p><strong>é€‚ç”¨æ€§</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRé€šå¸¸ç”¨äºåŸåŸŸç½‘ï¼ˆMetropolitan Area Networksï¼ŒMANsï¼‰å’Œå¹¿åŸŸç½‘ï¼ˆWide Area Networksï¼ŒWANsï¼‰ç­‰å¤§å‹ä»¥å¤ªç½‘ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯éœ€è¦é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿæ¢å¤çš„åº”ç”¨åœºæ™¯ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPé€šå¸¸ç”¨äºå±€åŸŸç½‘ï¼ˆLocal Area Networksï¼ŒLANsï¼‰æˆ–å°å‹ç½‘ç»œï¼Œè¦æ±‚ç¯è·¯é˜²æŠ¤ï¼Œä½†å¯¹äºå¿«é€Ÿæ¢å¤æ€§èƒ½è¦æ±‚ä¸æ˜¯å¾ˆé«˜çš„æƒ…å†µã€‚</p></li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒRPRå’ŒSTPæ˜¯ä¸¤ç§ä¸åŒçš„ç¯è·¯é˜²æŠ¤åè®®ï¼Œå®ƒä»¬çš„è®¾è®¡ç›®æ ‡å’Œæ€§èƒ½ç‰¹ç‚¹æœ‰æ‰€ä¸åŒã€‚RPRå¼ºè°ƒå¿«é€Ÿæ¢å¤å’Œå†—ä½™è·¯å¾„æ”¯æŒï¼Œé€‚ç”¨äºå¤§å‹ç½‘ç»œï¼Œè€ŒSTPä¸»è¦ç”¨äºå°å‹ç½‘ç»œï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯ç¯è·¯é˜²æŠ¤ã€‚é€‰æ‹©å“ªç§åè®®å–å†³äºç½‘ç»œè§„æ¨¡ã€æ€§èƒ½è¦æ±‚å’Œç‰¹å®šçš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="FDDI">FDDI</h3><p>FDDIï¼ˆFiber Distributed Data Interfaceï¼‰æ˜¯ä¸€ç§æ—©æœŸçš„å±€åŸŸç½‘ï¼ˆLANï¼‰æŠ€æœ¯ï¼Œæœ€æ—©äº1987å¹´ç”±ç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆANSIï¼‰æ ‡å‡†åŒ–ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºå…‰çº¤å’ŒåŒç»çº¿çš„é«˜æ€§èƒ½ç½‘ç»œæŠ€æœ¯ï¼Œæ—¨åœ¨æä¾›é«˜å¸¦å®½ã€ä½å»¶è¿Ÿå’Œé«˜å¯ç”¨æ€§çš„ç½‘ç»œè¿æ¥ã€‚ä»¥ä¸‹æ˜¯å…³äºFDDIçš„ä¸»è¦ç‰¹ç‚¹å’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>å…‰çº¤ä¼ è¾“</strong>ï¼šFDDIçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ä½¿ç”¨å…‰çº¤ä½œä¸ºä¸»è¦çš„ä¼ è¾“åª’ä»‹ã€‚å…‰çº¤å…·æœ‰é«˜å¸¦å®½ã€ä½ä¿¡å·è¡°å‡å’ŒæŠ—ç”µç£å¹²æ‰°çš„ç‰¹ç‚¹ï¼Œå› æ­¤èƒ½å¤Ÿæ”¯æŒè¿œè·ç¦»çš„æ•°æ®ä¼ è¾“ï¼Œå¹¶æä¾›è¾ƒé«˜çš„æ•°æ®ä¼ è¾“é€Ÿåº¦ã€‚</p></li><li><p><strong>åŒç¯æ‹“æ‰‘</strong>ï¼šFDDIç½‘ç»œé‡‡ç”¨åŒç¯æ‹“æ‰‘ç»“æ„ï¼Œåˆ†ä¸ºä¸»ç¯ï¼ˆPrimary Ringï¼‰å’Œå¤‡ç”¨ç¯ï¼ˆSecondary Ringï¼‰ã€‚è¿™ä¸¤ä¸ªç¯çŠ¶ç»“æ„å¯ä»¥åœ¨ç½‘ç»œæ•…éšœæ—¶æä¾›å†—ä½™è·¯å¾„ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„é«˜å¯ç”¨æ€§ã€‚å¦‚æœä¸»ç¯ä¸­çš„æŸä¸€éƒ¨åˆ†å‡ºç°æ•…éšœï¼Œæ•°æ®å°†è¢«åˆ‡æ¢åˆ°å¤‡ç”¨ç¯è·¯ï¼Œå‡ ä¹æ— æ„ŸçŸ¥åœ°ç»§ç»­ä¼ è¾“ã€‚</p></li><li><p><strong>é«˜å¸¦å®½</strong>ï¼šFDDIæ”¯æŒé«˜å¸¦å®½ï¼Œæœ€åˆçš„é€Ÿåº¦ä¸º100 Mbpsï¼ˆå…†æ¯”ç‰¹æ¯ç§’ï¼‰ã€‚åæ¥ï¼ŒFDDI-IIæ ‡å‡†æå‡ºäº†æ›´é«˜é€Ÿåº¦çš„å˜ç§ï¼Œè¾¾åˆ°äº†200 Mbpsã€‚è¿™ä½¿å¾—FDDIæˆä¸ºå½“æ—¶æ€§èƒ½æœ€é«˜çš„LANæŠ€æœ¯ä¹‹ä¸€ã€‚</p></li><li><p><strong>ä½å»¶è¿Ÿ</strong>ï¼šFDDIè®¾è®¡ç”¨äºæ”¯æŒå®æ—¶åº”ç”¨ç¨‹åºï¼Œå› æ­¤å…·æœ‰ä½å»¶è¿Ÿç‰¹æ€§ã€‚è¿™å¯¹äºéœ€è¦å¿«é€Ÿå“åº”æ—¶é—´çš„åº”ç”¨ç¨‹åºéå¸¸é‡è¦ï¼Œä¾‹å¦‚éŸ³é¢‘å’Œè§†é¢‘ä¼ è¾“ã€‚</p></li><li><p><strong>æ”¯æŒå¤šåè®®</strong>ï¼šFDDIå¯ä»¥æ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬TCP/IPã€IPX/SPXç­‰ï¼Œä½¿å…¶åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºç¯å¢ƒä¸­é€šç”¨ã€‚</p></li><li><p><strong>ç®¡ç†å’Œå¯é æ€§</strong>ï¼šFDDIå…·æœ‰å¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥ç›‘è§†ç½‘ç»œæ€§èƒ½å’Œè¯†åˆ«æ•…éšœã€‚å®ƒè¿˜å…·æœ‰è‡ªåŠ¨æ£€æµ‹å’Œçº æ­£ç¯è·¯æ•…éšœçš„èƒ½åŠ›ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</p></li><li><p><strong>ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚</strong>ï¼šFDDIå®šä¹‰äº†ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„æ ‡å‡†ï¼ŒåŒ…æ‹¬å…‰çº¤ä¼ è¾“è§„èŒƒã€å¸§æ ¼å¼å’ŒMACï¼ˆMedia Access Controlï¼‰åè®®ã€‚</p></li><li><p><strong>é€‚ç”¨æ€§</strong>ï¼šFDDIæœ€åˆè®¾è®¡ç”¨äºå¤§å‹ä¼ä¸šç½‘ç»œå’Œæ•°æ®ä¸­å¿ƒï¼Œä»¥æ»¡è¶³é«˜å¸¦å®½ã€é«˜å¯ç”¨æ€§å’Œä½å»¶è¿Ÿçš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œä»¥å¤ªç½‘ç­‰å…¶ä»–LANæŠ€æœ¯é€æ¸å´­éœ²å¤´è§’ï¼ŒFDDIåœ¨è¾ƒå°è§„æ¨¡çš„ç½‘ç»œä¸­çš„ä½¿ç”¨é€æ¸å‡å°‘ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒFDDIæ˜¯ä¸€ç§å…‰çº¤å±€åŸŸç½‘æŠ€æœ¯ï¼Œå…·æœ‰é«˜å¸¦å®½ã€ä½å»¶è¿Ÿã€é«˜å¯ç”¨æ€§å’Œå¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ã€‚å°½ç®¡å®ƒåœ¨è¿‡å»æ›¾ç»æ˜¯ä¸»è¦çš„ç½‘ç»œæŠ€æœ¯ä¹‹ä¸€ï¼Œä½†éšç€ä»¥å¤ªç½‘ç­‰æŠ€æœ¯çš„å´­éœ²å¤´è§’ï¼ŒFDDIçš„ä½¿ç”¨é€æ¸å‡å°‘ã€‚ç„¶è€Œï¼Œå®ƒçš„ä¸€äº›ç‰¹ç‚¹ä»ç„¶åœ¨ç‰¹å®šçš„ç½‘ç»œç¯å¢ƒä¸­æœ‰ä»·å€¼ï¼Œä¾‹å¦‚éœ€è¦é«˜å¯é æ€§å’Œä½å»¶è¿Ÿçš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="ADSL-2">ADSL</h3><p>ADSLï¼ˆAsymmetric Digital Subscriber Lineï¼‰æ˜¯ä¸€ç§å¸¸è§çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œç”¨äºå°†æ•°å­—æ•°æ®é€šè¿‡æ™®é€šç”µè¯çº¿ä¼ è¾“ã€‚ADSLä¹‹æ‰€ä»¥ç§°ä¸º&quot;ä¸å¯¹ç§°&quot;ï¼Œæ˜¯å› ä¸ºå®ƒæ”¯æŒä¸åŒçš„ä¸Šè¡Œï¼ˆä¸Šä¼ ï¼‰å’Œä¸‹è¡Œï¼ˆä¸‹è½½ï¼‰æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œé€šå¸¸ä¸‹è½½é€Ÿåº¦è¾ƒé«˜ï¼Œé€‚ç”¨äºå¤§å¤šæ•°å®¶åº­ç”¨æˆ·çš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³ADSLçš„ä¸»è¦ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>ä¸å¯¹ç§°é€Ÿåº¦</strong>ï¼š</p><ul><li>ä¸‹è¡Œé€Ÿåº¦ï¼ˆä»äº’è”ç½‘åˆ°ç”¨æˆ·ï¼‰é€šå¸¸æ¯”ä¸Šè¡Œé€Ÿåº¦ï¼ˆä»ç”¨æˆ·åˆ°äº’è”ç½‘ï¼‰å¿«å¾—å¤šã€‚è¿™ç§è®¾è®¡æ˜¯åŸºäºå®¶åº­ç”¨æˆ·é€šå¸¸æ›´å¤šåœ°ä¸‹è½½å†…å®¹è€Œè¾ƒå°‘ä¸Šä¼ çš„ä½¿ç”¨æ¨¡å¼ã€‚</li></ul></li><li><p><strong>ç”µè¯çº¿ä¼ è¾“</strong>ï¼š</p><ul><li>ADSLä½¿ç”¨æ™®é€šç”µè¯çº¿ï¼ˆé“œçº¿ï¼‰æ¥ä¼ è¾“æ•°å­—æ•°æ®ã€‚è¿™æ„å‘³ç€åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸éœ€è¦æ–°çš„ç”µç¼†æˆ–åŸºç¡€è®¾æ–½ï¼Œåªéœ€ä½¿ç”¨ç”µè¯çº¿æ¥å…¥ADSLå³å¯ã€‚</li></ul></li><li><p><strong>æ‹†åˆ†é¢‘æ®µ</strong>ï¼š</p><ul><li>ADSLæŠ€æœ¯å…è®¸ç”µè¯çº¿åŒæ—¶ä¼ è¾“æ¨¡æ‹Ÿç”µè¯ä¿¡å·å’Œæ•°å­—æ•°æ®ä¿¡å·ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œé¢‘è°±è¢«åˆ’åˆ†ä¸ºä¸åŒçš„é¢‘æ®µï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ç”¨äºä¼ è¾“è¯­éŸ³ä¿¡å·ï¼Œè€Œå¦ä¸€éƒ¨åˆ†ç”¨äºä¼ è¾“æ•°å­—æ•°æ®ã€‚</li></ul></li><li><p><strong>è°ƒåˆ¶ä¸è§£è°ƒåˆ¶</strong>ï¼š</p><ul><li>ADSLä¸­ï¼Œæ•°å­—æ•°æ®é€šè¿‡è°ƒåˆ¶ï¼ˆåœ¨å‘é€ç«¯ï¼‰å’Œè§£è°ƒåˆ¶ï¼ˆåœ¨æ¥æ”¶ç«¯ï¼‰çš„è¿‡ç¨‹æ¥ä¼ è¾“ã€‚è°ƒåˆ¶å°†æ•°å­—æ•°æ®è½¬æ¢æˆæ¨¡æ‹Ÿä¿¡å·ï¼Œä»¥ä¾¿é€šè¿‡ç”µè¯çº¿ä¼ è¾“ã€‚è§£è°ƒåˆ¶åˆ™å°†æ¥æ”¶åˆ°çš„ä¿¡å·è¿˜åŸä¸ºæ•°å­—æ•°æ®ã€‚</li></ul></li><li><p><strong>è·ç¦»é™åˆ¶</strong>ï¼š</p><ul><li>ADSLçš„æ€§èƒ½å—åˆ°ç”¨æˆ·å’Œæä¾›å•†ä¹‹é—´çš„è·ç¦»é™åˆ¶ã€‚é€šå¸¸ï¼Œç”¨æˆ·è¶Šè¿œç¦»æä¾›å•†çš„ä¸­å¿ƒå±€ï¼ˆDSLAMï¼ŒDSL Access Multiplexerï¼‰ï¼Œå…¶ADSLè¿æ¥é€Ÿåº¦å°±ä¼šé™ä½ã€‚è¿™æ˜¯å› ä¸ºä¿¡å·åœ¨é•¿è·ç¦»ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šé€æ¸å‡å¼±ã€‚</li></ul></li><li><p><strong>ä¸é€‚ç”¨äºå¯¹ç§°éœ€æ±‚</strong>ï¼š</p><ul><li>å°½ç®¡ADSLé€‚ç”¨äºå®¶åº­ç”¨æˆ·å’Œå°å‹ä¼ä¸šï¼Œä½†å¯¹äºéœ€è¦å¯¹ç§°ä¸Šä¼ å’Œä¸‹è½½é€Ÿåº¦çš„åº”ç”¨ï¼ˆå¦‚è§†é¢‘ä¼šè®®æˆ–è¿œç¨‹æœåŠ¡å™¨è®¿é—®ï¼‰ï¼ŒADSLå¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚</li></ul></li><li><p><strong>æ™®åŠæ€§</strong>ï¼š</p><ul><li>åœ¨è¿‡å»çš„å‡ åå¹´ä¸­ï¼ŒADSLæ›¾æ˜¯å®¶åº­å’Œå°å‹ä¼ä¸šå®½å¸¦æ¥å…¥çš„ä¸»è¦é€‰æ‹©ï¼Œå› ä¸ºå®ƒæä¾›äº†ç›¸å¯¹è¾ƒé«˜çš„ä¸‹è½½é€Ÿåº¦ï¼Œè€Œä¸”æ™®åŠç‡é«˜ã€‚ç„¶è€Œï¼Œéšç€å…‰çº¤å’Œæœ‰çº¿å®½å¸¦æŠ€æœ¯çš„å‘å±•ï¼ŒADSLåœ¨ä¸€äº›åœ°åŒºé€æ¸è¢«æ›´å¿«çš„å®½å¸¦è¿æ¥æ›¿ä»£ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼ŒADSLæ˜¯ä¸€ç§å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œé€‚ç”¨äºå®¶åº­ç”¨æˆ·å’Œå°å‹ä¼ä¸šï¼Œå› å…¶ä¾¿æ·æ€§å’Œç›¸å¯¹ä½å»‰çš„æˆæœ¬è€Œå—æ¬¢è¿ã€‚ç„¶è€Œï¼Œåœ¨éœ€è¦æ›´é«˜å¯¹ç§°å¸¦å®½æˆ–æ›´è¿œè·ç¦»è¿æ¥çš„åœºæ™¯ä¸­ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–å®½å¸¦æŠ€æœ¯ï¼Œå¦‚å…‰çº¤æˆ–æœ‰çº¿å®½å¸¦ã€‚</p><h3 id="NAT">NAT</h3><p>NATï¼Œå…¨ç§°ä¸ºNetwork Address Translationï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰ï¼Œæ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œå¸¸ç”¨äºè¿æ¥ç§æœ‰ç½‘ç»œä¸å…¬å…±äº’è”ç½‘ä¹‹é—´ï¼Œä»¥å®ç°å¤šå°è®¾å¤‡å…±äº«å•ä¸ªå…¬å…±IPåœ°å€çš„ç›®çš„ã€‚NATçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢å’Œç®¡ç†ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³NATçš„ä¸»è¦æ¦‚å¿µå’ŒåŠŸèƒ½ï¼š</p><ol><li><p><strong>IPåœ°å€è½¬æ¢</strong>ï¼š</p><ul><li>NATä¸»è¦å·¥ä½œæ˜¯å°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä½¿ç”¨ç§æœ‰IPåœ°å€ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢ã€‚ç§æœ‰IPåœ°å€é€šå¸¸ä½äºä»¥ä¸‹ä¿ç•™åœ°å€æ®µä¹‹ä¸€ï¼š10.0.0.0è‡³10.255.255.255ã€172.16.0.0è‡³172.31.255.255æˆ–192.168.0.0è‡³192.168.255.255ã€‚</li></ul></li><li><p><strong>å•ä¸€å…¬å…±IPåœ°å€</strong>ï¼š</p><ul><li>NATå…è®¸å¤šå°è®¾å¤‡åœ¨å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­ä½¿ç”¨ç›¸åŒçš„å…¬å…±IPåœ°å€è¿›è¡Œäº’è”ç½‘è®¿é—®ã€‚è¿™ç§æ–¹å¼å¯ä»¥å¸®åŠ©èŠ‚çœå…¬å…±IPåœ°å€ï¼Œå¹¶æé«˜ç½‘ç»œçš„å®‰å…¨æ€§ï¼Œå› ä¸ºå†…éƒ¨è®¾å¤‡çš„IPåœ°å€å¯¹å¤–éƒ¨ä¸å¯è§ã€‚</li></ul></li><li><p><strong>ç«¯å£æ˜ å°„</strong>ï¼š</p><ul><li>é™¤äº†IPåœ°å€è½¬æ¢ï¼ŒNATè¿˜å¯ä»¥ä½¿ç”¨ç«¯å£æ˜ å°„ï¼ˆPort Mappingï¼‰æ¥å°†å¤šä¸ªå†…éƒ¨è®¾å¤‡ä¸åŒä¸€ä¸ªå…¬å…±IPåœ°å€å…³è”èµ·æ¥ã€‚é€šè¿‡åœ¨å…¬å…±IPåœ°å€å’Œç«¯å£ä¹‹é—´å»ºç«‹æ˜ å°„ï¼ŒNATå¯ä»¥å°†å¤–éƒ¨è¯·æ±‚æ­£ç¡®è·¯ç”±åˆ°å†…éƒ¨çš„ç‰¹å®šè®¾å¤‡ä¸Šã€‚</li></ul></li><li><p><strong>ç±»å‹</strong>ï¼š</p><ul><li>æœ‰ä¸åŒç±»å‹çš„NATï¼ŒåŒ…æ‹¬é™æ€NATã€åŠ¨æ€NATå’ŒPATï¼ˆPort Address Translationï¼‰ã€‚<ul><li><strong>é™æ€NAT</strong>ï¼šä¸ºç‰¹å®šå†…éƒ¨è®¾å¤‡åˆ†é…ä¸€ä¸ªå›ºå®šçš„å…¬å…±IPåœ°å€ï¼Œé€šå¸¸ç”¨äºæœåŠ¡å™¨ç­‰éœ€è¦å¯¹å¤–éƒ¨å¯è§çš„è®¾å¤‡ã€‚</li><li><strong>åŠ¨æ€NAT</strong>ï¼šä¸ºå†…éƒ¨è®¾å¤‡åŠ¨æ€åˆ†é…å…¬å…±IPåœ°å€ï¼Œé€šå¸¸æ˜¯ä»ä¸€ä¸ªå¯ç”¨çš„åœ°å€æ± ä¸­é€‰æ‹©ã€‚</li><li><strong>PAT</strong>ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„NATï¼Œå®ƒä½¿ç”¨å•ä¸ªå…¬å…±IPåœ°å€ï¼Œå¹¶é€šè¿‡ä¸åŒçš„ç«¯å£å·æ¥åŒºåˆ†ä¸åŒçš„å†…éƒ¨è®¾å¤‡ã€‚</li></ul></li></ul></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼š</p><ul><li>NATæä¾›ä¸€å®šç¨‹åº¦çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå†…éƒ¨è®¾å¤‡çš„IPåœ°å€å¯¹å¤–éƒ¨äº’è”ç½‘ä¸å¯è§ã€‚è¿™å¯ä»¥é˜²æ­¢å¤–éƒ¨ç½‘ç»œç›´æ¥è®¿é—®å†…éƒ¨è®¾å¤‡ï¼Œæé«˜äº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚</li></ul></li><li><p><strong>IPv4åœ°å€æ¯ç«­é—®é¢˜</strong>ï¼š</p><ul><li>NATä¹Ÿæœ‰åŠ©äºç¼“è§£IPv4åœ°å€çŸ­ç¼ºé—®é¢˜ï¼Œå› ä¸ºå®ƒå…è®¸å¤šä¸ªå†…éƒ¨è®¾å¤‡å…±äº«ä¸€ä¸ªå…¬å…±IPåœ°å€ã€‚è¿™å¯¹äºé¢ä¸´IPåœ°å€ä¸è¶³é—®é¢˜çš„ç½‘ç»œéå¸¸é‡è¦ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>NATå¸¸ç”¨äºå®¶åº­ç½‘ç»œè·¯ç”±å™¨ã€ä¼ä¸šç½‘ç»œå’Œäº‘è®¡ç®—ç¯å¢ƒä¸­ï¼Œä»¥å…è®¸å¤šä¸ªè®¾å¤‡åœ¨å†…éƒ¨ç½‘ç»œä¸­è®¿é—®äº’è”ç½‘ã€‚å®ƒä¹Ÿç”¨äºåœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ç®¡ç†è™šæ‹Ÿæœºçš„ç½‘ç»œè¿æ¥ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼ŒNATæ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºå°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢å’Œç®¡ç†ï¼Œä»¥å®ç°å¤šä¸ªè®¾å¤‡å…±äº«å•ä¸ªå…¬å…±IPåœ°å€çš„ç›®çš„ã€‚å®ƒå¯¹ç½‘ç»œçš„å®‰å…¨æ€§å’ŒIPv4åœ°å€æ¯ç«­é—®é¢˜éƒ½æœ‰ç§¯æçš„å½±å“ã€‚</p><h3 id="æ•°å­—ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·">æ•°å­—ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·</h3><p>æ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·æ˜¯ä¸¤ç§ä¸åŒç±»å‹çš„ä¿¡å·ï¼Œå®ƒä»¬åœ¨ç”µå­é€šä¿¡å’Œä¿¡æ¯å¤„ç†ä¸­å…·æœ‰é‡è¦ä½œç”¨ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³æ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŒºåˆ«ï¼š</p><p><strong>æ¨¡æ‹Ÿä¿¡å·ï¼ˆAnalog Signalsï¼‰</strong>ï¼š</p><ol><li><p><strong>è¿ç»­æ€§</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä¸€å®šèŒƒå›´å†…å–ä»»æ„å€¼ã€‚åœ¨æ¨¡æ‹Ÿä¿¡å·ä¸­ï¼Œä¿¡å·çš„å€¼åœ¨æ—¶é—´ä¸Šä¸æ–­å˜åŒ–ï¼Œå¯ä»¥é‡‡ç”¨æ— é™æ•°é‡çš„å€¼ã€‚</p></li><li><p><strong>æ³¢å½¢</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·å¯ä»¥å‘ˆç°ä¸ºè¿ç»­çš„æ³¢å½¢ï¼Œå¦‚æ­£å¼¦æ³¢ã€ä½™å¼¦æ³¢æˆ–ä»»ä½•å¤æ‚çš„æ³¢å½¢ã€‚è¿™äº›æ³¢å½¢è¡¨ç¤ºä¿¡å·åœ¨æ—¶é—´ä¸Šçš„å˜åŒ–ã€‚</p></li><li><p><strong>ç‰©ç†è¡¨ç¤º</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·é€šå¸¸ç”±è¿ç»­çš„ç‰©ç†é‡è¡¨ç¤ºï¼Œä¾‹å¦‚ç”µå‹ã€ç”µæµæˆ–å£°éŸ³å‹åŠ›ã€‚è¿™äº›ç‰©ç†é‡çš„å˜åŒ–å¯¹åº”äºä¿¡å·çš„å˜åŒ–ã€‚</p></li><li><p><strong>ç²¾åº¦</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·çš„ç²¾åº¦å—åˆ°å™ªå£°å’Œå¹²æ‰°çš„å½±å“ï¼Œå¯èƒ½å­˜åœ¨ä¿¡å·å¤±çœŸã€‚å› æ­¤ï¼Œä¿æŒä¿¡å·çš„è´¨é‡éœ€è¦é‡‡å–ä¸€äº›æªæ–½ï¼Œå¦‚æ»¤æ³¢å’Œæ”¾å¤§ã€‚</p></li><li><p><strong>ç”¨é€”</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·å¸¸ç”¨äºä¼ è¾“è¿ç»­çš„ä¿¡æ¯ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘å’Œä¼ æ„Ÿå™¨æ•°æ®ã€‚ä¼ ç»Ÿçš„ç”µè¯çº¿è·¯å°±æ˜¯ä¸€ä¸ªä¼ è¾“æ¨¡æ‹Ÿä¿¡å·çš„ä¾‹å­ã€‚</p></li></ol><p><strong>æ•°å­—ä¿¡å·ï¼ˆDigital Signalsï¼‰</strong>ï¼š</p><ol><li><p><strong>ç¦»æ•£æ€§</strong>ï¼šæ•°å­—ä¿¡å·æ˜¯ç¦»æ•£çš„ï¼Œå®ƒä»¬åªèƒ½å–æœ‰é™æ•°é‡çš„ç¦»æ•£å€¼ã€‚åœ¨æ•°å­—ä¿¡å·ä¸­ï¼Œä¿¡å·çš„å€¼ä»¥ç¦»æ•£çš„æ­¥è¿›æ–¹å¼å˜åŒ–ã€‚</p></li><li><p><strong>è¡¨ç¤º</strong>ï¼šæ•°å­—ä¿¡å·é€šå¸¸è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ä»£ç ï¼Œå³ç”±ä¸€ç³»åˆ—0å’Œ1ç»„æˆçš„åºåˆ—ã€‚æ¯ä¸ªäºŒè¿›åˆ¶æ•°å­—ä»£è¡¨ä¿¡å·çš„ç¦»æ•£å€¼ã€‚</p></li><li><p><strong>æŠ—å¹²æ‰°æ€§</strong>ï¼šæ•°å­—ä¿¡å·åœ¨ä¼ è¾“å’Œå¤„ç†è¿‡ç¨‹ä¸­å¯¹å™ªå£°å’Œå¹²æ‰°å…·æœ‰è¾ƒå¼ºçš„æŠ—æ€§ã€‚ç”±äºä¿¡å·æ˜¯ä»¥ç¦»æ•£å€¼è¡¨ç¤ºçš„ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°æ£€æµ‹å’Œçº æ­£ä¼ è¾“ä¸­çš„é”™è¯¯ã€‚</p></li><li><p><strong>ç²¾åº¦</strong>ï¼šæ•°å­—ä¿¡å·çš„ç²¾åº¦é€šå¸¸è¾ƒé«˜ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä»¥è¶³å¤Ÿé«˜çš„åˆ†è¾¨ç‡è¡¨ç¤ºä¿¡å·ï¼Œä»¥ä¾¿å‡†ç¡®ä¼ è¾“å’Œå¤„ç†ã€‚</p></li><li><p><strong>ç”¨é€”</strong>ï¼šæ•°å­—ä¿¡å·å¹¿æ³›ç”¨äºè®¡ç®—æœºå’Œæ•°å­—é€šä¿¡ä¸­ï¼ŒåŒ…æ‹¬äº’è”ç½‘ã€æ•°å­—éŸ³é¢‘å’Œè§†é¢‘ä¼ è¾“ã€æ•°å­—ç”µè§†å’Œç§»åŠ¨é€šä¿¡ç­‰é¢†åŸŸã€‚æ•°å­—ä¿¡å·ä¹Ÿç”¨äºæ•°å­—ç”µå­è®¾å¤‡çš„å†…éƒ¨é€šä¿¡å’Œå¤„ç†ã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ã€å…·æœ‰æ— é™å¯èƒ½å€¼çš„ä¿¡å·ï¼Œé€šå¸¸ç”¨äºä¼ è¾“è¿ç»­çš„ä¿¡æ¯ã€‚è€Œæ•°å­—ä¿¡å·æ˜¯ç¦»æ•£çš„ã€ä»¥äºŒè¿›åˆ¶ä»£ç è¡¨ç¤ºçš„ä¿¡å·ï¼Œå¯¹å™ªå£°å…·æœ‰è¾ƒå¼ºçš„æŠ—æ€§ï¼Œå¹¿æ³›ç”¨äºæ•°å­—åŒ–ä¿¡æ¯å’Œæ•°æ®çš„å¤„ç†ã€ä¼ è¾“å’Œå­˜å‚¨ã€‚åœ¨ç°ä»£é€šä¿¡å’Œä¿¡æ¯æŠ€æœ¯ä¸­ï¼Œæ•°å­—ä¿¡å·é€šå¸¸æ›´ä¸ºå¸¸è§ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰é«˜ç²¾åº¦å’ŒæŠ—å¹²æ‰°æ€§ï¼Œé€‚ç”¨äºæ•°å­—ç³»ç»Ÿä¸­çš„å¤šç§åº”ç”¨ã€‚</p><h3 id="åœ°å€åˆ’åˆ†">åœ°å€åˆ’åˆ†</h3><p>IPv4åœ°å€ç©ºé—´è¢«åˆ†ä¸ºäº”ä¸ªä¸åŒçš„åœ°å€ç±»åˆ«ï¼šAã€Bã€Cã€Då’ŒEã€‚æ¯ä¸ªåœ°å€ç±»åˆ«éƒ½å…·æœ‰ä¸åŒçš„åœ°å€èŒƒå›´å’Œç”¨é€”ã€‚ä»¥ä¸‹æ˜¯å„ä¸ªIPv4åœ°å€ç±»åˆ«çš„åœ°å€èŒƒå›´ï¼š</p><ol><li><p><strong>Aç±»åœ°å€</strong>ï¼š</p><ul><li>Aç±»åœ°å€ç”¨äºå¤§å‹ç½‘ç»œï¼Œé€šå¸¸ç”±å¤§å‹ç»„ç»‡ã€æ”¿åºœæœºæ„æˆ–äº’è”ç½‘æœåŠ¡æä¾›å•†ä½¿ç”¨ã€‚Aç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º0ã€‚Aç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»1.0.0.0åˆ°126.0.0.0ï¼Œå…¶ä¸­æœ€å°çš„Aç±»åœ°å€æ˜¯1.0.0.0ï¼Œè€Œæœ€å¤§çš„Aç±»åœ°å€æ˜¯126.255.255.255ã€‚Aç±»åœ°å€ä¸­æœ‰16,777,214ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Bç±»åœ°å€</strong>ï¼š</p><ul><li>Bç±»åœ°å€ç”¨äºä¸­å‹ç½‘ç»œï¼Œé€šå¸¸ç”±ä¸­ç­‰è§„æ¨¡çš„ç»„ç»‡æˆ–å…¬å¸ä½¿ç”¨ã€‚Bç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º10ã€‚Bç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»128.0.0.0åˆ°191.255.0.0ï¼Œå…¶ä¸­æœ€å°çš„Bç±»åœ°å€æ˜¯128.0.0.0ï¼Œè€Œæœ€å¤§çš„Bç±»åœ°å€æ˜¯191.255.255.255ã€‚Bç±»åœ°å€ä¸­æœ‰65,534ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Cç±»åœ°å€</strong>ï¼š</p><ul><li>Cç±»åœ°å€ç”¨äºå°å‹ç½‘ç»œï¼Œé€šå¸¸ç”±å°å‹ä¼ä¸šæˆ–ç»„ç»‡ä½¿ç”¨ã€‚Cç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º110ã€‚Cç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»192.0.0.0åˆ°223.255.255.0ï¼Œå…¶ä¸­æœ€å°çš„Cç±»åœ°å€æ˜¯192.0.0.0ï¼Œè€Œæœ€å¤§çš„Cç±»åœ°å€æ˜¯223.255.255.255ã€‚Cç±»åœ°å€ä¸­æœ‰254ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Dç±»åœ°å€</strong>ï¼š</p><ul><li>Dç±»åœ°å€ç”¨äºå¤šæ’­ï¼ˆMulticastï¼‰é€šä¿¡ã€‚å¤šæ’­åœ°å€ç”¨äºä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šçš„é€šä¿¡ï¼Œè€Œä¸æ˜¯ä¸€å¯¹ä¸€çš„é€šä¿¡ã€‚Dç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»224.0.0.0åˆ°239.255.255.255ã€‚</li></ul></li><li><p><strong>Eç±»åœ°å€</strong>ï¼š</p><ul><li>Eç±»åœ°å€ä¿ç•™ç”¨äºå®éªŒå’Œç ”ç©¶ï¼Œä¸ç”¨äºæ­£å¼çš„äº’è”ç½‘é€šä¿¡ã€‚Eç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»240.0.0.0åˆ°255.255.255.255ã€‚</li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›åœ°å€èŒƒå›´ä¸­çš„ä¸€äº›åœ°å€å·²è¢«ä¿ç•™ç”¨äºç‰¹å®šç”¨é€”ï¼Œå¦‚ç§æœ‰åœ°å€ç©ºé—´ã€ä¿ç•™åœ°å€å’Œå¤šæ’­åœ°å€ã€‚æ­¤å¤–ï¼ŒIPv4åœ°å€ç©ºé—´å·²ç»è€—å°½ï¼ŒIPv6è¢«å¹¿æ³›é‡‡ç”¨ä»¥åº”å¯¹IPv4åœ°å€çŸ­ç¼ºé—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å®é™…ç½‘ç»œä¸­ï¼ŒIPv6åœ°å€åˆ†é…å·²ç»å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚</p><h3 id="POS">POS</h3><p>åœ¨è®¡ç®—æœºç½‘ç»œæŠ€æœ¯ä¸­ï¼ŒPOSï¼ˆPoint of Saleï¼‰æŠ€æœ¯é€šå¸¸æŒ‡çš„æ˜¯ä¸é›¶å”®ä¸šåŠ¡ç›¸å…³çš„è®¡ç®—æœºç³»ç»Ÿå’Œè®¾å¤‡ï¼Œç”¨äºå¤„ç†é”€å”®äº¤æ˜“å’Œç®¡ç†å•†åº—æˆ–ä¼ä¸šçš„é”€å”®æ´»åŠ¨ã€‚POSæŠ€æœ¯åœ¨é›¶å”®ã€é¤é¥®å’ŒæœåŠ¡è¡Œä¸šä¸­å¹¿æ³›åº”ç”¨ï¼Œä»¥æé«˜äº¤æ˜“æ•ˆç‡ã€ç®¡ç†åº“å­˜ã€è·Ÿè¸ªé”€å”®æ•°æ®ç­‰ã€‚ä»¥ä¸‹æ˜¯è®¡ç®—æœºç½‘ç»œä¸­çš„POSæŠ€æœ¯çš„å…³é”®æ–¹é¢ï¼š</p><ol><li><p><strong>POSç»ˆç«¯</strong>ï¼š</p><ul><li>POSç³»ç»Ÿé€šå¸¸åŒ…æ‹¬POSç»ˆç«¯ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„è®¡ç®—æœºè®¾å¤‡æˆ–åº”ç”¨ç¨‹åºï¼Œç”¨äºå¤„ç†äº¤æ˜“ã€‚POSç»ˆç«¯é€šå¸¸ä¸ç½‘ç»œè¿æ¥ï¼Œä»¥ä¾¿ä¸åç«¯æœåŠ¡å™¨æˆ–æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä»¥è·å–äº§å“ä»·æ ¼ã€åº“å­˜ä¿¡æ¯ç­‰ã€‚</li></ul></li><li><p><strong>ç½‘ç»œè¿æ¥</strong>ï¼š</p><ul><li>POSç»ˆç«¯éœ€è¦ä¸åç«¯æœåŠ¡å™¨æˆ–äº‘æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œä»¥è·å–å®æ—¶çš„äº§å“ä¿¡æ¯ã€ä»·æ ¼ã€åº“å­˜çŠ¶æ€ç­‰ã€‚è¿™é€šå¸¸éœ€è¦ç½‘ç»œè¿æ¥ï¼Œå¯ä»¥æ˜¯æœ‰çº¿æˆ–æ— çº¿ç½‘ç»œï¼Œä»¥ç¡®ä¿å¿«é€Ÿå’Œå¯é çš„äº¤æ˜“å¤„ç†ã€‚</li></ul></li><li><p><strong>æ”¯ä»˜å¤„ç†</strong>ï¼š</p><ul><li>POSæŠ€æœ¯é€šå¸¸åŒ…æ‹¬æ”¯ä»˜å¤„ç†åŠŸèƒ½ï¼Œå…è®¸å®¢æˆ·ä½¿ç”¨å„ç§æ”¯ä»˜æ–¹å¼ï¼Œå¦‚ä¿¡ç”¨å¡ã€å€Ÿè®°å¡ã€ç§»åŠ¨æ”¯ä»˜ã€ç°é‡‘ç­‰ï¼Œå®Œæˆäº¤æ˜“ã€‚æ”¯ä»˜ä¿¡æ¯éœ€è¦å®‰å…¨ä¼ è¾“å’Œå¤„ç†ï¼Œå› æ­¤ç½‘ç»œè¿æ¥é€šå¸¸ä¼šé‡‡ç”¨åŠ å¯†å’Œå®‰å…¨åè®®ã€‚</li></ul></li><li><p><strong>åº“å­˜ç®¡ç†</strong>ï¼š</p><ul><li>POSç³»ç»Ÿèƒ½å¤Ÿè·Ÿè¸ªåº“å­˜æ°´å¹³ï¼Œä»¥ä¾¿åœ¨é”€å”®äº§å“æ—¶æ›´æ–°åº“å­˜ã€‚å½“äº§å“å”®ç½„æˆ–åº“å­˜ä½äºé˜ˆå€¼æ—¶ï¼ŒPOSç³»ç»Ÿå¯ä»¥è‡ªåŠ¨å‘å‡ºè®¢å•æˆ–æé†’åº“å­˜ç®¡ç†äººå‘˜ã€‚</li></ul></li><li><p><strong>é”€å”®æ•°æ®å’ŒæŠ¥å‘Š</strong>ï¼š</p><ul><li>POSç³»ç»Ÿè®°å½•æ¯ç¬”äº¤æ˜“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬äº§å“ã€ä»·æ ¼ã€æ—¥æœŸã€æ—¶é—´ç­‰ã€‚è¿™äº›æ•°æ®å¯ç”¨äºç”Ÿæˆé”€å”®æŠ¥å‘Šå’Œåˆ†æï¼Œå¸®åŠ©å•†å®¶äº†è§£é”€å”®è¶‹åŠ¿ã€äº§å“æµè¡Œåº¦ç­‰ä¿¡æ¯ã€‚</li></ul></li><li><p><strong>å®¢æˆ·ç®¡ç†</strong>ï¼š</p><ul><li>ä¸€äº›POSç³»ç»ŸåŒ…æ‹¬å®¢æˆ·ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸å•†å®¶è·Ÿè¸ªå®¢æˆ·è´­ä¹°å†å²ã€å‘é€ä¿ƒé”€ä¿¡æ¯ã€ç®¡ç†å®¢æˆ·ç§¯åˆ†æˆ–å¥–åŠ±è®¡åˆ’ç­‰ã€‚</li></ul></li><li><p><strong>äº‘POS</strong>ï¼š</p><ul><li>æœ€è¿‘ï¼Œäº‘POSæŠ€æœ¯ä¹Ÿé€æ¸æµè¡Œèµ·æ¥ã€‚äº‘POSç³»ç»Ÿå°†POSæ•°æ®å­˜å‚¨åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå…è®¸å•†å®¶è¿œç¨‹è®¿é—®å’Œç®¡ç†POSæ•°æ®ï¼Œæ— è®ºåœ¨ä½•åœ°éƒ½å¯ä»¥æŸ¥çœ‹é”€å”®æ•°æ®ã€‚</li></ul></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼š</p><ul><li>POSæŠ€æœ¯å¿…é¡»å…·å¤‡é«˜åº¦çš„å®‰å…¨æ€§ï¼Œä»¥ä¿æŠ¤æ”¯ä»˜ä¿¡æ¯å’Œå®¢æˆ·æ•°æ®ã€‚è¿™åŒ…æ‹¬åŠ å¯†æ•°æ®ä¼ è¾“ã€å®‰å…¨è®¿é—®æ§åˆ¶ã€é˜²æ­¢æ¶æ„è½¯ä»¶æ”»å‡»ç­‰å®‰å…¨æªæ–½ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œè®¡ç®—æœºç½‘ç»œä¸­çš„POSæŠ€æœ¯æ˜¯ç”¨äºå¤„ç†é”€å”®å’Œç®¡ç†é›¶å”®ä¸šåŠ¡çš„å…³é”®å·¥å…·ã€‚å®ƒé€šè¿‡ç½‘ç»œè¿æ¥ã€æ”¯ä»˜å¤„ç†ã€åº“å­˜ç®¡ç†ã€æ•°æ®åˆ†æç­‰åŠŸèƒ½ï¼Œå¸®åŠ©å•†å®¶æé«˜äº¤æ˜“æ•ˆç‡ã€æä¾›æ›´å¥½çš„å®¢æˆ·æœåŠ¡ï¼Œå¹¶ä¸ºç»è¥å†³ç­–æä¾›æœ‰ç”¨çš„æ•°æ®ã€‚</p><h3 id="SDN-2">SDN</h3><p>SDNï¼ˆSoftware-Defined Networkingï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç½‘ç»œæ¶æ„å’Œç®¡ç†æ–¹æ³•ï¼Œå®ƒé€šè¿‡å°†ç½‘ç»œæ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰ä¸æ•°æ®è½¬å‘å¹³é¢ï¼ˆData Planeï¼‰åˆ†ç¦»ï¼Œå¹¶å°†ç½‘ç»œæ§åˆ¶é€»è¾‘é›†ä¸­åŒ–ï¼Œä»¥å®ç°æ›´çµæ´»ã€å¯ç¼–ç¨‹å’Œè‡ªåŠ¨åŒ–çš„ç½‘ç»œç®¡ç†ã€‚ä¸‹é¢æ˜¯å…³äºSDNæŠ€æœ¯çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li><p><strong>æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢åˆ†ç¦»</strong>ï¼šä¼ ç»Ÿç½‘ç»œè®¾å¤‡å¦‚è·¯ç”±å™¨å’Œäº¤æ¢æœºé€šå¸¸å°†æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢é›†æˆåœ¨ä¸€èµ·ï¼Œè¿™æ„å‘³ç€ç½‘ç»œçš„æ§åˆ¶é€»è¾‘ä¸æ•°æ®åŒ…çš„å¤„ç†åœ¨åŒä¸€è®¾å¤‡ä¸Šå®Œæˆã€‚SDNå°†è¿™ä¸¤ä¸ªå¹³é¢åˆ†å¼€ï¼Œå…è®¸ç½‘ç»œç®¡ç†å‘˜é›†ä¸­ç®¡ç†ç½‘ç»œç­–ç•¥ï¼Œè€Œæ•°æ®å¹³é¢è®¾å¤‡åˆ™è´Ÿè´£æ ¹æ®è¿™äº›ç­–ç•¥æ¥è½¬å‘æ•°æ®åŒ…ã€‚</p></li><li><p><strong>SDNæ§åˆ¶å™¨</strong>ï¼šSDNç½‘ç»œçš„æ ¸å¿ƒæ˜¯SDNæ§åˆ¶å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸­å¤®å®ä½“ï¼Œè´Ÿè´£ç®¡ç†ç½‘ç»œè®¾å¤‡å’Œè·¯ç”±æµé‡ã€‚æµè¡Œçš„SDNæ§åˆ¶å™¨åŒ…æ‹¬OpenDaylightã€ONOSã€Floodlightå’ŒCiscoçš„APIC-EMç­‰ã€‚è¿™äº›æ§åˆ¶å™¨æä¾›äº†ä¸€ç§æ¥å£ï¼Œå…è®¸ç®¡ç†å‘˜å®šä¹‰ç½‘ç»œç­–ç•¥ã€ç›‘æ§æµé‡å¹¶åŠ¨æ€é…ç½®ç½‘ç»œè®¾å¤‡ã€‚</p></li><li><p><strong>ç½‘ç»œå¯ç¼–ç¨‹æ€§</strong>ï¼šSDNä½¿ç½‘ç»œæ›´åŠ å¯ç¼–ç¨‹ï¼Œå…è®¸ç®¡ç†å‘˜æ ¹æ®åº”ç”¨ç¨‹åºéœ€æ±‚åŠ¨æ€é…ç½®ç½‘ç»œç­–ç•¥ã€‚è¿™ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒåº”ç”¨çš„è¦æ±‚ï¼Œä»è€Œæä¾›æ›´é«˜çš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚</p></li><li><p><strong>è‡ªåŠ¨åŒ–</strong>ï¼šSDNæŠ€æœ¯å¯ä»¥è‡ªåŠ¨åŒ–è®¸å¤šç½‘ç»œç®¡ç†ä»»åŠ¡ï¼Œä¾‹å¦‚æµé‡å·¥ç¨‹ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ã€‚é€šè¿‡é›†ä¸­åŒ–çš„æ§åˆ¶ï¼Œç½‘ç»œç®¡ç†å‘˜å¯ä»¥æ›´è½»æ¾åœ°å®æ–½è¿™äº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œæé«˜äº†ç½‘ç»œçš„å¯é æ€§å’Œæ•ˆç‡ã€‚</p></li><li><p><strong>SDNåè®®</strong>ï¼šåœ¨SDNä¸­ï¼ŒOpenFlowæ˜¯æœ€å¸¸ç”¨çš„é€šä¿¡åè®®ä¹‹ä¸€ï¼Œç”¨äºåœ¨æ§åˆ¶å™¨å’Œæ•°æ®å¹³é¢è®¾å¤‡ä¹‹é—´ä¼ é€’æµé‡è½¬å‘è§„åˆ™ã€‚æ­¤å¤–ï¼Œå…¶ä»–åè®®å¦‚NETCONFå’ŒRESTful APIä¹Ÿå¯ä»¥ç”¨äºSDNæ§åˆ¶å™¨ä¸ç½‘ç»œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚</p></li><li><p><strong>SDNçš„ä¼˜åŠ¿</strong>ï¼šSDNæŠ€æœ¯æä¾›äº†æ›´å¥½çš„ç½‘ç»œç®¡ç†å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œæœ‰åŠ©äºé™ä½è¿è¥æˆæœ¬ã€‚å®ƒè¿˜å…è®¸ç½‘ç»œæ›´å¥½åœ°é€‚åº”æ–°çš„åº”ç”¨éœ€æ±‚ï¼Œæé«˜äº†ç½‘ç»œçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li><li><p><strong>SDNçš„åº”ç”¨</strong>ï¼šSDNæŠ€æœ¯å¹¿æ³›åº”ç”¨äºæ•°æ®ä¸­å¿ƒç½‘ç»œã€å¹¿åŸŸç½‘ï¼ˆWANï¼‰ã€ç”µä¿¡ç½‘ç»œå’Œä¼ä¸šç½‘ç»œä¸­ã€‚å®ƒåœ¨è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘ï¼ˆIoTï¼‰å’Œ5Gç½‘ç»œç­‰é¢†åŸŸéƒ½æœ‰ç€é‡è¦çš„ä½œç”¨ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSDNæŠ€æœ¯è™½ç„¶å…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼Œä¾‹å¦‚å®‰å…¨æ€§å’Œå¤æ‚æ€§ã€‚ç½‘ç»œç®¡ç†å‘˜éœ€è¦ä»”ç»†è€ƒè™‘å¦‚ä½•æœ‰æ•ˆåœ°éƒ¨ç½²å’Œç®¡ç†SDNç½‘ç»œï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</p><h3 id="QoS-2">QoS</h3><p>QoSï¼ˆQuality of Serviceï¼‰æ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºç®¡ç†å’Œæ§åˆ¶ç½‘ç»œä¸Šçš„æ•°æ®æµï¼Œä»¥ç¡®ä¿ä¸åŒç±»å‹çš„æ•°æ®æµèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­å¾—åˆ°é€‚å½“çš„å¸¦å®½ã€å»¶è¿Ÿã€ä¸¢åŒ…ç‡ç­‰æœåŠ¡è´¨é‡å‚æ•°ã€‚QoSæŠ€æœ¯çš„ä¸»è¦ç›®æ ‡æ˜¯æ»¡è¶³ç½‘ç»œä¸Šä¸åŒåº”ç”¨å’ŒæœåŠ¡çš„æ€§èƒ½éœ€æ±‚ï¼Œå¹¶ç¡®ä¿å…³é”®åº”ç”¨çš„è‰¯å¥½è¿è¡Œã€‚</p><p>ä»¥ä¸‹æ˜¯QoSæŠ€æœ¯çš„ä¸»è¦ç»„æˆéƒ¨åˆ†å’Œç›¸å…³æ¦‚å¿µï¼š</p><ol><li><p><strong>å¸¦å®½ç®¡ç†</strong>ï¼šQoSçš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯å¸¦å®½ç®¡ç†ï¼Œå®ƒæ¶‰åŠåˆ†é…å’Œæ§åˆ¶ç½‘ç»œä¸­å¯ç”¨å¸¦å®½çš„æ–¹å¼ã€‚è¿™åŒ…æ‹¬å¸¦å®½åˆ†é…ã€å¸¦å®½ä¿éšœã€å¸¦å®½è°ƒæ•´ç­‰ç­–ç•¥ï¼Œä»¥ç¡®ä¿é‡è¦åº”ç”¨èƒ½å¤Ÿè·å¾—è¶³å¤Ÿçš„å¸¦å®½ã€‚</p></li><li><p><strong>æµé‡åˆ†ç±»</strong>ï¼šQoSæŠ€æœ¯æ ¹æ®æµé‡çš„ç‰¹æ€§å¯¹æ•°æ®æµè¿›è¡Œåˆ†ç±»ã€‚é€šå¸¸ï¼Œæµé‡å¯ä»¥åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œå¦‚å®æ—¶æµé‡ï¼ˆä¾‹å¦‚VoIPå’Œè§†é¢‘æµï¼‰ã€äº¤äº’å¼æµé‡ï¼ˆä¾‹å¦‚Webæµè§ˆï¼‰å’Œåå°ä¼ è¾“æµé‡ï¼ˆä¾‹å¦‚æ–‡ä»¶ä¸‹è½½ï¼‰ã€‚è¿™äº›ä¸åŒçš„ç±»åˆ«é€šå¸¸éœ€è¦ä¸åŒçš„QoSå¤„ç†ã€‚</p></li><li><p><strong>æ ‡è®°å’Œæ ‡ç­¾</strong>ï¼šä¸ºäº†å¯¹ä¸åŒçš„æ•°æ®æµåº”ç”¨QoSç­–ç•¥ï¼Œç½‘ç»œè®¾å¤‡é€šå¸¸ä½¿ç”¨æ ‡è®°æˆ–æ ‡ç­¾æ¥è¯†åˆ«æµé‡ã€‚è¿™äº›æ ‡è®°å¯ä»¥é€šè¿‡ä¸åŒçš„å­—æ®µï¼ˆå¦‚DiffServæˆ–802.1pæ ‡å¤´å­—æ®µï¼‰æ·»åŠ åˆ°æ•°æ®åŒ…ä¸­ï¼Œå¹¶åœ¨ç½‘ç»œä¸­è·¯ç”±å’Œå¤„ç†æ•°æ®åŒ…æ—¶å‚è€ƒã€‚</p></li><li><p><strong>æµé‡æ§åˆ¶</strong>ï¼šQoSæŠ€æœ¯å…è®¸ç®¡ç†å‘˜è®¾ç½®æµé‡æ§åˆ¶ç­–ç•¥ï¼Œä»¥æ§åˆ¶æ•°æ®æµçš„é€Ÿç‡å’Œä¼˜å…ˆçº§ã€‚è¿™åŒ…æ‹¬æµé‡è°ƒåº¦ã€é˜Ÿåˆ—ç®¡ç†å’Œæ‹¥å¡æ§åˆ¶ç­‰æŠ€æœ¯ï¼Œä»¥ç¡®ä¿é«˜ä¼˜å…ˆçº§æµé‡åœ¨ç½‘ç»œä¸­å¾—åˆ°åŠæ—¶ä¼ è¾“ã€‚</p></li><li><p><strong>æ‹¥å¡ç®¡ç†</strong>ï¼šæ‹¥å¡æ˜¯ç½‘ç»œä¸­å¸¸è§çš„é—®é¢˜ï¼Œä¼šå¯¼è‡´æ•°æ®åŒ…ä¸¢å¤±å’Œå»¶è¿Ÿå¢åŠ ã€‚QoSæŠ€æœ¯å¯ä»¥å¸®åŠ©ç½‘ç»œè®¾å¤‡è¯†åˆ«å’Œåº”å¯¹æ‹¥å¡æƒ…å†µï¼Œä¾‹å¦‚é€šè¿‡é™ä½ä½ä¼˜å…ˆçº§æµé‡çš„é€Ÿç‡æ¥ä¿æŠ¤é«˜ä¼˜å…ˆçº§æµé‡ã€‚</p></li><li><p><strong>ç­–ç•¥é…ç½®</strong>ï¼šQoSç­–ç•¥é€šå¸¸éœ€è¦åœ¨ç½‘ç»œè®¾å¤‡ä¸Šè¿›è¡Œé…ç½®ã€‚è¿™åŒ…æ‹¬è®¾ç½®æµé‡åˆ†ç±»ã€æ ‡è®°å’Œæ ‡ç­¾ã€å®šä¹‰å¸¦å®½é™åˆ¶å’Œä¼˜å…ˆçº§ã€é…ç½®é˜Ÿåˆ—ç­‰ã€‚</p></li><li><p><strong>ç›‘æµ‹å’ŒæŠ¥å‘Š</strong>ï¼šQoSæŠ€æœ¯é€šå¸¸éœ€è¦ç›‘æµ‹ç½‘ç»œæ€§èƒ½ï¼Œå¹¶ç”ŸæˆæŠ¥å‘Šä»¥è¯„ä¼°QoSç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚è¿™å¯ä»¥é€šè¿‡ç½‘ç»œç›‘æ§å·¥å…·å’ŒQoSæŠ¥å‘Šç”Ÿæˆå™¨æ¥å®ç°ã€‚</p></li></ol><p>QoSæŠ€æœ¯åœ¨å„ç§ç½‘ç»œç¯å¢ƒä¸­éƒ½æœ‰é‡è¦åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦æ”¯æŒå®æ—¶åº”ç”¨ç¨‹åºï¼ˆå¦‚VoIPå’Œè§†é¢‘ä¼šè®®ï¼‰çš„ä¼ä¸šç½‘ç»œã€äº‘è®¡ç®—ç¯å¢ƒå’Œç”µä¿¡ç½‘ç»œä¸­ã€‚é€šè¿‡æœ‰æ•ˆå®æ–½QoSç­–ç•¥ï¼Œå¯ä»¥æä¾›æ›´ç¨³å®šã€å¯é å’Œé«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡ï¼Œç¡®ä¿é‡è¦åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="HFC-3">HFC</h3><p>HFCï¼ˆHybrid Fiber-Coaxialï¼‰æ˜¯ä¸€ç§é€šä¿¡ç½‘ç»œæ¶æ„ï¼Œé€šå¸¸ç”¨äºæä¾›æœ‰çº¿ç”µè§†å’Œå®½å¸¦äº’è”ç½‘æœåŠ¡ã€‚HFCç½‘ç»œç»“åˆäº†å…‰çº¤ï¼ˆFiberï¼‰å’ŒåŒè½´ç”µç¼†ï¼ˆCoaxial Cableï¼‰ä¸¤ç§ä¸åŒçš„ä¼ è¾“ä»‹è´¨ï¼Œä»¥å®ç°é«˜é€Ÿæ•°æ®ä¼ è¾“å’Œå¹¿æ’­ç”µè§†ä¿¡å·çš„åˆ†å‘ã€‚ä»¥ä¸‹æ˜¯HFCç½‘ç»œçš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’Œç»„æˆéƒ¨åˆ†ï¼š</p><ol><li><p><strong>å…‰çº¤éƒ¨åˆ†</strong>ï¼š</p><ul><li>HFCç½‘ç»œçš„æ ¸å¿ƒæ˜¯å…‰çº¤ï¼ˆå…‰å¯¼çº¤ç»´ï¼‰ï¼Œé€šå¸¸ç”±å…‰ç¼†ç»„æˆã€‚å…‰çº¤å…·æœ‰é«˜å¸¦å®½å’Œä½æŸè€—çš„ç‰¹ç‚¹ï¼Œä½¿å…¶èƒ½å¤Ÿä¼ è¾“å¤§é‡æ•°æ®ï¼ŒåŒæ—¶å…·æœ‰è¾ƒé•¿çš„ä¼ è¾“è·ç¦»ã€‚</li><li>åœ¨HFCç½‘ç»œä¸­ï¼Œå…‰çº¤é€šå¸¸å»¶ä¼¸åˆ°ç½‘ç»œæä¾›å•†çš„ä¸­å¤®åŠå…¬å®¤ï¼ˆHeadendï¼‰æˆ–æ•°æ®ä¸­å¿ƒã€‚</li></ul></li><li><p><strong>åŒè½´ç”µç¼†éƒ¨åˆ†</strong>ï¼š</p><ul><li>ä»ä¸­å¤®åŠå…¬å®¤å»¶ä¼¸å‡ºæ¥çš„å…‰çº¤é€šå¸¸ä¼šè¿æ¥åˆ°åŒè½´ç”µç¼†ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç”µç¼†ï¼Œå…·æœ‰è¾ƒé«˜çš„ä¿¡å·ä¼ è¾“èƒ½åŠ›ã€‚</li><li>åŒè½´ç”µç¼†åœ¨æœ€åä¸€è‹±é‡Œï¼ˆLast Mileï¼‰æˆ–ç”¨æˆ·å®¶åº­é™„è¿‘çš„ç½‘ç»œä¸­ç”¨äºä¼ è¾“æ•°æ®å’Œç”µè§†ä¿¡å·ã€‚å®ƒé€šå¸¸åˆ†ä¸ºå¤šä¸ªä¿¡å·é¢‘å¸¦ï¼Œæ¯ä¸ªé¢‘å¸¦ç”¨äºä¸åŒçš„ç›®çš„ã€‚</li></ul></li><li><p><strong>åˆ†é…å™¨å’Œæ”¾å¤§å™¨</strong>ï¼š</p><ul><li>åœ¨HFCç½‘ç»œä¸­ï¼Œå…‰çº¤åˆ°è¾¾è¡—åŒºï¼ˆé€šå¸¸ç§°ä¸ºèŠ‚ç‚¹ï¼‰çš„åœ°æ–¹ï¼Œç„¶åé€šè¿‡åˆ†é…å™¨å°†ä¿¡å·åˆ†å‘åˆ°å„ä¸ªç”¨æˆ·å®¶åº­ã€‚</li><li>æ”¾å¤§å™¨ï¼ˆAmplifiersï¼‰ç”¨äºå¢å¼ºä¿¡å·ï¼Œä»¥å¼¥è¡¥ä¿¡å·åœ¨åŒè½´ç”µç¼†ä¸­çš„ä¼ è¾“æŸè€—ã€‚è¿™äº›æ”¾å¤§å™¨é€šå¸¸ä½äºåŒè½´ç”µç¼†çš„ä¸åŒä½ç½®ï¼Œä»¥ç¡®ä¿ä¿¡å·è´¨é‡ã€‚</li></ul></li><li><p><strong>æ•°æ®å’Œç”µè§†ä¿¡å·</strong>ï¼š</p><ul><li>HFCç½‘ç»œæ—¨åœ¨æ”¯æŒå¤šç§æœåŠ¡ï¼ŒåŒ…æ‹¬å®½å¸¦äº’è”ç½‘ã€æœ‰çº¿ç”µè§†å’Œç”µè¯æœåŠ¡ã€‚å…‰çº¤éƒ¨åˆ†ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“ï¼Œè€ŒåŒè½´ç”µç¼†éƒ¨åˆ†åŒæ—¶ç”¨äºå¹¿æ’­ç”µè§†ä¿¡å·çš„ä¼ è¾“ã€‚</li><li>æ•°æ®ä¿¡å·é€šå¸¸é‡‡ç”¨æ•°å­—ä¼ è¾“ï¼Œè€Œç”µè§†ä¿¡å·å¯ä»¥æ˜¯æ¨¡æ‹Ÿæˆ–æ•°å­—ä¿¡å·ï¼Œå…·ä½“å–å†³äºç½‘ç»œæä¾›å•†çš„æŠ€æœ¯å’ŒæœåŠ¡ã€‚</li></ul></li><li><p><strong>åŒå‘é€šä¿¡</strong>ï¼š</p><ul><li>HFCç½‘ç»œé€šå¸¸æ˜¯åŒå‘çš„ï¼Œå…è®¸ç”¨æˆ·åŒæ—¶ä¸‹è½½å’Œä¸Šä¼ æ•°æ®ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå®½å¸¦äº’è”ç½‘æœåŠ¡ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç½‘ç»œä¸Šä¼ å’Œä¸‹è½½å¤§æ–‡ä»¶ã€æµåª’ä½“å†…å®¹ç­‰ã€‚</li></ul></li><li><p><strong>ç½‘ç»œæä¾›å•†</strong>ï¼š</p><ul><li>HFCç½‘ç»œé€šå¸¸ç”±ç”µè§†æœ‰çº¿è¿è¥å•†æˆ–äº’è”ç½‘æœåŠ¡æä¾›å•†æä¾›å’Œç»´æŠ¤ã€‚è¿™äº›æä¾›å•†é€šè¿‡HFCç½‘ç»œå‘ç”¨æˆ·æä¾›å¤šç§æœåŠ¡ï¼Œå¹¶é€šå¸¸ä¼šæä¾›æœ‰çº¿ç”µè§†ã€å®½å¸¦äº’è”ç½‘å’Œç”µè¯æœåŠ¡çš„æ†ç»‘å¥—é¤ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒHFCç½‘ç»œæ˜¯ä¸€ç§çµæ´»ä¸”å¤šç”¨é€”çš„é€šä¿¡ç½‘ç»œæ¶æ„ï¼Œå®ƒç»“åˆäº†å…‰çº¤çš„é«˜é€Ÿæ•°æ®ä¼ è¾“èƒ½åŠ›å’ŒåŒè½´ç”µç¼†çš„å¹¿æ’­ç”µè§†ä¿¡å·ä¼ è¾“èƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›äº†å¤šç§é€šä¿¡å’Œå¨±ä¹æœåŠ¡ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œä¸€äº›åœ°åŒºæ­£åœ¨é€æ¸å‡çº§åˆ°æ›´å…ˆè¿›çš„çº¯å…‰çº¤ç½‘ç»œï¼Œä»¥æä¾›æ›´é«˜çš„é€Ÿåº¦å’Œæ€§èƒ½ã€‚</p><h3 id="MPLS">MPLS</h3><p>MPLSï¼ˆMultiprotocol Label Switchingï¼‰æ˜¯ä¸€ç§ç”¨äºæ„å»ºé«˜æ•ˆã€çµæ´»å’Œå¯ç®¡ç†çš„æ•°æ®ç½‘ç»œçš„é€šä¿¡åè®®å’ŒæŠ€æœ¯ã€‚å®ƒå°†ä¼ ç»Ÿçš„IPè·¯ç”±å’Œæ•°æ®åŒ…äº¤æ¢ä¸æ ‡ç­¾äº¤æ¢ç›¸ç»“åˆï¼Œä¸ºæ•°æ®åŒ…åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“æä¾›äº†æ›´é«˜çš„æ€§èƒ½å’Œè´¨é‡ã€‚</p><p>ä»¥ä¸‹æ˜¯MPLSçš„å…³é”®ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>æ ‡ç­¾äº¤æ¢</strong>ï¼š</p><ul><li>MPLSå¼•å…¥äº†ä¸€ä¸ªç§°ä¸º&quot;æ ‡ç­¾&quot;çš„æ•°æ®åŒ…å¤´éƒ¨ä¿¡æ¯ï¼Œç”¨äºæ ‡è¯†æ•°æ®åŒ…çš„è·¯ç”±å’Œå¤„ç†æ–¹å¼ã€‚</li><li>è¿™äº›æ ‡ç­¾æ˜¯çŸ­ã€å›ºå®šé•¿åº¦çš„å€¼ï¼Œè¢«é™„åŠ åˆ°æ•°æ®åŒ…çš„å¤´éƒ¨ï¼Œä»¥ä¾¿è·¯ç”±å™¨å’Œäº¤æ¢æœºèƒ½å¤Ÿå¿«é€ŸæŸ¥æ‰¾å’Œè½¬å‘æ•°æ®åŒ…ï¼Œè€Œä¸å¿…è¿›è¡Œå¤æ‚çš„IPè·¯ç”±æŸ¥æ‰¾ã€‚</li></ul></li><li><p><strong>æ ‡ç­¾äº¤æ¢çš„ä¼˜ç‚¹</strong>ï¼š</p><ul><li>æ›´å¿«çš„æ•°æ®åŒ…è½¬å‘é€Ÿåº¦ï¼šç”±äºæ ‡ç­¾æŸ¥æ‰¾é€Ÿåº¦æ¯”ä¼ ç»ŸIPè·¯ç”±æ›´å¿«ï¼ŒMPLSå¯ä»¥å®ç°æ›´é«˜çš„æ•°æ®åŒ…è½¬å‘é€Ÿåº¦ï¼Œé€‚ç”¨äºè¦æ±‚ä½å»¶è¿Ÿçš„åº”ç”¨ã€‚</li><li>çµæ´»æ€§ï¼šMPLSå¯ä»¥æ ¹æ®æ ‡ç­¾çš„å€¼æ¥å®ç°æµé‡å·¥ç¨‹ã€è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç®¡ç†ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç½‘ç»œè¿è¥å•†å’Œä¼ä¸šçš„éœ€æ±‚ã€‚</li></ul></li><li><p><strong>æ ‡ç­¾åˆ†å‘å’Œäº¤æ¢</strong>ï¼š</p><ul><li>MPLSç½‘ç»œä¸­çš„è·¯ç”±å™¨å’Œäº¤æ¢æœºè¢«ç§°ä¸º&quot;MPLSèŠ‚ç‚¹&quot;ï¼Œå®ƒä»¬è´Ÿè´£ä¸ºæ•°æ®åŒ…åˆ†å‘å’Œäº¤æ¢æ ‡ç­¾ã€‚</li><li>å½“æ•°æ®åŒ…è¿›å…¥MPLSç½‘ç»œæ—¶ï¼Œç¬¬ä¸€ä¸ªMPLSèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯è¾¹ç¼˜è·¯ç”±å™¨ï¼‰ä¼šåˆ†é…ä¸€ä¸ªæ ‡ç­¾ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°æ•°æ®åŒ…å¤´éƒ¨ã€‚</li><li>æ•°æ®åŒ…åœ¨MPLSç½‘ç»œä¸­æ ¹æ®æ ‡ç­¾è¿›è¡Œè·¯ç”±ï¼Œæ¯ä¸ªMPLSèŠ‚ç‚¹æ ¹æ®æ ‡ç­¾å†³å®šæ•°æ®åŒ…çš„ä¸‹ä¸€è·³ã€‚</li><li>å½“æ•°æ®åŒ…ç¦»å¼€MPLSç½‘ç»œæ—¶ï¼Œæœ€åä¸€ä¸ªMPLSèŠ‚ç‚¹ä¼šå°†æ ‡ç­¾ç§»é™¤ï¼Œå°†æ•°æ®åŒ…å‘é€åˆ°ç›®æ ‡ã€‚</li></ul></li><li><p><strong>MPLSåº”ç”¨</strong>ï¼š</p><ul><li>MPLSå¹¿æ³›ç”¨äºæ„å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼ˆVPNï¼‰å’Œå¤šåè®®æ ‡ç­¾äº¤æ¢ï¼ˆMPLS-VPNï¼‰ã€‚</li><li>å®ƒä¹Ÿç”¨äºæ”¯æŒæœåŠ¡æä¾›å•†ç½‘ç»œä¸­çš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç®¡ç†ã€æµé‡å·¥ç¨‹å’Œè´Ÿè½½å‡è¡¡ã€‚</li><li>MPLSè¿˜åœ¨å¹¿åŸŸç½‘ï¼ˆWANï¼‰å’Œæ•°æ®ä¸­å¿ƒç½‘ç»œä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œä»¥æä¾›é«˜æ€§èƒ½çš„äº’è”äº’é€šã€‚</li></ul></li><li><p><strong>MPLSä¸IP</strong>ï¼š</p><ul><li>MPLSä¸IPæ˜¯å¯ä»¥ååŒå·¥ä½œçš„æŠ€æœ¯ã€‚äº‹å®ä¸Šï¼ŒMPLSå¯ä»¥åœ¨ç°æœ‰çš„IPç½‘ç»œä¸Šéƒ¨ç½²ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŠ¿ã€‚</li><li>MPLSé€šå¸¸ä¸BGPï¼ˆBorder Gateway Protocolï¼‰ç­‰è·¯ç”±åè®®ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®å®šæ•°æ®åŒ…çš„è·¯å¾„å’Œæ ‡ç­¾åˆ†å‘ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒMPLSæ˜¯ä¸€ç§å¼ºå¤§çš„ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºæé«˜æ•°æ®ç½‘ç»œçš„æ€§èƒ½ã€å¯ç®¡ç†æ€§å’Œè´¨é‡ã€‚å®ƒåœ¨æä¾›å¹¿åŸŸç½‘è¿æ¥ã€å»ºç«‹è™šæ‹Ÿä¸“ç”¨ç½‘ç»œã€å®ç°æœåŠ¡è´¨é‡ç®¡ç†ç­‰æ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œå¹¶åœ¨å¤§å‹ä¼ä¸šç½‘ç»œã€äº‘æœåŠ¡å’Œç”µä¿¡ç½‘ç»œä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚</p><h3 id="é¢‘åˆ†å¤ç”¨">é¢‘åˆ†å¤ç”¨</h3><p>é¢‘åˆ†å¤ç”¨ï¼ˆFrequency Division Multiplexingï¼ŒFDMï¼‰æ˜¯ä¸€ç§å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œç”¨äºåœ¨é€šä¿¡ç³»ç»Ÿä¸­å°†å¤šä¸ªç‹¬ç«‹çš„ä¿¡å·æˆ–æ•°æ®æµåˆå¹¶æˆä¸€ä¸ªå¤åˆä¿¡å·ï¼Œå¹¶é€šè¿‡ä¸åŒçš„é¢‘ç‡å°†å®ƒä»¬ä¼ è¾“åˆ°ç›®æ ‡æ¥æ”¶ç«¯ã€‚è¿™ä¸ªæŠ€æœ¯å…è®¸å¤šä¸ªä¿¡å·åŒæ—¶å…±äº«ä¼ è¾“ä»‹è´¨ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</p><p>ä»¥ä¸‹æ˜¯é¢‘åˆ†å¤ç”¨çš„ä¸€äº›å…³é”®æ¦‚å¿µå’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>ä¿¡å·åˆ†ç¦»</strong>ï¼š</p><ul><li>åœ¨é¢‘åˆ†å¤ç”¨ä¸­ï¼Œæ¯ä¸ªç‹¬ç«‹çš„ä¿¡å·æˆ–æ•°æ®æµè¢«åˆ†é…åˆ°ä¸åŒçš„é¢‘ç‡å¸¦å®½ä¸Šã€‚</li><li>æ¯ä¸ªä¿¡å·é€šå¸¸ç»è¿‡ä¸€ä¸ªè°ƒåˆ¶å™¨ï¼ˆModulatorï¼‰ï¼Œå°†å…¶è½¬æ¢æˆå¯ä»¥åœ¨ç‰¹å®šé¢‘æ®µå†…ä¼ è¾“çš„ä¿¡å·ã€‚</li></ul></li><li><p><strong>åˆå¹¶å’Œä¼ è¾“</strong>ï¼š</p><ul><li>åˆå¹¶å™¨ï¼ˆMultiplexerï¼‰è´Ÿè´£å°†æ‰€æœ‰åˆ†é…ç»™ä¸åŒé¢‘ç‡çš„ä¿¡å·åˆå¹¶æˆä¸€ä¸ªå¤åˆä¿¡å·ã€‚</li><li>å¤åˆä¿¡å·éšåè¢«ä¼ è¾“åˆ°é€šä¿¡åª’ä»‹ï¼ˆå¦‚ç”µç¼†ã€å…‰çº¤æˆ–ç©ºä¸­ä¼ è¾“ï¼‰ä¸Šï¼Œä»¥ä¾¿ä¼ è¾“åˆ°æ¥æ”¶ç«¯ã€‚</li></ul></li><li><p><strong>é¢‘ç‡é€‰æ‹©</strong>ï¼š</p><ul><li>æ¥æ”¶ç«¯ä½¿ç”¨ä¸€ä¸ªåˆ†é¢‘å™¨ï¼ˆDemultiplexerï¼‰æ¥é€‰æ‹©ç‰¹å®šé¢‘ç‡å¸¦å®½ï¼Œå¹¶å°†å…¶åˆ†ç¦»æˆç‹¬ç«‹çš„ä¿¡å·ã€‚</li><li>æ¯ä¸ªåˆ†ç¦»å‡ºçš„ä¿¡å·ç»è¿‡è§£è°ƒå™¨ï¼ˆDemodulatorï¼‰ä»¥è¿˜åŸåŸå§‹æ•°æ®æˆ–ä¿¡æ¯ã€‚</li></ul></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨å…è®¸å¤šä¸ªä¿¡å·å¹¶è¡Œä¼ è¾“ï¼Œè€Œä¸ä¼šå¹²æ‰°å½¼æ­¤ã€‚</li><li>å®ƒå¯ä»¥æé«˜é€šä¿¡ç³»ç»Ÿçš„æ•ˆç‡ï¼Œå…è®¸å¤šä¸ªç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºå…±äº«é€šä¿¡é€šé“ï¼Œä»è€Œå‡å°‘äº†é€šä¿¡ç³»ç»Ÿçš„æˆæœ¬ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨å¹¿æ³›åº”ç”¨äºå„ç§é€šä¿¡ç³»ç»Ÿï¼ŒåŒ…æ‹¬æœ‰çº¿ç”µè§†ã€å¹¿æ’­ã€å«æ˜Ÿé€šä¿¡ã€ç§»åŠ¨é€šä¿¡å’Œè®¡ç®—æœºç½‘ç»œç­‰ã€‚</li><li>åœ¨ç§»åŠ¨é€šä¿¡é¢†åŸŸï¼Œä¸åŒçš„ç§»åŠ¨ç”µè¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„é¢‘æ®µï¼Œä»¥ä¾¿åœ¨åŒä¸€æ—¶é—´å…±äº«ç›¸åŒçš„é€šä¿¡åŸºç¡€è®¾æ–½ã€‚</li></ul></li><li><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨çš„ä¸»è¦ç¼ºç‚¹æ˜¯éœ€è¦è¶³å¤Ÿçš„é¢‘å¸¦å®½æ¥å®¹çº³æ‰€æœ‰ä¿¡å·ã€‚å¦‚æœé¢‘å¸¦å®½åº¦ä¸è¶³ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¿¡å·é‡å å’Œå¹²æ‰°ã€‚</li><li>å®ƒä¹Ÿå¯èƒ½åœ¨ä¿¡é“çš„ä¼ è¾“è·ç¦»è¾ƒé•¿æˆ–å¸¦å®½æœ‰é™çš„æƒ…å†µä¸‹æ•ˆç‡ä¸é«˜ã€‚</li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢‘åˆ†å¤ç”¨æ˜¯ä¸€ç§ä¼ ç»Ÿçš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œè™½ç„¶ä»ç„¶åœ¨ä¸€äº›åº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œä½†åœ¨ä¸€äº›ç°ä»£é€šä¿¡ç³»ç»Ÿä¸­ï¼Œä¾‹å¦‚æ•°å­—é€šä¿¡å’Œå…‰çº¤é€šä¿¡ï¼Œæ›´é«˜çº§çš„å¤ç”¨æŠ€æœ¯å¦‚æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰å’Œç åˆ†å¤ç”¨ï¼ˆCDMï¼‰ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚è¿™äº›æŠ€æœ¯åœ¨æä¾›é«˜æ•ˆã€å¯é é€šä¿¡æ–¹é¢å…·æœ‰é‡è¦ä½œç”¨ã€‚</p><h3 id="å¤šè·¯å¤ç”¨">å¤šè·¯å¤ç”¨</h3><p>å¤šè·¯å¤ç”¨æŠ€æœ¯æ˜¯ä¸€ç§å°†å¤šä¸ªä¿¡å·æˆ–æ•°æ®æµåˆå¹¶åœ¨ä¸€èµ·å¹¶åœ¨å…±äº«ä¼ è¾“åª’ä½“ä¸ŠåŒæ—¶ä¼ è¾“å®ƒä»¬çš„é€šä¿¡æŠ€æœ¯ã€‚è¿™æœ‰åŠ©äºæœ‰æ•ˆåœ°åˆ©ç”¨é€šä¿¡èµ„æºï¼Œä»¥æ»¡è¶³å¤šä¸ªç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼š</p><ol><li><p><strong>æ—¶åˆ†å¤ç”¨ï¼ˆTime Division Multiplexingï¼ŒTDMï¼‰</strong>ï¼š</p><ul><li>TDMå°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€ç³»åˆ—é—´éš”ï¼Œå¹¶åœ¨æ¯ä¸ªæ—¶é—´é—´éš”å†…ä¾æ¬¡ä¼ è¾“ä¸åŒä¿¡å·çš„éƒ¨åˆ†ã€‚</li><li>è¿™æ„å‘³ç€æ¯ä¸ªä¿¡å·å ç”¨ç‹¬å çš„æ—¶é—´é—´éš”ï¼Œä½¿å¾—å¤šä¸ªä¿¡å·å¯ä»¥åœ¨å…±äº«ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>TDMå¸¸ç”¨äºç”µè¯ç½‘ç»œå’Œæ•°å­—é€šä¿¡ç³»ç»Ÿä¸­ã€‚</li></ul></li><li><p><strong>é¢‘åˆ†å¤ç”¨ï¼ˆFrequency Division Multiplexingï¼ŒFDMï¼‰</strong>ï¼š</p><ul><li>FDMå°†é¢‘è°±åˆ†æˆå¤šä¸ªä¸åŒçš„é¢‘å¸¦ï¼Œæ¯ä¸ªé¢‘å¸¦ç”¨äºä¼ è¾“ä¸åŒä¿¡å·ã€‚</li><li>è¿™å…è®¸å¤šä¸ªä¿¡å·ä»¥ä¸åŒçš„é¢‘ç‡å¹¶è¡Œä¼ è¾“ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>FDMå¹¿æ³›åº”ç”¨äºå¹¿æ’­ã€ç”µè§†å’Œä¸€äº›æ— çº¿é€šä¿¡ç³»ç»Ÿä¸­ã€‚</li></ul></li><li><p><strong>ç åˆ†å¤ç”¨ï¼ˆCode Division Multiplexingï¼ŒCDMï¼‰</strong>ï¼š</p><ul><li>CDMä½¿ç”¨ä¸åŒçš„ç¼–ç åºåˆ—æ¥åŒºåˆ†å’Œåˆå¹¶å¤šä¸ªä¿¡å·ã€‚</li><li>ä¸åŒçš„ç¼–ç åºåˆ—å…è®¸å¤šä¸ªä¿¡å·åœ¨ç›¸åŒçš„é¢‘å¸¦ä¸Šä¼ è¾“ï¼Œå¹¶ä¸”åªæœ‰æ¥æ”¶ç«¯ä½¿ç”¨æ­£ç¡®çš„è§£ç åºåˆ—æ‰èƒ½è¿˜åŸåŸå§‹ä¿¡å·ã€‚</li><li>CDMç”¨äºCDMAï¼ˆCode Division Multiple Accessï¼‰ç­‰æ— çº¿é€šä¿¡æŠ€æœ¯ä¸­ã€‚</li></ul></li><li><p><strong>æ³¢åˆ†å¤ç”¨ï¼ˆWavelength Division Multiplexingï¼ŒWDMï¼‰</strong>ï¼š</p><ul><li>WDMæ˜¯ä¸€ç§å…‰çº¤é€šä¿¡ä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œå®ƒä½¿ç”¨ä¸åŒçš„å…‰æ³¢é•¿ï¼ˆæ³¢é•¿ï¼‰æ¥ä¼ è¾“å¤šä¸ªç‹¬ç«‹çš„ä¿¡å·ã€‚</li><li>æ¯ä¸ªæ³¢é•¿ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„é€šé“ï¼Œå¯ä»¥ä¼ è¾“ä¸åŒæ•°æ®æµã€‚</li><li>WDMå¹¿æ³›åº”ç”¨äºé•¿è·ç¦»å…‰çº¤é€šä¿¡å’Œå…‰ç½‘ç»œä¸­ã€‚</li></ul></li><li><p><strong>ç åˆ†å¤šå€ï¼ˆCode Division Multiple Accessï¼ŒCDMAï¼‰</strong>ï¼š</p><ul><li>CDMAæ˜¯ä¸€ç§æ— çº¿é€šä¿¡æŠ€æœ¯ï¼Œå…è®¸å¤šä¸ªç”¨æˆ·åœ¨ç›¸åŒçš„é¢‘ç‡èŒƒå›´å†…ä¼ è¾“æ•°æ®ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>æ¯ä¸ªç”¨æˆ·ä½¿ç”¨å”¯ä¸€çš„ç¼–ç åºåˆ—ï¼Œä½¿æ¥æ”¶ç«¯èƒ½å¤Ÿå°†ç‰¹å®šç”¨æˆ·çš„ä¿¡å·ä»æ··åˆä¿¡å·ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</li><li>CDMAç”¨äº3Gå’Œ4Gç§»åŠ¨é€šä¿¡ç½‘ç»œä¸­ã€‚</li></ul></li><li><p><strong>ç»Ÿè®¡å¤ç”¨</strong>ï¼š</p><ul><li>ç»Ÿè®¡å¤ç”¨æŠ€æœ¯æ ¹æ®ä¿¡å·çš„éœ€æ±‚åŠ¨æ€åˆ†é…ä¼ è¾“èµ„æºï¼Œä»¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚</li><li>ä¸å›ºå®šåˆ†é…ä¸åŒï¼Œç»Ÿè®¡å¤ç”¨å…è®¸å¤šä¸ªç”¨æˆ·å…±äº«èµ„æºï¼Œä½†å¯èƒ½éœ€è¦å¤„ç†ç«äº‰å’Œç¢°æ’ç­‰é—®é¢˜ã€‚</li><li>ç»Ÿè®¡å¤ç”¨å¹¿æ³›ç”¨äºä»¥å¤ªç½‘å’Œäº’è”ç½‘é€šä¿¡ä¸­ã€‚</li></ul></li></ol><p>ä¸åŒçš„å¤šè·¯å¤ç”¨æŠ€æœ¯é€‚ç”¨äºä¸åŒçš„é€šä¿¡åœºæ™¯å’Œéœ€æ±‚ã€‚é€‰æ‹©æ­£ç¡®çš„å¤šè·¯å¤ç”¨æŠ€æœ¯å–å†³äºç½‘ç»œè®¾è®¡çš„è¦æ±‚ã€èµ„æºå¯ç”¨æ€§ä»¥åŠä¼ è¾“åª’ä½“çš„ç‰¹æ€§ã€‚è¿™äº›æŠ€æœ¯åœ¨æé«˜é€šä¿¡ç³»ç»Ÿæ•ˆç‡ã€å¢åŠ å®¹é‡å’Œæ»¡è¶³å¤šç”¨æˆ·éœ€æ±‚æ–¹é¢éƒ½å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚</p><h2 id="ç¬¬äºŒç« -2">ç¬¬äºŒç« </h2><h3 id="ç£ç›˜é˜µåˆ—æŠ€æœ¯-2">ç£ç›˜é˜µåˆ—æŠ€æœ¯</h3><p>ç£ç›˜é˜µåˆ—æŠ€æœ¯æ˜¯ä¸€ç§å°†å¤šä¸ªç‰©ç†ç¡¬ç›˜é©±åŠ¨å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æé«˜æ•°æ®å­˜å‚¨æ€§èƒ½ã€å†—ä½™å’Œå®¹é”™èƒ½åŠ›çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ç£ç›˜é˜µåˆ—æŠ€æœ¯ï¼š</p><ol><li><p><strong>RAID 0ï¼ˆæ¡å¸¦åŒ–ï¼‰</strong>ï¼š</p><ul><li>RAID 0å°†å¤šä¸ªç¡¬ç›˜é©±åŠ¨å™¨ç»„åˆæˆä¸€ä¸ªå¤§çš„é€»è¾‘å·ï¼Œæ•°æ®åˆ†æ•£å­˜å‚¨åœ¨è¿™äº›é©±åŠ¨å™¨ä¸Šã€‚</li><li>æé«˜æ€§èƒ½ï¼Œå› ä¸ºæ•°æ®å¯ä»¥åŒæ—¶ä»å¤šä¸ªé©±åŠ¨å™¨è¯»å–æˆ–å†™å…¥ã€‚</li><li>ä½†æ²¡æœ‰å†—ä½™ï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚</li></ul></li><li><p><strong>RAID 1ï¼ˆé•œåƒï¼‰</strong>ï¼š</p><ul><li>RAID 1ä½¿ç”¨ä¸¤ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ï¼Œå°†ç›¸åŒçš„æ•°æ®åŒæ—¶å†™å…¥ä¸¤ä¸ªé©±åŠ¨å™¨ã€‚</li><li>æä¾›å†—ä½™ï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œæ•°æ®ä»ç„¶å¯ä»¥ä»å¦ä¸€ä¸ªé©±åŠ¨å™¨æ¢å¤ã€‚</li><li>ä½†å®¹é‡åˆ©ç”¨ç‡è¾ƒä½ï¼Œåªæœ‰ä¸€åŠçš„å®¹é‡å¯ç”¨äºæ•°æ®å­˜å‚¨ã€‚</li></ul></li><li><p><strong>RAID 5</strong>ï¼š</p><ul><li>RAID 5ä½¿ç”¨è‡³å°‘ä¸‰ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ï¼Œå°†æ•°æ®å’Œæ ¡éªŒä¿¡æ¯åˆ†æ•£å­˜å‚¨åœ¨è¿™äº›é©±åŠ¨å™¨ä¸Šã€‚</li><li>æä¾›æ€§èƒ½å’Œå†—ä½™ã€‚å¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œå¯ä»¥é€šè¿‡æ ¡éªŒä¿¡æ¯ä»å…¶ä½™çš„é©±åŠ¨å™¨ä¸­é‡å»ºæ•°æ®ã€‚</li><li>å®¹é‡å’Œæ€§èƒ½ä¹‹é—´å–å¾—äº†ä¸€ç§å¹³è¡¡ã€‚</li></ul></li><li><p><strong>RAID 6</strong>ï¼š</p><ul><li>RAID 6ç±»ä¼¼äºRAID 5ï¼Œä½†ä½¿ç”¨äº†ä¸¤ä¸ªæ ¡éªŒä¿¡æ¯å—ï¼Œå› æ­¤å¯ä»¥å®¹å¿ä¸¤ä¸ªç¡¬ç›˜é©±åŠ¨å™¨çš„æ•…éšœã€‚</li><li>æä¾›æ›´é«˜çº§åˆ«çš„å®¹é”™èƒ½åŠ›ï¼Œä½†å¯¹äºå°å‹é˜µåˆ—å¯èƒ½ä¼šæœ‰æ€§èƒ½æŸå¤±ã€‚</li></ul></li><li><p><strong>RAID 10ï¼ˆ1+0ï¼‰</strong>ï¼š</p><ul><li>RAID 10æ˜¯å°†RAID 1å’ŒRAID 0ç»„åˆåœ¨ä¸€èµ·çš„æ–¹å¼ã€‚å®ƒè‡³å°‘éœ€è¦å››ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ã€‚</li><li>æä¾›äº†æ€§èƒ½å’Œå†—ä½™çš„æœ€ä½³ç»„åˆã€‚æ•°æ®è¢«é•œåƒå¹¶è¿›è¡Œæ¡å¸¦åŒ–ã€‚</li><li>å¯ä»¥å®¹å¿å¤šä¸ªé©±åŠ¨å™¨çš„æ•…éšœã€‚</li></ul></li><li><p><strong>JBODï¼ˆJust a Bunch Of Disksï¼‰</strong>ï¼š</p><ul><li>JBODä¸æ˜¯çœŸæ­£çš„RAIDï¼Œè€Œæ˜¯å°†å¤šä¸ªç¡¬ç›˜é©±åŠ¨å™¨ç®€å•åœ°ç»„åˆæˆä¸€ä¸ªå¤§çš„é€»è¾‘å·ã€‚</li><li>æ²¡æœ‰æ€§èƒ½æå‡æˆ–å†—ä½™ã€‚æ¯ä¸ªé©±åŠ¨å™¨æ•…éšœéƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</li></ul></li><li><p><strong>RAID 50å’ŒRAID 60</strong>ï¼š</p><ul><li>è¿™äº›æ˜¯RAID 5å’ŒRAID 6çš„æ¡å¸¦åŒ–ç‰ˆæœ¬ã€‚å®ƒä»¬æä¾›æ›´å¥½çš„æ€§èƒ½ï¼Œä½†éœ€è¦æ›´å¤šçš„ç¡¬ç›˜é©±åŠ¨å™¨ã€‚</li></ul></li><li><p><strong>RAID 7</strong>ï¼š</p><ul><li>RAID 7æ˜¯ä¸€ç§ç¡¬ä»¶RAIDï¼Œå…·æœ‰é«˜çº§çš„å®‰å…¨æ€§å’Œæ€§èƒ½åŠŸèƒ½ã€‚å®ƒé€šå¸¸ç”¨äºä¼ä¸šçº§åº”ç”¨ã€‚</li></ul></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸ç”¨çš„ç£ç›˜é˜µåˆ—æŠ€æœ¯ã€‚é€‰æ‹©å“ªç§æŠ€æœ¯å–å†³äºæ‚¨çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬æ€§èƒ½ã€å†—ä½™ã€å®¹é‡å’Œé¢„ç®—ã€‚ä¸åŒçš„RAIDçº§åˆ«æä¾›ä¸åŒçš„æƒè¡¡æ–¹æ¡ˆã€‚ï¼Œ</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»è®¡ç®—æœºä¸‰çº§ç½‘ç»œæŠ€æœ¯è€ƒè¯•å†…å®¹</summary>
    
    
    
    <category term="ç½‘ç»œ" scheme="https://momoao.github.io/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="ç½‘ç»œ" scheme="https://momoao.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud</title>
    <link href="https://momoao.github.io/posts/202310090902.html"/>
    <id>https://momoao.github.io/posts/202310090902.html</id>
    <published>2023-09-10T10:19:03.000Z</published>
    <updated>2023-10-14T10:13:44.531Z</updated>
    
    <content type="html"><![CDATA[<h1>SpringCloud</h1><p>å¾®æœåŠ¡æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒæ˜¯ä»¥ä¸“æ³¨äºå•ä¸€èŒè´£çš„å¾ˆå¤šå°å‹é¡¹ç›®ä¸ºåŸºç¡€ï¼Œç»„åˆå‡ºå¤æ‚çš„å¤§å‹åº”ç”¨ã€‚</p><h2 id="å¾®æœåŠ¡æ‹†åˆ†">å¾®æœåŠ¡æ‹†åˆ†</h2><h3 id="ç†Ÿæ‚‰é»‘é©¬å•†åœº">ç†Ÿæ‚‰é»‘é©¬å•†åœº</h3><p><img src="../assets/image/SpringCloud_Image/image-20231014152011362.png" alt="image-20231014152011362"></p><h3 id="æœåŠ¡æ‹†åˆ†ç»†èŠ‚">æœåŠ¡æ‹†åˆ†ç»†èŠ‚</h3><p><img src="../assets/image/SpringCloud_Image/image-20231014152035526.png" alt="image-20231014152035526"></p><p><img src="../assets/image/SpringCloud_Image/image-20231014165650644.png" alt="image-20231014165650644"></p><h3 id="æ‹†åˆ†æœåŠ¡">æ‹†åˆ†æœåŠ¡</h3><p><img src="../assets/image/SpringCloud_Image/image-20231014165700501.png" alt="image-20231014165700501"></p><p><img src="../assets/image/SpringCloud_Image/image-20231014165729062.png" alt="image-20231014165729062"></p><h2 id="OpenFeign">OpenFeign</h2><h3 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h3><h3 id="è¿æ¥æ± ">è¿æ¥æ± </h3><h3 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h3><h3 id="æ—¥å¿—">æ—¥å¿—</h3>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»SpringCloudçš„åŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="SpringCloud" scheme="https://momoao.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>è‹ç©¹å¤–å–è¯¾å ‚ç¬”è®°</title>
    <link href="https://momoao.github.io/posts/202309291021.html"/>
    <id>https://momoao.github.io/posts/202309291021.html</id>
    <published>2023-08-29T10:19:03.000Z</published>
    <updated>2023-10-22T06:14:14.076Z</updated>
    
    <content type="html"><![CDATA[<h1>è‹ç©¹å¤–å–è¯¾å ‚ç¬”è®°</h1><h2 id="æ•°æ®æ€ä¹ˆä»å‰ç«¯ä¼ é€’åˆ°æ•°æ®åº“ä¸­">æ•°æ®æ€ä¹ˆä»å‰ç«¯ä¼ é€’åˆ°æ•°æ®åº“ä¸­</h2><p>å°†å‰ç«¯ä¼ è¿‡æ¥çš„æ•°æ®å°è£…åˆ°employeeDTOä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//å› ä¸ºè¿™ä¸ªæ¥å£å¤„ç†postè¯·æ±‚ï¼Œæ‰€ä»¥ç”¨çš„ä¸æ˜¯@GetMappingè€Œæ˜¯@PostMapping</span></span><br><span class="line"><span class="comment">//åœ¨æ–‡æ¡£ä¸­å¯ä»¥çœ‹è§è¯·æ±‚è·¯å¾„æ˜¯/admin/employeeï¼Œè¿™ä¸ªå°±æ˜¯ç±»ä¸Š@RequestMappingæŒ‡å®šçš„è¯·æ±‚è·¯å¾„ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦å†åŠ é¢å¤–è·¯å¾„</span></span><br><span class="line">   <span class="meta">@PostMapping</span></span><br><span class="line">   <span class="comment">//åŠ äº†è¿™ä¸ªæ³¨è§£ï¼Œå¯ä»¥è®©åŸºäºSwaggerçš„å¢å¼ºå·¥å…·knife4jç”Ÿæˆçš„æ¥å£æ–‡æ¡£ä¸­åŒ…å«è¿™ä¸ªæ¥å£çš„åå­—</span></span><br><span class="line">   <span class="meta">@ApiOperation(&quot;æ–°å¢å‘˜å·¥&quot;)</span></span><br><span class="line"><span class="comment">//æ³¨è§£@RequestBodyè¡¨ç¤ºä»HTTPè¯·æ±‚ä¸»é¢˜ä¸­æ¥æ”¶æ•°æ®ï¼Œå¹¶ä¸”å°†jsonæ ¼å¼è½¬æ¢ä¸ºEmployeeLoginDTOæ ¼å¼</span></span><br><span class="line">   <span class="keyword">public</span> Result <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> EmployeeDTO employeeDTO)</span>&#123;</span><br><span class="line">       <span class="comment">//è¿™é‡Œè¾“å‡ºæ—¥å¿—</span></span><br><span class="line">       log.info(<span class="string">&quot;æ–°å¢å‘˜å·¥&#123;&#125;&quot;</span>,employeeDTO);</span><br><span class="line">       <span class="comment">//å°†æ•°æ®äº¤ä¸ªæœåŠ¡å±‚å¤„ç†</span></span><br><span class="line">       employeeService.save(employeeDTO);</span><br><span class="line">       <span class="comment">//åç«¯è¿”å›ç»™å‰ç«¯ç»“æœ</span></span><br><span class="line">       <span class="keyword">return</span> Result.success();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æœåŠ¡å±‚æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘˜å·¥ç™»å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employeeLoginDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Employee <span class="title function_">login</span><span class="params">(EmployeeLoginDTO employeeLoginDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢å‘˜å·¥ä¸šåŠ¡æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employeeDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(EmployeeDTO employeeDTO)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æœåŠ¡å±‚æ¥å£çš„å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£å®ç°è¿™é‡Œä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæœåŠ¡ç±»</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employeeDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(EmployeeDTO employeeDTO)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºEmployeeç”¨äºæ¥æ”¶EmployeeDTOä¸­çš„æ•°æ®</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO è¿™é‡Œå¯ä»¥ä½¿ç”¨é›ªèŠ±ç®—æ³•ç”ŸæˆID</span></span><br><span class="line">        <span class="comment">//æ•°æ®æ‹·è´employee--&gt;EmployeeDTO</span></span><br><span class="line">        BeanUtils.copyProperties(employeeDTO,employee);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿™é‡Œè¿˜è¦è®¾ç½®ä¸€äº›employeeDTOä¸åŒ…å«çš„å±æ€§ï¼Œå› ä¸ºç®¡ç†ç«¯å¡«å†™çš„æ—¶å€™ï¼Œè¿™äº›æ•°æ®ä¸éœ€è¦å¡«å†™ï¼Œè€Œæ˜¯åº”è¯¥è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">        <span class="comment">// è®¾ç½®è´¦å·çŠ¶æ€</span></span><br><span class="line">        employee.setStatus(StatusConstant.ENABLE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®é»˜è®¤å¯†ç </span></span><br><span class="line">        employee.setPassword(DigestUtils.md5DigestAsHex(PasswordConstant.DEFAULT_PASSWORD.getBytes()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®å½“å‰è®°å½•çš„åˆ›å»ºæ—¶é—´</span></span><br><span class="line">        employee.setCreateTime(LocalDateTime.now());</span><br><span class="line">        employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO åæœŸè¿™é‡Œè®¾ç½®åŠ¨æ€çš„è®°å½•åˆ›å»ºäººID</span></span><br><span class="line">        <span class="comment">//è®¾ç½®å½“å‰è®°å½•åˆ›å»ºäººçš„id</span></span><br><span class="line">        employee.setCreateUser(<span class="number">10L</span>);</span><br><span class="line">        employee.setUpdateUser(<span class="number">10L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨Mapperä¸­çš„æ–¹æ³•å°†æ•°æ®æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">        employeeMapper.insert(employee);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯Mapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥å‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into employee (name, username, password, phone, sex, id_number, status, create_time, update_time, create_user, update_user) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;values&quot;+</span></span><br><span class="line"><span class="meta">            &quot;(#&#123;name&#125;,#&#123;username&#125;,#&#123;passowrd&#125;,#&#123;phone&#125;,#&#123;sex&#125;,#&#123;idNumber&#125;,#&#123;status&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;,#&#123;createUser&#125;,#&#123;updateUser&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Employee employee)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æµ‹è¯•æ—¶å‘ç°è¿”å›çŠ¶æ€ç 401ï¼Œè¯´æ˜éœ€è¦èº«ä»½è®¤è¯ï¼Œå› ä¸ºæœ‰jwtä»¤ç‰Œæ ¡éªŒè¿™ä¸ªåŠŸèƒ½ï¼Œä¸‹é¢æ˜¯æ£€æµ‹æ˜¯å¦æœ‰jwtçš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sky.constant.JwtClaimsConstant;</span><br><span class="line"><span class="keyword">import</span> com.sky.properties.JwtProperties;</span><br><span class="line"><span class="keyword">import</span> com.sky.utils.JwtUtil;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.HandlerMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * jwtä»¤ç‰Œæ ¡éªŒçš„æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtTokenAdminInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JwtProperties jwtProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¡éªŒjwt</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å½“å‰æ‹¦æˆªåˆ°çš„æ˜¯Controllerçš„æ–¹æ³•è¿˜æ˜¯å…¶ä»–èµ„æº</span></span><br><span class="line">        <span class="keyword">if</span> (!(handler <span class="keyword">instanceof</span> HandlerMethod)) &#123;</span><br><span class="line">            <span class="comment">//å½“å‰æ‹¦æˆªåˆ°çš„ä¸æ˜¯åŠ¨æ€æ–¹æ³•ï¼Œç›´æ¥æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1ã€ä»è¯·æ±‚å¤´ä¸­è·å–ä»¤ç‰Œ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(jwtProperties.getAdminTokenName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2ã€æ ¡éªŒä»¤ç‰Œ</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;jwtæ ¡éªŒ:&#123;&#125;&quot;</span>, token);</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(jwtProperties.getAdminSecretKey(), token);</span><br><span class="line">            <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> Long.valueOf(claims.get(JwtClaimsConstant.EMP_ID).toString());</span><br><span class="line">            log.info(<span class="string">&quot;å½“å‰å‘˜å·¥idï¼š&quot;</span>, empId);</span><br><span class="line">            <span class="comment">//3ã€é€šè¿‡ï¼Œæ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">//4ã€ä¸é€šè¿‡ï¼Œå“åº”401çŠ¶æ€ç </span></span><br><span class="line">            response.setStatus(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯JwtPropertiesç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// é…ç½®æ–‡ä»¶åœ¨serviceæ¨¡å—çš„resourcesä¸­</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;sky.jwt&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç®¡ç†ç«¯å‘˜å·¥ç”Ÿæˆjwtä»¤ç‰Œç›¸å…³é…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String adminSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> adminTtl;</span><br><span class="line">    <span class="keyword">private</span> String adminTokenName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ç«¯å¾®ä¿¡ç”¨æˆ·ç”Ÿæˆjwtä»¤ç‰Œç›¸å…³é…ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String userSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> userTtl;</span><br><span class="line">    <span class="keyword">private</span> String userTokenName;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°é…ç½®ï¼Œå‰ç«¯ä¼ æ¥çš„è¯·æ±‚å¤´ä¸­å­˜æ”¾ä»¤ç‰Œçš„å˜é‡æ˜¯tokenï¼Œæ‰€ä»¥è¦åœ¨æµ‹è¯•ç¯å¢ƒä¸­è®¾ç½®å…¨å±€å‚æ•°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sky:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="comment"># è®¾ç½®jwtç­¾ååŠ å¯†æ—¶ä½¿ç”¨çš„ç§˜é’¥</span></span><br><span class="line">    <span class="attr">admin-secret-key:</span> <span class="string">itcast</span></span><br><span class="line">    <span class="comment"># è®¾ç½®jwtè¿‡æœŸæ—¶é—´</span></span><br><span class="line">    <span class="attr">admin-ttl:</span> <span class="number">7200000</span></span><br><span class="line">    <span class="comment"># è®¾ç½®å‰ç«¯ä¼ é€’è¿‡æ¥çš„ä»¤ç‰Œåç§°</span></span><br><span class="line">    <span class="attr">admin-token-name:</span> <span class="string">token</span></span><br></pre></td></tr></table></figure><p>åœ¨Apifoxä¸­å¯ä»¥çœ‹è§è¯·æ±‚å¤´çš„å…¨å±€Headerå‚æ•°ä¸­å‡ºç°äº†åˆšæ‰è®¾ç½®çš„tokenï¼Œå¯ä»¥è®¾ç½®å¯ç”¨æˆ–ç¦ç”¨</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20230923132826373.png" alt="image-20230923132826373"></p><p>å†æ¬¡æµ‹è¯•ï¼Œæ·»åŠ æˆåŠŸ</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=<span class="language-ruby">=&gt;  <span class="title class_">Preparing</span>: insert into employee (name, username, password, phone, sex, id_number, status, create_time, update_time, create_user, update_user) values(<span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?,</span><span class="string">?)</span></span></span><br><span class="line">=<span class="language-ruby">=&gt; <span class="title class_">Parameters</span>: ç»Ÿåˆ’é€Ÿæ®(<span class="title class_">String</span>), åº·ç§€è‹±(<span class="title class_">String</span>), e10adc3949ba59abbe56e057f20f883e(<span class="title class_">String</span>), <span class="number">18631344652</span>(<span class="title class_">String</span>), å¥³(<span class="title class_">String</span>), <span class="number">55</span>(<span class="title class_">String</span>), <span class="number">1</span>(<span class="title class_">Integer</span>), <span class="number">2023</span>-09-23<span class="symbol">T13:</span><span class="number">32</span><span class="symbol">:</span><span class="number">56.385214300</span>(<span class="title class_">LocalDateTime</span>), <span class="number">2023</span>-09-23<span class="symbol">T13:</span><span class="number">32</span><span class="symbol">:</span><span class="number">56.385214300</span>(<span class="title class_">LocalDateTime</span>), <span class="number">10</span>(<span class="title class_">Long</span>), <span class="number">10</span>(<span class="title class_">Long</span>)</span></span><br><span class="line">&lt;==    Updates: 1</span><br></pre></td></tr></table></figure><p>è¿”å›ç»™å‰ç«¯çš„å“åº”ä½“</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚æœæ·»åŠ äº†é‡å¤usernameï¼Œåç«¯å‡ºç°äº†å¼‚å¸¸æ€ä¹ˆå¤„ç†">å¦‚æœæ·»åŠ äº†é‡å¤usernameï¼Œåç«¯å‡ºç°äº†å¼‚å¸¸æ€ä¹ˆå¤„ç†</h2><p>æ·»åŠ æ–°ç”¨æˆ·æ—¶å‡ºç°é‡å¤çš„ç”¨æˆ·åï¼Œç»“æœè¿”å›</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;åº·ç§€è‹±&#x27;å·²ç»å­˜åœ¨&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»åŠ å¤„ç†æŒ‡å®šé”™è¯¯çš„æ–¹æ³•</p><ul><li>è¿™é‡Œä¸»è¦å¤„ç†é”™è¯¯SQLIntegrityConstraintViolationException<ul><li>è¿™ä¸ªå¼‚å¸¸è¡¨ç¤ºåœ¨æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼ˆå¦‚æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤è®°å½•ï¼‰æ—¶ï¼Œè¿åäº†æ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ã€‚å®Œæ•´æ€§çº¦æŸæ¡ä»¶æ˜¯ä¸€ç§è§„åˆ™ï¼Œç”¨äºç¡®ä¿æ•°æ®åº“ä¸­çš„æ•°æ®çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sky.constant.MessageConstant;</span><br><span class="line"><span class="keyword">import</span> com.sky.exception.BaseException;</span><br><span class="line"><span class="keyword">import</span> com.sky.result.Result;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLIntegrityConstraintViolationException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œå¤„ç†é¡¹ç›®ä¸­æŠ›å‡ºçš„ä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•è·ä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">exceptionHandler</span><span class="params">(BaseException ex)</span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ï¼š&#123;&#125;&quot;</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> Result.error(ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">exceptionHandler</span><span class="params">(SQLIntegrityConstraintViolationException ex)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> ex.getMessage();</span><br><span class="line">        <span class="comment">//å¦‚æœé”™è¯¯ä¿¡æ¯ä¸­åŒ…å«å…³é”®å­—â€œé‡å¤çš„é”®å€¼å¯¹â€</span></span><br><span class="line">        <span class="keyword">if</span>(message.contains(<span class="string">&quot;Duplicate entry&quot;</span>))&#123;</span><br><span class="line">            String[] split = message.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="comment">//å–åˆ°ç”¨æˆ·å</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> split[<span class="number">2</span>];</span><br><span class="line">            <span class="comment">//ä½¿ç”¨ä¿¡æ¯å¸¸é‡å°è£…msg</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> username + MessageConstant.ALREADY_EXISTS;</span><br><span class="line">            <span class="keyword">return</span> Result.error(msg);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(MessageConstant.UNKNOWN_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ·»åŠ æ–°çš„å¼‚å¸¸å¤„ç†ä¹‹åç¨‹åºå°±ä¸ä¼šä¸­æ­¢è¿è¡Œäº†</p><h2 id="æ€ä¹ˆåŠ¨æ€è®¾ç½®åˆ›å»ºäººidå’Œä¿®æ”¹äººid">æ€ä¹ˆåŠ¨æ€è®¾ç½®åˆ›å»ºäººidå’Œä¿®æ”¹äººid</h2><p>å®¢æˆ·ç«¯å‘èµ·çš„æ¯ä¸€æ¬¡è¯·æ±‚å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20221111201922482.png" alt="image-20221111201922482"></p><p>æŠŠThreadLocalå°è£…æˆä¸€ä¸ªå·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseContext</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;Long&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setCurrentId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        threadLocal.set(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getCurrentId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> threadLocal.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">removeCurrentId</span><span class="params">()</span> &#123;</span><br><span class="line">        threadLocal.remove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨JWTæ ¡éªŒæˆåŠŸåå°±å°†æå–å‡ºçš„idå­˜åœ¨çº¿ç¨‹ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¡éªŒjwt</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å½“å‰æ‹¦æˆªåˆ°çš„æ˜¯Controllerçš„æ–¹æ³•è¿˜æ˜¯å…¶ä»–èµ„æº</span></span><br><span class="line">        <span class="keyword">if</span> (!(handler <span class="keyword">instanceof</span> HandlerMethod)) &#123;</span><br><span class="line">            <span class="comment">//å½“å‰æ‹¦æˆªåˆ°çš„ä¸æ˜¯åŠ¨æ€æ–¹æ³•ï¼Œç›´æ¥æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1ã€ä»è¯·æ±‚å¤´ä¸­è·å–ä»¤ç‰Œ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(jwtProperties.getAdminTokenName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2ã€æ ¡éªŒä»¤ç‰Œ</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;jwtæ ¡éªŒ:&#123;&#125;&quot;</span>, token);</span><br><span class="line">            <span class="comment">//è§£æJWTï¼ŒæŠŠä¿¡æ¯æ”¾åœ¨Claimsä¸­</span></span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(jwtProperties.getAdminSecretKey(), token);</span><br><span class="line">            <span class="comment">//æ‹¿å‡ºClaimsä¸­å­˜å‚¨çš„ç™»å½•è€…çš„ID</span></span><br><span class="line">            <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> Long.valueOf(claims.get(JwtClaimsConstant.EMP_ID).toString());</span><br><span class="line">            log.info(<span class="string">&quot;å½“å‰å‘˜å·¥idï¼š&quot;</span>, empId);</span><br><span class="line">            <span class="comment">//å°†IDå­˜åœ¨æœ¬çº¿ç¨‹ä¸­</span></span><br><span class="line">            BaseContext.setCurrentId(empId);</span><br><span class="line">            <span class="comment">//3ã€é€šè¿‡ï¼Œæ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">//4ã€ä¸é€šè¿‡ï¼Œå“åº”401çŠ¶æ€ç </span></span><br><span class="line">            response.setStatus(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æœåŠ¡å±‚çš„saveï¼ˆï¼‰å°†EmployeeDTOå°è£…ä¸ºå®Œæ•´çš„Employeeæ—¶æ‹¿å‡ºIDå¹¶å­˜å…¥Employeeå³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employeeDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(EmployeeDTO employeeDTO)</span> &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO è¿™é‡Œå¯ä»¥ä½¿ç”¨é›ªèŠ±ç®—æ³•ç”ŸæˆID</span></span><br><span class="line">        BeanUtils.copyProperties(employeeDTO,employee);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿™é‡Œè¿˜è¦è®¾ç½®ä¸€äº›employeeDTOä¸åŒ…å«çš„å±æ€§ï¼Œå› ä¸ºç®¡ç†ç«¯å¡«å†™çš„æ—¶å€™ï¼Œè¿™äº›æ•°æ®ä¸éœ€è¦å¡«å†™ï¼Œè€Œæ˜¯åº”è¯¥è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">        <span class="comment">// è®¾ç½®è´¦å·çŠ¶æ€</span></span><br><span class="line">        employee.setStatus(StatusConstant.ENABLE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®é»˜è®¤å¯†ç </span></span><br><span class="line">        employee.setPassword(DigestUtils.md5DigestAsHex(PasswordConstant.DEFAULT_PASSWORD.getBytes()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®å½“å‰è®°å½•çš„åˆ›å»ºæ—¶é—´</span></span><br><span class="line">        employee.setCreateTime(LocalDateTime.now());</span><br><span class="line">        employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO åæœŸè¿™é‡Œè®¾ç½®åŠ¨æ€çš„è®°å½•åˆ›å»ºäººID</span></span><br><span class="line">        <span class="comment">//è®¾ç½®å½“å‰è®°å½•åˆ›å»ºäººçš„id</span></span><br><span class="line">        employee.setCreateUser(BaseContext.getCurrentId());</span><br><span class="line">        employee.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">        employeeMapper.insert(employee);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°å‘˜å·¥åˆ†é¡µæŸ¥è¯¢">å®ç°å‘˜å·¥åˆ†é¡µæŸ¥è¯¢</h2><p>å°è£…å¯¹åº”çš„DTOï¼Œç”¨äºä»å‰ç«¯æ¥æ”¶æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeePageQueryDTO</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘˜å·¥å§“å</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> page;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> pageSize;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨äºåç«¯ç»™å‰ç«¯è¿”å›çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…åˆ†é¡µæŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> total; <span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List records; <span class="comment">//å½“å‰é¡µæ•°æ®é›†åˆ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨Controllerä¸­æ·»åŠ æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨äºåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//å› ä¸ºè¿™é‡Œå¤„ç†å‰ç«¯çš„æ•°æ®å¹¶ä¸æ˜¯jsonæ ¼å¼ï¼Œè€Œæ˜¯åœ¨åœ°å€æ ä¸­çš„å‚æ•°ï¼Œæ‰€ä»¥ä¸é€‚ç”¨@RequestBodyæ¥æ ‡è¯†å‚æ•°</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;å‘˜å·¥åˆ†é¡µæŸ¥è¯¢&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;PageResult&gt; <span class="title function_">page</span><span class="params">(EmployeePageQueryDTO employeePageQueryDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å‘˜å·¥åˆ†é¡µæŸ¥è¯¢&quot;</span>);</span><br><span class="line">        <span class="type">PageResult</span> <span class="variable">pageResult</span> <span class="operator">=</span> employeeService.pageQuery(employeePageQueryDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ServiceImplä¸­å®ç°æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">pageQuery</span><span class="params">(EmployeePageQueryDTO employeePageQueryDTO)</span> &#123;</span><br><span class="line">    PageHelper.startPage(employeePageQueryDTO.getPage(),employeePageQueryDTO.getPageSize());</span><br><span class="line"></span><br><span class="line">    Page&lt;Employee&gt; page = employeeMapper.pageQuery(employeePageQueryDTO);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨Mapperä¸­å®šä¹‰å…·ä½“çš„SQL</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Page&lt;Employee&gt; <span class="title function_">pageQuery</span><span class="params">(EmployeePageQueryDTO employeePageQueryDTO)</span>;</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¦ä½¿ç”¨åŠ¨æ€å‚æ•°ï¼Œç”¨æ³¨è§£çš„æ–¹å¼ä¸æ–¹ä¾¿è®¾ç½®ï¼Œæ‰€ä»¥SQLå†™åœ¨xmlæ–‡ä»¶ä¸­</p><p>åœ¨application.ymlæ–‡ä»¶ä¸­å¼€å¯æ‰«æ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment">#mapperé…ç½®æ–‡ä»¶</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></table></figure><p>å‘ç°æŸ¥è¯¢å‡ºçš„æ—¶é—´æ ¼å¼ä¸ç¬¦åˆè¦æ±‚</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20230923165908787.png" alt="image-20230923165908787"></p><p>æ–¹æ³•ä¸€ï¼šåœ¨å±æ€§ä¸ŠåŠ æ³¨è§£å°±å¯ä»¥è‡ªåŠ¨è½¬æ¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updateTime;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šåœ¨WebMvcConfigurationä¸­å°†è‡ªå·±çš„æ¶ˆæ¯è½¬æ¢å™¨æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºä¼˜å…ˆä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å±•MVCæ¡†æ¶çš„æ¶ˆæ¯è½¬æ¢å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> converters</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨å¯¹è±¡</span></span><br><span class="line">        <span class="type">MappingJackson2HttpMessageConverter</span> <span class="variable">converter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MappingJackson2HttpMessageConverter</span>();</span><br><span class="line">        <span class="comment">//ä¸ºæ¶ˆæ¯è½¬æ¢å™¨è®¾ç½®ä¸€ä¸ªå¯¹è±¡è½¬æ¢å™¨</span></span><br><span class="line">        converter.setObjectMapper(<span class="keyword">new</span> <span class="title class_">JacksonObjectMapper</span>());</span><br><span class="line">        <span class="comment">//å°†è‡ªå·±çš„æ¶ˆæ¯è½¬æ¢å™¨åŠ å…¥åˆ°å®¹æ˜“ä¸­</span></span><br><span class="line">        <span class="comment">//ä¼šæ”¾åœ¨æ¶ˆæ¯è½¬æ¢å™¨é˜Ÿåˆ—çš„æœ€åï¼Œæ‰€ä»¥ä¸è®¾ç½®ä¼˜å…ˆçº§ä¸€èˆ¬ç”¨ä¸åˆ°</span></span><br><span class="line">        <span class="comment">//ç´¢å¼•æ”¹ä¸º0ï¼Œå°±ä¼šå°†è‡ªå·±çš„æ¶ˆæ¯è½¬æ¢å™¨æ’åœ¨ç¬¬ä¸€ä½</span></span><br><span class="line">        converters.add(<span class="number">0</span>,converter);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥è¯¢å‘ç°æ—¶é—´æ ¼å¼æ–¹ä¾¿é˜…è¯»äº†</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20230923171726568.png" alt="image-20230923171726568"></p><h2 id="å¯ç”¨å’Œç¦ç”¨å‘˜å·¥è´¦å·åŠŸèƒ½å®ç°">å¯ç”¨å’Œç¦ç”¨å‘˜å·¥è´¦å·åŠŸèƒ½å®ç°</h2><p>åœ¨controllerå±‚æ·»åŠ æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ç”¨ç¦ç”¨å‘˜å·¥è´¦å·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//åœ¨æ·»åŠ æŸ¥è¯¢ç±»çš„æ§åˆ¶å™¨æ—¶ï¼Œè¿”å›å€¼è¦æŒ‡å®šæ³›å‹ï¼Œå› ä¸ºæœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="comment">//åœ°å€æ å‚æ•°æ³¨è§£</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;status/&#123;status&#125;&quot;)</span></span><br><span class="line"><span class="comment">//å› ä¸ºåœ°å€æ ä¸­çš„å‚æ•°å’Œæ–¹æ³•ä¸­çš„å‚æ•°åç§°ä¸€æ ·ï¼Œæ‰€ä»¥æ³¨è§£åçš„valueå¯ä»¥ä¸æŒ‡å®š</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;å¯ç”¨ç¦ç”¨å‘˜å·¥è´¦å·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">startOrStop</span><span class="params">(<span class="meta">@PathVariable(&quot;status&quot;)</span> Integer status,<span class="type">long</span> id)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;å¯ç”¨ç¦ç”¨å‘˜å·¥è´¦å·ï¼š&#123;&#125;&#123;&#125;&quot;</span>,status,id);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TODO è¿™é‡Œå¯ä»¥è”åˆå‰ç«¯å®ç°ä¸€ä¸ªçŠ¶æ€åˆ‡æ¢å¤±è´¥çš„å¼¹çª—</span></span><br><span class="line">    <span class="keyword">return</span> employeeService.startOrStop(status,id);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å±‚å®ç°</p><p>è¿™é‡Œè‡ªä¸»æ·»åŠ äº†é¢å¤–åŠŸèƒ½ï¼šçŠ¶æ€åˆ‡æ¢å¤±è´¥è¿”å›å‰ç«¯å¤±è´¥çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯ç”¨ç¦ç”¨å‘˜å·¥è´¦å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">startOrStop</span><span class="params">(Integer status, <span class="type">long</span> id)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO ã€è‡ªä¸»æ·»åŠ åŠŸèƒ½ã€‘ï¼šçŠ¶æ€åˆ‡æ¢å¤±è´¥æé†’</span></span><br><span class="line">        <span class="comment">//å…ˆåˆ¤æ–­çŠ¶æ€ä¿®æ”¹æ˜¯å¦æ­£ç¡®ï¼Œè¿™æ˜¯å‰ç«¯æ›´æ–°æ•°æ®ä¸åŠæ—¶çš„è§£å†³åŠæ³•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">status1</span> <span class="operator">=</span> employeeMapper.getStatusById(id);</span><br><span class="line">        <span class="keyword">if</span>(status1 == status)&#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(<span class="string">&quot;çŠ¶æ€ä¿®æ”¹å¤±è´¥ï¼Œå¯èƒ½åŸå› ï¼šçŠ¶æ€å·²å¤„äºç¦ç”¨(æˆ–å¯ç”¨)&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Employee employee = new Employee();</span></span><br><span class="line"><span class="comment">//        employee.setId(id);</span></span><br><span class="line"><span class="comment">//        employee.setStatus(status);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åœ¨Employeeä¸Šä½¿ç”¨@Builderæ³¨è§£åå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼æ„å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> Employee.builder()</span><br><span class="line">                .status(status)</span><br><span class="line">                .id(id)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        employeeMapper.update(employee);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åœ¨EmployeeMapper.javaæ–‡ä»¶ä¸­å£°æ˜2ä¸ªæ–¹æ³•</p><p>1ã€æ›´æ–°æ•°æ®ï¼Œåœ¨xmlä¸­è¿›è¡Œå®ç°</p><p>2ã€é€šè¿‡idæŸ¥statusçš„æ–¹æ³•ï¼Œç›´æ¥åœ¨javaæ–‡ä»¶ä¸­å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ä¸»é”®åŠ¨æ€ä¿®æ”¹å±æ€§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæŸ¥å‡ºæ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Select(&quot;select status from employee where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">Integer <span class="title function_">getStatusById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><p>xmlæ–‡ä»¶ä¸­åŠ¨æ€å®ç°æ›´æ–°ï¼Œè¿™æ ·ä»¥åæœ‰éœ€è¦updateçš„æ“ä½œæ—¶ï¼Œå°±å¯ä»¥å°è£…ä¸€ä¸ªemployeeè°ƒç”¨è¿™ä¸ªæ–¹æ³•</p><p><strong>æ³¨æ„ï¼šè¿™é‡Œçš„æ ‡ç­¾ä¸­çš„å±æ€§åå’Œå¤–é¢çš„å±æ€§åä¸ä¸€æ ·ï¼Œæ ‡ç­¾ä¸­ä½¿ç”¨çš„æ˜¯javaç±»ä¸­çš„å±æ€§åï¼Œå¤–ä½¿ç”¨çš„æ˜¯MySQLä¸­è¡¨çš„åˆ—å</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å› ä¸ºåœ¨é…ç½®æ–‡ä»¶ä¸­æ‰«æäº†å®ä½“åŒ…ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç±»å¯ä»¥ç›´æ¥å†™åå­—è€Œä¸å†™åŒ…å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        update employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username = #&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span>password = #&#123;password&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span>phone = #&#123;phone&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span>sex = #&#123;sex&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;idNumber != null&quot;</span>&gt;</span>id_number = #&#123;idNumber&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #&#123;updateTime&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateUser != null&quot;</span>&gt;</span>update_user = #&#123;updateUser&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span>status = #&#123;status&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘å‘˜å·¥ä¿¡æ¯å®ç°">ç¼–è¾‘å‘˜å·¥ä¿¡æ¯å®ç°</h2><h3 id="å…ˆæ ¹æ®idæŸ¥æ‰€æœ‰ä¿¡æ¯">å…ˆæ ¹æ®idæŸ¥æ‰€æœ‰ä¿¡æ¯</h3><p>åœ¨controllerä¸­æ·»åŠ æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;Employee&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeService.getById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å±‚å®ç°æ–¹æ³•</p><p>è¿™é‡Œä¸æƒ³å°†å¯†ç ä¹Ÿä¼ å›å»ï¼Œæ‰€ä»¥ç”¨*è¿›è¡Œè¦†ç›–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">getById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼Œä½†æ˜¯å¯†ç ç”¨****è¦†ç›–åå†ä¼ ç»™å‰æ®µ</span></span><br><span class="line">    Employee employee= employeeMapper.getById(id);</span><br><span class="line"></span><br><span class="line">    employee.setPassword(<span class="string">&quot;****&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> employee;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨mapperä¸­å®ç°æ–¹æ³•</p><p>å› ä¸ºæ²¡æœ‰å‚æ•°ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨æ³¨è§£å®ç°å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from employee where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">Employee <span class="title function_">getById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><h3 id="åœ¨ä¿®æ”¹ä¿¡æ¯">åœ¨ä¿®æ”¹ä¿¡æ¯</h3><p>åœ¨controllerä¸­æ·»åŠ æ˜ å°„</p><p>è¯·æ±‚å†…å®¹ä»å‰ç«¯çš„è¯·æ±‚ä½“ä¸­å‘é€åˆ°åç«¯ï¼Œç”¨EmployeeDTOå°è£…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping()</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ç¼–è¾‘å‘˜å·¥ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> EmployeeDTO employeeDTO)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;ç¼–è¾‘å‘˜å·¥ä¿¡æ¯&#123;&#125;&quot;</span>,employeeDTO);</span><br><span class="line"></span><br><span class="line">    employeeService.update(employeeDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å±‚ä¸­å®ç°æ–¹æ³•</p><p>ä½¿ç”¨æ•°æ®æ‹·è´å°†EmployeeDTOä¸­çš„æ•°æ®æ‹·è´åˆ°Employeeä¸­ï¼Œç„¶ååœ¨æ‰‹åŠ¨æ·»åŠ å‡ ä¸ªå±æ€§å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(EmployeeDTO employeeDTO)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">    <span class="comment">//å±æ€§æ‹·è´</span></span><br><span class="line">    BeanUtils.copyProperties(employeeDTO,employee);</span><br><span class="line"></span><br><span class="line">    employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//åœ¨JWTä»¤ç‰Œæ ¡éªŒæ—¶å°±å°†ä»¤ç‰Œä¸­çš„idå–å‡ºï¼Œå¹¶å­˜åœ¨äº†BaseContextä¸­</span></span><br><span class="line">    employee.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">    employeeMapper.update(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šé¢<code>å¯ç”¨å’Œç¦ç”¨å‘˜å·¥</code>éƒ¨åˆ†ä¸­åœ¨xmlä¸­å®ç°çš„updateæ–¹æ³•æ¥è¿›è¡Œæ›´æ”¹</p><h2 id="åˆ†ç±»ç®¡ç†åŠŸèƒ½å®ç°">åˆ†ç±»ç®¡ç†åŠŸèƒ½å®ç°</h2><h3 id="controllerå±‚">controllerå±‚</h3><h4 id="æ–°å¢åˆ†ç±»">æ–°å¢åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ–°å¢åˆ†ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> CategoryDTO categoryDTO)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;æ–°å¢åˆ†ç±»ï¼š&#123;&#125;&quot;</span>, categoryDTO);</span><br><span class="line">    categoryService.save(categoryDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†é¡µæŸ¥è¯¢">åˆ†é¡µæŸ¥è¯¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;åˆ†ç±»åˆ†é¡µæŸ¥è¯¢&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;PageResult&gt; <span class="title function_">page</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;åˆ†é¡µæŸ¥è¯¢ï¼š&#123;&#125;&quot;</span>, categoryPageQueryDTO);</span><br><span class="line">    <span class="type">PageResult</span> <span class="variable">pageResult</span> <span class="operator">=</span> categoryService.pageQuery(categoryPageQueryDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†è‡ªå·±å°è£…çš„åˆ†é¡µç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">//å…¨å‚æ„é€ </span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> total; <span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List records; <span class="comment">//å½“å‰é¡µæ•°æ®é›†åˆ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤åˆ†ç±»">åˆ é™¤åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;åˆ é™¤åˆ†ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">deleteById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;åˆ é™¤åˆ†ç±»ï¼š&#123;&#125;&quot;</span>, id);</span><br><span class="line">    categoryService.deleteById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹åˆ†ç±»">ä¿®æ”¹åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ä¿®æ”¹åˆ†ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> CategoryDTO categoryDTO)</span>&#123;</span><br><span class="line">    categoryService.update(categoryDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯ç”¨ç¦ç”¨åˆ†ç±»">å¯ç”¨ç¦ç”¨åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/status/&#123;status&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;å¯ç”¨ç¦ç”¨åˆ†ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">startOrStop</span><span class="params">(<span class="meta">@PathVariable(&quot;status&quot;)</span> Integer status, Long id)</span>&#123;</span><br><span class="line">    categoryService.startOrStop(status,id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»">æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;List&lt;Category&gt;&gt; <span class="title function_">list</span><span class="params">(Integer type)</span>&#123;</span><br><span class="line">    List&lt;Category&gt; list = categoryService.list(type);</span><br><span class="line">    <span class="keyword">return</span> Result.success(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="serviceå±‚">serviceå±‚</h3><h4 id="æ–°å¢åˆ†ç±»-2">æ–°å¢åˆ†ç±»</h4><p>è·Ÿä¹‹å‰ä¸€æ ·ï¼ŒæŠŠå‰ç«¯ç©¿è¿‡çš„DTOæ‹·è´åˆ°categoryä¸­ï¼Œç„¶åæ‰‹åŠ¨æ·»åŠ å…¶ä»–æ•°æ®ï¼Œå†å°†å®Œæ•´çš„categoryå¯¹è±¡ä¼ è¾“ç»™Mapperå±‚</p><p>æ–°å¢åˆ†ç±»çš„çŠ¶æ€è®¾ç½®ä¸º<code>ç¦ç”¨</code>ï¼Œå› ä¸ºåˆšæ·»åŠ çš„åˆ†ç±»é‡Œå¹¶æ²¡æœ‰èœå“å’Œå¥—é¤ï¼Œæ‰€ä»¥ä¸èƒ½è®©ç”¨æˆ·çœ‹è§ï¼Œç­‰æ·»åŠ äº†èœå“å’Œå¥—é¤åœ¨å¯ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(CategoryDTO categoryDTO)</span> &#123;</span><br><span class="line">    <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Category</span>();</span><br><span class="line">    <span class="comment">//å±æ€§æ‹·è´</span></span><br><span class="line">    BeanUtils.copyProperties(categoryDTO, category);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ†ç±»çŠ¶æ€é»˜è®¤ä¸ºç¦ç”¨çŠ¶æ€0</span></span><br><span class="line">    category.setStatus(StatusConstant.DISABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€åˆ›å»ºäººã€ä¿®æ”¹äºº</span></span><br><span class="line">    category.setCreateTime(LocalDateTime.now());</span><br><span class="line">    category.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    category.setCreateUser(BaseContext.getCurrentId());</span><br><span class="line">    category.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">    categoryMapper.insert(category);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†é¡µæŸ¥è¯¢-2">åˆ†é¡µæŸ¥è¯¢</h4><p>è¿™é‡Œä½¿ç”¨PageHelperè¿›è¡Œè¾…åŠ©</p><p>è¿™ä¸ªç±»çš„ä½œç”¨æ˜¯ï¼Œåœ¨è°ƒç”¨<code>startPage()</code>æ–¹æ³•åï¼Œåœ¨ä¸‹ä¸€æ¡æœ¬çº¿ç¨‹æ‰§è¡Œçš„SQLè¯­å¥ä¸­<strong>è‡ªåŠ¨æ·»åŠ limit</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">pageQuery</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span> &#123;</span><br><span class="line">    PageHelper.startPage(categoryPageQueryDTO.getPage(),categoryPageQueryDTO.getPageSize());</span><br><span class="line">    <span class="comment">//ä¸‹ä¸€æ¡sqlè¿›è¡Œåˆ†é¡µï¼Œè‡ªåŠ¨åŠ å…¥limitå…³é”®å­—åˆ†é¡µ</span></span><br><span class="line">    Page&lt;Category&gt; page = categoryMapper.pageQuery(categoryPageQueryDTO);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>(page.getTotal(), page.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨è‡ªå·±åšçš„DTO</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryPageQueryDTO</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> page;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯é¡µè®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> pageSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ†ç±»åç§°</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ†ç±»ç±»å‹ 1èœå“åˆ†ç±»  2å¥—é¤åˆ†ç±»</span></span><br><span class="line">    <span class="keyword">private</span> Integer type;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤åˆ†ç±»-2">åˆ é™¤åˆ†ç±»</h4><p>è¿™é‡Œåœ¨è°ƒç”¨<code>åˆ†ç±»Mapper</code>ä¹‹å‰ï¼Œä¼šå…ˆä½¿ç”¨èœå“Mapperå’Œå¥—é¤Mapperåˆ¤æ–­æ˜¯å¦åŒ…å«èœå“æˆ–å¥—é¤ï¼Œå¦‚æœæœ‰ï¼Œå°±ä¸è¿›è¡Œåˆ é™¤æ“ä½œï¼ŒæŠ›å‡ºé”™è¯¯</p><p>æ¯”å¦‚ï¼šé…’æ°´é¥®æ–™ï¼ˆåˆ†ç±»ï¼‰ä¸‹æœ‰ç‹è€å‰ï¼ˆèœå“ï¼‰ï¼Œé‚£é…’æ°´é¥®æ–™ï¼ˆåˆ†ç±»ï¼‰å°±ä¸èƒ½åˆ é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å½“å‰åˆ†ç±»æ˜¯å¦å…³è”äº†èœå“ï¼Œå¦‚æœå…³è”äº†å°±æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> dishMapper.countByCategoryId(id);</span><br><span class="line">    <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//å½“å‰åˆ†ç±»ä¸‹æœ‰èœå“ï¼Œä¸èƒ½åˆ é™¤</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.CATEGORY_BE_RELATED_BY_DISH);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å½“å‰åˆ†ç±»æ˜¯å¦å…³è”äº†å¥—é¤ï¼Œå¦‚æœå…³è”äº†å°±æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line">    count = setmealMapper.countByCategoryId(id);</span><br><span class="line">    <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//å½“å‰åˆ†ç±»ä¸‹æœ‰èœå“ï¼Œä¸èƒ½åˆ é™¤</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.CATEGORY_BE_RELATED_BY_SETMEAL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤åˆ†ç±»æ•°æ®</span></span><br><span class="line">    categoryMapper.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹åˆ†ç±»-2">ä¿®æ”¹åˆ†ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(CategoryDTO categoryDTO)</span> &#123;</span><br><span class="line">    <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Category</span>();</span><br><span class="line">    BeanUtils.copyProperties(categoryDTO,category);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®ä¿®æ”¹æ—¶é—´ã€ä¿®æ”¹äºº</span></span><br><span class="line">    category.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    category.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">    categoryMapper.update(category);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯ç”¨ç¦ç”¨åˆ†ç±»-2">å¯ç”¨ç¦ç”¨åˆ†ç±»</h4><p>å› ä¸º<code>update()</code>éœ€è¦å®Œæ•´çš„Categoryå¯¹è±¡ï¼Œæ‰€ä»¥å°±ç®—åªæ”¹ä¸€ä¸ªstatusï¼Œä¹Ÿè¦å°è£…å‡ºä¸€ä¸ªå®Œæ•´çš„Categoryå¯¹è±¡æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startOrStop</span><span class="params">(Integer status, Long id)</span> &#123;</span><br><span class="line">    <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> Category.builder()</span><br><span class="line">            .id(id)</span><br><span class="line">            .status(status)</span><br><span class="line">            .updateTime(LocalDateTime.now())</span><br><span class="line">            .updateUser(BaseContext.getCurrentId())</span><br><span class="line">            .build();</span><br><span class="line">    categoryMapper.update(category);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»-2">æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»</h4><p>ç±»å‹æœ‰ï¼šèœå“åˆ†ç±»ï¼ˆ1ï¼‰å’Œå¥—é¤åˆ†ç±»ï¼ˆ2ï¼‰</p><p>æ‰€ä»¥ä¼ å…¥çš„æ•°æ®å¯èƒ½æ˜¯1æˆ–è€…2ï¼Œæ ¹æ®è¿™ä¸ªä»è¡¨ä¸­æŸ¥å‡ºtype = ï¼Ÿçš„å¹¶ä¸”status = 1çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Category&gt; <span class="title function_">list</span><span class="params">(Integer type)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> categoryMapper.list(type);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Mapperå±‚">Mapperå±‚</h3><h4 id="CategoryMapper">CategoryMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.sky.enumeration.OperationType;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryPageQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.entity.Category;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CategoryMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> category</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into category(type, name, sort, status, create_time, update_time, create_user, update_user)&quot; +</span></span><br><span class="line"><span class="meta">            &quot; VALUES&quot; +</span></span><br><span class="line"><span class="meta">            &quot; (#&#123;type&#125;, #&#123;name&#125;, #&#123;sort&#125;, #&#123;status&#125;, #&#123;createTime&#125;, #&#123;updateTime&#125;, #&#123;createUser&#125;, #&#123;updateUser&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Category category)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Page&lt;Category&gt; <span class="title function_">pageQuery</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idåˆ é™¤åˆ†ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from category where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idä¿®æ”¹åˆ†ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> category</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Category category)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Category&gt; <span class="title function_">list</span><span class="params">(Integer type)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="DishMapper">DishMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DishMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“æ•°é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select count(id) from dish where category_id = #&#123;categoryId&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">countByCategoryId</span><span class="params">(Long categoryId)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SetmealMapper">SetmealMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SetmealMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢å¥—é¤çš„æ•°é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select count(id) from setmeal where category_id = #&#123;categoryId&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">countByCategoryId</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CategoryMapper-xml">CategoryMapper.xml</h4><p>å› ä¸ºåœ¨æœåŠ¡å±‚çš„æ–¹æ³•ä¸­ï¼Œè°ƒç”¨Mapperå±‚çš„<code>pageQuery()</code> ä¹‹å‰ä½¿ç”¨äº†PageHelperè¿›è¡Œäº†limitçš„è‡ªåŠ¨æ·»åŠ ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸ä½¿ç”¨limit</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.sky.mapper.CategoryMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;pageQuery&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.Category&quot;</span>&gt;</span></span><br><span class="line">        select * from category</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">                and type = #&#123;type&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by sort asc , create_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Category&quot;</span>&gt;</span></span><br><span class="line">        update category</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">                type = #&#123;type&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">                name = #&#123;name&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sort != null&quot;</span>&gt;</span></span><br><span class="line">                sort = #&#123;sort&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">                status = #&#123;status&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span></span><br><span class="line">                update_time = #&#123;updateTime&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateUser != null&quot;</span>&gt;</span></span><br><span class="line">                update_user = #&#123;updateUser&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Category&quot;</span>&gt;</span></span><br><span class="line">        select * from category</span><br><span class="line">        where status = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">            and type = #&#123;type&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        order by sort asc,create_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…¬å…±å­—æ®µå­—æ®µå¡«å……å®ç°">å…¬å…±å­—æ®µå­—æ®µå¡«å……å®ç°</h2><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20230925172910327.png" alt="image-20230925172910327"></p><p>å…ˆåˆ›å»ºæ³¨è§£ï¼Œç”¨äºä¼ å€¼ï¼ˆUpdate or Insertï¼‰å’Œæ ‡è®°éœ€è¦è¿›è¡Œå…¬å…±å­—æ®µå¡«å……çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoFill &#123;</span><br><span class="line">    <span class="comment">//åæœŸæ›´æ”¹æ“ä½œæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æ³¨è§£é»˜è®¤å€¼æ˜¯UPDATE</span></span><br><span class="line">    OperationType <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> OperationType.UPDATE;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰åˆ‡é¢ç±»</p><ul><li>åˆ‡å…¥ç‚¹<ul><li>æŒ‡æ˜éœ€è¦åˆ‡å…¥çš„æ–¹æ³•<ul><li><code>execution()</code>ï¼šè¿™æ˜¯åˆ‡ç‚¹è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œè¡¨ç¤ºåŒ¹é…æ–¹æ³•æ‰§è¡Œçš„è§„åˆ™ã€‚</li><li><code>*</code>ï¼šè¡¨ç¤ºåŒ¹é…ä»»æ„è¿”å›ç±»å‹çš„æ–¹æ³•ã€‚<code>*</code> æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºä¸é™å®šæ–¹æ³•çš„è¿”å›ç±»å‹ã€‚</li><li><code>com.sky.mapper.*</code>ï¼šè¡¨ç¤ºåŒ¹é… <code>com.sky.mapper</code> åŒ…ä¸‹çš„æ‰€æœ‰ç±»ã€‚</li><li><code>*.*(..)</code>ï¼šè¡¨ç¤ºåŒ¹é…è¿™äº›ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œè€Œ <code>..</code> è¡¨ç¤ºåŒ¹é…ä»»æ„å‚æ•°ç±»å‹å’Œä¸ªæ•°çš„æ–¹æ³•ã€‚</li></ul></li><li>&amp;&amp;åæŒ‡æ˜äº†è¦ç”¨æŸä¸ªæ³¨è§£è¿›è¡Œæ ‡è®°æ‰è¡Œ</li></ul></li><li>@Before(â€œautoFillPointCut()â€)<br>-   åœ¨åˆ‡ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰éœ€è¦æ‰§è¡Œçš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ‡å…¥ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.sky.mapper.*.*(..)) &amp;&amp; @annotation(com.sky.annotation.AutoFill)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFillPointCut</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®é€šçŸ¥ï¼Œåœ¨é€šçŸ¥ä¸­è¿›è¡Œå…¬å…±å­—æ®µçš„èµ‹å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;autoFillPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFill</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹è¿›è¡Œå…¬å…±å­—æ®µçš„å¡«å……ï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¢«æ‹¦æˆªçš„æ–¹æ³•çš„æ•°æ®åº“æ“ä½œç±»å‹(æ³¨è§£çš„å€¼)</span></span><br><span class="line">        <span class="comment">//è·å–æ–¹æ³•ç­¾å</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature)joinPoint.getSignature();<span class="comment">//æ–¹æ³•ç­¾åå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ä»æ–¹æ³•ç­¾åä¸­è·å–æ–¹æ³•ï¼Œåœ¨è·å–æŒ‡å®šçš„æ³¨è§£</span></span><br><span class="line">        <span class="type">AutoFill</span> <span class="variable">autoFill</span> <span class="operator">=</span> signature.getMethod().getAnnotation(AutoFill.class);<span class="comment">//è·å¾—æ–¹æ³•ä¸Šçš„æ³¨è§£å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ä»æ³¨è§£ä¸­è·å–å€¼</span></span><br><span class="line">        <span class="type">OperationType</span> <span class="variable">operationType</span> <span class="operator">=</span> autoFill.value();<span class="comment">//è·å–æ•°æ®åº“æ“ä½œç±»å‹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å½“å‰è¢«æ‹¦æˆªæ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args == <span class="literal">null</span> || args.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">entity</span> <span class="operator">=</span> args[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‡†å¤‡èµ‹å€¼çš„æ•°æ®</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">currentId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ ¹æ®ä¸åŒçš„æ“ä½œç±»å‹ï¼Œä¸ºå¯¹åº”çš„å±æ€§èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(operationType == OperationType.INSERT)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//è¿™é‡Œçš„æ–¹æ³•åç”¨äº†å¸¸é‡</span></span><br><span class="line">                <span class="type">Method</span> <span class="variable">setCreateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_TIME, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_TIME, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setCreateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_USER, Long.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_USER, Long.class);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//é€šè¿‡åå°„ä¸ºå¯¹è±¡å±æ€§èµ‹å€¼</span></span><br><span class="line">                setCreateTime.invoke(entity,now);</span><br><span class="line">                setUpdateTime.invoke(entity,now);</span><br><span class="line">                setCreateUser.invoke(entity,currentId);</span><br><span class="line">                setUpdateUser.invoke(entity,currentId);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(operationType == OperationType.UPDATE)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateUser&quot;</span>, LocalDateTime.class);</span><br><span class="line">                <span class="type">Method</span> <span class="variable">setUpdateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateUser&quot;</span>, Long.class);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//é€šè¿‡åå°„ä¸ºå¯¹è±¡å±æ€§èµ‹å€¼</span></span><br><span class="line">                setUpdateTime.invoke(entity,now);</span><br><span class="line">                setUpdateUser.invoke(entity,currentId);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨mapperä¸­è¿›è¡Œä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoFill(value = OperationType.INSERT)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure><h2 id="æ–°å¢èœå“">æ–°å¢èœå“</h2><h3 id="é…ç½®é˜¿é‡Œäº‘OSSæœåŠ¡">é…ç½®é˜¿é‡Œäº‘OSSæœåŠ¡</h3><ul><li><p>æ€»ç»“ï¼š</p><ul><li><p>å†™ä¸ª<code>å±æ€§ç±»</code>å¹¶ä½¿ç”¨è¿™ä¸‰ä¸ªæ³¨è§£æ¥è®©springè‡ªåŠ¨é…ç½®ymlæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶å°†AliOssPropertieså¯¹è±¡åŠ è½½åˆ°å®¹å™¨ä¸­</p><ul><li><p>ï¼ˆå…ˆå†™é…ç½®ç±»ï¼Œè¿™æ ·åœ¨å†™ymlæ–‡ä»¶æ—¶ä¼šæœ‰ä»£ç æç¤ºåŠŸèƒ½ï¼‰</p></li><li><pre><code>@Component@ConfigurationProperties(prefix = &quot;sky.alioss&quot;)@Data<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-   å†™ä¸ª`å·¥å…·ç±»`é‡Œé¢å°è£…å¥½éœ€è¦ç”¨çš„æ–¹æ³•</span><br><span class="line"></span><br><span class="line">    -   ```java</span><br><span class="line">        @Data</span><br><span class="line">        @AllArgsConstructor</span><br><span class="line">        @Slf4j</span><br></pre></td></tr></table></figure></code></pre></li></ul></li><li><p>å†™ä¸ª<code>é…ç½®ç±»</code></p><ul><li><pre><code class="language-java">@Configuration@Slf4j<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    -   ![æœªå‘½åæ–‡ä»¶](../assets/image/<span class="variable">%E8</span><span class="variable">%8</span>B<span class="variable">%8</span>D<span class="variable">%E7</span><span class="variable">%A9</span><span class="variable">%B9</span><span class="variable">%E5</span><span class="variable">%A4</span><span class="variable">%96</span><span class="variable">%E5</span><span class="variable">%8</span>D<span class="variable">%96</span><span class="variable">%E8</span><span class="variable">%AF</span><span class="variable">%BE</span><span class="variable">%E5</span><span class="variable">%A0</span><span class="variable">%82</span><span class="variable">%E7</span><span class="variable">%AC</span><span class="variable">%94</span><span class="variable">%E8</span><span class="variable">%AE</span><span class="variable">%B0_Image</span>/<span class="variable">%E6</span><span class="variable">%9</span>C<span class="variable">%AA</span><span class="variable">%E5</span><span class="variable">%91</span><span class="variable">%BD</span><span class="variable">%E5</span><span class="variable">%90</span><span class="variable">%8</span>D<span class="variable">%E6</span><span class="variable">%96</span><span class="variable">%87</span><span class="variable">%E4</span><span class="variable">%BB</span><span class="variable">%B6.png</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å› ä¸ºæœ‰è¿™ä¸ªå±æ€§ç±»çš„å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨æ·»åŠ application.ymlæ–‡ä»¶çš„æ—¶å€™æœ‰ä»£ç æç¤ºåŠŸèƒ½</span><br><span class="line"></span><br><span class="line">å¹¶ä¸”ä¼šå°†ç±»ä¸­çš„é©¼å³°å‘½åæ³•è‡ªåŠ¨æ”¹ä¸º`-`åˆ†å‰²çš„å†™æ³•</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="title">@Component</span></span><br><span class="line"><span class="title">@ConfigurationProperties</span>(<span class="keyword">prefix</span> <span class="operator">=</span> <span class="string">&quot;sky.alioss&quot;</span>)</span><br><span class="line"><span class="title">@Data</span></span><br><span class="line">public class AliOssProperties &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String endpoint<span class="comment">;</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeyId<span class="comment">;</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret<span class="comment">;</span></span><br><span class="line">    <span class="keyword">private</span> String bucketName<span class="comment">;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ul><p>é…ç½®pomæ–‡ä»¶</p><p>è¿™é‡Œé‡‡ç”¨çš„å†™æ³•æ˜¯å°†ç‰ˆæœ¬å·ä¸å·¥ä»¶ååˆ†å¼€çš„å†™æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aliyun.sdk.oss</span>&gt;</span>3.10.2<span class="tag">&lt;/<span class="name">aliyun.sdk.oss</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jaxb-api</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">jaxb-api</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.sdk.oss&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jaxb-api&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…‰æ ‡æ‚¬æµ®åœ¨æ§åˆ¶å°å³ä¸Šè§’çš„å¤´åƒï¼Œå¯ä»¥çœ‹è§AccessKeyï¼Œæ¥è·å¾—è®¿é—®å¯†é’¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sky:</span></span><br><span class="line">  <span class="attr">alioss:</span></span><br><span class="line">    <span class="attr">access-key-id:</span> <span class="string">ã€‚ã€‚ã€‚</span></span><br><span class="line">    <span class="attr">access-key-secret:</span> <span class="string">ã€‚ã€‚ã€‚</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">oss-cn-beijing.aliyuncs.com</span></span><br><span class="line">    <span class="attr">bucket-name:</span> <span class="string">cangqiong-momoao</span></span><br></pre></td></tr></table></figure><p>å‡†å¤‡å·¥å…·ç±»ï¼Œåœ¨æ–‡ä»¶ä¸Šä¼ æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨å·¥å…·ç±»ä¸­çš„æ–¹æ³•</p><ul><li>upload()æ–¹æ³•ä½œç”¨ï¼š<ul><li>å…ˆç¡®ä¿æŒ‡å®šçš„æ¡¶ç©ºé—´æ˜¯å¯ä»¥è®¿é—®çš„ï¼›å¦‚æœè®¿é—®ä¸åˆ°ï¼Œå°±ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯</li><li>å¦‚æœèƒ½è®¿é—®åˆ°ï¼Œå°±ä¼šè¿”å›æ ¹æ®æ¡¶ç©ºé—´ç”Ÿæˆçš„è®¿é—®æ–‡ä»¶çš„URLåœ°å€ï¼ˆ<code>https://BucketName.Endpoint/ObjectName</code>ï¼‰</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.ClientException;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSException;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOssUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="type">byte</span>[] bytes, String objectName)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºPutObjectè¯·æ±‚ã€‚</span></span><br><span class="line">            ossClient.putObject(bucketName, objectName, <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bytes));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (OSSException oe) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an OSSException, which means your request made it to OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;but was rejected with an error response for some reason.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + oe.getErrorMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Code:&quot;</span> + oe.getErrorCode());</span><br><span class="line">            System.out.println(<span class="string">&quot;Request ID:&quot;</span> + oe.getRequestId());</span><br><span class="line">            System.out.println(<span class="string">&quot;Host ID:&quot;</span> + oe.getHostId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClientException ce) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an ClientException, which means the client encountered &quot;</span></span><br><span class="line">                    + <span class="string">&quot;a serious internal problem while trying to communicate with OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;such as not being able to access the network.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + ce.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (ossClient != <span class="literal">null</span>) &#123;</span><br><span class="line">                ossClient.shutdown();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–‡ä»¶è®¿é—®è·¯å¾„è§„åˆ™ https://BucketName.Endpoint/ObjectName</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;https://&quot;</span>);</span><br><span class="line">        stringBuilder</span><br><span class="line">                .append(bucketName)</span><br><span class="line">                .append(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">                .append(endpoint)</span><br><span class="line">                .append(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">                .append(objectName);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ åˆ°:&#123;&#125;&quot;</span>, stringBuilder.toString());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨é…ç½®ç±»ï¼Œå°†å®¹å™¨ä¸­çš„AliOssPropertieså¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†AliOssPropertieså¯¹è±¡ä¸­çš„ä¿¡æ¯å°è£…åˆ°AliOssUtilå¯¹è±¡ä¸­ï¼Œå¹¶å°†AliOssUtilå¯¹è±¡åŠ è½½åˆ°å®¹å™¨ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * ç”¨äºé…ç½®AliOssUtilå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//ç¡®ä¿å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªAliOssUtilå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="keyword">public</span> AliOssUtil <span class="title function_">aliOssUtil</span><span class="params">(AliOssProperties ali)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºé˜¿é‡Œäº‘æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»å¯¹è±¡:&#123;&#125;&quot;</span>,ali);</span><br><span class="line">        <span class="type">AliOssUtil</span> <span class="variable">aliOssUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AliOssUtil</span>(ali.getEndpoint(), ali.getAccessKeyId(), ali.getAccessKeySecret(), ali.getBucketName());</span><br><span class="line">        <span class="keyword">return</span> aliOssUtil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸Šä¼ æ¥å£å¼€å‘">æ–‡ä»¶ä¸Šä¼ æ¥å£å¼€å‘</h3><p>ç¼–å†™æ¥å£<code>@PostMapping(&quot;/upload&quot;)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/common&quot;)</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;é€šç”¨æ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOssUtil aliOssUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–‡ä»¶ä¸Šä¼ &quot;)</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„å‚æ•°åä¸ºfileå’Œå‰ç«¯è¦ä¿æŒä¸€è‡´</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">upload</span><span class="params">(MultipartFile file)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ ï¼š&#123;&#125;&quot;</span>,file);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è·å–åŸå§‹æ–‡ä»¶åç§°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æˆªå– . åŠå…¶ä¹‹åçš„å†…å®¹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">extension</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ç”¨UUIDæ¥ç”Ÿæˆä¸€ä¸ªç¼–å·ï¼Œåœ¨åŠ ä¸Šæ–‡ä»¶æ‰©å±•åï¼Œè¿™æ ·å°±ä¸ä¼šé‡åäº†</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> UUID.randomUUID().toString() + extension;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ä½¿ç”¨upload()è·å¾—è®¿é—®è¿™ä¸ªæ–‡ä»¶çš„URLåœ°å€</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> aliOssUtil.upload(file.getBytes(), objectName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è¿”å›ç»™å‰ç«¯æˆåŠŸçš„URLåœ°å€</span></span><br><span class="line">            <span class="keyword">return</span> Result.success(filePath);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼š&#123;&#125;&quot;</span>,e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–°å¢èœå“æ¥å£å¼€å‘">æ–°å¢èœå“æ¥å£å¼€å‘</h3><p>æ§åˆ¶å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/dish&quot;)</span></span><br><span class="line"><span class="meta">@Api(&quot;èœå“ç›¸å…³æ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DishController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishService dishService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–°å¢èœå“&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> DishDTO dishDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;æ–°å¢èœå“ï¼š&#123;&#125;&quot;</span>,dishDTO);</span><br><span class="line">        </span><br><span class="line">        dishService.saveWithFlavor(dishDTO);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å±‚</p><p>å› ä¸ºDishDTOä¸­æœ‰èœå“çš„æ•°æ®å’Œå£å‘³çš„æ•°æ®ï¼ˆList<DishFlavor>ï¼‰ï¼Œæ‰€ä»¥è¦å–å‡ºï¼Œå¹¶åˆ†åˆ«æ’å…¥ä¸åŒçš„è¡¨ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DishServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DishService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishMapper dishMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishFlavorMapper dishFlavorMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveWithFlavor</span><span class="params">(DishDTO dishDTO)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°†DTOä¸­éœ€è¦æ’å…¥åˆ°dishè¡¨ä¸­çš„æ•°æ®æ‹·è´å‡ºæ¥</span></span><br><span class="line">        <span class="type">Dish</span> <span class="variable">dish</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dish</span>();</span><br><span class="line">        BeanUtils.copyProperties(dishDTO,dish);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ’å…¥</span></span><br><span class="line">        dishMapper.insert(dish);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–insertè¯­å¥ç”Ÿæˆçš„ä¸»é”®å€¼</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">dishId</span> <span class="operator">=</span> dish.getId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯¹å£å‘³è¡¨è¿›è¡Œæ’å…¥</span></span><br><span class="line">        List&lt;DishFlavor&gt; flavors = dishDTO.getFlavors();</span><br><span class="line">        <span class="keyword">if</span>(flavors != <span class="literal">null</span> &amp;&amp; flavors.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">            flavors.forEach(dishFlavor -&gt; &#123;</span><br><span class="line">                dishFlavor.setDishId(dishId);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å‘å£å‘³è¡¨æ’å…¥næ¡æ•°æ®</span></span><br><span class="line">            dishFlavorMapper.insertBatch(flavors);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥èœå“æ•°æ®">æ’å…¥èœå“æ•°æ®</h4><p>æ·»åŠ ä¸€ä¸ªinsert()æ–¹æ³•ï¼Œä½¿ç”¨@AutoFillè‡ªåŠ¨å¡«å†™å…¬å…±å­—æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DishMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“æ•°é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select count(id) from dish where category_id = #&#123;categoryId&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">countByCategoryId</span><span class="params">(Long categoryId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AutoFill(OperationType.INSERT)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Dish dish)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xmlæ–‡ä»¶</p><ul><li>insertæ ‡ç­¾ä¸­çš„å±æ€§<ul><li>useGeneratedKeys=â€œtrueâ€<ul><li>è‡ªåŠ¨ç”Ÿæˆä¸»é”®</li><li>è¿™é€šå¸¸åœ¨æ’å…¥æ•°æ®åéœ€è¦è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼æ—¶ä½¿ç”¨ã€‚</li></ul></li><li>keyProperty=â€œidâ€<ul><li>å°†è‡ªåŠ¨ç”Ÿæˆçš„é”®å€¼èµ‹å€¼ç»™å“ªä¸ªå±æ€§</li><li>å› ä¸ºæ–¹æ³•å‚æ•°æ˜¯ä¸€ä¸ªDishå¯¹è±¡ï¼Œæ‰€ä»¥ç”Ÿæˆçš„é”®èµ‹å€¼ç»™è¿™ä¸ªå¯¹è±¡Idå±æ€§</li></ul></li><li>æ‰€ä»¥åœ¨æœåŠ¡å±‚ä¸­ä½¿ç”¨<code>Long dishId = dish.getId();</code>å¯ä»¥è·å–Dishè¡¨ä¸­æ­¤æ¡è®°å½•çš„ä¸»é”®ï¼Œç”¨äºåœ¨Flavorè¡¨ä¸­çš„<code>dish_id</code>åˆ—</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.sky.mapper.DishMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">        insert into dish(name, category_id, price, image, description, create_time, update_time, create_user, update_user,status)</span><br><span class="line">            values</span><br><span class="line">                (#&#123;name&#125;,#&#123;categoryId&#125;,#&#123;price&#125;,#&#123;image&#125;,#&#123;description&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;,#&#123;createUser&#125;,#&#123;updateUser&#125;,#&#123;status&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ’å…¥å£å‘³æ•°æ®">æ’å…¥å£å‘³æ•°æ®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DishFlavorMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡æ’å…¥å£å‘³æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> flavors</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertBatch</span><span class="params">(List&lt;DishFlavor&gt; flavors)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>foreach</code>éå†é›†åˆ<code>flavors</code>ï¼Œæ¯æ¬¡å–å‡ºçš„å¯¹è±¡å‘½åä¸º<code>df</code>ï¼Œå¹¶ä¸”ç”¨<code>ï¼Œ</code>ä½œä¸ºæ‹¼æ¥çš„åˆ†å‰²ç¬¦</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.sky.mapper.DishFlavorMapper&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatch&quot;</span>&gt;</span></span><br><span class="line">        insert into dish_flavor (dish_id, name, value) VALUES</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;flavors&quot;</span> <span class="attr">item</span>=<span class="string">&quot;df&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            (#&#123;df.dishId&#125;,#&#123;df.name&#125;,#&#123;df.value&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="èœå“åˆ†é¡µæŸ¥è¯¢">èœå“åˆ†é¡µæŸ¥è¯¢</h2><p>å‰ç«¯ä¼ è¿‡æ¥çš„DTO</p><p><code>page</code>å’Œ<code>pageSize</code>ç”¨æ¥æŒ‡å®šæŸ¥è¯¢çš„é¡µæ•°å’Œå¤§å°</p><p><code>name</code>ï¼šæŸ¥è¯¢èœå“çš„åç§°</p><p><code>categoryId</code>ï¼šåˆ†ç±»çš„ID</p><p><code>status</code>ï¼šå¯ç”¨çŠ¶æ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DishPageQueryDTO</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> page;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> pageSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ†ç±»id</span></span><br><span class="line">    <span class="keyword">private</span> Integer categoryId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çŠ¶æ€ 0è¡¨ç¤ºç¦ç”¨ 1è¡¨ç¤ºå¯ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å™¨å±‚</p><p>ä¾æ—§ä½¿ç”¨<code>PageResult</code>æ¥å‘å‰ç«¯æ”¾å›æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;èœå“åˆ†é¡µæŸ¥è¯¢&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;PageResult&gt; <span class="title function_">page</span><span class="params">(DishPageQueryDTO dishPageQueryDTO)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;èœå“åˆ†é¡µæŸ¥è¯¢ï¼š&#123;&#125;&quot;</span>,dishPageQueryDTO);</span><br><span class="line">    PageResult pageResult= dishService.pageQuery(dishPageQueryDTO);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å±‚</p><p>ä½¿ç”¨<code>PageHelper</code>æ¥è¾…åŠ©ç”ŸæˆSQLè¯­å¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èœå“åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> dishPageQueryDTO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">pageQuery</span><span class="params">(DishPageQueryDTO dishPageQueryDTO)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™é‡ŒæŒ‡å®šæŸ¥è¯¢çš„é¡µæ•°ï¼Œåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶å°±ä¼šè‡ªåŠ¨å¡«å……limitäº†</span></span><br><span class="line">    PageHelper.startPage(dishPageQueryDTO.getPage(),dishPageQueryDTO.getPageSize());</span><br><span class="line"></span><br><span class="line">    Page&lt;DishVO&gt; page = dishMapper.pageQuery(dishPageQueryDTO);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>(page.getTotal(),page.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mapperå±‚</p><p>è¿”å›ç±»å‹æ˜¯DishVOï¼Œå› ä¸ºå‰ç«¯éœ€è¦çš„æ•°æ®ä»ä¸¤ä¸ªè¡¨ä¸­è·å–</p><p>é‡Œé¢å°è£…çš„éƒ½æ˜¯å‰ç«¯éœ€è¦çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DishVO</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">//èœå“åç§°</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//èœå“åˆ†ç±»id</span></span><br><span class="line">    <span class="keyword">private</span> Long categoryId;</span><br><span class="line">    <span class="comment">//èœå“ä»·æ ¼</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    <span class="comment">//å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">private</span> String image;</span><br><span class="line">    <span class="comment">//æè¿°ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="comment">//0 åœå”® 1 èµ·å”®</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="comment">//æ›´æ–°æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    <span class="comment">//åˆ†ç±»åç§°</span></span><br><span class="line">    <span class="keyword">private</span> String categoryName;</span><br><span class="line">    <span class="comment">//èœå“å…³è”çš„å£å‘³</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;DishFlavor&gt; flavors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//private Integer copies;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> dishPageQueryDTO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Page&lt;DishVO&gt; <span class="title function_">pageQuery</span><span class="params">(DishPageQueryDTO dishPageQueryDTO)</span>;</span><br></pre></td></tr></table></figure><p>â€‹    é“¾æ¥ä¸¤ä¸ªè¡¨æŸ¥è¯¢æ•°æ®ï¼Œå¹¶åˆ¤æ–­nameã€categoryIdã€categoryIdæ•°æ®æ˜¯å¦ä¸ºç©ºï¼Œæœ€åç”¨create_timeé™åºæ’åˆ—</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;pageQuery&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.vo.DishVO&quot;</span>&gt;</span></span><br><span class="line">    select d.* , c.name as categoryName from dish d left outer join category c on d.category_id = c.id</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">            and d.name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;categoryId != null&quot;</span>&gt;</span></span><br><span class="line">            and d.category_id = #&#123;categoryId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">            and d.status = #&#123;status&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    order by d.create_time desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤èœå“">åˆ é™¤èœå“</h2><ul><li>ä¸šåŠ¡è§„åˆ™<ul><li>ä¸€æ¬¡å¯ä»¥åˆ ä¸€ä¸ªæˆ–å¤šä¸ª</li><li>èµ·å”®çš„ä¸èƒ½åˆ é™¤</li><li>è¢«å¥—é¤å…³è”çš„èœå“ä¸èƒ½åˆ é™¤</li><li>åˆ é™¤èœå“åï¼Œå…³è”çš„å£å‘³æ•°æ®ä¹Ÿéœ€è¦åˆ é™¤</li></ul></li></ul><p>æ§åˆ¶å™¨å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;èœå“æ‰¹é‡åˆ é™¤&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;Long&gt; ids)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;èœå“æ‰¹é‡åˆ é™¤ï¼š&#123;&#125;&quot;</span>,ids);</span><br><span class="line"></span><br><span class="line">    dishService.deleteBatch(ids);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å±‚</p><p>å…ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥åˆ é™¤ï¼Œå¦‚æœä¸å¯ä»¥å°±æŠ›å‡ºé”™è¯¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èœå“æ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBatch</span><span class="params">(List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å½“å‰èœå“æ˜¯å¦å¯ä»¥åˆ é™¤</span></span><br><span class="line">    <span class="comment">//1ã€æ˜¯å¦èµ·å”®ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (Long id : ids) &#123;</span><br><span class="line">        <span class="type">Dish</span> <span class="variable">dish</span> <span class="operator">=</span> dishMapper.getById(id);</span><br><span class="line">        <span class="keyword">if</span> (dish.getStatus() == StatusConstant.ENABLE)&#123;</span><br><span class="line">            <span class="comment">//å½“å‰èœå“èµ·å”®ä¸­</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.DISH_ON_SALE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2ã€æ˜¯å¦åŒ…å«åœ¨å¥—é¤å†…</span></span><br><span class="line">    List&lt;Long&gt; setmealIds = setmealDishMapper.getSetmealIdsByDishIds(ids);</span><br><span class="line">    <span class="keyword">if</span> (setmealIds != <span class="literal">null</span> &amp;&amp; setmealIds.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//å½“å‰å¥—é¤å…³è”äº†ï¼Œä¸èƒ½åˆ é™¤</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.DISH_BE_RELATED_BY_SETMEAL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯ä»¥åˆ é™¤</span></span><br><span class="line">    <span class="keyword">for</span> (Long id : ids) &#123;</span><br><span class="line">        <span class="comment">//1ã€åˆ é™¤èœå“æ•°æ®</span></span><br><span class="line">        dishMapper.deleteById(id);</span><br><span class="line">        <span class="comment">//2ã€åˆ é™¤å…³è”çš„å£å‘³æ•°æ®</span></span><br><span class="line">        dishFlavorMapper.deleteByDishId(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SetmealDishMapper</p><p>æŸ¥è¯¢å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰åŒ…å«çš„idå¯¹åº”çš„å¥—é¤</p><ul><li>å…¶ä¸­<ul><li>openï¼šä»£è¡¨ä»¥â€¦å¼€å¤´</li><li>closeï¼šä»£è¡¨ä»¥â€¦ç»“å°¾</li></ul></li></ul><p>å› ä¸ºinåçš„æ•°æ®è¦åŒ…å«åœ¨<code>()</code>å†…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getSetmealIdsByDishIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Long&quot;</span>&gt;</span></span><br><span class="line">    select setmeal_id from setmeal_dish where dish_id in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;dishIds&quot;</span> <span class="attr">item</span>=<span class="string">&quot;dishId&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;dishId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>DishMapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from dish where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><p>DishFlavorMapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from dish_flavor where dish_id = #&#123;dishId&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByDishId</span><span class="params">(Long dishId)</span>;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–</p><p>åœ¨ç¡®è®¤åˆ é™¤çš„æ—¶å€™ï¼Œè¦æ‰§è¡Œå¤šæ¡SQLï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜</p><p>æ‰€ä»¥æ•´åˆä¸ºä¸€æ¡SQL</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231004163550807.png" alt="image-20231004163550807"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span><br><span class="line">    delete from dish where id in</span><br><span class="line">         <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">             #&#123;id&#125;</span><br><span class="line">         <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹èœå“">ä¿®æ”¹èœå“</h2><ul><li>ä¸šåŠ¡åˆ†æ<ul><li>æ ¹æ®idæŸ¥è¯¢èœå“</li><li>æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»ï¼ˆå·²å®ç°ï¼‰</li><li>æ–‡ä»¶æ–‡ä»¶ä¸Šä¼ ï¼ˆå·²å®ç°ï¼‰</li><li>ä¿®æ”¹èœå“</li></ul></li></ul><h3 id="æ ¹æ®idæŸ¥è¯¢å‡ºèœå“ä¿¡æ¯">æ ¹æ®idæŸ¥è¯¢å‡ºèœå“ä¿¡æ¯</h3><p>æ§åˆ¶å™¨å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢èœå“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;DishVO&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;æ ¹æ®idæŸ¥è¯¢èœå“æ•°æ®ï¼š&#123;&#125;&quot;</span>,id);</span><br><span class="line">    <span class="type">DishVO</span> <span class="variable">dishVO</span> <span class="operator">=</span> dishService.getByIdWithFlavor(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(dishVO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å±‚</p><p>æŸ¥è¯¢å‡ºçš„æ•°æ®å°è£…åˆ°VOä¸­åœ¨è¿”å›ç»™å‰ç«¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæŸ¥è¯¢èœå“å’Œå£å‘³æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> DishVO <span class="title function_">getByIdWithFlavor</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®idæŸ¥è¯¢èœå“æ•°æ®</span></span><br><span class="line">    <span class="type">Dish</span> <span class="variable">dish</span> <span class="operator">=</span> dishMapper.getById(id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®èœå“idæŸ¥è¯¢å£å‘³æ•°æ®</span></span><br><span class="line">    List&lt;DishFlavor&gt; dishFlavors = dishFlavorMapper.getByDishId(id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…åˆ°DishVOä¸­</span></span><br><span class="line">    <span class="type">DishVO</span> <span class="variable">dishVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DishVO</span>();</span><br><span class="line">    BeanUtils.copyProperties(dish,dishVO);</span><br><span class="line">    dishVO.setFlavors(dishFlavors);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dishVO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®idä¿®æ”¹èœå“ä¿¡æ¯å’Œå£å‘³ä¿¡æ¯">æ ¹æ®idä¿®æ”¹èœå“ä¿¡æ¯å’Œå£å‘³ä¿¡æ¯</h3><p>æ§åˆ¶å™¨å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ä¿®æ”¹èœå“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> DishDTO dishDTO)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;ä¿®æ”¹èœå“ï¼š&#123;&#125;&quot;</span>,dishDTO);</span><br><span class="line">    dishService.updateWithFlavor(dishDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡å±‚</p><ul><li>èœå“è¡¨<ul><li>ä½¿ç”¨updateæ–¹æ³•æ›´æ–°èœå“ä¿¡æ¯</li></ul></li><li>å£å‘³è¡¨<ul><li>å…ˆæŠŠå…³è”çš„å£å‘³æ•°æ®éƒ½åˆ é™¤</li><li>åœ¨æ’å…¥æ–°çš„å£å‘³æ•°æ®</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idä¿®æ”¹èœå“ä¿¡æ¯å’Œå£å‘³ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> dishDTO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateWithFlavor</span><span class="params">(DishDTO dishDTO)</span> &#123;</span><br><span class="line">    <span class="type">Dish</span> <span class="variable">dish</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dish</span>();</span><br><span class="line">    BeanUtils.copyProperties(dishDTO,dish);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    dishMapper.update(dish);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆæŠŠå…³è”çš„å£å‘³æ•°æ®éƒ½åˆ é™¤</span></span><br><span class="line">    dishFlavorMapper.deleteByDishId(dishDTO.getId());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨æ’å…¥æ–°çš„å£å‘³æ•°æ®</span></span><br><span class="line">    List&lt;DishFlavor&gt; flavors = dishDTO.getFlavors();</span><br><span class="line">    <span class="keyword">if</span>(flavors != <span class="literal">null</span> &amp;&amp; flavors.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">        flavors.forEach(dishFlavor -&gt; &#123;</span><br><span class="line">            dishFlavor.setDishId(dishDTO.getId());</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘å£å‘³è¡¨æ’å…¥næ¡æ•°æ®</span></span><br><span class="line">        dishFlavorMapper.insertBatch(flavors);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èœå“è¡¨çš„updateæ–¹æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">    update dish</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;categoryId != null&quot;</span>&gt;</span>categor_id = #&#123;categoryId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price != null&quot;</span>&gt;</span>price = #&#123;price&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;iamge != null&quot;</span>&gt;</span>iamge = #&#123;iamge&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;description != null&quot;</span>&gt;</span>description = #&#123;description&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span>status = #&#123;status&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #&#123;updateTime&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateUser != null&quot;</span>&gt;</span>update_user = #&#123;updateUser&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Javaä¸­æ“ä½œRedis">Javaä¸­æ“ä½œRedis</h2><h3 id="åˆ›å»ºRedisTemplateå¯¹è±¡">åˆ›å»ºRedisTemplateå¯¹è±¡</h3><p>å†™åœ¨configåŒ…ä¸‹</p><p>è‡ªå·±åˆ›å»º<code>RedisTemplate</code>çš„ä¸»è¦ç›®çš„å°±æ˜¯è¿™ä¸ªè®¾ç½®åºåˆ—åŒ–å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//RedisConnectionFactoryæ˜¯spring-boot-starter-data-redisæä¾›çš„</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºredisæ¨¡æ¿å¯¹è±¡...&quot;</span>);</span><br><span class="line">        <span class="type">RedisTemplate</span> <span class="variable">redisTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®redisçš„è¿æ¥å·¥å‚å¯¹è±¡</span></span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®redis keyçš„åºåˆ—åŒ–å™¨</span></span><br><span class="line">        <span class="comment">//è¿™æ˜¯Springæä¾›çš„</span></span><br><span class="line">        <span class="comment">//è‡ªå·±åˆ›å»ºRedisTemplateçš„ä¸»è¦ç›®çš„å°±æ˜¯è¿™ä¸ªï¼ˆè®¾ç½®åºåˆ—åŒ–å™¨ï¼‰</span></span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•">æµ‹è¯•</h3><p>æµ‹è¯•ç±»ï¼Œè·å–æ“ä½œä¸åŒæ•°æ®ç±»å‹çš„å¯¹è±¡ï¼Œç„¶åä½¿ç”¨è¿™äº›å¯¹è±¡æ¥æ“ä½œå¯¹åº”çš„æ•°æ®ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringDataRedisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRedisTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(redisTemplate);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç”¨è¿™ä¸ªå¯¹è±¡å¯ä»¥æ“ä½œå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</span></span><br><span class="line">        <span class="type">ValueOperations</span> <span class="variable">valueOperations</span> <span class="operator">=</span> redisTemplate.opsForValue();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//hashç±»å‹</span></span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">hashOperations</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ—è¡¨ç±»å‹</span></span><br><span class="line">        <span class="type">ListOperations</span> <span class="variable">listOperations</span> <span class="operator">=</span> redisTemplate.opsForList();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//é›†åˆç±»å‹</span></span><br><span class="line">        <span class="type">SetOperations</span> <span class="variable">setOperations</span> <span class="operator">=</span> redisTemplate.opsForSet();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æœ‰åºé›†åˆç±»å‹</span></span><br><span class="line">        <span class="type">ZSetOperations</span> <span class="variable">zSetOperations</span> <span class="operator">=</span> redisTemplate.opsForZSet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// set get setex setnx</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">city</span> <span class="operator">=</span> (String) redisTemplate.opsForValue().get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(city);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;code&quot;</span>,<span class="string">&quot;1234&quot;</span>,<span class="number">3</span>, TimeUnit.MINUTES);</span><br><span class="line">        redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>,<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œå“ˆå¸Œç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testHash</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//hset hget hdel hkeys hvals</span></span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">hashOperations</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line"></span><br><span class="line">        hashOperations.put(<span class="string">&quot;100&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        hashOperations.put(<span class="string">&quot;100&quot;</span>,<span class="string">&quot;age&quot;</span>,<span class="string">&quot;20&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) hashOperations.get(<span class="string">&quot;100&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keys</span> <span class="operator">=</span> hashOperations.keys(<span class="string">&quot;100&quot;</span>);</span><br><span class="line">        System.out.println(keys);</span><br><span class="line"></span><br><span class="line">        <span class="type">List</span> <span class="variable">values</span> <span class="operator">=</span> hashOperations.values(<span class="string">&quot;100&quot;</span>);</span><br><span class="line">        System.out.println(values);</span><br><span class="line"></span><br><span class="line">        hashOperations.delete(<span class="string">&quot;100&quot;</span>,<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œåˆ—è¡¨ç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//lpush lrange rpop llen</span></span><br><span class="line">        <span class="type">ListOperations</span> <span class="variable">listOperations</span> <span class="operator">=</span> redisTemplate.opsForList();</span><br><span class="line"></span><br><span class="line">        listOperations.leftPushAll(<span class="string">&quot;mylist&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>);</span><br><span class="line">        listOperations.leftPush(<span class="string">&quot;mylist&quot;</span>,<span class="string">&quot;d&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">List</span> <span class="variable">mylist</span> <span class="operator">=</span> listOperations.range(<span class="string">&quot;mylist&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(mylist);</span><br><span class="line"></span><br><span class="line">        listOperations.rightPop(<span class="string">&quot;mylist&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">size</span> <span class="operator">=</span> listOperations.size(<span class="string">&quot;mylist&quot;</span>);</span><br><span class="line">        System.out.println(size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œé›†åˆç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//sadd smembers scard sinter sunion srem</span></span><br><span class="line">        <span class="type">SetOperations</span> <span class="variable">setOperations</span> <span class="operator">=</span> redisTemplate.opsForSet();</span><br><span class="line"></span><br><span class="line">        setOperations.add(<span class="string">&quot;set1&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>);</span><br><span class="line">        setOperations.add(<span class="string">&quot;set2&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">members</span> <span class="operator">=</span> setOperations.members(<span class="string">&quot;set1&quot;</span>);</span><br><span class="line">        System.out.println(members);</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">size</span> <span class="operator">=</span> setOperations.size(<span class="string">&quot;set1&quot;</span>);</span><br><span class="line">        System.out.println(size);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">intersect</span> <span class="operator">=</span> setOperations.intersect(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);</span><br><span class="line">        System.out.println(intersect);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">union</span> <span class="operator">=</span> setOperations.union(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);</span><br><span class="line">        System.out.println(union);</span><br><span class="line"></span><br><span class="line">        setOperations.remove(<span class="string">&quot;set1&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œæœ‰åºé›†åˆç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testZset</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//zadd zrange zincrby zrem</span></span><br><span class="line">        <span class="type">ZSetOperations</span> <span class="variable">zSetOperations</span> <span class="operator">=</span> redisTemplate.opsForZSet();</span><br><span class="line"></span><br><span class="line">        zSetOperations.add(<span class="string">&quot;zset1&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="number">10</span>);</span><br><span class="line">        zSetOperations.add(<span class="string">&quot;zset1&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="number">12</span>);</span><br><span class="line">        zSetOperations.add(<span class="string">&quot;zset1&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="number">9</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Set</span> <span class="variable">zset1</span> <span class="operator">=</span> zSetOperations.range(<span class="string">&quot;zset1&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(zset1);</span><br><span class="line"></span><br><span class="line">        zSetOperations.incrementScore(<span class="string">&quot;zset1&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        zSetOperations.remove(<span class="string">&quot;zset1&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šç”¨å‘½ä»¤æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCommon</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//keys exists type del</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">keys</span> <span class="operator">=</span> redisTemplate.keys(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        System.out.println(keys);</span><br><span class="line"></span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">name</span> <span class="operator">=</span> redisTemplate.hasKey(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">set1</span> <span class="operator">=</span> redisTemplate.hasKey(<span class="string">&quot;set1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Object key : keys) &#123;</span><br><span class="line">            <span class="type">DataType</span> <span class="variable">type</span> <span class="operator">=</span> redisTemplate.type(key);</span><br><span class="line">            System.out.println(type.name());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        redisTemplate.delete(<span class="string">&quot;mylist&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®">åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®</h2><ul><li>æ¥å£è®¾è®¡<ul><li>è®¾ç½®è¥ä¸šçŠ¶æ€</li><li>ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</li><li>ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</li></ul></li></ul><h3 id="ç®¡ç†ç«¯">ç®¡ç†ç«¯</h3><p>åœ¨adminåŒ…ä¸‹çš„controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController(&quot;AdminShopController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/shop&quot;)</span></span><br><span class="line"><span class="meta">@Api( tags = &quot;åº—é“ºç›¸å…³æ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY</span> <span class="operator">=</span> <span class="string">&quot;SHOP_STATUS&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setStatus</span><span class="params">(<span class="meta">@PathVariable</span> Integer status)</span>&#123;</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€ï¼š&#123;&#125;&quot;</span>,status == <span class="number">1</span> ? <span class="string">&quot;è¥ä¸šä¸­&quot;</span> : <span class="string">&quot;æ‰“çƒŠä¸­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        redisTemplate.opsForValue().set(KEY,status);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/status&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æŸ¥è¯¢åº—é“ºè¥ä¸šçŠ¶æ€&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Integer&gt; <span class="title function_">getStatus</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        Integer status= (Integer)redisTemplate.opsForValue().get(KEY);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;è·å–åº—é“ºè¥ä¸šçŠ¶æ€ï¼š&#123;&#125;&quot;</span>,status == <span class="number">1</span> ? <span class="string">&quot;è¥ä¸šä¸­&quot;</span> : <span class="string">&quot;æ‰“çƒŠä¸­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success(status);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç«¯">ç”¨æˆ·ç«¯</h3><p>åœ¨useråŒ…ä¸‹çš„controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController(&quot;UserShopController&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/shop&quot;)</span></span><br><span class="line"><span class="meta">@Api( tags = &quot;åº—é“ºç›¸å…³æ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY</span> <span class="operator">=</span> <span class="string">&quot;SHOP_STATUS&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/status&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æŸ¥è¯¢åº—é“ºè¥ä¸šçŠ¶æ€&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Integer&gt; <span class="title function_">getStatus</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        Integer status= (Integer)redisTemplate.opsForValue().get(KEY);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;è·å–åº—é“ºè¥ä¸šçŠ¶æ€ï¼š&#123;&#125;&quot;</span>,status == <span class="number">1</span> ? <span class="string">&quot;è¥ä¸šä¸­&quot;</span> : <span class="string">&quot;æ‰“çƒŠä¸­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Result.success(status);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="HttpClient">HttpClient</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231006155915835.png" alt="image-20231006155915835"></p><h4 id="ä½œç”¨">ä½œç”¨</h4><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231006155827734.png" alt="image-20231006155827734"></p><h4 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h4><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231006155840596.png" alt="image-20231006155840596"></p><h4 id="æ•ˆæœæ¼”ç¤º">æ•ˆæœæ¼”ç¤º</h4><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231006155852772.png" alt="image-20231006155852772"></p><h3 id="å…¥é—¨æ¡ˆåˆ—">å…¥é—¨æ¡ˆåˆ—</h3><p>å¯¼åŒ…çš„æ—¶å€™å› ä¸ºä½¿ç”¨äº†ä»¥ä¸‹åŒ…ï¼Œæ‰€ä»¥ä¸éœ€è¦å†ç‰¹æ„å¯¼å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;aliyun.sdk.oss&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å‘é€Getè¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGET</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºhttpclientå¯¹è±¡</span></span><br><span class="line">    <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡</span></span><br><span class="line">    <span class="type">HttpGet</span> <span class="variable">httpGet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(<span class="string">&quot;http://localhost:8080/user/shop/status&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ</span></span><br><span class="line">    <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> httpClient.execute(httpGet);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç </span></span><br><span class="line">    <span class="type">int</span> <span class="variable">statusCode</span> <span class="operator">=</span> response.getStatusLine().getStatusCode();</span><br><span class="line">    System.out.println(<span class="string">&quot;æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç ä¸ºï¼š&quot;</span> + statusCode);</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpEntity</span> <span class="variable">entity</span> <span class="operator">=</span> response.getEntity();</span><br><span class="line">    <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> EntityUtils.toString(entity);</span><br><span class="line">    System.out.println(<span class="string">&quot;æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ä¸ºï¼š&quot;</span> + body);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">    response.close();</span><br><span class="line">    httpClient.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘é€POSTè¯·æ±‚</p><ul><li><p>POSTè¯·æ±‚ä¸æ­¢éœ€è¦é“¾æ¥</p><ul><li><p>åˆ›å»ºJSONObjectå¯¹è±¡ï¼ŒæŒ‡å®šè¯·æ±‚å‚æ•°</p></li><li><p>å°è£…åˆ°StringEntityå¯¹è±¡ä¸­</p><ul><li>æŒ‡å®šç¼–ç æ ¼å¼</li><li>æŒ‡å®šæ•°æ®ç±»å‹</li></ul></li><li><p>è®¾ç½®åˆ°POSTè¯·æ±‚å¯¹è±¡ä¸­</p><ul><li><pre><code class="language-java">httpPost.setEntity(entity);<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•é€šè¿‡httpclientå‘é€POSTæ–¹å¼çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @Test</span><br><span class="line">    public void test<span class="constructor">POST()</span> throws Exception&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºhttpclientå¯¹è±¡</span></span><br><span class="line">        CloseableHttpClient httpClient = <span class="module-access"><span class="module"><span class="identifier">HttpClients</span>.</span></span>create<span class="constructor">Default()</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡</span></span><br><span class="line">        HttpPost httpPost = <span class="keyword">new</span> <span class="constructor">HttpPost(<span class="string">&quot;http://localhost:8080/admin/employee/login&quot;</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å› ä¸ºæ˜¯postè¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºJSONObject</span></span><br><span class="line">        JSONObject jsonObject = <span class="keyword">new</span> <span class="constructor">JSONObject()</span>;</span><br><span class="line">        jsonObject.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…åˆ°StringEntityä¸­</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> <span class="constructor">StringEntity(<span class="params">jsonObject</span>.<span class="params">toString</span>()</span>);</span><br><span class="line">        <span class="comment">//æŒ‡å®šè¯·æ±‚ç¼–ç æ–¹å¼</span></span><br><span class="line">        entity.set<span class="constructor">ContentEncoding(<span class="string">&quot;utf-8&quot;</span>)</span>;</span><br><span class="line">        <span class="comment">//æ•°æ®æ ¼å¼</span></span><br><span class="line">        entity.set<span class="constructor">ContentType(<span class="string">&quot;application/json&quot;</span>)</span>;</span><br><span class="line">        <span class="comment">//è®¾ç½®åˆ°Postè¯·æ±‚å¯¹è±¡ä¸­</span></span><br><span class="line">        httpPost.set<span class="constructor">Entity(<span class="params">entity</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é€è¯·æ±‚</span></span><br><span class="line">        CloseableHttpResponse response = httpClient.execute(httpPost);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è§£æè¿”å›ç»“æœ</span></span><br><span class="line">        <span class="built_in">int</span> statusCode = response.get<span class="constructor">StatusLine()</span>.get<span class="constructor">StatusCode()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;å“åº”ç ä¸ºï¼š&quot;</span> + statusCode);</span><br><span class="line"></span><br><span class="line">        HttpEntity entity1 = response.get<span class="constructor">Entity()</span>;</span><br><span class="line">        String body = <span class="module-access"><span class="module"><span class="identifier">EntityUtils</span>.</span></span><span class="keyword">to</span><span class="constructor">String(<span class="params">entity1</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">&quot;å“åº”æ•°æ®ä¸ºï¼š&quot;</span> + body);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">        response.close<span class="literal">()</span>;</span><br><span class="line">        httpClient.close<span class="literal">()</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ul><h2 id="å¾®ä¿¡å°ç¨‹åºå¼€å‘">å¾®ä¿¡å°ç¨‹åºå¼€å‘</h2><p><a href="https://mp.weixin.qq.com/cgi-bin/wx?token=&amp;lang=zh_CN">å¾®ä¿¡å°ç¨‹åºå®˜ç½‘ä»‹ç»</a></p><h3 id="å°ç¨‹åºç›®å½•ç»“æ„">å°ç¨‹åºç›®å½•ç»“æ„</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231007094939232.png" alt="image-20231007094939232"></p><p>ä¸€ä¸ªé¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆ</p><p>jså’Œwxmlæ–‡ä»¶æ˜¯å¿…é¡»å¾—</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231007094955412.png" alt="image-20231007094955412"></p><p>æƒ³æ·»åŠ æ›´å¤šçš„é¡µéœ€è¦æ›´æ”¹app.jsonæ–‡ä»¶</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231007100323721.png" alt="image-20231007100323721"></p><h3 id="å¾®ä¿¡ç™»å½•æµç¨‹">å¾®ä¿¡ç™»å½•æµç¨‹</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231007195819972.png" alt="image-20231007195819972"></p><h2 id="æ”¯ä»˜åŠŸèƒ½">æ”¯ä»˜åŠŸèƒ½</h2><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231010095452717.png" alt="image-20231010095452717"></p><h2 id="Spring-Task">Spring Task</h2><h3 id="cornè¡¨è¾¾å¼">cornè¡¨è¾¾å¼</h3><p>cronè¡¨è¾¾å¼å…¶å®å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡cronè¡¨è¾¾å¼å¯ä»¥å®šä¹‰ä»»åŠ¡è§¦å‘çš„æ—¶é—´<br>æ„æˆè§„åˆ™ï¼šåˆ†ä¸º6æˆ–7ä¸ªåŸŸï¼Œç”±ç©ºæ ¼åˆ†éš”å¼€ï¼Œæ¯ä¸ªåŸŸä»£è¡¨ä¸€ä¸ªå«ä¹‰<br>æ¯ä¸ªåŸŸçš„å«ä¹‰åˆ†åˆ«ä¸ºï¼šç§’ã€åˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´(å¯é€‰)</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231010100813951.png" alt="image-20231010100813951"></p><p>cronè¡¨è¾¾å¼åœ¨çº¿ç”Ÿæˆå™¨ï¼š<a href="https://cron.qqe2.com/">https://cron.qqe2.com/</a></p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231010100917389.png" alt="image-20231010100917389"></p><h3 id="å…¥é—¨æ¡ˆåˆ—-2">å…¥é—¨æ¡ˆåˆ—</h3><ul><li>å¯¼å…¥mavenåæ ‡ spring-contextï¼ˆå·²å­˜åœ¨ï¼‰</li><li>å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ @EnableScheduling å¼€å¯ä»»åŠ¡è°ƒåº¦</li><li>è‡ªå®šä¹‰å®šæ—¶ä»»åŠ¡ç±»</li></ul><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231010100933169.png" alt="image-20231010100933169"></p><ul><li>cronè¡¨ç¤ºåˆ°æŸä¸ªæ—¶é—´ç‚¹å°±è§¦å‘<ul><li><code>&quot;0 * * * * ? &quot;</code>è¡¨ç¤ºå½“ç§’ä¸º0æ—¶è§¦å‘</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderTask</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†è¶…æ—¶è®¢å•çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 * * * * ? &quot;)</span> <span class="comment">//æ¯åˆ†é’Ÿè§¦å‘ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processTimeoutOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å®šæ—¶å¤„ç†è¶…æ—¶è®¢å•ï¼š&#123;&#125;&quot;</span>, LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalDateTime.now().plusMinutes(-<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// select * from orders where status = ? and order_time &lt; (å½“å‰æ—¶é—´ - 15åˆ†é’Ÿ)</span></span><br><span class="line">        List&lt;Orders&gt; ordersList = orderMapper.getByStatusAndOrderTimeLT(Orders.PENDING_PAYMENT, time);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ordersList != <span class="literal">null</span> &amp;&amp; ordersList.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Orders orders : ordersList) &#123;</span><br><span class="line">                orders.setStatus(Orders.CANCELLED);</span><br><span class="line">                orders.setCancelReason(<span class="string">&quot;è®¢å•è¶…æ—¶ï¼Œè‡ªåŠ¨å–æ¶ˆ&quot;</span>);</span><br><span class="line">                orders.setCancelTime(LocalDateTime.now());</span><br><span class="line">                orderMapper.update(orders);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†ä¸€ç›´å¤„äºæ´¾é€ä¸­çŠ¶æ€çš„è®¢å•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 1 * * ?&quot;)</span> <span class="comment">//æ¯å¤©å‡Œæ™¨1ç‚¹è§¦å‘ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processDeliveryOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å®šæ—¶å¤„ç†å¤„äºæ´¾é€ä¸­çš„è®¢å•ï¼š&#123;&#125;&quot;</span>,LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalDateTime.now().plusMinutes(-<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;Orders&gt; ordersList = orderMapper.getByStatusAndOrderTimeLT(Orders.DELIVERY_IN_PROGRESS, time);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ordersList != <span class="literal">null</span> &amp;&amp; ordersList.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (Orders orders : ordersList) &#123;</span><br><span class="line">                orders.setStatus(Orders.COMPLETED);</span><br><span class="line">                orderMapper.update(orders);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Websocket">Websocket</h2><h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h3><h4 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WebSocket Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;send()&quot;</span>&gt;</span>å‘é€æ¶ˆæ¯<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;closeWebSocket()&quot;</span>&gt;</span>å…³é—­è¿æ¥<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> websocket = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> clientId = <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substr</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebSocket</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(<span class="string">&#x27;WebSocket&#x27;</span> <span class="keyword">in</span> <span class="variable language_">window</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//è¿æ¥WebSocketèŠ‚ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºå¯¹è±¡ä¹‹åä¼šè‡ªåŠ¨å‘é€è¯·æ±‚å»ºç«‹è¿æ¥</span></span></span><br><span class="line"><span class="language-javascript">        websocket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://localhost:8080/ws/&quot;</span>+clientId);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;Not support websocket&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//è¿æ¥å‘ç”Ÿé”™è¯¯çš„å›è°ƒæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    websocket.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setMessageInnerHTML</span>(<span class="string">&quot;error&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//è¿æ¥æˆåŠŸå»ºç«‹çš„å›è°ƒæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    websocket.<span class="property">onopen</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setMessageInnerHTML</span>(<span class="string">&quot;è¿æ¥æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//æ¥æ”¶åˆ°æ¶ˆæ¯çš„å›è°ƒæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    websocket.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setMessageInnerHTML</span>(event.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//è¿æ¥å…³é—­çš„å›è°ƒæ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    websocket.<span class="property">onclose</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setMessageInnerHTML</span>(<span class="string">&quot;close&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//ç›‘å¬çª—å£å…³é—­äº‹ä»¶ï¼Œå½“çª—å£å…³é—­æ—¶ï¼Œä¸»åŠ¨å»å…³é—­websocketè¿æ¥ï¼Œé˜²æ­¢è¿æ¥è¿˜æ²¡æ–­å¼€å°±å…³é—­çª—å£ï¼Œserverç«¯ä¼šæŠ›å¼‚å¸¸ã€‚</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onbeforeunload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        websocket.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//å°†æ¶ˆæ¯æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Š</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">setMessageInnerHTML</span>(<span class="params">innerHTML</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;message&#x27;</span>).<span class="property">innerHTML</span> += innerHTML + <span class="string">&#x27;&lt;br/&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//å‘é€æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">send</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> message = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;text&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">        websocket.<span class="title function_">send</span>(message);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//å…³é—­è¿æ¥</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">closeWebSocket</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        websocket.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h4><p>å¤„ç†è¯·æ±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ServerEndpoint(&quot;/ws/&#123;sid&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketServer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜æ”¾ä¼šè¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Session&gt; sessionMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥å»ºç«‹æˆåŠŸè°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnOpen</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onOpen</span><span class="params">(Session session, <span class="meta">@PathParam(&quot;sid&quot;)</span> String sid)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å®¢æˆ·ç«¯ï¼š&quot;</span> + sid + <span class="string">&quot;å»ºç«‹è¿æ¥&quot;</span>);</span><br><span class="line">        sessionMap.put(sid, session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯åè°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnMessage</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message, <span class="meta">@PathParam(&quot;sid&quot;)</span> String sid)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯ï¼š&quot;</span> + sid + <span class="string">&quot;çš„ä¿¡æ¯:&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿æ¥å…³é—­è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sid</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@OnClose</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClose</span><span class="params">(<span class="meta">@PathParam(&quot;sid&quot;)</span> String sid)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥æ–­å¼€:&quot;</span> + sid);</span><br><span class="line">        sessionMap.remove(sid);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¾¤å‘</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendToAllClient</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        Collection&lt;Session&gt; sessions = sessionMap.values();</span><br><span class="line">        <span class="keyword">for</span> (Session session : sessions) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</span></span><br><span class="line">                session.getBasicRemote().sendText(message);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åº”ç”¨">é¡¹ç›®åº”ç”¨</h3><h4 id="æ¥å•æé†’">æ¥å•æé†’</h4><h5 id="controller">controller</h5><ul><li>æ”¯ä»˜æˆåŠŸäº†<ul><li>å› ä¸ºæ˜¯å¦æ”¯ä»˜æˆåŠŸæ˜¯ç”¨æˆ·å…ˆçŸ¥é“çš„ï¼Œæ‰€ä»¥ç”±ç”¨æˆ·é€šçŸ¥æœåŠ¡ç«¯æ”¯ä»˜æˆåŠŸäº†</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¯ä»˜å›è°ƒç›¸å…³æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/notify&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayNotifyController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WeChatProperties weChatProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¯ä»˜æˆåŠŸå›è°ƒ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/paySuccess&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paySuccessNotify</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//è¯»å–æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> readData(request);</span><br><span class="line">        log.info(<span class="string">&quot;æ”¯ä»˜æˆåŠŸå›è°ƒï¼š&#123;&#125;&quot;</span>, body);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ•°æ®è§£å¯†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">plainText</span> <span class="operator">=</span> decryptData(body);</span><br><span class="line">        log.info(<span class="string">&quot;è§£å¯†åçš„æ–‡æœ¬ï¼š&#123;&#125;&quot;</span>, plainText);</span><br><span class="line"></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(plainText);</span><br><span class="line">        <span class="type">String</span> <span class="variable">outTradeNo</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;out_trade_no&quot;</span>);<span class="comment">//å•†æˆ·å¹³å°è®¢å•å·</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">transactionId</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;transaction_id&quot;</span>);<span class="comment">//å¾®ä¿¡æ”¯ä»˜äº¤æ˜“å·</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;å•†æˆ·å¹³å°è®¢å•å·ï¼š&#123;&#125;&quot;</span>, outTradeNo);</span><br><span class="line">        log.info(<span class="string">&quot;å¾®ä¿¡æ”¯ä»˜äº¤æ˜“å·ï¼š&#123;&#125;&quot;</span>, transactionId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸šåŠ¡å¤„ç†ï¼Œä¿®æ”¹è®¢å•çŠ¶æ€ã€æ¥å•æé†’</span></span><br><span class="line">        orderService.paySuccess(outTradeNo);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»™å¾®ä¿¡å“åº”</span></span><br><span class="line">        responseToWeixin(response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯»å–æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">readData</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> request.getReader();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (result.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                result.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            result.append(line);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®è§£å¯†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> body</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">decryptData</span><span class="params">(String body)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">resultObject</span> <span class="operator">=</span> JSON.parseObject(body);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">resource</span> <span class="operator">=</span> resultObject.getJSONObject(<span class="string">&quot;resource&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">ciphertext</span> <span class="operator">=</span> resource.getString(<span class="string">&quot;ciphertext&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">nonce</span> <span class="operator">=</span> resource.getString(<span class="string">&quot;nonce&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">associatedData</span> <span class="operator">=</span> resource.getString(<span class="string">&quot;associated_data&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">AesUtil</span> <span class="variable">aesUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AesUtil</span>(weChatProperties.getApiV3Key().getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="comment">//å¯†æ–‡è§£å¯†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">plainText</span> <span class="operator">=</span> aesUtil.decryptToString(associatedData.getBytes(StandardCharsets.UTF_8),</span><br><span class="line">                nonce.getBytes(StandardCharsets.UTF_8),</span><br><span class="line">                ciphertext);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> plainText;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»™å¾®ä¿¡å“åº”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">responseToWeixin</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        response.setStatus(<span class="number">200</span>);</span><br><span class="line">        HashMap&lt;Object, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;SUCCESS&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;SUCCESS&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-type&quot;</span>, ContentType.APPLICATION_JSON.toString());</span><br><span class="line">        response.getOutputStream().write(JSONUtils.toJSONString(map).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        response.flushBuffer();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="service">service</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¯ä»˜æˆåŠŸï¼Œä¿®æ”¹è®¢å•çŠ¶æ€</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> outTradeNo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paySuccess</span><span class="params">(String outTradeNo)</span> &#123;</span><br><span class="line">    <span class="comment">// å½“å‰ç™»å½•ç”¨æˆ·id</span></span><br><span class="line">    <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®è®¢å•å·æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è®¢å•</span></span><br><span class="line">    <span class="type">Orders</span> <span class="variable">ordersDB</span> <span class="operator">=</span> orderMapper.getByNumberAndUserId(outTradeNo, userId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®è®¢å•idæ›´æ–°è®¢å•çš„çŠ¶æ€ã€æ”¯ä»˜æ–¹å¼ã€æ”¯ä»˜çŠ¶æ€ã€ç»“è´¦æ—¶é—´</span></span><br><span class="line">    <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> Orders.builder()</span><br><span class="line">            .id(ordersDB.getId())</span><br><span class="line">            .status(Orders.TO_BE_CONFIRMED)</span><br><span class="line">            .payStatus(Orders.PAID)</span><br><span class="line">            .checkoutTime(LocalDateTime.now())</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    orderMapper.update(orders);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡websocketå‘å®¢æˆ·ç«¯æµè§ˆå™¨æ¨é€æ¶ˆæ¯ type orderId content</span></span><br><span class="line">    <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">    map.put(<span class="string">&quot;type&quot;</span>,<span class="number">1</span>); <span class="comment">// 1è¡¨ç¤ºæ¥å•æé†’ 2è¡¨ç¤ºå®¢æˆ·å‚¬å•</span></span><br><span class="line">    map.put(<span class="string">&quot;orderId&quot;</span>,ordersDB.getId());</span><br><span class="line">    map.put(<span class="string">&quot;content&quot;</span>,<span class="string">&quot;è®¢å•å·ï¼š&quot;</span> + outTradeNo);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(map);</span><br><span class="line">    webSocketServer.sendToAllClient(json);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·å‚¬å•">å®¢æˆ·å‚¬å•</h4><p>æ¥å£è®¾è®¡</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231022094555154.png" alt="image-20231022094555154"></p><h2 id="Apache-POI">Apache POI</h2><h3 id="ä»‹ç»-2">ä»‹ç»</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231016160009430.png" alt="image-20231016160009430"></p><h3 id="å…¥é—¨æ¡ˆä¾‹">å…¥é—¨æ¡ˆä¾‹</h3><p>maven</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231016161533663.png" alt="image-20231016161533663"></p><h4 id="å°†æ•°æ®å†™å…¥excel">å°†æ•°æ®å†™å…¥excel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">//åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªExcelæ–‡ä»¶</span></span><br><span class="line">    <span class="type">XSSFWorkbook</span> <span class="variable">excel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>();</span><br><span class="line">    <span class="comment">//åœ¨Excelæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªSheeté¡µ</span></span><br><span class="line">    <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> excel.createSheet(<span class="string">&quot;info&quot;</span>);</span><br><span class="line">    <span class="comment">//åœ¨Sheetä¸­åˆ›å»ºè¡Œå¯¹è±¡,rownumç¼–å·ä»0å¼€å§‹</span></span><br><span class="line">    <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºå•å…ƒæ ¼å¹¶ä¸”å†™å…¥æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„1ä»£è¡¨ç¬¬äºŒè¡Œï¼Œ</span></span><br><span class="line">    row.createCell(<span class="number">1</span>).setCellValue(<span class="string">&quot;å§“å&quot;</span>);</span><br><span class="line">    row.createCell(<span class="number">2</span>).setCellValue(<span class="string">&quot;åŸå¸‚&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°è¡Œ</span></span><br><span class="line">    row = sheet.createRow(<span class="number">2</span>);</span><br><span class="line">    row.createCell(<span class="number">1</span>).setCellValue(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    row.createCell(<span class="number">2</span>).setCellValue(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">    row = sheet.createRow(<span class="number">3</span>);</span><br><span class="line">    row.createCell(<span class="number">1</span>).setCellValue(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">    row.createCell(<span class="number">2</span>).setCellValue(<span class="string">&quot;å—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡è¾“å‡ºæµå°†å†…å­˜ä¸­çš„Excelæ–‡ä»¶å†™å…¥åˆ°ç£ç›˜</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\info.xlsx&quot;</span>));</span><br><span class="line">    excel.write(out);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">    out.close();</span><br><span class="line">    excel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä»exceclè¯»å‡ºæ•°æ®">ä»exceclè¯»å‡ºæ•°æ®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡POIè¯»å–Excelæ–‡ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\info.xlsx&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»å–ç£ç›˜ä¸Šå·²ç»å­˜åœ¨çš„Excelæ–‡ä»¶</span></span><br><span class="line">    <span class="type">XSSFWorkbook</span> <span class="variable">excel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(in);</span><br><span class="line">    <span class="comment">//è¯»å–Excelæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªSheeté¡µ</span></span><br><span class="line">    <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> excel.getSheetAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–Sheetä¸­æœ€åä¸€è¡Œçš„è¡Œå·</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">lastRowNum</span> <span class="operator">=</span> sheet.getLastRowNum();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= lastRowNum ; i++) &#123;</span><br><span class="line">        <span class="comment">//è·å¾—æŸä¸€è¡Œ</span></span><br><span class="line">        <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(i);</span><br><span class="line">        <span class="comment">//è·å¾—å•å…ƒæ ¼å¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cellValue1</span> <span class="operator">=</span> row.getCell(<span class="number">1</span>).getStringCellValue();</span><br><span class="line">        <span class="type">String</span> <span class="variable">cellValue2</span> <span class="operator">=</span> row.getCell(<span class="number">2</span>).getStringCellValue();</span><br><span class="line">        System.out.println(cellValue1 + <span class="string">&quot; &quot;</span> + cellValue2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">    in.close();</span><br><span class="line">    excel.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åº”ç”¨-2">é¡¹ç›®åº”ç”¨</h3><h4 id="controller-2">controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¼å‡ºè¿è¥æ•°æ®æŠ¥è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;å¯¼å‡ºè¿è¥æ•°æ®æŠ¥è¡¨&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">export</span><span class="params">(HttpServletResponse response)</span>&#123;</span><br><span class="line">    reportService.exportBusinessData(response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="service-2">service</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¼å‡ºè¿è¥æ•°æ®æŠ¥è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportBusinessData</span><span class="params">(HttpServletResponse response)</span> &#123;</span><br><span class="line">    <span class="comment">//1. æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–è¥ä¸šæ•°æ®---æŸ¥è¯¢æœ€è¿‘30å¤©çš„è¿è¥æ•°æ®</span></span><br><span class="line">    <span class="type">LocalDate</span> <span class="variable">dateBegin</span> <span class="operator">=</span> LocalDate.now().minusDays(<span class="number">30</span>);</span><br><span class="line">    <span class="type">LocalDate</span> <span class="variable">dateEnd</span> <span class="operator">=</span> LocalDate.now().minusDays(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ¦‚è§ˆæ•°æ®</span></span><br><span class="line">    <span class="type">BusinessDataVO</span> <span class="variable">businessDataVO</span> <span class="operator">=</span> workspaceService.getBusinessData(LocalDateTime.of(dateBegin, LocalTime.MIN), LocalDateTime.of(dateEnd, LocalTime.MAX));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. é€šè¿‡POIå°†æ•°æ®å†™å…¥åˆ°Excelæ–‡ä»¶ä¸­</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;template/è¿è¥æ•°æ®æŠ¥è¡¨æ¨¡æ¿.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//åŸºäºæ¨¡æ¿æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„Excelæ–‡ä»¶</span></span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">excel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–è¡¨æ ¼æ–‡ä»¶çš„Sheeté¡µ</span></span><br><span class="line">        <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> excel.getSheet(<span class="string">&quot;Sheet1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¡«å……æ•°æ®--æ—¶é—´</span></span><br><span class="line">        sheet.getRow(<span class="number">1</span>).getCell(<span class="number">1</span>).setCellValue(<span class="string">&quot;æ—¶é—´ï¼š&quot;</span> + dateBegin + <span class="string">&quot;è‡³&quot;</span> + dateEnd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å¾—ç¬¬4è¡Œ</span></span><br><span class="line">        <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(<span class="number">3</span>);</span><br><span class="line">        row.getCell(<span class="number">2</span>).setCellValue(businessDataVO.getTurnover());</span><br><span class="line">        row.getCell(<span class="number">4</span>).setCellValue(businessDataVO.getOrderCompletionRate());</span><br><span class="line">        row.getCell(<span class="number">6</span>).setCellValue(businessDataVO.getNewUsers());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å¾—ç¬¬5è¡Œ</span></span><br><span class="line">        row = sheet.getRow(<span class="number">4</span>);</span><br><span class="line">        row.getCell(<span class="number">2</span>).setCellValue(businessDataVO.getValidOrderCount());</span><br><span class="line">        row.getCell(<span class="number">4</span>).setCellValue(businessDataVO.getUnitPrice());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¡«å……æ˜ç»†æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> dateBegin.plusDays(i);</span><br><span class="line">            <span class="comment">//æŸ¥è¯¢æŸä¸€å¤©çš„è¥ä¸šæ•°æ®</span></span><br><span class="line">            <span class="type">BusinessDataVO</span> <span class="variable">businessData</span> <span class="operator">=</span> workspaceService.getBusinessData(LocalDateTime.of(date, LocalTime.MIN), LocalDateTime.of(date, LocalTime.MAX));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å¾—æŸä¸€è¡Œ</span></span><br><span class="line">            row = sheet.getRow(<span class="number">7</span> + i);</span><br><span class="line">            row.getCell(<span class="number">1</span>).setCellValue(date.toString());</span><br><span class="line">            row.getCell(<span class="number">2</span>).setCellValue(businessData.getTurnover());</span><br><span class="line">            row.getCell(<span class="number">3</span>).setCellValue(businessData.getValidOrderCount());</span><br><span class="line">            row.getCell(<span class="number">4</span>).setCellValue(businessData.getOrderCompletionRate());</span><br><span class="line">            row.getCell(<span class="number">5</span>).setCellValue(businessData.getUnitPrice());</span><br><span class="line">            row.getCell(<span class="number">6</span>).setCellValue(businessData.getNewUsers());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. é€šè¿‡è¾“å‡ºæµå°†Excelæ–‡ä»¶ä¸‹è½½åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        excel.write(out);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">        out.close();</span><br><span class="line">        excel.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231021094851446.png" alt="image-20231021094851446"></p><h2 id="Apache-ECahrts">Apache ECahrts</h2><h3 id="ä»‹ç»-3">ä»‹ç»</h3><p>æ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€æºJavaScriptå›¾è¡¨åº“ï¼Œç”¨äºåœ¨Webåº”ç”¨ç¨‹åºä¸­åˆ›å»ºäº¤äº’å¼ã€åŠ¨æ€å’Œç¾è§‚çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨</p><h3 id="å…¥é—¨æ¡ˆä¾‹-2">å…¥é—¨æ¡ˆä¾‹</h3><p>åœ¨ç»˜å›¾ä¹‹å‰å‡†å¤‡ä¸€ä¸ªå®šä¹‰äº†å®½é«˜çš„DOMå®¹å™¨</p><p>ç”¨<code>document.getElementById('main')</code>è·å–åˆ°çš„å…ƒç´ åˆå§‹åŒ–echartså¯¹è±¡</p><ul><li>å®šä¹‰ä¸€ä¸ªoptionå¯¹è±¡ï¼Œè®¾ç½®å…¶ä¸­çš„ä¸€äº›å±æ€§</li></ul><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231020200506545.png" alt="image-20231020200506545"></p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231020201025297.png" alt="image-20231020201025297"></p><h2 id="è¥ä¸šé¢ç»Ÿè®¡">è¥ä¸šé¢ç»Ÿè®¡</h2><h3 id="controller-3">controller</h3><p>ä»paramsä¸­æå–å‡ºä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¼€å§‹æ—¶é—´ä¸€ä¸ªç»“æŸæ—¶é—´</p><p>ç»Ÿè®¡è¿™æ®µæ—¶é—´é‡Œçš„æ¯ä¸€å¤©çš„è®¢å•æ•°é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/turnoverStatistics&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;è¥ä¸šé¢ç»Ÿè®¡&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;TurnoverReportVO&gt; <span class="title function_">turnoverStatistics</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span>  LocalDate begin,</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;è¥ä¸šé¢æ•°æ®ç»Ÿè®¡ï¼š&#123;&#125;,&#123;&#125;&quot;</span>,begin,end);</span><br><span class="line">    <span class="keyword">return</span> Result.success(reportService.getTurnoverStatistics(begin,end));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-3">service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡æŒ‡å®šæ—¶é—´åŒºé—´å†…çš„è¥ä¸šé¢æ•°æ®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> TurnoverReportVO <span class="title function_">getTurnoverStatistics</span><span class="params">(LocalDate begin, LocalDate end)</span> &#123;</span><br><span class="line">    <span class="comment">//å½“å‰é›†åˆç”¨äºå­˜æ”¾ä»beginåˆ°endèŒƒå›´å†…çš„æ¯å¤©çš„æ—¥æœŸ</span></span><br><span class="line">    List&lt;LocalDate&gt; dateList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    dateList.add(begin);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!begin.equals(end)) &#123;</span><br><span class="line">        <span class="comment">//æ—¥æœŸè®¡ç®—ï¼Œè®¡ç®—æŒ‡å®šæ—¥æœŸçš„åä¸€å¤©å¯¹åº”çš„æ—¥æœŸ</span></span><br><span class="line">        begin = begin.plusDays(<span class="number">1</span>);</span><br><span class="line">        dateList.add(begin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜æ”¾æ¯å¤©çš„è¥ä¸šé¢</span></span><br><span class="line">    List&lt;Double&gt; turnoverList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (LocalDate date : dateList) &#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢dateæ—¥æœŸå¯¹åº”çš„è¥ä¸šé¢æ•°æ®ï¼Œè¥ä¸šé¢æ˜¯æŒ‡ï¼šçŠ¶æ€ä¸ºâ€œå·²å®Œæˆâ€çš„è®¢å•é‡‘é¢åˆè®¡</span></span><br><span class="line">        <span class="comment">//è¿™é‡Œçš„ofç”¨äºæ‹¼æ¥æ—¶é—´ï¼Œå°†ä¹‹å‰å…·ä½“åˆ°å¤©çš„æ—¶é—´åå†è·Ÿä¸Šæ—¶åˆ†ç§’</span></span><br><span class="line">        <span class="comment">//LocalTime.MINä»£è¡¨çš„å°±æ˜¯ï¼ˆ00:00:00ï¼‰</span></span><br><span class="line">        <span class="comment">//LocalTime.MAXä»£è¡¨çš„æ˜¯ 23:59:59.999999999ï¼ˆçº³ç§’ï¼‰</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">beginTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MIN);</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">endTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MAX);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°†å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€å½“å¤©çš„è¥ä¸šé¢ä¸‰ä¸ªæ•°æ®å°è£…åˆ°mapä¸­</span></span><br><span class="line">        <span class="comment">// select sum(amount) from orders where order_time &gt; beginTime and order_time &lt; endTime and status = 5</span></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;begin&quot;</span>, beginTime);</span><br><span class="line">        map.put(<span class="string">&quot;end&quot;</span>, endTime);</span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.COMPLETED);</span><br><span class="line">        <span class="comment">//è¿™é‡Œå°†ä¸‰é¡¹æ•°æ®éƒ½ä¼ åˆ°mapperå±‚ä¸­</span></span><br><span class="line">        <span class="type">Double</span> <span class="variable">turnover</span> <span class="operator">=</span> orderMapper.sumByMap(map);</span><br><span class="line">        <span class="comment">//ç¡®ä¿SQLè¯­å¥æŸ¥è¯¢å¤±è´¥é€ æˆçš„turnoverä¸ºnullï¼Œæ‰€ä»¥è¿™é‡Œåˆ¤æ–­ä¸€ä¸‹</span></span><br><span class="line">        turnover = turnover == <span class="literal">null</span> ? <span class="number">0.0</span> : turnover;</span><br><span class="line">        <span class="comment">//è¿™æ˜¯å­˜å‚¨è¥ä¸šé¢çš„List</span></span><br><span class="line">        turnoverList.add(turnover);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> TurnoverReportVO</span><br><span class="line">            .builder()</span><br><span class="line">            .dateList(StringUtils.join(dateList, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .turnoverList(StringUtils.join(turnoverList, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper">mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ç»Ÿè®¡ä¸€å®šæ—¶é—´å†…çš„è®¢å•æ€»é‡ï¼Œè¿”å›Doubleå‹æ•°æ®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;sumByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Double&quot;</span>&gt;</span></span><br><span class="line">        select sum(amount) from orders</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">#         åœ¨è¿›è¡Œä¸€é‡åˆ¤æ–­ï¼Œç¡®ä¿æ•°æ®ä¸ä¸ºç©ºæ—¶åœ¨å†™åˆ°SQLä¸­</span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null&quot;</span>&gt;</span></span><br><span class="line">                and order_time <span class="symbol">&amp;gt;</span> #&#123;begin&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;end != null&quot;</span>&gt;</span></span><br><span class="line">                and order_time <span class="symbol">&amp;lt;</span> #&#123;end&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">                and status = #&#123;status&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç»Ÿè®¡">ç”¨æˆ·ç»Ÿè®¡</h2><p>ç»Ÿè®¡æ¯å¤©çš„ç”¨æˆ·æ–°å¢æ•°é‡å’Œç”¨æˆ·æ€»é‡</p><h3 id="æ¥å£è®¾è®¡">æ¥å£è®¾è®¡</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231020213356327.png" alt="image-20231020213356327"></p><h3 id="controller-4">controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç»Ÿè®¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/userStatistics&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ç”¨æˆ·ç»Ÿè®¡&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;UserReportVO&gt; <span class="title function_">userStatistics</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span>  LocalDate begin,</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;ç”¨æˆ·æ•°æ®ç»Ÿè®¡ï¼š&#123;&#125;,&#123;&#125;&quot;</span>,begin,end);</span><br><span class="line">    <span class="keyword">return</span> Result.success(reportService.getUserStatistics(begin,end));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-4">service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡æŒ‡å®šæ—¶é—´åŒºé—´å†…çš„ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> UserReportVO <span class="title function_">getUserStatistics</span><span class="params">(LocalDate begin, LocalDate end)</span> &#123;</span><br><span class="line">    <span class="comment">//å­˜æ”¾ä»beginåˆ°endä¹‹é—´çš„æ¯å¤©å¯¹åº”çš„æ—¥æœŸ</span></span><br><span class="line">    List&lt;LocalDate&gt; dateList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    dateList.add(begin);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!begin.equals(end)) &#123;</span><br><span class="line">        begin = begin.plusDays(<span class="number">1</span>);</span><br><span class="line">        dateList.add(begin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜æ”¾æ¯å¤©çš„æ–°å¢ç”¨æˆ·æ•°é‡ select count(id) from user where create_time &lt; ? and create_time &gt; ?</span></span><br><span class="line">    List&lt;Integer&gt; newUserList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//å­˜æ”¾æ¯å¤©çš„æ€»ç”¨æˆ·æ•°é‡ select count(id) from user where create_time &lt; ?</span></span><br><span class="line">    List&lt;Integer&gt; totalUserList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (LocalDate date : dateList) &#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">beginTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MIN);</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">endTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MAX);</span><br><span class="line"></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        <span class="comment">//åªè®¾ç½®ç»“æŸæ—¶é—´ï¼Œç»Ÿè®¡ï¼šæˆªæ­¢åˆ°å½“å¤©çš„æ€»ç”¨æˆ·æ•°é‡</span></span><br><span class="line">        map.put(<span class="string">&quot;end&quot;</span>, endTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ€»ç”¨æˆ·æ•°é‡</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">totalUser</span> <span class="operator">=</span> userMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;begin&quot;</span>, beginTime);</span><br><span class="line">        <span class="comment">//æ–°å¢ç”¨æˆ·æ•°é‡</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">newUser</span> <span class="operator">=</span> userMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        totalUserList.add(totalUser);</span><br><span class="line">        newUserList.add(newUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…ç»“æœæ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> UserReportVO</span><br><span class="line">            .builder()</span><br><span class="line">            .dateList(StringUtils.join(dateList, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .totalUserList(StringUtils.join(totalUserList, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .newUserList(StringUtils.join(newUserList, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper-2">mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å½“åªä¼ å…¥ç»“æŸæ—¶é—´æ—¶ï¼Œç»Ÿè®¡çš„å°±æ˜¯ï¼šæˆªæ­¢åˆ°å½“å¤©æ€»ç”¨æˆ·æ•°é‡--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å½“ä¼ å…¥å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æ—¶ï¼Œç»Ÿè®¡çš„å°±æ˜¯ï¼šå½“å¤©çš„æ–°å¢ç”¨æˆ·æ•°é‡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;countByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">        select count(id) from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null&quot;</span>&gt;</span></span><br><span class="line">                and create_time <span class="symbol">&amp;gt;</span> #&#123;begin&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;end != null&quot;</span>&gt;</span></span><br><span class="line">                and create_time <span class="symbol">&amp;lt;</span> #&#123;end&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è®¢å•ç»Ÿè®¡">è®¢å•ç»Ÿè®¡</h2><h3 id="controller-5">controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¢å•ç»Ÿè®¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/ordersStatistics&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;è®¢å•ç»Ÿè®¡&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;OrderReportVO&gt; <span class="title function_">ordersStatistics</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span>  LocalDate begin,</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;è®¢å•æ•°æ®ç»Ÿè®¡ï¼š&#123;&#125;,&#123;&#125;&quot;</span>,begin,end);</span><br><span class="line">    <span class="keyword">return</span> Result.success(reportService.getOrderStatistics(begin,end));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-5">service</h3><ul><li><code>stream()</code> æ–¹æ³•å°†è¿™ä¸ªåˆ—è¡¨è½¬æ¢æˆä¸€ä¸ªæµï¼ˆStreamï¼‰ï¼Œè¿™å…è®¸ä½ å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œå„ç§æ“ä½œã€‚</li><li><code>reduce</code> æ“ä½œæ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒç”¨æ¥å°†æµä¸­çš„å…ƒç´ è¿›è¡Œå½’çº¦æ“ä½œï¼Œæœ¬ä¾‹ä¸­æ˜¯æ±‚å’Œæ“ä½œã€‚</li><li><code>Integer::sum</code> æ˜¯ä¸€ä¸ªäºŒå…ƒæ“ä½œï¼Œè¡¨ç¤ºå°†ä¸¤ä¸ªæ•´æ•°ç›¸åŠ <ul><li>ä¸ªæ“ä½œä¼šè¢«åº”ç”¨åˆ°æµä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä»å·¦åˆ°å³è¿›è¡Œç´¯ç§¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ æœ€ç»ˆå¾—åˆ°äº†è¿™äº›æ•´æ•°çš„æ€»å’Œã€‚</li></ul></li><li><code>get()</code> æ–¹æ³•ç”¨äºè·å–ç»ˆç«¯æ“ä½œçš„ç»“æœã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒä¼šè¿”å›æ•´æ•°åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œä½œä¸ºç»“æœã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡æŒ‡å®šæ—¶é—´åŒºé—´å†…çš„è®¢å•æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> OrderReportVO <span class="title function_">getOrderStatistics</span><span class="params">(LocalDate begin, LocalDate end)</span> &#123;</span><br><span class="line">    <span class="comment">//å­˜æ”¾ä»beginåˆ°endä¹‹é—´çš„æ¯å¤©å¯¹åº”çš„æ—¥æœŸ</span></span><br><span class="line">    List&lt;LocalDate&gt; dateList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    dateList.add(begin);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!begin.equals(end)) &#123;</span><br><span class="line">        begin = begin.plusDays(<span class="number">1</span>);</span><br><span class="line">        dateList.add(begin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜æ”¾æ¯å¤©çš„è®¢å•æ€»æ•°</span></span><br><span class="line">    List&lt;Integer&gt; orderCountList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//å­˜æ”¾æ¯å¤©çš„æœ‰æ•ˆè®¢å•æ•°</span></span><br><span class="line">    List&lt;Integer&gt; validOrderCountList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éå†dateListé›†åˆï¼ŒæŸ¥è¯¢æ¯å¤©çš„æœ‰æ•ˆè®¢å•æ•°å’Œè®¢å•æ€»æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (LocalDate date : dateList) &#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ¯å¤©çš„è®¢å•æ€»æ•° select count(id) from orders where order_time &gt; ? and order_time &lt; ?</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">beginTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MIN);</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">endTime</span> <span class="operator">=</span> LocalDateTime.of(date, LocalTime.MAX);</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ¯å¤©çš„è®¢å•æ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">orderCount</span> <span class="operator">=</span> getOrderCount(beginTime, endTime, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ¯å¤©çš„æœ‰æ•ˆè®¢å•æ•° select count(id) from orders where order_time &gt; ? and order_time &lt; ? and status = 5</span></span><br><span class="line">        <span class="comment">//æ¡ä»¶åŠ ä¸€ä¸ªstatus = 5æ¥æŸ¥è¯¢å®Œæˆçš„è®¢å•</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">validOrderCount</span> <span class="operator">=</span> getOrderCount(beginTime, endTime, Orders.COMPLETED);</span><br><span class="line"></span><br><span class="line">        orderCountList.add(orderCount);</span><br><span class="line">        validOrderCountList.add(validOrderCount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—æ—¶é—´åŒºé—´å†…çš„è®¢å•æ€»æ•°é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">totalOrderCount</span> <span class="operator">=</span> orderCountList.stream().reduce(Integer::sum).get();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—æ—¶é—´åŒºé—´å†…çš„æœ‰æ•ˆè®¢å•æ•°é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">validOrderCount</span> <span class="operator">=</span> validOrderCountList.stream().reduce(Integer::sum).get();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å®Œæˆç‡</span></span><br><span class="line">    <span class="type">Double</span> <span class="variable">orderCompletionRate</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(totalOrderCount != <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//è®¡ç®—è®¢å•å®Œæˆç‡</span></span><br><span class="line">        orderCompletionRate = validOrderCount.doubleValue() / totalOrderCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  OrderReportVO.builder()</span><br><span class="line">            .dateList(StringUtils.join(dateList,<span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .orderCountList(StringUtils.join(orderCountList,<span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .validOrderCountList(StringUtils.join(validOrderCountList,<span class="string">&quot;,&quot;</span>))</span><br><span class="line">            .totalOrderCount(totalOrderCount)</span><br><span class="line">            .validOrderCount(validOrderCount)</span><br><span class="line">            .orderCompletionRate(orderCompletionRate)</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®æ¡ä»¶ç»Ÿè®¡è®¢å•æ•°é‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Integer <span class="title function_">getOrderCount</span><span class="params">(LocalDateTime begin, LocalDateTime end, Integer status)</span>&#123;</span><br><span class="line">    <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">    map.put(<span class="string">&quot;begin&quot;</span>,begin);</span><br><span class="line">    map.put(<span class="string">&quot;end&quot;</span>,end);</span><br><span class="line">    map.put(<span class="string">&quot;status&quot;</span>,status);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> orderMapper.countByMap(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper-3">mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;countByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">    select count(id) from orders</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null&quot;</span>&gt;</span></span><br><span class="line">            and order_time <span class="symbol">&amp;gt;</span> #&#123;begin&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;end != null&quot;</span>&gt;</span></span><br><span class="line">            and order_time <span class="symbol">&amp;lt;</span> #&#123;end&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">            and status = #&#123;status&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é”€é‡æ’å">é”€é‡æ’å</h2><h3 id="controller-6">controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é”€é‡æ’åtop10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/top10&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;é”€é‡æ’åtop10&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;SalesTop10ReportVO&gt; <span class="title function_">top10</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span>  LocalDate begin,</span></span><br><span class="line"><span class="params">        <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span> LocalDate end)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;é”€é‡æ’åtop10ï¼š&#123;&#125;,&#123;&#125;&quot;</span>,begin,end);</span><br><span class="line">    <span class="keyword">return</span> Result.success(reportService.getSalesTop10(begin,end));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-6">service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡æŒ‡å®šæ—¶é—´åŒºé—´å†…çš„é”€é‡æ’åå‰10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> SalesTop10ReportVO <span class="title function_">getSalesTop10</span><span class="params">(LocalDate begin, LocalDate end)</span> &#123;</span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">beginTime</span> <span class="operator">=</span> LocalDateTime.of(begin, LocalTime.MIN);</span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">endTime</span> <span class="operator">=</span> LocalDateTime.of(end, LocalTime.MAX);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢é”€é‡å‰10çš„èœå“åå’Œé”€é‡</span></span><br><span class="line">    List&lt;GoodsSalesDTO&gt; salesTop10 = orderMapper.getSalesTop10(beginTime, endTime);</span><br><span class="line">    <span class="comment">//è½¬åŒ–æˆæµ  æ˜ å°„å‡ºnameå±æ€§  æ”¶é›†åˆ°Listä¸­</span></span><br><span class="line">    List&lt;String&gt; names = salesTop10.stream().map(GoodsSalesDTO::getName).collect(Collectors.toList());</span><br><span class="line">    <span class="type">String</span> <span class="variable">nameList</span> <span class="operator">=</span> StringUtils.join(names, <span class="string">&quot;,&quot;</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Integer&gt; numbers = salesTop10.stream().map(GoodsSalesDTO::getNumber).collect(Collectors.toList());</span><br><span class="line">    <span class="type">String</span> <span class="variable">numberList</span> <span class="operator">=</span> StringUtils.join(numbers, <span class="string">&quot;,&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…è¿”å›ç»“æœæ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> SalesTop10ReportVO</span><br><span class="line">            .builder()</span><br><span class="line">            .nameList(nameList)</span><br><span class="line">            .numberList(numberList)</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper-4">mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  GoodsSalesDTO æœ‰ä¸¤ä¸ªå±æ€§ï¼Œnameå’Œnumber--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getSalesTop10&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.dto.GoodsSalesDTO&quot;</span>&gt;</span></span><br><span class="line">        select od.name, sum(od.number) number</span><br><span class="line">        from order_detail od,orders o</span><br><span class="line">        where od.order_id = o.id and o.status = 5</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null&quot;</span>&gt;</span></span><br><span class="line">            and o.order_time <span class="symbol">&amp;gt;</span> #&#123;begin&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;end != null&quot;</span>&gt;</span></span><br><span class="line">            and o.order_time <span class="symbol">&amp;lt;</span> #&#123;end&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        group by od.name</span><br><span class="line">        order by number desc</span><br><span class="line">        limit 0,10</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å·¥ä½œå°">å·¥ä½œå°</h2><h3 id="éœ€æ±‚åˆ†æ">éœ€æ±‚åˆ†æ</h3><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231021094921001.png" alt="image-20231021094921001"></p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231021100030641.png" alt="image-20231021100030641"></p><p>æ¦‚è§ˆ</p><p><img src="../assets/image/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0_Image/image-20231021095330450.png" alt="image-20231021095330450"></p><h3 id="controller-7">controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/workspace&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;å·¥ä½œå°ç›¸å…³æ¥å£&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkSpaceController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WorkspaceService workspaceService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥ä½œå°ä»Šæ—¥æ•°æ®æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/businessData&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;å·¥ä½œå°ä»Šæ—¥æ•°æ®æŸ¥è¯¢&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;BusinessDataVO&gt; <span class="title function_">businessData</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—å½“å¤©çš„å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">begin</span> <span class="operator">=</span> LocalDateTime.now().with(LocalTime.MIN);</span><br><span class="line">        <span class="comment">//è·å¾—å½“å¤©çš„ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">end</span> <span class="operator">=</span> LocalDateTime.now().with(LocalTime.MAX);</span><br><span class="line"></span><br><span class="line">        <span class="type">BusinessDataVO</span> <span class="variable">businessDataVO</span> <span class="operator">=</span> workspaceService.getBusinessData(begin, end);</span><br><span class="line">        <span class="keyword">return</span> Result.success(businessDataVO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢è®¢å•ç®¡ç†æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/overviewOrders&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æŸ¥è¯¢è®¢å•ç®¡ç†æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;OrderOverViewVO&gt; <span class="title function_">orderOverView</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(workspaceService.getOrderOverView());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢èœå“æ€»è§ˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/overviewDishes&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æŸ¥è¯¢èœå“æ€»è§ˆ&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;DishOverViewVO&gt; <span class="title function_">dishOverView</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(workspaceService.getDishOverView());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å¥—é¤æ€»è§ˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/overviewSetmeals&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æŸ¥è¯¢å¥—é¤æ€»è§ˆ&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;SetmealOverViewVO&gt; <span class="title function_">setmealOverView</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(workspaceService.getSetmealOverView());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-7">service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkspaceServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">WorkspaceService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishMapper dishMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SetmealMapper setmealMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®æ—¶é—´æ®µç»Ÿè®¡è¥ä¸šæ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> begin</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> BusinessDataVO <span class="title function_">getBusinessData</span><span class="params">(LocalDateTime begin, LocalDateTime end)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¥ä¸šé¢ï¼šå½“æ—¥å·²å®Œæˆè®¢å•çš„æ€»é‡‘é¢</span></span><br><span class="line"><span class="comment">         * æœ‰æ•ˆè®¢å•ï¼šå½“æ—¥å·²å®Œæˆè®¢å•çš„æ•°é‡</span></span><br><span class="line"><span class="comment">         * è®¢å•å®Œæˆç‡ï¼šæœ‰æ•ˆè®¢å•æ•° / æ€»è®¢å•æ•°</span></span><br><span class="line"><span class="comment">         * å¹³å‡å®¢å•ä»·ï¼šè¥ä¸šé¢ / æœ‰æ•ˆè®¢å•æ•°</span></span><br><span class="line"><span class="comment">         * æ–°å¢ç”¨æˆ·ï¼šå½“æ—¥æ–°å¢ç”¨æˆ·çš„æ•°é‡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;begin&quot;</span>,begin);</span><br><span class="line">        map.put(<span class="string">&quot;end&quot;</span>,end);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ€»è®¢å•æ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">totalOrderCount</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.COMPLETED);</span><br><span class="line">        <span class="comment">//è¥ä¸šé¢</span></span><br><span class="line">        <span class="type">Double</span> <span class="variable">turnover</span> <span class="operator">=</span> orderMapper.sumByMap(map);</span><br><span class="line">        turnover = turnover == <span class="literal">null</span>? <span class="number">0.0</span> : turnover;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æœ‰æ•ˆè®¢å•æ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">validOrderCount</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="type">Double</span> <span class="variable">unitPrice</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Double</span> <span class="variable">orderCompletionRate</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">if</span>(totalOrderCount != <span class="number">0</span> &amp;&amp; validOrderCount != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//è®¢å•å®Œæˆç‡</span></span><br><span class="line">            orderCompletionRate = validOrderCount.doubleValue() / totalOrderCount;</span><br><span class="line">            <span class="comment">//å¹³å‡å®¢å•ä»·</span></span><br><span class="line">            unitPrice = turnover / validOrderCount;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ–°å¢ç”¨æˆ·æ•°</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">newUsers</span> <span class="operator">=</span> userMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> BusinessDataVO.builder()</span><br><span class="line">                .turnover(turnover)</span><br><span class="line">                .validOrderCount(validOrderCount)</span><br><span class="line">                .orderCompletionRate(orderCompletionRate)</span><br><span class="line">                .unitPrice(unitPrice)</span><br><span class="line">                .newUsers(newUsers)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢è®¢å•ç®¡ç†æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> OrderOverViewVO <span class="title function_">getOrderOverView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;begin&quot;</span>, LocalDateTime.now().with(LocalTime.MIN));</span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.TO_BE_CONFIRMED);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾…æ¥å•</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">waitingOrders</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾…æ´¾é€</span></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.CONFIRMED);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">deliveredOrders</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·²å®Œæˆ</span></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.COMPLETED);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">completedOrders</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·²å–æ¶ˆ</span></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, Orders.CANCELLED);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">cancelledOrders</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…¨éƒ¨è®¢å•</span></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">allOrders</span> <span class="operator">=</span> orderMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> OrderOverViewVO.builder()</span><br><span class="line">                .waitingOrders(waitingOrders)</span><br><span class="line">                .deliveredOrders(deliveredOrders)</span><br><span class="line">                .completedOrders(completedOrders)</span><br><span class="line">                .cancelledOrders(cancelledOrders)</span><br><span class="line">                .allOrders(allOrders)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢èœå“æ€»è§ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> DishOverViewVO <span class="title function_">getDishOverView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, StatusConstant.ENABLE);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">sold</span> <span class="operator">=</span> dishMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, StatusConstant.DISABLE);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">discontinued</span> <span class="operator">=</span> dishMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> DishOverViewVO.builder()</span><br><span class="line">                .sold(sold)</span><br><span class="line">                .discontinued(discontinued)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å¥—é¤æ€»è§ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> SetmealOverViewVO <span class="title function_">getSetmealOverView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, StatusConstant.ENABLE);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">sold</span> <span class="operator">=</span> setmealMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;status&quot;</span>, StatusConstant.DISABLE);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">discontinued</span> <span class="operator">=</span> setmealMapper.countByMap(map);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> SetmealOverViewVO.builder()</span><br><span class="line">                .sold(sold)</span><br><span class="line">                .discontinued(discontinued)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AIæ€»ç»“">AIæ€»ç»“</h2><h3 id="HTTPæœåŠ¡å¸¸è§çŠ¶æ€ç ">HTTPæœåŠ¡å¸¸è§çŠ¶æ€ç </h3><p>HTTPæœåŠ¡å¸¸ç”¨çŠ¶æ€ç ä¸»è¦åŒ…æ‹¬:</p><ul><li>200 OK - è¯·æ±‚æˆåŠŸ</li><li>301 Moved Permanently - èµ„æºæ°¸ä¹…ç§»åŠ¨</li><li>302 Found - èµ„æºä¸´æ—¶ç§»åŠ¨</li><li>304 Not Modified - èµ„æºæœªä¿®æ”¹</li><li>400 Bad Request - è¯·æ±‚è¯­æ³•é”™è¯¯</li><li>401 Unauthorized - éœ€è¦èº«ä»½è®¤è¯</li><li>403 Forbidden - æœåŠ¡å™¨æ‹’ç»è¯·æ±‚</li><li>404 Not Found - è¯·æ±‚èµ„æºä¸å­˜åœ¨</li><li>500 Internal Server Error - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li></ul><p>å…¶ä¸­:</p><ul><li>2xx è¡¨ç¤ºæˆåŠŸå¤„ç†äº†è¯·æ±‚</li><li>3xx è¡¨ç¤ºéœ€è¦è¿›è¡Œé¢å¤–æ“ä½œä»¥å®Œæˆè¯·æ±‚</li><li>4xx è¡¨ç¤ºè¯·æ±‚è‡ªèº«å­˜åœ¨é—®é¢˜</li><li>5xx è¡¨ç¤ºæœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™</li></ul><p>è¿™äº›çŠ¶æ€ç å¯ä»¥å¸®åŠ©å®¢æˆ·ç«¯åˆ¤æ–­è¯·æ±‚çš„ç»“æœ,ä»¥åŠåç»­éœ€è¦è¿›è¡Œçš„æ“ä½œã€‚å¦‚404çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨,åº”è¯¥æ£€æŸ¥è¯·æ±‚URL;500çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨ç«¯å‡ºé”™,å®¢æˆ·ç«¯å¯èƒ½éœ€è¦é‡è¯•è¯·æ±‚ã€‚æ­£ç¡®å¤„ç†çŠ¶æ€ç æ˜¯æ„å»ºå¥å£®çš„HTTPæœåŠ¡éå¸¸é‡è¦çš„ä¸€æ­¥ã€‚</p><h3 id="HTTPæœåŠ¡ä¸­å¸¸è§çš„è¯·æ±‚ç±»å‹">HTTPæœåŠ¡ä¸­å¸¸è§çš„è¯·æ±‚ç±»å‹</h3><p>HTTPï¼ˆHypertext Transfer Protocolï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åè®®ã€‚åœ¨HTTPæœåŠ¡ä¸­ï¼Œå¸¸è§çš„è¯·æ±‚ç±»å‹åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p><strong>GET</strong>ï¼šGETè¯·æ±‚ç”¨äºä»æœåŠ¡å™¨è·å–èµ„æºã€‚å®ƒæ˜¯ä¸€ç§å¹‚ç­‰è¯·æ±‚ï¼Œæ„å‘³ç€å¤šæ¬¡å‘é€ç›¸åŒçš„GETè¯·æ±‚ä¸ä¼šå¯¹æœåŠ¡å™¨çŠ¶æ€äº§ç”Ÿå½±å“ã€‚é€šå¸¸ç”¨äºè¯·æ±‚é¡µé¢ã€å›¾ç‰‡ã€æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚GETè¯·æ±‚å°†æ•°æ®é™„åŠ åœ¨URLçš„æŸ¥è¯¢å‚æ•°ä¸­ï¼Œå› æ­¤å¯è§äºURLã€‚</p></li><li><p><strong>POST</strong>ï¼šPOSTè¯·æ±‚ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºæ–°èµ„æºæˆ–æäº¤è¡¨å•æ•°æ®ã€‚POSTè¯·æ±‚å°†æ•°æ®æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨URLä¸­ï¼Œå› æ­¤é€‚ç”¨äºä¼ è¾“æ•æ„Ÿæ•°æ®ï¼Œå¦‚ç”¨æˆ·å‡­è¯æˆ–å¤§é‡æ•°æ®ã€‚</p></li><li><p><strong>PUT</strong>ï¼šPUTè¯·æ±‚ç”¨äºæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œé€šå¸¸ç”¨äºæ›´æ–°å·²ç»å­˜åœ¨çš„èµ„æºã€‚ä¸POSTä¸åŒï¼ŒPUTè¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œå¤šæ¬¡å‘é€ç›¸åŒçš„PUTè¯·æ±‚å°†äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚</p></li><li><p><strong>DELETE</strong>ï¼šDELETEè¯·æ±‚ç”¨äºåˆ é™¤æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚ä¸GETå’ŒPOSTä¸åŒï¼ŒDELETEè¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œå¤šæ¬¡å‘é€ç›¸åŒçš„DELETEè¯·æ±‚å°†äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚</p></li><li><p><strong>PATCH</strong>ï¼šPATCHè¯·æ±‚ç”¨äºå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œéƒ¨åˆ†æ›´æ–°ã€‚å®ƒç±»ä¼¼äºPUTï¼Œä½†é€šå¸¸åªæ›´æ–°èµ„æºçš„ä¸€éƒ¨åˆ†è€Œä¸æ˜¯æ•´ä¸ªèµ„æºã€‚PATCHè¯·æ±‚ä¹Ÿæ˜¯å¹‚ç­‰çš„ã€‚</p></li><li><p><strong>HEAD</strong>ï¼šHEADè¯·æ±‚ä¸GETè¯·æ±‚ç±»ä¼¼ï¼Œä½†æœåŠ¡å™¨åªè¿”å›å“åº”å¤´è€Œä¸è¿”å›å“åº”ä½“ã€‚å®ƒé€šå¸¸ç”¨äºè·å–èµ„æºçš„å…ƒæ•°æ®ï¼Œå¦‚å¤§å°æˆ–ç±»å‹ï¼Œè€Œä¸éœ€è¦å®é™…çš„å†…å®¹ã€‚</p></li><li><p><strong>OPTIONS</strong>ï¼šOPTIONSè¯·æ±‚ç”¨äºè·å–æœ‰å…³æœåŠ¡å™¨æ”¯æŒçš„é€šä¿¡é€‰é¡¹çš„ä¿¡æ¯ã€‚å®ƒé€šå¸¸ç”¨äºè·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰å’Œå…¶ä»–HTTPåè®®çš„äº¤äº’ã€‚</p></li><li><p><strong>CONNECT</strong>ï¼šCONNECTè¯·æ±‚ç”¨äºå»ºç«‹åˆ°æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥ï¼Œé€šå¸¸ç”¨äºä»£ç†æœåŠ¡å™¨ã€‚å®ƒå…è®¸å®¢æˆ·ç«¯ä¸ç›®æ ‡æœåŠ¡å™¨ä¹‹é—´å»ºç«‹éš§é“ï¼Œä»¥è¿›è¡Œå®‰å…¨é€šä¿¡ã€‚</p></li><li><p><strong>TRACE</strong>ï¼šTRACEè¯·æ±‚ç”¨äºè¯Šæ–­è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„ä¸­é—´ä»£ç†æœåŠ¡å™¨çš„æ“ä½œã€‚å®ƒé€šå¸¸ç”¨äºè°ƒè¯•å’Œæµ‹è¯•ã€‚</p></li></ol><p>è¿™äº›æ˜¯HTTPæœåŠ¡ä¸­çš„å¸¸è§è¯·æ±‚ç±»å‹ã€‚æ¯ç§è¯·æ±‚ç±»å‹éƒ½æœ‰ç‰¹å®šçš„è¯­ä¹‰å’Œç”¨é€”ï¼Œæ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„è¯·æ±‚ç±»å‹æ¥ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚</p><h3 id="æ³¨è§£-Slf4j">æ³¨è§£@Slf4j</h3><p><code>@Slf4j</code> æ˜¯ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒæ˜¯ Lombokï¼ˆä¸€ç§Javaåº“ï¼‰æä¾›çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒçš„ä½œç”¨æ˜¯è‡ªåŠ¨ä¸ºç±»æ·»åŠ ä¸€ä¸ªæ ‡å‡†çš„æ—¥å¿—å¯¹è±¡ï¼Œç”¨äºè®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œä»¥ç®€åŒ– Java ç±»ä¸­çš„æ—¥å¿—è®°å½•æ“ä½œã€‚<code>@Slf4j</code> å¯ä»¥å¤§å¹…åº¦å‡å°‘ç¼–å†™å†—é•¿çš„æ—¥å¿—è®°å½•ä»£ç çš„å·¥ä½œï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äº <code>@Slf4j</code> æ³¨è§£çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li><p><strong>å¼•å…¥ Lombok</strong>ï¼š<br>è¦ä½¿ç”¨ <code>@Slf4j</code> æ³¨è§£ï¼Œä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸­å¼•å…¥ Lombok ä¾èµ–ã€‚é€šå¸¸ï¼Œè¿™æ¶‰åŠåˆ°å°† Lombok ä¾èµ–æ·»åŠ åˆ°é¡¹ç›®çš„æ„å»ºå·¥å…·ï¼ˆä¾‹å¦‚ Maven æˆ– Gradleï¼‰é…ç½®æ–‡ä»¶ä¸­ï¼Œå¹¶ç¡®ä¿é¡¹ç›®çš„ IDE æ”¯æŒ Lombok æ’ä»¶ã€‚</p></li><li><p><strong>ç”Ÿæˆæ—¥å¿—å¯¹è±¡</strong>ï¼š<br>ä½¿ç”¨ <code>@Slf4j</code> æ³¨è§£çš„ç±»ä¼šè‡ªåŠ¨åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä¸€ä¸ªåä¸º <code>log</code> çš„æ—¥å¿—å¯¹è±¡ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ª <code>log</code> å¯¹è±¡æ¥è®°å½•æ—¥å¿—æ¶ˆæ¯ï¼Œè€Œä¸å¿…æ‰‹åŠ¨åˆ›å»ºå’Œé…ç½®æ—¥å¿—è®°å½•å™¨ã€‚</p></li><li><p><strong>æ—¥å¿—çº§åˆ«</strong>ï¼š<br><code>@Slf4j</code> è‡ªåŠ¨ç”Ÿæˆçš„æ—¥å¿—å¯¹è±¡æ”¯æŒå¤šç§æ—¥å¿—çº§åˆ«ï¼ŒåŒ…æ‹¬ DEBUGã€INFOã€WARNã€ERROR ç­‰ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº›çº§åˆ«æ¥è®°å½•ä¸åŒé‡è¦æ€§çš„æ—¥å¿—æ¶ˆæ¯ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š<br>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>@Slf4j</code> æ³¨è§£çš„ç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;Debug message&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;Informational message&quot;</span>);</span><br><span class="line">        log.warn(<span class="string">&quot;Warning message&quot;</span>);</span><br><span class="line">        log.error(<span class="string">&quot;Error message&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>@Slf4j</code> æ³¨è§£è‡ªåŠ¨ä¸º <code>MyClass</code> ç±»ç”Ÿæˆäº†ä¸€ä¸ª <code>log</code> å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>log</code> å¯¹è±¡æ¥è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—æ¶ˆæ¯ã€‚</p></li><li><p><strong>æ—¥å¿—é…ç½®</strong>ï¼š<br>é€šå¸¸ï¼Œä½ éœ€è¦é…ç½®æ—¥å¿—ç³»ç»Ÿï¼ˆä¾‹å¦‚ Logbackã€Log4j2 ç­‰ï¼‰æ¥å®šä¹‰æ—¥å¿—æ¶ˆæ¯çš„è¾“å‡ºæ–¹å¼ã€æ ¼å¼å’Œç›®æ ‡ã€‚<code>@Slf4j</code> æœ¬èº«ä¸å¤„ç†æ—¥å¿—é…ç½®ï¼Œå®ƒåªæ˜¯ä¸ºç±»ç”Ÿæˆæ—¥å¿—å¯¹è±¡ã€‚ä½ éœ€è¦ç¡®ä¿ä½ çš„é¡¹ç›®æ­£ç¡®é…ç½®äº†æ—¥å¿—æ¡†æ¶ï¼Œä»¥ä¾¿æ—¥å¿—æ¶ˆæ¯æŒ‰ç…§ä½ çš„éœ€æ±‚è¿›è¡Œè®°å½•å’Œè¾“å‡ºã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œ<code>@Slf4j</code> æ³¨è§£æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œç”¨äºç®€åŒ– Java ç±»ä¸­çš„æ—¥å¿—è®°å½•æ“ä½œã€‚å®ƒå‡å°‘äº†ç¼–å†™æ ·æ¿ä»£ç çš„å·¥ä½œï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦ï¼Œå¹¶ä½¿æ—¥å¿—è®°å½•æ›´åŠ å®¹æ˜“ç®¡ç†å’Œç»´æŠ¤ã€‚ä½†è¦æ³¨æ„ï¼Œä¸ºäº†ä½¿ <code>@Slf4j</code> ç”Ÿæ•ˆï¼Œä½ éœ€è¦æ­£ç¡®é…ç½®å’Œé›†æˆ Lombok æ’ä»¶å’Œä½ çš„æ—¥å¿—æ¡†æ¶ã€‚</p><h3 id="ThreadLocal">ThreadLocal</h3><p><code>ThreadLocal</code> æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç±»ï¼Œå®ƒå…è®¸ä½ åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸ºæ¯ä¸ªçº¿ç¨‹å­˜å‚¨å’Œç®¡ç†ç‹¬ç«‹çš„æ•°æ®å‰¯æœ¬ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹è®¿é—®å’Œä¿®æ”¹è‡ªå·±çš„æ•°æ®å‰¯æœ¬ï¼Œä»è€Œé¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº› <code>ThreadLocal</code> å¸¸ç”¨æ–¹æ³•å’Œç”¨æ³•ï¼š</p><ol><li><p><strong>æ„é€ æ–¹æ³•</strong>ï¼š</p><ul><li><code>ThreadLocal</code> ç±»æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>ThreadLocal</code> å®ä¾‹ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocal&lt;T&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br></pre></td></tr></table></figure></li><li><p><strong><code>set</code> æ–¹æ³•</strong>ï¼š</p><ul><li><code>set</code> æ–¹æ³•ç”¨äºåœ¨å½“å‰çº¿ç¨‹ä¸­è®¾ç½® <code>ThreadLocal</code> å®ä¾‹çš„å€¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">threadLocal.set(value);</span><br></pre></td></tr></table></figure></li><li><p><strong><code>get</code> æ–¹æ³•</strong>ï¼š</p><ul><li><code>get</code> æ–¹æ³•ç”¨äºè·å–å½“å‰çº¿ç¨‹ä¸­ <code>ThreadLocal</code> å®ä¾‹çš„å€¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">T</span> <span class="variable">value</span> <span class="operator">=</span> threadLocal.get();</span><br></pre></td></tr></table></figure></li><li><p><strong><code>remove</code> æ–¹æ³•</strong>ï¼š</p><ul><li><code>remove</code> æ–¹æ³•ç”¨äºåˆ é™¤å½“å‰çº¿ç¨‹ä¸­ <code>ThreadLocal</code> å®ä¾‹çš„å€¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">threadLocal.remove();</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆå§‹åŒ– ThreadLocal çš„å€¼</strong>ï¼š</p><ul><li>ä½ å¯ä»¥é€šè¿‡é‡å†™ <code>ThreadLocal</code> çš„ <code>initialValue</code> æ–¹æ³•æ¥åˆå§‹åŒ– <code>ThreadLocal</code> çš„å€¼ã€‚è¿™ä¸ªæ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡è®¿é—® <code>get</code> æ–¹æ³•æ—¶è°ƒç”¨ï¼Œç”¨äºè¿”å›åˆå§‹å€¼ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocal&lt;T&gt; threadLocal = ThreadLocal.withInitial(() -&gt; initialValue);</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š<br>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­ä½¿ç”¨ <code>ThreadLocal</code> å­˜å‚¨å’Œè®¿é—®çº¿ç¨‹ç›¸å…³çš„æ•°æ®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadLocalExample</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Integer&gt; threadLocal = ThreadLocal.withInitial(() -&gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">task</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> threadLocal.get();</span><br><span class="line">            value++;</span><br><span class="line">            threadLocal.set(value);</span><br><span class="line">            System.out.println(<span class="string">&quot;Thread-local value: &quot;</span> + value);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            thread1.join();</span><br><span class="line">            thread2.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>ThreadLocal</code> å®ä¾‹ <code>threadLocal</code>ï¼Œå¹¶åœ¨ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ä¸­åˆ†åˆ«è®¿é—®å’Œä¿®æ”¹å®ƒçš„å€¼ã€‚ç”±äºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ•°æ®å‰¯æœ¬ï¼Œå®ƒä»¬ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</p></li></ol><p><code>ThreadLocal</code> åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ç”¨äºå­˜å‚¨çº¿ç¨‹ç‰¹å®šçš„æ•°æ®éå¸¸æœ‰ç”¨ï¼Œä½†éœ€è¦è°¨æ…ä½¿ç”¨ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼é—®é¢˜ã€‚è¦ç¡®ä¿åœ¨ä¸å†éœ€è¦æ•°æ®æ—¶è°ƒç”¨ <code>remove</code> æ–¹æ³•ä»¥é‡Šæ”¾èµ„æºã€‚æ­¤å¤–ï¼Œè¦é¿å…æ»¥ç”¨ <code>ThreadLocal</code>ï¼Œå› ä¸ºè¿‡å¤šçš„ <code>ThreadLocal</code> å˜é‡å¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„å†…å­˜å¼€é”€ã€‚</p><h3 id="Retention">@Retention</h3><p>åœ¨Javaä¸­,@Retentionæ˜¯ä¸€ç§å…ƒæ³¨è§£,ç”¨äºæŒ‡å®šè‡ªå®šä¹‰æ³¨è§£çš„ä¿ç•™ç­–ç•¥,å³è‡ªå®šä¹‰æ³¨è§£åœ¨ä»€ä¹ˆé˜¶æ®µå¯ä»¥è¢«è¯»å–ã€‚</p><p>@Retentionæœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼:</p><ol><li><p>RetentionPolicy.SOURCE:æ³¨è§£åªä¿ç•™åœ¨æºç çº§åˆ«,åœ¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ—¶å®ƒå°†è¢«ä¸¢å¼ƒå¿½ç•¥ã€‚</p></li><li><p>RetentionPolicy.CLASS:æ³¨è§£è¢«ä¿ç•™åˆ°ç¼–è¯‘è¿›è¡Œçš„æ—¶å€™,è€Œåœ¨jvmåŠ è½½classæ–‡ä»¶åˆ°å†…å­˜çš„æ—¶å€™è¢«é—å¼ƒã€‚</p></li><li><p>RetentionPolicy.RUNTIME:æ³¨è§£å¯ä»¥ä¿ç•™åˆ°ç¨‹åºè¿è¡Œçš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æœºåˆ¶è¯»å–è¯¥æ³¨è§£çš„ä¿¡æ¯ã€‚</p></li></ol><p>ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€MyAnnotationå¯ä»¥è¢«ä¿ç•™åˆ°ç¨‹åºè¿è¡Œæ—¶,æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æ¥è¯»å–å®ƒçš„æ³¨è§£ä¿¡æ¯ã€‚</p><p>@Retentionçš„è¿™ä¸ªä¿ç•™ç­–ç•¥å¯¹äºæ³¨è§£éå¸¸é‡è¦ã€‚å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨è¿è¡Œæ—¶å»è¯»å–æ³¨è§£çš„ä¿¡æ¯,æ‰€ä»¥è‡ªå®šä¹‰æ³¨è§£é€šå¸¸éƒ½ä¼šæŒ‡å®šä¸º@Retention(RetentionPolicy.RUNTIME),è¿™æ ·æ‰èƒ½å¤Ÿå‘æŒ¥æ³¨è§£çš„ä½œç”¨ã€‚</p><p>å¦‚æœæŒ‡å®šä¸ºSOURCEæˆ–CLASS,é‚£è¿è¡Œæ—¶å°±æ— æ³•è¯»å–è¯¥æ³¨è§£ä¿¡æ¯,é™åˆ¶äº†å…¶ä½¿ç”¨åœºæ™¯ã€‚</p><p>æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹,æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£ä¸ºäº†æ»¡è¶³è¿è¡Œæ—¶è¯»å–çš„éœ€æ±‚,éƒ½éœ€è¦ä½¿ç”¨@Retention(RetentionPolicy.RUNTIME)æ¥ä¿ç•™åˆ°è¿è¡Œæ—¶ã€‚</p><h3 id="Aspect">@Aspect</h3><p><code>@Aspect</code> æ˜¯Spring Frameworkä¸­ç”¨äºå£°æ˜åˆ‡é¢ï¼ˆAspectï¼‰çš„æ³¨è§£ã€‚åˆ‡é¢æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒåŒ…å«äº†ä¸æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼‰ç›¸å…³çš„ä»£ç å’Œé…ç½®ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹åŒ…æ‹¬æ—¥å¿—è®°å½•ã€å®‰å…¨æ€§ã€äº‹åŠ¡ç®¡ç†ã€å¼‚å¸¸å¤„ç†ç­‰ï¼Œè¿™äº›å…³æ³¨ç‚¹é€šå¸¸ä¼šåˆ†å¸ƒåœ¨åº”ç”¨ç¨‹åºçš„å¤šä¸ªåœ°æ–¹ï¼Œè€Œåˆ‡é¢çš„ä½œç”¨æ˜¯å°†è¿™äº›å…³æ³¨ç‚¹æ¨¡å—åŒ–ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥é›†ä¸­ç®¡ç†ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äº <code>@Aspect</code> æ³¨è§£çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li><p><strong>å£°æ˜åˆ‡é¢ç±»ï¼š</strong></p><p>ä½¿ç”¨ <code>@Aspect</code> æ³¨è§£æ¥å£°æ˜ä¸€ä¸ªç±»ä¸ºåˆ‡é¢ã€‚é€šå¸¸ï¼Œåˆ‡é¢ç±»åŒ…å«äº†åˆ‡ç‚¹ï¼ˆPointcutï¼‰çš„å®šä¹‰å’Œä¸åˆ‡ç‚¹ç›¸å…³çš„é€šçŸ¥ï¼ˆAdviceï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ‡ç‚¹å’Œé€šçŸ¥å®šä¹‰åœ¨è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å®šä¹‰åˆ‡ç‚¹ï¼š</strong></p><p>åˆ‡ç‚¹æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒå®šä¹‰äº†åœ¨å“ªäº›æ–¹æ³•ä¸Šåº”ç”¨åˆ‡é¢é€»è¾‘ã€‚åˆ‡ç‚¹è¡¨è¾¾å¼ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•æ¥åŒ¹é…æ–¹æ³•çš„ç­¾åï¼Œä»¥ç¡®å®šåœ¨å“ªäº›æ–¹æ³•æ‰§è¡Œå‰ã€æ‰§è¡Œåæˆ–å‡ºç°å¼‚å¸¸æ—¶åº”ç”¨é€šçŸ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* com.example.service.*.*(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myPointcut</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ‡ç‚¹å®šä¹‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å®šä¹‰é€šçŸ¥ï¼š</strong></p><p>é€šçŸ¥æ˜¯åˆ‡é¢ç±»ä¸­çš„æ–¹æ³•ï¼Œå®ƒå®šä¹‰äº†åœ¨åˆ‡ç‚¹åŒ¹é…çš„æ–¹æ³•æ‰§è¡Œå‰ã€æ‰§è¡Œåæˆ–å‡ºç°å¼‚å¸¸æ—¶æ‰§è¡Œçš„é€»è¾‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;myPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeAdvice</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œçš„é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ç”¨çš„é€šçŸ¥ç±»å‹åŒ…æ‹¬ <code>@Before</code>ã€<code>@After</code>ã€<code>@AfterReturning</code>ã€<code>@AfterThrowing</code> å’Œ <code>@Around</code>ï¼Œå®ƒä»¬åˆ†åˆ«è¡¨ç¤ºåœ¨æ–¹æ³•æ‰§è¡Œå‰ã€æ‰§è¡Œåã€æˆåŠŸè¿”å›åã€æŠ›å‡ºå¼‚å¸¸åä»¥åŠç¯ç»•æ–¹æ³•æ‰§è¡Œæ—¶æ‰§è¡Œçš„é€»è¾‘ã€‚</p></li><li><p><strong>åˆ‡é¢çš„åº”ç”¨åœºæ™¯ï¼š</strong></p><ul><li><p><strong>æ—¥å¿—è®°å½•</strong>ï¼šè®°å½•æ–¹æ³•æ‰§è¡Œå‰åçš„ä¿¡æ¯ï¼Œä»¥ä¾¿è·Ÿè¸ªåº”ç”¨ç¨‹åºçš„è¡Œä¸ºå’Œè°ƒè¯•ã€‚</p></li><li><p><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šç®¡ç†æ•°æ®åº“äº‹åŠ¡ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼šè¿›è¡Œæƒé™éªŒè¯ï¼Œç¡®ä¿åªæœ‰æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®æŸäº›æ–¹æ³•ã€‚</p></li><li><p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šæ•è·å’Œå¤„ç†æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä»¥å®ç°æ›´å‹å¥½çš„é”™è¯¯å¤„ç†ã€‚</p></li><li><p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šæµ‹é‡æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ï¼Œæ”¶é›†æ€§èƒ½ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿›è¡Œæ€§èƒ½è°ƒä¼˜ã€‚</p></li><li><p><strong>ç¼“å­˜ç®¡ç†</strong>ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥ç¼“å­˜ï¼Œä»¥æé«˜æ€§èƒ½å¹¶å‡å°‘å¯¹æ•°æ®åº“æˆ–å…¶ä»–èµ„æºçš„è®¿é—®ã€‚</p></li></ul></li><li><p><strong>å¤šä¸ªåˆ‡é¢çš„ç»„åˆï¼š</strong></p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰å¤šä¸ªåˆ‡é¢ï¼Œæ¯ä¸ªåˆ‡é¢å…³æ³¨ä¸åŒçš„æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚Spring AOPå…è®¸ä½ å°†å¤šä¸ªåˆ‡é¢ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>@Order</code> æ³¨è§£æ¥æŒ‡å®šåˆ‡é¢çš„æ‰§è¡Œé¡ºåºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ‡ç‚¹å’Œé€šçŸ¥å®šä¹‰åœ¨è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect2</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ‡ç‚¹å’Œé€šçŸ¥å®šä¹‰åœ¨è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>æ€»ä¹‹ï¼Œ<code>@Aspect</code> æ³¨è§£ç”¨äºå£°æ˜åˆ‡é¢ç±»ï¼Œå®ƒæ˜¯Spring AOPçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œç”¨äºå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒé€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥æé«˜ä»£ç çš„æ¨¡å—åŒ–æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚åˆ‡é¢å®šä¹‰äº†åˆ‡ç‚¹å’Œé€šçŸ¥ï¼Œé€šè¿‡åˆ‡ç‚¹åŒ¹é…çš„æ–¹æ³•ä¼šåœ¨é€šçŸ¥ä¸­æ‰§è¡Œé¢å¤–çš„é€»è¾‘ã€‚è¿™ç§æ–¹å¼å…è®¸ä½ åœ¨ä¸ä¿®æ”¹åŸå§‹ä»£ç çš„æƒ…å†µä¸‹ï¼Œå°†æ¨ªåˆ‡å…³æ³¨ç‚¹é›†ä¸­å¤„ç†ï¼Œä»è€Œæ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤åº”ç”¨ç¨‹åºã€‚</p><hr><p>åœ¨ Spring AOP ä¸­ï¼Œ<code>@Aspect</code> æ³¨è§£ç”¨äºæ ‡è¯†ä¸€ä¸ªç±»ä½œä¸ºåˆ‡é¢ï¼Œç”¨æ¥å®šä¹‰åˆ‡ç‚¹ï¼ˆPointcutï¼‰å’Œé€šçŸ¥ï¼ˆAdviceï¼‰ï¼Œä»¥åŠå…¶ä»–ä¸AOPç›¸å…³çš„é…ç½®ã€‚é™¤äº† <code>@Aspect</code> æ³¨è§£ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–å¸¸ç”¨çš„ä¸ <code>@Aspect</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨çš„æ³¨è§£ï¼Œè¿™äº›æ³¨è§£ç”¨äºå®šä¹‰åˆ‡ç‚¹å’Œé€šçŸ¥çš„è¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½ä¸ <code>@Aspect</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨çš„æ³¨è§£ï¼š</p><ol><li><p><code>@Before</code>ï¼šç”¨äºå®šä¹‰å‰ç½®é€šçŸ¥ï¼ŒæŒ‡å®šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œçš„é€»è¾‘ã€‚</p></li><li><p><code>@AfterReturning</code>ï¼šç”¨äºå®šä¹‰è¿”å›é€šçŸ¥ï¼ŒæŒ‡å®šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œåæ‰§è¡Œçš„é€»è¾‘ã€‚</p></li><li><p><code>@AfterThrowing</code>ï¼šç”¨äºå®šä¹‰å¼‚å¸¸é€šçŸ¥ï¼ŒæŒ‡å®šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶æ‰§è¡Œçš„é€»è¾‘ã€‚</p></li><li><p><code>@After</code>ï¼šç”¨äºå®šä¹‰æœ€ç»ˆé€šçŸ¥ï¼ŒæŒ‡å®šæ— è®ºç›®æ ‡æ–¹æ³•æ˜¯å¦æˆåŠŸæ‰§è¡Œéƒ½ä¼šæ‰§è¡Œçš„é€»è¾‘ã€‚</p></li><li><p><code>@Around</code>ï¼šç”¨äºå®šä¹‰ç¯ç»•é€šçŸ¥ï¼ŒæŒ‡å®šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å’Œæ‰§è¡Œåéƒ½å¯ä»¥æ’å…¥é€»è¾‘ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p></li></ol><p>è¿™äº›æ³¨è§£å…è®¸ä½ æ ¹æ®éœ€è¦åœ¨ä¸åŒçš„æ‰§è¡Œç‚¹æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œä»¥æ»¡è¶³å„ç§éœ€æ±‚ã€‚é€šå¸¸ï¼Œä½ å¯ä»¥æ ¹æ®ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œé¡ºåºå’Œè¡Œä¸ºé€‰æ‹©åˆé€‚çš„æ³¨è§£æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚åœ¨ä¸€ä¸ªåˆ‡é¢ç±»ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨è¿™äº›æ³¨è§£æ¥å®šä¹‰å¤šä¸ªé€šçŸ¥ï¼Œä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘ã€‚</p><p>é™¤äº†ä¸Šè¿°é€šçŸ¥æ³¨è§£ï¼Œè¿˜æœ‰å…¶ä»–ç”¨äºé…ç½®åˆ‡ç‚¹çš„æ³¨è§£ï¼Œå¦‚ï¼š</p><ol start="6"><li><p><code>@Pointcut</code>ï¼šç”¨äºå®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼ï¼ŒæŒ‡å®šåœ¨å“ªäº›æ–¹æ³•ä¸Šåº”ç”¨åˆ‡é¢é€»è¾‘ã€‚</p></li><li><p><code>@Around</code>ï¼šå¯ä»¥åœ¨åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œç”¨äºåœ¨é€šçŸ¥ä¸­å¼•ç”¨åˆ‡ç‚¹ã€‚</p></li><li><p><code>@Order</code>ï¼šç”¨äºå®šä¹‰åˆ‡é¢çš„æ‰§è¡Œé¡ºåºï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ‡é¢ï¼Œå¯ä»¥é€šè¿‡ <code>@Order</code> æ³¨è§£æ¥æ§åˆ¶å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚</p></li></ol><p>è¿™äº›æ³¨è§£é€šå¸¸ä¸ <code>@Aspect</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°å¯¹åº”çš„AOPåŠŸèƒ½ã€‚åœ¨Spring AOPä¸­ï¼Œä½¿ç”¨è¿™äº›æ³¨è§£å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¹¶å°†å®ƒä»¬ä¸åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒé€»è¾‘åˆ†ç¦»å¼€æ¥ã€‚</p><h3 id="Service">@Service</h3><p>Spring Framework æä¾›äº†å¤šä¸ªç”¨äºå®šä¹‰ä¸åŒç±»å‹ç»„ä»¶çš„æ³¨è§£ï¼Œç±»ä¼¼äº <code>@Service</code> æ³¨è§£ã€‚è¿™äº›æ³¨è§£éƒ½æœ‰ä¸åŒçš„è¯­ä¹‰å’Œç”¨é€”ï¼Œä½†å®ƒä»¬éƒ½ç”¨äºå‘Šè¯‰ Spring å®¹å™¨å¦‚ä½•å¤„ç†ç‰¹å®šçš„ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸ <code>@Service</code> ç›¸ä¼¼çš„æ³¨è§£ï¼š</p><ol><li><p><code>@Component</code>: <code>@Service</code> æ³¨è§£æ˜¯ <code>@Component</code> æ³¨è§£çš„ä¸€ä¸ªç‰¹æ®ŠåŒ–ç‰ˆæœ¬ã€‚å®ƒç”¨äºæ ‡è®°ä¸€ä¸ªæ™®é€šçš„ Spring ç»„ä»¶ç±»ã€‚</p></li><li><p><code>@Repository</code>: ç”¨äºæ ‡è®°æ•°æ®è®¿é—®å±‚çš„ç»„ä»¶ï¼Œé€šå¸¸ä¸æŒä¹…æ€§ç›¸å…³çš„ç±»ã€‚Spring ä¼šå°†å…¶è¯†åˆ«ä¸ºä»“åº“ç±»ï¼Œå¹¶æä¾›ä¸€äº›é¢å¤–çš„å¼‚å¸¸è½¬æ¢ï¼Œä¾‹å¦‚å°†æ•°æ®åº“å¼‚å¸¸è½¬æ¢ä¸º Spring çš„ DataAccessExceptionã€‚</p></li><li><p><code>@Controller</code>: ç”¨äºæ ‡è®°æ§åˆ¶å™¨ç±»ï¼Œé€šå¸¸ç”¨äºå¤„ç† Web è¯·æ±‚ï¼Œå¹¶è¿”å›è§†å›¾æˆ–æ¨¡æ¿ã€‚</p></li><li><p><code>@RestController</code>: ç”¨äºæ ‡è®°æ§åˆ¶å™¨ç±»ï¼Œé€šå¸¸ç”¨äºå¤„ç† RESTful Web æœåŠ¡è¯·æ±‚ï¼Œå®ƒçš„æ–¹æ³•ä¼šè¿”å›æ•°æ®è€Œä¸æ˜¯è§†å›¾ã€‚</p></li><li><p><code>@Service</code>: ç”¨äºæ ‡è®°ä¸šåŠ¡é€»è¾‘å±‚çš„ç»„ä»¶ï¼Œé€šå¸¸ç”¨äºæ”¾ç½®æœåŠ¡ç±»ã€‚ä¸ <code>@Component</code> ç±»ä¼¼ï¼Œä½†æ›´åŠ è¯­ä¹‰åŒ–ï¼Œç”¨äºåŒºåˆ†ä¸åŒå±‚æ¬¡çš„ç»„ä»¶ã€‚</p></li><li><p><code>@Configuration</code>: ç”¨äºæ ‡è®°é…ç½®ç±»ï¼Œé€šå¸¸ä¸ <code>@Bean</code> æ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå®šä¹‰ Spring Bean çš„åˆ›å»ºã€‚</p></li><li><p><code>@Scope</code>: ç”¨äºå®šä¹‰ Bean çš„ä½œç”¨åŸŸï¼Œæ§åˆ¶ Bean çš„ç”Ÿå‘½å‘¨æœŸã€‚å¸¸è§çš„ä½œç”¨åŸŸåŒ…æ‹¬ Singletonã€Prototypeã€Requestã€Session ç­‰ã€‚</p></li><li><p><code>@Lazy</code>: ç”¨äºæ ‡è®° Bean æ˜¯å¦æ‡’åŠ è½½ï¼Œå³åªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šåˆå§‹åŒ–ã€‚</p></li></ol><p>è¿™äº›æ³¨è§£éƒ½æœ‰ä¸åŒçš„ç”¨é€”ï¼Œä½†å®ƒä»¬éƒ½ç”¨äºå‘Šè¯‰ Spring å®¹å™¨å¦‚ä½•å¤„ç†ç»„ä»¶ï¼Œå¹¶å¸®åŠ© Spring åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡Œä¾èµ–æ³¨å…¥å’Œç®¡ç† Bean çš„ç”Ÿå‘½å‘¨æœŸã€‚é€‰æ‹©åˆé€‚çš„æ³¨è§£å–å†³äºä½ çš„ç»„ä»¶çš„è§’è‰²å’Œç”¨é€”ã€‚</p><h3 id="Componentå’Œ-Bean">@Componentå’Œ@Bean</h3><p><code>@Component</code> å’Œ <code>@Bean</code> æ˜¯ Spring Framework ä¸­ç”¨äºåˆ›å»ºå’Œç®¡ç† beanï¼ˆç»„ä»¶ï¼‰çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼Œå®ƒä»¬æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ï¼š</p><ol><li><p><strong>ç”¨æ³•å’Œç”¨é€”</strong>ï¼š</p><ul><li><p><code>@Component</code> æ˜¯ä¸€ç§ç±»çº§åˆ«çš„æ³¨è§£ï¼Œé€šå¸¸ç”¨äºå°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring æ‰˜ç®¡çš„ç»„ä»¶ã€‚å®ƒå‘Šè¯‰ Spring åœ¨ç±»è·¯å¾„æ‰«ææœŸé—´ï¼Œå°†è¿™ä¸ªç±»è‡ªåŠ¨è¯†åˆ«ä¸º beanï¼Œå¹¶å°†å…¶å®ä¾‹åŒ–å¹¶ç®¡ç†ã€‚</p></li><li><p><code>@Bean</code> æ˜¯ä¸€ç§æ–¹æ³•çº§åˆ«çš„æ³¨è§£ï¼Œé€šå¸¸ç”¨äºé…ç½®ç±»ä¸­çš„æ–¹æ³•ï¼Œä»¥æŒ‡ç¤º Spring åˆ›å»ºå’Œç®¡ç†ç‰¹å®šçš„ bean å®ä¾‹ã€‚æ‚¨éœ€è¦åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸­å®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼Œç„¶å Spring å®¹å™¨ä¼šè°ƒç”¨è¯¥æ–¹æ³•ä»¥è·å– bean å®ä¾‹ã€‚</p></li></ul></li><li><p><strong>ä½ç½®</strong>ï¼š</p><ul><li><p><code>@Component</code> æ³¨è§£é€šå¸¸åœ¨ç»„ä»¶ç±»çš„å®šä¹‰ä¸Šä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>@Bean</code> æ³¨è§£é€šå¸¸åœ¨é…ç½®ç±»çš„æ–¹æ³•ä¸Šä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MyBean <span class="title function_">myBean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>åˆ›å»ºæ–¹å¼</strong>ï¼š</p><ul><li><p><code>@Component</code> æ³¨è§£çš„ bean ç”± Spring å®¹å™¨è‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†ã€‚æ‚¨åªéœ€åœ¨ç±»ä¸Šæ·»åŠ  <code>@Component</code> æ³¨è§£ï¼ŒSpring ä¼šè´Ÿè´£å…¶ä½™çš„å·¥ä½œã€‚</p></li><li><p><code>@Bean</code> æ³¨è§£çš„ bean æ˜¯ç”±å¼€å‘è€…æ˜¾å¼å®šä¹‰çš„ã€‚æ‚¨éœ€è¦åœ¨é…ç½®ç±»ä¸­ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶åœ¨è¯¥æ–¹æ³•ä¸Šæ·»åŠ  <code>@Bean</code> æ³¨è§£ï¼Œç„¶ååœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºå¹¶è¿”å› bean å®ä¾‹ã€‚</p></li></ul></li><li><p><strong>é…ç½®çº§åˆ«</strong>ï¼š</p><ul><li><p><code>@Component</code> æ³¨è§£é€šå¸¸ç”¨äºå°†æ™®é€šçš„ Java ç±»çº³å…¥ Spring å®¹å™¨çš„ç®¡ç†ä¸­ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„é…ç½®ç±»ã€‚</p></li><li><p><code>@Bean</code> æ³¨è§£é€šå¸¸ç”¨äºé…ç½®ç±»ä¸­ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ <code>@Configuration</code> æ³¨è§£æ ‡è®°é…ç½®ç±»ï¼Œä»¥æŒ‡ç¤º Spring å®¹å™¨æŸ¥æ‰¾ <code>@Bean</code> æ–¹æ³•ã€‚</p></li></ul></li><li><p><strong>æ–¹æ³•å‚æ•°</strong>ï¼š</p><ul><li><p><code>@Component</code> æ³¨è§£çš„ç±»é€šå¸¸ä¸æ¥å—å…¶ä»– bean ä½œä¸ºæ„é€ å‡½æ•°å‚æ•°ï¼Œè€Œæ˜¯é€šè¿‡å­—æ®µæ³¨å…¥æˆ– <code>@Autowired</code> æ³¨è§£æ¥è·å–å…¶ä»– beanã€‚</p></li><li><p><code>@Bean</code> æ³¨è§£çš„æ–¹æ³•å¯ä»¥æ¥å—å…¶ä»– bean ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å®ƒä»¬æ³¨å…¥åˆ°æ–¹æ³•ä¸­ï¼Œä»è€Œå…è®¸æ‚¨åœ¨åˆ›å»º bean å®ä¾‹æ—¶è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚</p></li></ul></li></ol><p>æ€»ç»“è€Œè¨€ï¼Œ<code>@Component</code> å’Œ <code>@Bean</code> éƒ½æ˜¯ç”¨äºåˆ›å»ºå’Œç®¡ç† Spring bean çš„æ–¹å¼ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼å’Œç”¨é€”æœ‰æ‰€ä¸åŒã€‚<code>@Component</code> æ›´é€‚åˆå°†æ™®é€šçš„ Java ç±»å£°æ˜ä¸º beanï¼Œè€Œ <code>@Bean</code> æ›´é€‚åˆåœ¨é…ç½®ç±»ä¸­è¿›è¡Œç²¾ç¡®çš„ bean åˆ›å»ºå’Œé…ç½®ã€‚æ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å’Œè®¾è®¡æ¨¡å¼é€‰æ‹©ä½¿ç”¨å…¶ä¸­ä¹‹ä¸€æˆ–ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚</p><h3 id="æ–¹æ³•å‚æ•°å‰çš„æ³¨è§£">æ–¹æ³•å‚æ•°å‰çš„æ³¨è§£</h3><p>åœ¨Javaä¸­ï¼Œæœ‰è®¸å¤šä¸åŒçš„æ³¨è§£å¯ç”¨äºæ–¹æ³•å‚æ•°å‰ï¼Œç”¨äºæŒ‡å®šå‚æ•°çš„ç‰¹å®šè¡Œä¸ºæˆ–å±æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç”¨äºå‚æ•°å‰çš„æ³¨è§£ï¼š</p><ol><li><p><strong>@RequestParam</strong>ï¼š</p><ul><li>ç”¨äºä»HTTPè¯·æ±‚ä¸­æå–å‚æ•°å€¼ï¼Œé€šå¸¸ç”¨äºè·å–URLä¸­çš„æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•å­—æ®µçš„å€¼ã€‚</li></ul></li><li><p><strong>@PathVariable</strong>ï¼š</p><ul><li>ç”¨äºå°†URIæ¨¡æ¿å˜é‡ï¼ˆä¾‹å¦‚RESTful APIä¸­çš„è·¯å¾„å‚æ•°ï¼‰æ˜ å°„åˆ°æ–¹æ³•å‚æ•°ã€‚</li></ul></li><li><p><strong>@RequestBody</strong>ï¼š</p><ul><li>ç”¨äºæŒ‡ç¤ºæ–¹æ³•å‚æ•°åº”è¯¥ä»HTTPè¯·æ±‚ä½“ä¸­è·å–ï¼Œé€šå¸¸ç”¨äºæ¥æ”¶JSONæˆ–XMLç­‰è¯·æ±‚ä½“æ•°æ®ã€‚</li></ul></li><li><p><strong>@RequestHeader</strong>ï¼š</p><ul><li>ç”¨äºè·å–HTTPè¯·æ±‚å¤´çš„å€¼ï¼Œå¯ä»¥æŒ‡å®šå¤´çš„åç§°æ¥è·å–ç‰¹å®šå¤´çš„å€¼ã€‚</li></ul></li><li><p><strong>@CookieValue</strong>ï¼š</p><ul><li>ç”¨äºè·å–HTTPè¯·æ±‚ä¸­çš„Cookieçš„å€¼ï¼Œå¯ä»¥æŒ‡å®šCookieçš„åç§°æ¥è·å–ç‰¹å®šCookieçš„å€¼ã€‚</li></ul></li><li><p><strong>@ModelAttribute</strong>ï¼š</p><ul><li>ç”¨äºå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°æ¨¡å‹å¯¹è±¡ä¸Šï¼Œé€šå¸¸ç”¨äºè¡¨å•æ•°æ®çš„ç»‘å®šã€‚</li></ul></li><li><p><strong>@RequestAttribute</strong>ï¼š</p><ul><li>ç”¨äºè·å–HTTPè¯·æ±‚ä¸­çš„å±æ€§å€¼ï¼Œé€šå¸¸åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­é€šè¿‡<code>HttpServletRequest</code>è®¾ç½®çš„å±æ€§ã€‚</li></ul></li><li><p><strong>@Valid</strong>ï¼š</p><ul><li>ç”¨äºåœ¨å‚æ•°ä¸Šå¯ç”¨BeanéªŒè¯ï¼ˆJSR-303ï¼‰ï¼Œé€šå¸¸ä¸<code>@Validated</code>ä¸€èµ·ä½¿ç”¨ï¼Œä»¥éªŒè¯å‚æ•°çš„æœ‰æ•ˆæ€§ã€‚</li></ul></li><li><p><strong>@RequestParamMap</strong>ï¼š</p><ul><li>ç”¨äºå°†æ‰€æœ‰çš„è¯·æ±‚å‚æ•°æ˜ å°„åˆ°ä¸€ä¸ª<code>Map</code>å¯¹è±¡ï¼Œä»¥ä¾¿è·å–æ‰€æœ‰çš„è¯·æ±‚å‚æ•°ã€‚</li></ul></li><li><p><strong>@RequestParamMultiValue</strong>ï¼š</p><ul><li>ç”¨äºå°†å¤šä¸ªå€¼çš„è¯·æ±‚å‚æ•°æ˜ å°„åˆ°ä¸€ä¸ª<code>MultiValueMap</code>å¯¹è±¡ï¼Œä»¥ä¾¿è·å–å¤šå€¼è¯·æ±‚å‚æ•°ã€‚</li></ul></li></ol><p>è¿™äº›æ³¨è§£æä¾›äº†å„ç§æ–¹å¼æ¥å¤„ç†å’Œè®¿é—®HTTPè¯·æ±‚çš„ä¸åŒéƒ¨åˆ†ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚æ¥é€‰æ‹©é€‚å½“çš„æ³¨è§£ã€‚è¿™äº›æ³¨è§£é€šå¸¸ç”¨äºSpringæ¡†æ¶ä¸­çš„æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä»¥å¤„ç†å’Œè§£æHTTPè¯·æ±‚ã€‚</p><h3 id="Transactional">@Transactional</h3><p><code>@Transactional</code> æ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºå£°æ˜äº‹åŠ¡æ€§æ–¹æ³•ï¼Œå®ƒå‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„æ–¹æ³•åº”è¯¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œã€‚äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸå®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äº <code>@Transactional</code> æ³¨è§£çš„ä¸€äº›é‡è¦ä¿¡æ¯å’Œç”¨æ³•ï¼š</p><ol><li><p><strong>åœ¨æ–¹æ³•çº§åˆ«ä½¿ç”¨</strong>ï¼š</p><ul><li><p>é€šå¸¸ï¼Œ<code>@Transactional</code> æ³¨è§£è¢«åº”ç”¨äºæœåŠ¡å±‚çš„æ–¹æ³•ï¼Œä»¥æŒ‡ç¤ºè¿™äº›æ–¹æ³•åº”è¯¥åœ¨äº‹åŠ¡ç®¡ç†ä¸‹æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>äº‹åŠ¡ä¼ æ’­å±æ€§ï¼ˆPropagationï¼‰</strong>ï¼š</p><ul><li><code>@Transactional</code> æ³¨è§£æ”¯æŒä¸åŒçš„äº‹åŠ¡ä¼ æ’­å±æ€§ï¼Œç”¨äºæ§åˆ¶äº‹åŠ¡çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®ä¸º <code>REQUIRED</code>ã€<code>REQUIRES_NEW</code>ã€<code>SUPPORTS</code>ã€<code>MANDATORY</code> ç­‰ã€‚</li><li>äº‹åŠ¡ä¼ æ’­å±æ€§å†³å®šäº†åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶å¦‚ä½•å¤„ç†å·²ç»å­˜åœ¨çš„äº‹åŠ¡ã€‚ä¸åŒçš„ä¼ æ’­å±æ€§é€‚ç”¨äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚</li></ul></li><li><p><strong>éš”ç¦»çº§åˆ«ï¼ˆIsolation Levelï¼‰</strong>ï¼š</p><ul><li>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å®šä¹‰äº†äº‹åŠ¡ä¹‹é—´çš„ç›¸äº’å½±å“ç¨‹åº¦ï¼ŒSpringæ”¯æŒå¤šç§éš”ç¦»çº§åˆ«ï¼Œå¦‚ <code>DEFAULT</code>ã€<code>READ_COMMITTED</code>ã€<code>SERIALIZABLE</code> ç­‰ã€‚</li><li>éš”ç¦»çº§åˆ«ç”¨äºæ§åˆ¶å¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´çš„å¯è§æ€§å’Œä¸€è‡´æ€§ã€‚</li></ul></li><li><p><strong>å›æ»šè§„åˆ™ï¼ˆRollback Rulesï¼‰</strong>ï¼š</p><ul><li>å¯ä»¥ä½¿ç”¨ <code>rollbackFor</code> å’Œ <code>noRollbackFor</code> å‚æ•°æ¥å®šä¹‰å“ªäº›å¼‚å¸¸åº”è¯¥è§¦å‘äº‹åŠ¡å›æ»šï¼Œå“ªäº›å¼‚å¸¸ä¸åº”è¯¥è§¦å‘äº‹åŠ¡å›æ»šã€‚</li><li>è¿™ä½¿å¾—ä½ å¯ä»¥æ ¹æ®éœ€è¦å¯¹äº‹åŠ¡å›æ»šè¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</li></ul></li><li><p><strong>äº‹åŠ¡è¶…æ—¶ï¼ˆTimeoutï¼‰</strong>ï¼š</p><ul><li>ä½¿ç”¨ <code>timeout</code> å‚æ•°æ¥æŒ‡å®šäº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœäº‹åŠ¡åœ¨æŒ‡å®šçš„æ—¶é—´å†…æ²¡æœ‰å®Œæˆï¼Œå°†ä¼šè‡ªåŠ¨å›æ»šã€‚</li></ul></li><li><p><strong>åªè¯»äº‹åŠ¡ï¼ˆRead-Only Transactionsï¼‰</strong>ï¼š</p><ul><li>å¦‚æœä½ çŸ¥é“ä¸€ä¸ªæ–¹æ³•åªä¼šè¯»å–æ•°æ®è€Œä¸ä¿®æ”¹æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>readOnly</code> å‚æ•°æ¥è®¾ç½®æ–¹æ³•ä¸ºåªè¯»äº‹åŠ¡ï¼Œè¿™å¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ul></li><li><p><strong>åµŒå¥—äº‹åŠ¡</strong>ï¼š</p><ul><li><code>@Transactional</code> æ³¨è§£è¿˜æ”¯æŒåµŒå¥—äº‹åŠ¡ï¼Œä½¿å¾—æ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªå·²å­˜åœ¨çš„äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œæˆ–è€…å¼€å¯ä¸€ä¸ªæ–°çš„åµŒå¥—äº‹åŠ¡ã€‚</li></ul></li><li><p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š</p><ul><li>å¦‚æœä¸€ä¸ªè¢« <code>@Transactional</code> æ³¨è§£çš„æ–¹æ³•æŠ›å‡ºäº†æœªæ•è·çš„å¼‚å¸¸ï¼ŒSpringä¼šå°†äº‹åŠ¡æ ‡è®°ä¸ºâ€œå›æ»šâ€ã€‚ä½ å¯ä»¥é€šè¿‡æ•è·å¼‚å¸¸å¹¶å¤„ç†æ¥æ§åˆ¶äº‹åŠ¡çš„è¡Œä¸ºã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œ<code>@Transactional</code> æ³¨è§£æ˜¯Springæ¡†æ¶ä¸­ç”¨äºç®¡ç†äº‹åŠ¡çš„å¼ºå¤§å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ å®ç°æ•°æ®åº“æ“ä½œçš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚é€šè¿‡æ­£ç¡®é…ç½®äº‹åŠ¡çš„ä¼ æ’­å±æ€§ã€éš”ç¦»çº§åˆ«ã€å›æ»šè§„åˆ™ç­‰å‚æ•°ï¼Œä½ å¯ä»¥ç¡®ä¿äº‹åŠ¡åœ¨å„ç§å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹æ­£ç¡®åœ°æ‰§è¡Œã€‚</p><h3 id="æ¥å£ä¸­çš„é™æ€æ–¹æ³•å¯ä»¥è¢«é‡å†™å—">æ¥å£ä¸­çš„é™æ€æ–¹æ³•å¯ä»¥è¢«é‡å†™å—</h3><p>æ¥å£ä¸­çš„é™æ€æ–¹æ³•ä¸èƒ½è¢«å­æ¥å£æˆ–å®ç°ç±»é‡å†™ã€‚é™æ€æ–¹æ³•æ˜¯ä¸æ¥å£æœ¬èº«ç›¸å…³è”çš„ï¼Œè€Œä¸æ˜¯ä¸æ¥å£çš„å®ç°ç±»ç›¸å…³è”çš„ã€‚å› æ­¤ï¼Œå­æ¥å£æˆ–å®ç°ç±»æ— æ³•è¦†ç›–æ¥å£ä¸­çš„é™æ€æ–¹æ³•ã€‚</p><p>å½“ä½ åœ¨æ¥å£ä¸­å®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•æ—¶ï¼Œå®ƒå¯ä»¥åœ¨æ¥å£çš„åç§°ä¸Šç›´æ¥è°ƒç”¨ï¼Œä¸å®ä¾‹åŒ–æ¥å£çš„å¯¹è±¡æ— å…³ã€‚**å¦‚æœå­æ¥å£æˆ–å®ç°ç±»è¯•å›¾å®šä¹‰ä¸€ä¸ªä¸æ¥å£ä¸­çš„é™æ€æ–¹æ³•å…·æœ‰ç›¸åŒåç§°å’Œå‚æ•°åˆ—è¡¨çš„é™æ€æ–¹æ³•ï¼Œè¿™åªæ˜¯åœ¨å­æ¥å£æˆ–å®ç°ç±»ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é™æ€æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¯¹æ¥å£ä¸­çš„é™æ€æ–¹æ³•è¿›è¡Œé‡å†™ã€‚**è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰è¦†ç›–æˆ–é‡å†™çš„å…³ç³»ã€‚</p><p>å› æ­¤ï¼Œè¦æ³¨æ„ï¼Œæ¥å£ä¸­çš„é™æ€æ–¹æ³•ä¸å…·å¤‡å¤šæ€æ€§ï¼Œä¹Ÿä¸èƒ½è¢«å­æ¥å£æˆ–å®ç°ç±»ç”¨æ¥æä¾›ä¸åŒçš„å®ç°ã€‚é™æ€æ–¹æ³•é€šå¸¸ç”¨äºæ¥å£æä¾›ä¸€äº›ä¸æ¥å£ç›¸å…³çš„å·¥å…·æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸ä¾èµ–äºæ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡è®°å½•è‹ç©¹å¤–å–é¡¹ç›®æ­å»ºè¿‡ç¨‹ä¸­çš„ç¬”è®°</summary>
    
    
    
    <category term="é¡¹ç›®" scheme="https://momoao.github.io/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="MyBatis" scheme="https://momoao.github.io/tags/MyBatis/"/>
    
    <category term="SpringBoot" scheme="https://momoao.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript</title>
    <link href="https://momoao.github.io/posts/202308290811.html"/>
    <id>https://momoao.github.io/posts/202308290811.html</id>
    <published>2023-08-29T07:33:03.000Z</published>
    <updated>2023-08-29T01:40:21.882Z</updated>
    
    <content type="html"><![CDATA[<h1>JavaScript</h1><h2 id="æ‰€æœ‰æ•°æ®ç±»å‹">æ‰€æœ‰æ•°æ®ç±»å‹</h2><p>JavaScriptæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œè¿™äº›æ•°æ®ç±»å‹å¯ä»¥æ ¹æ®å…¶ç‰¹æ€§å’Œç”¨é€”è¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯JavaScriptä¸­çš„ä¸»è¦æ•°æ®ç±»å‹ï¼š</p><ol><li><p><strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Data Typesï¼‰</strong>ï¼š</p><ul><li><strong>String</strong>ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šè¡¨ç¤ºæ–‡æœ¬æ•°æ®ï¼Œä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥ã€‚</li><li><strong>Number</strong>ï¼ˆæ•°å­—ï¼‰ï¼šè¡¨ç¤ºæ•°å€¼ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚</li><li><strong>Boolean</strong>ï¼ˆå¸ƒå°”ï¼‰ï¼šè¡¨ç¤ºé€»è¾‘å€¼ï¼Œåªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š<code>true</code>ï¼ˆçœŸï¼‰å’Œ<code>false</code>ï¼ˆå‡ï¼‰ã€‚</li><li><strong>null</strong>ï¼šè¡¨ç¤ºç©ºå€¼æˆ–æ— å€¼ã€‚</li><li><strong>undefined</strong>ï¼šè¡¨ç¤ºæœªå®šä¹‰çš„å€¼ã€‚</li></ul></li><li><p><strong>å¤æ‚æ•°æ®ç±»å‹ï¼ˆComplex Data Typesï¼‰</strong>ï¼š</p><ul><li><strong>Object</strong>ï¼ˆå¯¹è±¡ï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ã€‚å¯¹è±¡å¯ä»¥ç”¨èŠ±æ‹¬å· <code>&#123;&#125;</code> æ¥å®šä¹‰ã€‚</li><li><strong>Array</strong>ï¼ˆæ•°ç»„ï¼‰ï¼šè¡¨ç¤ºæœ‰åºçš„åˆ—è¡¨ï¼ŒåŒ…å«ä¸€ç»„å€¼ã€‚æ•°ç»„å¯ä»¥ç”¨æ–¹æ‹¬å· <code>[]</code> æ¥å®šä¹‰ã€‚</li><li><strong>Function</strong>ï¼ˆå‡½æ•°ï¼‰ï¼šè¡¨ç¤ºå¯æ‰§è¡Œçš„ä»£ç å—ï¼Œå¯ä»¥è¢«è°ƒç”¨æ‰§è¡Œã€‚</li></ul></li><li><p><strong>ç‰¹æ®Šæ•°æ®ç±»å‹</strong>ï¼š</p><ul><li><strong>Symbol</strong>ï¼ˆç¬¦å·ï¼‰ï¼šES6å¼•å…¥çš„æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºå”¯ä¸€çš„ã€ä¸å¯å˜çš„å€¼ï¼Œä¸»è¦ç”¨äºåˆ›å»ºå¯¹è±¡å±æ€§çš„å”¯ä¸€é”®ã€‚</li></ul></li><li><p><strong>åŒ…è£…å¯¹è±¡ï¼ˆWrapper Objectsï¼‰</strong>ï¼š</p><ul><li>JavaScriptä¸ºåŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†ç›¸åº”çš„åŒ…è£…å¯¹è±¡ï¼Œä½¿å…¶å¯ä»¥åƒå¯¹è±¡ä¸€æ ·è®¿é—®å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ<code>String</code>ã€<code>Number</code> å’Œ <code>Boolean</code>ã€‚</li></ul></li></ol><p>è¿™äº›æ•°æ®ç±»å‹åœ¨JavaScriptä¸­å…·æœ‰ä¸åŒçš„ç‰¹æ€§å’Œç”¨é€”ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²ç”¨äºå¤„ç†æ–‡æœ¬ï¼Œæ•°å­—ç”¨äºæ•°å€¼è®¡ç®—ï¼Œå¯¹è±¡å’Œæ•°ç»„ç”¨äºç»„ç»‡å’Œå­˜å‚¨æ•°æ®ï¼Œå‡½æ•°ç”¨äºå°è£…å¯æ‰§è¡Œçš„ä»£ç å—ç­‰ã€‚</p><p>åœ¨JavaScriptä¸­ï¼Œæ•°æ®ç±»å‹é€šå¸¸æ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€å˜é‡çš„ç±»å‹å¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚è¿™ç§çµæ´»æ€§ä½¿JavaScriptéå¸¸é€‚åˆç”¨äºå„ç§åº”ç”¨ç¨‹åºï¼Œä»ç½‘é¡µäº¤äº’åˆ°æœåŠ¡å™¨ç«¯å¼€å‘ã€‚</p><h3 id="nullå’Œundefinedå’ŒNANçš„åŒºåˆ«">nullå’Œundefinedå’ŒNANçš„åŒºåˆ«</h3><p><code>null</code>ã€<code>undefined</code> å’Œ <code>NaN</code> éƒ½æ˜¯ JavaScript ä¸­è¡¨ç¤ºç‰¹æ®Šå€¼æˆ–ç‰¹å®šæƒ…å†µçš„å€¼ï¼Œå®ƒä»¬åœ¨å«ä¹‰å’Œç”¨æ³•ä¸Šæœ‰æ‰€ä¸åŒï¼š</p><ol><li><p><strong>null</strong>ï¼š</p><ul><li><code>null</code> è¡¨ç¤ºä¸€ä¸ªç©ºå€¼æˆ–ç¼ºå¤±å€¼ã€‚</li><li>å½“æ‚¨æƒ³è¦æ˜ç¡®åœ°è¡¨ç¤ºä¸€ä¸ªå˜é‡æ²¡æœ‰å€¼æ—¶ï¼Œå¯ä»¥å°†å…¶èµ‹å€¼ä¸º <code>null</code>ã€‚</li><li><code>null</code> æ˜¯ä¸€ä¸ªåŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºçš„æˆ–æ— æ•ˆçš„å¯¹è±¡å¼•ç”¨ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>null</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li><li><p><strong>undefined</strong>ï¼š</p><ul><li>å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡ä½†æ²¡æœ‰ä¸ºå…¶èµ‹å€¼æ—¶ï¼Œå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ã€‚</li><li>å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å› <code>undefined</code>ã€‚</li><li>è®¿é—®å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œè¿”å›çš„å€¼ä¹Ÿæ˜¯ <code>undefined</code>ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>undefined</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li><li><p><strong>NaN</strong>ï¼ˆNot-a-Numberï¼‰ï¼š</p><ul><li><code>NaN</code> è¡¨ç¤ºä¸€ä¸ªéæ•°å­—çš„å€¼ï¼Œé€šå¸¸åœ¨è¿›è¡Œæ•°å­¦è¿ç®—å‡ºé”™æ—¶è¿”å›ã€‚</li><li>ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²è§£ææˆæ•°å­—å¤±è´¥æ—¶ï¼Œç»“æœå°±æ˜¯ <code>NaN</code>ã€‚</li><li><code>NaN</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å€¼ï¼Œå®ƒä¸ä»»ä½•å…¶ä»–å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚å› æ­¤ï¼Œ<code>NaN !== NaN</code>ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>NaN</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li></ol><p>æ€»ç»“åŒºåˆ«ï¼š</p><ul><li><code>null</code> è¡¨ç¤ºæ˜ç¡®çš„ç©ºå€¼æˆ–ç¼ºå¤±å€¼ï¼Œæ˜¯ä¸€ä¸ªèµ‹å€¼çš„æ“ä½œï¼Œå±äºåŸå§‹æ•°æ®ç±»å‹ã€‚</li><li><code>undefined</code> è¡¨ç¤ºæœªå®šä¹‰çš„å€¼ï¼Œå¯ä»¥æ˜¯å˜é‡å£°æ˜ä½†æœªèµ‹å€¼ï¼Œå‡½æ•°æœªè¿”å›å€¼ç­‰æƒ…å†µã€‚</li><li><code>NaN</code> è¡¨ç¤ºéæ•°å­—çš„å€¼ï¼Œé€šå¸¸åœ¨æ•°å­¦è¿ç®—å‡ºé”™æ—¶è¿”å›ï¼Œå±äºæ•°å€¼ç±»å‹ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>null</code>ã€<code>undefined</code> å’Œ <code>NaN</code> éƒ½è¢«è§†ä¸º&quot;å‡å€¼&quot;ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// è¾“å‡ºï¼šundefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// è¾“å‡ºï¼šnull</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&quot;string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> parsedNumber = <span class="built_in">parseInt</span>(c);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedNumber); <span class="comment">// è¾“å‡ºï¼šNaN</span></span><br></pre></td></tr></table></figure><p>äº†è§£è¿™äº›ç‰¹æ®Šå€¼çš„å«ä¹‰å’Œè¡Œä¸ºå¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°å¤„ç†å˜é‡èµ‹å€¼ã€é€»è¾‘åˆ¤æ–­å’Œæ•°å­¦è¿ç®—ç­‰æƒ…å†µã€‚</p><h2 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</h2><ul><li>JavaScriptçš„è¯­æ³•ä¸è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ç›¸ä¼¼ï¼ŒåŒ…æ‹¬å˜é‡ã€æ•°æ®ç±»å‹ã€è¿ç®—ç¬¦ç­‰ã€‚</li><li>å®šä¹‰å˜é‡ä½¿ç”¨ <code>var</code>ã€<code>let</code> æˆ– <code>const</code>ï¼Œå…¶ä¸­ <code>let</code> å’Œ <code>const</code> æ˜¯ES6å¼•å…¥çš„æ–°å£°æ˜æ–¹å¼ã€‚</li><li>åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼Œä»¥åŠç‰¹æ®Šå€¼ <code>null</code> å’Œ <code>undefined</code>ã€‚</li><li>ä½¿ç”¨ <code>+</code> è¿ç®—ç¬¦å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ï¼Œæ‰§è¡Œæ•°å­—ç›¸åŠ ã€‚</li><li>æ¡ä»¶è¯­å¥å¦‚ <code>if</code>ã€<code>else if</code> å’Œ <code>else</code> ç”¨äºæ§åˆ¶ä»£ç çš„æ‰§è¡Œè·¯å¾„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜é‡å’Œæ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²è¿æ¥</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="string">&quot;Hello, &quot;</span> + name;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ä»¶è¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Number is greater than 5&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Number is not greater than 5&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="varã€letã€constçš„åŒºåˆ«">varã€letã€constçš„åŒºåˆ«</h3><p>åœ¨JavaScriptä¸­ï¼Œ<code>var</code>ã€<code>let</code>å’Œ<code>const</code>æ˜¯ç”¨äºå£°æ˜å˜é‡çš„å…³é”®å­—ï¼Œå®ƒä»¬åœ¨ä½œç”¨åŸŸã€å¯å˜æ€§å’Œç”Ÿå‘½å‘¨æœŸç­‰æ–¹é¢æœ‰ä¸åŒçš„è¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š</p><ol><li><p><strong>var</strong>ï¼š</p><ul><li><code>var</code> æ˜¯åœ¨ES5ä¸­å¼•å…¥çš„å˜é‡å£°æ˜å…³é”®å­—ã€‚</li><li>å˜é‡å£°æ˜æå‡ï¼šåœ¨ä½œç”¨åŸŸå†…ï¼Œ<code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å£°æ˜ä¹‹å‰å¼•ç”¨å˜é‡ã€‚</li><li>æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼š<code>var</code> å£°æ˜çš„å˜é‡åœ¨å‡½æ•°ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨å—ï¼ˆå¦‚å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ï¼‰ä¸­æœ‰æ•ˆã€‚</li><li>å…è®¸é‡å¤å£°æ˜ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œæ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨ <code>var</code> å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</li></ul></li><li><p><strong>let</strong>ï¼š</p><ul><li><code>let</code> æ˜¯åœ¨ES6ä¸­å¼•å…¥çš„å—çº§ä½œç”¨åŸŸå˜é‡å£°æ˜å…³é”®å­—ã€‚</li><li>å—çº§ä½œç”¨åŸŸï¼š<code>let</code> å£°æ˜çš„å˜é‡ä»…åœ¨å…¶å£°æ˜çš„å—å†…æœ‰æ•ˆï¼Œä¸ä¼šæå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚</li><li>ä¸å…è®¸é‡å¤å£°æ˜ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œä¸å…è®¸ä½¿ç”¨ <code>let</code> é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</li></ul></li><li><p><strong>const</strong>ï¼š</p><ul><li><code>const</code> ä¹Ÿæ˜¯åœ¨ES6ä¸­å¼•å…¥çš„ï¼Œç”¨äºå£°æ˜å¸¸é‡ï¼Œå³ä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†æ”¹å˜çš„å˜é‡ã€‚</li><li>å—çº§ä½œç”¨åŸŸï¼š<code>const</code> åŒæ ·éµå¾ªå—çº§ä½œç”¨åŸŸè§„åˆ™ï¼Œåªåœ¨å…¶å£°æ˜çš„å—å†…æœ‰æ•ˆã€‚</li><li>å¿…é¡»åˆå§‹åŒ–ï¼šåœ¨å£°æ˜ <code>const</code> å˜é‡æ—¶å¿…é¡»è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</li><li>å¸¸é‡å€¼ä¸å¯å˜ï¼šä¸€æ—¦èµ‹å€¼ï¼Œ<code>const</code> å˜é‡çš„å€¼å°±ä¸èƒ½å†æ”¹å˜ã€‚</li></ul></li></ol><p>æ€»ç»“åŒºåˆ«ï¼š</p><ul><li>ä½¿ç”¨ <code>var</code> å¯èƒ½ä¼šå¯¼è‡´å˜é‡æå‡å’Œéš¾ä»¥é¢„æµ‹çš„ä½œç”¨åŸŸè¡Œä¸ºã€‚å®ƒçš„ä½¿ç”¨å·²ç»é€æ¸è¢« <code>let</code> å’Œ <code>const</code> å–ä»£ã€‚</li><li><code>let</code> å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å˜é‡ï¼Œå¹¶ä¸”å˜é‡çš„å€¼å¯ä»¥é‡æ–°èµ‹å€¼ã€‚</li><li><code>const</code> ç”¨äºå£°æ˜å¸¸é‡ï¼Œå˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸èƒ½æ›´æ”¹ï¼Œå¹¶ä¸”ä¹Ÿéµå¾ªå—çº§ä½œç”¨åŸŸã€‚</li></ul><p>æ¨èåœ¨ç°ä»£JavaScriptä»£ç ä¸­ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> æ¥è·å¾—æ›´ä¸¥æ ¼çš„ä½œç”¨åŸŸæ§åˆ¶å’Œä»£ç å¯ç»´æŠ¤æ€§ã€‚</p><h2 id="å‡½æ•°">å‡½æ•°</h2><ul><li>ä½¿ç”¨ <code>function</code> å…³é”®å­—å®šä¹‰å‡½æ•°ã€‚å‡½æ•°å¯ä»¥æ¥å—å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿”å›å€¼ã€‚</li><li>å¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ï¼ˆæ— åå‡½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°ã€‚</li><li>å‡½æ•°å¯ä»¥åœ¨å…¶ä»–å‡½æ•°ä¸­è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå›è°ƒä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½åå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> multiply = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">3</span>, <span class="number">5</span>));       <span class="comment">// è¾“å‡ºï¼š8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">2</span>, <span class="number">4</span>)); <span class="comment">// è¾“å‡ºï¼š8</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„å’Œå¯¹è±¡">æ•°ç»„å’Œå¯¹è±¡</h2><ul><li>æ•°ç»„ç”¨äºå­˜å‚¨å¤šä¸ªå€¼ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ã€‚ä½¿ç”¨æ–¹æ‹¬å· <code>[]</code> åˆ›å»ºæ•°ç»„ã€‚</li><li>å¯¹è±¡ç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼Œæ¯ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼ã€‚ä½¿ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code> åˆ›å»ºå¯¹è±¡ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Johnson&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers[<span class="number">2</span>]);        <span class="comment">// è¾“å‡ºï¼š3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">firstName</span>);  <span class="comment">// è¾“å‡ºï¼š&quot;Alice&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯">å¾ªç¯</h2><ul><li>ä½¿ç”¨ <code>for</code> å¾ªç¯å’Œ <code>while</code> å¾ªç¯å¯ä»¥é‡å¤æ‰§è¡Œä¸€ç»„æ“ä½œã€‚</li><li><code>for...of</code> å¾ªç¯ç”¨äºéå†æ•°ç»„ç­‰å¯è¿­ä»£å¯¹è±¡çš„å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(numbers[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for...of å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// while å¾ªç¯</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (count &lt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å’ŒDOMæ“ä½œ">äº‹ä»¶å’ŒDOMæ“ä½œ</h2><ul><li>JavaScriptå¯ä»¥ç”¨äºæ“ä½œç½‘é¡µä¸Šçš„å…ƒç´ ã€‚é€šè¿‡DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰å¯ä»¥è·å–å’Œä¿®æ”¹HTMLå…ƒç´ ã€‚</li><li>ä½¿ç”¨ <code>addEventListener</code> æ¥é™„åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨ç­‰ã€‚</li></ul><!DOCTYPE html><html><head>  <title>DOM Example</title></head><body>  <button id="myButton">Click Me</button>  <script>    const button = document.getElementById('myButton');    button.addEventListener('click', () => {      alert('Button Clicked!');    });  </script></body></html><h2 id="å¼‚æ­¥ç¼–ç¨‹">å¼‚æ­¥ç¼–ç¨‹</h2><ul><li>JavaScriptä¸­çš„å¼‚æ­¥ç¼–ç¨‹éå¸¸é‡è¦ã€‚å¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°ã€Promiseå’Œasync/awaitæ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ setTimeout æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Start&quot;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Inside setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;End&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="JSON">JSON</h2><ul><li>JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œç”¨äºè¡¨ç¤ºç»“æ„åŒ–æ•°æ®ã€‚å®ƒåœ¨JavaScriptä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;Jane&quot;, &quot;age&quot;: 25&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> parsedData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonData);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedData.<span class="property">name</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Jane&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ¨¡å—åŒ–">æ¨¡å—åŒ–</h2><ul><li>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæ¨¡å—åŒ–ä½¿ä»£ç æ›´æœ‰ç»„ç»‡æ€§ã€‚å¯ä»¥ä½¿ç”¨ <code>import</code> å’Œ <code>export</code> å…³é”®å­—è¿›è¡Œæ¨¡å—å¯¼å…¥å’Œå¯¼å‡ºã€‚</li><li>åœ¨æ¨¡å—ä¸­ä¸ä½¿ç”¨exportå¯¼å‡ºçš„å†…å®¹æ—¶ç§æœ‰çš„ï¼Œåˆ«çš„æ¨¡å—ä¸­ä¸èƒ½ä½¿ç”¨importå¼•ç”¨</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./math.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// è¾“å‡ºï¼š7</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»JavaScriptçš„åŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="JavaScript" scheme="https://momoao.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Javaåå°„</title>
    <link href="https://momoao.github.io/posts/202308281533.html"/>
    <id>https://momoao.github.io/posts/202308281533.html</id>
    <published>2023-08-28T07:33:03.000Z</published>
    <updated>2023-09-24T10:14:02.861Z</updated>
    
    <content type="html"><![CDATA[<h1>Javaåå°„</h1><h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><p>1.åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p><p>2.åå°„å¯ä»¥åœ¨ä¸€ä¸ªç±»è¿è¡Œçš„æ—¶å€™è·å–ç±»çš„ä¿¡æ¯çš„æœºåˆ¶ï¼Œå¯ä»¥è·å–åœ¨ç¼–è¯‘æœŸä¸å¯èƒ½è·å¾—çš„ç±»çš„ä¿¡æ¯ã€‚</p><p>3.å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ã€‚</p><p>4.å› ä¸ºç±»çš„ä¿¡æ¯æ˜¯ä¿å­˜åœ¨Classå¯¹è±¡ä¸­çš„ï¼Œè€Œè¿™ä¸ªClasså¯¹è±¡æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰åŠ¨æ€åŠ è½½çš„ã€‚</p><p>5.å½“ç±»åŠ è½½å™¨è£…è½½è¿è¡Œäº†ç±»åï¼ŒåŠ¨æ€è·å–Classå¯¹è±¡çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€æ“ä½œClasså¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaçš„åå°„æœºåˆ¶ã€‚</p><h2 id="ä½œç”¨">ä½œç”¨</h2><p>1.åç¼–è¯‘ï¼š.class â€”&gt; .javaã€‚</p><p>2.é€šè¿‡åå°„æœºåˆ¶è®¿é—®Javaå¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ç­‰ã€‚</p><h2 id="åå°„åŸç†">åå°„åŸç†</h2><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/format,png.png" alt="img"></p><h2 id="ç±»åŠ è½½è¿‡ç¨‹">ç±»åŠ è½½è¿‡ç¨‹</h2><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/image-20230523192847278.png" alt="image-20230523192847278"></p><p>Javaçš„åå°„å°±æ˜¯åˆ©ç”¨ä¸Šé¢ç¬¬äºŒæ­¥åŠ è½½åˆ°jvmä¸­çš„.classæ–‡ä»¶æ¥è¿›è¡Œæ“ä½œçš„ã€‚.classæ–‡ä»¶ä¸­åŒ…å«javaç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå½“ä½ ä¸çŸ¥é“æŸä¸ªç±»å…·ä½“ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–classï¼Œç„¶åè¿›è¡Œå„ç§æ“ä½œã€‚</p><p>Javaåå°„å°±æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼›å¹¶ä¸”èƒ½æ”¹å˜å®ƒçš„å±æ€§ã€‚</p><p>ç±»åŠ è½½å™¨å±‚æ¬¡ç»“æ„</p><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/image-20230523193541423.png" alt="image-20230523193541423"></p><p>è·å–classçš„ä¸‰ç§ç»“æ„</p><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/format,png-16848418498382.png" alt="img"></p><h2 id="classç±»å¸¸ç”¨æ–¹æ³•">classç±»å¸¸ç”¨æ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>String getName()</code></td><td>è¿”å›ç±»çš„å…¨é™å®šåã€‚</td></tr><tr><td><code>Class&lt;?&gt; getSuperclass()</code></td><td>è¿”å›çˆ¶ç±»çš„Classå¯¹è±¡ã€‚</td></tr><tr><td><code>Class&lt;?&gt;[] getInterfaces()</code></td><td>è¿”å›å®ç°çš„æ¥å£çš„Classå¯¹è±¡æ•°ç»„ã€‚</td></tr><tr><td><code>boolean isInterface()</code></td><td>åˆ¤æ–­æ˜¯å¦æ˜¯æ¥å£ã€‚</td></tr><tr><td><code>boolean isAssignableFrom(Class&lt;?&gt; cls)</code></td><td>åˆ¤æ–­æ˜¯å¦å¯ä»¥èµ‹å€¼ç»™æŒ‡å®šçš„ç±»ã€‚</td></tr><tr><td><code>Object newInstance()</code></td><td>åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚</td></tr><tr><td><code>Field[] getFields()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±å­—æ®µçš„æ•°ç»„ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field getField(String name)</code></td><td>è¿”å›æŒ‡å®šåç§°çš„å…¬å…±å­—æ®µï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field[] getDeclaredFields()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰å­—æ®µçš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field getDeclaredField(String name)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šåç§°çš„å­—æ®µï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Method[] getMethods()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±æ–¹æ³•çš„æ•°ç»„ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method getMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›æŒ‡å®šåç§°å’Œå‚æ•°ç±»å‹çš„å…¬å…±æ–¹æ³•ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method[] getDeclaredMethods()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰æ–¹æ³•çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šåç§°å’Œå‚æ•°ç±»å‹çš„æ–¹æ³•ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt;[] getConstructors()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±æ„é€ å‡½æ•°çš„æ•°ç»„ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›æŒ‡å®šå‚æ•°ç±»å‹çš„å…¬å…±æ„é€ å‡½æ•°ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt;[] getDeclaredConstructors()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰æ„é€ å‡½æ•°çš„æ•°ç»„ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šå‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°ã€‚</td></tr></tbody></table><p>ä½œè€…æ€»ç»“çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">getName()ï¼šè·å¾—ç±»çš„å®Œæ•´åå­—ã€‚</span><br><span class="line"></span><br><span class="line">getFields()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„å±æ€§ã€‚</span><br><span class="line"></span><br><span class="line">getDeclaredFields()ï¼šè·å¾—ç±»çš„æ‰€æœ‰å±æ€§ã€‚åŒ…æ‹¬<span class="keyword">private</span> å£°æ˜çš„å’Œç»§æ‰¿ç±»</span><br><span class="line"></span><br><span class="line">getMethods()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">getDeclaredMethods()ï¼šè·å¾—ç±»çš„æ‰€æœ‰æ–¹æ³•ã€‚åŒ…æ‹¬<span class="keyword">private</span> å£°æ˜çš„å’Œç»§æ‰¿ç±»</span><br><span class="line"></span><br><span class="line">getMethod(String name, Class[] parameterTypes)ï¼šè·å¾—ç±»çš„ç‰¹å®šæ–¹æ³•ï¼Œnameå‚æ•°æŒ‡å®šæ–¹æ³•çš„åå­—ï¼ŒparameterTypes å‚æ•°æŒ‡å®šæ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</span><br><span class="line"></span><br><span class="line">getConstructors()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„æ„é€ æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">getConstructor(Class[] parameterTypes)ï¼šè·å¾—ç±»çš„ç‰¹å®šæ„é€ æ–¹æ³•ï¼ŒparameterTypes å‚æ•°æŒ‡å®šæ„é€ æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</span><br><span class="line"></span><br><span class="line">newInstance()ï¼šé€šè¿‡ç±»çš„æ„é€ æ–¹æ³•åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure><h2 id="Classç±»èƒ½å®ç°çš„åŠŸèƒ½">Classç±»èƒ½å®ç°çš„åŠŸèƒ½</h2><h3 id="èƒ½å®ç°çš„åŠŸèƒ½">èƒ½å®ç°çš„åŠŸèƒ½</h3><p>1åˆ¤æ–­å¯¹è±¡å±äºå“ªä¸ªç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">Class class2= person.getClass();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;class2ï¼š&quot;</span>+class2);</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼šclass2ï¼š<span class="keyword">class</span> <span class="title class_">reflect</span>.Person</span><br></pre></td></tr></table></figure><p>2è·å–ç±»ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Person.class;</span><br><span class="line"></span><br><span class="line">Method[] methods = class1.getMethods();</span><br><span class="line"></span><br><span class="line">Method[] declaredMethods = class1.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line">Field[] declaredFields = class1.getDeclaredFields();</span><br></pre></td></tr></table></figure><p>3æ„å»ºå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">Class class2= person.getClass();</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> class2.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼ºè½¬å‰å…ˆç”¨instanceofåˆ¤æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(o <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line"></span><br><span class="line">((Person) o).workIng();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4åŠ¨æ€æ‰§è¡Œæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflect.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Method</span> <span class="variable">work</span> <span class="operator">=</span> class1.getDeclaredMethod(<span class="string">&quot;work&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">work.invoke(person);</span><br></pre></td></tr></table></figure><p>5åŠ¨æ€æ“ä½œå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflect.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> class1.getDeclaredField(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">field.set(person,<span class="string">&quot;pine&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€èµ‹å€¼å’Œæ™®é€šèµ‹å€¼çš„åŒºåˆ«">åŠ¨æ€èµ‹å€¼å’Œæ™®é€šèµ‹å€¼çš„åŒºåˆ«</h3>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»Javaåå°„çš„çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Spring</title>
    <link href="https://momoao.github.io/posts/202308281529.html"/>
    <id>https://momoao.github.io/posts/202308281529.html</id>
    <published>2023-08-28T07:30:03.000Z</published>
    <updated>2023-10-19T01:11:45.201Z</updated>
    
    <content type="html"><![CDATA[<h1>Spring</h1><h1>å¼€å‘æ­¥éª¤</h1><ol><li><p>å¯¼å…¥Springå¼€å‘çš„åŸºæœ¬åŒ…åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230524091130200.png" alt="image-20230524091130200"></p></li><li><p>ç¼–å†™Daoæ¥å£å’Œå®ç°ç±»</p></li><li><p>åˆ›å»ºSpringæ ¸å¿ƒé…ç½®æ–‡ä»¶</p></li><li><p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®UserDaoImpl</p></li><li><p>ä½¿ç”¨Springçš„APIè·å¾—Beanå®ä¾‹</p><p><img src="../assets/image/Spring_Image/image-20230524093003542.png" alt="image-20230524093003542"></p></li></ol><h1>Springé…ç½®æ–‡ä»¶</h1><p>é»˜è®¤ä½¿ç”¨æ— å‚æ„é€ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;userDao&quot;</span> class=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><h2 id="scopeå±æ€§å€¼">scopeå±æ€§å€¼</h2><p><img src="../assets/image/Spring_Image/image-20230524093629771.png" alt="image-20230524093629771"></p><h3 id="singletonæ¨¡å¼">singletonæ¨¡å¼</h3><p><img src="../assets/image/Spring_Image/image-20230524100219430.png" alt="image-20230524100219430"></p><h3 id="prototypeæ¨¡å¼">prototypeæ¨¡å¼</h3><p><img src="../assets/image/Spring_Image/image-20230524110346654.png" alt="image-20230524110346654"></p><p><img src="../assets/image/Spring_Image/image-20230524110356913.png" alt="image-20230524110356913"></p><h3 id="è¿™ä¸¤ä¸ªæ¨¡å¼åˆ›å»ºBeançš„æ—¶æœºä¸åŒ">è¿™ä¸¤ä¸ªæ¨¡å¼åˆ›å»ºBeançš„æ—¶æœºä¸åŒ</h3><ul><li><p>singletonæ¨¡å¼</p><ul><li><p>åœ¨</p></li><li><pre><code>ApplicationContext app = new ClassPathXmlApplicationContext(&quot;applicationCOntext.xml&quot;);<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   æ—¶å°±åˆ›å»ºäº†Bean</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   è¯æ˜ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">        -</span>   ![<span class="string">image-20230524111351773</span>](<span class="link">../assets/image/Spring_Image/image-20230524111351773.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">        -</span>   åœ¨åˆ›å»ºApplicationContextå¯¹è±¡çš„æ—¶å€™è¿™ä¸ªç±»çš„æ— å‚æ„é€ è¢«è°ƒç”¨äº†</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span>   prototypeæ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   åœ¨</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   <span class="code">```</span></span><br><span class="line"><span class="code">        UserDao userDao1 = (UserDao) app.getBean(&quot;userDao&quot;);</span></span><br></pre></td></tr></table></figure></code></pre></li><li><p>æ—¶åˆ›å»ºäº†Bean</p></li></ul></li></ul><h1>Beanå®ç°å¯¹è±¡å®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ— å‚æ„é€ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é»˜è®¤ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚é™æ€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.StaticFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚å®ä¾‹--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚æ ‡ç­¾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.DynamicFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è¿™ä¸ªæ ‡ç­¾æŒ‡å®šå·¥å‚beanã€å·¥å‚æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h1>å°†UserDaoæ³¨å…¥ç»™UserServiceçš„æ–¹æ³•</h1><h2 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³•</h2><p>é€šè¿‡æœ‰å‚æ„é€ å°†UserDaoå†™åœ¨UserServiceçš„æ„é€ æ–¹æ³•å‚æ•°ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="setæ–¹æ³•">setæ–¹æ³•</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™é‡Œnameçš„userDaoæ˜¯setUserDao()åå­—ä¸­setåé¢çš„ï¼Œä½†æ˜¯é¦–å­—æ¯å°å†™--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™ç±»refä¸­çš„userDaoæ˜¯ä¸Šé¢é‚£ä¸ªbeançš„id--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™ä¸ªæ ‡ç­¾çš„ç”¨å¤„æ˜¯å°†bean userDaoé€šè¿‡setUserDao()æ³¨å…¥åˆ°bean userServiceä¸­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="../assets/image/Spring_Image/image-20230524164039354.png" alt="image-20230524164039354"></p><p><img src="../assets/image/Spring_Image/image-20230524171224135.png" alt="image-20230524171224135"></p><h3 id="på‘½åç©ºé—´æ³¨å…¥ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯setæ³¨å…¥ï¼‰">på‘½åç©ºé—´æ³¨å…¥ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯setæ³¨å…¥ï¼‰</h3><p>åœ¨beansæ ‡ç­¾ä¸­æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span> <span class="attr">p:userDao-ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ³¨å…¥æ–¹æ³•åªéœ€è¦æ”¹xmlæ–‡ä»¶ï¼Œä¸éœ€è¦åœ¨UserServiceImplç±»ä¸­åˆ›å»ºsetUserDao()4</p><p><strong>ä»¥ä¸Šè®²çš„æ˜¯å¼•ç”¨ç±»å‹æ•°æ®çš„æ³¨å…¥ï¼Œä¸‹é¢è®²æ™®é€šæ•°æ®ç±»å‹å’Œé›†åˆç±»å‹çš„æ³¨å…¥</strong></p><h1>æ™®é€šç±»å‹æ•°æ®å’Œå¼•ç”¨ç±»å‹çš„æ³¨å…¥</h1><p><img src="../assets/image/Spring_Image/image-20230524192930799.png" alt="image-20230524192930799"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;strList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;u1&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;u2&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>ppp1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>ppp2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Tom&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŒ—äº¬&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jerry&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šæµ·&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>Beanæ ‡ç­¾çš„å¸¸ç”¨æ–¹æ³•</h1><p><img src="../assets/image/Spring_Image/image-20230524201233971.png" alt="image-20230524201233971"></p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>æŒ‡å®šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</td></tr><tr><td>class</td><td>æŒ‡å®šbeançš„ç±»åã€‚</td></tr><tr><td>name</td><td>æŒ‡å®šbeançš„åç§°ã€‚å¯ä»¥ä½¿ç”¨é€—å·æˆ–åˆ†å·åˆ†éš”å¤šä¸ªåç§°ã€‚</td></tr><tr><td>scope</td><td>æŒ‡å®šbeançš„ä½œç”¨åŸŸï¼Œå¦‚singletonï¼ˆå•ä¾‹ï¼‰ã€prototypeï¼ˆåŸå‹ï¼‰ç­‰ã€‚</td></tr><tr><td>constructor-arg</td><td>æŒ‡å®šbeançš„æ„é€ å‡½æ•°å‚æ•°ã€‚å¯ä»¥é€šè¿‡<code>&lt;value&gt;</code>æˆ–<code>&lt;ref&gt;</code>å­å…ƒç´ æ¥æŒ‡å®šå€¼æˆ–å¼•ç”¨å…¶ä»–beanã€‚</td></tr><tr><td>property</td><td>æŒ‡å®šbeançš„å±æ€§ã€‚å¯ä»¥é€šè¿‡<code>&lt;value&gt;</code>æˆ–<code>&lt;ref&gt;</code>å­å…ƒç´ æ¥æŒ‡å®šå€¼æˆ–å¼•ç”¨å…¶ä»–beanã€‚</td></tr><tr><td>init-method</td><td>æŒ‡å®šbeanåˆå§‹åŒ–æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚</td></tr><tr><td>destroy-method</td><td>æŒ‡å®šbeané”€æ¯æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚</td></tr><tr><td>autowire</td><td>æŒ‡å®šè‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¦‚byNameã€byTypeã€constructorç­‰ã€‚</td></tr><tr><td>lazy-init</td><td>æŒ‡å®šæ˜¯å¦å»¶è¿Ÿåˆå§‹åŒ–beanã€‚</td></tr><tr><td>depends-on</td><td>æŒ‡å®šbeançš„ä¾èµ–å…³ç³»ï¼Œå³åœ¨å½“å‰beanå®ä¾‹åŒ–ä¹‹å‰éœ€è¦å…ˆå®ä¾‹åŒ–çš„å…¶ä»–beanã€‚</td></tr><tr><td>factory-bean</td><td>æŒ‡å®šä¸€ä¸ªå·¥å‚beançš„åç§°ï¼Œç”¨äºåˆ›å»ºå½“å‰beanå®ä¾‹ã€‚</td></tr><tr><td>factory-method</td><td>æŒ‡å®šå·¥å‚beanä¸­ç”¨äºåˆ›å»ºå½“å‰beanå®ä¾‹çš„é™æ€æ–¹æ³•ã€‚</td></tr></tbody></table><h1>getBean()ä½¿ç”¨</h1><p><img src="../assets/image/Spring_Image/image-20230525093249319.png" alt="image-20230525093249319"></p><p>å› ä¸º</p><p><img src="../assets/image/Spring_Image/image-20230525092849583.png" alt="image-20230525092849583"></p><p>ä½†æ˜¯å¦‚æœæœ‰ä¸¤ä¸ªbeanï¼Œè¿˜é€šè¿‡.getBean(UserService.class)è·å–å¯¹è±¡å°±ä¼šæŠ¥é”™ã€‚</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­ï¼Œå½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®Beançš„idä»å®¹å™¨ä¸­è·å¾—Beanå®ä¾‹ï¼Œè¿”å›æ˜¯<span class="keyword">Object</span>ï¼Œéœ€è¦å¼ºè½¬ã€‚</span><br><span class="line">å½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯<span class="keyword">Class</span>ç±»å‹æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®ç±»å‹ä»å®¹å™¨ä¸­åŒ¹é…Beanå®ä¾‹ï¼Œå½“å®¹å™¨ä¸­ç›¸åŒç±»å‹çš„Beanæœ‰å¤šä¸ªæ—¶ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure><h1>Springé…ç½®æ•°æ®æº</h1><h2 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h2><p><img src="../assets/image/Spring_Image/image-20230525161326550.png" alt="image-20230525161326550"></p><h2 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h2><p><img src="../assets/image/Spring_Image/image-20230525161340641.png" alt="image-20230525161340641"></p><h2 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰</h2><p><img src="../assets/image/Spring_Image/image-20230525161359050.png" alt="image-20230525161359050"></p><p><img src="../assets/image/Spring_Image/image-20230525161415108.png" alt="image-20230525161415108"></p><h2 id="æ–¹æ³•å››">æ–¹æ³•å››</h2><p>è¿™ç§æ–¹æ³•è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯ç§é…ç½®æ–‡ä»¶éƒ½åº”è¯¥æœ‰è‡ªå·±çš„èŒè´£</p><p>ä¾‹å¦‚xmlé…ç½®springç”¨</p><p>è€Œmysqlçš„é…ç½®æ”¾åœ¨propertiesä¸­æ›´å¥½ä¸€äº›</p><p>æ–¹æ³•äº”å°†å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œä¼˜åŒ–</p><p><img src="../assets/image/Spring_Image/image-20230525161438908.png" alt="image-20230525161438908"></p><p><img src="../assets/image/Spring_Image/image-20230525161446087.png" alt="image-20230525161446087"></p><h2 id="æ–¹æ³•äº”">æ–¹æ³•äº”</h2><h3 id="åœ¨xmlæ–‡ä»¶ä¸­åˆ›å»ºå‘½åç©ºé—´context">åœ¨xmlæ–‡ä»¶ä¸­åˆ›å»ºå‘½åç©ºé—´context</h3><p>å¤åˆ¶xmlnsé‚£è¡Œç²˜è´´åœ¨ä¸‹é¢ï¼Œåé¢åŠ :contextï¼ŒæŠŠbeansæ”¹ä¸ºcontext</p><p>åœ¨xsi:schemaLocationçš„å€¼çš„å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸€è¡Œæ–°æ•°æ®ï¼ˆæ³¨æ„åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼‰ï¼ŒæŠŠbeansæ”¹ä¸ºcontext</p><p><img src="../assets/image/Spring_Image/image-20230525162300727.png" alt="image-20230525162300727"></p><h3 id="åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶">åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶</h3><p><img src="../assets/image/Spring_Image/image-20230525162501007.png" alt="image-20230525162501007"></p><p>ç„¶åå°±å¯ä»¥åœ¨beanä¸­ä½¿ç”¨propertiesäº†</p><p><img src="../assets/image/Spring_Image/image-20230525162631930.png" alt="image-20230525162631930"></p><p>testæ–¹æ³•ä¸­ä½¿ç”¨bean</p><p><img src="../assets/image/Spring_Image/image-20230525162821705.png" alt="image-20230525162821705"></p><h1>Springæ³¨è§£å¼€å‘</h1><p>Springæ˜¯è½»ä»£ç è€Œé‡é…ç½®çš„æ¡†æ¶ï¼Œé…ç½®æ¯”è¾ƒç¹é‡ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥æ³¨è§£å¼€å‘æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œæ³¨è§£ä»£æ›¿xmlé…ç½®æ–‡ä»¶å¯ä»¥ç®€åŒ–é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>SpringåŸå§‹æ³¨è§£ä¸»è¦æ˜¯æ›¿ä»£<Bean>çš„é…ç½®</p><h2 id="åŸå§‹æ³¨è§£">åŸå§‹æ³¨è§£</h2><p>SpringåŸå§‹æ³¨è§£ï¼š</p><p>2ã€3ã€4å·æ³¨è§£å’Œ1å·ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨ä¸åŒçš„å±‚ä½¿ç”¨ä¸åŒçš„æ³¨è§£å¯è¯»æ€§å¼ºä¸€äº›</p><table><thead><tr><th><strong>æ³¨è§£</strong></th><th style="text-align:left"><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@Component</td><td style="text-align:left">ä½¿ç”¨åœ¨ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Controller</td><td style="text-align:left">ä½¿ç”¨åœ¨webå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Service</td><td style="text-align:left">ä½¿ç”¨åœ¨serviceå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Repository</td><td style="text-align:left">ä½¿ç”¨åœ¨daoå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Autowired</td><td style="text-align:left">ä½¿ç”¨åœ¨å­—æ®µä¸Šç”¨äºæ ¹æ®ç±»å‹ä¾èµ–æ³¨å…¥</td></tr><tr><td>@Qualifier</td><td style="text-align:left">ç»“åˆ@Autowiredä¸€èµ·ä½¿ç”¨ç”¨äºæ ¹æ®åç§°è¿›è¡Œä¾èµ–æ³¨å…¥</td></tr><tr><td>@Resource</td><td style="text-align:left">ç›¸å½“äº@Autowired+@Qualifierï¼ŒæŒ‰ç…§åç§°è¿›è¡Œæ³¨å…¥</td></tr><tr><td>@Value</td><td style="text-align:left">æ³¨å…¥æ™®é€šå±æ€§</td></tr><tr><td>@Scope</td><td style="text-align:left">æ ‡æ³¨Beançš„ä½œç”¨èŒƒå›´</td></tr><tr><td>@PostConstruct</td><td style="text-align:left">ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„åˆå§‹åŒ–æ–¹æ³•</td></tr><tr><td>@PreDestroy</td><td style="text-align:left">ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„é”€æ¯æ–¹æ³•</td></tr></tbody></table><h3 id="å¼•ç”¨æ•°æ®ç±»å‹æ³¨å…¥">å¼•ç”¨æ•°æ®ç±»å‹æ³¨å…¥</h3><p>ä¸ä½¿ç”¨æ³¨è§£æ—¶çš„å¼€å‘ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525174516514.png" alt="image-20230525174516514"></p><p>ä½¿ç”¨æ³¨è§£çš„å¼€å‘ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525174739036.png" alt="image-20230525174739036"></p><p><img src="../assets/image/Spring_Image/image-20230525174750940.png" alt="image-20230525174750940"></p><p><img src="../assets/image/Spring_Image/image-20230525174756764.png" alt="image-20230525174756764"></p><p>ä¸Šé¢è¿™ä¸ªä»£ç ä¹Ÿå¯ä»¥ä¸å†™set()ï¼Œåœ¨å±æ€§ä¸Šé¢å†™ä¸¤ä¸ªæ³¨è§£ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525175234254.png" alt="image-20230525175234254"></p><p>ç”šè‡³ä¸ç”¨@Qualifier(â€œuserDaoâ€)ä¹Ÿå¯ä»¥</p><p>è¿™ç§å°±æ˜¯Springæ ¹æ®æ•°æ®ç±»å‹ä»å®¹å™¨ä¸­è·å–ï¼ˆæ‰¾UserDaoç±»å‹çš„beanè¿›è¡Œæ³¨å…¥ï¼‰ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªUserDaoç±»å‹çš„beanï¼Œå¦‚æœæœ‰å¤šä¸ªå°±å¿…é¡»é€šè¿‡@Qualifier(â€œuserDaoâ€)æ¥æŒ‡å®šæ³¨å…¥beançš„id</p><p>@Qualifieræ¯æ¬¡ä½¿ç”¨éƒ½è¦å’Œ@Autowiredæ­é…ä½¿ç”¨ï¼Œåä¹‹åˆ™ä¸å¿…é¡»</p><p><img src="../assets/image/Spring_Image/image-20230525175305381.png" alt="image-20230525175305381"></p><h3 id="æ™®é€šæ•°æ®ç±»å‹çš„æ³¨å…¥">æ™®é€šæ•°æ®ç±»å‹çš„æ³¨å…¥</h3><p><img src="../assets/image/Spring_Image/image-20230525175940199.png" alt="image-20230525175940199"></p><p><img src="../assets/image/Spring_Image/image-20230525180137750.png" alt="image-20230525180137750"></p><p>ä½¿ç”¨ä¸Šé¢è¿™ç§æ—¶è®°å¾—åœ¨xmlæ·»åŠ å¤–éƒ¨é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230525180235443.png" alt="image-20230525180235443"></p><p>ä½¿ç”¨æ³¨è§£æ³¨å…¥beançš„scopeå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230525180353087.png" alt="image-20230525180353087"></p><p>åªç”¨æ³¨è§£æŒ‡å®šbeançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230525180746096.png" alt="image-20230525180746096"></p><h2 id="æ–°æ³¨è§£">æ–°æ³¨è§£</h2><p>ä½¿ç”¨ä¸Šé¢çš„æ³¨è§£è¿˜ä¸èƒ½å…¨éƒ¨æ›¿ä»£xmlé…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦ä½¿ç”¨æ³¨è§£æ›¿ä»£çš„é…ç½®å¦‚ä¸‹ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525181241227.png" alt="image-20230525181241227"></p><p>æ‰€ä»¥éœ€è¦æ›´å¤šçš„æ³¨è§£</p><p>æ–°æ³¨è§£ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525181337349.png" alt="image-20230525181337349"></p><p>é€šè¿‡æ³¨è§£ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</p><p>ä¸»é…ç½®ç±»ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525183645266.png" alt="image-20230525183645266"></p><p>æ•°æ®æºé…ç½®ç±»ï¼š</p><p>ä¸»è¦è´Ÿè´£è·å¾—æ•°æ®æºï¼ˆä¾‹å¦‚ï¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯å†è¿æ¥MySQLï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230525183738657.png" alt="image-20230525183738657"></p><p>å°†é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®è¯»åˆ°å±æ€§ä¸­æ‰èƒ½ä½¿ç”¨</p><p><img src="../assets/image/Spring_Image/image-20230525183837510.png" alt="image-20230525183837510"></p><p>åœ¨ä½¿ç”¨@Bean(â€œdataSourceâ€)å°†æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ”¾åˆ°å®¹å™¨ä¸­</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Springä¼šå°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼å·²æŒ‡å®šåç§°å­˜å‚¨åˆ°Springçš„å®¹å™¨ä¸­</span><br><span class="line">å’Œ<span class="meta">@Component</span>ä¸åŒçš„åœ°æ–¹ï¼š</span><br><span class="line"><span class="meta">@Component</span>æ˜¯é€šè¿‡ç±»åˆ›å»ºbeanæ”¾åˆ°å®¹å™¨ï¼Œå¯èƒ½é€šè¿‡</span><br><span class="line">  <span class="meta">@Autowired</span>å’Œ <span class="meta">@Qualifier</span>å¯¹å¼•ç”¨å€¼æ³¨å…¥</span><br><span class="line">  <span class="meta">@Value</span>å¯¹æ™®é€šæ•°æ®ç±»å‹æ³¨å…¥</span><br><span class="line">è€Œ<span class="meta">@Bean</span>æ˜¯æŠŠç»è¿‡æ–¹æ³•å¤„ç†çš„æ•°æ®æ”¾åˆ°å®¹å™¨ä¸­</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Spring_Image/image-20230525183920925.png" alt="image-20230525183920925"></p><p>å¼€å‘åçš„æµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230525184150286.png" alt="image-20230525184150286"></p><h1>Springæ•´åˆJUnit</h1><p>å› ä¸ºï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525184729697.png" alt="image-20230525184729697"></p><p>è§£å†³æ€è·¯ï¼š</p><ul><li>è®©SpringJunitè´Ÿè´£åˆ›å»ºSpringå®¹å™¨ï¼Œä½†æ˜¯éœ€è¦å°†é…ç½®æ–‡ä»¶çš„åç§°å‘Šè¯‰å®ƒ</li><li>å°†éœ€è¦è¿›è¡Œæµ‹è¯•Beanç›´æ¥åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ³¨å…¥</li></ul><p>Springé›†æˆJunitæ­¥éª¤ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525184839840.png" alt="image-20230525184839840"></p><p>å¯¼å…¥åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230525191924851.png" alt="image-20230525191924851"></p><p>å†™æµ‹è¯•ç±»è¿è¡Œå°±å¯ä»¥ä½¿ç”¨</p><p><img src="../assets/image/Spring_Image/image-20230525193314457.png" alt="image-20230525193314457"></p><p>å°±ç®—åªè¿è¡Œtest1()ï¼Œä¹Ÿä¼šä»applicationContext.xmlä¸­è¯»å–éœ€è¦çš„å†…å®¹</p><p><img src="../assets/image/Spring_Image/image-20230525193502055.png" alt="image-20230525193502055"></p><p><img src="../assets/image/Spring_Image/image-20230525193733099.png" alt="image-20230525193733099"></p><p><img src="../assets/image/Spring_Image/image-20230525193800525.png" alt="image-20230525193800525"></p><p>ä¸ä½†å¯ä»¥é€šè¿‡xmlæ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ç±»æ¥æµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230525195652352.png" alt="image-20230525195652352"></p><h1>SpringAOP</h1><h2 id="åˆ‡é¢-åˆ‡ç‚¹-é€šçŸ¥">åˆ‡é¢=åˆ‡ç‚¹+é€šçŸ¥</h2><p>ä»€ä¹ˆæ˜¯AOP</p><p><img src="../assets/image/Spring_Image/image-20230526151632822.png" alt="image-20230526151632822"></p><p>ä½œç”¨åŠå…¶ä¼˜åŠ¿</p><p><img src="../assets/image/Spring_Image/image-20230526151657426.png" alt="image-20230526151657426"></p><p>åº•å±‚å®ç°</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚</span><br></pre></td></tr></table></figure><h2 id="åŸºäºJDKçš„åŠ¨æ€ä»£ç†">åŸºäºJDKçš„åŠ¨æ€ä»£ç†</h2><h3 id="ç›®æ ‡å¯¹è±¡">ç›®æ ‡å¯¹è±¡</h3><p><img src="../assets/image/Spring_Image/image-20230526160309406.png" alt="image-20230526160309406"></p><h3 id="å¢å¼ºå¯¹è±¡">å¢å¼ºå¯¹è±¡</h3><p><img src="../assets/image/Spring_Image/image-20230526160320891.png" alt="image-20230526160320891"></p><p>ä½¿ç”¨å¢å¼ºå¯¹è±¡ å¯¹ ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½è¿›è¡Œå¢å¼º</p><p><img src="../assets/image/Spring_Image/image-20230526160404843.png" alt="image-20230526160404843"></p><h2 id="åŸºäºcglibçš„åŠ¨æ€ä»£ç†">åŸºäºcglibçš„åŠ¨æ€ä»£ç†</h2><p>mavenå®˜æ–¹æ•´åˆäº†cglibè¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…</p><p><img src="../assets/image/Spring_Image/image-20230526173343588.png" alt="image-20230526173343588"></p><h2 id="AOPç›¸å…³æ¦‚å¿µ">AOPç›¸å…³æ¦‚å¿µ</h2><p><img src="../assets/image/Spring_Image/image-20230526185340919.png" alt="image-20230526185340919"></p><h2 id="AOP-å¼€å‘æ˜ç¡®çš„äº‹é¡¹">AOP å¼€å‘æ˜ç¡®çš„äº‹é¡¹</h2><p><img src="../assets/image/Spring_Image/image-20230526190210094.png" alt="image-20230526190210094"></p><h2 id="xmlå®ç°AOP">xmlå®ç°AOP</h2><h3 id="é€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç±»å‹">é€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç±»å‹</h3><p><img src="../assets/image/Spring_Image/image-20230527163019327.png" alt="image-20230527163019327"></p><p>å¢åŠ aopå‘½åç©ºé—´</p><p><img src="../assets/image/Spring_Image/image-20230527093235236.png" alt="image-20230527093235236"></p><h3 id="ä½¿ç”¨å‰åç½®æ–¹æ³•è¿›è¡Œå¢å¼º">ä½¿ç”¨å‰åç½®æ–¹æ³•è¿›è¡Œå¢å¼º</h3><p>xmlä¸­çš„é…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230527093347536.png" alt="image-20230527093347536"></p><p>ä½¿ç”¨Springä¸­æ•´åˆçš„JUnitè¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527093414356.png" alt="image-20230527093414356"></p><p>è¿è¡Œç»“æœ</p><p><img src="../assets/image/Spring_Image/image-20230527093427571.png" alt="image-20230527093427571"></p><p>åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230527102831520.png" alt="image-20230527102831520"></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡å®šå›ºå®šçš„æŸä¸ªæ–¹æ³•ï¼Œè¿™ç§è¡¨è¾¾å¼ä¸å¸¸ç”¨</span><br><span class="line">execution(<span class="keyword">public</span> <span class="keyword">void</span> com.itheima.aop.Target.method())</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šTargetç±»ä¸‹çš„æ‰€æœ‰<span class="keyword">void</span>æ–¹æ³•</span><br><span class="line">execution(<span class="keyword">void</span> com.itheima.aop.Target.*(..))</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šaopåŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼ä»»æ„</span><br><span class="line">execution(* com.itheima.aop.*.*(..))</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šaopåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼ä»»æ„   </span><br><span class="line">execution(* com.itheima.aop..*.*(..))</span><br><span class="line">    </span><br><span class="line">è¿™ç§æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰</span><br><span class="line">execution(* *..*.*(..))</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç¯ç»•æ–¹æ³•è¿›è¡Œå¢å¼º">ä½¿ç”¨ç¯ç»•æ–¹æ³•è¿›è¡Œå¢å¼º</h3><p>æ•ˆæœå’Œå‰åç½®ä¸€æ ·</p><p><img src="../assets/image/Spring_Image/image-20230527162023399.png" alt="image-20230527162023399"></p><p>å°†ä¹‹å‰å†™åœ¨ä¸¤ä¸ªæ–¹æ³•ä¸­çš„å†…å®¹ï¼Œåœ¨ä¸€ä¸ªç¯ç»•æ–¹æ³•ä¸­å®ç°</p><p><img src="../assets/image/Spring_Image/image-20230527162031929.png" alt="image-20230527162031929"></p><h3 id="å¯¹æ–¹æ³•çš„å¼‚å¸¸å¤„ç†è¿›è¡Œå¢å¼º">å¯¹æ–¹æ³•çš„å¼‚å¸¸å¤„ç†è¿›è¡Œå¢å¼º</h3><p>åœ¨é…ç½®æ–‡ä»¶ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230527162414419.png" alt="image-20230527162414419"></p><p>åœ¨ç›®æ ‡æ–¹æ³•ä¸­å†™ä¸€ä¸ªå¼‚å¸¸</p><p><img src="../assets/image/Spring_Image/image-20230527162421234.png" alt="image-20230527162421234"></p><p>åœ¨MyAspectç±»ä¸­æ–°å¢ä¸€ä¸ªç”¨äºå¼‚å¸¸å¤„ç†çš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230527162431636.png" alt="image-20230527162431636"></p><h3 id="æœ€ç»ˆå¢å¼º">æœ€ç»ˆå¢å¼º</h3><p>åœ¨MyAspectç±»ä¸­æ–°å¢ä¸€ä¸ªç”¨äºæœ€ç»ˆå¢å¼ºçš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230527162649720.png" alt="image-20230527162649720"></p><p>xmlä¸­è¿›è¡Œé…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230527162714155.png" alt="image-20230527162714155"></p><p>æ‰§è¡Œç»“æœ</p><p><img src="../assets/image/Spring_Image/image-20230527162918780.png" alt="image-20230527162918780"></p><p>æœ‰å¼‚å¸¸æ—¶çš„å¢å¼º</p><p><img src="../assets/image/Spring_Image/image-20230527162938700.png" alt="image-20230527162938700"></p><h3 id="xmlä¸­æ›´å¥½çš„å†™æ³•">xmlä¸­æ›´å¥½çš„å†™æ³•</h3><p>é€šè¿‡è¡¨è¾¾å¼</p><p><img src="../assets/image/Spring_Image/image-20230527173053857.png" alt="image-20230527173053857"></p><h2 id="åŸºäºæ³¨è§£çš„AOPå¼€å‘">åŸºäºæ³¨è§£çš„AOPå¼€å‘</h2><p>å¼€å‘æ­¥éª¤</p><p><img src="../assets/image/Spring_Image/image-20230527173932228.png" alt="image-20230527173932228"></p><p>åˆ‡ç‚¹è¡¨è¾¾å¼ç”¨äºæŒ‡æ˜å¯¹å“ªäº›æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>ç›®æ ‡ç±»ç”¨æ³¨è§£åŠ è½½è¿›å®¹å™¨ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230527180726305.png" alt="image-20230527180726305"></p><p>å¸¦æœ‰é€šçŸ¥çš„ç±»é€šè¿‡æ³¨è§£åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œå¹¶æŒ‡æ˜è¿™ä¸ªç±»æ˜¯åˆ‡é¢ç±»</p><p><img src="../assets/image/Spring_Image/image-20230527181017239.png" alt="image-20230527181017239"></p><p>å°†é€šçŸ¥åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œéœ€æŒ‡æ˜åˆ‡ç‚¹è¡¨è¾¾å¼</p><p><img src="../assets/image/Spring_Image/image-20230527181044398.png" alt="image-20230527181044398"></p><p>åœ¨xmlä¸­å¼€å¯ç»„ä»¶æ‰«æã€å¼€å¯aopè‡ªåŠ¨ä»£ç†</p><p><img src="../assets/image/Spring_Image/image-20230527181139590.png" alt="image-20230527181139590"></p><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527181156639.png" alt="image-20230527181156639"></p><p>åŸºäºæ³¨è§£çš„AOPå¼€å‘çš„çŸ¥è¯†è¦ç‚¹</p><p><img src="../assets/image/Spring_Image/image-20230527181339131.png" alt="image-20230527181339131"></p><h1>jdbcæ¨¡æ¿</h1><ol><li>åˆ›å»ºæ•°æ®æº</li><li>åˆ›å»ºæ¨¡æ¿</li><li>è®¾ç½®æ¨¡æ¿çš„æ•°æ®æºå¯¹è±¡</li><li>æ‰§è¡Œæ“ä½œ</li></ol><p><img src="../assets/image/Spring_Image/image-20230527194006087.png" alt="image-20230527194006087"></p><p>å°†ä¸Šé¢å›¾ç‰‡ä¸­çš„æ“ä½œå˜ä¸ºspring xmlä¸­çš„æ“ä½œå°±æ˜¯</p><p><img src="../assets/image/Spring_Image/image-20230527194833220.png" alt="image-20230527194833220"></p><p><img src="../assets/image/Spring_Image/image-20230527195216939.png" alt="image-20230527195216939"></p><p>æŠŠæ•°æ®åº“ä¿¡æ¯æ”¾åœ¨propertiesä¸­</p><p>æ·»åŠ å‘½åç©ºé—´ã€åŠ è½½é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230527195632141.png" alt="image-20230527195632141"></p><p>ç”¨SpringJunit4è¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527200240194.png" alt="image-20230527200240194"></p><p>æŸ¥è¯¢</p><p>æŸ¥è¯¢å¤šåˆ—ï¼ˆåŠ å¤šè¡Œï¼‰æ•°æ®å’Œå•ä¸ªæ•°æ®</p><p><img src="../assets/image/Spring_Image/image-20230527203751932.png" alt="image-20230527203751932"></p><p>ç”¨Accountç±»è¿›è¡Œæ¥å—æ•°æ®çš„æ“ä½œ</p><p>ç±»ä¸­å¿…é¡»å«æœ‰æŸ¥è¯¢å‡ºæ¥çš„ç»“æœçš„å¯¹åº”å±æ€§</p><p><strong>å¹¶ä¸”å¿…é¡»æœ‰è¿™å†™å±æ€§çš„set()   å¯ä»¥æ²¡æœ‰get()</strong></p><p><strong>ç±»çš„å±æ€§åå’Œæ•°æ®åº“çš„åˆ—åå¿…é¡»ç›¸åŒ</strong></p><p><img src="../assets/image/Spring_Image/image-20230527204144865.png" alt="image-20230527204144865"></p><h2 id="çŸ¥è¯†è¦ç‚¹">çŸ¥è¯†è¦ç‚¹</h2><p><img src="../assets/image/Spring_Image/image-20230527204723426.png" alt="image-20230527204723426"></p><h1>Springäº‹åŠ¡æ§åˆ¶</h1><h2 id="ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶">ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶</h2><h3 id="TransactionDefinition">TransactionDefinition</h3><p><img src="../assets/image/Spring_Image/image-20230528171824146.png" alt="image-20230528171824146"></p><h3 id="äº‹åŠ¡éš”ç¦»ç­‰çº§">äº‹åŠ¡éš”ç¦»ç­‰çº§</h3><p>æœ€åä¸€ä¸ªï¼šä¸²è¡ŒåŒ–    ç›¸å½“äºé”è¡¨</p><p><img src="../assets/image/Spring_Image/image-20230528172103438.png" alt="image-20230528172103438"></p><h3 id="äº‹åŠ¡ä¼ æ’­è¡Œä¸º">äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><p><img src="../assets/image/Spring_Image/image-20230528172218278.png" alt="image-20230528172218278"></p><h3 id="TransactionStatus">TransactionStatus</h3><p><img src="../assets/image/Spring_Image/image-20230528173344446.png" alt="image-20230528173344446"></p><h3 id="ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ä¸‰å¤§å¯¹è±¡">ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ä¸‰å¤§å¯¹è±¡</h3><p>æ ¹æ®DAOå±‚é‡‡ç”¨ä¸åŒçš„æŠ€æœ¯æ—¶ï¼Œç”¨ä¸åŒçš„å¯¹è±¡æ§åˆ¶</p><p><img src="../assets/image/Spring_Image/image-20230528174020171.png" alt="image-20230528174020171"></p><h2 id="å£°æ˜å¼äº‹åŠ¡æ§åˆ¶">å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h2><h3 id="åŸºäºXML">åŸºäºXML</h3><p>ä»€ä¹ˆæ˜¯å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Spring</span> çš„å£°æ˜å¼äº‹åŠ¡é¡¾åæ€ä¹‰å°±æ˜¯é‡‡ç”¨å£°æ˜çš„æ–¹å¼æ¥å¤„ç†äº‹åŠ¡ã€‚è¿™é‡Œæ‰€è¯´çš„å£°æ˜ï¼Œå°±æ˜¯æŒ‡åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ï¼Œç”¨åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å£°æ˜å¼çš„å¤„ç†äº‹åŠ¡æ¥ä»£æ›¿ä»£ç å¼çš„å¤„ç†äº‹åŠ¡ã€‚</span><br></pre></td></tr></table></figure><p>å£°æ˜å¼äº‹åŠ¡å¤„ç†çš„ä½œç”¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">äº‹åŠ¡ç®¡ç†ä¸ä¾µå…¥å¼€å‘çš„ç»„ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œä¸šåŠ¡é€»è¾‘å¯¹è±¡å°±ä¸ä¼šæ„è¯†åˆ°æ­£åœ¨äº‹åŠ¡ç®¡ç†ä¹‹ä¸­ï¼Œäº‹å®ä¸Šä¹Ÿåº”è¯¥å¦‚æ­¤ï¼Œå› ä¸ºäº‹åŠ¡ç®¡ç†æ˜¯å±äºç³»ç»Ÿå±‚é¢çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæƒ³è¦æ”¹å˜äº‹åŠ¡ç®¡ç†ç­–åˆ’çš„è¯ï¼Œä¹Ÿåªéœ€è¦åœ¨å®šä¹‰æ–‡ä»¶ä¸­é‡æ–°é…ç½®å³å¯</span><br><span class="line">åœ¨ä¸éœ€è¦äº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œåªè¦åœ¨è®¾å®šæ–‡ä»¶ä¸Šä¿®æ”¹ä¸€ä¸‹ï¼Œå³å¯ç§»å»äº‹åŠ¡ç®¡ç†æœåŠ¡ï¼Œæ— éœ€æ”¹å˜ä»£ç é‡æ–°ç¼–è¯‘ï¼Œè¿™æ ·ç»´æŠ¤èµ·æ¥æå…¶æ–¹ä¾¿</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šSpring å£°æ˜å¼äº‹åŠ¡æ§åˆ¶åº•å±‚å°±æ˜¯AOP</strong>ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</p><h3 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h3><p><img src="../assets/image/Spring_Image/image-20230528175846163.png" alt="image-20230528175846163"></p><h4 id="åœ¨xmlæ–‡ä»¶ä¸­">åœ¨xmlæ–‡ä»¶ä¸­</h4><p>1.é…ç½®æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090016333.png" alt="image-20230531090016333"></p><p>2.é…ç½®jdbcæ¨¡æ¿</p><p>é‡Œé¢æ³¨å…¥æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090144429.png" alt="image-20230531090144429"></p><p>3.é…ç½®è‡ªå·±å†™çš„æŒä¹…å±‚ç±»</p><p>æ³¨å…¥jdbcæ¨¡æ¿ç»™è¿™ä¸ªç±»çš„å±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230531090402268.png" alt="image-20230531090402268"></p><p><img src="../assets/image/Spring_Image/image-20230531090255770.png" alt="image-20230531090255770"></p><p>4.é…ç½®è‡ªå·±å†™çš„ä¸šåŠ¡å±‚ç±»</p><p>æ³¨å…¥æŒä¹…å±‚ç±»</p><p><img src="../assets/image/Spring_Image/image-20230531090342933.png" alt="image-20230531090342933"></p><p><img src="../assets/image/Spring_Image/image-20230531090424272.png" alt="image-20230531090424272"></p><p>5.é…ç½®å¹³å°äº‹åŠ¡ç®¡ç†å™¨</p><p>æ³¨å…¥æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090519305.png" alt="image-20230531090519305"></p><p>6.äº‹åŠ¡ï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰çš„å¢å¼º</p><p>å…ˆæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨</p><p>ç„¶åæ·»åŠ äº‹åŠ¡çš„å±æ€§</p><p>â€‹[æ–¹æ³•å]    [éš”ç¦»ç­‰çº§]    [æ˜¯å¦åªè¯»]</p><p>å¦‚æœè®¾ç½®åªè¯»ï¼Œnameè¿™ä¸ªæ–¹æ³•åªèƒ½è¯»æ•°æ®åº“ä¸èƒ½å†™</p><p><img src="../assets/image/Spring_Image/image-20230531092715160.png" alt="image-20230531092715160"></p><p>7.ç”¨aopå°†äº‹åŠ¡çš„å¢å¼ºç»‡å…¥åˆ°åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­</p><p>è™½ç„¶ä¸Šé¢æŒ‡å®šäº†éœ€è¦äº‹åŠ¡æ§åˆ¶çš„æ–¹æ³•åï¼Œä½†æ˜¯aopç»‡å…¥çš„æ—¶å€™ä¹Ÿè¦æŒ‡å®šå°†å“ªä¸ªäº‹åŠ¡å¢å¼ºç»‡å…¥åˆ°å“ªä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230531090952569.png" alt="image-20230531090952569"></p><h3 id="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶">åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h3><p>åœ¨xmlä¸­</p><p>å¼€å¯ç»„ä»¶æ‰«æã€æ·»åŠ æ•°æ®æºã€æ·»åŠ jdbcæ¨¡æ¿ã€æ·»åŠ äº‹åŠ¡æ§åˆ¶ç®¡ç†å™¨ã€äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</p><p>å…¶ä¸­jdbcæ¨¡æ¿å’Œäº‹åŠ¡ç®¡ç†å™¨éƒ½è¦æ³¨å…¥æ•°æ®æº</p><p><strong>ä¸åŠ æ³¨è§£é©±åŠ¨æ³¨è§£å¯èƒ½ä¸èµ·ä½œç”¨</strong></p><p><img src="../assets/image/Spring_Image/image-20230531095808450.png" alt="image-20230531095808450"></p><p>æŒä¹…å±‚</p><p>æ³¨å…¥jdbcæ¨¡æ¿</p><p><img src="../assets/image/Spring_Image/image-20230531095826459.png" alt="image-20230531095826459"></p><p>ä¸šåŠ¡å±‚</p><p>æ³¨å…¥æŒä¹…å±‚</p><p>ç»™éœ€è¦äº‹åŠ¡æ§åˆ¶çš„æ–¹æ³•ä½¿ç”¨æ³¨è§£@Transactional</p><p>é€šè¿‡ç»™æ³¨è§£æ·»åŠ å±æ€§(isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED)</p><p>å®ç°éš”ç¦»ç­‰çº§ã€ä¼ æ’­ã€æ˜¯å¦åªè¯»çš„è®¾ç½®</p><p><img src="../assets/image/Spring_Image/image-20230531095852416.png" alt="image-20230531095852416"></p><h1>Springé›†æˆwebç¯å¢ƒ</h1><p>pom.xmlä¸­æ·»åŠ ä¸¤ä¸ªæ–°çš„åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230601154914365.png" alt="image-20230601154914365"></p><p>webå±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160436675.png" alt="image-20230601160436675"></p><p>æœåŠ¡å±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160451287-16856066914451.png" alt="image-20230601160451287"></p><p>æŒä¹…å±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160502709.png" alt="image-20230601160502709"></p><p>applicationContext.xmlä¸­æŠŠDaoæ³¨å…¥åˆ°Serviceä¸­</p><p><img src="../assets/image/Spring_Image/image-20230601160534406.png" alt="image-20230601160534406"></p><p>webå±‚è°ƒç”¨â€“&gt;Serviceâ€“&gt;Dao</p><p>æ¯æ¬¡ä½¿ç”¨webå±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure><p>éƒ½è¦åŠ è½½é…ç½®æ–‡ä»¶å’Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</p><p><img src="../assets/image/Spring_Image/image-20230601160821601.png" alt="image-20230601160821601"></p><p>è§£å†³æ–¹æ³•ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230601161003281.png" alt="image-20230601161003281"></p><h2 id="å¼€å‘æ­¥éª¤">å¼€å‘æ­¥éª¤</h2><h3 id="web-xmlä¸­">web.xmlä¸­</h3><p>é…ç½®å…¨å±€ä¸Šä¸‹æ–‡å‚æ•°ï¼Œåœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡nameè®¿é—®valueçš„å€¼</p><p>è¿™æ ·æ”¹é…ç½®æ–‡ä»¶çš„æ—¶å€™å°±ä¸ç”¨æ”¹ä»£ç äº†</p><p><img src="../assets/image/Spring_Image/image-20230601181728122.png" alt="image-20230601181728122"></p><p>é…ç½®ç›‘å¬å™¨</p><p><img src="../assets/image/Spring_Image/image-20230601181837657.png" alt="image-20230601181837657"></p><p>æ€»ç»“</p><p><img src="../assets/image/Spring_Image/image-20230601182916680.png" alt="image-20230601182916680"></p><p><strong>MVC == Model  View  Control</strong></p><h1>SpringMVC</h1><p>æ¦‚è¿°</p><p><img src="../assets/image/Spring_Image/image-20230601190911958.png" alt="image-20230601190911958"></p><h2 id="å¼€å‘æ­¥éª¤-2">å¼€å‘æ­¥éª¤</h2><p><img src="../assets/image/Spring_Image/image-20230602152213016.png" alt="image-20230602152213016"></p><h3 id="web-xml">web.xml</h3><p>é…ç½®å‰ç«¯æ§åˆ¶å™¨</p><p><img src="../assets/image/Spring_Image/image-20230602162411110.png" alt="image-20230602162411110"></p><p>é…ç½®å…¨å±€åˆå§‹åŒ–å‚æ•°</p><p>å°†ä¼˜å…ˆåˆå§‹åŒ–è¿™ä¸ªèµ„æºxmlæ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230602162502572.png" alt="image-20230602162502572"></p><p>é…ç½®ç›‘å¬å™¨</p><p><img src="../assets/image/Spring_Image/image-20230602162714540.png" alt="image-20230602162714540"></p><p>é…ç½®è‡ªå·±çš„æ˜ å°„</p><p>ç½‘å€ååŠ ä¸Š/userServeletå°†è¿è¡Œcom.itheima.web.UserServeletç±»ä¸­çš„doGet()</p><p><img src="../assets/image/Spring_Image/image-20230602162742705.png" alt="image-20230602162742705"></p><p><img src="../assets/image/Spring_Image/image-20230602162839136.png" alt="image-20230602162839136"></p><h3 id="applicationContext-xml">applicationContext.xml</h3><p><img src="../assets/image/Spring_Image/image-20230602162924426.png" alt="image-20230602162924426"></p><h3 id="spring-mvc-xml">spring-mvc.xml</h3><p>é…ç½®ç»„ä»¶æ‰«æï¼Œç”¨äºæ‰«æåŒ…ä¸­çš„æ³¨è§£</p><p><img src="../assets/image/Spring_Image/image-20230602163017412.png" alt="image-20230602163017412"></p><h3 id="webapp">webapp</h3><p>ä¸‹é¢åˆ›å»ºä¸€ä¸ªç½‘é¡µsuccess.jsp</p><p><img src="../assets/image/Spring_Image/image-20230602163052149.png" alt="image-20230602163052149"></p><p>åœ¨ç»„ä»¶æ‰«æçš„åŒ…ä¸­å†™ä¸ªç±»ï¼Œç”¨äºé“¾æ¥åˆ°success.jsp</p><p>è¯¥ç±»ä½¿ç”¨@Controllerå°†è¿™ä¸ªç±»åŠ è½½åˆ°springå®¹å™¨ä¸­</p><p>ä½¿ç”¨@RequestMapping(â€œ/quickâ€)æŒ‡å®šäº†ç½‘å€ï¼Œåœ¨ç½‘å€ååŠ ä¸Šè¿™ä¸ªå°±å¯ä»¥è®¿é—®è¿™ä¸ªæ–¹æ³•è¿”å›çš„StringæŒ‡å®šä½ç½®çš„æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230602163141705.png" alt="image-20230602163141705"></p><h2 id="ç¨‹åºå¯»æ‰¾é¡ºåº">ç¨‹åºå¯»æ‰¾é¡ºåº</h2><p>è¾“å…¥localhost:8080/quickå</p><p>å…ˆæ‰¾Tomcat</p><p>ç„¶ååœ¨web.xmlå› ä¸ºæœ‰å‰ç«¯æ§åˆ¶å™¨å¹¶ä¸”</p><p><url-pattern>/</url-pattern></p><p>è¡¨ç¤ºæ‰¾ä»»ä½•åœ°å€éƒ½å…ˆç»è¿‡è¿™ä¸ªæ§åˆ¶å™¨</p><p>ç„¶åå°±èƒ½æ‰¾åˆ°/quickäº†</p><p><img src="../assets/image/Spring_Image/image-20230602163424126.png" alt="image-20230602163424126"></p><p>èƒ½æ‰¾åˆ°/quickæ˜¯å› ä¸ºèµ„æºé…ç½®æ–‡ä»¶spring-mvc.xmlä¸­å¼€å¯äº†åŒ…com.itheima.controllerçš„æ‰«æ</p><p><img src="../assets/image/Spring_Image/image-20230602163820093.png" alt="image-20230602163820093"></p><p>ç„¶ååœ¨è¿™ä¸ªåŒ…ä¸­æœ‰ä¸ªç±»</p><p>é€šè¿‡æ³¨è§£å°†è¿™ä¸ªç±»åŠ åˆ°äº†å®¹å™¨ä¸­ï¼Œè€Œç”¨æ³¨è§£@RequestMapping(â€œ/quickâ€)æ³¨è§£çš„æ–¹æ³•ï¼Œå½“è¾“å…¥è¿™ä¸ªç½‘å€æ—¶å°±ä¼šè°ƒç”¨ï¼Œæ‰§è¡Œå®Œæ–¹æ³•åï¼Œé“¾æ¥åˆ°è¿”å›çš„StringæŒ‡å¼•çš„æ–‡ä»¶ä¸Š</p><p><img src="../assets/image/Spring_Image/image-20230603110612766.png" alt="image-20230603110612766"></p><p>success.jspæ–‡ä»¶ä¸­æ˜¯htmlä»£ç </p><p><img src="../assets/image/Spring_Image/image-20230602164008972.png" alt="image-20230602164008972"></p><h2 id="é€»è¾‘æµç¨‹å›¾">é€»è¾‘æµç¨‹å›¾</h2><p><img src="../assets/image/Spring_Image/image-20230603093641452.png" alt="image-20230603093641452"></p><h2 id="SpringMVCæ‰§è¡Œæµç¨‹">SpringMVCæ‰§è¡Œæµç¨‹</h2><p><img src="../assets/image/Spring_Image/image-20230603094019177.png" alt="image-20230603094019177"></p><h2 id="ç»„ä»¶è§£æ">ç»„ä»¶è§£æ</h2><p><img src="../assets/image/Spring_Image/image-20230603100720670.png" alt="image-20230603100720670"></p><p><img src="../assets/image/Spring_Image/image-20230603100743066.png" alt="image-20230603100743066"></p><p>åœ¨ä½¿ç”¨ç»„ä»¶æ‰«ææ—¶å¯ä»¥ä»¥æŒ‡å®šæ‰«æåŒ…å«å“ªäº›æ³¨è§£æˆ–é™¤å»å“ªäº›æ³¨è§£</p><p><img src="../assets/image/Spring_Image/image-20230603141215035.png" alt="image-20230603141215035"></p><p>é…ç½®å†…éƒ¨èµ„æºè§£æå™¨</p><p>åœ¨é…ç½®ä¹‹å‰ï¼Œå› ä¸ºjspæ–‡ä»¶éƒ½åœ¨jspæ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€ä»¥returnçš„å€¼è¦å†™å‰ç¼€å’Œåç¼€ï¼ˆ.jspï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230603141255107.png" alt="image-20230603141255107"></p><p>é…ç½®ä¹‹åï¼Œåªéœ€è¦å†™æ–‡ä»¶å</p><p><img src="../assets/image/Spring_Image/image-20230603141349511.png" alt="image-20230603141349511"></p><p>åœ¨spring-mvc.xmlä¸­é…ç½®</p><p>è¡¨ç¤ºä¸ºæ¯ä¸ªå¸¦æœ‰@RequestMappingæ³¨è§£çš„æ–¹æ³•è¿”å›çš„StringåŠ ä¸Šå‰åç¼€</p><p><img src="../assets/image/Spring_Image/image-20230603141418537.png" alt="image-20230603141418537"></p><h2 id="æ³¨è§£è§£æ">æ³¨è§£è§£æ</h2><p><img src="../assets/image/Spring_Image/image-20230603100808598.png" alt="image-20230603100808598"></p><p>ä¾‹å¦‚ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230603111806588.png" alt="image-20230603111806588"></p><p>éœ€è¦çš„urlé“¾æ¥å¿…é¡»è¦æœ‰å‚æ•°usernmae l</p><p><img src="../assets/image/Spring_Image/image-20230603111841101.png" alt="image-20230603111841101"></p><h2 id="SpringMVCç›¸å…³ç»„ä»¶">SpringMVCç›¸å…³ç»„ä»¶</h2><p><img src="../assets/image/Spring_Image/image-20230603141627910.png" alt="image-20230603141627910"></p><p>åœ¨return &quot;suuccess&quot;æ—¶é»˜è®¤å‰é¢å¸¦forwardï¼Œæ„æ€æ˜¯åœ¨å½“å‰ç½‘å€ååŠ ä¸Šåè®¿é—®çš„ç›®å½•ã€‚å¦‚æœå†™return &quot;redirect:suuccess&quot;å°±ä¼šæŠŠç½‘å€å˜ä¸ºlocalhost:8080/success   è€Œä¸æ˜¯ç½‘å€å åŠ </p><p><img src="../assets/image/Spring_Image/image-20230603142014109.png" alt="image-20230603142014109"></p><h1>æµè§ˆå™¨è¯·æ±‚æ–¹å¼</h1><p><img src="../assets/image/Spring_Image/image-20230603111430937.png" alt="image-20230603111430937"></p><h1>SpringMVCæ•°æ®å“åº”</h1><h2 id="æ•°æ®å“åº”æ–¹å¼">æ•°æ®å“åº”æ–¹å¼</h2><p><img src="../assets/image/Spring_Image/image-20230603142722394.png" alt="image-20230603142722394"></p><h3 id="é¡µé¢è·³è½¬">é¡µé¢è·³è½¬</h3><p>è¿”å›å­—ç¬¦ä¸²å½¢å¼</p><p><img src="../assets/image/Spring_Image/image-20230603143115529.png" alt="image-20230603143115529"></p><p>è¿”å›ModelAndViewå½¢å¼</p><p><img src="../assets/image/Spring_Image/image-20230603143228470.png" alt="image-20230603143228470"></p><p>æ•°æ®åœ¨jspæ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨${é”®å}çš„æ–¹å¼æå–</p><p><img src="../assets/image/Spring_Image/image-20230603143902717.png" alt="image-20230603143902717"></p><p><img src="../assets/image/Spring_Image/image-20230603143943620.png" alt="image-20230603143943620"></p><p>springMVCæ¡†æ¶ä¼šæ£€æµ‹å‚æ•°ï¼Œå¯ä»¥è‡ªåŠ¨æä¾›ä¸€ä¸ªModelAndViewå¯¹è±¡</p><p><img src="../assets/image/Spring_Image/image-20230603144544631.png" alt="image-20230603144544631"></p><p>ä¹Ÿå¯ä»¥å•ç‹¬è¿”å›Model</p><p>ä½†æ˜¯ä¸è®¾ç½®è§†å›¾çš„è¯ï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾</p><p><img src="../assets/image/Spring_Image/image-20230603144831279.png" alt="image-20230603144831279"></p><p><img src="../assets/image/Spring_Image/image-20230603145121111.png" alt="image-20230603145121111"></p><h3 id="å›å†™æ•°æ®">å›å†™æ•°æ®</h3><h4 id="è¿”å›å­—ç¬¦ä¸²">è¿”å›å­—ç¬¦ä¸²</h4><p>æ–¹æ³•1</p><p><img src="../assets/image/Spring_Image/image-20230603150457780.png" alt="image-20230603150457780"></p><p>æ–¹æ³•2</p><p><img src="../assets/image/Spring_Image/image-20230603150536247.png" alt="image-20230603150536247"></p><p>è¿”å›jsonå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ObjectMapperå°†å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</p><p><img src="../assets/image/Spring_Image/image-20230603151501882.png" alt="image-20230603151501882"></p><h4 id="è¿”å›å¯¹è±¡æˆ–é›†åˆ">è¿”å›å¯¹è±¡æˆ–é›†åˆ</h4><p>å¯ä»¥é€šè¿‡é…ç½®å¤„ç†å™¨æ˜ å°„å™¨æ¥å‘Šè¯‰SpringMVCæ¡†æ¶è‡ªåŠ¨å°†æ¶ˆæ¯è½¬æ¢</p><p>è‡ªåŠ¨å°†è¿”å›çš„å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</p><p><img src="../assets/image/Spring_Image/image-20230603152340236.png" alt="image-20230603152340236"></p><p><img src="../assets/image/Spring_Image/image-20230603152353202.png" alt="image-20230603152353202"></p><p>å¯ä»¥é…ç½®mvcæ³¨è§£é©±åŠ¨æ¥è®©mvcè‡ªå·±è°ƒç”¨æ˜ å°„å™¨ï¼Œè€Œä¸ç”¨è‡ªå·±é…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230603152959755.png" alt="image-20230603152959755"></p><p><strong>åœ¨ SpringMVC çš„å„ä¸ªç»„ä»¶ä¸­ï¼Œå¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨ç§°ä¸º SpringMVC çš„ä¸‰å¤§ç»„ä»¶ã€‚</strong></p><h1>SpringMVCè·å¾—è¯·æ±‚æ•°æ®</h1><p><img src="../assets/image/Spring_Image/image-20230603155305748.png" alt="image-20230603155305748"></p><h2 id="åŸºæœ¬ç±»å‹æ•°æ®">åŸºæœ¬ç±»å‹æ•°æ®</h2><p><img src="../assets/image/Spring_Image/image-20230603160109243.png" alt="image-20230603160109243"></p><h2 id="POJOç±»å‹å‚æ•°">POJOç±»å‹å‚æ•°</h2><p>è¾“å…¥çš„å‚æ•°å’ŒUserç±»çš„å±æ€§åä¸€è‡´ï¼Œå°±å¯ä»¥è‡ªåŠ¨å°è£…</p><p><img src="../assets/image/Spring_Image/image-20230603160333507.png" alt="image-20230603160333507"></p><h2 id="æ•°ç»„ç±»å‹å‚æ•°">æ•°ç»„ç±»å‹å‚æ•°</h2><p><img src="../assets/image/Spring_Image/image-20230603160957402.png" alt="image-20230603160957402"></p><p><img src="../assets/image/Spring_Image/image-20230603161003841.png" alt="image-20230603161003841"></p><h2 id="é›†åˆç±»å‹å‚æ•°">é›†åˆç±»å‹å‚æ•°</h2><p>ç¬¬ä¸€ç§æ–¹æ³•</p><p>è¿˜æ˜¯å°è£…åœ¨ç±»ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230603172517789.png" alt="image-20230603172517789"></p><p><img src="../assets/image/Spring_Image/image-20230603172529481.png" alt="image-20230603172529481"></p><p>åœ¨jspæ–‡ä»¶ä¸­ä½¿ç”¨è¡¨å•æäº¤é›†åˆå¯¹è±¡ï¼Œè¦æ±‚å’Œç±»ä¸­çš„å±æ€§åä¸€è‡´ã€‚å¯ä»¥æŒ‡å®šé›†åˆä¸­ç¬¬å‡ ä¸ªå…ƒç´ çš„æŸä¸ªå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230603172552484.png" alt="image-20230603172552484"></p><p>ç¬¬äºŒç§æ–¹æ³•</p><p>ç›´æ¥æ¥æ”¶ç”±æµè§ˆå™¨é¡µé¢å‘å‡ºçš„æ•°æ®</p><p>ä½¿ç”¨jqueryåŒ…ä¸­çš„æ–¹æ³•ï¼Œå‘é€æ•°æ®</p><p>è®¿é—®ajax.jsp</p><p><img src="../assets/image/Spring_Image/image-20230604201620098.png" alt="image-20230604201620098"></p><p><img src="../assets/image/Spring_Image/image-20230604201336222.png" alt="image-20230604201336222"></p><p>å¹¶å°†jqueryçš„è®¿é—®æƒé™å¼€æ”¾ï¼Œä¸ç„¶æµè§ˆå™¨å¯èƒ½è·³è½¬åˆ°jqueryæ—¶å°±åœæ­¢è·³è½¬</p><p>åœ¨spring-mvc.xmlä¸­é…ç½®å¯¹jqueryèµ„æºçš„è®¿é—®æƒé™</p><p><img src="../assets/image/Spring_Image/image-20230604202315828.png" alt="image-20230604202315828"></p><p>ä¹‹åè®¿é—®ajax.jspï¼Œæµè§ˆå™¨çš„è·³è½¬é¡ºåºå°±ä¼šè¿™æ ·</p><p><img src="../assets/image/Spring_Image/image-20230604202350908.png" alt="image-20230604202350908"></p><p>è¿˜æœ‰ä¸€ç§å¼€æ”¾èµ„æºçš„åŠæ³•</p><p><img src="../assets/image/Spring_Image/image-20230604203052408.png" alt="image-20230604203052408"></p><h2 id="å‚æ•°ç»‘å®šæ³¨è§£">å‚æ•°ç»‘å®šæ³¨è§£</h2><p>å½“è¯·æ±‚çš„å‚æ•°åç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡@RequestParamæ³¨è§£æ˜¾ç¤ºçš„ç»‘å®šã€‚</p><p>å¦‚æœç½‘å€åæäº¤çš„å‚æ•°ä¸æ˜¯usernameæ˜¯nameå°±è¿™æ ·æ”¹</p><p><img src="../assets/image/Spring_Image/image-20230604203429433.png" alt="image-20230604203429433"></p><p>æ”¹å®Œä¹‹åå°±åªèƒ½ç”¨nameæäº¤äº†ï¼Œå› ä¸ºæœ‰è¿™ä¸ªæ³¨è§£çš„å­˜åœ¨ï¼Œä¼šå°†nameçš„å€¼æ˜ å°„åˆ°usernameä¸Š</p><p>@RequestParamæ³¨è§£çš„å…¶ä»–å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230604203836242.png" alt="image-20230604203836242"></p><p>é»˜è®¤nameå‚æ•°ä¸å¿…é¡»åŒ…å«ï¼Œæäº¤åæ‰“å°å€¼ä¸ºnull</p><p><img src="../assets/image/Spring_Image/image-20230604203927135.png" alt="image-20230604203927135"></p><p><img src="../assets/image/Spring_Image/image-20230604203952230.png" alt="image-20230604203952230"></p><p>ä½¿ç”¨äº†é»˜è®¤å€¼ï¼Œæäº¤åæ‰“å°itcast</p><p><img src="../assets/image/Spring_Image/image-20230604204045987.png" alt="image-20230604204045987"></p><p><img src="../assets/image/Spring_Image/image-20230604204054637.png" alt="image-20230604204054637"></p><h2 id="è·å–Restfulé£æ ¼çš„å‚æ•°">è·å–Restfulé£æ ¼çš„å‚æ•°</h2><p>åœ¨ç½‘å€ä¸­å†™å…¥è¯·æ±‚æ–¹å¼</p><p><img src="../assets/image/Spring_Image/image-20230605162451916.png" alt="image-20230605162451916"></p><p>@PathVariableä¸­çš„valueå¿…é¡»å’Œ@RequestMappingç›¸åŒï¼Œä½†æ˜¯å¯ä»¥å’Œå‚æ•°ä¸­çš„Stringä¸åŒ</p><p><img src="../assets/image/Spring_Image/image-20230605162842599.png" alt="image-20230605162842599"></p><p>ä½¿ç”¨ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230605163339876.png" alt="image-20230605163339876"></p><p><img src="../assets/image/Spring_Image/image-20230605163344930.png" alt="image-20230605163344930"></p><h2 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨">è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h2><p><img src="../assets/image/Spring_Image/image-20230605163640580.png" alt="image-20230605163640580"></p><p>åƒè¿™ç§int ageæ¡†æ¶è™½ç„¶æ¥æ”¶çš„æ˜¯Stringï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨è½¬æ¢åä¼ ç»™å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230605163703848.png" alt="image-20230605163703848"></p><p>æ‰‹åŠ¨å®ç°ç±»å‹è½¬æ¢</p><p>å®ç°èƒŒæ™¯ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230605192805294.png" alt="image-20230605192805294"></p><p><img src="../assets/image/Spring_Image/image-20230605192906187.png" alt="image-20230605192906187"></p><p>æäº¤æ•°æ®æ—¶ï¼Œé»˜è®¤éœ€è¦æ¥æ”¶ç”¨/çš„æ—¶é—´æ ¼å¼ï¼Œä½†æ˜¯æäº¤æ—¶å¦‚æœç”¨äº†-åˆ†ç¦»å°±ä¼šæŠ¥é”™ï¼Œä¸‹é¢å†™ä¸€ä¸ªæ ¼å¼è½¬æ¢å™¨æ¥è¿›è¡Œæ ¼å¼è½¬æ¢</p><p>å…ˆå†™ä¸€ä¸ªç”¨äºå°†Stringè½¬æ¢ä¸ºDateçš„ç±»ï¼Œå®ç°äº†æ¥å£Converter</p><p><img src="../assets/image/Spring_Image/image-20230605194004702.png" alt="image-20230605194004702"></p><p>ç„¶ååœ¨spring-mvc.xmlä¸­é…ç½®</p><p>å£°æ˜ä¸€ä¸ªå·¥å‚ç”¨äºåˆ›å»ºè‡ªå·±å†™çš„æ ¼å¼è½¬æ¢å™¨</p><p><img src="../assets/image/Spring_Image/image-20230605194052205.png" alt="image-20230605194052205"></p><p>åŒæ—¶ä¹Ÿè¦æ›´æ”¹MVCçš„æ³¨è§£é©±åŠ¨</p><p><img src="../assets/image/Spring_Image/image-20230605194156791.png" alt="image-20230605194156791"></p><h2 id="è·å¾—è¯·æ±‚å¤´">è·å¾—è¯·æ±‚å¤´</h2><p><img src="../assets/image/Spring_Image/image-20230605195538973.png" alt="image-20230605195538973"></p><p>è‡ªå·±å†™çš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230605195947915.png" alt="image-20230605195947915"></p><p>è®¿é—®</p><p><img src="../assets/image/Spring_Image/image-20230605195953802.png" alt="image-20230605195953802"></p><p>ç„¶åè¾“å‡ºçš„å°±æ˜¯è¯·æ±‚å¤´ä¸­å±æ€§User-Agentå¯¹åº”çš„å€¼</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Mozilla</span>/<span class="number">5</span>.<span class="number">0</span> (Windows NT <span class="number">10</span>.<span class="number">0</span>; Win64; x64) AppleWebKit/<span class="number">537</span>.<span class="number">36</span> (KHTML, like Gecko) Chrome/<span class="number">114.0.0.0</span> Safari/<span class="number">537</span>.<span class="number">36</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜æœ‰å…¶ä»–å±æ€§çš„ä¿¡æ¯éƒ½å¯ä»¥è·å–ï¼ˆCookieé™¤å¤–ï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230605200132776.png" alt="image-20230605200132776"></p><p><img src="../assets/image/Spring_Image/image-20230605200139984.png" alt="image-20230605200139984"></p><p>ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè¿™ä¸ªä¿¡æ¯ä¸å¿…é¡»æäº¤ï¼Œè¿™æ ·å°±ç®—è¯·æ±‚å¤´ä¸­æ²¡æœ‰User-Agentå±æ€§ï¼Œä¹Ÿå¯ä»¥ç»§ç»­è®¿é—®</p><p><img src="../assets/image/Spring_Image/image-20230605200308335.png" alt="image-20230605200308335"></p><p>Cookieå€¼ç‰¹æ®Šï¼Œéœ€è¦ç”¨ç‰¹æ®Šçš„æ³¨è§£è·å–@CookieValue</p><p><img src="../assets/image/Spring_Image/image-20230605200445310.png" alt="image-20230605200445310"></p><p><img src="../assets/image/Spring_Image/image-20230605200739049.png" alt="image-20230605200739049"></p><h2 id="æ–‡ä»¶ä¸Šä¼ ">æ–‡ä»¶ä¸Šä¼ </h2><h3 id="æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯ä¸‰è¦ç´ ">æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯ä¸‰è¦ç´ </h3><p><img src="../assets/image/Spring_Image/image-20230606083616517.png" alt="image-20230606083616517"></p><p>æ–‡ä»¶ä¸Šä¼ åŸç†</p><p><img src="../assets/image/Spring_Image/image-20230606084525462.png" alt="image-20230606084525462"></p><h3 id="å•æ–‡ä»¶ä¸Šä¼ æ­¥éª¤">å•æ–‡ä»¶ä¸Šä¼ æ­¥éª¤</h3><p><img src="../assets/image/Spring_Image/image-20230606084701980.png" alt="image-20230606084701980"></p><p>ç¬¬ä¸€æ­¥</p><p><img src="../assets/image/Spring_Image/image-20230606084721236.png" alt="image-20230606084721236"></p><p>ç¬¬äºŒæ­¥</p><p><img src="../assets/image/Spring_Image/image-20230606084849265.png" alt="image-20230606084849265"></p><p>ç¬¬ä¸‰æ­¥</p><p><img src="../assets/image/Spring_Image/image-20230607100141415.png" alt="image-20230607100141415"></p><p>å¦‚æœä¸æŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤ä¸º</p><p><img src="../assets/image/Spring_Image/image-20230607101118195.png" alt="image-20230607101118195"></p><h1>SpringMVCæ‹¦æˆªå™¨</h1><h2 id="ä½œç”¨">ä½œç”¨</h2><p><img src="../assets/image/Spring_Image/image-20230607110544253.png" alt="image-20230607110544253"></p><p>ä¸»ä¹‰ï¼šåªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¦‚æœè®¿é—®çš„æ˜¯ jspï¼Œhtml,css,image æˆ–è€… js æ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</p><h2 id="æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«">æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«</h2><p><img src="../assets/image/Spring_Image/image-20230607111126956.png" alt="image-20230607111126956"></p><h2 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨åˆ›å»º">è‡ªå®šä¹‰æ‹¦æˆªå™¨åˆ›å»º</h2><p><img src="../assets/image/Spring_Image/image-20230607111300321.png" alt="image-20230607111300321"></p><p>1ã€å†™æ‹¦æˆªå™¨çš„ç±»ï¼Œå®ç°HandlerInterceptoræ¥å£</p><p>æ¥å£ä¸­æœ‰3ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”éƒ½æœ‰æ–¹æ³•ä½“ï¼Œæ‰€ä»¥å®ç°HandlerInterceptoræ¥å£åæ²¡æœ‰å¿…é¡»è¦é‡å†™çš„æ–¹æ³•ï¼Œåªæ˜¯éœ€è¦å“ªä¸ªå°±é‡å†™å“ªä¸ªå°±è¡Œäº†</p><p>HandlerInterceptoræ¥å£å†…å®¹ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230607122443128.png" alt="image-20230607122443128"></p><p>å†™æ‹¦æˆªå™¨ç”¨çš„ç±»ï¼›</p><p><img src="../assets/image/Spring_Image/image-20230607122512532.png" alt="image-20230607122512532"></p><p>å…¶ä¸­çš„æ–¹æ³•ï¼š</p><p>preHandle()</p><p>â€‹è¿™ä¸ªæ–¹æ³•åœ¨è¦æ‹¦æˆªçš„å†…å®¹æ–¹æ³•å‰æ‰§è¡Œ</p><p>â€‹å…¶ä¸­å¯ä»¥åšä¸€äº›å¤„ç†ï¼Œæ–¹æ³•è¿”å›å€¼ä¸ºtrueæ—¶æ‰ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ª  preHandle()æˆ–è€…ç›®æ ‡èµ„æºï¼Œå¦‚æœè¿”å›falseåˆ™ä¸ä¼šè°ƒç”¨ã€‚æ‰€ä»¥å¯ä»¥åœ¨è¿”å›falseå‰åšä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚è¿”å›ä¸€ä¸ªä¸“é—¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„jsp</p><p>postHandle()</p><p>â€‹è¿™ä¸ªæ–¹æ³•åœ¨æ‹¦æˆªçš„æ–¹æ³•åæ‰§è¡Œï¼Œä½†åœ¨è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰</p><p>afterCompletion()</p><p>â€‹æœ€åæ‰§è¡Œ</p><p>ç„¶ååœ¨spring-mvc.xmlä¸­é…ç½®</p><p>è¿™é‡Œé…ç½®äº†ä¸¤ä¸ªæ‹¦æˆªå™¨ï¼Œä¹Ÿå°±å½¢æˆäº†æ‹¦æˆªå™¨é“¾</p><p><img src="../assets/image/Spring_Image/image-20230607122823858.png" alt="image-20230607122823858"></p><p>æ‰§è¡Œé¡ºåºï¼šMyInterceptor2çš„preHandle()  â€”&gt;  MyInterceptor1çš„preHandle()  â€”&gt;  ç›®æ ‡èµ„æºæ‰§è¡Œ  â€”&gt;  MyInterceptor1çš„postHandle()  â€”&gt;  MyInterceptor2çš„postHandle()  â€”&gt;  è§†å›¾å¯¹è±¡è¿”å›  â€”&gt;  MyInterceptor1çš„afterCompletion()  â€”&gt;  MyInterceptor2çš„afterCompletion()</p><p><img src="../assets/image/Spring_Image/image-20230607122923203.png" alt="image-20230607122923203"></p><p>æ³¨æ„ï¼šæ‰§è¡Œé¡ºåºä¸­åœ¨æ‹¦æˆªå™¨é“¾å‰é¢çš„ç±»çš„æ–¹æ³•åœ¨ç›®æ ‡èµ„æºæ‰§è¡Œå‰å…ˆæ‰§è¡Œï¼Œä¹‹ååœ¨æ‹¦æˆªå™¨é“¾å‰é¢çš„ç±»çš„æ–¹æ³•éƒ½åæ‰§è¡Œ</p><p>æ‹¦æˆªå™¨çš„æ–¹æ³•è¯¦ç»†è¯´æ˜ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230607123702698.png" alt="image-20230607123702698"></p><h2 id="æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶">æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶</h2><p><img src="../assets/image/Spring_Image/image-20230607192734604.png" alt="image-20230607192734604"></p><p>æ‹¦æˆªå™¨ä¹Ÿå¯ä»¥é…ç½®ä¸æ‹¦æˆªå“ªäº›èµ„æº</p><p><img src="../assets/image/Spring_Image/image-20230607193905008.png" alt="image-20230607193905008"></p><h1>SpringMVCå¼‚å¸¸å¤„ç†</h1><h2 id="å¼‚å¸¸å¤„ç†çš„æ€è·¯">å¼‚å¸¸å¤„ç†çš„æ€è·¯</h2><p><img src="../assets/image/Spring_Image/image-20230607195612215.png" alt="image-20230607195612215"></p><p>é…ç½®å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨spring-mvc.xmlä¸­</p><p>é…ç½®é»˜è®¤é”™è¯¯è§†å›¾å’ŒæŒ‡å®šé”™è¯¯å¯¹åº”çš„è§†å›¾</p><p><img src="../assets/image/Spring_Image/image-20230607202438481.png" alt="image-20230607202438481"></p><p>å†™ä¸€ä¸ªä¸“é—¨æŠ›å‡ºå¼‚å¸¸çš„ç±»</p><p><img src="../assets/image/Spring_Image/image-20230607203325123.png" alt="image-20230607203325123"></p><p>åœ¨webå±‚è°ƒç”¨</p><p><img src="../assets/image/Spring_Image/image-20230607203359140.png" alt="image-20230607203359140"></p><h2 id="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†">è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</h2><p>show5()æŠ›å‡ºçš„å°±æ˜¯è‡ªå®šä¹‰å¼‚å¸¸</p><p>å†™ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç»§æ‰¿Exception</p><p><img src="../assets/image/Spring_Image/image-20230607203530172.png" alt="image-20230607203530172"></p><p>å†™ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ç±»ï¼Œå®ç°HandlerExceptionResolver</p><p><img src="../assets/image/Spring_Image/image-20230607203629158.png" alt="image-20230607203629158"></p><p>åœ¨spring-mvc.xmlä¸­å£°æ˜è¿™ä¸ªç±»</p><p><img src="../assets/image/Spring_Image/image-20230607203813066.png" alt="image-20230607203813066"></p><p>å’ŒSpringMVCè‡ªå¸¦çš„å¼‚å¸¸å¤„ç†å™¨ä¸åŒï¼Œè‡ªå·±å†™çš„å¼‚å¸¸å¤„ç†å™¨åœ¨spring-mvc.xmlä¸­å£°æ˜è¦æ–­çš„å¤šï¼Œåªéœ€è¦ä¸€ä¸ªbeanï¼Œæ¡†æ¶å°±å¯ä»¥è°ƒç”¨ç±»ä¸­çš„resolveException()æ¥å¤„ç†å¼‚å¸¸ã€‚</p><p>å¦‚æœé…ç½®äº†å¤šä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼Œå…¶ä¸­éƒ½æœ‰åŒä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£æ¡†æ¶ä»¥åœ¨ä¸Šé¢å£°æ˜çš„å¼‚å¸¸å¤„ç†å™¨ä¸ºä¸»</p><p><img src="../assets/image/Spring_Image/image-20230607204705168.png" alt="image-20230607204705168"></p><h2 id="æ€»ç»“ï¼šå¼‚å¸¸å¤„ç†æ­¥éª¤">æ€»ç»“ï¼šå¼‚å¸¸å¤„ç†æ­¥éª¤</h2><ol><li>åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolveræ¥å£</li><li>é…ç½®å¼‚å¸¸å¤„ç†å™¨</li><li>ç¼–å†™å¼‚å¸¸é¡µé¢</li><li>æµ‹è¯•å¼‚å¸¸è·³è½¬</li></ol><h1>Spring+SpringMVCç»ƒä¹ </h1><p>webå±‚</p><p>â€‹å°½é‡ä¸€ä¸ªæ–¹æ³•è§£å†³é—®é¢˜ï¼Œå°†ä¼ å…¥çš„å‚æ•°ä¼ ä¸ªè¿™ä¸ªæ–¹æ³•</p><p>serviceå±‚</p><p>â€‹å°½é‡å°†å¤§é—®é¢˜æ‹†æˆå‡ ä¸ªå°æ­¥éª¤ï¼Œè°ƒç”¨è‹¥å¹²ä¸ªæ–¹æ³•è¿›è¡Œå®ç°</p><p>daoå±‚</p><p>â€‹å®ç°è‹¥å¹²ä¸ªå°æ–¹æ³•ï¼Œç•™ä¸ªserviceå±‚è°ƒç”¨</p><h2 id="ç¯å¢ƒæ­å»ºæ­¥éª¤">ç¯å¢ƒæ­å»ºæ­¥éª¤</h2><p><img src="../assets/image/Spring_Image/image-20230608202124896.png" alt="image-20230608202124896"></p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h3><h4 id="web-xml-2">web.xml</h4><ol><li>å…¨å±€åˆå§‹åŒ–å‚æ•°</li><li>é…ç½®Springç›‘å¬å™¨</li><li>SpringMVCå‰ç«¯æ§åˆ¶å™¨</li></ol><p><img src="../assets/image/Spring_Image/image-20230609112404748.png" alt="image-20230609112404748"></p><h4 id="spring-mvc-xml-2">spring-mvc.xml</h4><ol><li>MVCæ³¨è§£é©±åŠ¨</li><li>è§†å›¾è§£æå™¨</li><li>é™æ€èµ„æºæƒé™å…¨å¼€æ”¾</li></ol><p><img src="../assets/image/Spring_Image/image-20230609160409257.png" alt="image-20230609160409257"></p><h4 id="applicationContext-xml-2">applicationContext.xml</h4><ol><li>åŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶</li><li>é…ç½®æ•°æ®æº</li><li>é…ç½®jdbcæ¨¡æ¿</li></ol><p><img src="../assets/image/Spring_Image/image-20230609112644396.png" alt="image-20230609112644396"></p><h4 id="ç»™æ¯ä¸ªè¡¨ç¼–å†™ä¸€ä¸ªç±»">ç»™æ¯ä¸ªè¡¨ç¼–å†™ä¸€ä¸ªç±»</h4><p><img src="../assets/image/Spring_Image/image-20230609163953792.png" alt="image-20230609163953792"></p><p><img src="../assets/image/Spring_Image/image-20230609164003304.png" alt="image-20230609164003304"></p><h3 id="æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</h3><p>ç”¨æˆ·å’Œè§’è‰²ä¹‹é—´æ˜¯å¤šå¯¹å¤šå…³ç³»</p><p>â€‹ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ‹¥æœ‰ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´çš„å…³ç³»ç”¨å¦ä¸€ä¸ªè¡¨è®°å½•</p><p><img src="../assets/image/Spring_Image/image-20230609113549707.png" alt="image-20230609113549707"></p><p>CEO:é¦–å¸­æ‰§è¡Œå®˜</p><p>COO:é¦–å¸­è¿è¥å®˜</p><p>CFO:é¦–å¸­è´¢åŠ¡å®˜</p><p>CTO:é¦–å¸­æŠ€æœ¯å®˜</p><p>roleè¡¨</p><p><img src="../assets/image/Spring_Image/image-20230609113623333.png" alt="image-20230609113623333"></p><p>userè¡¨</p><p><img src="../assets/image/Spring_Image/image-20230609113639037.png" alt="image-20230609113639037"></p><p>user_roleè¡¨ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230609113655789.png" alt="image-20230609113655789"></p><h3 id="è§’è‰²åˆ—è¡¨å±•ç¤º">è§’è‰²åˆ—è¡¨å±•ç¤º</h3><h4 id="å±•ç¤ºæ•ˆæœ">å±•ç¤ºæ•ˆæœ</h4><p><img src="../assets/image/Spring_Image/image-20230609150749690.png" alt="image-20230609150749690"></p><h4 id="æ­¥éª¤">æ­¥éª¤</h4><p><img src="../assets/image/Spring_Image/image-20230609150758116.png" alt="image-20230609150758116"></p><h5 id="æ‰“å¼€ç»„ä»¶æ‰«æ">æ‰“å¼€ç»„ä»¶æ‰«æ</h5><p>spring-mvc.xml</p><p><img src="../assets/image/Spring_Image/image-20230609163626091.png" alt="image-20230609163626091"></p><h5 id="é…ç½®web-xml">é…ç½®web.xml</h5><p><img src="../assets/image/Spring_Image/image-20230609185121145.png" alt="image-20230609185121145"></p><h5 id="é…ç½®Daoå±‚å’ŒServiceçš„Bean">é…ç½®Daoå±‚å’ŒServiceçš„Bean</h5><p>applicationCOntext.xml</p><p><img src="../assets/image/Spring_Image/image-20230609163751635.png" alt="image-20230609163751635"></p><h5 id="ç¼–å†™Daoå±‚">ç¼–å†™Daoå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163815759.png" alt="image-20230609163815759"></p><h5 id="ç¼–å†™Serviceå±‚">ç¼–å†™Serviceå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163832462.png" alt="image-20230609163832462"></p><h5 id="ç¼–å†™Controllerå±‚">ç¼–å†™Controllerå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163905690.png" alt="image-20230609163905690"></p><h5 id="ä¿®æ”¹è¶…é“¾æ¥">ä¿®æ”¹è¶…é“¾æ¥</h5><p>åœ¨jspä¸­å°†å¯¹åº”çš„è¶…é“¾æ¥æ”¹ä¸ºControllerå±‚ä¸­çš„å¯¹åº”æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230609164144033.png" alt="image-20230609164144033"></p><h3 id="è§’è‰²æ·»åŠ ">è§’è‰²æ·»åŠ </h3><h4 id="æ­¥éª¤-2">æ­¥éª¤</h4><p><img src="../assets/image/Spring_Image/image-20230609183629603.png" alt="image-20230609183629603"></p><h5 id="ç¼–å†™Controllerå±‚-2">ç¼–å†™Controllerå±‚</h5><p>æäº¤å®Œåé‡å®šå‘åˆ°/role/listä¸‹</p><p><img src="../assets/image/Spring_Image/image-20230609185958417.png" alt="image-20230609185958417"></p><h5 id="ç¼–å†™Serviceå±‚-2">ç¼–å†™Serviceå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609190025182.png" alt="image-20230609190025182"></p><h5 id="ç¼–å†™Daoå±‚-2">ç¼–å†™Daoå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609190049284.png" alt="image-20230609190049284"></p><h5 id="ä¿®æ”¹è¡¨å•æäº¤é“¾æ¥">ä¿®æ”¹è¡¨å•æäº¤é“¾æ¥</h5><p><img src="../assets/image/Spring_Image/image-20230609190143789.png" alt="image-20230609190143789"></p><p>å› ä¸ºæ˜¯ç”¨postæ–¹å¼æäº¤ï¼Œå¯èƒ½æœ‰ä¹±ç é—®é¢˜</p><h5 id="é…ç½®ç¼–ç è¿‡æ»¤å™¨">é…ç½®ç¼–ç è¿‡æ»¤å™¨</h5><p>web.xmlä¸­</p><p><img src="../assets/image/Spring_Image/image-20230609190308082.png" alt="image-20230609190308082"></p><h3 id="ç”¨æˆ·åˆ—è¡¨å±•ç¤º">ç”¨æˆ·åˆ—è¡¨å±•ç¤º</h3><h4 id="å±•ç¤ºæ•ˆæœ-2">å±•ç¤ºæ•ˆæœ</h4><p><img src="../assets/image/Spring_Image/image-20230609191548547.png" alt="image-20230609191548547"></p><h4 id="ç»™Userç±»æ·»åŠ å±æ€§">ç»™Userç±»æ·»åŠ å±æ€§</h4><p><img src="../assets/image/Spring_Image/image-20230609191711651.png" alt="image-20230609191711651"></p><h4 id="æ”¹é¡µé¢ä¸­çš„è¶…é“¾æ¥">æ”¹é¡µé¢ä¸­çš„è¶…é“¾æ¥</h4><p><img src="../assets/image/Spring_Image/image-20230609191917227.png" alt="image-20230609191917227"></p><h4 id="ç¼–å†™Controllerå±‚-3">ç¼–å†™Controllerå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193514470.png" alt="image-20230609193514470"></p><h4 id="ç¼–å†™Serviceå±‚-3">ç¼–å†™Serviceå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193545907.png" alt="image-20230609193545907"></p><h4 id="ç¼–å†™Daoå±‚-3">ç¼–å†™Daoå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193603053.png" alt="image-20230609193603053"></p><h4 id="é…ç½®Serviceå±‚ã€Daoå±‚çš„bean">é…ç½®Serviceå±‚ã€Daoå±‚çš„bean</h4><p><img src="../assets/image/Spring_Image/image-20230609193648087.png" alt="image-20230609193648087"></p><h4 id="jspä¸­å¼•å…¥æ ¸å¿ƒæ ‡ç­¾åº“">jspä¸­å¼•å…¥æ ¸å¿ƒæ ‡ç­¾åº“</h4><p><img src="../assets/image/Spring_Image/image-20230609194314134.png" alt="image-20230609194314134"></p><p><img src="../assets/image/Spring_Image/image-20230609194325662.png" alt="image-20230609194325662"></p><h4 id="å±•ç¤ºè§’è‰²åç§°">å±•ç¤ºè§’è‰²åç§°</h4><p>å› ä¸ºUserè¡¨å’ŒRoleè¡¨çš„å…³ç³»å­˜åœ¨å¤–è¡¨ä¸­ï¼Œæƒ³æŸ¥åˆ°Userå¯¹åº”çš„Roleå°±è¦æŠŠClass Userä¸­çš„private List<Role> roles;  ä¸­çš„å±æ€§å°è£…å¥½</p><h5 id="Controllerå±‚">Controllerå±‚</h5><p>ä¸å˜ï¼Œä»–åªè°ƒç”¨äº†Serviceå±‚ä¸­çš„list()</p><p><img src="../assets/image/Spring_Image/image-20230610093414020.png" alt="image-20230610093414020"></p><h5 id="Serviceå±‚">Serviceå±‚</h5><p>åº”ä¸ºUserServiceImplè¦è°ƒç”¨RoleDaoçš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨xmlä¸­æ³¨å…¥</p><p><img src="../assets/image/Spring_Image/image-20230610094728489.png" alt="image-20230610094728489"></p><p>éå†userListï¼Œä¸»è¦ä½¿ç”¨æ¯ä¸€ä¸ªå…¶ä¸­æ¯ä¸€ä¸ªUser çš„Idï¼Œåˆ©ç”¨Idè°ƒç”¨Daoå±‚çš„æ–¹æ³•æŸ¥è¯¢Role</p><p>ä¸€äº›ç»å¸¸ç”¨çš„æ“ä½œï¼ŒåƒfindRoleByUserIdå°±äº¤ç»™Daoå±‚å®ç°</p><p><img src="../assets/image/Spring_Image/image-20230610093442919.png" alt="image-20230610093442919"></p><h5 id="Daoå±‚">Daoå±‚</h5><p>å› ä¸ºä¸»è¦ç›®çš„æ˜¯findRoleï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ”¾åœ¨RoleDaoImplä¸­</p><p><img src="../assets/image/Spring_Image/image-20230610094003364.png" alt="image-20230610094003364"></p><h4 id="user-list-jsp">user-list.jsp</h4><p>å‰é¢å°†Userä¸­çš„private List<Role> roles;å±æ€§å®Œæˆäº†å°è£…</p><p>åœ¨jspæ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨äº†</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c<span class="keyword">:forEach</span> <span class="attribute">items</span>=<span class="string">&quot;<span class="variable">$&#123;userList&#125;</span>&quot;</span> <span class="attribute">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>æ„æ€æ˜¯éå†userListä¸­çš„å±æ€§ï¼Œæ¯æ¬¡å–å‡ºçš„å€¼åä¸ºuserï¼Œå³useræ˜¯userListä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡user.æ¥è®¿é—®è¿™ä¸ªå…ƒç´ çš„å¯¹è±¡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c<span class="keyword">:forEach</span> <span class="attribute">items</span>=<span class="string">&quot;<span class="variable">$&#123;user.roles&#125;</span>&quot;</span> <span class="attribute">var</span>=<span class="string">&quot;role&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>éå†userä¸­çš„roleså±æ€§ï¼Œå°±æ˜¯List<Role> rolesï¼Œä½¿ç”¨å…¶ä¸­å…ƒç´ ï¼ˆRoleå®ä¾‹ï¼‰çš„roleNameå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230610094123889.png" alt="image-20230610094123889"></p><h3 id="ç”¨æˆ·æ·»åŠ ">ç”¨æˆ·æ·»åŠ </h3><h4 id="Controllerå±‚-2">Controllerå±‚</h4><p>å› ä¸ºåœ¨æ–°å»ºé¡µé¢ä¸­ï¼Œç”¨æˆ·è§’è‰²æ˜¯è¦é€‰æ‹©çš„ï¼Œæ‰€ä»¥åœ¨ä»user-list.jspè·³åˆ°user-add.jspçš„æ–°å»ºæŒ‰é’®ä¸Šè¦å°†é“¾æ¥è¿æ¥åˆ°æ–¹æ³•ä¸Š</p><p><img src="../assets/image/Spring_Image/image-20230610113940607.png" alt="image-20230610113940607"></p><p>åœ¨webå±‚å°½é‡ä½¿ç”¨serviceå±‚çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨daoå±‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ³¨å…¥æ–°çš„å±æ€§ï¼Œprivate RoleService roleService;ä½¿ç”¨å…¶ä¸­çš„æ–¹æ³•ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­å­˜åœ¨çš„æ‰€æœ‰roleçš„rolename,æ·»åŠ åˆ°ModelAndViewçš„Modelä¸­</p><p><img src="../assets/image/Spring_Image/image-20230610113951453.png" alt="image-20230610113951453"></p><h4 id="user-add-jsp">user-add.jsp</h4><p>ä¸­å°±å¯ä»¥ä½¿ç”¨æ”¾åœ¨ModelAndViewä¸­æŸ¥è¯¢å‡ºæ¥çš„roleListäº†</p><p><img src="../assets/image/Spring_Image/image-20230610114301033.png" alt="image-20230610114301033"></p><p>è¿™æ ·åœ¨æ¯æ¬¡æ‰“å¼€æ–°å»ºç”¨æˆ·ç•Œé¢æ—¶ï¼Œç”¨æˆ·è§’è‰²çš„é€‰é¡¹æ¡å°±æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥å‡ºçš„æœ€æ–°çš„</p><h4 id="Serviceå±‚-2">Serviceå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230610135331934.png" alt="image-20230610135331934"></p><h4 id="Daoå±‚-2">Daoå±‚</h4><p>ä½¿ç”¨save(User user)ä¿å­˜Userå®ä¾‹ï¼Œå¹¶å°†ä¿å­˜åœ¨æ•°æ®åº“åç”Ÿæˆçš„IDè¿”å›</p><p><img src="../assets/image/Spring_Image/image-20230610135353401.png" alt="image-20230610135353401"></p><p>jdbcTemplate.update()çš„ä¸åŒä½¿ç”¨æ–¹æ³•</p><p>å¸¸è§çš„ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbcTemplate.update(&quot;<span class="keyword">insert</span> <span class="keyword">into</span> sys_user_role <span class="keyword">values</span>(?,?)<span class="string">&quot;,userId,roleId);</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™é‡Œè¦æ±‚å—²ç”¨æ–¹æ³•åè¿˜è¦è¿”å›IDï¼Œæ‰€ä»¥è¿™ä¹ˆå†™</p><p>åˆ›å»ºPreparedStatementCreatorå¯¹è±¡ï¼Œå°†è¦æ‰§è¡Œçš„è¯­å¥çš„æ ¼å¼å’Œæ•°æ®éƒ½å°è£…åœ¨å¯¹è±¡é‡Œã€‚</p><p>åˆ›å»ºGeneratedKeyHolderå¯¹è±¡ï¼Œåœ¨æ‰§è¡ŒjdbcTemplate.update()æ—¶ï¼Œä¼šä¿å­˜PreparedStatementCreatorå®ä¾‹ç”Ÿæˆçš„ID</p><p>GeneratedKeyHolderçš„ä½œç”¨å°±æ˜¯å°†è¿˜æ²¡ä¼ è¿‡å»çš„ä¸»é”®ä¿å­˜ä¸‹æ¥</p><p><img src="../assets/image/Spring_Image/image-20230610135648256.png" alt="image-20230610135648256"></p><h3 id="ç”¨æˆ·åˆ é™¤">ç”¨æˆ·åˆ é™¤</h3><p>åˆ é™¤å’Œä¹‹å‰çš„ä¸ä¸€æ ·ï¼Œéœ€è¦ä»ç½‘é¡µè·å–IDåè¿”å›åå°</p><p>ç‚¹å‡»åˆ é™¤åè°ƒç”¨delUser()</p><p>ä½¿ç”¨confirm()å‡½æ•°æ¥åœ¨ç½‘é¡µä¸­è·³å‡ºå¼¹çª—è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤åˆ é™¤</p><p><img src="../assets/image/Spring_Image/image-20230610141223329.png" alt="image-20230610141223329"></p><p>delUser()è´Ÿè´£æé†’ç”¨æˆ·æ˜¯å¦ç»§ç»­ï¼Œå¦‚æœæ˜¯ï¼Œå°±å°†userIdè¿”ç»™åå°</p><p><img src="../assets/image/Spring_Image/image-20230610141249752.png" alt="image-20230610141249752"></p><h4 id="Webå±‚ä¸­">Webå±‚ä¸­</h4><p>ä½¿ç”¨ç½‘å€æ¥æ¥å—userIdï¼Œä½¿ç”¨æ³¨è§£@PathVariable(â€œuserIdâ€)å°†ç½‘å€ä¸­çš„userIdè£…é€’ç»™å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230610142229279.png" alt="image-20230610142229279"></p><h4 id="Serviceå±‚-3">Serviceå±‚</h4><p>è¿™é‡Œæ²¡æœ‰çº§è”åˆ é™¤ï¼Œæ‰€ä»¥è¦å…ˆåˆ é™¤å…³ç³»è¡¨ä¸­çš„æ•°æ®</p><p><img src="../assets/image/Spring_Image/image-20230610142316603.png" alt="image-20230610142316603"></p><h4 id="Daoå±‚-3">Daoå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230610142352244.png" alt="image-20230610142352244"></p><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="springä¸­åˆ‡é¢æœ‰å‡ ç§ç±»å‹çš„é€šçŸ¥">springä¸­åˆ‡é¢æœ‰å‡ ç§ç±»å‹çš„é€šçŸ¥</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œåˆ‡é¢ï¼ˆAspectï¼‰æ˜¯ä¸€ç§æ¨¡å—åŒ–çš„æ–¹å¼æ¥å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼‰ï¼Œé€šçŸ¥ï¼ˆAdviceï¼‰æ˜¯åˆ‡é¢ä¸­çš„å…·ä½“è¡Œä¸ºã€‚é€šçŸ¥å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ol><li><p><strong>å‰ç½®é€šçŸ¥ï¼ˆBefore Adviceï¼‰ï¼š</strong> åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œé€šçŸ¥é€»è¾‘ã€‚å‰ç½®é€šçŸ¥å¯ä»¥ç”¨äºéªŒè¯è¾“å…¥å‚æ•°æˆ–æ‰§è¡Œä¸€äº›å‰æœŸå‡†å¤‡å·¥ä½œã€‚</p></li><li><p><strong>åç½®é€šçŸ¥ï¼ˆAfter Adviceï¼‰ï¼š</strong> åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œé€šçŸ¥é€»è¾‘ï¼Œæ— è®ºç›®æ ‡æ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚åç½®é€šçŸ¥é€šå¸¸ç”¨äºæ‰§è¡Œæ¸…ç†å·¥ä½œæˆ–è®°å½•æ—¥å¿—ç­‰ã€‚</p></li><li><p><strong>è¿”å›é€šçŸ¥ï¼ˆAfter Returning Adviceï¼‰ï¼š</strong> ä»…åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›æ—¶æ‰§è¡Œé€šçŸ¥é€»è¾‘ã€‚å¯ä»¥ç”¨äºåœ¨æ–¹æ³•æˆåŠŸæ‰§è¡Œåæ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¦‚æ—¥å¿—è®°å½•æˆ–æ•°æ®å¤„ç†ã€‚</p></li><li><p><strong>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter Throwing Adviceï¼‰ï¼š</strong> åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶æ‰§è¡Œé€šçŸ¥é€»è¾‘ã€‚å¼‚å¸¸é€šçŸ¥é€šå¸¸ç”¨äºå¤„ç†å¼‚å¸¸ã€æ—¥å¿—è®°å½•æˆ–å‘é€é€šçŸ¥ã€‚</p></li><li><p><strong>ç¯ç»•é€šçŸ¥ï¼ˆAround Adviceï¼‰ï¼š</strong> ç¯ç»•é€šçŸ¥æ˜¯æœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼Œå®ƒåŒ…å›´ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åéƒ½å¯ä»¥å®šä¹‰é€šçŸ¥é€»è¾‘ã€‚å¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼ŒåŒ…æ‹¬æ˜¯å¦æ‰§è¡Œç›®æ ‡æ–¹æ³•ä»¥åŠå¦‚ä½•å¤„ç†å…¶è¿”å›å€¼ã€‚</p></li></ol><p>è¿™äº›é€šçŸ¥ç±»å‹å…è®¸ä½ å°†æ¨ªåˆ‡å…³æ³¨ç‚¹çš„é€»è¾‘ä¸åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»å¼€æ¥ï¼Œä»è€Œæé«˜äº†ä»£ç çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ã€‚é€šå¸¸ï¼Œåˆ‡é¢ä¼šç»„åˆå¤šç§é€šçŸ¥ç±»å‹æ¥å®ç°æ‰€éœ€çš„è¡Œä¸ºã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»Springå’ŒSpringMVCçš„å¼€å‘æ­¥éª¤</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="Spring" scheme="https://momoao.github.io/tags/Spring/"/>
    
    <category term="SpringMVC" scheme="https://momoao.github.io/tags/SpringMVC/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis</title>
    <link href="https://momoao.github.io/posts/202308281527.html"/>
    <id>https://momoao.github.io/posts/202308281527.html</id>
    <published>2023-08-28T07:27:00.000Z</published>
    <updated>2023-08-28T07:29:07.081Z</updated>
    
    <content type="html"><![CDATA[<h1>Mybatis</h1><h1>ç®€ä»‹</h1><h2 id="å›é¡¾åŸå§‹jdbcæ“ä½œ">å›é¡¾åŸå§‹jdbcæ“ä½œ</h2><p>æŸ¥è¯¢</p><p><img src="../assets/image/Mybatis_Image/image-20230610142612838.png" alt="image-20230610142612838"></p><p>æ’å…¥</p><p><img src="../assets/image/Mybatis_Image/image-20230610142816805.png" alt="image-20230610142816805"></p><p>åŸå§‹jdbcå­˜åœ¨çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</p><p><img src="../assets/image/Mybatis_Image/image-20230610143103345.png" alt="image-20230610143103345"></p><h2 id="ä»€ä¹ˆæ˜¯Mybatis">ä»€ä¹ˆæ˜¯Mybatis</h2><p><img src="../assets/image/Mybatis_Image/image-20230610143700208.png" alt="image-20230610143700208"></p><h1>å¼€å‘æ­¥éª¤</h1><p><img src="../assets/image/Mybatis_Image/image-20230611081715389.png" alt="image-20230611081715389"></p><h2 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h2><h3 id="æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085537432.png" alt="image-20230611085537432"></p><h3 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶">æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><p>sqlMapConfig.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611085605028.png" alt="image-20230611085605028"></p><h3 id="sqlè¯­å¥æ–‡ä»¶">sqlè¯­å¥æ–‡ä»¶</h3><p>UserMapper.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611085613972.png" alt="image-20230611085613972"></p><h3 id="æµ‹è¯•æ–‡ä»¶">æµ‹è¯•æ–‡ä»¶</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085648930.png" alt="image-20230611085648930"></p><h3 id="å¿…é¡»è¦æ·»åŠ çš„åæ ‡">å¿…é¡»è¦æ·»åŠ çš„åæ ‡</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085757976.png" alt="image-20230611085757976"></p><h2 id="æ˜ å°„æ–‡ä»¶æ¦‚è¿°">æ˜ å°„æ–‡ä»¶æ¦‚è¿°</h2><p><img src="../assets/image/Mybatis_Image/image-20230611090222574.png" alt="image-20230611090222574"></p><h1>å¢åˆ æ”¹æŸ¥æ“ä½œ</h1><h2 id="å¢">å¢</h2><p>UserMapper.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611093202381.png" alt="image-20230611093202381"></p><p>æµ‹è¯•ä»£ç </p><p>æ‰§è¡Œç»“æœè¿”å›è¿˜æ˜¯1ï¼Œä½†æ˜¯æ•°æ®åº“å¹¶æ²¡æœ‰æ”¶å½±å“</p><p><img src="../assets/image/Mybatis_Image/image-20230611093244040.png" alt="image-20230611093244040"></p><p>mybatisçš„äº‹åŠ¡é»˜è®¤æ˜¯ä¸æäº¤çš„ï¼ŒåŸå§‹çš„jdbcé»˜è®¤æ˜¯æäº¤çš„ï¼Œæ‰€ä»¥è¦æäº¤åæ•°æ®æ‰ä¼šè¿›åˆ°æ•°æ®åº“</p><p><img src="../assets/image/Mybatis_Image/image-20230611095203056.png" alt="image-20230611095203056"></p><p>æäº¤åå‘ç°idæ˜¯3è€Œä¸æ˜¯1ï¼Œå› ä¸ºsqlå·²ç»åˆ°äº†æ•°æ®åº“ï¼Œä½†æ˜¯ä¸šåŠ¡æ²¡æäº¤ï¼Œåªæœ‰idè‡ªå¢äº†ï¼Œä½†æ˜¯è¡¨å†…çš„æ•°æ®æ²¡å˜</p><p><img src="../assets/image/Mybatis_Image/image-20230611095217220.png" alt="image-20230611095217220"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611101214983.png" alt="image-20230611101214983"></p><h2 id="æ”¹">æ”¹</h2><p><img src="../assets/image/Mybatis_Image/image-20230611102918409.png" alt="image-20230611102918409"></p><p><img src="../assets/image/Mybatis_Image/image-20230611102928968.png" alt="image-20230611102928968"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611103409878.png" alt="image-20230611103409878"></p><h2 id="åˆ ">åˆ </h2><p>å› ä¸ºè¿™é‡Œåªæœ‰ä¸€ä¸ªå‚æ•°java.lang.Integerï¼Œæ‰€ä»¥#{}ä¸­å†™ä»€ä¹ˆåå­—éƒ½è¡Œï¼Œå†™idæ˜¯ä¸ºäº†æé«˜å¯è¯»æ€§</p><p><img src="../assets/image/Mybatis_Image/image-20230611103216866.png" alt="image-20230611103216866"></p><p><img src="../assets/image/Mybatis_Image/image-20230611103321664.png" alt="image-20230611103321664"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611103421397.png" alt="image-20230611103421397"></p><h2 id="çŸ¥è¯†å°ç»“">çŸ¥è¯†å°ç»“</h2><p><img src="../assets/image/Mybatis_Image/image-20230611105031427.png" alt="image-20230611105031427"></p><h1>æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°</h1><h2 id="å±‚çº§å…³ç³»">å±‚çº§å…³ç³»</h2><p><img src="../assets/image/Mybatis_Image/image-20230611154600251.png" alt="image-20230611154600251"></p><h2 id="environmentsæ ‡ç­¾">environmentsæ ‡ç­¾</h2><p><img src="../assets/image/Mybatis_Image/image-20230611155133546.png" alt="image-20230611155133546"></p><p><img src="../assets/image/Mybatis_Image/image-20230611155345158.png" alt="image-20230611155345158"></p><h2 id="mappersæ ‡ç­¾">mappersæ ‡ç­¾</h2><p><img src="../assets/image/Mybatis_Image/image-20230611160012398.png" alt="image-20230611160012398"></p><p><img src="../assets/image/Mybatis_Image/image-20230611160046561.png" alt="image-20230611160046561"></p><h2 id="Propertiesæ ‡ç­¾">Propertiesæ ‡ç­¾</h2><p>åœ¨æ–‡ä»¶ä¸­å¼•å…¥é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Mybatis_Image/image-20230611160827286.png" alt="image-20230611160827286"></p><p><img src="../assets/image/Mybatis_Image/image-20230611160835561.png" alt="image-20230611160835561"></p><h2 id="typeAliasesæ ‡ç­¾">typeAliasesæ ‡ç­¾</h2><p>ä½œç”¨æ˜¯å£°æ˜å…¨å±€åˆ«åï¼Œä¾‹å¦‚å°†com.itheima.domain.Userå£°æ˜ä¸ºuser</p><p>åœ¨ä»¥åä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨useräº†</p><p><img src="../assets/image/Mybatis_Image/image-20230611161044825.png" alt="image-20230611161044825"></p><p><img src="../assets/image/Mybatis_Image/image-20230611161202020.png" alt="image-20230611161202020"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»ä½¿ç”¨Mybatiså¼€å‘çš„åŸºæœ¬æ­¥éª¤ï¼Œç®€æ˜“æäº¤çœ‹Springçš„ç›¸å…³ç¬”è®°</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="Mybatis" scheme="https://momoao.github.io/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>VSCodeä¸­C++ç¯å¢ƒé…ç½®</title>
    <link href="https://momoao.github.io/posts/202308241554.html"/>
    <id>https://momoao.github.io/posts/202308241554.html</id>
    <published>2023-08-09T10:19:03.000Z</published>
    <updated>2023-08-25T12:44:14.007Z</updated>
    
    <content type="html"><![CDATA[<h1>VSCodeé…ç½®</h1><h1>c++ç¯å¢ƒé…ç½®</h1><ul><li><p>ä¸‹è½½è¿™ä¸ªæ‹“å±•ï¼Œ1.8.4ç‰ˆæœ¬<img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714165903555.png" alt="image-20230714165903555"></p></li><li><p>é€‰æ‹©ç¼–è¯‘å™¨ç¬¬ä¸€ä¸ª</p><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170141470.png" alt="image-20230714170141470"></p></li><li><p>è¿˜æ˜¯ç¬¬ä¸€ä¸ª</p><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170213229.png" alt="image-20230714170213229"></p></li><li><p>è¿è¡Œåè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶</p><ul><li><p>launch.json</p><ul><li>è®¾ç½®programæŒ‡å®šexeæ–‡ä»¶ç”Ÿæˆè·¯å¾„</li><li>è®¾ç½®externalConsoleæŒ‡å®šæ˜¯å¦åœ¨æ§åˆ¶å°ä¸­è¾“å‡º<ul><li>ä¸€èˆ¬ä½¿ç”¨trueï¼ˆé»˜è®¤falseï¼‰ï¼Œä¸ç„¶ä¼šæœ‰ä¹±ç é—®é¢˜</li></ul></li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170851815.png" alt="image-20230714170851815"></li></ul></li><li><p>task.json</p><ul><li>è¿™é‡Œä¹ŸæŒ‡å®šexeæ–‡ä»¶çš„è·¯å¾„ï¼Œéœ€è¦ä¸ä¸Šé¢çš„ä¸€æ ·</li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714171026376.png" alt="image-20230714171026376"></li></ul></li></ul></li></ul><h1>è‡ªå®šä¹‰ä»£ç æ®µé…ç½®</h1><ul><li></li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714171247386.png" alt="image-20230714171247386"></li></ul><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNjI2NTE2Mi0yNzRiZTI5ZWQxNGY3NWU4LnBuZw.png" alt="aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNjI2NTE2Mi0yNzRiZTI5ZWQxNGY3NWU4LnBuZw"></p><ul><li><p>æ–‡ä»¶ä¸­çš„é…ç½®</p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172404490.png" alt="image-20230714172404490"></p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172345791.png" alt="image-20230714172345791"></p></li><li><p>é…ç½®ä¹¦å†™è§„èŒƒ</p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172431725.png" alt="image-20230714172431725"></p></li></ul>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»VSCodeä¸­C++ç¯å¢ƒçš„é…ç½®å’Œä½¿ç”¨</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://momoao.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="VSCode" scheme="https://momoao.github.io/tags/VSCode/"/>
    
    <category term="è½¯ä»¶é…ç½®" scheme="https://momoao.github.io/tags/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>Javaè®¾è®¡æ¨¡å¼</title>
    <link href="https://momoao.github.io/posts/202310071038.html"/>
    <id>https://momoao.github.io/posts/202310071038.html</id>
    <published>2023-08-07T00:19:03.000Z</published>
    <updated>2023-10-22T06:14:11.673Z</updated>
    
    <content type="html"><![CDATA[<h1>Javaè®¾è®¡æ¨¡å¼</h1><ul><li>åŸºæœ¬è¦ç´ <ul><li>æ¨¡å¼åç§°</li><li>é—®é¢˜</li><li>è§£å†³æ–¹æ¡ˆ</li><li>æ•ˆæœ</li></ul></li><li>GoF 23<ul><li>ä¸€ç§æ€ç»´ã€æ€åº¦ã€è¿›æ­¥</li></ul></li></ul><h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>ä¸€å…±23ç§è®¾è®¡æ¨¡å¼</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007110611172.png" alt="image-20231007110611172"></p><h2 id="OOPä¸ƒå¤§åŸåˆ™">OOPä¸ƒå¤§åŸåˆ™</h2><ul><li>å¼€é—­åŸåˆ™<ul><li>å¦‚æœéœ€æ±‚å‘ç”Ÿæ”¹å˜ï¼Œä¸å…è®¸ä¿®æ”¹ï¼Œä½†æ˜¯å¯ä»¥æ‰©å±•åŠŸèƒ½</li></ul></li><li>é‡Œæ°æ›¿æ¢åŸåˆ™<ul><li>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œè¦ä¿ç•™çˆ¶ç±»æ–¹æ³•ä¸­çš„åŠŸèƒ½</li></ul></li><li>ä¾èµ–å€’ç½®åŸåˆ™<ul><li>é™ä½ç¨‹åºè€¦åˆæ€§ï¼Œå®ç°è¦å»ºç«‹åœ¨åŸºç¡€ä¹‹ä¸Š</li></ul></li><li>å•ä¸€èŒè´£åŸåˆ™<ul><li>ä¸€ä¸ªæ–¹æ³•å°½å¯èƒ½åªå®ç°ä¸€ä¸ªåŠŸèƒ½</li></ul></li><li>æ¥å£éš”ç¦»åŸåˆ™<ul><li>æ¥å£ä¹‹é—´ä¸èƒ½è¿‡äºç›¸ä¼¼å’Œç›¸åŒ</li></ul></li><li>è¿ªç±³ç‰¹åŸåˆ™<ul><li>ä¾‹å¦‚ï¼šæœ‹å‹å…³ç³»A&lt;=&gt;B&lt;=&gt;C</li><li>å½“Aæƒ³å’ŒCæ²Ÿé€šæ—¶ï¼Œä¸€å®šè¦é€šè¿‡B</li></ul></li><li>åˆæˆå¤ç”¨åŸåˆ™<ul><li>å®ƒå¼ºè°ƒåœ¨åˆ›å»ºæ–°ç±»æ—¶åº”ä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿</li></ul></li></ul><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007111031937.png" alt="image-20231007111031937"></p><h2 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</h2><p>é‡ç‚¹ï¼š</p><h3 id="é¥¿æ±‰å¼å•ä¾‹">é¥¿æ±‰å¼å•ä¾‹</h3><ul><li>æ„é€ æ–¹æ³•ç§æœ‰åŒ–</li><li>åœ¨staticä»£ç å—é‡Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè®©å†…å­˜ä¸­æœ‰ä¸”ä»…æœ‰è¿™ä¸€ä¸ªå¯¹è±¡</li></ul><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007112654414.png" alt="image-20231007112654414"></p><h3 id="æ‡’æ±‰å¼å•åˆ—">æ‡’æ±‰å¼å•åˆ—</h3><ul><li><p>ç§æœ‰æ„é€ å™¨</p></li><li><p>åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºå¯¹è±¡</p></li><li><p>ä½¿ç”¨åŒé‡æ£€æµ‹é”æ¨¡å¼</p></li><li><p>ä½¿ç”¨volatileé˜²æ­¢æŒ‡ä»¤é‡æ’ï¼Œä½†ä¸ä¿è¯åŸå­æ€§</p></li></ul><p>ç¬¬ä¸€ä¸ªifçš„ä½œç”¨ï¼šå¦‚æœæ²¡æœ‰ç¬¬ä¸€ä¸ªifï¼Œçº¿ç¨‹è¿›å…¥æ–¹æ³•æ—¶ï¼Œå°±éœ€è¦å…ˆåŠ é”åœ¨åˆ¤æ–­å¯¹è±¡æ˜¯å¦åˆ›å»ºï¼Œé”çš„åˆ›å»ºå’Œé‡Šæ”¾å¾ˆè€—è´¹èµ„æºï¼Œæ‰€ä»¥å½“çº¿ç¨‹è¿›å…¥æ–¹æ³•æ—¶ï¼Œç›´æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨è€Œä¸è¿›è¡Œå’Œé”ç›¸å…³çš„æ“ä½œ</p><p>ä¸åŠ volatileå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼šçº¿ç¨‹Aè¿›å…¥æ–¹æ³•ï¼Œæ‰§è¡Œåˆ°äº†åˆ›å»ºå¯¹è±¡é‚£æ­¥ï¼Œå› ä¸ºnewä¸æ˜¯åŸå­æ“ä½œï¼Œåˆ†ä¸º3ä¸ªæ“ä½œï¼Œå¯èƒ½å‘ç”ŸæŒ‡ä»¤é‡æ’ï¼Œå¦‚æœå…ˆæ‰§è¡Œ1å’Œ3ï¼Œé‚£ä¹ˆå¯¹è±¡ä¸ä¸ºnullï¼Œå› ä¸ºæœ‰äº†å†…å­˜ç©ºé—´ï¼ˆè™½ç„¶è¿˜æ²¡åˆå§‹åŒ–ï¼Œä½†æ˜¯ä¹Ÿä¸ä¸ºnulläº†ï¼‰ï¼›è¿™æ—¶å€™çº¿ç¨‹Bè¿›å…¥æ–¹æ³•ï¼Œå‘ç°ç¬¬ä¸€ä¸ªifè¿›ä¸å»ï¼Œä¹‹é—´æ‰§è¡Œreturnï¼Œä¼šé€ æˆè¿”å›å¯¹è±¡è™½ç„¶ä¸æ˜¯nullï¼Œä½†æ˜¯å†…å­˜ç©ºé—´ä¸­å¹¶æ²¡æœ‰æ•°æ®</p><p>â€‹</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007113609919.png" alt="image-20231007113609919"></p><h4 id="æ‡’æ±‰å¼å¦ä¸€ç§å®ç°ï¼ˆé™æ€å†…éƒ¨ç±»ï¼‰">æ‡’æ±‰å¼å¦ä¸€ç§å®ç°ï¼ˆé™æ€å†…éƒ¨ç±»ï¼‰</h4><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007114836968.png" alt="image-20231007114836968"></p><h3 id="é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼åŒºåˆ«">é¥¿æ±‰å¼å’Œæ‡’æ±‰å¼åŒºåˆ«</h3><p>é¥¿æ±‰å¼ç›´æ¥åˆ›å»ºäº†å¯¹è±¡ï¼Œæ–¹æ³•æ˜¯ç”¨äºè¿”å›è¿™ä¸ªå¯¹è±¡çš„</p><p>æ‡’æ±‰å¼ä¸€å¼€å§‹å¹¶æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œç­‰è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ‰åˆ›å»ºå¯¹è±¡å¹¶è¿”å›</p><h3 id="é€šè¿‡åå°„ç ´åå•ä¾‹">é€šè¿‡åå°„ç ´åå•ä¾‹</h3><p>é€šè¿‡åå°„è·å¾—æ„é€ å™¨ï¼Œå¼€å¯æƒé™ï¼Œä½¿ç”¨æ„é€ å™¨åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007115053108.png" alt="image-20231007115053108"></p><p>é˜²æ­¢åå°„ç ´å</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007115252302.png" alt="image-20231007115252302"></p><p>ä½†æ˜¯ä¼šæœ‰æ–°é—®é¢˜</p><p>åŒæ—¶æ‹¿åˆ°</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007115713742.png" alt="image-20231007115713742"></p><h3 id="æ€»ç»“">æ€»ç»“</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007134938431.png" alt="image-20231007134938431"></p><h2 id="å·¥å‚æ¨¡å¼">å·¥å‚æ¨¡å¼</h2><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007135234179.png" alt="image-20231007135234179"></p><h3 id="ç®€å•å·¥å‚æ¨¡å¼ï¼ˆé™æ€å·¥å‚æ¨¡å¼ï¼‰">ç®€å•å·¥å‚æ¨¡å¼ï¼ˆé™æ€å·¥å‚æ¨¡å¼ï¼‰</h3><p>ä¸æ»¡è¶³å¼€é—­åŸåˆ™</p><p><strong>åœ¨ä¸€ä¸ªå·¥å‚ç±»é‡Œå®ç°æ‰€æœ‰è½¦éœ€è¦çš„æ“ä½œ</strong></p><p>å·¥å‚ç±»</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007135713053.png" alt="image-20231007135713053"></p><p>æ¶ˆè´¹è€…ä¸å…³å¿ƒè½¦çš„ç»†èŠ‚ï¼Œè€Œæ˜¯ç›´æ¥æ‰¾å·¥å‚</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007140057080.png" alt="image-20231007140057080"></p><h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼">å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>ç»™å·¥å‚ä¹Ÿåˆ›å»ºæ¥å£</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007140356430.png" alt="image-20231007140356430"></p><p><strong>æ¯ä¸ªè½¦å‹éƒ½æœ‰è‡ªå·±çš„å·¥å‚ç±»ï¼Œå®ç°äº†å·¥å‚æ¥å£</strong>ï¼Œ<strong>å¹¶ç»§æ‰¿è½¦ç±»</strong></p><p><strong>è¦åˆ¶ä½œæ–°è½¦ï¼Œå°±éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥å‚ç±»ï¼Œå®ç°å·¥å‚æ¥å£å¹¶ç»§æ‰¿è½¦ç±»</strong></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007140519172.png" alt="image-20231007140519172"></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007140851510.png" alt="image-20231007140851510"></p><p>ç»“æ„å¤æ‚åº¦ï¼šsimpleä½</p><p>ä»£ç å¤æ‚åº¦ï¼šsimpleä½</p><p>æ ¹æ®è®¾è®¡åŸåˆ™ï¼šä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼</p><p>æ ¹æ®å®é™…ä¸šåŠ¡ï¼šä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼</p><h3 id="å°ç»“">å°ç»“</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007141203815.png" alt="image-20231007141203815"></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007135008003.png" alt="image-20231007135008003"></p><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼">æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p>ä¸¾ä¾‹ï¼šå·¥å‚æ¥å£ç”±å°ç±³å’Œåä¸ºå®ç°ï¼Œä»–ä»¬éƒ½èƒ½ç”Ÿæˆæ‰‹æœºï¼Œä½†æ˜¯å› ä¸ºä¸æ˜¯åŒä¸€å·¥å‚ï¼Œæ‰€ä»¥æ‰‹æœºç±»å‹ä¸ä¸€æ ·</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007141417785.png" alt="image-20231007141417785"></p><p>æ¦‚è¿°</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007141504189.png" alt="image-20231007141504189"></p><p>äº§å“æ—å’Œäº§å“ç­‰çº§</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007141709630.png" alt="image-20231007141709630"></p><p>åˆ›å»ºæ¥å£ï¼šæ‰‹æœºæ¥å£ã€è·¯ç”±å™¨æ¥å£</p><ul><li>åˆ›å»ºç±»ï¼š<ul><li>å°ç±³æ‰‹æœºï¼Œå®ç°æ‰‹æœºæ¥å£</li><li>åä¸ºæ‰‹æœºï¼Œå®ç°æ‰‹æœºæ¥å£</li><li>å°ç±³è·¯ç”±å™¨ï¼Œå®ç°è·¯ç”±å™¨æ¥å£</li><li>åä¸ºè·¯ç”±å™¨ï¼Œå®ç°è·¯ç”±å™¨æ¥å£</li></ul></li></ul><p>å°ç±³æ‰‹æœºå’Œåä¸ºæ‰‹æœºå±äºåŒä¸€äº§å“ç­‰çº§</p><p>å°ç±³æ‰‹æœºå’Œå°ç±³è·¯ç”±å™¨å±äºåŒä¸€äº§å“æ—</p><ul><li>åˆ›å»ºæŠ½è±¡å·¥å‚æ¥å£<ul><li>å†…æœ‰æ‰‹æœºç”Ÿäº§æ¥å£å’Œè·¯ç”±å™¨ç”Ÿäº§æ¥å£</li></ul></li></ul><p>ç”¨å°ç±³å·¥å‚ç»§æ‰¿æ¥å£</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007143311460.png" alt="image-20231007143311460"></p><h3 id="æƒ³ä½¿ç”¨å°ç±³æ‰‹æœºæ—¶">æƒ³ä½¿ç”¨å°ç±³æ‰‹æœºæ—¶</h3><ul><li>åˆ›å»ºå°ç±³å·¥å‚</li><li>ä½¿ç”¨å°ç±³å·¥å‚åˆ›å»ºæ‰‹æœºå·¥å‚</li><li>ä½¿ç”¨æ‰‹æœºå·¥å‚åˆ›å»ºæ‰‹æœºå¹¶ä½¿ç”¨</li></ul><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007144034863.png" alt="image-20231007144034863"></p><h3 id="å¦‚æœæƒ³æ·»åŠ ä¸€ä¸ªæ–°äº§å“ç”µè„‘">å¦‚æœæƒ³æ·»åŠ ä¸€ä¸ªæ–°äº§å“ç”µè„‘</h3><ul><li>åˆ›å»ºç”µè„‘æ¥å£</li><li>åˆ›å»ºå°ç±³ç”µè„‘ç±»å’Œåä¸ºç”µè„‘ç±»ï¼Œå®ç°ç”µè„‘æ¥å£</li><li>åœ¨æŠ½è±¡å·¥å‚æ¥å£ä¸­æ·»åŠ ç”µè„‘æ–¹æ³•</li><li>åœ¨å°ç±³å·¥å‚ç±»å’Œåä¸ºå·¥å‚ç±»ä¸­å®ç°æŠ½è±¡å·¥å‚æ¥å£ä¸­æ–°æ·»åŠ çš„ç”µè„‘æ–¹æ³•</li></ul><p>è¿åå¼€é—­åŸåˆ™</p><h3 id="æ•´ä½“ç»“æ„">æ•´ä½“ç»“æ„</h3><p><strong>è¿™é‡Œçš„å°ç±³å·¥å‚å°±æ˜¯å·¥å‚çš„å·¥å‚ï¼Œæ˜¯æŠ½è±¡å·¥å‚</strong></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007144200356.png" alt="image-20231007144200356"></p><h2 id="å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼</h2><h3 id="æ¦‚è¿°-2">æ¦‚è¿°</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007145026041.png" alt="image-20231007145026041"></p><p>åˆ†æ</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007145056504.png" alt="image-20231007145056504"></p><h3 id="è¿‡ç¨‹">è¿‡ç¨‹</h3><p>åˆ›å»ºæŠ½è±¡å»ºé€ è€…</p><p>ä¸è´Ÿè´£å»ºæˆ¿å­ï¼Œå®šä¹‰ä¸€äº›æ¥å£</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007163453973.png" alt="image-20231007163453973"></p><p>åˆ›å»ºäº§å“ç±»</p><p>æ˜¯å…·ä½“çš„æˆ¿å­ï¼ˆå¹³æˆ¿æˆ–åˆ«å¢…ï¼‰</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007163419211.png" alt="image-20231007163419211"></p><p>åˆ›å»ºå·¥äºº</p><p>å…·ä½“çš„å»ºé€ è€…ï¼Œè´Ÿè´£å»ºé€ æˆ¿å­</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007163614894.png" alt="image-20231007163614894"></p><p>åˆ›å»ºæŒ‡æŒ¥è€…</p><p>è°ƒç”¨æŠ½è±¡å·¥äººæ¥ç›–æˆ¿å­</p><p>å»ºé€ æµç¨‹é¡ºåºéœ€è¦æŒ‡æŒ¥è€…æ¥æŒ‡å®š</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007163754871.png" alt="image-20231007163754871"></p><p>æµ‹è¯•</p><p>è¿™é‡ŒæŒ‡æŒ¥éœ€è¦æŒ‡å®šå…·ä½“çš„å·¥äºº</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007163855812.png" alt="image-20231007163855812"></p><h3 id="è¿‡ç¨‹2">è¿‡ç¨‹2</h3><p>æŠ½è±¡å»ºé€ è€…ï¼ˆå„ç§é£Ÿç‰©ï¼‰</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007164600278.png" alt="image-20231007164600278"></p><p>äº§å“ï¼ˆå…·ä½“çš„å¥—é¤ï¼‰</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007164631127.png" alt="image-20231007164631127"></p><p>å…·ä½“çš„å»ºé€ è€…</p><ul><li>æœåŠ¡å‘˜ï¼ˆé»˜è®¤å¥—é¤ï¼‰</li><li>é¡¾å®¢ï¼ˆè‡ªå®šä¹‰å¥—é¤ï¼‰</li></ul><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007164736184.png" alt="image-20231007164736184"></p><p>é»˜è®¤å¥—é¤</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007164922356.png" alt="image-20231007164922356"></p><p>ä½¿ç”¨é“¾å¼ç¼–ç¨‹æ¨¡æ‹Ÿé¡¾å®¢</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007165025920.png" alt="image-20231007165025920"></p><h3 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹</h3><p><strong>ç¬¦åˆå¼€é—­åŸåˆ™</strong></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007165206435.png" alt="image-20231007165206435"></p><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007164110809.png" alt="image-20231007164110809"></p><h3 id="åº”ç”¨åœºæ™¯å’Œæ¯”è¾ƒ">åº”ç”¨åœºæ™¯å’Œæ¯”è¾ƒ</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007165312853.png" alt="image-20231007165312853"></p><h2 id="åŸå‹æ¨¡å¼">åŸå‹æ¨¡å¼</h2><p>åˆ›å»ºç±»ï¼Œå®ç°æ¥å£<code>Cloneable</code>ï¼Œé‡å†™å…¶ä¸­çš„<code>clone()</code></p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007174741698.png" alt="image-20231007174741698"></p><p>ä¹‹åå°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å…‹éš†è¿™ä¸ªç±»çš„å¯¹è±¡äº†</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007175402855.png" alt="image-20231007175402855"></p><p>è¿™é‡Œçš„clone()é»˜è®¤å®ç°çš„æ˜¯æµ…å…‹éš†ï¼Œå¦‚æœæƒ³å®ç°æ·±å…‹éš†éœ€è¦è‡ªå·±é‡å†™clone()ï¼Œåœ¨æ–¹æ³•ä¸­å¤åˆ¶æ‰€æœ‰æˆå‘˜ï¼Œå¼•ç”¨ç±»å‹çš„æˆå‘˜ä¹Ÿè°ƒç”¨clone()æ–¹æ³•</p><h2 id="é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼</h2><p>åˆ›å»ºä¸€ä¸ªè¦è¢«é€‚é…çš„ç±»ï¼ˆç½‘çº¿ï¼‰</p><p>åˆ›å»ºä¸€ä¸ªé€‚é…å™¨æ¥å£</p><p>åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ç»§æ‰¿è¦è¢«é€‚é…çš„ç±»ï¼Œå®ç°é€‚é…å™¨æ¥å£</p><p>åˆ›å»ºç”µè„‘ç±»</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007180600482.png" alt="image-20231007180600482"></p><p>æ–¹æ³•äºŒ</p><p>ä¹‹å‰çš„æ–¹æ³•ä¸€ä½¿ç”¨çš„ç»§æ‰¿æ–¹å¼ï¼ˆç±»é€‚é…å™¨ï¼Œå•ç»§æ‰¿ï¼‰</p><p>è¿™é‡Œä½¿ç”¨ç»„åˆçš„æ–¹å¼ï¼ˆå¯¹è±¡é€‚é…å™¨ï¼šå¸¸ç”¨ï¼‰</p><p>åˆ›å»ºé€‚é…å™¨</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007180816490.png" alt="image-20231007180816490"></p><p>åˆ›å»ºæµ‹è¯•</p><p>æ„é€ æ–¹æ³•ä¸­å‚æ•°æ˜¯ç½‘çº¿ï¼Œä¹‹åè°ƒç”¨ç”µè„‘çš„ä¸Šç½‘æ–¹æ³•ï¼Œå‚æ•°æ˜¯é€‚é…å™¨å¯¹è±¡</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007180902318.png" alt="image-20231007180902318"></p><h3 id="å°ç»“-2">å°ç»“</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007180940906.png" alt="image-20231007180940906"></p><p>ç»“æ„å›¾</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007181207286.png" alt="image-20231007181207286"></p><h3 id="ä¼˜ç¼ºç‚¹-2">ä¼˜ç¼ºç‚¹</h3><p>å¯¹è±¡é€‚é…å™¨æ›´å¥½ç”¨</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007181220367.png" alt="image-20231007181220367"></p><h2 id="é™æ€ä»£ç†æ¨¡å¼">é™æ€ä»£ç†æ¨¡å¼</h2><p>ç»“æ„</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007182633020.png" alt="image-20231007182633020"></p><p>åˆ›å»ºä»£ç†</p><p>ç»§æ‰¿ç§Ÿæˆ¿å­æ¥å£ï¼Œå®ç°æ¥å£ä¸­çš„æ–¹æ³•ï¼šè°ƒç”¨æˆ¿ä¸œçš„å‡ºç§Ÿæ–¹æ³•</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007183142188.png" alt="image-20231007183142188"></p><p>æµ‹è¯•</p><p>åˆ›å»ºä»£ç†ï¼Œå‘Šè¯‰ä»£ç†æˆ¿ä¸œæ˜¯è°ï¼Œç„¶åè°ƒç”¨ä»£ç†çš„ç§Ÿæˆ¿æ–¹æ³•</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007183249929.png" alt="image-20231007183249929"></p><p>ä¸­ä»‹ç›¸å¯¹æˆ¿ä¸œçš„å¢å¼ºåŠŸèƒ½</p><p>ä¸ä»…è°ƒç”¨æˆ¿ä¸œçš„ç§Ÿæˆ¿æ–¹æ³•ï¼Œè¿˜å¯ä»¥åœ¨æ–¹æ³•é‡Œå¢åŠ ä¸€äº›é™„å±æ“ä½œ</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007183446462.png" alt="image-20231007183446462"></p><h3 id="å¥½å¤„">å¥½å¤„</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007183641917.png" alt="image-20231007183641917"></p><h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3><p>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ç¿»å€</p><h2 id="åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†</h2><h3 id="æ¦‚è¿°-3">æ¦‚è¿°</h3><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007184116026.png" alt="image-20231007184116026"></p><p>äº†è§£ä¸¤ä¸ªç±»ï¼šProxy  ä»£ç†ã€ InvocationHandler è°ƒç”¨å¤„ç†</p><p>ä¹‹å‰çš„ä»£ç†ç±»æ˜¯å†™æ­»çš„ï¼Œè¿™é‡Œé€šè¿‡ç»§æ‰¿InvocationHandleræ¥å£æ¥è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»</p><p>Proxyæä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å’Œå®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯ç”±è¿™äº›æ–¹æ³•åˆ›å»ºçš„æ‰€æœ‰åŠ¨æ€ä»£ç†ç±»çš„è¶…ç±»</p><p>åˆ›å»ºåŠ¨æ€ä»£ç†ç±»</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007185744865.png" alt="image-20231007185744865"></p><p>åˆ›å»ºæµ‹è¯•</p><p><img src="../assets/image/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_Image/image-20231007190204644.png" alt="image-20231007190204644"></p><h2 id="Aiæ€»ç»“">Aiæ€»ç»“</h2><h3 id="æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«">æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h3><p>æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰å’Œæ¥å£ï¼ˆInterfaceï¼‰æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸¤ç§ä¸åŒçš„æ¦‚å¿µï¼Œå®ƒä»¬åœ¨æŸäº›æ–¹é¢æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯æŠ½è±¡ç±»å’Œæ¥å£çš„ä¸»è¦åŒºåˆ«ï¼š</p><ol><li><p><strong>æ–¹æ³•å®ç°ï¼š</strong></p><ul><li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ˆæ²¡æœ‰æ–¹æ³•ä½“ï¼‰ï¼Œä¹Ÿå¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•ï¼ˆæœ‰æ–¹æ³•ä½“ï¼‰ã€‚å­ç±»ç»§æ‰¿æŠ½è±¡ç±»æ—¶å¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å·²ç»å®ç°çš„å…·ä½“æ–¹æ³•ã€‚</li><li>æ¥å£åªèƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ã€‚ç±»å®ç°æ¥å£æ—¶å¿…é¡»å®ç°æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ã€‚</li></ul></li><li><p><strong>å¤šç»§æ‰¿ï¼š</strong></p><ul><li>åœ¨Javaä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼ˆå•ç»§æ‰¿ï¼‰ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼ˆå¤šå®ç°ï¼‰ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªç±»å·²ç»ç»§æ‰¿äº†ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½å†ç»§æ‰¿å…¶ä»–ç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</li></ul></li><li><p><strong>æ„é€ å‡½æ•°ï¼š</strong></p><ul><li>æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼Œè€Œæ¥å£ä¸èƒ½æœ‰æ„é€ å‡½æ•°ã€‚æŠ½è±¡ç±»çš„æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–å¯¹è±¡çŠ¶æ€ï¼Œè€Œæ¥å£ä»…å®šä¹‰äº†æ–¹æ³•ç­¾åï¼Œä¸åŒ…å«å®é™…çš„å®ç°ã€‚</li></ul></li><li><p><strong>æˆå‘˜å˜é‡ï¼š</strong></p><ul><li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜å˜é‡ï¼Œè¿™äº›å˜é‡å¯ä»¥æ˜¯æŠ½è±¡çš„ã€å…·ä½“çš„ï¼Œæˆ–è€…é™æ€çš„ã€‚æ¥å£åªèƒ½åŒ…å«å¸¸é‡ï¼ˆ<code>public static final</code>ï¼‰ã€‚</li></ul></li><li><p><strong>ç”¨é€”ï¼š</strong></p><ul><li>æŠ½è±¡ç±»é€šå¸¸ç”¨äºè¡¨ç¤ºä¸€ç§åŸºæœ¬ç±»æˆ–è€…æŸç§å…·ä½“ç±»å‹ï¼Œå®ƒå¯ä»¥åŒ…å«ä¸€äº›é€šç”¨çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¹¶ä¸”å¯ä»¥æä¾›ä¸€äº›é»˜è®¤çš„å®ç°ã€‚å­ç±»é€šè¿‡ç»§æ‰¿æŠ½è±¡ç±»æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚</li><li>æ¥å£ç”¨äºå®šä¹‰ä¸€ç§å¥‘çº¦ï¼Œå®ƒè§„å®šäº†å®ç°ç±»å¿…é¡»æä¾›çš„æ–¹æ³•ï¼Œä»¥ç¡®ä¿ä¸€è‡´æ€§ã€‚ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä»è€Œå…·å¤‡å¤šä¸ªä¸åŒçš„è¡Œä¸ºã€‚æ¥å£é€šå¸¸ç”¨äºå®ç°å¤šæ€å’Œè§£è€¦ã€‚</li></ul></li><li><p><strong>ç‰ˆæœ¬æ¼”åŒ–ï¼š</strong></p><ul><li>å¦‚æœè¦åœ¨ç°æœ‰çš„æŠ½è±¡ç±»ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼Œå¯èƒ½ä¼šç ´åå·²æœ‰çš„å­ç±»ï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»è¦†ç›–æ–°æ–¹æ³•ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å‘åä¸å…¼å®¹çš„å˜åŒ–ã€‚</li><li>æ¥å£çš„ä¿®æ”¹æ›´åŠ çµæ´»ï¼Œå› ä¸ºå®ç°ç±»åªéœ€å®ç°æ¥å£ä¸­çš„å¿…è¦æ–¹æ³•ï¼Œä¸ä¼šå—åˆ°æ–°æ–¹æ³•çš„å½±å“ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼ŒæŠ½è±¡ç±»å’Œæ¥å£éƒ½æ˜¯åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ç”¨äºå®ç°å¤šæ€å’Œå°è£…çš„å·¥å…·ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡å’Œä½¿ç”¨ä¸Šæœ‰ä¸åŒçš„çº¦æŸå’Œç”¨é€”ã€‚é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼å–å†³äºæ‚¨çš„éœ€æ±‚å’Œè®¾è®¡ç›®æ ‡ã€‚é€šå¸¸ï¼Œå¦‚æœæ‚¨å¸Œæœ›ä¸ºå¤šä¸ªä¸ç›¸å…³çš„ç±»æä¾›ä¸€è‡´çš„å¥‘çº¦ï¼Œä½¿ç”¨æ¥å£æ›´åˆé€‚ã€‚å¦‚æœæ‚¨éœ€è¦æä¾›ä¸€äº›é€šç”¨çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¹¶å¸Œæœ›å­ç±»æ‰©å±•è¿™äº›æ–¹æ³•ï¼Œä½¿ç”¨æŠ½è±¡ç±»æ›´åˆé€‚ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šç»“åˆä½¿ç”¨æŠ½è±¡ç±»å’Œæ¥å£ï¼Œä»¥è¾¾åˆ°æ›´çµæ´»çš„è®¾è®¡ã€‚</p><h3 id="åˆ›å»ºã€ç»“æ„ã€è¡Œä¸ºè¿™äº›è®¾è®¡æ¨¡å¼çš„åŒºåˆ«å’Œç‰¹ç‚¹">åˆ›å»ºã€ç»“æ„ã€è¡Œä¸ºè¿™äº›è®¾è®¡æ¨¡å¼çš„åŒºåˆ«å’Œç‰¹ç‚¹</h3><p>è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§è§£å†³ç‰¹å®šé—®é¢˜çš„é€šç”¨æ–¹æ³•ï¼Œå®ƒä»¬æä¾›äº†åœ¨è½¯ä»¶è®¾è®¡ä¸­å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è®¾è®¡æ¨¡å¼é€šå¸¸åˆ†ä¸ºä¸‰ä¸ªä¸»è¦ç±»å‹ï¼šåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructural Patternsï¼‰å’Œè¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ã€‚ä¸‹é¢æˆ‘å°†ä¸ºæ‚¨è§£é‡Šè¿™ä¸‰ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼çš„åŒºåˆ«å’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>åˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ï¼š</strong></p><ul><li><strong>ç›®çš„ï¼š</strong> åˆ›å»ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œéšè—äº†åˆ›å»ºå¯¹è±¡çš„å¤æ‚æ€§ï¼Œæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> åˆ›å»ºå‹æ¨¡å¼æœ‰å¤šç§ï¼ŒåŒ…æ‹¬å•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ç­‰ã€‚å®ƒä»¬çš„å…±åŒç›®æ ‡æ˜¯å°è£…å¯¹è±¡çš„åˆ›å»ºå’Œå®ä¾‹åŒ–ï¼Œä½¿ä»£ç æ›´åŠ çµæ´»å’Œå¯ç»´æŠ¤ã€‚</li></ul></li><li><p><strong>ç»“æ„å‹æ¨¡å¼ï¼ˆStructural Patternsï¼‰ï¼š</strong></p><ul><li><strong>ç›®çš„ï¼š</strong> ç»“æ„å‹æ¨¡å¼å…³æ³¨å¯¹è±¡å¦‚ä½•ç»„åˆæˆæ›´å¤§çš„ç»“æ„ï¼Œä»¥æ»¡è¶³ç³»ç»Ÿçš„éœ€æ±‚ã€‚å®ƒä»¬é€šå¸¸æ¶‰åŠåˆ°ç±»å’Œå¯¹è±¡çš„ç»„åˆï¼Œä»¥å½¢æˆæ›´å¤æ‚çš„ç»“æ„ã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> ç»“æ„å‹æ¨¡å¼æœ‰å¤šç§ï¼ŒåŒ…æ‹¬é€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€äº«å…ƒæ¨¡å¼å’Œä»£ç†æ¨¡å¼ç­‰ã€‚å®ƒä»¬çš„å…±åŒç›®æ ‡æ˜¯æ”¹å–„ç³»ç»Ÿçš„ç»“æ„ï¼Œä½¿å…¶æ›´åŠ çµæ´»ã€å¯æ‰©å±•å’Œå¯ç»´æŠ¤ã€‚</li></ul></li><li><p><strong>è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ï¼š</strong></p><ul><li><strong>ç›®çš„ï¼š</strong> è¡Œä¸ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’ŒèŒè´£åˆ†é…ã€‚å®ƒä»¬æè¿°äº†å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ–¹å¼ï¼Œä»¥æ”¯æŒæ›´æ¾æ•£è€¦åˆçš„ç³»ç»Ÿã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> è¡Œä¸ºå‹æ¨¡å¼æœ‰å¤šç§ï¼ŒåŒ…æ‹¬è§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼å’ŒèŒè´£é“¾æ¨¡å¼ç­‰ã€‚å®ƒä»¬çš„å…±åŒç›®æ ‡æ˜¯æ”¹å–„å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œåä½œï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»å’Œå¯ç»´æŠ¤ã€‚</li></ul></li></ol><p>æ€»ç»“ä¸€ä¸‹ï¼Œåˆ›å»ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡çš„åˆ›å»ºï¼Œç»“æ„å‹æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„ç»„åˆï¼Œè¡Œä¸ºå‹æ¨¡å¼å…³æ³¨å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚é€‰æ‹©é€‚å½“çš„è®¾è®¡æ¨¡å¼å¯ä»¥ä½¿ä»£ç æ›´å…·å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¹¶æœ‰åŠ©äºè§£å†³ç‰¹å®šç±»å‹çš„é—®é¢˜ã€‚ä¸åŒçš„è®¾è®¡æ¨¡å¼é€‚ç”¨äºä¸åŒçš„æƒ…å¢ƒï¼Œæ ¹æ®å…·ä½“éœ€æ±‚æ¥é€‰æ‹©å’Œç»„åˆè¿™äº›æ¨¡å¼ä»¥æ»¡è¶³é¡¹ç›®çš„è¦æ±‚ã€‚</p><h3 id="Javaä¸­æœ‰å“ªäº›åŸå­æ€§æ“ä½œ">Javaä¸­æœ‰å“ªäº›åŸå­æ€§æ“ä½œ</h3><p>åœ¨Javaä¸­ï¼ŒåŸå­æ€§æ“ä½œæ˜¯æŒ‡ä¸€ä¸ªæ“ä½œåœ¨æ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°æˆ–ä¸­æ–­ï¼Œè¦ä¹ˆæ‰§è¡Œå®Œå…¨ï¼Œè¦ä¹ˆä¸æ‰§è¡Œï¼Œä¸ä¼šå‡ºç°éƒ¨åˆ†æ‰§è¡Œçš„æƒ…å†µã€‚Javaæä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°åŸå­æ€§æ“ä½œï¼Œå…¶ä¸­åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p><strong>synchronizedå…³é”®å­—</strong>ï¼šä½¿ç”¨synchronizedå…³é”®å­—å¯ä»¥å®ç°å¯¹ä¸´ç•ŒåŒºä»£ç å—çš„åŸå­æ€§æ“ä½œã€‚é€šè¿‡å°†å…³é”®ä»£ç å—æ ‡è®°ä¸ºsynchronizedï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŒæ—¶æ‰§è¡Œè¯¥ä»£ç å—ï¼Œä»è€Œä¿è¯åŸå­æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> (lockObject) &#123;</span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒºä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>volatileå…³é”®å­—</strong>ï¼švolatileå…³é”®å­—å¯ä»¥ç”¨æ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹è¯¥å˜é‡çš„æ“ä½œæ˜¯å¯è§çš„ï¼Œå¹¶ä¸”ä¸ä¼šè¢«é‡æ’åºã€‚è™½ç„¶å®ƒä¸èƒ½è§£å†³æ‰€æœ‰åŸå­æ€§é—®é¢˜ï¼Œä½†å¯ä»¥ç”¨æ¥ç¡®ä¿æŸäº›æ“ä½œçš„åŸå­æ€§ï¼Œä¾‹å¦‚åœ¨å•æ¬¡è¯»å–æˆ–å†™å…¥æ“ä½œä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> count;</span><br></pre></td></tr></table></figure></li><li><p><strong>java.util.concurrent.atomicåŒ…</strong>ï¼šJavaæä¾›äº†java.util.concurrent.atomicåŒ…ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ç³»åˆ—åŸå­ç±»ï¼Œç”¨äºæ‰§è¡ŒåŸå­æ€§æ“ä½œï¼Œå¦‚AtomicIntegerã€AtomicLongã€AtomicBooleanç­‰ã€‚è¿™äº›ç±»æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹å˜é‡çš„åŸå­æ›´æ–°æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AtomicInteger</span> <span class="variable">atomicInteger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">atomicInteger.incrementAndGet(); <span class="comment">// åŸå­æ€§çš„è‡ªå¢æ“ä½œ</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Lockæ¥å£</strong>ï¼šJavaæä¾›äº†Lockæ¥å£çš„å®ç°ç±»ï¼Œå¦‚ReentrantLockï¼Œç”¨äºæ”¯æŒæ›´çµæ´»çš„é”å®šæœºåˆ¶ã€‚é€šè¿‡Lockæ¥å£ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­æ˜¾å¼åœ°é”å®šå’Œè§£é”ï¼Œä»¥å®ç°åŸå­æ€§æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">lock.lock();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒºä»£ç </span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    lock.unlock();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>è¿™äº›æ–¹æ³•æä¾›äº†ä¸åŒçº§åˆ«çš„åŸå­æ€§ä¿è¯ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚é€‰æ‹©é€‚å½“çš„æ–¹å¼æ¥å®ç°åŸå­æ€§æ“ä½œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™äº›æ–¹å¼å¯ä»¥ç¡®ä¿æŸäº›æ“ä½œçš„åŸå­æ€§ï¼Œä½†ä»ç„¶éœ€è¦è°¨æ…åœ°è®¾è®¡å¤šçº¿ç¨‹ä»£ç ï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œæ­»é”ç­‰é—®é¢˜ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»Javaè®¾è®¡æ¨¡å¼çš„åŸºç¡€çŸ¥è¯†ç‚¹å’ŒåŸºæœ¬ä½¿ç”¨</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://momoao.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>JVM</title>
    <link href="https://momoao.github.io/posts/202310030946.html"/>
    <id>https://momoao.github.io/posts/202310030946.html</id>
    <published>2023-08-03T10:19:03.000Z</published>
    <updated>2023-10-18T09:06:18.655Z</updated>
    
    <content type="html"><![CDATA[<h1>JVM</h1><h2 id="å‰è¨€">å‰è¨€</h2><h3 id="Javaå†…å­˜æ¨¡å‹">Javaå†…å­˜æ¨¡å‹</h3><h4 id="ä»€ä¹ˆæ˜¯Javaå†…å­˜æ¨¡å‹">ä»€ä¹ˆæ˜¯Javaå†…å­˜æ¨¡å‹</h4><p><img src="../assets/image/JVM_Image/image-20231003094717616.png" alt="image-20231003094717616"></p><p>å…³ç³»å›¾</p><p><img src="../assets/image/JVM_Image/image-20231003094734373.png" alt="image-20231003094734373"></p><h4 id="å¤šçº§ç¼“å­˜å’Œä¸€è‡´æ€§é—®é¢˜">å¤šçº§ç¼“å­˜å’Œä¸€è‡´æ€§é—®é¢˜</h4><p><img src="../assets/image/JVM_Image/image-20231003095905800.png" alt="image-20231003095905800"></p><h4 id="åŸå­æ€§">åŸå­æ€§</h4><p><img src="../assets/image/JVM_Image/image-20231003095930721.png" alt="image-20231003095930721"></p><h4 id="å¯è§æ€§">å¯è§æ€§</h4><p><img src="../assets/image/JVM_Image/image-20231003100052920.png" alt="image-20231003100052920"></p><h4 id="æœ‰åºæ€§">æœ‰åºæ€§</h4><p><img src="../assets/image/JVM_Image/image-20231003100437689.png" alt="image-20231003100437689"></p><h4 id="å†…å­˜äº¤äº’">å†…å­˜äº¤äº’</h4><p>ç”±äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„å…·ä½“äº¤äº’åè®®ï¼ŒJavaå†…å­˜æ¨¡å‹å®šä¹‰äº†ä»¥ä¸‹å…«ç§æ“ä½œæ¥å®Œæˆ</p><p><img src="../assets/image/JVM_Image/image-20231003100853256.png" alt="image-20231003100853256"></p><p><img src="../assets/image/JVM_Image/image-20231003101710296.png" alt="image-20231003101710296"></p><h4 id="Javaå¦‚ä½•è§£å†³åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§é—®é¢˜">Javaå¦‚ä½•è§£å†³åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§é—®é¢˜</h4><p><img src="../assets/image/JVM_Image/image-20231003100719947.png" alt="image-20231003100719947"></p><h4 id="as-if-serial">as-if-serial</h4><p><img src="../assets/image/JVM_Image/image-20231003102337524.png" alt="image-20231003102337524"></p><h4 id="å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆhappens-beforeï¼‰">å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆhappens-beforeï¼‰</h4><p><img src="../assets/image/JVM_Image/image-20231003102356371.png" alt="image-20231003102356371"></p><p><img src="../assets/image/JVM_Image/image-20231003102531419.png" alt="image-20231003102531419"></p><h3 id="å†…å­˜ç»“æ„">å†…å­˜ç»“æ„</h3><ul><li></li></ul><h3 id="åŒäº²å§”æ´¾æœºåˆ¶">åŒäº²å§”æ´¾æœºåˆ¶</h3><p><img src="../assets/image/JVM_Image/image-20231008103808488.png" alt="image-20231008103808488"></p><ul><li>è¿™ç§æœºåˆ¶çš„å¥½å¤„<ul><li>å®‰å…¨æ€§ï¼šå› ä¸ºåŠ è½½ç±»æ—¶éƒ½è¦å…ˆæäº¤åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œè¿™ä¿è¯äº†æ ¸å¿ƒç±»çš„å®‰å…¨æ€§ä¸ä¼šè¢«å…¶ä»–åŠ è½½å™¨ç ´å</li><li>å› ä¸ºæœ‰è¿™ç§ä¸Šä¸‹çº§ç»“æ„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é¿å…é‡å¤åŠ è½½å¯¼è‡´ç¨‹åºæ··ä¹±</li></ul></li></ul><p><img src="../assets/image/JVM_Image/image-20231008103825772.png" alt="image-20231008103825772"></p><p>çˆ¶å§”æ‰˜æ¨¡å‹</p><p><img src="../assets/image/JVM_Image/image-20231008103920981.png" alt="image-20231008103920981"></p><h2 id="åˆè¯†JVM">åˆè¯†JVM</h2><h3 id="ä»€ä¹ˆæ˜¯JVM">ä»€ä¹ˆæ˜¯JVM</h3><p>JVM å…¨ç§°æ˜¯ Java Virtual Machineï¼Œä¸­æ–‡è¯‘å Javaè™šæ‹Ÿæœºã€‚</p><p>JVM æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„ç¨‹åºï¼Œä»–çš„èŒè´£æ˜¯è¿è¡ŒJavaå­—èŠ‚ç æ–‡ä»¶ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231012193457544.png" alt="image-20231012193457544"></p><p>JVM æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„ç¨‹åºï¼Œä»–çš„èŒè´£æ˜¯è¿è¡ŒJavaå­—èŠ‚ç æ–‡ä»¶ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231012193717973.png" alt="image-20231012193717973"></p><h3 id="JVMçš„åŠŸèƒ½">JVMçš„åŠŸèƒ½</h3><p><img src="../assets/image/JVM_Image/image-20231013101522763.png" alt="image-20231013101522763"></p><p>Javaéœ€è¦å®æ—¶è§£é‡Šï¼Œä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒè·¨å¹³å°ç‰¹æ€§ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013101624030.png" alt="image-20231013101624030"></p><p>å³æ—¶ç¼–è¯‘</p><p><img src="../assets/image/JVM_Image/image-20231013102403596.png" alt="image-20231013102403596"></p><h3 id="å¸¸è§çš„JVM">å¸¸è§çš„JVM</h3><p><img src="../assets/image/JVM_Image/image-20231013102420137.png" alt="image-20231013102420137"></p><p>HotSpotå‘å±•å†ç¨‹</p><p><img src="../assets/image/JVM_Image/image-20231013102820437.png" alt="image-20231013102820437"></p><h2 id="è¯¦è§£å­—èŠ‚ç æ–‡ä»¶">è¯¦è§£å­—èŠ‚ç æ–‡ä»¶</h2><h3 id="JVMç»„æˆ">JVMç»„æˆ</h3><p><img src="../assets/image/JVM_Image/image-20231013103131068.png" alt="image-20231013103131068"></p><h3 id="å­—èŠ‚ç æ–‡ä»¶ç»„æˆ">å­—èŠ‚ç æ–‡ä»¶ç»„æˆ</h3><p><img src="../assets/image/JVM_Image/image-20231013104953672.png" alt="image-20231013104953672"></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><ul><li><p>é­”æ•°ï¼šJavaå­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œå°†æ–‡ä»¶å¤´ç§°ä¸ºmagicé­”æ•°</p><ul><li>æ–‡ä»¶æ˜¯æ— æ³•é€šè¿‡æ–‡ä»¶æ‰©å±•åæ¥ç¡®å®šæ–‡ä»¶ç±»å‹çš„ï¼Œæ–‡ä»¶æ‰©å±•åå¯ä»¥éšæ„ä¿®æ”¹ï¼Œä¸å½±å“æ–‡ä»¶çš„å†…å®¹</li><li>è½¯ä»¶ä½¿ç”¨æ–‡ä»¶çš„å¤´å‡ ä¸ªå­—èŠ‚ï¼ˆæ–‡ä»¶å¤´ï¼‰å»æ ¡éªŒæ–‡ä»¶çš„ç±»å‹ï¼Œå¦‚æœè½¯ä»¶ä¸æ”¯æŒè¯¥ç§ç±»å‹å°±ä¼šå‡ºé”™</li></ul></li><li><p>ä¸»å‰¯ç‰ˆæœ¬å·ï¼šç‰ˆæœ¬å·çš„ä½œç”¨ä¸»è¦æ˜¯åˆ¤æ–­å½“å‰å­—èŠ‚ç çš„ç‰ˆæœ¬å’Œè¿è¡Œæ—¶çš„JDKæ˜¯å¦å…¼å®¹</p><ul><li><p>ä¸»å‰¯ç‰ˆæœ¬å·æŒ‡çš„æ˜¯ç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶çš„JDKç‰ˆæœ¬å·ï¼Œä¸»ç‰ˆæœ¬å·ç”¨æ¥æ ‡è¯†å¤§ç‰ˆæœ¬å·ï¼ŒJDK1.0-1.1ä½¿ç”¨äº†</p><p>45.0-45.3ï¼ŒJDK1.2æ˜¯46ä¹‹åæ¯å‡çº§ä¸€ä¸ªå¤§ç‰ˆæœ¬å°±åŠ 1ï¼›å‰¯ç‰ˆæœ¬å·æ˜¯å½“ä¸»ç‰ˆæœ¬å·ç›¸åŒæ—¶ä½œä¸ºåŒºåˆ†ä¸åŒ</p><p>ç‰ˆæœ¬çš„æ ‡è¯†ï¼Œä¸€èˆ¬åªéœ€è¦å…³å¿ƒä¸»ç‰ˆæœ¬å·ã€‚</p></li><li><p>å‡ºç°é—®é¢˜æ—¶</p></li><li><p><img src="../assets/image/JVM_Image/image-20231013123504048.png" alt="image-20231013123504048"></p></li><li><p>ä¸¤ç§æ–¹æ¡ˆ</p><ul><li>å‡çº§JDKç‰ˆæœ¬ï¼ˆå®¹æ˜“å¼•å‘å…¶ä»–çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¹¶ä¸”éœ€è¦å¤§é‡çš„æµ‹è¯•ï¼‰</li><li>å°†ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç‰ˆæœ¬å·é™ä½æˆ–è€…æ›´æ¢ä¾èµ–ï¼Œä»¥æ»¡è¶³JDKç‰ˆæœ¬çš„è¦æ±‚</li></ul></li></ul></li><li><p>æ€»ç»“</p><ul><li><img src="../assets/image/JVM_Image/image-20231013123550315.png" alt="image-20231013123550315"></li></ul></li></ul></li><li><p>å¸¸é‡æ± </p><ul><li>å­—èŠ‚ç æ–‡ä»¶ä¸­å¸¸é‡æ± çš„ä½œç”¨ï¼šé¿å…ç›¸åŒçš„å†…å®¹é‡å¤å®šä¹‰ï¼ŒèŠ‚çœç©ºé—´ã€‚</li><li>å¸¸é‡æ± ä¸­çš„æ•°æ®éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œç¼–å·ä»1å¼€å§‹ã€‚åœ¨å­—æ®µæˆ–è€…å­—èŠ‚ç æŒ‡ä»¤ä¸­é€šè¿‡ç¼–å·å¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°å¯¹åº”çš„æ•°æ®</li><li>å­—èŠ‚ç æŒ‡ä»¤ä¸­é€šè¿‡ç¼–å·å¼•ç”¨åˆ°å¸¸é‡æ± çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºç¬¦å·å¼•ç”¨<ul><li><img src="../assets/image/JVM_Image/image-20231013123945822.png" alt="image-20231013123945822"></li></ul></li></ul></li><li><p>æ–¹æ³•</p><ul><li>å­—èŠ‚ç ä¸­çš„æ–¹æ³•åŒºåŸŸæ˜¯å­˜æ”¾å­—èŠ‚ç æŒ‡ä»¤çš„æ ¸å¿ƒä½ç½®ï¼Œå­—èŠ‚ç æŒ‡ä»¤çš„å†…å®¹å­˜æ”¾åœ¨æ–¹æ³•çš„Codeå±æ€§ä¸­ã€‚<ul><li><img src="../assets/image/JVM_Image/image-20231013124122149.png" alt="image-20231013124122149"></li></ul></li><li>æ“ä½œæ•°æ ˆæ˜¯ä¸´æ—¶å­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œå±€éƒ¨å˜é‡è¡¨æ˜¯å­˜æ”¾æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡çš„ä½ç½®ã€‚<ul><li>ä»ä¸Šå¾€ä¸‹ï¼Œä»(ç­‰å·)å³å¾€å·¦çœ‹ï¼Œå…ˆæœ‰äº†æ•°å­—0ï¼Œæ‰€ä»¥iconst_0ï¼Œåœ¨æ“ä½œæ•°æ ˆä¸­å‡ºç°äº†0</li><li>istore_1ï¼šä»æ ˆä¸­å–å‡ºæ•°å­—<code>ç§»åŠ¨</code>åˆ°å±€éƒ¨å˜é‡è¡¨çš„1çš„ä½ç½®</li><li>iload_1ï¼šå°†å±€éƒ¨å˜é‡è¡¨ä¸­1ä¸­çš„æ•°æ®<code>å¤åˆ¶</code>åˆ°æ ˆä¸­</li><li>iconst_1ï¼šå°†å¸¸é‡1æ”¾å…¥æ“ä½œæ•°æ ˆ</li><li>iaddï¼šå°†æ“ä½œæ•°æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªæ•°ç›¸åŠ å¹¶æ”¾å›æ ˆé¡¶</li><li>istore_2ï¼šå°†æ ˆé¡¶çš„æ•°ç§»åŠ¨åˆ°å±€éƒ¨å˜é‡è¡¨2çš„ä½ç½®</li><li><img src="../assets/image/JVM_Image/image-20231013124442717.png" alt="image-20231013124442717"></li></ul></li><li>è®²è§£i++è¿‡ç¨‹<ul><li><img src="../assets/image/JVM_Image/image-20231013132733102.png" alt="image-20231013132733102"></li></ul></li><li>è®²è§£++i<ul><li>å’Œä¸Šæ–¹ä¸åŒçš„æ˜¯ï¼šå…ˆiinc 1 by 1ç„¶åå†iload_1</li><li><img src="../assets/image/JVM_Image/image-20231013133709235.png" alt="image-20231013133709235"></li></ul></li><li>æ¡ˆä¾‹<ul><li><img src="../assets/image/JVM_Image/image-20231013134014018.png" alt="image-20231013134014018"></li><li>åˆ†æi++<ul><li>int i = 5; i++;</li><li>0: iconst_5   ; å°†æ•´æ•°å¸¸é‡5åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>1: istore_1   ; å°†5å­˜å‚¨åˆ°å±€éƒ¨å˜é‡1ï¼ˆiï¼‰<br>2: iload_1    ; å°†å±€éƒ¨å˜é‡1ï¼ˆiï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>3: iconst_1   ; å°†æ•´æ•°å¸¸é‡1åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>4: iadd       ; æ‰§è¡ŒåŠ æ³•æ“ä½œ<br>5: istore_1   ; å°†ç»“æœå­˜å‚¨å›å±€éƒ¨å˜é‡1ï¼ˆiï¼‰</li></ul></li><li>åˆ†æi += 1<ul><li>int x = 5; x += 3;</li><li>0: iconst_5   ; å°†æ•´æ•°å¸¸é‡5åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>1: istore_1   ; å°†5å­˜å‚¨åˆ°å±€éƒ¨å˜é‡1ï¼ˆxï¼‰<br>2: iload_1    ; å°†å±€éƒ¨å˜é‡1ï¼ˆxï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>3: iconst_3   ; å°†æ•´æ•°å¸¸é‡3åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>4: iadd       ; æ‰§è¡ŒåŠ æ³•æ“ä½œ<br>5: istore_1   ; å°†ç»“æœå­˜å‚¨å›å±€éƒ¨å˜é‡1ï¼ˆxï¼‰</li></ul></li><li>åˆ†æi = i + 1<ul><li>int i = 5; i = i + 1;</li><li>0: iconst_5   ; å°†æ•´æ•°å¸¸é‡5åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>1: istore_1   ; å°†5å­˜å‚¨åˆ°å±€éƒ¨å˜é‡1ï¼ˆiï¼‰<br>2: iload_1    ; å°†å±€éƒ¨å˜é‡1ï¼ˆiï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>3: iconst_1   ; å°†æ•´æ•°å¸¸é‡1åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Š<br>4: iadd       ; æ‰§è¡ŒåŠ æ³•æ“ä½œ<br>5: istore_1   ; å°†ç»“æœå­˜å‚¨å›å±€éƒ¨å˜é‡1ï¼ˆiï¼‰</li></ul></li></ul></li></ul></li></ul><h3 id="å­—èŠ‚ç å¸¸ç”¨å·¥å…·">å­—èŠ‚ç å¸¸ç”¨å·¥å…·</h3><h4 id="javap">javap</h4><p>javapæ˜¯JDKè‡ªå¸¦çš„åç¼–è¯‘å·¥å…·ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶å°æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶çš„å†…å®¹ã€‚é€‚åˆåœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶å†…å®¹ã€‚</p><p>ç›´æ¥è¾“å…¥javapæŸ¥çœ‹æ‰€æœ‰å‚æ•°ã€‚</p><p>è¾“å…¥javap -v å­—èŠ‚ç æ–‡ä»¶åç§° æŸ¥çœ‹å…·ä½“çš„å­—èŠ‚ç ä¿¡æ¯ã€‚ï¼ˆå¦‚æœjaråŒ…éœ€è¦å…ˆä½¿ç”¨ jar â€“xvf å‘½ä»¤è§£å‹ï¼‰</p><p><img src="../assets/image/JVM_Image/image-20231013135453011.png" alt="image-20231013135453011"></p><h4 id="jclasslib">jclasslib</h4><p><img src="../assets/image/JVM_Image/image-20231013140303579.png" alt="image-20231013140303579"></p><h4 id="Arthas">Arthas</h4><ul><li><p>Arthas æ˜¯ä¸€æ¬¾çº¿ä¸Šç›‘æ§è¯Šæ–­äº§å“ï¼Œé€šè¿‡å…¨å±€è§†è§’å®æ—¶æŸ¥çœ‹åº”ç”¨ loadã€å†…å­˜ã€gcã€çº¿ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶èƒ½åœ¨ä¸ä¿®</p><p>æ”¹åº”ç”¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸šåŠ¡é—®é¢˜è¿›è¡Œè¯Šæ–­ï¼Œå¤§å¤§æå‡çº¿ä¸Šé—®é¢˜æ’æŸ¥æ•ˆç‡ã€‚</p></li><li><p>å®˜ç½‘ï¼š<a href="https://arthas.aliyun.com/doc/">https://arthas.aliyun.com/doc/</a></p></li><li><p><img src="../assets/image/JVM_Image/image-20231013140756295.png" alt="image-20231013140756295"></p></li><li><p>æŒ‡ä»¤dashboard -i 2000 -n 1</p><ul><li><a href="https://arthas.aliyun.com/doc/dashboard.html">dashboard</a> - å½“å‰ç³»ç»Ÿçš„å®æ—¶æ•°æ®é¢æ¿</li><li>-i è¡¨ç¤ºæ¯æ¬¡æ˜¾ç¤ºçš„æ—¶é—´é—´éš”ï¼ˆæ¯«ç§’ï¼‰</li><li>-n è¡¨ç¤ºæ˜¾ç¤ºå‡ æ¬¡</li></ul><p><img src="../assets/image/JVM_Image/image-20231013142600343.png" alt="image-20231013142600343"></p></li><li><p>dump ç±»çš„å…¨é™å®šåï¼šdumpå·²åŠ è½½ç±»çš„å­—èŠ‚ç æ–‡ä»¶åˆ°ç‰¹å®šç›®å½•ã€‚</p><ul><li>dump -d D:/jvm/data/arthas.Demo</li></ul></li><li><p>jad ç±»çš„å…¨é™å®šåï¼š åç¼–è¯‘å·²åŠ è½½ç±»çš„æºç ã€‚</p><ul><li>jad arthas.Demo (æŸä¸ªåŒ…ä¸‹çš„æŸä¸ªç±»)</li><li>è¾“å…¥åå°±æ˜¾ç¤ºç±»çš„æºä»£ç </li></ul></li><li></li></ul><h5 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h5><ul><li><p>èƒŒæ™¯</p><ul><li><p>å°æçš„å›¢é˜Ÿæ˜¨å¤©å¯¹ç³»ç»Ÿè¿›è¡Œäº†å‡çº§ä¿®å¤äº†æŸä¸ªbugï¼Œä½†æ˜¯å‡çº§å®Œä¹‹åå‘ç°bugè¿˜</p><p>æ˜¯å­˜åœ¨ï¼Œå°ææ€€ç–‘æ˜¯å› ä¸ºæ²¡æœ‰æŠŠæœ€æ–°çš„å­—èŠ‚ç æ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¯·ä½¿ç”¨é˜¿</p><p>é‡Œçš„arthaså»ç¡®è®¤å‡çº§å®Œçš„å­—èŠ‚ç æ–‡ä»¶æ˜¯ä¸æ˜¯æœ€æ–°çš„ã€‚</p></li></ul></li><li><p><strong>æ€è·¯ï¼š</strong></p><ul><li>åœ¨å‡ºé—®é¢˜çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ª arthasï¼Œå¹¶å¯åŠ¨ã€‚</li><li>è¿æ¥ arthasçš„æ§åˆ¶å°ï¼Œä½¿ç”¨ jadå‘½ä»¤åŠ ä¸Šæƒ³è¦æŸ¥çœ‹çš„ç±»åï¼Œåç¼–è¯‘å‡ºæºç ã€‚</li><li>jad com.example.MyClass<ul><li>åç¼–è¯‘æºä»£ç å¹¶ç”¨vimè¿›è¡Œä¿®æ”¹</li></ul></li><li>jad com.example.MyClass --source<ul><li>é‡æ–°ç¼–è¯‘ä»£ç ï¼Œä¼šç”Ÿæˆä¸€ä¸ªclassæ–‡ä»¶</li></ul></li><li>redefine -c com.example.MyClass /path/to/MyClass.class<ul><li>å¯¹æ–°çš„classæ–‡ä»¶è¿›è¡Œçƒ­åŠ è½½ï¼›é—®é¢˜ä¿®å¤</li></ul></li><li>çƒ­åŠ è½½æ“ä½œé£é™©è¾ƒé«˜ï¼Œä¸€èˆ¬è¿˜æ˜¯ä¸ç”¨</li></ul></li></ul><h3 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ">ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°">ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°</h4><p><img src="../assets/image/JVM_Image/image-20231013150945016.png" alt="image-20231013150945016"></p><h4 id="åŠ è½½é˜¶æ®µ">åŠ è½½é˜¶æ®µ</h4><p>1ã€åŠ è½½(Loading)é˜¶æ®µç¬¬ä¸€æ­¥æ˜¯ç±»åŠ è½½å™¨æ ¹æ®ç±»çš„å…¨é™å®šåé€šè¿‡ä¸åŒçš„æ¸ é“ä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼è·å–å­—èŠ‚ç ä¿¡æ¯ã€‚</p><p>ç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨Javaä»£ç æ‹“å±•çš„ä¸åŒçš„æ¸ é“ã€‚</p><ul><li>ä¸åŒçš„æ¸ é“<ul><li><img src="../assets/image/JVM_Image/image-20231013151032653.png" alt="image-20231013151032653"></li></ul></li></ul><p>2ã€ç±»åŠ è½½å™¨åœ¨åŠ è½½å®Œç±»ä¹‹åï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†å­—èŠ‚ç ä¸­çš„ä¿¡æ¯ä¿å­˜åˆ°å†…å­˜çš„æ–¹æ³•åŒºï¼ˆé€»è¾‘æ¦‚å¿µï¼‰ä¸­ã€‚</p><p>3ã€ç”Ÿæˆä¸€ä¸ªInstanceKlasså¯¹è±¡ï¼Œä¿å­˜ç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé‡Œè¾¹è¿˜åŒ…å«å®ç°ç‰¹å®šåŠŸèƒ½æ¯”å¦‚å¤šæ€çš„ä¿¡æ¯</p><p><img src="../assets/image/JVM_Image/image-20231013151234026.png" alt="image-20231013151234026"></p><p>4ã€åŒæ—¶ï¼ŒJavaè™šæ‹Ÿæœºè¿˜ä¼šåœ¨å †ä¸­ç”Ÿæˆä¸€ä»½ä¸æ–¹æ³•åŒºä¸­æ•°æ®ç±»ä¼¼çš„java.lang.Classå¯¹è±¡ã€‚</p><p>ä½œç”¨æ˜¯åœ¨Javaä»£ç ä¸­å»è·å–ç±»çš„ä¿¡æ¯ä»¥åŠå­˜å‚¨é™æ€å­—æ®µçš„æ•°æ®ï¼ˆJDK8åŠä¹‹åï¼‰</p><p><img src="../assets/image/JVM_Image/image-20231013151321949.png" alt="image-20231013151321949"></p><p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œåªéœ€è¦è®¿é—®å †ä¸­çš„Classå¯¹è±¡è€Œä¸éœ€è¦è®¿é—®æ–¹æ³•åŒºä¸­æ‰€æœ‰ä¿¡æ¯ã€‚</p><p>è¿™æ ·Javaè™šæ‹Ÿæœºå°±èƒ½å¾ˆå¥½åœ°æ§åˆ¶å¼€å‘è€…è®¿é—®æ•°æ®çš„èŒƒå›´</p><p><img src="../assets/image/JVM_Image/image-20231013151424395.png" alt="image-20231013151424395"></p><p>æ¨èä½¿ç”¨ JDKè‡ªå¸¦çš„hsdbå·¥å…·æŸ¥çœ‹Javaè™šæ‹Ÿæœºå†…å­˜ä¿¡æ¯ã€‚å·¥å…·ä½äºJDKå®‰è£…ç›®å½•ä¸‹libæ–‡ä»¶å¤¹ä¸­çš„sa-jdi.jarä¸­ã€‚</p><p>å¯åŠ¨å‘½ä»¤ï¼šjava -cp sa-jdi.jar sun.jvm.hotspot.HSDB</p><p><img src="../assets/image/JVM_Image/image-20231013151543597.png" alt="image-20231013151543597"></p><h4 id="è¿æ¥é˜¶æ®µ">è¿æ¥é˜¶æ®µ</h4><p><img src="../assets/image/JVM_Image/image-20231013152133402.png" alt="image-20231013152133402"></p><h5 id="éªŒè¯">éªŒè¯</h5><p>ä¸€å…±å››éƒ¨åˆ†</p><ol><li>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œæ¯”å¦‚æ–‡ä»¶æ˜¯å¦ä»¥0xCAFEBABEå¼€å¤´ï¼Œä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦æ»¡è¶³å½“å‰Javaè™šæ‹Ÿæœºç‰ˆæœ¬è¦æ±‚<ol><li><img src="../assets/image/JVM_Image/image-20231013152526229.png" alt="image-20231013152526229"></li></ol></li><li>å…ƒä¿¡æ¯éªŒè¯ï¼Œä¾‹å¦‚ç±»å¿…é¡»æœ‰çˆ¶ç±»ï¼ˆsuperä¸èƒ½ä¸ºç©ºï¼‰<ol><li><img src="../assets/image/JVM_Image/image-20231013152602411.png" alt="image-20231013152602411"></li></ol></li><li>éªŒè¯ç¨‹åºæ‰§è¡ŒæŒ‡ä»¤çš„è¯­ä¹‰ï¼Œæ¯”å¦‚æ–¹æ³•å†…çš„æŒ‡ä»¤æ‰§è¡Œä¸­è·³è½¬åˆ°ä¸æ­£ç¡®çš„ä½ç½®ã€‚<ol><li><img src="../assets/image/JVM_Image/image-20231013152613495.png" alt="image-20231013152613495"></li></ol></li><li>.ç¬¦å·å¼•ç”¨éªŒè¯ï¼Œä¾‹å¦‚æ˜¯å¦è®¿é—®äº†å…¶ä»–ç±»ä¸­privateçš„æ–¹æ³•ç­‰</li></ol><p><strong>éªŒè¯æ¡ˆä¾‹</strong></p><p>ä¸»ç‰ˆæœ¬å·ä¸èƒ½é«˜äºè¿è¡Œç¯å¢ƒä¸»ç‰ˆæœ¬å·ï¼Œå¦‚æœä¸»ç‰ˆæœ¬å·ç›¸ç­‰ï¼Œå‰¯ç‰ˆæœ¬å·ä¹Ÿä¸èƒ½è¶…è¿‡ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013152757639.png" alt="image-20231013152757639"></p><h5 id="å‡†å¤‡">å‡†å¤‡</h5><p>å‡†å¤‡é˜¶æ®µä¸ºé™æ€å˜é‡ï¼ˆstaticï¼‰åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼</p><p><img src="../assets/image/JVM_Image/image-20231013160932903.png" alt="image-20231013160932903"></p><p>å‡†å¤‡é˜¶æ®µåªä¼šç»™é™æ€å˜é‡èµ‹åˆå§‹å€¼ï¼Œè€Œæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹éƒ½æœ‰å…¶åˆå§‹å€¼ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013160948366.png" alt="image-20231013160948366"></p><p>finalä¿®é¥°çš„åŸºæœ¬æ•°æ®ç±»å‹çš„é™æ€å˜é‡ï¼Œå‡†å¤‡é˜¶æ®µç›´æ¥ä¼šå°†ä»£ç ä¸­çš„å€¼è¿›è¡Œèµ‹å€¼ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013161117629.png" alt="image-20231013161117629"></p><h5 id="è§£æ">è§£æ</h5><p>è§£æé˜¶æ®µä¸»è¦æ˜¯å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨</p><p>ç¬¦å·å¼•ç”¨å°±æ˜¯åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸­ä½¿ç”¨ç¼–å·æ¥è®¿é—®å¸¸é‡æ± ä¸­çš„å†…å®¹</p><p><img src="../assets/image/JVM_Image/image-20231013161223957.png" alt="image-20231013161223957"></p><p>ç›´æ¥å¼•ç”¨ä¸åœ¨ä½¿ç”¨ç¼–å·ï¼Œè€Œæ˜¯ä½¿ç”¨å†…å­˜ä¸­åœ°å€è¿›è¡Œè®¿é—®å…·ä½“çš„æ•°æ®ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013161242824.png" alt="image-20231013161242824"></p><h4 id="åˆå§‹åŒ–é˜¶æ®µ">åˆå§‹åŒ–é˜¶æ®µ</h4><p>åˆå§‹åŒ–é˜¶æ®µä¼šæ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„ä»£ç ï¼Œå¹¶ä¸ºé™æ€å˜é‡èµ‹å€¼ã€‚</p><p>åˆå§‹åŒ–é˜¶æ®µä¼šæ‰§è¡Œå­—èŠ‚ç æ–‡ä»¶ä¸­clinitéƒ¨åˆ†çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013161804372.png" alt="image-20231013161804372"></p><p><img src="../assets/image/JVM_Image/image-20231013163505886.png" alt="image-20231013163505886"></p><ul><li>ä»¥ä¸‹å‡ ç§æ–¹å¼ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–<ul><li>è®¿é—®ä¸€ä¸ªç±»çš„é™æ€å˜é‡æˆ–è€…é™æ€æ–¹æ³•ï¼Œæ³¨æ„å˜é‡æ˜¯finalä¿®é¥°çš„å¹¶ä¸”ç­‰å·å³è¾¹æ˜¯å¸¸é‡ä¸ä¼šè§¦å‘åˆå§‹åŒ–ã€‚</li><li>è°ƒç”¨Class.forName(String className)ã€‚</li><li>newä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡æ—¶</li><li>æ‰§è¡ŒMainæ–¹æ³•çš„å½“å‰ç±»</li></ul></li></ul><p><img src="../assets/image/JVM_Image/image-20231013164509318.png" alt="image-20231013164509318"></p><p>æ‰§è¡Œé¡ºåºä¸¾ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯é™æ€åˆå§‹åŒ–å—</span></span><br><span class="line">        System.out.println(<span class="string">&quot;é™æ€åˆå§‹åŒ–å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯å®ä¾‹åˆå§‹åŒ–å—</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å®ä¾‹åˆå§‹åŒ–å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯æ„é€ æ–¹æ³•</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ï¼š</p><ol><li>é™æ€åˆå§‹åŒ–å—ä¸­çš„ä»£ç ã€‚</li><li>å®ä¾‹åˆå§‹åŒ–å—ä¸­çš„ä»£ç ã€‚</li><li>æ„é€ æ–¹æ³•ä¸­çš„ä»£ç ã€‚</li></ol><p>clinitæŒ‡ä»¤åœ¨ç‰¹å®šæƒ…å†µä¸‹ä¸ä¼šå‡ºç°ï¼Œæ¯”å¦‚ï¼šå¦‚ä¸‹å‡ ç§æƒ…å†µæ˜¯ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–æŒ‡ä»¤æ‰§è¡Œçš„ã€‚</p><ul><li>æ— é™æ€ä»£ç å—ä¸”æ— é™æ€å˜é‡èµ‹å€¼è¯­å¥</li><li>æœ‰é™æ€å˜é‡çš„å£°æ˜ï¼Œä½†æ˜¯æ²¡æœ‰èµ‹å€¼è¯­å¥ã€‚</li><li>é™æ€å˜é‡çš„å®šä¹‰ä½¿ç”¨finalå…³é”®å­—ï¼Œè¿™ç±»å˜é‡ä¼šåœ¨å‡†å¤‡é˜¶æ®µç›´æ¥è¿›è¡Œåˆå§‹åŒ–</li></ul><p>ç›´æ¥è®¿é—®çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œä¸ä¼šè§¦å‘å­ç±»çš„åˆå§‹åŒ–ã€‚</p><p>å­ç±»çš„åˆå§‹åŒ–clinitè°ƒç”¨ä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„clinitåˆå§‹åŒ–æ–¹æ³•</p><p><img src="../assets/image/JVM_Image/image-20231013165959472.png" alt="image-20231013165959472"></p><p>è¿™é‡Œåªè°ƒç”¨äº†çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œæ‰€ä»¥åªåˆå§‹åŒ–çˆ¶ç±»</p><p><img src="../assets/image/JVM_Image/image-20231013170045387.png" alt="image-20231013170045387"></p><h5 id="ä¾‹å­">ä¾‹å­</h5><p><img src="../assets/image/JVM_Image/image-20231013170818971.png" alt="image-20231013170818971"></p><p>finalä¿®é¥°çš„å˜é‡ç­‰å·å³è¾¹ä¹Ÿæ˜¯å¸¸é‡å°±ä¸ä¼šåˆå§‹åŒ–</p><p>ä½†æ˜¯è¿™é‡Œç­‰å·å³è¾¹æ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥åœ¨å‡†å¤‡é˜¶æ®µæ— æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œåªèƒ½åœ¨åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œåˆå§‹åŒ–</p><p><img src="../assets/image/JVM_Image/image-20231013170944059.png" alt="image-20231013170944059"></p><h3 id="ç±»åŠ è½½å™¨">ç±»åŠ è½½å™¨</h3><p>ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰æ˜¯Javaè™šæ‹Ÿæœºæä¾›ç»™åº”ç”¨ç¨‹åºå»å®ç°è·å–ç±»å’Œæ¥å£å­—èŠ‚ç æ•°æ®çš„æŠ€æœ¯</p><p>ç±»åŠ è½½å™¨åªå‚ä¸åŠ è½½è¿‡ç¨‹ä¸­çš„å­—èŠ‚ç è·å–å¹¶åŠ è½½åˆ°å†…å­˜è¿™ä¸€éƒ¨åˆ†</p><p><img src="../assets/image/JVM_Image/image-20231013171318091.png" alt="image-20231013171318091"></p><p>åº”ç”¨åœºæ™¯</p><p><img src="../assets/image/JVM_Image/image-20231013171331752.png" alt="image-20231013171331752"></p><h4 id="ç±»åŠ è½½å™¨åˆ†ç±»">ç±»åŠ è½½å™¨åˆ†ç±»</h4><p>ç±»åŠ è½½å™¨åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Javaä»£ç ä¸­å®ç°çš„ï¼Œä¸€ç±»æ˜¯Javaè™šæ‹Ÿæœºåº•å±‚æºç å®ç°çš„</p><p><img src="../assets/image/JVM_Image/image-20231013171514272.png" alt="image-20231013171514272"></p><p>ç±»åŠ è½½å™¨çš„è®¾è®¡JDK8å’Œ8ä¹‹åçš„ç‰ˆæœ¬å·®åˆ«è¾ƒå¤§ï¼ŒJDK8åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨æœ‰å¦‚ä¸‹å‡ ç§</p><p><img src="../assets/image/JVM_Image/image-20231013171626958.png" alt="image-20231013171626958"></p><p><strong>Arthasä¸­ç±»åŠ è½½å™¨ç›¸å…³çš„åŠŸèƒ½</strong></p><p>ç±»åŠ è½½å™¨çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥é€šè¿‡classloaderå‘½ä»¤æŸ¥çœ‹</p><p>classloader - æŸ¥çœ‹ classloader çš„ç»§æ‰¿æ ‘ï¼Œurlsï¼Œç±»åŠ è½½ä¿¡æ¯ï¼Œä½¿ç”¨ classloader å» getResource</p><p><img src="../assets/image/JVM_Image/image-20231013171711791.png" alt="image-20231013171711791"></p><h5 id="å¯åŠ¨ç±»åŠ è½½å™¨">å¯åŠ¨ç±»åŠ è½½å™¨</h5><p>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰æ˜¯ç”±Hotspotè™šæ‹Ÿæœºæä¾›çš„ã€ä½¿ç”¨C++ç¼–å†™çš„ç±»åŠ è½½å™¨</p><p>é»˜è®¤åŠ è½½Javaå®‰è£…ç›®å½•/jre/libä¸‹çš„ç±»æ–‡ä»¶ï¼Œæ¯”å¦‚rt.jarï¼Œtools.jarï¼Œresources.jarç­‰</p><ul><li>å¦‚ä½•ä½¿ç”¨å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ç”¨æˆ·çš„jaråŒ…<ul><li>æ”¾å…¥jre/libä¸‹è¿›è¡Œæ‰©å±•<ul><li>ä¸æ¨èï¼Œå°½å¯èƒ½ä¸è¦å»æ›´æ”¹JDKå®‰è£…ç›®å½•ä¸­çš„å†…å®¹ï¼Œä¼šå‡ºç°å³æ—¶æ”¾è¿›å»ç”±äºæ–‡ä»¶åä¸åŒ¹é…çš„é—®é¢˜ä¹Ÿä¸ä¼šæ­£å¸¸åœ°è¢«åŠ è½½</li></ul></li><li>ä½¿ç”¨å‚æ•°è¿›è¡Œæ‰©å±•<ul><li>æ¨èï¼Œä½¿ç”¨-Xbootclasspath/a:jaråŒ…ç›®å½•/jaråŒ…å è¿›è¡Œæ‰©å±•</li></ul></li></ul></li></ul><h5 id="æ‰©å±•ç±»åŠ è½½å™¨">æ‰©å±•ç±»åŠ è½½å™¨</h5><p>Â·æ‰©å±•ç±»åŠ è½½å™¨å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨éƒ½æ˜¯JDKä¸­æä¾›çš„ã€ä½¿ç”¨Javaç¼–å†™çš„ç±»åŠ è½½å™¨</p><p>å®ƒä»¬çš„æºç éƒ½ä½äºsun.misc.Launcherä¸­ï¼Œæ˜¯ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ã€‚ç»§æ‰¿è‡ªURLClassLoaderã€‚å…·å¤‡é€šè¿‡ç›®å½•æˆ–è€…æŒ‡å®šjaråŒ…å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231013171954944.png" alt="image-20231013171954944"></p><p>æ‰©å±•ç±»åŠ è½½å™¨é»˜è®¤åŠ è½½Javaå®‰è£…ç›®å½•/jre/lib/extä¸‹çš„ç±»æ–‡ä»¶</p><ul><li>å¦‚æœä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½ç”¨æˆ·çš„jaråŒ…<ul><li>æ”¾å…¥/jre/lib/extä¸‹è¿›è¡Œæ‰©å±•<ul><li>ä¸æ¨èï¼Œå°½å¯èƒ½ä¸è¦å»æ›´æ”¹JDKå®‰è£…ç›®å½•ä¸­çš„å†…å®¹</li></ul></li><li>ä½¿ç”¨å‚æ•°è¿›è¡Œæ‰©å±•<ul><li>æ¨èï¼Œä½¿ç”¨-Djava.ext.dirs=jaråŒ…ç›®å½• è¿›è¡Œæ‰©å±•,è¿™ç§æ–¹å¼ä¼šè¦†ç›–æ‰åŸå§‹ç›®å½•ï¼Œå¯ä»¥ç”¨;(windows):(macos/linux)è¿½åŠ ä¸ŠåŸå§‹ç›®å½•</li></ul></li></ul></li></ul><h5 id="åº”ç”¨ç±»åŠ è½½å™¨">åº”ç”¨ç±»åŠ è½½å™¨</h5><p>åŠ è½½classpathä¸‹çš„ç±»æ–‡ä»¶</p><p>åœ¨Arthasä¸­</p><p>ç±»åŠ è½½å™¨çš„åŠ è½½è·¯å¾„å¯ä»¥é€šè¿‡classloader â€“c hashå€¼ æŸ¥çœ‹</p><p><img src="../assets/image/JVM_Image/image-20231013172306376.png" alt="image-20231013172306376"></p><h4 id="åŒäº²å§”æ´¾æœºåˆ¶-2">åŒäº²å§”æ´¾æœºåˆ¶</h4><ul><li>åœ¨Javaä¸­å¦‚ä½•ä½¿ç”¨ä»£ç çš„æ–¹å¼å»ä¸»åŠ¨åŠ è½½ä¸€ä¸ªç±»å‘¢ï¼Ÿ<ul><li>æ–¹å¼1ï¼šä½¿ç”¨Class.forNameæ–¹æ³•ï¼Œä½¿ç”¨å½“å‰ç±»çš„ç±»åŠ è½½å™¨å»åŠ è½½æŒ‡å®šçš„ç±»ã€‚</li><li>æ–¹å¼2ï¼šè·å–åˆ°ç±»åŠ è½½å™¨ï¼Œé€šè¿‡ç±»åŠ è½½å™¨çš„loadClassæ–¹æ³•æŒ‡å®šæŸä¸ªç±»åŠ è½½å™¨åŠ è½½</li></ul></li></ul><p>com.itheima.my.Aè¿™ä¸ªç±»åœ¨æ‰©å±•ç±»åŠ è½½å™¨çš„èŒƒç•´ä¸‹</p><p><img src="../assets/image/JVM_Image/image-20231013172811959.png" alt="image-20231013172811959"></p><p>æ¯ä¸ªJavaå®ç°çš„ç±»åŠ è½½å™¨ä¸­ä¿å­˜äº†ä¸€ä¸ªæˆå‘˜å˜é‡å«â€œçˆ¶â€ï¼ˆParentï¼‰ç±»åŠ è½½å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºå®ƒçš„ä¸Šçº§ï¼Œå¹¶ä¸æ˜¯ç»§æ‰¿å…³ç³»ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014091813736.png" alt="image-20231014091813736"></p><p>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨çš„parentçˆ¶ç±»åŠ è½½å™¨æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œè€Œæ‰©å±•ç±»åŠ è½½å™¨çš„parentæ˜¯ç©º</p><p>å¯åŠ¨ç±»åŠ è½½å™¨ä½¿ç”¨C++ç¼–å†™ï¼Œæ²¡æœ‰ä¸Šçº§ç±»åŠ è½½å™¨</p><p><img src="../assets/image/JVM_Image/image-20231014091852748.png" alt="image-20231014091852748"></p><p>ç±»åŠ è½½å™¨çš„ç»§æ‰¿å…³ç³»å¯ä»¥é€šè¿‡classloader â€“t æŸ¥çœ‹</p><p><img src="../assets/image/JVM_Image/image-20231014091910377.png" alt="image-20231014091910377"></p><p>åœ¨ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨éƒ½ä¼šå…ˆæ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½äº†è¯¥ç±»ï¼Œå¦‚æœå·²ç»åŠ è½½åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä¼šå°†åŠ è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨</p><p><img src="../assets/image/JVM_Image/image-20231014091952683.png" alt="image-20231014091952683"></p><p>å¦‚æœç±»åŠ è½½çš„parentä¸ºnullï¼Œåˆ™ä¼šæäº¤ç»™å¯åŠ¨ç±»åŠ è½½å™¨å¤„ç†</p><p><img src="../assets/image/JVM_Image/image-20231014092010328.png" alt="image-20231014092010328"></p><p>å¦‚æœæ‰€æœ‰çš„çˆ¶ç±»åŠ è½½å™¨éƒ½æ— æ³•åŠ è½½è¯¥ç±»ï¼Œåˆ™ç”±å½“å‰ç±»åŠ è½½å™¨è‡ªå·±å°è¯•åŠ è½½ã€‚æ‰€ä»¥çœ‹ä¸Šå»æ˜¯è‡ªé¡¶å‘ä¸‹å°è¯•åŠ è½½ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014092036564.png" alt="image-20231014092036564"></p><p>ç¬¬äºŒæ¬¡å†å»åŠ è½½ç›¸åŒçš„ç±»ï¼Œä»ç„¶ä¼šå‘ä¸Šè¿›è¡Œå§”æ´¾ï¼Œå¦‚æœæŸä¸ªç±»åŠ è½½å™¨åŠ è½½è¿‡å°±ä¼šç›´æ¥è¿”å›</p><p><img src="../assets/image/JVM_Image/image-20231014092055240.png" alt="image-20231014092055240"></p><p><strong>åŒäº²å§”æ´¾æœºåˆ¶æŒ‡çš„æ˜¯ï¼šè‡ªåº•å‘ä¸ŠæŸ¥æ‰¾æ˜¯å¦åŠ è½½è¿‡ï¼Œå†ç”±é¡¶å‘ä¸‹è¿›è¡ŒåŠ è½½ã€‚</strong></p><p><img src="../assets/image/JVM_Image/image-20231014092618371.png" alt="image-20231014092618371"></p><ul><li><p>å¦‚æœä¸€ä¸ªç±»é‡å¤å‡ºç°åœ¨ä¸‰ä¸ªç±»åŠ è½½å™¨çš„åŠ è½½ä½ç½®ï¼Œåº”è¯¥ç”±è°æ¥åŠ è½½ï¼Ÿ</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œæ ¹æ®åŒäº²å§”æ´¾æœºåˆ¶ï¼Œå®ƒçš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„</li></ul></li><li><p>åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å»åˆ›å»ºä¸€ä¸ªjava.lang.Stringç±»ï¼Œä¼šè¢«åŠ è½½å—</p><ul><li>ä¸èƒ½ï¼Œä¼šäº¤ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½åœ¨rt.jaråŒ…ä¸­çš„Stringç±»</li></ul></li><li><p>è¿™å‡ ä¸ªç±»åŠ è½½å™¨å½¼æ­¤ä¹‹é—´å­˜åœ¨å…³ç³»å—ï¼Ÿ</p><ul><li>åº”ç”¨ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œä½†æ˜¯ä¼šå§”æ´¾ç»™å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½</li></ul></li></ul><p><strong>åŒäº²å§”æ´¾æœºåˆ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p><ul><li><strong>ä¿è¯ç±»åŠ è½½çš„å®‰å…¨æ€§</strong><ul><li>é€šè¿‡åŒäº²å§”æ´¾æœºåˆ¶ï¼Œè®©é¡¶å±‚çš„ç±»åŠ è½½å™¨å»åŠ è½½æ ¸å¿ƒç±»ï¼Œé¿å…æ¶æ„ä»£ç æ›¿æ¢JDKä¸­çš„æ ¸å¿ƒç±»åº“ï¼Œæ¯”å¦‚java.lang.Stringï¼Œç¡®ä¿æ ¸å¿ƒåº“çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚</li></ul></li><li><strong>é¿å…é‡å¤åŠ è½½</strong><ul><li>åŒäº²å§”æ´¾æœºåˆ¶å¯ä»¥é¿å…åŒä¸€ä¸ªç±»è¢«å¤šæ¬¡åŠ è½½ï¼Œä¸Šå±‚çš„ç±»åŠ è½½å™¨å¦‚æœåŠ è½½è¿‡ç±»ï¼Œå°±ä¼šç›´æ¥è¿”å›è¯¥ç±»ï¼Œé¿å…é‡å¤åŠ è½½ã€‚</li></ul></li></ul><h4 id="æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶">æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶</h4><ul><li>ä¸‰ç§æ–¹å¼<ul><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨å¹¶ä¸”é‡å†™loadClassæ–¹æ³•ï¼Œå°±å¯ä»¥å°†åŒäº²å§”æ´¾æœºåˆ¶çš„ä»£ç å»é™¤<ul><li>Tomcaté€šè¿‡è¿™ç§æ–¹å¼å®ç°åº”ç”¨ä¹‹é—´ç±»éš”ç¦»</li></ul></li><li>åˆ©ç”¨ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨åŠ è½½ç±»ï¼Œæ¯”å¦‚JDBCå’ŒJNDIç­‰</li><li>å†å²ä¸ŠOsgiæ¡†æ¶å®ç°äº†ä¸€å¥—æ–°çš„ç±»åŠ è½½å™¨æœºåˆ¶ï¼Œå…è®¸åŒçº§ä¹‹é—´å§”æ‰˜è¿›è¡Œç±»çš„åŠ è½½</li></ul></li></ul><h5 id="è‡ªå®šä¹‰ç±»åŠ è½½å™¨">è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h5><ul><li>ä¸€ä¸ªTomcatç¨‹åºä¸­æ˜¯å¯ä»¥è¿è¡Œå¤šä¸ªWebåº”ç”¨çš„ï¼Œå¦‚æœè¿™ä¸¤ä¸ªåº”ç”¨ä¸­å‡ºç°äº†ç›¸åŒé™å®šåçš„ç±»ï¼Œæ¯”å¦‚Servletç±»ï¼ŒTomcatè¦ä¿è¯è¿™ä¸¤ä¸ªç±»éƒ½èƒ½åŠ è½½å¹¶ä¸”å®ƒä»¬åº”è¯¥æ˜¯ä¸åŒçš„ç±»ã€‚</li><li>å¦‚æœä¸æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼Œå½“åº”ç”¨ç±»åŠ è½½å™¨åŠ è½½Webåº”ç”¨1ä¸­çš„MyServletä¹‹åï¼ŒWebåº”ç”¨2ä¸­ç›¸åŒé™å®šåçš„MyServletç±»å°±æ— æ³•è¢«åŠ è½½äº†ã€‚</li></ul><p>Tomcatä½¿ç”¨äº†è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ¥å®ç°åº”ç”¨ä¹‹é—´ç±»çš„éš”ç¦»</p><p>æ¯ä¸€ä¸ªåº”ç”¨ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç±»åŠ è½½å™¨åŠ è½½å¯¹åº”çš„ç±»</p><p><img src="../assets/image/JVM_Image/image-20231014094842864.png" alt="image-20231014094842864"></p><p>å…ˆæ¥åˆ†æClassLoaderçš„åŸç†ï¼ŒClassLoaderä¸­åŒ…å«äº†4ä¸ªæ ¸å¿ƒæ–¹æ³•ã€‚</p><p>åŒäº²å§”æ´¾æœºåˆ¶çš„æ ¸å¿ƒä»£ç å°±ä½äºloadClassæ–¹æ³•ä¸­ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014094915247.png" alt="image-20231014094915247"></p><p><img src="../assets/image/JVM_Image/image-20231014095200440.png" alt="image-20231014095200440"></p><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨çˆ¶ç±»æ€ä¹ˆæ˜¯AppClassLoaderå‘¢ï¼Ÿ</p><p><img src="../assets/image/JVM_Image/image-20231014095213110.png" alt="image-20231014095213110"></p><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨é»˜è®¤çš„çˆ¶ç±»åŠ è½½å™¨</p><p>ä»¥Jdk8ä¸ºä¾‹ï¼ŒClassLoaderç±»ä¸­æä¾›äº†æ„é€ æ–¹æ³•è®¾ç½®parentçš„å†…å®¹ï¼š</p><p><img src="../assets/image/JVM_Image/image-20231014095233878.png" alt="image-20231014095233878"></p><p>è¿™ä¸ªæ„é€ æ–¹æ³•ç”±å¦å¤–ä¸€ä¸ªæ„é€ æ–¹æ³•è°ƒç”¨ï¼Œå…¶ä¸­çˆ¶ç±»åŠ è½½å™¨ç”±getSystemClassLoaderæ–¹æ³•è®¾ç½®ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ˜¯AppClassLoaderã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014095332893.png" alt="image-20231014095332893"></p><ul><li>ä¸¤ä¸ªè‡ªå®šä¹‰ç±»åŠ è½½å™¨åŠ è½½ç›¸åŒé™å®šåçš„ç±»ï¼Œä¸ä¼šå†²çªå—ï¼Ÿ<ul><li>ä¸ä¼šå†²çªï¼Œåœ¨åŒä¸€ä¸ªJavaè™šæ‹Ÿæœºä¸­ï¼Œåªæœ‰ç›¸åŒç±»åŠ è½½å™¨+ç›¸åŒçš„ç±»é™å®šåæ‰ä¼šè¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªç±»</li></ul></li><li>åœ¨Arthasä¸­ä½¿ç”¨sc â€“d ç±»åçš„æ–¹å¼æŸ¥çœ‹å…·ä½“çš„æƒ…å†µã€‚</li></ul><h5 id="ç¬¬äºŒç§æ–¹æ³•">ç¬¬äºŒç§æ–¹æ³•</h5><p>JDBCæ¡ˆä¾‹</p><p>JDBCä¸­ä½¿ç”¨äº†DriverManageræ¥ç®¡ç†é¡¹ç›®ä¸­å¼•å…¥çš„ä¸åŒæ•°æ®åº“çš„é©±åŠ¨ï¼Œæ¯”å¦‚mysqlé©±åŠ¨ã€oracleé©±åŠ¨ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014095457628.png" alt="image-20231014095457628"></p><p>DriverManagerç±»ä½äºrt.jaråŒ…ä¸­ï¼Œç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½</p><p><img src="../assets/image/JVM_Image/image-20231014095518311.png" alt="image-20231014095518311"></p><p>ä¾èµ–ä¸­çš„mysqlé©±åŠ¨å¯¹åº”çš„ç±»ï¼Œç”±åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨æ¥åŠ è½½</p><p><img src="../assets/image/JVM_Image/image-20231014095556372.png" alt="image-20231014095556372"></p><p>DriverManagerå±äºrt.jaræ˜¯å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚è€Œç”¨æˆ·jaråŒ…ä¸­çš„é©±åŠ¨éœ€è¦ç”±åº”ç”¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œè¿™å°±è¿åäº†åŒäº²å§”æ´¾æœºåˆ¶ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014095701932.png" alt="image-20231014095701932"></p><p>DriverManageræ€ä¹ˆçŸ¥é“jaråŒ…ä¸­è¦åŠ è½½çš„é©±åŠ¨åœ¨å“ªå„¿ï¼Ÿ</p><p>æ€»ç»“</p><p><img src="../assets/image/JVM_Image/image-20231014104021886.png" alt="image-20231014104021886"></p><p>è¿™ç§ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ç±»ï¼Œå§”æ´¾åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨å»åŠ è½½ç±»çš„æ–¹å¼ï¼Œæ‰“ç ´äº†åŒäº²å§”æ´¾æœºåˆ¶</p><p>ä½¿ç”¨é˜¿é‡Œarthasä¸åœæœºè§£å†³çº¿ä¸Šé—®é¢˜</p><p><img src="../assets/image/JVM_Image/image-20231014105525337.png" alt="image-20231014105525337"></p><p><img src="../assets/image/JVM_Image/image-20231014105642830.png" alt="image-20231014105642830"></p><h4 id="JDK9ä¹‹åçš„ç±»åŠ è½½å™¨">JDK9ä¹‹åçš„ç±»åŠ è½½å™¨</h4><p>JDK8åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ‰©å±•ç±»åŠ è½½å™¨å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨çš„æºç ä½äºrt.jaråŒ…ä¸­çš„sun.misc.Launcher.javaã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014105845666.png" alt="image-20231014105845666"></p><ul><li><p>ç”±äºJDK9å¼•å…¥äº†moduleçš„æ¦‚å¿µï¼Œç±»åŠ è½½å™¨åœ¨è®¾è®¡ä¸Šå‘ç”Ÿäº†å¾ˆå¤šå˜åŒ–</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ä½¿ç”¨Javaç¼–å†™ï¼Œä½äºjdk.internal.loader.ClassLoadersç±»ä¸­</li><li>Javaä¸­çš„BootClassLoaderç»§æ‰¿è‡ªBuiltinClassLoaderå®ç°ä»æ¨¡å—ä¸­æ‰¾åˆ°è¦åŠ è½½çš„å­—èŠ‚ç èµ„æºæ–‡ä»¶ã€‚</li><li>å¯åŠ¨ç±»åŠ è½½å™¨ä¾ç„¶æ— æ³•é€šè¿‡javaä»£ç è·å–åˆ°ï¼Œè¿”å›çš„ä»ç„¶æ˜¯nullï¼Œä¿æŒäº†ç»Ÿä¸€ã€‚</li><li><img src="../assets/image/JVM_Image/image-20231014110059658.png" alt="image-20231014110059658"></li></ul></li><li><p>æ‰©å±•ç±»åŠ è½½å™¨è¢«æ›¿æ¢æˆäº†å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatform Class Loaderï¼‰ã€‚</p><ul><li>å¹³å°ç±»åŠ è½½å™¨éµå¾ªæ¨¡å—åŒ–æ–¹å¼åŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œæ‰€ä»¥ç»§æ‰¿å…³ç³»ä»URLClassLoaderå˜æˆäº†</li><li>BuiltinClassLoaderï¼ŒBuiltinClassLoaderå®ç°äº†ä»æ¨¡å—ä¸­åŠ è½½å­—èŠ‚ç æ–‡ä»¶</li><li>å¹³å°ç±»åŠ è½½å™¨çš„å­˜åœ¨æ›´å¤šçš„æ˜¯ä¸ºäº†ä¸è€ç‰ˆæœ¬çš„è®¾è®¡æ–¹æ¡ˆå…¼å®¹ï¼Œè‡ªèº«æ²¡æœ‰ç‰¹æ®Šçš„é€»è¾‘</li></ul></li><li><p>ç±»åŠ è½½å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰è´Ÿè´£åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„å­—èŠ‚ç è·å–å¹¶åŠ è½½åˆ°å†…å­˜è¿™ä¸€éƒ¨åˆ†ã€‚é€šè¿‡åŠ è½½å­—èŠ‚ç æ•°æ®æ”¾å…¥å†…å­˜è½¬æ¢æˆbyte[]ï¼Œæ¥ä¸‹æ¥è°ƒç”¨è™šæ‹Ÿæœºåº•å±‚æ–¹æ³•å°†byte[]è½¬æ¢æˆæ–¹æ³•åŒºå’Œå †ä¸­çš„æ•°æ®</li></ul></li><li><p>æœ‰å‡ ç§ç±»åŠ è½½å™¨ï¼Ÿ</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰åŠ è½½æ ¸å¿ƒç±»</li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰åŠ è½½æ‰©å±•ç±»</li><li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰åŠ è½½åº”ç”¨classpathä¸­çš„ç±»</li><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œé‡å†™findClassæ–¹æ³•</li><li>JDK9åŠä¹‹åæ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰å˜æˆäº†å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatformClassLoaderï¼‰</li><li><img src="../assets/image/JVM_Image/image-20231014114810759.png" alt="image-20231014114810759"></li></ul></li><li><p>ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</p><ul><li>æ¯ä¸ªJavaå®ç°çš„ç±»åŠ è½½å™¨ä¸­ä¿å­˜äº†ä¸€ä¸ªæˆå‘˜å˜é‡å«â€œçˆ¶â€ï¼ˆParentï¼‰ç±»åŠ è½½å™¨ã€‚è‡ªåº•å‘ä¸ŠæŸ¥æ‰¾æ˜¯å¦åŠ è½½è¿‡ï¼Œå†ç”±é¡¶å‘ä¸‹è¿›è¡ŒåŠ è½½ã€‚é¿å…äº†æ ¸å¿ƒç±»è¢«åº”ç”¨ç¨‹åºé‡å†™å¹¶è¦†ç›–çš„é—®é¢˜ï¼Œæå‡äº†å®‰å…¨æ€§</li><li><img src="../assets/image/JVM_Image/image-20231014114830256.png" alt="image-20231014114830256"></li></ul></li><li><p>æ€ä¹ˆæ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ</p><ul><li><p>1ã€é‡å†™loadClassæ–¹æ³•ï¼Œä¸å†å®ç°åŒäº²å§”æ´¾æœºåˆ¶ã€‚</p><p>2ã€JNDIã€JDBCã€JCEã€JAXBå’ŒJBIç­‰æ¡†æ¶ä½¿ç”¨äº†SPIæœºåˆ¶+çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚</p><p>3ã€OSGiå®ç°äº†ä¸€æ•´å¥—ç±»åŠ è½½æœºåˆ¶ï¼Œå…è®¸åŒçº§ç±»åŠ è½½å™¨ä¹‹é—´äº’ç›¸è°ƒç”¨</p></li></ul></li></ul><h2 id="Javaå†…å­˜åŒºåŸŸ">Javaå†…å­˜åŒºåŸŸ</h2><h3 id="JVMç»„æˆ-2">JVMç»„æˆ</h3><p>javaä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ä¹‹åï¼ŒJVMä¸­çš„ç±»åŠ è½½å™¨ï¼Œå°†å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä¹‹åæ‰§è¡Œå¼•æ“é…åˆæœ¬åœ°æ¥å£å®Œæˆè¿è¡Œ</p><p><img src="../assets/image/JVM_Image/image-20231014115107905.png" alt="image-20231014115107905"></p><h3 id="è¿è¡Œæ—¶æ•°æ®åŒº">è¿è¡Œæ—¶æ•°æ®åŒº</h3><p>Javaè™šæ‹Ÿæœºåœ¨è¿è¡ŒJavaç¨‹åºè¿‡ç¨‹ä¸­ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œç§°ä¹‹ä¸ºè¿è¡Œæ—¶æ•°æ®åŒº</p><p><img src="../assets/image/JVM_Image/image-20231014115332767.png" alt="image-20231014115332767"></p><h3 id="ç¨‹åºè®¡æ•°å™¨">ç¨‹åºè®¡æ•°å™¨</h3><p>ç¨‹åºè®¡æ•°å™¨ï¼ˆ<strong>Program Counter Register</strong>ï¼‰ä¹Ÿå«<strong>PC</strong>å¯„å­˜å™¨ï¼Œæ¯ä¸ªçº¿ç¨‹ä¼šé€šè¿‡ç¨‹åºè®¡æ•°å™¨è®°å½•å½“å‰è¦æ‰§è¡Œçš„çš„å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014181457829.png" alt="image-20231014181457829"></p><p>ä¸€ä¸ªè®¡æ•°å™¨çš„å…·ä½“æ¡ˆä¾‹</p><p><img src="../assets/image/JVM_Image/image-20231014181635653.png" alt="image-20231014181635653"></p><p>åœ¨åŠ è½½é˜¶æ®µï¼Œè™šæ‹Ÿæœºå°†å­—èŠ‚ç æ–‡ä»¶ä¸­çš„æŒ‡ä»¤è¯»å–åˆ°å†…å­˜ä¹‹åï¼Œä¼šå°†åŸæ–‡ä»¶ä¸­çš„åç§»é‡è½¬æ¢æˆå†…å­˜åœ°å€ã€‚æ¯ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªå†…å­˜åœ°å€ã€‚ï¼ˆè¿‡ç¨‹ï¼šåŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–ã€ä½¿ç”¨ã€å¸è½½ï¼‰</p><p>åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæƒ…å†µä¸‹ï¼Œ<strong>Java</strong>è™šæ‹Ÿæœºéœ€è¦é€šè¿‡ç¨‹åºè®¡æ•°å™¨è®°å½•<strong>CPU</strong>åˆ‡æ¢å‰è§£é‡Šæ‰§è¡Œåˆ°é‚£ä¸€å¥æŒ‡ä»¤å¹¶ç»§ç»­è§£é‡Šè¿è¡Œã€‚</p><p><img src="../assets/image/JVM_Image/image-20231014181952547.png" alt="image-20231014181952547"></p><ul><li>ç¨‹åºè®¡æ•°å™¨åœ¨è¿è¡Œä¸­ä¼šå‡ºç°å†…å­˜æº¢å‡ºå—ï¼Ÿ<ul><li>å†…å­˜æº¢å‡ºæŒ‡çš„æ˜¯ç¨‹åºåœ¨ä½¿ç”¨æŸä¸€å—å†…å­˜åŒºåŸŸæ—¶ï¼Œå­˜æ”¾çš„æ•°æ®éœ€è¦å ç”¨çš„å†…å­˜å¤§å°è¶…è¿‡äº†è™šæ‹Ÿæœºèƒ½æä¾›çš„å†…å­˜ä¸Šé™ã€‚</li><li>å› ä¸ºæ¯ä¸ªçº¿ç¨‹åªå­˜å‚¨ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å†…å­˜åœ°å€ï¼Œç¨‹åºè®¡æ•°å™¨æ˜¯ä¸ä¼šå‘ç”Ÿå†…å­˜æº¢å‡ºçš„ã€‚</li><li>ç¨‹åºå‘˜æ— éœ€å¯¹ç¨‹åºè®¡æ•°å™¨åšä»»ä½•å¤„ç†</li></ul></li></ul><h3 id="æ ˆ">æ ˆ</h3><h3 id="å †">å †</h3><h3 id="æ–¹æ³•åŒº">æ–¹æ³•åŒº</h3><h3 id="ç›´æ¥å†…å­˜">ç›´æ¥å†…å­˜</h3><h2 id="åƒåœ¾å›æ”¶">åƒåœ¾å›æ”¶</h2><h1>Aiæ€»ç»“</h1><h2 id="Javaå†…å­˜ç»“æ„">Javaå†…å­˜ç»“æ„</h2><p>Javaçš„å†…å­˜ç»“æ„åŒ…æ‹¬å‡ ä¸ªä¸åŒçš„åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸéƒ½æœ‰ç‰¹å®šçš„ä½œç”¨å’Œç”¨é€”ã€‚ä»¥ä¸‹æ˜¯Javaå†…å­˜ç»“æ„çš„ä¸»è¦éƒ¨åˆ†ï¼š</p><ol><li><p><strong>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</strong>ï¼š</p><ul><li>æ–¹æ³•åŒºæ˜¯ç”¨äºå­˜å‚¨ç±»çš„ä¿¡æ¯ã€é™æ€å˜é‡ã€å¸¸é‡å’Œæ–¹æ³•å­—èŠ‚ç çš„å†…å­˜åŒºåŸŸã€‚</li><li>ç±»åŠ è½½å™¨å°†ç±»åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ï¼Œå¹¶åœ¨è¿è¡Œæ—¶ç»´æŠ¤ç±»çš„ä¿¡æ¯ã€‚</li><li>å­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿä½äºæ–¹æ³•åŒºä¸­ï¼Œç”¨äºå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ã€‚</li></ul></li><li><p><strong>å †å†…å­˜ï¼ˆHeapï¼‰</strong>ï¼š</p><ul><li>å †å†…å­˜æ˜¯ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹çš„ä¸»è¦åŒºåŸŸã€‚åœ¨å †ä¸­åˆ†é…çš„å†…å­˜ç”±Javaçš„åƒåœ¾å›æ”¶å™¨æ¥ç®¡ç†ã€‚</li><li>æ‰€æœ‰é€šè¿‡ <code>new</code> æ“ä½œç¬¦åˆ›å»ºçš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †å†…å­˜ä¸­ã€‚</li><li>å †å†…å­˜å¯ä»¥åˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰ã€è€å¹´ä»£ï¼ˆOld Generationï¼‰å’ŒæŒä¹…ä»£ï¼ˆPermGenï¼Œæˆ–è€…åœ¨Java 8+ ä¸­è¢«ç§°ä¸ºå…ƒç©ºé—´ Metaspaceï¼‰ç­‰ä¸åŒçš„éƒ¨åˆ†ã€‚</li></ul></li><li><p><strong>æ ˆå†…å­˜ï¼ˆStackï¼‰</strong>ï¼š</p><ul><li>æ ˆå†…å­˜ç”¨äºå­˜å‚¨æ–¹æ³•è°ƒç”¨çš„å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°å’Œæ–¹æ³•è°ƒç”¨çš„çŠ¶æ€ã€‚</li><li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œå®ƒåŒ…æ‹¬æ ˆå¸§ï¼ˆStack Frameï¼‰ï¼Œæ¯ä¸ªæ ˆå¸§å¯¹åº”ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ã€‚</li><li>æ ˆå†…å­˜ä¸­çš„æ•°æ®æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li></ul></li><li><p><strong>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</strong>ï¼š</p><ul><li>æœ¬åœ°æ–¹æ³•æ ˆç”¨äºå­˜å‚¨Javaç¨‹åºè°ƒç”¨æœ¬åœ°æ–¹æ³•ï¼ˆNative Methodï¼‰çš„ä¿¡æ¯ã€‚</li><li>æœ¬åœ°æ–¹æ³•æ˜¯ç”¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ï¼Œä¾‹å¦‚Cæˆ–C++ï¼Œå¹¶é€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰ä¸Javaç¨‹åºè¿›è¡Œäº¤äº’ã€‚</li></ul></li><li><p><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</strong>ï¼š</p><ul><li>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€ä¸ªå°çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚</li><li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œç”¨äºè·Ÿè¸ªçº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ã€‚</li></ul></li><li><p><strong>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</strong>ï¼š</p><ul><li>ç›´æ¥å†…å­˜ä¸æ˜¯Javaè™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯åœ¨Javaç¨‹åºä¸­ä½¿ç”¨äº†<code>java.nio</code>åŒ…çš„ä¸€äº›ç±»ï¼Œä¾‹å¦‚<code>ByteBuffer</code>ï¼Œå®ƒä»¬å¯ä»¥åˆ†é…ç›´æ¥å†…å­˜ï¼Œè€Œä¸æ˜¯å †å†…å­˜ã€‚</li><li>ç›´æ¥å†…å­˜ç”±æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œé€šå¸¸ç”¨äºI/Oæ“ä½œï¼Œå¯ä»¥æé«˜æ€§èƒ½ã€‚</li></ul></li></ol><p>è¿™äº›å†…å­˜åŒºåŸŸåœ¨Javaåº”ç”¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­æ‰®æ¼”ä¸åŒçš„è§’è‰²ï¼Œè€Œä¸”å®ƒä»¬çš„å¤§å°å’Œç®¡ç†æ–¹å¼éƒ½å¯ä»¥é€šè¿‡Javaè™šæ‹Ÿæœºçš„å¯åŠ¨å‚æ•°è¿›è¡Œè°ƒæ•´ã€‚äº†è§£è¿™äº›å†…å­˜åŒºåŸŸå¯¹äºç†è§£Javaå†…å­˜ç®¡ç†å’Œè§£å†³æ€§èƒ½é—®é¢˜éå¸¸é‡è¦ã€‚</p><h2 id="Javaå¦‚ä½•è§£å†³åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§é—®é¢˜-2">Javaå¦‚ä½•è§£å†³åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§é—®é¢˜</h2><p>Javaé€šè¿‡ä½¿ç”¨å…³é”®å­— <code>volatile</code>ã€<code>synchronized</code>ã€<code>java.util.concurrent</code> åŒ…ä»¥åŠåŸå­ç±»æ¥è§£å†³åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ã€‚</p><ol><li><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼š</p><ul><li>åŸå­æ€§é—®é¢˜æŒ‡çš„æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªæ“ä½œæ˜¯å¦èƒ½å¤Ÿè¢«çœ‹ä½œæ˜¯ä¸å¯åˆ†å‰²çš„å•ä¸ªæ“ä½œã€‚</li><li>Javaæä¾›äº†åŸå­æ“ä½œçš„æ”¯æŒï¼Œä¸»è¦é€šè¿‡ <code>java.util.concurrent.atomic</code> åŒ…ä¸­çš„åŸå­ç±»æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œ<code>AtomicInteger</code>ã€<code>AtomicLong</code>ã€<code>AtomicReference</code> ç­‰ã€‚</li><li>è¿™äº›åŸå­ç±»æä¾›äº†ä¸€ç³»åˆ—çš„åŸå­æ“ä½œï¼Œå¯ä»¥ä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æŸä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œè€Œä¸éœ€è¦æ˜¾å¼åœ°ä½¿ç”¨<code>synchronized</code>å…³é”®å­—ã€‚</li></ul></li><li><p><strong>å¯è§æ€§ï¼ˆVisibilityï¼‰</strong>ï¼š</p><ul><li>å¯è§æ€§é—®é¢˜æŒ‡çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ˜¯å¦èƒ½å¤Ÿè¢«å…¶ä»–çº¿ç¨‹ç«‹å³çœ‹åˆ°ã€‚</li><li>ä½¿ç”¨ <code>volatile</code> å…³é”®å­—å¯ä»¥ä¿è¯å¯è§æ€§ã€‚å½“ä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¸º <code>volatile</code>ï¼Œå¯¹å®ƒçš„å†™æ“ä½œå°†ä¼šç«‹å³åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼Œå¹¶ä¸”å¯¹å®ƒçš„è¯»æ“ä½œä¹Ÿä¼šä»ä¸»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯ä»çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­è¯»å–ã€‚</li><li>åŒæ—¶ï¼ŒJavaçš„é”æœºåˆ¶ï¼ˆä¾‹å¦‚ <code>synchronized</code>ï¼‰ä¹Ÿå¯ä»¥ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºåœ¨é‡Šæ”¾é”ä¹‹å‰ï¼Œæ‰€æœ‰å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹éƒ½ä¼šåˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚</li></ul></li><li><p><strong>æœ‰åºæ€§ï¼ˆOrderingï¼‰</strong>ï¼š</p><ul><li>æœ‰åºæ€§é—®é¢˜æŒ‡çš„æ˜¯ç¨‹åºä¸­çš„æ“ä½œæ˜¯å¦æŒ‰ç…§é¢„æœŸçš„é¡ºåºæ‰§è¡Œã€‚</li><li>Javaæä¾›äº†ä¸€äº›æœºåˆ¶æ¥ä¿è¯æ“ä½œçš„æœ‰åºæ€§ã€‚é¦–å…ˆï¼Œ<code>volatile</code> å…³é”®å­—å¯ä»¥ä¿è¯å˜é‡çš„è¯»å†™é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨ä¸€ä¸ªçº¿ç¨‹å†™å…¥ä¸€ä¸ª <code>volatile</code> å˜é‡ä¹‹åï¼Œå®ƒåé¢çš„æ‰€æœ‰æ“ä½œéƒ½ä¸ä¼šè¢«é‡æ’åºåˆ°å†™æ“ä½œä¹‹å‰ã€‚</li><li>å¦å¤–ï¼Œ<code>synchronized</code> å—ä¹Ÿå¯ä»¥ä¿è¯è¿›å…¥å’Œé€€å‡ºä¸´ç•ŒåŒºçš„ä»£ç ä¸ä¼šè¢«é‡æ’åºã€‚</li></ul></li></ol><p>æ€»ç»“ï¼š<br>Javaæä¾›äº†å¤šç§æœºåˆ¶æ¥è§£å†³å¹¶å‘ç¼–ç¨‹ä¸­çš„åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§é—®é¢˜ã€‚é€‰æ‹©åˆé€‚çš„æœºåˆ¶å–å†³äºå…·ä½“çš„éœ€æ±‚å’Œåœºæ™¯ã€‚åœ¨Java 5åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ <code>java.util.concurrent</code> åŒ…ä¸­çš„å·¥å…·å’ŒåŸå­ç±»å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™çº¿ç¨‹å®‰å…¨çš„ä»£ç ã€‚</p><h2 id="as-if-serial-2">as-if-serial</h2><p>â€œas-if-serialâ€ æ˜¯Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºæè¿°ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹ç¨‹åºä»£ç çš„é‡æ’åºå’Œä¼˜åŒ–ã€‚</p><p>â€œas-if-serialâ€ åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥å¯¹ç¨‹åºä»£ç è¿›è¡Œå„ç§ä¼˜åŒ–ï¼Œåªè¦åœ¨å•çº¿ç¨‹æ‰§è¡Œç¨‹åºæ—¶çš„æœ€ç»ˆç»“æœä¸æŒ‰ç…§ç¨‹åºçš„é¡ºåºæ‰§è¡Œå¾—åˆ°çš„ç»“æœä¸€è‡´ï¼Œå°±æ˜¯åˆæ³•çš„ã€‚æ¢å¥è¯è¯´ï¼Œå³ä½¿ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤é‡æ’åºã€ç¼“å­˜ä¼˜åŒ–ç­‰è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåªè¦è¿™äº›ä¼˜åŒ–ä¸ä¼šæ”¹å˜ç¨‹åºåœ¨å•çº¿ç¨‹æ‰§è¡Œæ—¶çš„è¡Œä¸ºï¼Œå°±è¢«è®¤ä¸ºæ˜¯ç¬¦åˆ â€œas-if-serialâ€ åŸåˆ™çš„ã€‚</p><p>è¿™ä¸ªåŸåˆ™çš„å­˜åœ¨æ˜¯ä¸ºäº†å…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨åœ¨ä¸ç ´åç¨‹åºæ­£ç¡®æ€§çš„å‰æä¸‹è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œâ€œas-if-serialâ€ åŸåˆ™å¯¹äºç¡®ä¿å¤šçº¿ç¨‹ç¨‹åºçš„æ­£ç¡®æ€§ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚è™½ç„¶ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†å®ƒä»¬éœ€è¦éµå®ˆä¸€äº›è§„åˆ™å’Œçº¦æŸï¼Œä»¥ç¡®ä¿å¤šçº¿ç¨‹ç¨‹åºçš„å¯è§æ€§å’Œæ­£ç¡®æ€§ã€‚è¿™äº›è§„åˆ™åŒ…æ‹¬ä½¿ç”¨ <code>volatile</code> å…³é”®å­—ã€<code>synchronized</code> å—ã€<code>final</code> å­—æ®µç­‰æ¥ç¦æ­¢æŸäº›é‡æ’åºæ“ä½œï¼Œä»¥ç¡®ä¿å¤šçº¿ç¨‹ç¨‹åºçš„è¡Œä¸ºä¸å•çº¿ç¨‹æ‰§è¡Œæ—¶çš„è¡Œä¸ºä¸€è‡´ã€‚</p><p>æ€»ä¹‹ï¼Œâ€œas-if-serialâ€ åŸåˆ™æ˜¯Javaå†…å­˜æ¨¡å‹ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œå®ƒå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨åœ¨ä¸æ”¹å˜ç¨‹åºæ­£ç¡®æ€§çš„å‰æä¸‹è¿›è¡Œå„ç§ä¼˜åŒ–ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚ä½†åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œéœ€è¦è°¨æ…å¤„ç†å¹¶ç¡®ä¿æ­£ç¡®ä½¿ç”¨åŒæ­¥æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><h2 id="happens-before">happens-before</h2><p>â€œhappens-beforeâ€ æ˜¯Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰ä¸­çš„ä¸€ä¸ªå…³é”®æ¦‚å¿µï¼Œç”¨äºæè¿°å¤šçº¿ç¨‹ç¨‹åºä¸­æ“ä½œä¹‹é—´çš„é¡ºåºå’Œå¯è§æ€§è§„åˆ™ã€‚â€œhappens-beforeâ€ è§„åˆ™å®šä¹‰äº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªæ“ä½œå¯¹å¦ä¸€ä¸ªæ“ä½œçš„å¯è§æ€§å’Œé¡ºåºçš„å½±å“ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œâ€œhappens-beforeâ€ è§„åˆ™åŒ…æ‹¬ä»¥ä¸‹æƒ…å†µï¼š</p><ol><li><p><strong>ç¨‹åºé¡ºåºè§„åˆ™ï¼ˆProgram Order Ruleï¼‰</strong>ï¼š</p><ul><li>åœ¨å•ä¸ªçº¿ç¨‹ä¸­ï¼Œæ“ä½œæŒ‰ç…§ç¨‹åºä¸­çš„é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºä¸­çš„æ“ä½œé¡ºåºå¿…é¡»è¢«ä¿ç•™ã€‚</li></ul></li><li><p><strong>ç›‘è§†å™¨é”è§„åˆ™ï¼ˆMonitor Lock Ruleï¼‰</strong>ï¼š</p><ul><li>å¯¹ä¸€ä¸ªç›‘è§†å™¨ï¼ˆsynchronizedå—æˆ–æ–¹æ³•ï¼‰çš„è§£é”æ“ä½œ <code>unlock</code> å¿…é¡»åœ¨éšåçš„é”æ“ä½œ <code>lock</code> ä¹‹å‰æ‰§è¡Œï¼Œç¡®ä¿åœ¨ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”ä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–ç›¸åŒçš„é”ã€‚</li></ul></li><li><p><strong>volatileå˜é‡è§„åˆ™ï¼ˆVolatile Variable Ruleï¼‰</strong>ï¼š</p><ul><li>å¯¹ä¸€ä¸ª <code>volatile</code> å˜é‡çš„å†™æ“ä½œå¿…é¡»åœ¨éšåçš„è¯»æ“ä½œä¹‹å‰æ‰§è¡Œï¼Œç¡®ä¿å†™æ“ä½œå¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚</li></ul></li><li><p><strong>çº¿ç¨‹å¯åŠ¨è§„åˆ™ï¼ˆThread Start Ruleï¼‰</strong>ï¼š</p><ul><li>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œå¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹çš„æ“ä½œ <code>Thread.start()</code> å¿…é¡»åœ¨æ–°çº¿ç¨‹çš„ä»»ä½•æ“ä½œä¹‹å‰æ‰§è¡Œï¼Œç¡®ä¿æ–°çº¿ç¨‹èƒ½å¤Ÿçœ‹åˆ°å¯åŠ¨çº¿ç¨‹çš„æ“ä½œã€‚</li></ul></li><li><p><strong>çº¿ç¨‹ç»“æŸè§„åˆ™ï¼ˆThread Termination Ruleï¼‰</strong>ï¼š</p><ul><li>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹çš„æ‰€æœ‰æ“ä½œå¿…é¡»åœ¨å¦ä¸€ä¸ªçº¿ç¨‹æ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢ä¹‹å‰æ‰§è¡Œã€‚</li></ul></li><li><p><strong>ä¼ é€’æ€§è§„åˆ™ï¼ˆTransitivityï¼‰</strong>ï¼š</p><ul><li>å¦‚æœæ“ä½œ A â€œhappens-beforeâ€ æ“ä½œ Bï¼Œä¸”æ“ä½œ B â€œhappens-beforeâ€ æ“ä½œ Cï¼Œé‚£ä¹ˆæ“ä½œ A â€œhappens-beforeâ€ æ“ä½œ Cã€‚</li></ul></li></ol><p>â€œhappens-beforeâ€ è§„åˆ™å¸®åŠ©ç¨‹åºå‘˜ç†è§£å¤šçº¿ç¨‹ç¨‹åºä¸­æ“ä½œä¹‹é—´çš„é¡ºåºå’Œå¯è§æ€§ï¼Œç¡®ä¿ç¨‹åºåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´èƒ½å¤Ÿæ­£ç¡®åœ°ååŒå·¥ä½œã€‚è¿™äº›è§„åˆ™å¯¹äºé¿å…ç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰å’Œç¡®ä¿çº¿ç¨‹å®‰å…¨éå¸¸é‡è¦ã€‚åœ¨å®é™…ç¼–ç ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼ˆä¾‹å¦‚<code>synchronized</code>å…³é”®å­—å’Œ<code>volatile</code>å…³é”®å­—ï¼‰æ¥ç¡®ä¿ â€œhappens-beforeâ€ è§„åˆ™çš„æ­£ç¡®åº”ç”¨ã€‚</p><h2 id="å †å’Œæ ˆ">å †å’Œæ ˆ</h2><p>åœ¨Javaä¸­ï¼Œå †ï¼ˆHeapï¼‰å’Œæ ˆï¼ˆStackï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®å’Œå¯¹è±¡ã€‚å®ƒä»¬å…·æœ‰ä¸åŒçš„ç‰¹æ€§å’Œç”¨é€”ï¼š</p><ol><li><p><strong>å †ï¼ˆHeapï¼‰</strong>ï¼š</p><ul><li><p><strong>ç”¨é€”</strong>ï¼šå †æ˜¯ç”¨æ¥å­˜å‚¨å¯¹è±¡å®ä¾‹çš„å†…å­˜åŒºåŸŸã€‚åœ¨å †ä¸­åˆ†é…çš„å¯¹è±¡æ‹¥æœ‰è¾ƒé•¿çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šå¸¸å­˜æ´»äºæ–¹æ³•ä¹‹å¤–ï¼Œç›´åˆ°æ²¡æœ‰å¼•ç”¨æŒ‡å‘å®ƒä»¬æ—¶æ‰ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</p></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼šå †æ˜¯åœ¨JVMå¯åŠ¨æ—¶åˆ†é…çš„ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«å®ƒã€‚å †å†…å­˜çš„å¤§å°å¯ä»¥é€šè¿‡å¯åŠ¨JVMæ—¶çš„å‚æ•°æ¥è°ƒæ•´ã€‚Javaçš„åƒåœ¾å›æ”¶å™¨ä¼šå®šæœŸæ¸…ç†ä¸å†è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œé‡Šæ”¾å †å†…å­˜ã€‚</p></li><li><p><strong>å¯¹è±¡å­˜å‚¨</strong>ï¼šåœ¨å †ä¸­å­˜å‚¨çš„å¯¹è±¡å¯ä»¥åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾ã€‚å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±å…¶å¼•ç”¨å†³å®šï¼Œå½“æ²¡æœ‰å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒå°±ä¼šæˆä¸ºåƒåœ¾ï¼Œç­‰å¾…åƒåœ¾å›æ”¶ã€‚</p></li><li><p><strong>å¤šçº¿ç¨‹å…±äº«</strong>ï¼šå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®å †ï¼Œå¹¶åœ¨å †ä¸­åˆ†é…å¯¹è±¡ã€‚å› æ­¤ï¼Œå †æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†éœ€è¦æ³¨æ„åŒæ­¥é—®é¢˜ã€‚</p></li></ul></li><li><p><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼š</p><ul><li><p><strong>ç”¨é€”</strong>ï¼šæ ˆä¸»è¦ç”¨æ¥å­˜å‚¨çº¿ç¨‹çš„æ–¹æ³•è°ƒç”¨å’Œå±€éƒ¨å˜é‡ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼Œå³åœ¨æ–¹æ³•è°ƒç”¨æ—¶åˆ›å»ºï¼Œæ–¹æ³•è¿”å›æ—¶é”€æ¯ã€‚</p></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚æ ˆå†…å­˜çš„å¤§å°é€šå¸¸æ¯”å †å°å¾—å¤šï¼Œå®ƒåœ¨JVMå¯åŠ¨æ—¶åˆ†é…ç»™æ¯ä¸ªçº¿ç¨‹ï¼Œå› æ­¤æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆã€‚</p></li><li><p><strong>æ–¹æ³•è°ƒç”¨</strong>ï¼šæ ˆç”¨äºå­˜å‚¨æ–¹æ³•çš„è°ƒç”¨æ ˆå¸§ã€‚æ¯å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œä¸€ä¸ªæ–°çš„æ ˆå¸§ä¼šè¢«å‹å…¥æ ˆé¡¶ï¼Œç”¨äºå­˜å‚¨æ–¹æ³•çš„å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°å’Œæ–¹æ³•è¿”å›åœ°å€ç­‰ä¿¡æ¯ã€‚å½“æ–¹æ³•è¿”å›æ—¶ï¼Œæ ˆå¸§è¢«å¼¹å‡ºï¼Œæ¢å¤ä¸Šä¸€ä¸ªæ–¹æ³•çš„ä¸Šä¸‹æ–‡ã€‚</p></li><li><p><strong>å±€éƒ¨å˜é‡</strong>ï¼šå±€éƒ¨å˜é‡ï¼ˆå¦‚åŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ï¼‰é€šå¸¸å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸä¸æ–¹æ³•çš„æ‰§è¡Œå‘¨æœŸç›¸å¯¹åº”ã€‚</p></li><li><p><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šç”±äºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œæ ˆæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦æ˜¾å¼çš„åŒæ­¥æªæ–½ã€‚</p></li></ul></li></ol><p>æ€»ç»“ï¼š</p><ul><li>å †å’Œæ ˆæ˜¯Javaä¸­ä¸¤ç§ä¸åŒçš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®å’Œå¯¹è±¡ã€‚</li><li>å †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œæ‹¥æœ‰è¾ƒé•¿çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”±åƒåœ¾å›æ”¶å™¨ç®¡ç†ã€‚</li><li>æ ˆç”¨äºå­˜å‚¨æ–¹æ³•è°ƒç”¨å’Œå±€éƒ¨å˜é‡ï¼Œç”Ÿå‘½å‘¨æœŸä¸æ–¹æ³•çš„æ‰§è¡Œå‘¨æœŸç›¸å¯¹åº”ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚</li><li>å †å’Œæ ˆåœ¨å†…å­˜ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸæ–¹é¢æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œäº†è§£å®ƒä»¬çš„åŒºåˆ«å¯¹äºç¼–å†™é«˜æ•ˆå’Œæ­£ç¡®çš„Javaç¨‹åºéå¸¸é‡è¦ã€‚</li></ul><h2 id="Javaå­—èŠ‚ç å¸¸è§æŒ‡ä»¤">Javaå­—èŠ‚ç å¸¸è§æŒ‡ä»¤</h2><p>Java å­—èŠ‚ç æ˜¯ä¸€ç§ä¸­é—´ä»£ç ï¼Œå®ƒæ˜¯Javaæºä»£ç ç¼–è¯‘åç”Ÿæˆçš„ï¼Œç„¶åç”±Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰æ‰§è¡Œçš„æŒ‡ä»¤é›†ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„Javaå­—èŠ‚ç æŒ‡ä»¤ï¼š</p><ol><li><strong>aload</strong>: å°†å¼•ç”¨ç±»å‹çš„å±€éƒ¨å˜é‡åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Šã€‚</li><li><strong>astore</strong>: å°†æ“ä½œæ•°æ ˆä¸Šçš„å¼•ç”¨ç±»å‹çš„å€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡ä¸­ã€‚</li><li><strong>istore</strong>ï¼šæŒ‡ä»¤ç”¨äºå°†æ“ä½œæ•°æ ˆä¸Šçš„æ•´æ•°å€¼å­˜å‚¨åˆ°å±€éƒ¨å˜é‡ä¸­</li><li><strong>iconst</strong>: å°†æ•´æ•°å¸¸é‡ï¼ˆé€šå¸¸æ˜¯-1ã€0ã€1ã€2ã€3ã€4ã€5ï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Šã€‚</li><li><strong>bipush</strong>: å°†ä¸€ä¸ªå­—èŠ‚å€¼ï¼ˆ-128 åˆ° 127ï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Šã€‚</li><li><strong>sipush</strong>: å°†ä¸€ä¸ªçŸ­æ•´æ•°å€¼ï¼ˆ-32,768 åˆ° 32,767ï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆä¸Šã€‚</li><li><strong>iadd</strong>, <strong>isub</strong>, <strong>imul</strong>, <strong>idiv</strong>, <strong>irem</strong>: åˆ†åˆ«æ‰§è¡Œæ•´æ•°çš„åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™æ“ä½œã€‚</li><li><strong>ladd</strong>, <strong>lsub</strong>, <strong>lmul</strong>, <strong>ldiv</strong>, <strong>lrem</strong>: åˆ†åˆ«æ‰§è¡Œé•¿æ•´æ•°çš„åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™æ“ä½œã€‚</li><li><strong>fadd</strong>, <strong>fsub</strong>, <strong>fmul</strong>, <strong>fdiv</strong>: åˆ†åˆ«æ‰§è¡Œå•ç²¾åº¦æµ®ç‚¹æ•°çš„åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚</li><li><strong>dadd</strong>, <strong>dsub</strong>, <strong>dmul</strong>, <strong>ddiv</strong>: åˆ†åˆ«æ‰§è¡ŒåŒç²¾åº¦æµ®ç‚¹æ•°çš„åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚</li><li><strong>iinc</strong>: å¯¹å±€éƒ¨æ•´æ•°å˜é‡è¿›è¡Œå¢é‡æ“ä½œã€‚</li><li><strong>if&lt;æ¡ä»¶&gt;</strong>: æ ¹æ®æ¡ä»¶è·³è½¬åˆ°ä¸åŒçš„æŒ‡ä»¤ã€‚</li><li><strong>goto</strong>: æ— æ¡ä»¶è·³è½¬åˆ°æŒ‡å®šçš„æŒ‡ä»¤ã€‚</li><li><strong>return</strong>: ä»æ–¹æ³•è¿”å›ã€‚</li><li><strong>invokevirtual</strong>, <strong>invokespecial</strong>, <strong>invokestatic</strong>: åˆ†åˆ«ç”¨äºè°ƒç”¨è™šæ‹Ÿæ–¹æ³•ã€ç‰¹æ®Šæ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ç­‰ï¼‰å’Œé™æ€æ–¹æ³•ã€‚</li><li><strong>new</strong>: åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li><li><strong>dup</strong>: å¤åˆ¶æ ˆé¡¶çš„æ•°å€¼ã€‚</li><li><strong>pop</strong>: å¼¹å‡ºæ ˆé¡¶çš„æ•°å€¼ã€‚</li><li><strong>checkcast</strong>: æ£€æŸ¥å¯¹è±¡æ˜¯å¦èƒ½å¤Ÿè½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹ã€‚</li><li><strong>instanceof</strong>: æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹çš„å®ä¾‹ã€‚</li></ol><p>è¿™åªæ˜¯ä¸€å°éƒ¨åˆ†å¸¸è§çš„Javaå­—èŠ‚ç æŒ‡ä»¤ï¼ŒJavaå­—èŠ‚ç åŒ…å«äº†æ›´å¤šçš„æŒ‡ä»¤å’Œæ“ä½œç ï¼Œç”¨äºæ‰§è¡Œå„ç§æ“ä½œï¼ŒåŒ…æ‹¬æ–¹æ³•è°ƒç”¨ã€æ¡ä»¶åˆ†æ”¯ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚æ¯ä¸ªæŒ‡ä»¤éƒ½æœ‰ç‰¹å®šçš„æ“ä½œç ï¼Œå‚æ•°å’Œæ“ä½œæ•°ï¼Œå®ƒä»¬åœ¨JVMä¸­æ‰§è¡ŒJavaç¨‹åºæ—¶èµ·åˆ°å…³é”®ä½œç”¨ã€‚</p><h2 id="Arthas-2">Arthas</h2><p><img src="../assets/image/JVM_Image/image-20231013143940911.png" alt="image-20231013143940911"></p><h2 id="å †åŒºå’Œæ–¹æ³•åŒº">å †åŒºå’Œæ–¹æ³•åŒº</h2><p>JVMä¸­çš„å †åŒºï¼ˆHeapï¼‰å’Œæ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¸åŒï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„ä½œç”¨å’Œå­˜å‚¨å†…å®¹ï¼š</p><ol><li><p>å †åŒºï¼ˆHeapï¼‰ï¼š</p><ul><li>å †åŒºæ˜¯ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹çš„å†…å­˜åŒºåŸŸã€‚</li><li>æ‰€æœ‰é€šè¿‡<code>new</code>å…³é”®å­—åˆ›å»ºçš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †åŒºä¸­ã€‚</li><li>å †åŒºæ˜¯Javaä¸­æœ€å¤§çš„å†…å­˜åŒºåŸŸä¹‹ä¸€ï¼Œç”¨äºåŠ¨æ€åˆ†é…å†…å­˜ï¼Œæ”¯æŒåƒåœ¾å›æ”¶ã€‚</li><li>å †åŒºä¸­çš„å†…å­˜ç®¡ç†æ˜¯åŸºäºåˆ†ä»£çš„ï¼Œåˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œä»¥ä¾¿æ›´æœ‰æ•ˆåœ°è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</li></ul></li><li><p>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ï¼š</p><ul><li>æ–¹æ³•åŒºæ˜¯ç”¨äºå­˜å‚¨ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€é™æ€æˆå‘˜å˜é‡ã€å¸¸é‡æ± å’Œæ–¹æ³•å­—èŠ‚ç ç­‰æ•°æ®çš„å†…å­˜åŒºåŸŸã€‚</li><li>æ–¹æ³•åŒºä¸­åŒ…å«äº†ç±»çš„ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ã€å¸¸é‡æ± ã€æ–¹æ³•å­—èŠ‚ç ä»¥åŠå…¶ä»–ç±»ç›¸å…³çš„å…ƒä¿¡æ¯ã€‚</li><li>æ–¹æ³•åŒºåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­é€šå¸¸æ˜¯æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå°½ç®¡åœ¨Java 8åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œæ°¸ä¹…ä»£è¢«å…ƒæ•°æ®åŒºï¼ˆMetaspaceï¼‰å–ä»£ã€‚</li><li>æ–¹æ³•åŒºä¸»è¦ç”¨äºæ”¯æŒJavaç±»çš„åŠ è½½ã€è§£æå’Œè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»ã€‚</li></ul></li></ol><p>è™½ç„¶å †åŒºå’Œæ–¹æ³•åŒºåœ¨JVMä¸­éƒ½æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œä½†å®ƒä»¬çš„èŒè´£å’Œå­˜å‚¨å†…å®¹å®Œå…¨ä¸åŒã€‚å †åŒºç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œè€Œæ–¹æ³•åŒºç”¨äºå­˜å‚¨ç±»çš„å…ƒæ•°æ®å’Œæ–¹æ³•ç›¸å…³çš„ä¿¡æ¯ã€‚åœ¨Java 8åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œæ–¹æ³•åŒºè¢«æ›¿ä»£ä¸ºå…ƒæ•°æ®åŒºï¼ˆMetaspaceï¼‰ï¼Œå› æ­¤è¿™ä¸¤ä¸ªåŒºåŸŸçš„å®ç°å’Œç®¡ç†æ–¹å¼ä¹Ÿå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»JVMçš„åŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="åº•å±‚" scheme="https://momoao.github.io/categories/%E5%BA%95%E5%B1%82/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="JVM" scheme="https://momoao.github.io/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>C++QT</title>
    <link href="https://momoao.github.io/posts/202308241636.html"/>
    <id>https://momoao.github.io/posts/202308241636.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-27T07:39:45.715Z</updated>
    
    <content type="html"><![CDATA[<h1>C++QT</h1><h1>æ¦‚è¿°</h1><h2 id="QT">QT</h2><p>QTï¼ˆQtï¼‰æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œç”¨äºå¼€å‘å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºå’ŒåµŒå…¥å¼ç³»ç»Ÿã€‚å®ƒç”±Qt Companyï¼ˆå‰èº«ä¸ºNokiaï¼‰å¼€å‘å¹¶ç»´æŠ¤ï¼Œé‡‡ç”¨C++ç¼–å†™ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„åº“å’Œå·¥å…·ï¼Œä»¥ç®€åŒ–è½¯ä»¶å¼€å‘è¿‡ç¨‹ã€‚</p><p>Qtæä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·å’Œç»„ä»¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•å’Œæ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚å®ƒæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxã€Androidå’ŒiOSç­‰ã€‚ä½¿ç”¨Qtï¼Œå¼€å‘äººå‘˜å¯ä»¥ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç„¶åå°†å…¶ç§»æ¤åˆ°ä¸åŒå¹³å°ä¸Šè¿è¡Œï¼Œä»è€Œå®ç°è·¨å¹³å°å¼€å‘ã€‚</p><p>Qtæ¡†æ¶çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>è·¨å¹³å°ï¼šQtå…è®¸å¼€å‘äººå‘˜åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶æä¾›äº†ä¸€è‡´çš„APIå’Œå·¥å…·ã€‚</p></li><li><p>å¯è§†åŒ–è®¾è®¡ï¼šQtæä¾›äº†ä¸€å¥—å¯è§†åŒ–è®¾è®¡å·¥å…·ï¼Œå¦‚Qt Designerï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜è½»æ¾è®¾è®¡å’Œå¸ƒå±€å›¾å½¢ç•Œé¢ã€‚</p></li><li><p>ä¸°å¯Œçš„åº“ï¼šQtæä¾›äº†è®¸å¤šåŠŸèƒ½å¼ºå¤§çš„åº“ï¼Œæ¶µç›–äº†å„ç§é¢†åŸŸï¼ŒåŒ…æ‹¬å›¾å½¢æ¸²æŸ“ã€ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“è®¿é—®ã€å¤šåª’ä½“å¤„ç†ç­‰ã€‚</p></li><li><p>ä¿¡å·ä¸æ§½æœºåˆ¶ï¼šQtå¼•å…¥äº†ä¿¡å·ä¸æ§½æœºåˆ¶ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œäº‹ä»¶å¤„ç†ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºçš„é€»è¾‘æ›´åŠ çµæ´»å’Œæ˜“äºç»„ç»‡ã€‚</p></li><li><p>å¤šçº¿ç¨‹æ”¯æŒï¼šQtæä¾›äº†å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ”¯æŒï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°ç¼–å†™å¹¶å‘å’Œå¹¶è¡Œçš„åº”ç”¨ç¨‹åºã€‚</p></li></ol><p>Qtå¹¿æ³›ç”¨äºå¼€å‘å„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¡Œé¢åº”ç”¨ç¨‹åºã€ç§»åŠ¨åº”ç”¨ç¨‹åºã€åµŒå…¥å¼ç³»ç»Ÿå’Œå›¾å½¢åŒ–å·¥å…·ç­‰ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äºè¡Œä¸šé¢†åŸŸï¼Œå¦‚è‡ªåŠ¨åŒ–ã€åŒ»ç–—ã€æ¸¸æˆå¼€å‘ã€èˆªç©ºèˆªå¤©ç­‰ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒQtæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œç”¨äºå¼€å‘å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºå’ŒåµŒå…¥å¼ç³»ç»Ÿã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åº“å’Œå·¥å…·ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾æ„å»ºè·¨å¹³å°ã€é«˜æ€§èƒ½å’Œå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚</p><h2 id="QML">QML</h2><p>QMLï¼ˆQt Meta-Object Languageï¼‰æ˜¯ä¸€ç§ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„å£°æ˜æ€§è¯­è¨€ï¼Œç”±Qtæ¡†æ¶æä¾›æ”¯æŒã€‚å®ƒè¢«å¹¿æ³›ç”¨äºå¼€å‘è·¨å¹³å°çš„æ¡Œé¢ã€ç§»åŠ¨å’ŒåµŒå…¥å¼åº”ç”¨ç¨‹åºã€‚QMLçš„è®¾è®¡ç†å¿µæ˜¯å°†ç•Œé¢çš„ç»“æ„ã€å¤–è§‚å’Œäº¤äº’é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä»¥ä¸€ç§ç›´è§‚å’Œçµæ´»çš„æ–¹å¼åˆ›å»ºå¯Œæœ‰å¸å¼•åŠ›çš„ç”¨æˆ·ç•Œé¢ã€‚</p><p>ä»¥ä¸‹æ˜¯QMLçš„ä¸€äº›é‡è¦ç‰¹ç‚¹å’Œæ¦‚å¿µï¼š</p><ol><li><p><strong>å£°æ˜æ€§è¯­è¨€</strong>ï¼šQMLæ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€ï¼Œå®ƒé€šè¿‡æè¿°ç•Œé¢å…ƒç´ ä¹‹é—´çš„å…³ç³»å’Œå±æ€§æ¥å®šä¹‰ç”¨æˆ·ç•Œé¢ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç®€æ´çš„è¯­æ³•æ¥å£°æ˜ç•Œé¢çš„ç»“æ„ã€æ ·å¼å’Œè¡Œä¸ºï¼Œè€Œæ— éœ€ç¼–å†™å¤§é‡çš„ä»£ç ã€‚</p></li><li><p><strong>å¯¹è±¡æ¨¡å‹</strong>ï¼šQMLåŸºäºå¯¹è±¡æ¨¡å‹ï¼Œå…¶ä¸­ç•Œé¢å…ƒç´ è¢«è¡¨ç¤ºä¸ºå¯é‡ç”¨çš„å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡å¯ä»¥å…·æœ‰å±æ€§ã€ä¿¡å·å’Œæ–¹æ³•ï¼Œå¯ä»¥åµŒå¥—å’Œç»„åˆå½¢æˆå±‚æ¬¡ç»“æ„ã€‚è¿™ç§å¯¹è±¡æ¨¡å‹ä½¿å¾—æ„å»ºå¤æ‚çš„ç•Œé¢å˜å¾—å®¹æ˜“ï¼Œå¹¶æ”¯æŒä»£ç çš„æ¨¡å—åŒ–å’Œé‡ç”¨ã€‚</p></li><li><p><strong>è§†è§‰å…ƒç´ </strong>ï¼šQMLæä¾›äº†ä¸°å¯Œçš„è§†è§‰å…ƒç´ æ¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼ŒåŒ…æ‹¬çŸ©å½¢ã€åœ†è§’çŸ©å½¢ã€æ–‡æœ¬ã€å›¾åƒã€æŒ‰é’®ã€åˆ—è¡¨è§†å›¾ç­‰ã€‚è¿™äº›å…ƒç´ å¯ä»¥é€šè¿‡è®¾ç½®å±æ€§æ¥å®šåˆ¶å¤–è§‚å’Œè¡Œä¸ºï¼Œå¹¶å¯ä»¥ä½¿ç”¨åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœæ¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚</p></li><li><p><strong>å¸ƒå±€å’Œä½ç½®</strong>ï¼šQMLæä¾›äº†çµæ´»çš„å¸ƒå±€å’Œä½ç½®ç®¡ç†å™¨ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå®šä¹‰ç•Œé¢å…ƒç´ çš„ä½ç½®å’Œå¤§å°ã€‚å¯ä»¥ä½¿ç”¨å‚ç›´å¸ƒå±€ã€æ°´å¹³å¸ƒå±€ã€æ …æ ¼å¸ƒå±€ç­‰æ¥è‡ªåŠ¨æ’åˆ—å…ƒç´ ï¼Œå¹¶æ”¯æŒé”šç‚¹ã€å¡«å……ã€å¯¹é½ç­‰å±æ€§æ¥æ§åˆ¶å…ƒç´ çš„ä½ç½®ã€‚</p></li><li><p><strong>ä¿¡å·å’Œæ§½æœºåˆ¶</strong>ï¼šQMLæ”¯æŒä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥å’Œç•Œé¢å…ƒç´ ä¹‹é—´çš„é€šä¿¡ã€‚å¯ä»¥å®šä¹‰ä¿¡å·å¹¶å°†å…¶è¿æ¥åˆ°ç‰¹å®šçš„æ§½å‡½æ•°ï¼Œä»¥å“åº”äº‹ä»¶æˆ–æ•°æ®çš„å˜åŒ–ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—å®ç°äº¤äº’é€»è¾‘å’Œå¤„ç†ç”¨æˆ·æ“ä½œå˜å¾—ç®€å•å’Œç›´è§‚ã€‚</p></li><li><p><strong>åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ</strong>ï¼šQMLå…·æœ‰å†…ç½®çš„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœç³»ç»Ÿï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºå¹³æ»‘çš„ç•Œé¢åŠ¨ç”»ã€‚å¯ä»¥åœ¨å±æ€§ä¹‹é—´å®šä¹‰åŠ¨ç”»ï¼Œä¾‹å¦‚æ·¡å…¥æ·¡å‡ºã€å¹³ç§»ã€æ—‹è½¬ç­‰ï¼Œä»¥åŠåœ¨ä¸åŒç•Œé¢çŠ¶æ€ä¹‹é—´å®šä¹‰è¿‡æ¸¡æ•ˆæœï¼Œä¾‹å¦‚é¡µé¢åˆ‡æ¢æ•ˆæœã€‚</p></li><li><p><strong>ä¸C++çš„äº¤äº’</strong>ï¼šQMLå¯ä»¥ä¸C++ä»£ç è¿›è¡Œæ— ç¼é›†æˆï¼Œé€šè¿‡Qtçš„å…ƒå¯¹è±¡ç³»ç»Ÿå®ç°è·¨è¯­è¨€äº¤äº’ã€‚å¯ä»¥å°†QMLç•Œé¢ä¸åç«¯çš„C++é€»è¾‘ç›¸ç»“åˆï¼Œä½¿å¼€</p></li></ol><p>å‘äººå‘˜èƒ½å¤Ÿå……åˆ†åˆ©ç”¨Qtæ¡†æ¶æä¾›çš„å¼ºå¤§åŠŸèƒ½å’Œåº“ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒQMLæ˜¯ä¸€ç§å¼ºå¤§çš„ç”¨æˆ·ç•Œé¢å¼€å‘è¯­è¨€ï¼Œå®ƒä»¥å£°æ˜æ€§çš„æ–¹å¼æè¿°ç•Œé¢å…ƒç´ ï¼Œå…·æœ‰çµæ´»çš„å¸ƒå±€å’Œä½ç½®ç®¡ç†ï¼Œæ”¯æŒåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœï¼Œå¹¶èƒ½ä¸C++ä»£ç è¿›è¡Œäº¤äº’ã€‚é€šè¿‡ä½¿ç”¨QMLï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å¿«é€Ÿã€æ›´é«˜æ•ˆåœ°æ„å»ºå‡ºè‰²çš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚</p><h2 id="ä¿¡å·å’Œæ§½æœºåˆ¶">ä¿¡å·å’Œæ§½æœºåˆ¶</h2><p>åœ¨Qtä¸­ï¼Œä¿¡å·ï¼ˆSignalsï¼‰å’Œæ§½ï¼ˆSlotsï¼‰æœºåˆ¶æ˜¯ä¸€ç§ç”¨äºå®ç°å¯¹è±¡é—´é€šä¿¡çš„é‡è¦æœºåˆ¶ã€‚å®ƒæ˜¯Qtæ¡†æ¶ä¸­çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œç”¨äºè§£è€¦å’Œè¿æ¥ä¸åŒçš„å¯¹è±¡ã€‚</p><p>ä¿¡å·ï¼ˆSignalsï¼‰æ˜¯Qtå¯¹è±¡åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶å‘å‡ºçš„æ¶ˆæ¯ã€‚ä¸€ä¸ªä¿¡å·å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªç‰¹å®šäº‹ä»¶çš„å‘å‡ºè€…ã€‚ä¾‹å¦‚ï¼Œå½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼ŒQPushButtonç±»å¯ä»¥å‘å‡ºä¸€ä¸ªclickedï¼ˆç‚¹å‡»ï¼‰ä¿¡å·ã€‚</p><p>æ§½ï¼ˆSlotsï¼‰æ˜¯Qtå¯¹è±¡ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºå“åº”ä¿¡å·çš„å‘å‡ºã€‚æ§½å¯ä»¥è¢«è§†ä¸ºä¿¡å·çš„æ¥æ”¶è€…ï¼Œå®ƒå®šä¹‰äº†å½“ç‰¹å®šä¿¡å·å‘ç”Ÿæ—¶åº”è¯¥æ‰§è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ§½å‡½æ•°æ¥å¤„ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><p>ä¿¡å·å’Œæ§½æœºåˆ¶çš„è¿æ¥æ˜¯é€šè¿‡ä½¿ç”¨QObjectç±»çš„connect()å‡½æ•°æ¥å®ç°çš„ã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå‘å‡ºä¿¡å·çš„å¯¹è±¡ã€ä¸€ä¸ªä¿¡å·çš„åç§°ã€ä¸€ä¸ªæ¥æ”¶ä¿¡å·çš„å¯¹è±¡å’Œä¸€ä¸ªæ§½å‡½æ•°çš„åç§°ä½œä¸ºå‚æ•°ã€‚å½“ä¿¡å·è¢«å‘å‡ºæ—¶ï¼Œä¸ä¹‹è¿æ¥çš„æ§½å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†ä¿¡å·å’Œæ§½çš„ä½¿ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(QObject *parent = <span class="literal">nullptr</span>) : <span class="built_in">QObject</span>(parent) &#123;</span><br><span class="line">        QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Click me&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">connect</span>(button, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">handleButtonClick</span>()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">handleButtonClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Button clicked!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MyClass myObject;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒMyClassæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„QObjectå­ç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæŒ‰é’®ï¼ˆQPushButtonï¼‰ã€‚å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œclicked()ä¿¡å·ä¼šè¢«å‘å‡ºã€‚è¿™ä¸ªä¿¡å·ä¸MyClassç±»ä¸­çš„handleButtonClick()æ§½å‡½æ•°è¿æ¥èµ·æ¥ã€‚å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒhandleButtonClick()å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå¹¶è¾“å‡º&quot;Button clicked!&quot;ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œå¿…é¡»å°†QObjectå­ç±»çš„å¤´æ–‡ä»¶åŒ…å«è¿›æ¥ï¼Œå¹¶åœ¨ç±»çš„å®šä¹‰ä¸­ä½¿ç”¨Q_OBJECTå®ã€‚è¿™ä¸ªå®ä¼šä¸ºç±»æ·»åŠ å¿…è¦çš„å…ƒå¯¹è±¡ï¼ˆMeta-Objectï¼‰ä¿¡æ¯ï¼Œä»¥æ”¯æŒä¿¡å·å’Œæ§½çš„è¿æ¥ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œä¿¡å·å’Œæ§½æœºåˆ¶æ˜¯Qtä¸­ä¸€ç§å¼ºå¤§çš„å¯¹è±¡é—´é€šä¿¡æ–¹å¼ï¼Œå®ƒå…è®¸å¯¹è±¡ä¹‹é—´çš„è§£è€¦å’Œçµæ´»è¿æ¥ã€‚é€šè¿‡ä½¿ç”¨ä¿¡å·å’Œæ§½ï¼Œä½ å¯ä»¥å®ç°äº‹ä»¶çš„å“åº”å’Œæ•°æ®çš„ä¼ é€’ï¼Œä½¿å¾—Qtç¨‹åºæ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚</p><h1>ç•Œé¢è§£è¯»</h1><h2 id="è®¾è®¡ç•Œé¢">è®¾è®¡ç•Œé¢</h2><p><img src="../assets/image/C++QT_Image/image-20230622134750896.png" alt="image-20230622134750896"></p><h3 id="Layouts-å¸ƒå±€">Layouts-å¸ƒå±€</h3><p><img src="../assets/image/C++QT_Image/image-20230622135030754.png" alt="image-20230622135030754"></p><p>æ°´å¹³å¸ƒå±€</p><p>å‚ç›´å¸ƒå±€</p><p>ç½‘æ ¼å¸ƒå±€ï¼ˆè®¡ç®—å™¨ï¼‰</p><p>è¡¨å•å¸ƒå±€</p><h3 id="Spacers-å¼¹ç°§">Spacers-å¼¹ç°§</h3><p><img src="../assets/image/C++QT_Image/image-20230622135023591.png" alt="image-20230622135023591"></p><p>æ°´å¹³å¼¹ç°§</p><p>ç«–ç›´å¼¹ç°§</p><p><img src="../assets/image/C++QT_Image/image-20230622135014724.png" alt="image-20230622135014724"></p><p>ä¾‹å¦‚ï¼šç¡®å®šçš„å·¦è¾¹å°±ç©ºäº†å¥½å¤šåœ°æ–¹ï¼Œå°±æ˜¯å› ä¸ºæœ‰ä¸€ä¸ªæ°´å¹³çš„å¼¹ç°§</p><h3 id="Buttons-æŒ‰é’®">Buttons-æŒ‰é’®</h3><p><img src="../assets/image/C++QT_Image/image-20230622135116717.png" alt="image-20230622135116717"></p><p>æ™®é€šæŒ‰é’®</p><p>å·¥å…·æŒ‰é’®</p><p>å•é€‰æŒ‰é’®</p><p>å¤é€‰æŒ‰é’®</p><p>å‘½ä»¤é“¾æ¥æŒ‰é’®</p><p>å¯¹è¯æ¡†æŒ‰é’®ç›’</p><h3 id="Item-Views-Model-Based-å•å…ƒè§†å›¾">Item Views(Model-Based)-å•å…ƒè§†å›¾</h3><p><img src="../assets/image/C++QT_Image/image-20230622152529030.png" alt="image-20230622152529030"></p><p>åˆ—è¡¨è§†å›¾</p><p>æ ‘å½¢è§†å›¾</p><p>è¡¨æ ¼è§†å›¾</p><h2 id="ç•Œé¢å…ƒç´ ">ç•Œé¢å…ƒç´ </h2><p>ä»ä¸Šåˆ°ä¸‹è¡¨æ˜äº†ç»§æ‰¿å…³ç³»</p><p><img src="../assets/image/C++QT_Image/image-20230622154010513.png" alt="image-20230622154010513"></p><h1>æŒ‰é’®æ“ä½œ</h1><h2 id="ç¬¬ä¸€ç§å†™æ³•">ç¬¬ä¸€ç§å†™æ³•</h2><p>å³é”®æŒ‰é’®é€‰æ‹©è½¬åˆ°æ§½</p><p><img src="../assets/image/C++QT_Image/image-20230622162057438.png" alt="image-20230622162057438"></p><p>ä¹‹åé€‰æ‹©ä¸€ç§ä¿¡å·ç±»å‹</p><p><img src="../assets/image/C++QT_Image/image-20230622162121883.png" alt="image-20230622162121883"></p><p>åœ¨widget.hæ–‡ä»¶ä¸­å°±ä¼šè‡ªåŠ¨ç”Ÿæˆ</p><p><img src="../assets/image/C++QT_Image/image-20230622162157178.png" alt="image-20230622162157178"></p><p>åœ¨widget.cppæ–‡ä»¶ä¸­å°±ä¼šè‡ªåŠ¨ç”Ÿæˆ</p><p><img src="../assets/image/C++QT_Image/image-20230622162213901.png" alt="image-20230622162213901"></p><p>ä¹‹ååœ¨æ–¹æ³•ä½“é‡Œå†™ç‚¹å‡»æŒ‰é’®åæ‰§è¡Œçš„æ“ä½œ</p><p>è·å–å¯¹è±¡æ–‡æœ¬ï¼Œæ‰§è¡Œè¿™ä¸ªè¿›ç¨‹</p><p>ä¾‹å¦‚ï¼šè¾“å…¥notepadåå°±ä¼šæ‰“å¼€è®°äº‹æœ¬</p><p><img src="../assets/image/C++QT_Image/image-20230622162236358.png" alt="image-20230622162236358"></p><h2 id="ç¬¬äºŒç§æ–¹æ³•">ç¬¬äºŒç§æ–¹æ³•</h2><p>åœ¨æ„é€ æ–¹æ³•ä¸­ä½¿ç”¨connectå‡½æ•°</p><p><img src="../assets/image/C++QT_Image/image-20230622162400415.png" alt="image-20230622162400415"></p><h1>connect()ä½¿ç”¨</h1><p>åœ¨Qtä¸­ï¼Œ<code>connect()</code>å‡½æ•°æ˜¯ç”¨äºå»ºç«‹ä¿¡å·ä¸æ§½ï¼ˆSignal-Slotï¼‰ä¹‹é—´çš„è¿æ¥ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚ä»¥ä¸‹æ˜¯<code>connect()</code>å‡½æ•°çš„åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(sender, <span class="built_in">SIGNAL</span>(signal), receiver, <span class="built_in">SLOT</span>(slot));</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><p><img src="../assets/image/C++QT_Image/image-20230623123021722.png" alt="image-20230623123021722"></p><p>å…¶ä¸­ï¼Œ<code>sender</code>æ˜¯å‘é€ä¿¡å·çš„å¯¹è±¡ï¼Œ<code>signal</code>æ˜¯ä¿¡å·çš„åç§°ï¼Œ<code>receiver</code>æ˜¯æ¥æ”¶ä¿¡å·çš„å¯¹è±¡ï¼Œ<code>slot</code>æ˜¯æ§½çš„åç§°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>connect()</code>å‡½æ•°çš„ç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sender</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">sendSignal</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">emit <span class="title">mySignal</span><span class="params">(<span class="string">&quot;Hello, World!&quot;</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySignal</span><span class="params">(<span class="type">const</span> QString&amp; message)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Receiver</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">receiveSlot</span><span class="params">(<span class="type">const</span> QString&amp; message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="literal">nullptr</span>, <span class="string">&quot;Message&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    Sender sender;</span><br><span class="line">    Receiver receiver;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿æ¥ä¿¡å·å’Œæ§½</span></span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;sender, <span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>(<span class="type">const</span> QString&amp;)), &amp;receiver, <span class="built_in">SLOT</span>(<span class="built_in">receiveSlot</span>(<span class="type">const</span> QString&amp;)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€ä¿¡å·</span></span><br><span class="line">    sender.<span class="built_in">sendSignal</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼š<code>Sender</code>å’Œ<code>Receiver</code>ã€‚<code>Sender</code>ç±»æœ‰ä¸€ä¸ª<code>sendSignal()</code>å‡½æ•°ï¼Œå®ƒé€šè¿‡<code>emit</code>å…³é”®å­—å‘å‡ºä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²å‚æ•°çš„è‡ªå®šä¹‰ä¿¡å·<code>mySignal</code>ã€‚<code>Receiver</code>ç±»æœ‰ä¸€ä¸ª<code>receiveSlot()</code>æ§½å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶ä½¿ç”¨<code>QMessageBox::information()</code>æ˜¾ç¤ºæ¶ˆæ¯æ¡†ã€‚</p><p>åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†<code>Sender</code>å’Œ<code>Receiver</code>çš„å®ä¾‹ã€‚ç„¶åï¼Œä½¿ç”¨<code>connect()</code>å‡½æ•°å°†<code>Sender</code>å¯¹è±¡çš„<code>mySignal</code>ä¿¡å·ä¸<code>Receiver</code>å¯¹è±¡çš„<code>receiveSlot</code>æ§½å‡½æ•°è¿›è¡Œè¿æ¥ã€‚</p><p>æœ€åï¼Œè°ƒç”¨<code>sender.sendSignal()</code>å‘é€ä¿¡å·ï¼Œå½“ä¿¡å·å‘å‡ºæ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ§½å‡½æ•°<code>receiver.receiveSlot()</code>ï¼Œå¹¶åœ¨æ¶ˆæ¯æ¡†ä¸­æ˜¾ç¤ºæ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†æ­£ç¡®ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œéœ€è¦åœ¨ç›¸åº”çš„ç±»å£°æ˜ä¸­æ·»åŠ <code>Q_OBJECT</code>å®ï¼Œå¹¶ä½¿ç”¨<code>SIGNAL()</code>å’Œ<code>SLOT()</code>å®æ¥æŒ‡å®šä¿¡å·å’Œæ§½çš„åç§°ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ä½¿ç”¨Qtçš„å…ƒå¯¹è±¡ç³»ç»Ÿï¼ˆMeta-Object Systemï¼‰æ¥æ”¯æŒä¿¡å·å’Œæ§½çš„è¿æ¥ï¼Œå› æ­¤éœ€è¦åœ¨ä»£ç ä¸­åŒ…å«<code>&lt;QObject&gt;</code>å¤´æ–‡ä»¶ï¼Œå¹¶åœ¨æ„å»ºé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„Qtæ¨¡å—ä¾èµ–ã€‚</p><p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„<code>connect()</code>å‡½æ•°ä½¿ç”¨ç¤ºä¾‹ï¼Œå®é™…ä¸­å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œåœºæ™¯æ¥è¿æ¥ä¸åŒçš„ä¿¡å·å’Œæ§½ã€‚åœ¨Qtçš„å®˜æ–¹æ–‡æ¡£ä¸­å¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„<code>connect()</code>å‡½æ•°ç”¨æ³•å’Œç¤ºä¾‹ã€‚</p><h2 id="QTè‡ªå¸¦ä¿¡å·">QTè‡ªå¸¦ä¿¡å·</h2><p>Qtæ¡†æ¶è‡ªå¸¦äº†è®¸å¤šå¸¸ç”¨çš„ä¿¡å·ï¼Œå¯ä»¥åœ¨å„ç§Qtç±»ä¸­ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Qtè‡ªå¸¦ä¿¡å·çš„ç¤ºä¾‹ï¼š</p><ol><li><p>QPushButtonç±»çš„ä¿¡å·ï¼š</p><ul><li>clicked()ï¼šæŒ‰é’®è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>pressed()ï¼šæŒ‰é’®è¢«æŒ‰ä¸‹æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>released()ï¼šæŒ‰é’®è¢«é‡Šæ”¾æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li><li><p>QCheckBoxç±»çš„ä¿¡å·ï¼š</p><ul><li>clicked()ï¼šå¤é€‰æ¡†è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>stateChanged(int)ï¼šå¤é€‰æ¡†çŠ¶æ€æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„çŠ¶æ€å€¼ã€‚</li></ul></li><li><p>QLineEditç±»çš„ä¿¡å·ï¼š</p><ul><li>textChanged(const QString&amp;)ï¼šæ–‡æœ¬æ¡†å†…å®¹æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„æ–‡æœ¬å†…å®¹ã€‚</li><li>editingFinished()ï¼šç¼–è¾‘å®Œæˆæ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li><li><p>QComboBoxç±»çš„ä¿¡å·ï¼š</p><ul><li>currentIndexChanged(int)ï¼šä¸‹æ‹‰æ¡†å½“å‰é€‰é¡¹æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°é€‰ä¸­çš„é€‰é¡¹ç´¢å¼•ã€‚</li></ul></li><li><p>QSliderç±»çš„ä¿¡å·ï¼š</p><ul><li>valueChanged(int)ï¼šæ»‘åŠ¨æ¡å€¼æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„å€¼ã€‚</li></ul></li><li><p>QListWidgetç±»çš„ä¿¡å·ï¼š</p><ul><li>itemClicked(QListWidgetItem*)ï¼šåˆ—è¡¨é¡¹è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯è¢«ç‚¹å‡»çš„åˆ—è¡¨é¡¹å¯¹è±¡ã€‚</li></ul></li><li><p>QTimerç±»çš„ä¿¡å·ï¼š</p><ul><li>timeout()ï¼šå®šæ—¶å™¨è¶…æ—¶æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li></ol><p>ä»¥ä¸Šåªæ˜¯ä¸€äº›å¸¸è§çš„Qtç±»çš„ä¿¡å·ç¤ºä¾‹ï¼Œå®é™…ä¸ŠQtæ¡†æ¶ä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»çš„ä¿¡å·å¯ä¾›ä½¿ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥é˜…Qtçš„å®˜æ–¹æ–‡æ¡£æ¥è·å–å®Œæ•´çš„ä¿¡å·åˆ—è¡¨å’Œä½¿ç”¨è¯´æ˜ï¼Œä»¥ä¾¿åœ¨ç¼–ç¨‹ä¸­é€‰æ‹©é€‚åˆçš„ä¿¡å·æ¥å®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚</p><p>é™„åŠ ï¼š</p><p><code>returnPressed()</code>æ˜¯Qtä¸­æŸäº›ç»„ä»¶ï¼ˆå¦‚QLineEditï¼‰çš„ä¸€ä¸ªä¿¡å·ã€‚å½“ç”¨æˆ·åœ¨è¯¥ç»„ä»¶ä¸ŠæŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œå°±ä¼šå‘å‡º<code>returnPressed()</code>ä¿¡å·ã€‚</p><h1>ç»„ä»¶ä¸­å€¼çš„è·å–</h1><p>åœ¨Qtçš„UIä¸­ï¼Œå¯ä»¥ä½¿ç”¨å„ç§ç»„ä»¶ï¼ˆä¾‹å¦‚QLineEditã€QComboBoxã€QSliderç­‰ï¼‰æ¥æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥æˆ–é€‰æ‹©ã€‚è¦è·å–è¿™äº›ç»„ä»¶ä¸­çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åº”çš„æ–¹æ³•æˆ–å±æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§ç»„ä»¶å€¼è·å–çš„ç¤ºä¾‹ï¼š</p><ol><li><p>QLineEditï¼ˆæ–‡æœ¬æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>text()</code>æ–¹æ³•è·å–æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QLineEdit* lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">QString text = lineEdit-&gt;<span class="built_in">text</span>();</span><br></pre></td></tr></table></figure></li><li><p>QComboBoxï¼ˆä¸‹æ‹‰æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>currentText()</code>æ–¹æ³•è·å–å½“å‰é€‰ä¸­é¡¹çš„æ–‡æœ¬å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QComboBox* comboBox = <span class="keyword">new</span> <span class="built_in">QComboBox</span>(<span class="keyword">this</span>);</span><br><span class="line">QString selectedText = comboBox-&gt;<span class="built_in">currentText</span>();</span><br></pre></td></tr></table></figure></li><li><p>QSliderï¼ˆæ»‘åŠ¨æ¡ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>value()</code>æ–¹æ³•è·å–æ»‘åŠ¨æ¡çš„å½“å‰å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSlider* slider = <span class="keyword">new</span> <span class="built_in">QSlider</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">int</span> value = slider-&gt;<span class="built_in">value</span>();</span><br></pre></td></tr></table></figure></li><li><p>QCheckBoxï¼ˆå¤é€‰æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>isChecked()</code>æ–¹æ³•è·å–å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox* checkBox = <span class="keyword">new</span> <span class="built_in">QCheckBox</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">bool</span> checked = checkBox-&gt;<span class="built_in">isChecked</span>();</span><br></pre></td></tr></table></figure></li><li><p>QRadioButtonï¼ˆå•é€‰æŒ‰é’®ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>isChecked()</code>æ–¹æ³•è·å–å•é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QRadioButton* radioButton = <span class="keyword">new</span> <span class="built_in">QRadioButton</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">bool</span> checked = radioButton-&gt;<span class="built_in">isChecked</span>();</span><br></pre></td></tr></table></figure></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§ç»„ä»¶å€¼è·å–çš„ç¤ºä¾‹ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰é€‚ç”¨äºè·å–å€¼çš„æ–¹æ³•ã€‚å¯ä»¥æ ¹æ®å…·ä½“çš„ç»„ä»¶ç±»å‹å’Œéœ€æ±‚ï¼ŒæŸ¥é˜…Qtçš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´å¤šå…³äºç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶æ¥æ•è·ç»„ä»¶å€¼çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è¿æ¥æ–‡æœ¬æ¡†çš„<code>textChanged()</code>ä¿¡å·æˆ–æ»‘åŠ¨æ¡çš„<code>valueChanged()</code>ä¿¡å·ï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ç›¸åº”çš„æ§½å‡½æ•°ï¼Œåœ¨æ§½å‡½æ•°ä¸­è·å–æœ€æ–°çš„å€¼å¹¶è¿›è¡Œå¤„ç†ã€‚</p><h1>æ·»åŠ å›¾ç‰‡èµ„æº</h1><p>å³é”®é¡¹ç›®æ·»åŠ æ–°æ–‡ä»¶</p><p><img src="../assets/image/C++QT_Image/image-20230623131551654.png" alt="image-20230623131551654"></p><p>å°†å›¾ç‰‡æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªresæ–‡ä»¶å¤¹å†…ï¼Œå¹¶æ”¾åœ¨é¡¹ç›®ä¸‹</p><p><img src="../assets/image/C++QT_Image/image-20230623131634103.png" alt="image-20230623131634103"></p><p>å°†rcc.exeæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­</p><p>D:\QT5.9\5.9\mingw53_32\bin</p><p>åœ¨cmdä¸­ä½¿ç”¨rccæŒ‡ä»¤å°†qrcä¸­åŒ…å«çš„å›¾ç‰‡æ–‡ä»¶å˜ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶plane.rcc</p><p><strong>rcc -binary res.qrc -o plane.rcc</strong></p><p><img src="../assets/image/C++QT_Image/image-20230623131736291.png" alt="image-20230623131736291"></p><p>ä½¿ç”¨è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦åŒ…å«å¤´æ–‡ä»¶</p><p>#include <QResource></p><p>æ³¨å†ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¿¡æ¯</p><p>ä¹‹åå°±å¯ä»¥é€šè¿‡QResource::registerResource(GAME_RES_PATH);æ¥æŒ‡æ˜å¼•å…¥äº†ä»€ä¹ˆèµ„æºï¼Œå¯ä»¥åˆ é™¤qrcæ–‡ä»¶ï¼Œä½†æ˜¯resæ–‡ä»¶å¤¹è¦ç•™ç€</p><p>æ³¨æ„ï¼šè¿™é‡Œçš„è·¯å¾„æ˜¯é¡¹ç›®çš„æ‰€åœ¨ç›®å½•ï¼Œè€Œä¸æ˜¯é¡¹ç›®ç›®å½•ä¸‹</p><p>#define GAME_RES_PATH â€œPlaneWar/plane.rccâ€</p><p><img src="../assets/image/C++QT_Image/image-20230623132226055.png" alt="image-20230623132226055"></p><p>åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®å›¾æ ‡å³å¯åœ¨çª—å£å·¦ä¸Šè§’åŠ è½½</p><p>éœ€è¦#include <QIcon></p><p><img src="../assets/image/C++QT_Image/image-20230623132645766.png" alt="image-20230623132645766"></p><h1>ç¨‹åºå¼€å‘</h1><h2 id="åœ°å›¾æ»šåŠ¨">åœ°å›¾æ»šåŠ¨</h2><h3 id="map-h">map.h</h3><p>è´Ÿè´£å®šä¹‰åœ°å›¾çš„åæ ‡è®¡ç®—æ–¹æ³•</p><p><img src="../assets/image/C++QT_Image/image-20230623162142354.png" alt="image-20230623162142354"></p><h3 id="map-cpp">map.cpp</h3><p>åœ¨æ„é€ æ–¹æ³•é‡ŒåŠ è½½åœ°å›¾å›¾ç‰‡ï¼Œåˆå§‹åŒ–è¿™ä¸¤ä¸ªå›¾ç‰‡Yåæ ‡ï¼Œè®¾ç½®æ»šåŠ¨é€Ÿåº¦</p><p>åœ°å›¾çš„åæ ‡æ”¹å˜è®¡ç®—</p><p><img src="../assets/image/C++QT_Image/image-20230623163427376.png" alt="image-20230623163427376"></p><h3 id="mainscene-h">mainscene.h</h3><p><img src="../assets/image/C++QT_Image/image-20230624082153740.png" alt="image-20230624082153740"></p><h3 id="mainscene-cpp">mainscene.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainscene.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QIcon&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">MainScene::<span class="built_in">MainScene</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    <span class="built_in">initScene</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯åŠ¨æ¸¸æˆ</span></span><br><span class="line">    <span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainScene::~<span class="built_in">MainScene</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::initScene</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®çª—å£å›ºå®šå°ºå¯¸</span></span><br><span class="line">    <span class="built_in">setFixedSize</span>(GAME_WIDTH,GAME_HEIGHT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">setWindowTitle</span>(GAME_TITLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŠ è½½å›¾æ ‡</span></span><br><span class="line">    <span class="built_in">setWindowIcon</span>(<span class="built_in">QIcon</span>(GAME_ICON));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šæ—¶å™¨åˆå§‹åŒ–</span></span><br><span class="line">    m_Timer.<span class="built_in">setInterval</span>(GAME_RATE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¯åŠ¨å®šæ—¶å™¨</span></span><br><span class="line">    m_Timer.<span class="built_in">start</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›‘å¬ç›‘å¬å™¨å‘é€çš„ä¿¡å·</span></span><br><span class="line">    <span class="comment">//ï¼ˆå“ªä¸ªç›‘å¬å™¨ï¼Œæ—¶é—´åˆ°äº†å‘é€ä»€ä¹ˆä¿¡å·ï¼Œç”¨æ–¹æ³•å¤„ç†ï¼‰</span></span><br><span class="line">    <span class="built_in">connect</span>(&amp;m_Timer,&amp;QTimer::timeout,[=]()&#123;</span><br><span class="line">        <span class="comment">//æ›´æ–°æ¸¸æˆä¸­æ‰€æœ‰å…ƒç´ çš„åæ ‡</span></span><br><span class="line">        <span class="built_in">updatePosition</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»˜åˆ¶åˆ°å±å¹•ä¸Š</span></span><br><span class="line">        <span class="built_in">update</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶åœ°å›¾</span></span><br><span class="line">    <span class="comment">//(xåæ ‡ï¼Œyåæ ‡ï¼ŒQPixmapå¯¹è±¡)</span></span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map1_posY,m_map.m_map1);</span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map2_posY,m_map.m_map2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::updatePosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_map.<span class="built_in">mapPosition</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>Clion QTå¼€å‘</h1><h2 id="åŸºç¡€æ“ä½œ">åŸºç¡€æ“ä½œ</h2><p>æ–°å»ºé¡¹ç›®</p><p><img src="../assets/image/C++QT_Image/image-20230622185007059.png" alt="image-20230622185007059"></p><p>åˆ›å»ºç›®å½•æ–¹ä¾¿ç®¡ç†</p><p>å³é”®é¡¹ç›®ç›®å½•æ–°å»ºqtuiæ–‡ä»¶</p><p>å°†.uiæ–‡ä»¶æ”¾åœ¨Formsä¸­</p><p>å°†.hæ–‡ä»¶æ”¾åœ¨Headersä¸­</p><p>å°†.cppæ–‡ä»¶æ”¾åœ¨Sourcesä¸­</p><p><img src="../assets/image/C++QT_Image/image-20230622185031539.png" alt="image-20230622185031539"></p><p>åœ¨CMakeLists.txtä¸­æ·»åŠ </p><p>è¯¥å‘½ä»¤ç”¨äºå‘Šè¯‰ CMake ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦æœç´¢å¤´æ–‡ä»¶çš„è·¯å¾„</p><p><img src="../assets/image/C++QT_Image/image-20230622185231986.png" alt="image-20230622185231986"></p><p>æ”¹mainwindow.cppæ–‡ä»¶åŒ…å«çš„å¤´æ–‡ä»¶åœ°å€</p><p>å°†#include &quot;ui_MainWindow.h&quot;æ”¹ä¸º</p><p>â€‹#include â€œForms/ui_MainWindow.hâ€</p><p><img src="../assets/image/C++QT_Image/image-20230622185351011.png" alt="image-20230622185351011"></p><p>æ”¹main.cppæ–‡ä»¶ä¸­çš„å†…å®¹</p><p><img src="../assets/image/C++QT_Image/image-20230622185430456.png" alt="image-20230622185430456"></p><p>åœ¨è®¾ç½®ä¸­æ‰¾åˆ°å¤–éƒ¨å·¥å…·</p><p><img src="../assets/image/C++QT_Image/image-20230622185459076.png" alt="image-20230622185459076"></p><p>æ·»åŠ ç”¨äºç¼–å†™UIçš„designer.exe</p><p><img src="../assets/image/C++QT_Image/image-20230622185532722.png" alt="image-20230622185532722"></p><p>ä¹‹åå°±å¯ä»¥åœ¨clionçš„å³é”®èœå•ä¸­ç›´æ¥ä½¿ç”¨</p><p><img src="../assets/image/C++QT_Image/image-20230622185602055.png" alt="image-20230622185602055"></p><h2 id="æ·»åŠ é¢å¤–å¤´æ–‡ä»¶">æ·»åŠ é¢å¤–å¤´æ–‡ä»¶</h2><p>ä¾‹å¦‚è¦æ·»åŠ Networkç›¸å…³çš„åº“</p><p>åœ¨CMakeLists.txtæ–‡ä»¶ä¸­</p><p>è¿™ä¸¤ä¸ªåœ°æ–¹æ·»åŠ Networkçš„æè¿°</p><p>ç„¶ååœ¨Clionä¸­ä½¿ç”¨#include <QNetworkAccessManager>æ—¶ä¸ä¼šæŠ¥é”™å¹¶ä¸”æœ‰ä»£ç æç¤ºï¼Œä½†æ˜¯è¿è¡Œè¿˜æ˜¯ä¼šé—ªé€€</p><p><img src="../assets/image/C++QT_Image/image-20230622190238095.png" alt="image-20230622190238095"></p><p><img src="../assets/image/C++QT_Image/image-20230622190246224.png" alt="image-20230622190246224"></p><p>è¿˜éœ€è¦å°†ä¸‹é¢è·¯å¾„ä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°cmake-build-debugæ–‡ä»¶å¤¹ä¸‹</p><p>D:\QT\6.2.4\mingw_64\bin\Qt6Network.dll</p><p><img src="../assets/image/C++QT_Image/image-20230622190424926.png" alt="image-20230622190424926"></p><h2 id="æ·»åŠ ä¿¡å·å’Œæ§½">æ·»åŠ ä¿¡å·å’Œæ§½</h2><p>åœ¨mainwindow.hæ–‡ä»¶ä¸­</p><p>åœ¨ç±»MainWindowä¸­</p><p>æ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_commitButton_clicked</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_cancelButton_clicked</span>()</span>;</span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºç»™commitButtonç»„ä»¶æ·»åŠ clickedä¿¡å·</p><p>è¡¨ç¤ºç»™cancelButtonç»„ä»¶æ·»åŠ clickedä¿¡å·</p><p><img src="../assets/image/C++QT_Image/image-20230622191908562.png" alt="image-20230622191908562"></p><p>åœ¨æ–‡ä»¶mainwindow.cppæ–‡ä»¶ä¸­è¿›è¡Œå®ç°</p><p><img src="../assets/image/C++QT_Image/image-20230622192226007.png" alt="image-20230622192226007"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»QTç¼–ç¨‹çš„åŸºç¡€å†…å®¹ï¼Œå’ŒQTCreatorçš„åŸºæœ¬ä½¿ç”¨</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
    <category term="QT" scheme="https://momoao.github.io/tags/QT/"/>
    
  </entry>
  
  <entry>
    <title>C++åŸºç¡€</title>
    <link href="https://momoao.github.io/posts/202308241930.html"/>
    <id>https://momoao.github.io/posts/202308241930.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:42:33.829Z</updated>
    
    <content type="html"><![CDATA[<h1>C++åŸºç¡€</h1><h1>é›¶ç¢é—®é¢˜</h1><h2 id="æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«">æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼ŒæŒ‡é’ˆï¼ˆPointersï¼‰å’Œå¼•ç”¨ï¼ˆReferencesï¼‰éƒ½æ˜¯ç”¨äºå¤„ç†å†…å­˜å’Œå˜é‡çš„é‡è¦æ¦‚å¿µï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«ï¼š</p><ol><li><p>å†…å­˜åœ°å€ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘æŸä¸ªå˜é‡æˆ–å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨æ˜¯æŸä¸ªå˜é‡æˆ–å¯¹è±¡çš„åˆ«åï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜åœ°å€ã€‚å®ƒä¸è¢«å¼•ç”¨çš„å˜é‡å…±äº«ç›¸åŒçš„å†…å­˜åœ°å€ã€‚</li></ul></li><li><p>åˆå§‹åŒ–ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆåœ¨å®šä¹‰æ—¶éœ€è¦æ˜¾å¼åœ°åˆå§‹åŒ–ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„å†…å­˜åœ°å€ï¼Œå¯ä»¥æ˜¯nullptrï¼ˆç©ºæŒ‡é’ˆï¼‰æˆ–è€…æŒ‡å‘æŸä¸ªå¯¹è±¡ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨åœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–ä¸ºä¸€ä¸ªå·²å­˜åœ¨çš„å˜é‡æˆ–å¯¹è±¡ï¼Œä¸”ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ä¸ºå¼•ç”¨å…¶ä»–å˜é‡ã€‚</li></ul></li><li><p>ç©ºå€¼ï¼ˆnullï¼‰ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆå¯ä»¥æ˜¯ç©ºæŒ‡é’ˆï¼ˆnullptrï¼‰ï¼Œå³ä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„å†…å­˜åœ°å€ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨å¿…é¡»å§‹ç»ˆå¼•ç”¨æŸä¸ªå·²å­˜åœ¨çš„å˜é‡æˆ–å¯¹è±¡ï¼Œä¸å­˜åœ¨ç©ºå¼•ç”¨çš„æ¦‚å¿µã€‚</li></ul></li><li><p>é‡å®šå‘ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆå¯ä»¥åœ¨è¿è¡Œæ—¶é‡æ–°æŒ‡å‘ä¸åŒçš„å˜é‡æˆ–å¯¹è±¡ã€‚</li><li>å¼•ç”¨ï¼šä¸€æ—¦å¼•ç”¨è¢«åˆå§‹åŒ–ï¼Œå®ƒå°†ä¸€ç›´å¼•ç”¨åŒä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡ï¼Œæ— æ³•æ”¹å˜å¼•ç”¨çš„ç›®æ ‡ã€‚</li></ul></li><li><p>ç©ºé—´å ç”¨ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆæœ¬èº«å æ®å†…å­˜ç©ºé—´ï¼ˆé€šå¸¸æ˜¯4ä¸ªå­—èŠ‚æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºç³»ç»Ÿï¼‰ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨åœ¨å†…å­˜ä¸­ä¸å æ®é¢å¤–çš„ç©ºé—´ï¼Œå®ƒåªæ˜¯è¢«å¼•ç”¨å˜é‡çš„åˆ«åã€‚</li></ul></li><li><p>ç©ºé—´ç¬¦å·ï¼š</p><ul><li>æŒ‡é’ˆï¼šä½¿ç”¨<code>*</code>æ¥å£°æ˜æŒ‡é’ˆå˜é‡ï¼Œå¹¶ä½¿ç”¨<code>*</code>æ¥è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼ˆè§£å¼•ç”¨ï¼‰ã€‚</li><li>å¼•ç”¨ï¼šä½¿ç”¨<code>&amp;</code>æ¥å£°æ˜å¼•ç”¨ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¸éœ€è¦åŠ <code>&amp;</code>ç¬¦å·ï¼Œç›´æ¥ä½¿ç”¨å¼•ç”¨å³å¯ã€‚</li></ul></li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;x; <span class="comment">// æŒ‡é’ˆptræŒ‡å‘å˜é‡x</span></span><br><span class="line"><span class="type">int</span>&amp; ref = x;  <span class="comment">// å¼•ç”¨refæ˜¯å˜é‡xçš„åˆ«å</span></span><br><span class="line"></span><br><span class="line">*ptr = <span class="number">20</span>; <span class="comment">// ä¿®æ”¹æŒ‡é’ˆptræŒ‡å‘çš„å˜é‡çš„å€¼ï¼ˆxå˜ä¸º20ï¼‰</span></span><br><span class="line">ref = <span class="number">30</span>;  <span class="comment">// ä¿®æ”¹å¼•ç”¨refæ‰€å¼•ç”¨çš„å˜é‡çš„å€¼ï¼ˆxå˜ä¸º30ï¼‰</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š<br>æŒ‡é’ˆå’Œå¼•ç”¨åœ¨C++ä¸­éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒä»¬éƒ½ç”¨äºå¤„ç†å˜é‡å’Œå†…å­˜ã€‚é€‰æ‹©ä½¿ç”¨æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨å–å†³äºå…·ä½“çš„æƒ…å†µå’Œéœ€æ±‚ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦åœ¨è¿è¡Œæ—¶æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œæˆ–è€…éœ€è¦æ”¯æŒç©ºå€¼ï¼Œä½¿ç”¨æŒ‡é’ˆæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœä½ åªéœ€è¦åˆ«åæ¥ç®€åŒ–ä»£ç å¹¶ä¸”ä¸éœ€è¦é‡æ–°æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œä½¿ç”¨å¼•ç”¨å¯èƒ½æ›´æ–¹ä¾¿å’Œå®‰å…¨ã€‚</p><h2 id="finalå’ŒconståŒºåˆ«">finalå’ŒconståŒºåˆ«</h2><p><code>final</code>å’Œ<code>const</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å…³é”®å­—ï¼Œç”¨äºä¸åŒçš„ç›®çš„å’Œåœºæ™¯ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>ç”¨é€”å’Œä½œç”¨ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»ï¼Œç”¨äºé™åˆ¶ç»§æ‰¿ã€å‡½æ•°é‡å†™å’Œç»§æ‰¿é“¾çš„æ‰©å±•æ€§ã€‚</li><li><code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡ã€æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ï¼Œä»¥åŠä¿®é¥°å‡½æ•°å‚æ•°å’Œæˆå‘˜å‡½æ•°ï¼Œç”¨äºæ§åˆ¶æ•°æ®çš„ä¸å¯ä¿®æ”¹æ€§ã€‚</li></ul></li><li><p>åº”ç”¨èŒƒå›´ï¼š</p><ul><li><code>final</code>å…³é”®å­—é€‚ç”¨äºç±»çš„å£°æ˜ã€è™šå‡½æ•°çš„å£°æ˜å’Œæ´¾ç”Ÿç±»çš„å£°æ˜ã€‚</li><li><code>const</code>å…³é”®å­—é€‚ç”¨äºå˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹å’Œæˆå‘˜å‡½æ•°ã€‚</li></ul></li><li><p>ä¿®æ”¹é™åˆ¶ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºç¦æ­¢ç±»è¢«ç»§æ‰¿ã€è™šå‡½æ•°è¢«é‡å†™å’Œæ´¾ç”Ÿç±»çš„è¿›ä¸€æ­¥æ´¾ç”Ÿã€‚</li><li><code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡æˆ–æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ï¼Œä¸èƒ½ä¿®æ”¹è¢«å£°æ˜ä¸º<code>const</code>çš„å¯¹è±¡ã€‚</li></ul></li><li><p>ä½œç”¨äºå¯¹è±¡ï¼š</p><ul><li><code>final</code>å…³é”®å­—ä½œç”¨äºç±»å’Œå‡½æ•°ï¼Œç”¨äºé™åˆ¶å…¶å¯ç»§æ‰¿æ€§å’Œé‡å†™æ€§ã€‚</li><li><code>const</code>å…³é”®å­—ä½œç”¨äºå˜é‡å’Œå‡½æ•°ï¼Œç”¨äºå£°æ˜å¸¸é‡ã€æŒ‡ç¤ºåªè¯»æ€§ä»¥åŠé™åˆ¶å¯¹è¢«ä¿®é¥°å¯¹è±¡çš„ä¿®æ”¹ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼Œ<code>final</code>å…³é”®å­—ç”¨äºé™åˆ¶ç»§æ‰¿å’Œå‡½æ•°é‡å†™çš„æ‰©å±•æ€§ï¼Œè€Œ<code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡å’ŒæŒ‡ç¤ºå¯¹è±¡çš„åªè¯»æ€§ã€‚å®ƒä»¬åœ¨ç”¨é€”ã€åº”ç”¨èŒƒå›´å’Œä½œç”¨äºå¯¹è±¡ä¸Šéƒ½æœ‰æ˜æ˜¾çš„å·®å¼‚ã€‚</p><h2 id="ä½¿ç”¨-å’Œ-çš„åŒºåˆ«">ä½¿ç”¨ .å’Œ-&gt;çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼Œä½¿ç”¨<code>.</code>å’Œ<code>-&gt;</code>æ˜¯ç”¨äºè®¿é—®æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æˆå‘˜çš„ä¸¤ç§æ–¹å¼ã€‚</p><ol><li><p>ç‚¹æ“ä½œç¬¦ï¼ˆ.ï¼‰ï¼šç‚¹æ“ä½œç¬¦ç”¨äºç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œå®ƒåªèƒ½ç”¨äºå¯¹è±¡æœ¬èº«ï¼Œè€Œä¸èƒ½ç”¨äºæŒ‡é’ˆã€‚å¦‚æœè¦ä½¿ç”¨ç‚¹æ“ä½œç¬¦ï¼Œéœ€è¦å°†æŒ‡é’ˆè§£å¼•ç”¨ä¸ºå¯¹è±¡ã€‚</p></li><li><p>ç®­å¤´æ“ä½œç¬¦ï¼ˆ-&gt;ï¼‰ï¼šç®­å¤´æ“ä½œç¬¦ç”¨äºé€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œå®ƒæ˜¯æŒ‡é’ˆç‰¹æœ‰çš„æ“ä½œç¬¦ã€‚ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦æ—¶ï¼Œä¸éœ€è¦å°†æŒ‡é’ˆè§£å¼•ç”¨ä¸ºå¯¹è±¡ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†<code>.</code>å’Œ<code>-&gt;</code>çš„åŒºåˆ«ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj;</span><br><span class="line">    obj.value = <span class="number">42</span>;</span><br><span class="line">    obj.<span class="built_in">printValue</span>();      <span class="comment">// ä½¿ç”¨ç‚¹æ“ä½œç¬¦ç›´æ¥è®¿é—®å¯¹è±¡æˆå‘˜ï¼Œè¾“å‡º: Value: 42</span></span><br><span class="line"></span><br><span class="line">    MyClass* ptr = &amp;obj;</span><br><span class="line">    ptr-&gt;value = <span class="number">24</span>;</span><br><span class="line">    ptr-&gt;<span class="built_in">printValue</span>();     <span class="comment">// ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡æˆå‘˜ï¼Œè¾“å‡º: Value: 24</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>MyClass</code>ç±»ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ•´å‹æˆå‘˜å˜é‡<code>value</code>å’Œä¸€ä¸ªæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>MyClass</code>å¯¹è±¡<code>obj</code>ï¼Œå¹¶é€šè¿‡ç‚¹æ“ä½œç¬¦ç›´æ¥è®¿é—®äº†å¯¹è±¡çš„æˆå‘˜å˜é‡<code>value</code>å’Œæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘<code>obj</code>çš„æŒ‡é’ˆ<code>ptr</code>ï¼Œå¹¶ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®äº†å¯¹è±¡çš„æˆå‘˜å˜é‡<code>value</code>å’Œæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚æ³¨æ„ï¼Œä½¿ç”¨ç®­å¤´æ“ä½œç¬¦æ—¶ï¼Œä¸éœ€è¦è§£å¼•ç”¨æŒ‡é’ˆã€‚</p><p>æ€»ç»“èµ·æ¥ï¼š</p><ul><li>ä½¿ç”¨<code>.</code>æ“ä½œç¬¦ç”¨äºç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œéœ€è¦å¯¹è±¡æœ¬èº«è€Œä¸æ˜¯æŒ‡é’ˆã€‚</li><li>ä½¿ç”¨<code>-&gt;</code>æ“ä½œç¬¦ç”¨äºé€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œä¸éœ€è¦è§£å¼•ç”¨æŒ‡é’ˆã€‚</li></ul><h2 id="ä¸ºä»€ä¹ˆè¯´-bits-stdc-h-æ˜¯ä¸‡èƒ½å¤´æ–‡ä»¶">ä¸ºä»€ä¹ˆè¯´&lt;bits/stdc++.h&gt;æ˜¯ä¸‡èƒ½å¤´æ–‡ä»¶</h2><p>åœ¨C++ç¼–ç¨‹ä¸­ï¼Œ<code>&lt;bits/stdc++.h&gt;</code>æ˜¯ä¸€ä¸ªéæ ‡å‡†å¤´æ–‡ä»¶ï¼Œå®ƒé€šå¸¸è¢«ç”¨äºç«èµ›ç¼–ç¨‹å’Œå¿«é€ŸåŸå‹å¼€å‘ï¼Œè¢«è®¤ä¸ºæ˜¯&quot;ä¸‡èƒ½å¤´æ–‡ä»¶&quot;ã€‚è¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«äº†å¤§é‡å¸¸ç”¨çš„æ ‡å‡†C++åº“çš„å…¶ä»–å¤´æ–‡ä»¶ï¼Œå› æ­¤åœ¨ä½¿ç”¨å®ƒä¹‹åï¼Œå°±ä¸éœ€è¦ä¸ºæ¯ä¸ªæ ‡å‡†åº“å¼•å…¥å•ç‹¬çš„å¤´æ–‡ä»¶äº†ã€‚</p><p>ä½¿ç”¨<code>&lt;bits/stdc++.h&gt;</code>å¤´æ–‡ä»¶çš„å¥½å¤„æ˜¯å®ƒç®€åŒ–äº†ä»£ç çš„ç¼–å†™ï¼Œå› ä¸ºåªéœ€è¦åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶å³å¯ä½¿ç”¨å¤§éƒ¨åˆ†æ ‡å‡†åº“çš„åŠŸèƒ½ï¼Œä¸éœ€è¦è€ƒè™‘å…·ä½“çš„å¤´æ–‡ä»¶è·¯å¾„å’Œå¼•å…¥é¡ºåºã€‚è¿™åœ¨ç«èµ›ç¼–ç¨‹ä¸­å°¤ä¸ºæ–¹ä¾¿ï¼Œå› ä¸ºå¯ä»¥èŠ‚çœç¼–å†™å’Œè°ƒè¯•ä»£ç æ‰€éœ€çš„æ—¶é—´ã€‚</p><p>ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>&lt;bits/stdc++.h&gt;</code>ä¸æ˜¯æ ‡å‡†C++çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒåªæ˜¯æŸäº›ç¼–è¯‘å™¨ï¼ˆå¦‚GCCå’ŒMinGWï¼‰çš„æ‰©å±•ã€‚å› æ­¤ï¼Œåœ¨ä¸€äº›ç‰¹å®šçš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯èƒ½æ— æ³•ä½¿ç”¨è¿™ä¸ªå¤´æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå®ƒåŒ…å«äº†å¤§é‡æ ‡å‡†åº“çš„å†…å®¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ ï¼Œå› æ­¤åœ¨å¤§å‹é¡¹ç›®æˆ–éœ€è¦ç²¾ç»†æ§åˆ¶çš„åœºæ™¯ä¸­ï¼Œæœ€å¥½ä½¿ç”¨å…·ä½“çš„æ ‡å‡†åº“å¤´æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¾èµ–äº<code>&lt;bits/stdc++.h&gt;</code>ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œå°½ç®¡<code>&lt;bits/stdc++.h&gt;</code>å¤´æ–‡ä»¶æ–¹ä¾¿ç¼–å†™å¿«é€ŸåŸå‹å’Œç«èµ›ä»£ç ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨ç²¾ç¡®çš„æ ‡å‡†åº“å¤´æ–‡ä»¶æ¥ä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="ä¸­å¸¸é‡å’Œé™æ€å˜é‡çš„åŒºåˆ«">ä¸­å¸¸é‡å’Œé™æ€å˜é‡çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼Œå¸¸é‡å’Œé™æ€å˜é‡æ˜¯ä¸¤ç§ä¸åŒçš„æ¦‚å¿µã€‚</p><ol><li><p>å¸¸é‡ï¼ˆConstantsï¼‰ï¼š</p><ul><li>å¸¸é‡æ˜¯æŒ‡åœ¨ç¨‹åºä¸­å£°æ˜çš„å›ºå®šå€¼ï¼Œå…¶å€¼åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯æ”¹å˜ã€‚</li><li>å¸¸é‡å¯ä»¥ä½¿ç”¨<code>const</code>å…³é”®å­—å£°æ˜ï¼Œå¹¶ä¸”å¿…é¡»åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>å¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ç¨‹åºè¿è¡Œæ—¶ä¿®æ”¹ã€‚</li><li>å¸¸é‡åœ¨å†…å­˜ä¸­é€šå¸¸è¢«è§†ä¸ºå­—é¢å€¼ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¢«ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_VALUE = <span class="number">100</span>;</span><br></pre></td></tr></table></figure></li><li><p>é™æ€å˜é‡ï¼ˆStatic Variablesï¼‰ï¼š</p><ul><li>é™æ€å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°å†…éƒ¨æˆ–è€…ç±»çš„æˆå‘˜å˜é‡ä¸­å£°æ˜çš„å˜é‡ï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¿æŒå…¶å€¼ä¸å˜ã€‚</li><li>é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼Œè¢«æ‰€æœ‰å¯¹è±¡æˆ–è€…å‡½æ•°æ‰€å…±äº«ã€‚</li><li>é™æ€å˜é‡åœ¨å‡½æ•°å†…éƒ¨æ—¶ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è°ƒç”¨ç»“æŸåä¸ä¼šè¢«é”€æ¯ã€‚</li><li>é™æ€æˆå‘˜å˜é‡åœ¨ç±»ä¸­æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»åå’Œä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ¥è®¿é—®ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">  count++;</span><br><span class="line">  cout &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> instanceCount;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> MyClass::instanceCount = <span class="number">0</span>;</span><br></pre></td></tr></table></figure></li></ol><p>æ€»ç»“ï¼š<br>å¸¸é‡æ˜¯æŒ‡åœ¨ç¨‹åºä¸­å£°æ˜çš„å›ºå®šå€¼ï¼Œå…¶å€¼åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯æ”¹å˜ã€‚è€Œé™æ€å˜é‡æ˜¯åœ¨å‡½æ•°æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡ï¼Œå®ƒä»¬çš„å€¼åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¿æŒä¸å˜ã€‚å¸¸é‡åœ¨å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œè€Œé™æ€å˜é‡å¯ä»¥åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œèµ‹å€¼ã€‚å¸¸é‡åœ¨å†…å­˜ä¸­é€šå¸¸è¢«è§†ä¸ºå­—é¢å€¼ï¼Œè€Œé™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½æ‹·è´ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå¸¸é‡å¼•ç”¨å°±å¯ä»¥èµ‹æ™®é€šæ•°å€¼">ä¸ºä»€ä¹ˆå¸¸é‡å¼•ç”¨å°±å¯ä»¥èµ‹æ™®é€šæ•°å€¼</h2><p>åœ¨C++ä¸­ï¼Œå¸¸é‡å¼•ç”¨å¯ä»¥ç»‘å®šåˆ°æ™®é€šæ•°å€¼ï¼Œæ˜¯å› ä¸ºç¼–è¯‘å™¨ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚</p><p>å½“ä¸€ä¸ªå¸¸é‡å¼•ç”¨è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªæ™®é€šæ•°å€¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå°†æ™®é€šæ•°å€¼è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶çš„åŒ¿åå¸¸é‡ã€‚è¿™ä¸ªåŒ¿åå¸¸é‡ä¸åŸå§‹çš„æ™®é€šæ•°å€¼å…·æœ‰ç›¸åŒçš„å€¼ï¼Œä½†æ˜¯å®ƒè¢«è§†ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå› æ­¤å¯ä»¥ç»‘å®šåˆ°å¸¸é‡å¼•ç”¨ã€‚</p><p>è¿™ç§éšå¼ç±»å‹è½¬æ¢åœ¨ç¼–è¯‘å™¨å±‚é¢è¿›è¡Œï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢æ“ä½œã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—å¸¸é‡å¼•ç”¨èƒ½å¤Ÿæ›´çµæ´»åœ°ä¸æ™®é€šæ•°å€¼è¿›è¡Œäº¤äº’ï¼ŒåŒæ—¶ä¿æŒäº†å¯¹å¸¸é‡çš„é™åˆ¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼çš„æƒ…å†µï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; value)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; value &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line">    <span class="built_in">printValue</span>(number);  <span class="comment">// å¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>printValue</code>å‡½æ•°æ¥å—ä¸€ä¸ªå¸¸é‡å¼•ç”¨å‚æ•°ï¼Œç„¶åæ‰“å°è¯¥å€¼ã€‚åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ™®é€šæ•°å€¼<code>number</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>printValue</code>å‡½æ•°ã€‚ç¼–è¯‘å™¨ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œå°†æ™®é€šæ•°å€¼<code>number</code>è½¬æ¢ä¸ºä¸€ä¸ªåŒ¿åå¸¸é‡ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°å‡½æ•°ä¸­çš„å¸¸é‡å¼•ç”¨å‚æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§éšå¼ç±»å‹è½¬æ¢åªé€‚ç”¨äºå¸¸é‡å¼•ç”¨ï¼Œè€Œä¸èƒ½ç›´æ¥åº”ç”¨äºéå¸¸é‡å¼•ç”¨ã€‚å¦‚æœå°è¯•å°†ä¸€ä¸ªéå¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼ï¼Œåˆ™ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ã€‚</p><h2 id="c-ç‰ˆæœ¬">c++ç‰ˆæœ¬</h2><p>C++98æ˜¯C++è¯­è¨€çš„ç¬¬ä¸€ä¸ªæ ‡å‡†åŒ–ç‰ˆæœ¬ï¼Œäº1998å¹´å‘å¸ƒã€‚åœ¨C++98ä¹‹åï¼Œè¿˜å‘å¸ƒäº†å‡ ä¸ªC++æ ‡å‡†ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½å¼•å…¥äº†æ–°çš„ç‰¹æ€§å’Œè¯­è¨€æ”¹è¿›ã€‚ä»¥ä¸‹æ˜¯C++98ä¹‹åçš„ä¸€äº›é‡è¦ç‰ˆæœ¬åŠå…¶ä¸»è¦ç‰¹æ€§ï¼š</p><ol><li><p>C++03ï¼ˆC++98ä¿®æ­£ç‰ˆï¼‰ï¼š</p><ul><li>C++03äº2003å¹´å‘å¸ƒï¼Œæ˜¯å¯¹C++98æ ‡å‡†çš„ä¸€äº›å°ä¿®æ­£å’Œæ”¹è¿›ã€‚</li><li>ä¸»è¦ä¿®æ­£äº†ä¸€äº›è¯­è¨€å’Œåº“çš„ç¼ºé™·ï¼Œæä¾›äº†æ›´å¥½çš„å…¼å®¹æ€§å’Œç¨³å®šæ€§ã€‚</li></ul></li><li><p>C++11ï¼ˆC++0xï¼‰ï¼š</p><ul><li>C++11äº2011å¹´å‘å¸ƒï¼Œæ˜¯C++æ ‡å‡†çš„é‡å¤§æ›´æ–°ã€‚</li><li>å¼•å…¥äº†è®¸å¤šæ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå¦‚è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼ˆautoå…³é”®å­—ï¼‰ã€ç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•ï¼ˆåˆå§‹åŒ–åˆ—è¡¨å’ŒèŠ±æ‹¬å·åˆå§‹åŒ–ï¼‰ã€lambdaè¡¨è¾¾å¼ã€å³å€¼å¼•ç”¨ï¼ˆç§»åŠ¨è¯­ä¹‰ï¼‰ã€æ™ºèƒ½æŒ‡é’ˆã€èŒƒå›´-based forå¾ªç¯ç­‰ã€‚</li><li>æ·»åŠ äº†ä¸€äº›æ ‡å‡†åº“ç»„ä»¶ï¼Œå¦‚std::threadï¼ˆå¤šçº¿ç¨‹ç¼–ç¨‹ï¼‰ã€std::regexï¼ˆæ­£åˆ™è¡¨è¾¾å¼åº“ï¼‰ã€std::chronoï¼ˆæ—¶é—´å’Œæ—¶é’Ÿåº“ï¼‰ç­‰ã€‚</li><li>å¼•å…¥äº†å¼‚å¸¸è§„èŒƒçš„æ”¹è¿›å’Œæ–°çš„å…³é”®å­—ï¼ˆä¾‹å¦‚noexceptå’Œconstexprï¼‰ã€‚</li></ul></li><li><p>C++14ï¼š</p><ul><li>C++14äº2014å¹´å‘å¸ƒï¼Œæ˜¯å¯¹C++11çš„ä¸€äº›å°æ”¹è¿›å’Œæ‰©å±•ã€‚</li><li>æ”¹è¿›äº†ç±»å‹æ¨å¯¼è§„åˆ™ï¼Œç®€åŒ–äº†ä»£ç ä¹¦å†™ã€‚</li><li>å¢åŠ äº†äºŒè¿›åˆ¶å­—é¢å€¼ã€é€šç”¨çš„lambdaæ•è·åˆå§‹åŒ–ã€è¿”å›ç±»å‹æ¨å¯¼ã€constexprå‡½æ•°çš„æ”¾å®½ç­‰æ–°ç‰¹æ€§ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::make_uniqueï¼ˆæ™ºèƒ½æŒ‡é’ˆçš„å¢å¼ºç‰ˆï¼‰ã€std::user-defined literalsï¼ˆè‡ªå®šä¹‰å­—é¢å€¼ï¼‰ç­‰ã€‚</li></ul></li><li><p>C++17ï¼š</p><ul><li>C++17äº2017å¹´å‘å¸ƒï¼Œå¼•å…¥äº†ä¸€äº›é‡è¦çš„æ–°åŠŸèƒ½ã€‚</li><li>å¢åŠ äº†ç»“æ„åŒ–ç»‘å®šï¼ˆstructured bindingsï¼‰ã€ifè¯­å¥ä¸­çš„åˆå§‹åŒ–ã€æŠ˜å è¡¨è¾¾å¼ï¼ˆfold expressionsï¼‰ç­‰è¯­è¨€ç‰¹æ€§ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::optionalï¼ˆå¯é€‰å€¼ï¼‰ã€std::variantï¼ˆå˜ä½“ç±»å‹ï¼‰ã€std::anyï¼ˆç±»å‹å®‰å…¨çš„ä»»æ„ç±»å‹å®¹å™¨ï¼‰ç­‰ã€‚</li></ul></li><li><p>C++20ï¼š</p><ul><li>C++20äº2020å¹´å‘å¸ƒï¼Œæ˜¯ä¸€ä¸ªè¾ƒå¤§çš„æ ‡å‡†æ›´æ–°ã€‚</li><li>å¼•å…¥äº†ä¸€äº›æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå¦‚æ¦‚å¿µï¼ˆConceptsï¼‰ã€åç¨‹ï¼ˆCoroutinesï¼‰ã€ä¸‰æ–¹è¿ç®—ç¬¦ï¼ˆThree-Way Comparisonï¼‰ç­‰ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::spanï¼ˆè·¨åº¦ç±»å‹ï¼‰ã€std::rangesï¼ˆèŒƒå›´åº“ï¼‰ã€std::formatï¼ˆæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰ç­‰ã€‚</li></ul></li></ol><p>æ¯ä¸ªC++æ ‡å‡†ç‰ˆæœ¬éƒ½å¸¦æ¥äº†æ–°çš„è¯­è¨€ç‰¹æ€§å’Œåº“æ‰©å±•ï¼Œä»¥æä¾›æ›´å¥½çš„ç¼–ç¨‹ä½“éªŒå’Œæ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚å¼€å‘è€…å¯ä»¥æ ¹æ®ç›®æ ‡å¹³å°å’Œ</p><h2 id="CMakeæ˜¯ä»€ä¹ˆ">CMakeæ˜¯ä»€ä¹ˆ</h2><p>CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºæ„å»ºå·¥å…·ï¼Œç”¨äºç®¡ç†è½¯ä»¶é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚å®ƒå¯ä»¥ç”Ÿæˆé€‚ç”¨äºä¸åŒç¼–è¯‘å™¨å’Œæ“ä½œç³»ç»Ÿçš„æ„å»ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚Makefileã€Visual Studioé¡¹ç›®æ–‡ä»¶ç­‰ï¼‰ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨ä¸åŒçš„å¹³å°ä¸Šæ–¹ä¾¿åœ°æ„å»ºå’Œç®¡ç†é¡¹ç›®ã€‚</p><p>CMakeçš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€åŒ–å’Œæ ‡å‡†åŒ–çš„æ„å»ºç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°è·¨å¹³å°å¼€å‘å’Œæ„å»ºè½¯ä»¶ã€‚å®ƒä½¿ç”¨ä¸€ç§å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™CMakeLists.txtæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†æ„å»ºé…ç½®å’Œè§„åˆ™ã€‚</p><p>CMakeå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li><p>è·¨å¹³å°æ”¯æŒï¼šCMakeå¯ä»¥åœ¨å„ç§æ“ä½œç³»ç»Ÿä¸Šå·¥ä½œï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxç­‰ï¼Œä»¥åŠå¤šç§ç¼–è¯‘å™¨å’Œæ„å»ºå·¥å…·ã€‚</p></li><li><p>ç®€åŒ–çš„è¯­æ³•ï¼šCMakeä½¿ç”¨ä¸€ç§ç®€åŒ–çš„å£°æ˜å¼è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–å†™CMakeLists.txtæ–‡ä»¶æ¥æè¿°é¡¹ç›®çš„æ„å»ºè§„åˆ™ï¼ŒåŒ…æ‹¬æºæ–‡ä»¶ã€ç¼–è¯‘é€‰é¡¹ã€é“¾æ¥åº“ç­‰ã€‚</p></li><li><p>è‡ªåŠ¨æ£€æµ‹ä¾èµ–ï¼šCMakeèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹é¡¹ç›®æ‰€ä¾èµ–çš„å¤–éƒ¨åº“å’Œç»„ä»¶ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ„å»ºé…ç½®ï¼Œä»¥ç¡®ä¿æ„å»ºè¿‡ç¨‹ä¸­çš„ä¾èµ–å…³ç³»å¾—åˆ°æ»¡è¶³ã€‚</p></li><li><p>å¤šç§æ„å»ºç³»ç»Ÿæ”¯æŒï¼šCMakeå¯ä»¥ç”Ÿæˆå„ç§å¸¸è§çš„æ„å»ºç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œå¦‚Makefileã€Ninjaã€Visual Studioé¡¹ç›®æ–‡ä»¶ç­‰ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥é€‰æ‹©ä»–ä»¬ç†Ÿæ‚‰çš„æ„å»ºå·¥å…·è¿›è¡Œé¡¹ç›®æ„å»ºã€‚</p></li><li><p>åµŒå¥—é¡¹ç›®æ”¯æŒï¼šCMakeæ”¯æŒç®¡ç†å’Œæ„å»ºå¤šä¸ªåµŒå¥—çš„å­é¡¹ç›®ï¼Œä½¿å¾—å¤§å‹é¡¹ç›®å¯ä»¥è¢«åˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—ï¼Œå¹¶æ–¹ä¾¿åœ°è¿›è¡Œç»„ç»‡å’Œæ„å»ºã€‚</p></li></ol><p>ä½¿ç”¨CMakeï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œç›®æ ‡å¹³å°ï¼Œç¼–å†™CMakeLists.txtæ–‡ä»¶æ¥å®šä¹‰é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚ç„¶åï¼Œé€šè¿‡è¿è¡ŒCMakeå‘½ä»¤æ¥ç”Ÿæˆé€‚åˆäºä¸åŒå¹³å°å’Œç¼–è¯‘å™¨çš„æ„å»ºé…ç½®æ–‡ä»¶ï¼Œæœ€åä½¿ç”¨ç›¸åº”çš„æ„å»ºå·¥å…·è¿›è¡Œé¡¹ç›®æ„å»ºã€‚</p><p>æ€»ç»“èµ·æ¥ï¼ŒCMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºæ„å»ºå·¥å…·ï¼Œç”¨äºç®¡ç†è½¯ä»¶é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€åŒ–å’Œæ ‡å‡†åŒ–çš„æ„å»ºç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°è·¨å¹³å°å¼€å‘å’Œæ„å»ºè½¯ä»¶ã€‚</p><h2 id="å¤´æ–‡ä»¶æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤">å¤´æ–‡ä»¶æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span></span><br><span class="line">ä»€ä¹ˆæ„æ€</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯C++ä¸­çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ§åˆ¶å¤´æ–‡ä»¶çš„åŒ…å«ã€‚ä¸‹é¢è§£é‡Šæ¯ä¸€è¡Œçš„å«ä¹‰ï¼š</p><ol><li><p><code>#ifndef EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤çš„å¼€å§‹éƒ¨åˆ†ã€‚<code>#ifndef</code>è¡¨ç¤º&quot;if not defined&quot;ï¼Œå³å¦‚æœ<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>æœªå®šä¹‰ï¼Œæ‰§è¡Œåç»­æ“ä½œã€‚</p></li><li><p><code>#define EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯å®å®šä¹‰æŒ‡ä»¤ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªåä¸º<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>çš„å®ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºéé›¶å€¼ã€‚è¿™ä¸ªå®çš„ä½œç”¨æ˜¯ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼Œåç»­å¯ä»¥æ ¹æ®è¿™ä¸ªå®æ˜¯å¦è¢«å®šä¹‰æ¥æ‰§è¡Œä¸åŒçš„ä»£ç ã€‚</p></li><li><p><code>#endif //EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤çš„ç»“æŸéƒ¨åˆ†ã€‚<code>#endif</code>è¡¨ç¤ºç»“æŸæ¡ä»¶ç¼–è¯‘å—ï¼Œæ­¤å¤„æ˜¯ä¸<code>#ifndef</code>å¯¹åº”çš„ç»“æŸã€‚<code>//EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>æ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œç”¨äºæä¾›å¯¹<code>#ifndef</code>çš„æ ‡è¯†è¯´æ˜ã€‚</p></li></ol><p>æ•´ä¸ªä»£ç çš„ä½œç”¨æ˜¯ï¼Œå½“<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>å®æœªå®šä¹‰æ—¶ï¼Œæ‰§è¡Œåç»­çš„ä»£ç ï¼Œå³å°†å¤´æ–‡ä»¶çš„å†…å®¹åŒ…å«åœ¨æ¡ä»¶ç¼–è¯‘å—ä¸­ã€‚è¿™æ ·å¯ä»¥é¿å…é‡å¤åŒ…å«å¤´æ–‡ä»¶ï¼Œé˜²æ­¢å¤šé‡å®šä¹‰é”™è¯¯ã€‚</p><p>å¸¸è§çš„åšæ³•æ˜¯å°†è¿™æ ·çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æ”¾åœ¨å¤´æ–‡ä»¶çš„å¼€å¤´å’Œç»“å°¾ï¼Œä»¥ç¡®ä¿å¤´æ–‡ä»¶åªè¢«ç¼–è¯‘ä¸€æ¬¡ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­åŒ…å«åŒä¸€ä¸ªå¤´æ–‡ä»¶æ—¶å‡ºç°é‡å¤å®šä¹‰çš„é—®é¢˜ã€‚</p><h2 id="Clang-Tidy-Function-â€˜getIdâ€™-should-be-marked-nodiscard">Clang-Tidy: Function â€˜getIdâ€™ should be marked [[nodiscard]]</h2><p>è¿™ä¸ªæç¤ºæ¥è‡ªäºClang-Tidyï¼Œå®ƒå»ºè®®åœ¨å‡½æ•°<code>getId</code>ä¸Šæ·»åŠ <code>[[nodiscard]]</code>å±æ€§ã€‚</p><p><code>[[nodiscard]]</code>æ˜¯C++17å¼•å…¥çš„ä¸€ç§å±æ€§ï¼Œç”¨äºæŒ‡ç¤ºå‡½æ•°çš„è¿”å›å€¼åº”è¯¥è¢«ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è¢«å¿½ç•¥ã€‚å½“å‡½æ•°è¢«æ ‡è®°ä¸º<code>[[nodiscard]]</code>æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å‡½æ•°è¿”å›å€¼æ²¡æœ‰è¢«ä½¿ç”¨æ—¶äº§ç”Ÿè­¦å‘Šã€‚</p><p>åœ¨ä½ çš„æƒ…å†µä¸‹ï¼ŒClang-Tidyå»ºè®®åœ¨<code>getId</code>å‡½æ•°ä¸Šæ·»åŠ <code>[[nodiscard]]</code>å±æ€§ï¼Œè¿™æ„å‘³ç€è°ƒç”¨è¯¥å‡½æ•°ååº”è¯¥ä½¿ç”¨å…¶è¿”å›å€¼ã€‚å¦‚æœå¿½ç•¥äº†è¯¥è¿”å›å€¼ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼Œæé†’å¼€å‘è€…æ£€æŸ¥å’Œå¤„ç†å‡½æ•°çš„è¿”å›å€¼ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªè­¦å‘Šï¼Œä½ å¯ä»¥æŒ‰ç…§å»ºè®®åœ¨<code>getId</code>å‡½æ•°å£°æ˜æˆ–å®šä¹‰çš„åœ°æ–¹æ·»åŠ <code>[[nodiscard]]</code>å±æ€§ï¼Œä»¥æ˜ç¡®è¡¨ç¤ºè¯¥å‡½æ•°çš„è¿”å›å€¼åº”è¯¥è¢«ä½¿ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[nodiscard]] <span class="function"><span class="type">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123; ... &#125;  <span class="comment">// å‡½æ•°å£°æ˜æˆ–å®šä¹‰å¤„æ·»åŠ [[nodiscard]]å±æ€§</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡éµå¾ªè¿™ä¸ªæç¤ºï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¥å£®æ€§ï¼Œé˜²æ­¢å› ä¸ºæœªä½¿ç”¨å‡½æ•°è¿”å›å€¼è€Œå¯¼è‡´çš„æ½œåœ¨é”™è¯¯ã€‚</p><h2 id="Clang-Tidyæ˜¯ä»€ä¹ˆ">Clang-Tidyæ˜¯ä»€ä¹ˆ</h2><p>Clang-Tidyæ˜¯ä¸€ä¸ªé™æ€ä»£ç åˆ†æå·¥å…·ï¼Œç”¨äºæ£€æŸ¥å’Œæ”¹è¿›C++ä»£ç çš„è´¨é‡ã€‚å®ƒæ˜¯åŸºäºLLVM/Clangé¡¹ç›®å¼€å‘çš„ï¼Œå¯ä»¥é€šè¿‡å¯¹C++ä»£ç è¿›è¡Œé™æ€åˆ†æå’Œè§„åˆ™æ£€æŸ¥ï¼Œæä¾›æœ‰å…³ä»£ç æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›å»ºè®®çš„è­¦å‘Šå’Œå»ºè®®ã€‚</p><p>Clang-Tidyä½¿ç”¨Clangç¼–è¯‘å™¨çš„è¯æ³•å’Œè¯­æ³•åˆ†æåŠŸèƒ½ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œä»¥è¯†åˆ«æ½œåœ¨çš„é”™è¯¯ã€ä½æ•ˆçš„ä»£ç ã€ä¸è§„èŒƒçš„ç¼–ç é£æ ¼ä»¥åŠå…¶ä»–å¯èƒ½å½±å“ä»£ç è´¨é‡å’Œæ€§èƒ½çš„é—®é¢˜ã€‚å®ƒåŸºäºä¸€ç»„é¢„å®šä¹‰çš„è§„åˆ™ï¼ˆæ£€æŸ¥å™¨ï¼‰æ‰§è¡Œé™æ€ä»£ç åˆ†æï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„è­¦å‘Šå’Œå»ºè®®ã€‚</p><p>Clang-Tidyçš„ä¸€äº›ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>ä¸°å¯Œçš„æ£€æŸ¥å™¨é›†åˆï¼šClang-Tidyæä¾›äº†å¤šä¸ªå†…ç½®çš„æ£€æŸ¥å™¨ï¼Œè¦†ç›–äº†å„ç§ä»£ç é—®é¢˜ï¼Œå¦‚æ½œåœ¨çš„é”™è¯¯ã€ä»£ç é£æ ¼è¿è§„ã€æ€§èƒ½é—®é¢˜ç­‰ã€‚æ¯ä¸ªæ£€æŸ¥å™¨éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è§„åˆ™é›†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¯ç”¨æˆ–ç¦ç”¨ã€‚</p></li><li><p>å¯é…ç½®æ€§ï¼šClang-Tidyå…è®¸ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤è¡Œé€‰é¡¹è‡ªå®šä¹‰æ£€æŸ¥å™¨çš„è¡Œä¸ºã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„æ£€æŸ¥å™¨ã€è°ƒæ•´è­¦å‘Šçº§åˆ«ï¼Œå¹¶æä¾›è‡ªå®šä¹‰è§„åˆ™å’Œæ‰©å±•ã€‚</p></li><li><p>é›†æˆåˆ°æ„å»ºç³»ç»Ÿï¼šClang-Tidyå¯ä»¥ä¸å¸¸è§çš„æ„å»ºç³»ç»Ÿï¼ˆå¦‚CMakeå’ŒMakeï¼‰é›†æˆï¼Œé€šè¿‡æ„å»ºå·¥å…·è‡ªåŠ¨æ‰§è¡Œé™æ€åˆ†æï¼Œå¹¶å°†è­¦å‘Šå’Œå»ºè®®é›†æˆåˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚</p></li><li><p>è‡ªåŠ¨ä¿®å¤ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒClang-Tidyå¯ä»¥è‡ªåŠ¨ä¿®å¤ä¸€äº›å¸¸è§çš„ä»£ç é—®é¢˜ï¼Œå¦‚ä¿®å¤ä¸è§„èŒƒçš„ä»£ç é£æ ¼æˆ–æ½œåœ¨çš„é”™è¯¯ã€‚è¿™å‡å°‘äº†æ‰‹åŠ¨ä¿®å¤çš„å·¥ä½œé‡ï¼Œå¹¶æé«˜äº†ä»£ç çš„ä¸€è‡´æ€§ã€‚</p></li></ol><p>é€šè¿‡ä½¿ç”¨Clang-Tidyï¼Œå¼€å‘è€…å¯ä»¥æ›´æ—©åœ°å‘ç°å’Œçº æ­£æ½œåœ¨çš„ä»£ç é—®é¢˜ï¼Œæ”¹è¿›ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œå¹¶éµå¾ªè‰¯å¥½çš„ç¼–ç å®è·µã€‚å®ƒå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½œä¸ºä¸€ç§è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´é«˜è´¨é‡ã€æ›´å¥å£®çš„C++ä»£ç ã€‚</p><h2 id="C-ä¸­åŸŸæ˜¯ä»€ä¹ˆ">C++ä¸­åŸŸæ˜¯ä»€ä¹ˆ</h2><p>åœ¨C++ä¸­ï¼ŒåŸŸï¼ˆScopeï¼‰æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰å’Œè®¿é—®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸçš„èŒƒå›´ã€‚æ¯ä¸ªæ ‡è¯†ç¬¦éƒ½å­˜åœ¨äºç‰¹å®šçš„åŸŸä¸­ï¼Œå¹¶ä¸”åªèƒ½åœ¨å…¶æ‰€å±çš„åŸŸä¸­è¢«è®¿é—®å’Œä½¿ç”¨ã€‚</p><p>C++ä¸­æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹çš„åŸŸï¼š</p><ol><li><p>å…¨å±€åŸŸï¼ˆGlobal Scopeï¼‰ï¼š</p><ul><li>å…¨å±€åŸŸæ˜¯æ•´ä¸ªç¨‹åºçš„æœ€å¤–å±‚åŸŸï¼Œå…¶ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦åœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½å¯è§ã€‚</li><li>å…¨å±€åŸŸä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚</li></ul></li><li><p>å‘½åç©ºé—´åŸŸï¼ˆNamespace Scopeï¼‰ï¼š</p><ul><li>å‘½åç©ºé—´æ˜¯ä¸€ç§ç”¨äºç»„ç»‡æ ‡è¯†ç¬¦çš„æœºåˆ¶ï¼Œåœ¨C++ä¸­å¯ä»¥é€šè¿‡<code>namespace</code>å…³é”®å­—å®šä¹‰ã€‚</li><li>åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦åªåœ¨è¯¥å‘½åç©ºé—´ä¸­å¯è§ï¼Œéœ€è¦ä½¿ç”¨å‘½åç©ºé—´é™å®šç¬¦æ‰èƒ½è®¿é—®ã€‚</li></ul></li><li><p>ç±»åŸŸï¼ˆClass Scopeï¼‰ï¼š</p><ul><li>ç±»åŸŸæ˜¯æŒ‡ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åªèƒ½åœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡æˆå‘˜è®¿é—®æ“ä½œç¬¦ï¼ˆ<code>.</code>æˆ–<code>-&gt;</code>ï¼‰æ¥è®¿é—®ã€‚</li></ul></li><li><p>å±€éƒ¨åŸŸï¼ˆLocal Scopeï¼‰ï¼š</p><ul><li>å±€éƒ¨åŸŸæ˜¯æŒ‡åœ¨å‡½æ•°ã€ä»£ç å—æˆ–å¾ªç¯ç»“æ„ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨å±€éƒ¨åŸŸä¸­å®šä¹‰çš„å˜é‡åªåœ¨å…¶æ‰€å±çš„ä»£ç å—æˆ–å‡½æ•°å†…éƒ¨å¯è§ï¼Œè¶…å‡ºè¯¥èŒƒå›´åå°†ä¸å†å¯è®¿é—®ã€‚</li></ul></li><li><p>è¯­å¥åŸŸï¼ˆStatement Scopeï¼‰ï¼š</p><ul><li>è¯­å¥åŸŸæ˜¯æŒ‡åœ¨è¯­å¥ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨è¯­å¥ä¸­å®šä¹‰çš„å˜é‡åªåœ¨è¯¥è¯­å¥ä¸­å¯è§ï¼Œè¶…å‡ºè¯¥è¯­å¥åå°†ä¸å†å¯è®¿é—®ã€‚</li></ul></li></ol><p>æ¯ä¸ªåŸŸéƒ½æœ‰å…¶ç‰¹å®šçš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚æ ‡è¯†ç¬¦çš„å¯è§æ€§å†³å®šäº†å®ƒåœ¨ç¨‹åºçš„å“ªäº›ä½ç½®å¯ä»¥è¢«è®¿é—®ï¼Œè€Œç”Ÿå‘½å‘¨æœŸåˆ™æŒ‡å®šäº†æ ‡è¯†ç¬¦åœ¨å†…å­˜ä¸­å­˜åœ¨çš„æ—¶é—´èŒƒå›´ã€‚ç†è§£å’Œæ­£ç¡®ä½¿ç”¨åŸŸæ˜¯ç¼–å†™æ­£ç¡®å’Œå¯ç»´æŠ¤çš„C++ç¨‹åºçš„é‡è¦æ–¹é¢ã€‚</p><h2 id="å¸¸è§ç¼–è¯‘å™¨">å¸¸è§ç¼–è¯‘å™¨</h2><p>C++æœ‰å¤šä¸ªå¸¸ç”¨çš„ç¼–è¯‘å™¨å¯ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p>GCCï¼ˆGNU Compiler Collectionï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–è¯‘å™¨å¥—ä»¶ï¼ŒåŒ…å«äº†C++ç¼–è¯‘å™¨ï¼ˆg++ï¼‰ã€‚å®ƒæ˜¯è®¸å¤šLinuxå‘è¡Œç‰ˆçš„é»˜è®¤ç¼–è¯‘å™¨ï¼Œå¹¶ä¸”å¯åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚</p></li><li><p>Clangï¼šClangæ˜¯LLVMé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–è¯‘å™¨å¥—ä»¶ã€‚å®ƒæä¾›äº†é«˜æ€§èƒ½å’Œé«˜åº¦å¯é…ç½®çš„C++ç¼–è¯‘å™¨ã€‚Clangä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå¯æ›¿ä»£çš„ç¼–è¯‘å™¨é€‰æ‹©ã€‚</p></li><li><p>Microsoft Visual C++ï¼šè¿™æ˜¯Windowså¹³å°ä¸Šçš„å®˜æ–¹C++ç¼–è¯‘å™¨ã€‚å®ƒæ˜¯Microsoft Visual Studioé›†æˆå¼€å‘ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸°å¯Œçš„å·¥å…·å’ŒåŠŸèƒ½ã€‚</p></li><li><p>Intel C++ Compilerï¼šè¿™æ˜¯Intelæä¾›çš„é’ˆå¯¹è‹±ç‰¹å°”ä½“ç³»ç»“æ„çš„C++ç¼–è¯‘å™¨ã€‚å®ƒä¸“æ³¨äºä¼˜åŒ–æ€§èƒ½ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ç”Ÿæˆæ›´é«˜æ•ˆçš„ä»£ç ã€‚</p></li><li><p>Clang-CLï¼šè¿™æ˜¯åŸºäºClangçš„å¾®è½¯å¼€å‘çš„ä¸€ç§ç¼–è¯‘å™¨ï¼Œå…¼å®¹äºWindowså¹³å°ï¼Œæ”¯æŒMicrosoft Visual Studioå¼€å‘ç¯å¢ƒã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„C++ç¼–è¯‘å™¨ï¼Œæ¯ä¸ªç¼–è¯‘å™¨éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œä¼˜åŠ¿ã€‚é€‰æ‹©ç¼–è¯‘å™¨æ—¶ï¼Œå¯ä»¥æ ¹æ®ç‰¹å®šçš„éœ€æ±‚ã€å¹³å°å’Œä¸ªäººåå¥½åšå‡ºå†³ç­–ã€‚</p><h2 id="MinGW">MinGW</h2><p>MinGWï¼ˆMinimalist GNU for Windowsï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œæ—¨åœ¨ä¸ºWindowså¹³å°æä¾›GNUå·¥å…·é›†å’Œå¼€å‘ç¯å¢ƒã€‚å®ƒåŸºäºGCCï¼ˆGNU Compiler Collectionï¼‰å’Œbinutilsï¼Œå¹¶åŒ…æ‹¬äº†ä¸€ç³»åˆ—çš„å·¥å…·ï¼Œå¦‚C/C++ç¼–è¯‘å™¨ã€é“¾æ¥å™¨ã€è°ƒè¯•å™¨ç­‰ã€‚</p><p>MinGWçš„ç›®æ ‡æ˜¯åœ¨Windowsä¸Šæä¾›ä¸€ä¸ªè½»é‡çº§çš„å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç±»Unixçš„å·¥å…·å’Œå‘½ä»¤æ¥ç¼–è¯‘ã€é“¾æ¥å’Œè°ƒè¯•ä»–ä»¬çš„ä»£ç ã€‚å®ƒä½¿ç”¨GNUå·¥å…·é“¾ï¼Œå› æ­¤èƒ½å¤Ÿæä¾›å¹¿æ³›çš„å¼€å‘åŠŸèƒ½å’Œç‰¹æ€§ã€‚</p><p>MinGWçš„ä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å®ƒå…è®¸å¼€å‘äººå‘˜åœ¨Windowsä¸Šä½¿ç”¨å¸¸è§çš„Unixå·¥å…·å’Œåº“ï¼Œè€Œæ— éœ€ä¾èµ–äºWindowsç‰¹å®šçš„APIå’Œå·¥å…·ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å°†ä»–ä»¬çš„ä»£ç ä»Unix/Linuxå¹³å°ç§»æ¤åˆ°Windowså¹³å°ã€‚</p><p>å¦ä¸€ä¸ªé‡è¦çš„ç‰¹ç‚¹æ˜¯MinGWæä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„æ›¿ä»£å“ï¼Œç›¸å¯¹äºä½¿ç”¨å®Œæ•´çš„Visual Studioå¼€å‘ç¯å¢ƒï¼Œå®ƒå¯ä»¥æ›´å¿«åœ°è¿›è¡Œç¼–è¯‘å’Œæ„å»ºã€‚è¿™ä½¿å¾—MinGWæˆä¸ºä¸€ç§æµè¡Œçš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦å¿«é€ŸåŸå‹è®¾è®¡å’Œå°å‹é¡¹ç›®å¼€å‘çš„å¼€å‘äººå‘˜ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒMinGWæ˜¯ä¸€ä¸ªæä¾›GNUå·¥å…·é›†å’Œå¼€å‘ç¯å¢ƒçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºåœ¨Windowså¹³å°ä¸Šè¿›è¡ŒC/C++å¼€å‘ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§åœ¨Windowsä¸Šä½¿ç”¨Unixå·¥å…·å’Œåº“çš„ç®€ä¾¿æ–¹å¼ï¼Œä»¥åŠæ›´å¿«çš„ç¼–è¯‘å’Œæ„å»ºé€Ÿåº¦ã€‚</p><h2 id="GNU">GNU</h2><p>GNUæ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶è¿åŠ¨çš„é¡¹ç›®ï¼Œç›®æ ‡æ˜¯ä¸ºç”¨æˆ·æä¾›è‡ªç”±çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‚GNUé¡¹ç›®çš„å…¨ç§°æ˜¯â€œGNUâ€™s Not Unixâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’ç¼©å†™ï¼Œæ„æ€æ˜¯â€œGNUä¸æ˜¯Unixâ€ã€‚å®ƒçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªç±»Unixçš„æ“ä½œç³»ç»Ÿï¼Œä½†ä¸ä¾èµ–äºUnixçš„ä»£ç ã€‚</p><p>GNUé¡¹ç›®å§‹äº1983å¹´ï¼Œç”±ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼ï¼ˆRichard Stallmanï¼‰å‘èµ·ã€‚æ–¯æ‰˜æ›¼æ„è¯†åˆ°è®¸å¤šè®¡ç®—æœºç”¨æˆ·é¢ä¸´ç§æœ‰è½¯ä»¶çš„é™åˆ¶ï¼Œæ— æ³•æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ†äº«è½¯ä»¶çš„æºä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å‘èµ·äº†GNUé¡¹ç›®ï¼Œæ—¨åœ¨å¼€å‘ä¸€ä¸ªå®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚</p><p>GNUé¡¹ç›®åŒ…æ‹¬äº†è®¸å¤šå…³é”®çš„ç»„ä»¶ï¼Œå¦‚GNUç¼–è¯‘å™¨é›†åˆï¼ˆGCCï¼‰ã€GNUè°ƒè¯•å™¨ï¼ˆGDBï¼‰ã€GNU Bash shellã€GNUæ ¸å¿ƒå·¥å…·é›†ï¼ˆCoreutilsï¼‰ç­‰ã€‚è¿™äº›ç»„ä»¶å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„è‡ªç”±è½¯ä»¶å †æ ˆï¼Œå¯ç”¨äºæ„å»ºè‡ªç”±æ“ä½œç³»ç»Ÿã€‚</p><p>ç„¶è€Œï¼ŒGNUé¡¹ç›®ä¸­å”¯ä¸€å°šæœªå®Œæˆçš„éƒ¨åˆ†æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä¸ºäº†å¡«è¡¥è¿™ä¸ªç©ºç™½ï¼ŒGNUé¡¹ç›®ä¸Linuxå†…æ ¸ç›¸ç»“åˆï¼Œå½¢æˆäº†ä»Šå¤©è¢«å¹¿æ³›ä½¿ç”¨çš„GNU/Linuxæ“ä½œç³»ç»Ÿã€‚GNU/Linuxæ“ä½œç³»ç»Ÿçš„åŸºç¡€æ˜¯Linuxå†…æ ¸ï¼Œä½†å®ƒåŒ…å«äº†è®¸å¤šGNUé¡¹ç›®çš„ç»„ä»¶ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨è‡ªç”±è½¯ä»¶æ„å»ºå’Œå®šåˆ¶ä»–ä»¬çš„ç³»ç»Ÿã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒGNUæ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶è¿åŠ¨çš„é¡¹ç›®ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›è‡ªç”±çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‚å®ƒçš„ç»„ä»¶æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„è‡ªç”±è½¯ä»¶å †æ ˆï¼Œå¹¶ä¸Linuxå†…æ ¸ç»“åˆå½¢æˆäº†GNU/Linuxæ“ä½œç³»ç»Ÿã€‚GNUé¡¹ç›®å¼ºè°ƒç”¨æˆ·è‡ªç”±ã€å¼€æ”¾æºä»£ç å’Œå…±äº«ï¼Œå¯¹äºè‡ªç”±è½¯ä»¶çš„å‘å±•å’Œæ¨å¹¿åšå‡ºäº†é‡è¦è´¡çŒ®ã€‚</p><h2 id="OpenGL">OpenGL</h2><p>OpenGLï¼ˆOpen Graphics Libraryï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ¸²æŸ“2Då’Œ3Då›¾å½¢çš„è·¨å¹³å°ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œç”±Khronos Groupç»´æŠ¤å’Œæ¨è¿›ã€‚OpenGLæä¾›äº†ä¸€ç³»åˆ—çš„å‡½æ•°ï¼Œç”¨äºæ“ä½œå›¾å½¢ç¡¬ä»¶å’Œæ‰§è¡Œå›¾å½¢è®¡ç®—ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºé«˜æ€§èƒ½çš„å›¾å½¢åº”ç”¨ç¨‹åºã€‚</p><p>OpenGLå¯ä»¥ç”¨äºå„ç§å¹³å°ï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxä»¥åŠç§»åŠ¨å¹³å°å¦‚Androidå’ŒiOSã€‚å®ƒä¸ç¡¬ä»¶æ— å…³ï¼Œèƒ½å¤Ÿåˆ©ç”¨å›¾å½¢åŠ é€Ÿç¡¬ä»¶ï¼ˆå¦‚å›¾å½¢å¤„ç†å™¨ï¼‰æ¥å®ç°å¿«é€Ÿè€Œé€¼çœŸçš„å›¾å½¢æ¸²æŸ“ã€‚</p><p>OpenGLæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å’Œæ“ä½œï¼ŒåŒ…æ‹¬å‡ ä½•å›¾å…ƒç»˜åˆ¶ã€çº¹ç†æ˜ å°„ã€å…‰ç…§ã€æ·±åº¦æµ‹è¯•ã€ç€è‰²å™¨ç¼–ç¨‹ç­‰ã€‚å®ƒä½¿ç”¨ä¸€ç§çŠ¶æ€æœºæ¨¡å‹ï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„çŠ¶æ€æ¥å®šä¹‰ç»˜å›¾æ“ä½œå’Œæ¸²æŸ“æ•ˆæœã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨OpenGLæ¥åˆ›å»ºå„ç§ç±»å‹çš„å›¾å½¢åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¸¸æˆã€å¯è§†åŒ–å·¥å…·ã€æ¨¡æ‹Ÿå™¨ã€CADè½¯ä»¶ç­‰ã€‚</p><p>OpenGLçš„ä¸»è¦ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>è·¨å¹³å°ï¼šOpenGLå¯åœ¨å¤šä¸ªå¹³å°ä¸Šä½¿ç”¨ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™ä¸€æ¬¡ä»£ç å¹¶åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šè¿è¡Œã€‚</p></li><li><p>é«˜æ€§èƒ½ï¼šOpenGLèƒ½å¤Ÿåˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿæ¥å®ç°é«˜æ•ˆçš„å›¾å½¢æ¸²æŸ“ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p></li><li><p>å¯æ‰©å±•æ€§ï¼šOpenGLæ”¯æŒæ‰©å±•ï¼Œå¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨é¢å¤–çš„åŠŸèƒ½å’Œç‰¹æ€§æ¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚</p></li><li><p>å¼€æ”¾æ ‡å‡†ï¼šOpenGLæ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ ‡å‡†ï¼Œå„ä¸ªç¡¬ä»¶å’Œè½¯ä»¶ä¾›åº”å•†å¯ä»¥å®ç°å’Œæ”¯æŒå®ƒï¼Œç¡®ä¿äº†å¹¿æ³›çš„å…¼å®¹æ€§å’Œå¯ç§»æ¤æ€§ã€‚</p></li></ol><p>æ€»è€Œè¨€ä¹‹ï¼ŒOpenGLæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å›¾å½¢æ¸²æŸ“APIï¼Œç”¨äºåˆ›å»ºé«˜æ€§èƒ½çš„2Då’Œ3Då›¾å½¢åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œæ“ä½œï¼Œå¯ç”¨äºç»˜åˆ¶å‡ ä½•å›¾å…ƒã€åº”ç”¨çº¹ç†ã€æ‰§è¡Œå…‰ç…§å’Œç€è‰²å™¨ç¼–ç¨‹ç­‰ã€‚é€šè¿‡åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ŒOpenGLèƒ½å¤Ÿå®ç°å¿«é€Ÿè€Œé€¼çœŸçš„å›¾å½¢æ¸²æŸ“ï¼Œå¹¿æ³›åº”ç”¨äºæ¸¸æˆå¼€å‘ã€å¯è§†åŒ–å·¥å…·ã€CADè½¯ä»¶ç­‰é¢†åŸŸã€‚</p><h2 id="Iceberg">Iceberg</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œâ€œIcebergâ€ï¼ˆå†°å±±ï¼‰æŠ€æœ¯é€šå¸¸æŒ‡çš„æ˜¯ä¸€ç§æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ä¸­çš„ç¨€ç–æ•°æ®ã€‚</p><p>IcebergæŠ€æœ¯çš„ç›®æ ‡æ˜¯æé«˜å¤„ç†å¤§å‹æ•°æ®é›†ä¸­ç¨€ç–æ•°æ®çš„æ•ˆç‡ã€‚åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œæ•°æ®é›†ä¸­åªæœ‰å°‘éƒ¨åˆ†æ•°æ®æ˜¯é¢‘ç¹è®¿é—®çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ•°æ®åˆ™å¾ˆå°‘è¢«ä½¿ç”¨ã€‚ä¼ ç»Ÿçš„æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢æ–¹æ³•ä¼šå¯¹æ•´ä¸ªæ•°æ®é›†è¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬é‚£äº›å¾ˆå°‘è¢«ä½¿ç”¨çš„æ•°æ®ï¼Œä»è€Œæµªè´¹äº†è®¡ç®—èµ„æºå’Œå­˜å‚¨ç©ºé—´ã€‚</p><p>IcebergæŠ€æœ¯é€šè¿‡å°†æ•°æ®åˆ†æˆçƒ­æ•°æ®ï¼ˆé¢‘ç¹è®¿é—®çš„æ•°æ®ï¼‰å’Œå†·æ•°æ®ï¼ˆå¾ˆå°‘è®¿é—®çš„æ•°æ®ï¼‰ä¸¤ä¸ªéƒ¨åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚çƒ­æ•°æ®é€šå¸¸è¢«ä¿ç•™åœ¨é«˜æ€§èƒ½çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œè€Œå†·æ•°æ®åˆ™è¢«ç§»åŠ¨åˆ°ä½æˆæœ¬çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œå¦‚åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæˆ–å¯¹è±¡å­˜å‚¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰çƒ­æ•°æ®éœ€è¦é¢‘ç¹è®¿é—®ï¼Œè€Œå†·æ•°æ®å¯ä»¥ä»¥æ›´ä½çš„æˆæœ¬å­˜å‚¨å’Œç®¡ç†ã€‚</p><p>IcebergæŠ€æœ¯è¿˜å¯ä»¥é’ˆå¯¹çƒ­æ•°æ®åº”ç”¨å„ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¾‹å¦‚æ•°æ®å‹ç¼©ã€ç´¢å¼•å’Œåˆ†åŒºï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†æ•°æ®ç‰ˆæœ¬æ§åˆ¶å’Œäº‹åŠ¡æ”¯æŒï¼Œä½¿å¾—æ•°æ®çš„æ›´æ–°å’Œå˜æ›´èƒ½å¤Ÿè¢«æœ‰æ•ˆåœ°ç®¡ç†å’Œè¿½è¸ªã€‚</p><p>IcebergæŠ€æœ¯åœ¨å¤§æ•°æ®å¤„ç†é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®æ¹–å’Œæ•°æ®ä»“åº“çš„æ„å»ºå’Œç®¡ç†ä¸­ã€‚å®ƒæä¾›äº†ä¸€ç§çµæ´»è€Œé«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†å’ŒæŸ¥è¯¢å¤§è§„æ¨¡æ•°æ®é›†ï¼ŒåŒæ—¶å‡å°‘äº†å­˜å‚¨æˆæœ¬å’ŒæŸ¥è¯¢æ—¶é—´ã€‚</p><h2 id="HDFS">HDFS</h2><p>HDFSï¼ˆHadoop Distributed File Systemï¼‰æ˜¯Apache Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€é¡¹å…³é”®æŠ€æœ¯ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>HDFSçš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸Šæä¾›é«˜å®¹é”™æ€§ã€é«˜ååé‡å’Œå¯ä¼¸ç¼©æ€§çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚å®ƒåŸºäºä¸»ä»æ¶æ„ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆNameNodeï¼‰å’Œå¤šä¸ªä»èŠ‚ç‚¹ï¼ˆDataNodeï¼‰ç»„æˆã€‚HDFSå°†æ•°æ®åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„æ•°æ®å—ï¼Œå¹¶å°†è¿™äº›æ•°æ®å—å­˜å‚¨åœ¨ä»èŠ‚ç‚¹ä¸Šã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶çš„åç§°ã€ä½ç½®å’Œæƒé™ç­‰ã€‚</p><p>HDFSçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>åˆ†å¸ƒå¼å­˜å‚¨ï¼šæ•°æ®è¢«åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ªä»èŠ‚ç‚¹ä¸Šï¼Œå¯ä»¥æ¨ªå‘æ‰©å±•ä»¥é€‚åº”å¤§è§„æ¨¡æ•°æ®é›†çš„å­˜å‚¨éœ€æ±‚ã€‚</p></li><li><p>å†—ä½™å¤‡ä»½ï¼šHDFSä¼šå°†æ•°æ®å—å¤åˆ¶åˆ°å¤šä¸ªä»èŠ‚ç‚¹ä¸Šï¼Œä»¥æä¾›æ•°æ®çš„å†—ä½™å¤‡ä»½å’Œå®¹é”™æ€§ã€‚é€šå¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ•°æ®å—ä¼šæœ‰ä¸‰ä¸ªå‰¯æœ¬å­˜å‚¨åœ¨ä¸åŒçš„ä»èŠ‚ç‚¹ä¸Šã€‚</p></li><li><p>é«˜å®¹é”™æ€§ï¼šå½“ä»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæˆ–æ•°æ®æŸåæ—¶ï¼ŒHDFSèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤æ•°æ®ï¼Œç¡®ä¿æ•°æ®çš„å¯é æ€§ã€‚</p></li><li><p>é€‚åˆå¤§æ•°æ®å¤„ç†ï¼šHDFSçš„è®¾è®¡ä½¿å…¶é€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„å·¥ä½œè´Ÿè½½ã€‚å®ƒé€šè¿‡æ•°æ®æœ¬åœ°æ€§å’Œå¹¶è¡Œè®¡ç®—æ¥æé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡ã€‚</p></li></ol><p>HDFSè¢«å¹¿æ³›åº”ç”¨äºå¤§æ•°æ®å¤„ç†å’Œåˆ†æé¢†åŸŸã€‚å®ƒä¸ºè®¸å¤šåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼ˆå¦‚MapReduceï¼‰æä¾›äº†æ•°æ®å­˜å‚¨å’Œè®¿é—®çš„åŸºç¡€ï¼Œå¹¶æ”¯æŒå¯¹å¤§è§„æ¨¡æ•°æ®é›†çš„é«˜æ•ˆå¤„ç†å’Œåˆ†æã€‚</p><h2 id="Opencv">Opencv</h2><p>OpenCVï¼ˆOpen Source Computer Visionï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è®¡ç®—æœºè§†è§‰åº“ï¼Œæ—¨åœ¨æä¾›ä¸€ç³»åˆ—ç”¨äºå›¾åƒå¤„ç†ã€è®¡ç®—æœºè§†è§‰å’Œæœºå™¨å­¦ä¹ çš„å‡½æ•°å’Œå·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„åº“ï¼Œå¯ç”¨äºå¼€å‘å„ç§è§†è§‰åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å›¾åƒå’Œè§†é¢‘å¤„ç†ã€ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªã€äººè„¸è¯†åˆ«ã€æœºå™¨å­¦ä¹ ç­‰ã€‚</p><p>OpenCVæœ€åˆç”±è‹±ç‰¹å°”å…¬å¸äº1999å¹´å‘èµ·ï¼Œåæ¥æˆä¸ºä¸€ä¸ªè·¨å¹³å°çš„å¼€æºé¡¹ç›®ã€‚å®ƒä½¿ç”¨C++è¯­è¨€ç¼–å†™ï¼Œä½†ä¹Ÿæä¾›äº†è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ¥å£ï¼ŒåŒ…æ‹¬Pythonã€Javaå’ŒMATLABç­‰ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥æ–¹ä¾¿åœ°åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨OpenCVã€‚</p><p>OpenCVæä¾›äº†å¤§é‡çš„å‡½æ•°å’Œç®—æ³•ï¼Œç”¨äºå¤„ç†å›¾åƒå’Œè§†é¢‘æ•°æ®ã€‚å®ƒæ”¯æŒåŸºæœ¬çš„å›¾åƒæ“ä½œï¼ˆå¦‚è£å‰ªã€è°ƒæ•´å¤§å°ã€æ»¤æ³¢ç­‰ï¼‰ã€ç‰¹å¾æå–å’Œæè¿°ï¼ˆå¦‚è¾¹ç¼˜æ£€æµ‹ã€è§’ç‚¹æ£€æµ‹ã€ç›´çº¿æ£€æµ‹ç­‰ï¼‰ã€å›¾åƒåŒ¹é…å’Œé…å‡†ã€è¿åŠ¨ä¼°è®¡ã€ä¸‰ç»´é‡å»ºç­‰ã€‚æ­¤å¤–ï¼ŒOpenCVè¿˜åŒ…å«äº†è®¸å¤šæœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°ï¼Œå¦‚æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ã€éšæœºæ£®æ—ï¼ˆRandom Forestsï¼‰ã€ç¥ç»ç½‘ç»œç­‰ï¼Œç”¨äºç›®æ ‡åˆ†ç±»å’Œè¯†åˆ«ã€‚</p><p>OpenCVè¢«å¹¿æ³›åº”ç”¨äºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ç ”ç©¶å’Œå¼€å‘ä¸­ï¼Œå®ƒåœ¨å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œéƒ½æœ‰å¾ˆé«˜çš„å£°èª‰å’Œåº”ç”¨ä»·å€¼ã€‚æ— è®ºæ˜¯è¿›è¡ŒåŸºç¡€çš„å›¾åƒå¤„ç†è¿˜æ˜¯å¤æ‚çš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼ŒOpenCVéƒ½æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œå·¥å…·ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿå®ç°ä»–ä»¬çš„è§†è§‰åº”ç”¨ã€‚</p><h2 id="å‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä½œç”¨">å‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä½œç”¨</h2><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå‘½åç©ºé—´å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„ä½œç”¨ï¼š</p><ol><li><p>é¿å…å‘½åå†²çªï¼šå‘½åç©ºé—´å¯ä»¥å°†ä»£ç æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰åˆ†ç»„å’Œéš”ç¦»ï¼Œé¿å…ä¸åŒéƒ¨åˆ†çš„ä»£ç ä¹‹é—´çš„å‘½åå†²çªã€‚ä¸åŒçš„å‘½åç©ºé—´ä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼Œå› ä¸ºå®ƒä»¬çš„ä½œç”¨åŸŸè¢«é™å®šåœ¨å„è‡ªçš„å‘½åç©ºé—´å†…ã€‚</p></li><li><p>æä¾›ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–ï¼šé€šè¿‡å°†ç›¸å…³çš„ä»£ç æ”¾ç½®åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œå¯ä»¥æä¾›é€»è¾‘ä¸Šçš„åˆ†ç»„å’Œç»„ç»‡ï¼Œä½¿å¾—ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚å‘½åç©ºé—´å¯ä»¥æŒ‰ç…§åŠŸèƒ½ã€æ¨¡å—æˆ–å±‚æ¬¡ç»“æ„è¿›è¡Œç»„ç»‡ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°ç†è§£å’Œç»´æŠ¤ä»£ç ã€‚</p></li><li><p>å¢åŠ å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ï¼šé€šè¿‡åœ¨ä»£ç ä¸­ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç†è§£æ€§ã€‚å‘½åç©ºé—´å¯ä»¥ä¸ºä»£ç æ·»åŠ ä¸Šä¸‹æ–‡å’Œè¯­ä¹‰ï¼Œä½¿å¾—ä»£ç çš„æ„å›¾æ›´åŠ æ¸…æ™°ã€‚æ­¤å¤–ï¼Œå‘½åç©ºé—´ä¹Ÿä¸ºé¡¹ç›®çš„æ‰©å±•æ€§æä¾›äº†æ”¯æŒï¼Œå› ä¸ºæ–°çš„ä»£ç å¯ä»¥æ·»åŠ åˆ°ç°æœ‰çš„å‘½åç©ºé—´ä¸­ï¼Œè€Œæ— éœ€ä¿®æ”¹æˆ–é‡æ„ç°æœ‰ä»£ç ã€‚</p></li><li><p>å…è®¸ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼šä¸åŒçš„å‘½åç©ºé—´ä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼Œè€Œä¸ä¼šå‘ç”Ÿå†²çªã€‚è¿™å¯¹äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–å…¶ä»–æ¨¡å—é›†æˆæ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥é¿å…ä¸åŒæ¨¡å—ä¹‹é—´çš„åç§°å†²çªï¼Œå¹¶æ”¯æŒæ›´å¥½çš„ä»£ç é‡ç”¨å’Œç»„åˆã€‚</p></li><li><p>é™å®šæ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸï¼šå‘½åç©ºé—´é€šè¿‡å‘½åç©ºé—´é™å®šç¬¦ï¼ˆ<code>::</code>ï¼‰æ¥é™å®šæ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸã€‚è¿™å¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ æ˜ç¡®å’Œå¯æ§ï¼Œé¿å…å…¨å±€ä½œç”¨åŸŸçš„æ»¥ç”¨ã€‚åªæœ‰åœ¨éœ€è¦ä½¿ç”¨ç‰¹å®šå‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦æ—¶ï¼Œæ‰éœ€è¦æ˜¾å¼åœ°å¼•ç”¨å®ƒä»¬ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œå‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­èµ·åˆ°äº†éš”ç¦»ã€ç»„ç»‡å’Œç®¡ç†ä»£ç çš„ä½œç”¨ã€‚å®ƒä»¬æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥å¤„ç†å‘½åå†²çªï¼Œå¹¶æé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚é€šè¿‡åˆç†åœ°ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥æ›´å¥½åœ°ç»„ç»‡é¡¹ç›®ä»£ç ï¼Œå‡å°‘æ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶æé«˜å›¢é˜Ÿåä½œçš„æ•ˆç‡ã€‚</p><h2 id="explicit">explicit</h2><p>åœ¨C++ä¸­ï¼Œ<code>explicit</code>æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºä¿®é¥°ç±»çš„å•å‚æ•°æ„é€ å‡½æ•°ï¼ˆæˆ–é™¤é»˜è®¤å‚æ•°å¤–çš„å¤šå‚æ•°æ„é€ å‡½æ•°ï¼‰ã€‚ä½¿ç”¨<code>explicit</code>å…³é”®å­—å¯ä»¥é˜²æ­¢éšå¼çš„ç±»å‹è½¬æ¢å‘ç”Ÿã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥æ„é€ å‡½æ•°ç”¨äºéšå¼ç±»å‹è½¬æ¢ã€‚è¿™æ„å‘³ç€ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼ã€åˆå§‹åŒ–æˆ–ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†æ²¡æœ‰ä½¿ç”¨<code>explicit</code>å…³é”®å­—æ—¶ï¼Œæ„é€ å‡½æ•°çš„éšå¼ç±»å‹è½¬æ¢ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Do something with MyClass object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj = <span class="number">5</span>;   <span class="comment">// éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="built_in">doSomething</span>(<span class="number">10</span>);   <span class="comment">// éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»å®šä¹‰äº†ä¸€ä¸ªå•å‚æ•°æ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ª<code>int</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•°å€¼è¿›è¡Œèµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œéšå¼ç±»å‹è½¬æ¢æ¥åˆ›å»º<code>MyClass</code>å¯¹è±¡ã€‚</p><p>ç„¶è€Œï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›æ˜ç¡®åœ°æ§åˆ¶ç±»å‹è½¬æ¢ï¼Œé¿å…å‡ºç°æ„å¤–çš„è½¬æ¢è¡Œä¸ºã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨<code>explicit</code>å…³é”®å­—æ¥å£°æ˜æ„é€ å‡½æ•°ï¼Œå¹¶ç¦æ­¢éšå¼ç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨<code>explicit</code>å…³é”®å­—ä¿®é¥°æ„é€ å‡½æ•°çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MyClass</span><span class="params">(<span class="type">int</span> value)</span> : m_value(value) &#123;</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Do something with MyClass object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj = <span class="number">5</span>;    <span class="comment">// é”™è¯¯ï¼Œç¦æ­¢éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="built_in">doSomething</span>(<span class="number">10</span>);    <span class="comment">// é”™è¯¯ï¼Œç¦æ­¢éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°å‰é¢åŠ ä¸Šäº†<code>explicit</code>å…³é”®å­—ã€‚è¿™æ„å‘³ç€æ„é€ å‡½æ•°åªèƒ½è¢«æ˜¾å¼è°ƒç”¨ï¼Œè€Œç¦æ­¢äº†éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­çš„èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨å°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><p>é€šè¿‡ä½¿ç”¨<code>explicit</code>å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ˜ç¡®åœ°æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºå’Œç±»å‹è½¬æ¢ï¼Œé¿å…ä¸€äº›æ½œåœ¨çš„é”™è¯¯å’Œæ„å¤–è¡Œä¸ºã€‚ä½†éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨<code>explicit</code>å…³é”®å­—å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä»£ç çš„å†—é•¿æ€§å’Œä¸ä¾¿åˆ©æ€§ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€æ±‚å’Œè®¾è®¡è€ƒè™‘æ˜¯å¦ä½¿ç”¨ã€‚</p><h2 id="æ„é€ å‡½æ•°çš„-åé¢åŠ ä¸Š-æ˜¯ä»€ä¹ˆæ„æ€">æ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;æ˜¯ä»€ä¹ˆæ„æ€</h2><p>åœ¨C++ä¸­ï¼Œæ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;æ˜¯è¡¨ç¤ºä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼ˆmember initializer listï¼‰çš„å¼€å§‹ã€‚</p><p>æ„é€ å‡½æ•°åœ¨åˆ›å»ºå¯¹è±¡æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨æä¾›äº†ä¸€ç§åœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰åˆå§‹åŒ–æˆå‘˜å˜é‡çš„æ–¹å¼ã€‚é€šè¿‡åœ¨æ„é€ å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ä¸ºæˆå‘˜å˜é‡èµ‹å€¼æˆ–è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123;</span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°ä½“</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ„é€ å‡½æ•°çš„å®šä¹‰æ˜¯ <code>MyClass(int value) : m_value(value) &#123;&#125;</code>ã€‚åœ¨<code>:</code>ä¹‹åæ˜¯æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå…¶ä¸­çš„<code>m_value(value)</code>è¡¨ç¤ºå°†å‚æ•°<code>value</code>çš„å€¼èµ‹ç»™æˆå‘˜å˜é‡<code>m_value</code>ã€‚è¿™æ ·ï¼Œåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰ï¼Œæˆå‘˜å˜é‡<code>m_value</code>å°±å·²ç»è¢«åˆå§‹åŒ–ã€‚</p><p>é€šè¿‡ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œé¿å…åœ¨æ„é€ å‡½æ•°ä½“ä¸­è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œæé«˜ä»£ç çš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚æ­¤å¤–ï¼Œå¯¹äºä¸€äº›ç±»ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¿˜å¯ä»¥è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨åªèƒ½ç”¨äºæ„é€ å‡½æ•°ä¸­ï¼Œç”¨äºåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œä¸èƒ½ç”¨äºå…¶ä»–æˆå‘˜å‡½æ•°ã€‚å¹¶ä¸”ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºåº”è¯¥ä¸æˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºä¸€è‡´ï¼Œä»¥é¿å…å‡ºç°æ½œåœ¨çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œæ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;è¡¨ç¤ºä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨çš„å¼€å§‹ã€‚æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ç”¨äºåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæä¾›äº†ä¸€ç§æ•ˆç‡é«˜ä¸”å¯è¯»æ€§å¥½çš„åˆå§‹åŒ–æ–¹å¼ã€‚é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ä¸ºæˆå‘˜å˜é‡èµ‹å€¼æˆ–è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚</p><h2 id="NDK">NDK</h2><p>C++çš„NDKï¼ˆNative Development Kitï¼‰æ˜¯ä¸€ç»„å·¥å…·å’Œåº“ï¼Œç”¨äºå¼€å‘ä½¿ç”¨C++ç¼–å†™çš„Androidåº”ç”¨ç¨‹åºã€‚NDKå…è®¸å¼€å‘äººå‘˜åœ¨Androidå¹³å°ä¸Šç¼–å†™é«˜æ€§èƒ½çš„åŸç”Ÿä»£ç ï¼Œé€šå¸¸ç”¨äºå¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€è®¿é—®ç³»ç»Ÿç¡¬ä»¶å’Œä¼˜åŒ–æ€§èƒ½ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äºC++çš„NDKçš„ä¸€äº›å…³é”®æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li><p>NDKçš„ç›®çš„ï¼šNDKçš„ä¸»è¦ç›®çš„æ˜¯æä¾›ä¸€ç§åœ¨Androidåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨C++ç¼–å†™çš„åŸç”Ÿä»£ç çš„æ–¹æ³•ã€‚ä½¿ç”¨C++å¯ä»¥åœ¨æ€§èƒ½ä¸Šä¼˜åŒ–åº”ç”¨ç¨‹åºï¼Œå¤„ç†å¤æ‚çš„è®¡ç®—ä»»åŠ¡ï¼Œè®¿é—®ç³»ç»Ÿçº§åˆ«çš„APIå’Œè®¾å¤‡åŠŸèƒ½ï¼Œæˆ–é‡ç”¨ç°æœ‰çš„C/C++åº“ã€‚</p></li><li><p>NDKå·¥å…·é“¾ï¼šNDKæä¾›äº†ä¸€å¥—å·¥å…·é“¾ï¼ŒåŒ…æ‹¬äº¤å‰ç¼–è¯‘å™¨ã€è°ƒè¯•å™¨å’Œæ„å»ºå·¥å…·ã€‚è¿™äº›å·¥å…·é“¾å…è®¸å°†C++ä»£ç ç¼–è¯‘ä¸ºé€‚ç”¨äºAndroidå¹³å°çš„æœ¬æœºæœºå™¨ç ã€‚</p></li><li><p>CMakeæ„å»ºç³»ç»Ÿï¼šNDKæ¨èä½¿ç”¨CMakeä½œä¸ºæ„å»ºç³»ç»Ÿï¼Œç”¨äºç”ŸæˆAndroidåº”ç”¨ç¨‹åºçš„æœ¬æœºä»£ç ã€‚CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨å®šä¹‰æ„å»ºè¿‡ç¨‹å’Œä¾èµ–å…³ç³»ï¼Œå¹¶ç”Ÿæˆé€‚ç”¨äºAndroidçš„Makefileã€‚</p></li><li><p>JNIæ¥å£ï¼šåœ¨ä½¿ç”¨NDKå¼€å‘æ—¶ï¼ŒC++ä»£ç ä¸Javaä»£ç ä¹‹é—´çš„äº¤äº’é€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰å®ç°ã€‚JNIå…è®¸åœ¨Javaå’ŒC++ä¹‹é—´è¿›è¡Œå‡½æ•°è°ƒç”¨å’Œæ•°æ®ä¼ é€’ã€‚</p></li><li><p>æ”¯æŒçš„ABIï¼šABIï¼ˆApplication Binary Interfaceï¼‰æ˜¯æŒ‡åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„äºŒè¿›åˆ¶æ¥å£è§„èŒƒã€‚NDKæ”¯æŒå¤šä¸ªABIï¼ŒåŒ…æ‹¬armeabiã€armeabi-v7aã€arm64-v8aã€x86å’Œx86_64ã€‚å¼€å‘äººå‘˜å¯ä»¥é€‰æ‹©é€‚åˆå…¶åº”ç”¨ç¨‹åºçš„ABIï¼Œä»¥å®ç°æœ€ä½³çš„æ€§èƒ½å’Œå…¼å®¹æ€§ã€‚</p></li><li><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šNDKè¿˜å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨ç°æœ‰çš„C/C++åº“ï¼Œå¦‚OpenCVã€Boostç­‰ã€‚é€šè¿‡åœ¨NDKæ„å»ºè„šæœ¬ä¸­é…ç½®å’Œé“¾æ¥è¿™äº›åº“ï¼Œå¯ä»¥è½»æ¾åœ°å°†å®ƒä»¬ä¸Androidåº”ç”¨ç¨‹åºé›†æˆåœ¨ä¸€èµ·ã€‚</p></li><li><p>è°ƒè¯•å’Œæ€§èƒ½åˆ†æï¼šNDKæä¾›äº†è°ƒè¯•å·¥å…·å’Œæ€§èƒ½åˆ†æå·¥å…·ï¼Œä»¥å¸®åŠ©å¼€å‘äººå‘˜è°ƒè¯•å’Œä¼˜åŒ–å…¶åŸç”Ÿä»£ç ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ndk-gdbå‘½ä»¤è¡Œå·¥å…·è¿›è¡Œè°ƒè¯•ï¼Œä½¿ç”¨perfå·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨NDKç¼–å†™åŸç”Ÿä»£ç éœ€è¦ä¸€å®šçš„C++ç¼–ç¨‹çŸ¥è¯†å’ŒAndroidå¼€å‘ç»éªŒã€‚å®ƒä¸»è¦é€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½è®¡ç®—ã€åº•å±‚ç¡¬ä»¶è®¿é—®æˆ–ä¸ç°æœ‰C/C++åº“é›†æˆçš„æƒ…å†µã€‚å¯¹äºä¸€èˆ¬çš„Androidåº”ç”¨ç¨‹åºå¼€å‘ï¼Œé€šå¸¸å»ºè®®ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Javaæˆ–Kotlinç¼–å†™ä»£ç ã€‚</p><h1>æ•°æ®ç±»å‹</h1><h2 id="åŸºæœ¬æ•°æ®ç±»å‹">åŸºæœ¬æ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083744623.png" alt="image-20230613083744623"></p><h2 id="å¤åˆæ•°æ®ç±»å‹">å¤åˆæ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083845493.png" alt="image-20230613083845493"></p><h2 id="æŒ‡é’ˆç±»å‹">æŒ‡é’ˆç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083858532.png" alt="image-20230613083858532"></p><h2 id="æšä¸¾ç±»å‹">æšä¸¾ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083909897.png" alt="image-20230613083909897"></p><h2 id="å…¶ä»–æ•°æ®ç±»å‹">å…¶ä»–æ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083920385.png" alt="image-20230613083920385"></p><h1>ç±»</h1><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> studentId, <span class="type">const</span> std::string&amp; studentName, <span class="type">int</span> studentAge) &#123;</span><br><span class="line">        id = studentId;</span><br><span class="line">        name = studentName;</span><br><span class="line">        age = studentAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayInformation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student ID: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; name &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å­¦ç”Ÿå§“å</span></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å­¦ç”Ÿå§“å</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(<span class="type">const</span> std::string&amp; studentName)</span> </span>&#123;</span><br><span class="line">        name = studentName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="this">this</h2><p>åœ¨C++ä¸­ï¼Œå…³é”®å­—<code>this</code>è¡¨ç¤ºå½“å‰å¯¹è±¡çš„æŒ‡é’ˆã€‚å®ƒæ˜¯ä¸€ä¸ªéšå¼çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨æˆå‘˜å‡½æ•°çš„å¯¹è±¡æœ¬èº«ã€‚é€šè¿‡<code>this</code>æŒ‡é’ˆï¼Œå¯ä»¥åœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†<code>this</code>å…³é”®å­—çš„ç”¨é€”ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; m_value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setValue</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_value = value;  <span class="comment">// ä½¿ç”¨thisæŒ‡é’ˆè®¿é—®æˆå‘˜å˜é‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Address: &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; std::endl;  <span class="comment">// æ‰“å°thisæŒ‡é’ˆçš„åœ°å€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    obj.<span class="built_in">printValue</span>();     <span class="comment">// è¾“å‡º: Value: 42</span></span><br><span class="line">    obj.<span class="built_in">setValue</span>(<span class="number">24</span>);     <span class="comment">// ä½¿ç”¨æˆå‘˜å‡½æ•°è®¾ç½®æ–°çš„å€¼</span></span><br><span class="line">    obj.<span class="built_in">printValue</span>();     <span class="comment">// è¾“å‡º: Value: 24</span></span><br><span class="line">    obj.<span class="built_in">printAddress</span>();   <span class="comment">// æ‰“å°å¯¹è±¡çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»åŒ…å«ä¸€ä¸ªæ•´å‹æˆå‘˜å˜é‡<code>m_value</code>å’Œå‡ ä¸ªæˆå‘˜å‡½æ•°ã€‚åœ¨<code>setValue()</code>å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code>this</code>æŒ‡é’ˆè®¿é—®å¹¶ä¿®æ”¹äº†å½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡<code>m_value</code>ã€‚<code>printAddress()</code>å‡½æ•°ä½¿ç”¨<code>this</code>æŒ‡é’ˆæ‰“å°äº†å½“å‰å¯¹è±¡çš„åœ°å€ã€‚</p><p>åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>MyClass</code>å¯¹è±¡<code>obj</code>å¹¶è°ƒç”¨äº†ä¸€ç³»åˆ—æˆå‘˜å‡½æ•°ã€‚é€šè¿‡ä½¿ç”¨<code>this</code>æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œç¡®ä¿äº†å¯¹å½“å‰å¯¹è±¡çš„æ­£ç¡®å¼•ç”¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>this</code>æŒ‡é’ˆåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨æ˜¯ä¸€ä¸ªè‡ªåŠ¨æä¾›çš„æŒ‡é’ˆï¼Œæ— éœ€æ˜¾å¼å£°æ˜æˆ–åˆå§‹åŒ–ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œä¸å…è®¸ä¿®æ”¹å®ƒæŒ‡å‘çš„å¯¹è±¡ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>this</code>å…³é”®å­—åœ¨C++ä¸­è¡¨ç¤ºå½“å‰å¯¹è±¡çš„æŒ‡é’ˆï¼Œç”¨äºåœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚é€šè¿‡ä½¿ç”¨<code>this</code>æŒ‡é’ˆï¼Œå¯ä»¥ç¡®ä¿æ­£ç¡®å¼•ç”¨å½“å‰å¯¹è±¡ï¼Œå¹¶è¿›è¡Œå¯¹è±¡å†…éƒ¨çš„æ“ä½œå’Œäº¤äº’ã€‚</p><h2 id="ç»§æ‰¿">ç»§æ‰¿</h2><p>åœ¨C++ä¸­ï¼Œç»§æ‰¿æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é‡è¦æ¦‚å¿µï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ˆç§°ä¸ºå­ç±»æˆ–æ´¾ç”Ÿç±»ï¼‰ï¼Œè¯¥ç±»ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºåŸºç±»æˆ–çˆ¶ç±»ï¼‰çš„å±æ€§å’Œè¡Œä¸ºã€‚å­ç±»å¯ä»¥ç»§æ‰¿åŸºç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥æ‰©å±•æˆ–ä¿®æ”¹å®ƒä»¬ã€‚ä»¥ä¸‹æ˜¯å…³äºç»§æ‰¿çš„ä¸€äº›è¦ç‚¹ï¼š</p><ol><li><p>åŸºç±»å’Œæ´¾ç”Ÿç±»ï¼š</p><ul><li>åŸºç±»æ˜¯å·²ç»å­˜åœ¨çš„ç±»ï¼Œå®ƒæä¾›äº†ä¸€ç»„é€šç”¨çš„å±æ€§å’Œè¡Œä¸ºã€‚</li><li>æ´¾ç”Ÿç±»æ˜¯ä»åŸºç±»æ´¾ç”Ÿè€Œæ¥çš„æ–°ç±»ï¼Œå®ƒç»§æ‰¿äº†åŸºç±»çš„å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§å’Œè¡Œä¸ºã€‚</li></ul></li><li><p>è¯­æ³•ï¼š</p><ul><li>åœ¨C++ä¸­ï¼Œä½¿ç”¨å†’å· <code>:</code> æ¥æŒ‡å®šæ´¾ç”Ÿç±»ç»§æ‰¿åŸºç±»ã€‚ä¾‹å¦‚ï¼š<code>class Derived : public Base</code> è¡¨ç¤ºæ´¾ç”Ÿç±» <code>Derived</code> ç»§æ‰¿äº†åŸºç±» <code>Base</code>ã€‚</li><li>ç»§æ‰¿å…³ç³»å¯ä»¥æ˜¯å…¬æœ‰ï¼ˆpublicï¼‰ã€ç§æœ‰ï¼ˆprivateï¼‰æˆ–ä¿æŠ¤ï¼ˆprotectedï¼‰ã€‚å…¬æœ‰ç»§æ‰¿æ„å‘³ç€åŸºç±»çš„å…¬æœ‰æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶æ˜¯å…¬æœ‰çš„ï¼Œç§æœ‰ç»§æ‰¿å’Œä¿æŠ¤ç»§æ‰¿ä¼šæœ‰ç›¸åº”çš„è®¿é—®é™åˆ¶ã€‚</li></ul></li><li><p>ç»§æ‰¿ç±»å‹ï¼š</p><ul><li>å…¬æœ‰ç»§æ‰¿ï¼ˆpublic inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜ï¼Œä½†ç§æœ‰æˆå‘˜ä¸å¯ç›´æ¥è®¿é—®ã€‚</li><li>ç§æœ‰ç»§æ‰¿ï¼ˆprivate inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„æ‰€æœ‰æˆå‘˜ï¼Œä½†å®ƒä»¬éƒ½å˜æˆäº†ç§æœ‰æˆå‘˜ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨è®¿é—®ã€‚</li><li>ä¿æŠ¤ç»§æ‰¿ï¼ˆprotected inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„ä¿æŠ¤æˆå‘˜å’Œå…¬æœ‰æˆå‘˜ï¼Œä½†å®ƒä»¬éƒ½å˜æˆäº†ä¿æŠ¤æˆå‘˜ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨å’Œæ´¾ç”Ÿç±»çš„å­ç±»ä¸­è®¿é—®ã€‚</li></ul></li><li><p>æˆå‘˜è®¿é—®æƒé™ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ <code>::</code> æ¥å¼•ç”¨åŸºç±»çš„æˆå‘˜ã€‚</li></ul></li><li><p>é‡å†™å’Œæ‰©å±•ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥é‡å†™ï¼ˆoverrideï¼‰åŸºç±»çš„æˆå‘˜å‡½æ•°ï¼Œå³åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®ç°åŸºç±»ä¸­å·²æœ‰çš„å‡½æ•°ã€‚è¿™å…è®¸æ´¾ç”Ÿç±»æä¾›è‡ªå·±çš„å®ç°ã€‚</li><li>æ´¾ç”Ÿç±»è¿˜å¯ä»¥æ·»åŠ æ–°çš„æˆå‘˜å‡½æ•°å’Œæ•°æ®æˆå‘˜ï¼Œä»è€Œæ‰©å±•åŸºç±»çš„åŠŸèƒ½ã€‚</li></ul></li></ol><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†ç»§æ‰¿ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> width;</span><br><span class="line">    <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Shape</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">width</span>(w), <span class="built_in">height</span>(h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Area: &quot;</span> &lt;&lt; <span class="built_in">getArea</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Rectangle</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">Shape</span>(w, h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width * height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Triangle</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">Shape</span>(w, h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.5</span> * width * height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿å’Œè®¿é—®å…³ç³»">ç»§æ‰¿å’Œè®¿é—®å…³ç³»</h2><table><thead><tr><th></th><th>åŸºç±»çš„å…¬æœ‰æˆå‘˜</th><th>åŸºç±»çš„ä¿æŠ¤æˆå‘˜</th><th>åŸºç±»çš„ç§æœ‰æˆå‘˜</th></tr></thead><tbody><tr><td>å…¬æœ‰ç»§æ‰¿</td><td>å¯è®¿é—®</td><td>å¯è®¿é—®</td><td>ä¸å¯è®¿é—®</td></tr><tr><td>ä¿æŠ¤ç»§æ‰¿</td><td>ä¿æŠ¤</td><td>ä¿æŠ¤</td><td>ä¸å¯è®¿é—®</td></tr><tr><td>ç§æœ‰ç»§æ‰¿</td><td>ç§æœ‰</td><td>ç§æœ‰</td><td>ä¸å¯è®¿é—®</td></tr></tbody></table><h2 id="æ´¾ç”Ÿç±»è®¿é—®åŸºç±»ç§æœ‰æˆå‘˜">æ´¾ç”Ÿç±»è®¿é—®åŸºç±»ç§æœ‰æˆå‘˜</h2><p>åœ¨C++ä¸­ï¼Œæ´¾ç”Ÿç±»æ˜¯åŸºç±»çš„æ‰©å±•ï¼Œå¯ä»¥ç»§æ‰¿åŸºç±»çš„æˆå‘˜ï¼ˆå…¬æœ‰ã€å—ä¿æŠ¤å’Œç§æœ‰ï¼‰ã€‚ç§æœ‰æˆå‘˜æ˜¯åŸºç±»ä¸­å…·æœ‰æœ€é«˜è®¿é—®æƒé™çš„æˆå‘˜ï¼Œåªèƒ½åœ¨åŸºç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°ä¸­ç›´æ¥è®¿é—®ã€‚ç„¶è€Œï¼Œæ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼š</p><ol><li><p>æˆå‘˜å‡½æ•°ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡ç»§æ‰¿åŸºç±»çš„å…¬æœ‰å’Œå—ä¿æŠ¤æˆå‘˜å‡½æ•°ï¼Œé—´æ¥åœ°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>ç”±äºæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„æˆå‘˜å‡½æ•°ï¼Œè¿™äº›æˆå‘˜å‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li></ul></li><li><p>å‹å…ƒå‡½æ•°ï¼š</p><ul><li>å¦‚æœåŸºç±»å°†æ´¾ç”Ÿç±»å£°æ˜ä¸ºå‹å…ƒç±»ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>å‹å…ƒå‡½æ•°æ˜¯åœ¨ç±»å¤–éƒ¨å£°æ˜çš„å‡½æ•°ï¼Œå¯ä»¥è®¿é—®è¯¥ç±»çš„ç§æœ‰æˆå‘˜ï¼Œå› æ­¤é€šè¿‡å°†æ´¾ç”Ÿç±»å£°æ˜ä¸ºåŸºç±»çš„å‹å…ƒç±»ï¼Œå¯ä»¥ä½¿æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™ä¸¤ç§æ–¹å¼ï¼Œæ´¾ç”Ÿç±»å¯ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ´¾ç”Ÿç±»åº”è¯¥å°½é‡éµå¾ªå°è£…åŸåˆ™ï¼Œå°½é‡ä¸ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œä»¥ä¿æŒç±»çš„å°è£…æ€§å’Œæ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†æ´¾ç”Ÿç±»é€šè¿‡æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateVar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>(<span class="type">int</span> val) : <span class="built_in">privateVar</span>(val) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">Derived</span>;  <span class="comment">// å°†Derivedå£°æ˜ä¸ºBaseçš„å‹å…ƒç±»</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">accessBasePrivateMember</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> val = privateVar;  <span class="comment">// å¯ä»¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Base&#x27;s privateVar through Derived: &quot;</span> &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Derived derived;</span><br><span class="line">    derived.<span class="built_in">accessBasePrivateMember</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Base</code> ç±»å…·æœ‰ä¸€ä¸ªç§æœ‰æˆå‘˜å˜é‡ <code>privateVar</code>ï¼Œè€Œ <code>Derived</code> ç±»é€šè¿‡å…¬æœ‰ç»§æ‰¿ç»§æ‰¿äº† <code>Base</code> ç±»ï¼Œå¹¶ä¸”å°† <code>Derived</code> å£°æ˜ä¸º <code>Base</code> çš„å‹å…ƒç±»ã€‚å› æ­¤ï¼Œ<code>Derived</code> ç±»çš„æˆå‘˜å‡½æ•° <code>accessBasePrivateMember()</code> å¯ä»¥ç›´æ¥è®¿é—®åŸºç±» <code>Base</code> çš„ç§æœ‰æˆå‘˜å˜é‡ <code>privateVar</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œå³åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>Derived</code> ç±»å¯ä»¥è®¿é—® <code>Base</code> ç±»çš„ç§æœ‰æˆå‘˜ï¼Œä½† <code>Base</code> ç±»ä¸èƒ½è®¿é—® <code>Derived</code> ç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå…³ç³»åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œä»¥ç¡®ä¿è®¿é—®æƒé™çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚</p><h2 id="override">override</h2><p>åœ¨C++ä¸­ï¼Œ<code>override</code> å…³é”®å­—ç”¨äºæ˜¾å¼åœ°æ ‡è¯†æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ˜¯å¯¹åŸºç±»ä¸­çš„è™šå‡½æ•°è¿›è¡Œé‡å†™ã€‚<code>override</code> å…³é”®å­—æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ã€‚</p><p>ä½¿ç”¨ <code>override</code> çš„ä¸€èˆ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">return_type <span class="title">Derived::function_name</span><span class="params">(parameters)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»çš„è™šå‡½æ•°æ—¶ï¼Œä½¿ç”¨ <code>override</code> å…³é”®å­—å°†å…¶æ”¾ç½®åœ¨å‡½æ•°å£°æ˜çš„æœ«å°¾ã€‚ç¼–è¯‘å™¨ä¼šéªŒè¯è¯¥å‡½æ•°æ˜¯å¦æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„åŸºç±»è™šå‡½æ•°ï¼Œæˆ–è€…å‡½æ•°ç­¾åä¸åŒ¹é…ï¼Œåˆ™ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>override</code> å…³é”®å­—ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;This is the base class.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;This is the derived class.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Base* basePtr = <span class="keyword">new</span> <span class="built_in">Derived</span>();</span><br><span class="line">    basePtr-&gt;<span class="built_in">printMessage</span>();  <span class="comment">// è¾“å‡º: &quot;This is the derived class.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> basePtr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Base</code> ç±»å®šä¹‰äº†ä¸€ä¸ªè™šå‡½æ•° <code>printMessage()</code>ï¼Œè€Œ <code>Derived</code> ç±»é€šè¿‡å…¬æœ‰ç»§æ‰¿é‡å†™äº†è¯¥å‡½æ•°ã€‚åœ¨ <code>Derived</code> ç±»ä¸­ï¼Œä½¿ç”¨ <code>override</code> å…³é”®å­—æ ‡è¯†äº†å¯¹åŸºç±»å‡½æ•°çš„é‡å†™ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ <code>Derived</code> ç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆ <code>basePtr</code>ï¼Œå¹¶è°ƒç”¨äº† <code>printMessage()</code> å‡½æ•°ã€‚ç”±äºåŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»ä¸­é‡å†™çš„å‡½æ•°ã€‚è¾“å‡ºç»“æœä¸º â€œThis is the derived class.â€ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>override</code> å…³é”®å­—ï¼Œå¯ä»¥ç¡®ä¿åœ¨æ´¾ç”Ÿç±»ä¸­æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œä»¥å®ç°å¤šæ€è¡Œä¸ºã€‚å¦‚æœæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ç­¾åä¸åŸºç±»è™šå‡½æ•°ä¸åŒ¹é…ï¼Œç¼–è¯‘å™¨å°†å‘å‡ºé”™è¯¯æç¤ºï¼Œå¸®åŠ©æˆ‘ä»¬æ£€æµ‹æ½œåœ¨çš„é”™è¯¯ã€‚</p><h2 id="è™šå‡½æ•°">è™šå‡½æ•°</h2><p>è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜ä¸ºè™šå‡½æ•°çš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºå®ç°å¤šæ€æ€§ï¼ˆpolymorphismï¼‰ã€‚å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥è°ƒç”¨æ´¾ç”Ÿç±»çš„ç‰¹å®šå®ç°ã€‚</p><p>è™šå‡½æ•°çš„ä½œç”¨åŒ…æ‹¬ï¼š</p><ol><li><p>å®ç°è¿è¡Œæ—¶å¤šæ€ï¼šé€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œæ ¹æ®å®é™…å¯¹è±¡çš„ç±»å‹ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ã€‚è¿™æ ·å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨å“ªä¸ªæ´¾ç”Ÿç±»çš„å‡½æ•°å®ç°ï¼Œå®ç°äº†å¤šæ€æ€§ã€‚</p></li><li><p>æä¾›æ¥å£çš„æ‰©å±•æ€§ï¼šé€šè¿‡åœ¨åŸºç±»ä¸­å£°æ˜è™šå‡½æ•°ï¼Œå¯ä»¥è®©æ´¾ç”Ÿç±»æ ¹æ®éœ€è¦è¿›è¡Œå‡½æ•°çš„é‡å†™ï¼Œä»è€Œå®ç°æ¥å£çš„æ‰©å±•ã€‚è¿™æ ·ï¼ŒåŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨å¯ä»¥çµæ´»åœ°è°ƒç”¨ä¸åŒæ´¾ç”Ÿç±»çš„ä¸åŒå®ç°ã€‚</p></li></ol><p>è¦å°†å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œéœ€è¦åœ¨åŸºç±»ä¸­ä½¿ç”¨ <code>virtual</code> å…³é”®å­—è¿›è¡Œå£°æ˜ã€‚æ´¾ç”Ÿç±»ä¸­é‡å†™è™šå‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>override</code> å…³é”®å­—æ˜¾å¼æ ‡è¯†ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†è™šå‡½æ•°çš„ä½¿ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a shape.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a circle.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a rectangle.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Shape* shapePtr = <span class="keyword">new</span> <span class="built_in">Circle</span>();</span><br><span class="line">    shapePtr-&gt;<span class="built_in">draw</span>();  <span class="comment">// è¾“å‡º: &quot;Drawing a circle.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> shapePtr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Shape</code> ç±»æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œå…¶ä¸­çš„ <code>draw()</code> å‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°ã€‚<code>Circle</code> å’Œ <code>Rectangle</code> ç±»åˆ†åˆ«æ˜¯ <code>Shape</code> ç±»çš„æ´¾ç”Ÿç±»ï¼Œå¹¶åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™äº† <code>draw()</code> å‡½æ•°ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºç±»æŒ‡é’ˆ <code>shapePtr</code>ï¼Œå¹¶å°†å…¶æŒ‡å‘ <code>Circle</code> ç±»çš„å¯¹è±¡ã€‚é€šè¿‡è¯¥æŒ‡é’ˆè°ƒç”¨ <code>draw()</code> å‡½æ•°æ—¶ï¼Œç”±äºå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯ <code>Circle</code> ç±»ä¸­é‡å†™çš„å‡½æ•°ã€‚è¾“å‡ºç»“æœä¸º â€œDrawing a circle.â€ã€‚</p><p>é€šè¿‡ä½¿ç”¨è™šå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…å¯¹è±¡çš„ç±»å‹æ¥åŠ¨æ€é€‰æ‹©è¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå®ç°äº†å¤šæ€æ€§å’Œæ¥å£çš„æ‰©å±•æ€§ã€‚è¿™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œæœ‰åŠ©äºç¼–å†™çµæ´»ã€å¯æ‰©å±•çš„ä»£ç ã€‚</p><h1>const</h1><p>åœ¨C++ä¸­ï¼Œ<code>const</code>æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå£°æ˜å¸¸é‡æˆ–æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ã€‚<code>const</code>å…³é”®å­—å¯ä»¥åº”ç”¨äºå˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹å’Œæˆå‘˜å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯<code>const</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å£°æ˜å¸¸é‡ï¼š<code>const</code>å…³é”®å­—å¯ä»¥ç”¨äºå£°æ˜å¸¸é‡ï¼Œå³æ•°å€¼åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯ä¿®æ”¹çš„å€¼ã€‚å¸¸é‡åœ¨å£°æ˜æ—¶å¿…é¡»è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨åç»­çš„ä»£ç ä¸­ä¸èƒ½è¢«ä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_VALUE = <span class="number">100</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14159</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>å£°æ˜åªè¯»å˜é‡ï¼šå°†<code>const</code>å…³é”®å­—åº”ç”¨äºå˜é‡æ—¶ï¼Œè¡¨ç¤ºè¯¥å˜é‡çš„å€¼ä¸å¯è¢«ä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* constPtr = &amp;x;  <span class="comment">// æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œä¸å¯é€šè¿‡æŒ‡é’ˆä¿®æ”¹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment">// *constPtr = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> y = <span class="number">10</span>;  <span class="comment">// å£°æ˜åªè¯»å˜é‡ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// y = 20;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å‡½æ•°å‚æ•°ï¼šå°†å‚æ•°å£°æ˜ä¸º<code>const</code>å¯ä»¥ç¡®ä¿åœ¨å‡½æ•°å†…éƒ¨ä¸ä¼šä¿®æ”¹å‚æ•°çš„å€¼ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">processValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// value = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line">    <span class="comment">// å…¶ä»–æ“ä½œ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>å‡½æ•°è¿”å›ç±»å‹ï¼šå°†å‡½æ•°è¿”å›ç±»å‹å£°æ˜ä¸º<code>const</code>è¡¨ç¤ºè¿”å›çš„å¯¹è±¡æ˜¯åªè¯»çš„ï¼Œä¸å¯åœ¨è°ƒç”¨ç«¯è¿›è¡Œä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="built_in">getValue</span>();</span><br><span class="line"><span class="comment">// getValue() = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹è¿”å›å€¼</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å£°æ˜ä¸º<code>const</code>çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨åç»­çš„ä»£ç ä¸­ä¿®æ”¹ã€‚</li><li>å£°æ˜ä¸º<code>const</code>çš„å¯¹è±¡åªèƒ½è°ƒç”¨å…¶æˆå‘˜å‡½æ•°ä¸­è¢«å£°æ˜ä¸º<code>const</code>çš„å‡½æ•°ã€‚</li><li><code>const</code>ä¿®é¥°ç¬¦åœ¨æŒ‡é’ˆç±»å‹ä¸­å…·æœ‰ä¸¤ä¸ªä½œç”¨ï¼š<code>const int*</code>è¡¨ç¤ºæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œ<code>int* const</code>è¡¨ç¤ºå¸¸é‡æŒ‡é’ˆï¼ˆæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼‰ã€‚</li><li>å½“å°†<code>const</code>ä¿®é¥°ç¬¦åº”ç”¨äºç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹ç±»çš„æˆå‘˜å˜é‡ã€‚</li></ul><p>ä½¿ç”¨<code>const</code>å…³é”®å­—å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ä¸å¿…è¦çš„å˜é‡ä¿®æ”¹å’Œæ„å¤–çš„å‰¯ä½œç”¨ã€‚åˆç†ä½¿ç”¨<code>const</code>å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶æä¾›æ›´å¥½çš„ä»£ç ç»´æŠ¤æ€§ã€‚åŒæ—¶ï¼Œéœ€è¦æ³¨æ„åœ¨ä½¿ç”¨<code>const</code>ä¿®é¥°æ—¶ï¼Œç¡®ä¿éµå®ˆ<code>const</code>ä¿®é¥°ç¬¦çš„è§„åˆ™ï¼Œé¿å…å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚</p><h1>final</h1><p><code>final</code>æ˜¯C++11å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºé™åˆ¶ç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»çš„æ‰©å±•æ€§ã€‚ä»¥ä¸‹æ˜¯<code>final</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•å’Œä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>ç±»çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨ç±»å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å…¶ä»–ç±»ä»è¯¥ç±»æ´¾ç”Ÿï¼Œå¹¶è¦†ç›–æˆ–æ‰©å±•å…¶åŠŸèƒ½ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> <span class="keyword">final</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;  <span class="comment">// é”™è¯¯ï¼Œæ— æ³•ä»finalç±»Derivedç»§æ‰¿</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>å‡½æ•°çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨è™šå‡½æ•°å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­è¢«é‡å†™ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ´¾ç”Ÿç±»æ— æ³•ä¿®æ”¹åŸºç±»çš„ç‰¹å®šè¡Œä¸ºã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">foo</span><span class="params">()</span> <span class="keyword">final</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// é”™è¯¯ï¼Œæ— æ³•é‡å†™è¢«å£°æ˜ä¸ºfinalçš„è™šå‡½æ•°foo()</span></span><br><span class="line">    <span class="comment">// void foo() override &#123;</span></span><br><span class="line">    <span class="comment">//     // ...</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»§æ‰¿å…³ç³»ä¸­çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨æ´¾ç”Ÿç±»å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥æ´¾ç”Ÿç±»ä¸èƒ½æœ‰åç»­çš„æ´¾ç”Ÿç±»ã€‚è¿™æ ·å¯ä»¥åœ¨ç»§æ‰¿é“¾ä¸ŠæŒ‡å®šæœ€åä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œé˜²æ­¢è¿›ä¸€æ­¥çš„æ‰©å±•ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived1</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived2</span> <span class="keyword">final</span> : <span class="keyword">public</span> Derived1 &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived3</span> : <span class="keyword">public</span> Derived2 &#123;  <span class="comment">// é”™è¯¯ï¼Œæ— æ³•ä»finalç±»Derived2ç»§æ‰¿</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>final</code>å…³é”®å­—çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºé™åˆ¶æ‰©å±•æ€§ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚åœ¨è®¾è®¡ç±»å’Œç»§æ‰¿å…³ç³»æ—¶ï¼Œåº”ä»”ç»†è€ƒè™‘æ˜¯å¦çœŸæ­£éœ€è¦é™åˆ¶ç»§æ‰¿å’Œå‡½æ•°é‡å†™ã€‚</li><li>ä½¿ç”¨<code>final</code>å…³é”®å­—å¯ä»¥å¢å¼ºç±»çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œç‰¹åˆ«æ˜¯ç”¨äºåŸºç±»æˆ–æ ¸å¿ƒå‡½æ•°ï¼Œä»¥é˜²æ­¢å®ƒä»¬è¢«ä¿®æ”¹ã€‚</li><li>é¿å…æ»¥ç”¨<code>final</code>å…³é”®å­—ï¼Œè¿‡å¤šåœ°ä½¿ç”¨å¯èƒ½å¯¼è‡´ç»§æ‰¿å±‚æ¬¡ç»“æ„å˜å¾—è¿‡äºåƒµç¡¬å’Œä¸çµæ´»ã€‚</li><li>åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œä½¿ç”¨<code>final</code>å…³é”®å­—å¯ä»¥æ˜ç¡®åœ°æŒ‡å®šæœ€åä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œä»¥ç¡®ä¿ç»§æ‰¿é“¾çš„ç»ˆç»“ã€‚</li><li><code>final</code>å…³é”®å­—é€‚ç”¨äºç±»ã€è™šå‡½æ•°å’Œç»§æ‰¿å…³ç³»ï¼Œä½†ä¸é€‚ç”¨äºéè™šæ™®é€šå‡½æ•°ã€‚</li><li>åœ¨ä½¿ç”¨<code>final</code>å…³é”®å­—æ—¶ï¼Œåº”ä¿æŒä»£ç æ¸…æ™°ï¼Œä»¥ä¾¿å…¶ä»–å¼€å‘äººå‘˜èƒ½å¤Ÿç†è§£å’Œç»´æŠ¤ä»£ç ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œ<code>final</code>å…³é”®å­—æä¾›äº†ä¸€ç§åœ¨ç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»ä¸­é™åˆ¶æ‰©å±•æ€§çš„</p><p>æœºåˆ¶ã€‚é€‚å½“åœ°ä½¿ç”¨<code>final</code>å¯ä»¥å¢å¼ºä»£ç çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œä½†éœ€è¦æ³¨æ„ä¸è¦æ»¥ç”¨å®ƒï¼Œä»¥å…é€ æˆä»£ç çš„åƒµåŒ–å’Œä¸çµæ´»ã€‚</p><h1>æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«</h1><p>æŒ‡é’ˆå’Œå¼•ç”¨æ˜¯C++ä¸­ç”¨äºå¤„ç†å†…å­˜å’Œå¯¹è±¡çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p><ol><li><p>æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼Œè€Œå¼•ç”¨ä¸€æ—¦ç»‘å®šåˆ°å¯¹è±¡ï¼Œå°±ä¸èƒ½æ›´æ”¹ç»‘å®šçš„å¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥æ˜¯ç©ºå€¼ï¼ˆnullptrï¼‰ï¼Œå³æŒ‡å‘ç©ºåœ°å€ï¼Œè€Œå¼•ç”¨å¿…é¡»åœ¨å£°æ˜æ—¶ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥æŒ‡å‘å¤šä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè€Œå¼•ç”¨åªèƒ½ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä¸èƒ½æ›´æ”¹ä¸ºå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥è¿›è¡ŒæŒ‡é’ˆè¿ç®—ï¼ˆå¦‚æŒ‡é’ˆåŠ æ³•ã€æŒ‡é’ˆå‡æ³•ç­‰ï¼‰ï¼Œè€Œå¼•ç”¨æ²¡æœ‰æŒ‡é’ˆè¿ç®—ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°åˆ†é…å†…å­˜ï¼Œè€Œå¼•ç”¨ä¸èƒ½ã€‚</p></li><li><p>å¼•ç”¨é€šå¸¸ç”¨ä½œå‡½æ•°çš„å‚æ•°æˆ–è¿”å›ç±»å‹ï¼Œä»¥å®ç°ä¼ é€’å‚æ•°æˆ–è¿”å›å€¼çš„æ•ˆæœã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥ç”¨äºç›¸åŒçš„ç›®çš„ï¼Œä½†å¼•ç”¨é€šå¸¸æ›´ç›´è§‚å’Œå®‰å…¨ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ä»£ç æ¥è¯´æ˜æŒ‡é’ˆå’Œå¼•ç”¨ä¹‹é—´çš„åŒºåˆ«ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyPointer</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    *ptr = <span class="number">100</span>;  <span class="comment">// ä¿®æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyReference</span><span class="params">(<span class="type">int</span>&amp; ref)</span> </span>&#123;</span><br><span class="line">    ref = <span class="number">200</span>;  <span class="comment">// ä¿®æ”¹å¼•ç”¨æ‰€ç»‘å®šçš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>* ptr = &amp;num;  <span class="comment">// æŒ‡é’ˆæŒ‡å‘num</span></span><br><span class="line">    <span class="type">int</span>&amp; ref = num;  <span class="comment">// å¼•ç”¨ç»‘å®šåˆ°num</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">modifyPointer</span>(ptr);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Value after modifying pointer: &quot;</span> &lt;&lt; num &lt;&lt; std::endl;  <span class="comment">// è¾“å‡º: 100</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">modifyReference</span>(ref);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Value after modifying reference: &quot;</span> &lt;&lt; num &lt;&lt; std::endl;  <span class="comment">// è¾“å‡º: 200</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•´æ•°å˜é‡ <code>num</code>ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘è¯¥å˜é‡çš„æŒ‡é’ˆ <code>ptr</code> å’Œä¸€ä¸ªå¼•ç”¨ <code>ref</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸¤ä¸ªå‡½æ•° <code>modifyPointer()</code> å’Œ <code>modifyReference()</code>ï¼Œåˆ†åˆ«ç”¨äºä¿®æ”¹æŒ‡é’ˆå’Œå¼•ç”¨æ‰€æŒ‡å‘çš„å€¼ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡æŒ‡é’ˆè°ƒç”¨ <code>modifyPointer()</code> å‡½æ•°æ¥ä¿®æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œå¹¶è¾“å‡ºä¿®æ”¹åçš„å€¼ã€‚ç„¶åï¼Œé€šè¿‡å¼•ç”¨è°ƒç”¨ <code>modifyReference()</code> å‡½æ•°æ¥ä¿®æ”¹å¼•ç”¨æ‰€ç»‘å®šçš„å€¼ï¼Œå¹¶å†æ¬¡è¾“å‡ºä¿®æ”¹åçš„å€¼ã€‚åœ¨ä¸¤æ¬¡è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å˜é‡ <code>num</code> çš„å€¼è¢«æˆåŠŸä¿®æ”¹ã€‚</p><p>é€šè¿‡æ¯”è¾ƒæŒ‡é’ˆå’Œå¼•ç”¨çš„ä½¿ç”¨æ–¹å¼å’ŒåŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©é€‚åˆç‰¹å®šæƒ…å†µçš„æ–¹æ³•ã€‚æŒ‡é’ˆæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥ç”¨äºåŠ¨æ€åˆ†é…å†…å­˜å’Œå¤„ç†æ•°æ®ç»“æ„ï¼Œè€Œå¼•ç”¨æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•å’Œæ›´å®‰å…¨çš„æ“ä½œï¼Œå¸¸ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’å’Œè¿”å›å€¼ã€‚</p><h1>å®å®šä¹‰</h1><p>åœ¨C++ä¸­ï¼Œå®å®šä¹‰ï¼ˆMacro Definitionï¼‰æ˜¯ä¸€ç§é¢„å¤„ç†æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ä¹‹å‰å°†ä»£ç ä¸­çš„æ ‡è¯†ç¬¦æ›¿æ¢ä¸ºæŒ‡å®šçš„æ–‡æœ¬ã€‚å®ƒä»¬æ˜¯é€šè¿‡é¢„å¤„ç†å™¨ï¼ˆPreprocessorï¼‰åœ¨ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚</p><p>å®å®šä¹‰ä½¿ç”¨<code>#define</code>æŒ‡ä»¤æ¥åˆ›å»ºï¼Œè¯­æ³•å½¢å¼ä¸ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> å®åç§° æ›¿æ¢æ–‡æœ¬</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå®åç§°æ˜¯ä½ è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ï¼Œæ›¿æ¢æ–‡æœ¬æ˜¯è¦æ›¿æ¢æˆçš„ä»£ç ç‰‡æ®µæˆ–å€¼ã€‚å®åç§°é€šå¸¸ä½¿ç”¨å¤§å†™å­—æ¯å‘½åï¼Œä»¥ä¾¿ä¸å…¶ä»–æ ‡è¯†ç¬¦åŒºåˆ†å¼€æ¥ã€‚</p><p>å®å®šä¹‰å¯ä»¥ç”¨äºæ›¿æ¢ä»»æ„ä»£ç ç‰‡æ®µï¼ŒåŒ…æ‹¬è¡¨è¾¾å¼ã€è¯­å¥ã€å‡½æ•°è°ƒç”¨ç­‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å®å®šä¹‰ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14159</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> radius = <span class="number">5.0</span>;</span><br><span class="line">    <span class="type">double</span> area = PI * radius * radius;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå®å®šä¹‰<code>#define PI 3.14159</code>å°†æ ‡è¯†ç¬¦<code>PI</code>æ›¿æ¢ä¸ºå€¼<code>3.14159</code>ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>PI</code>å®æ¥è®¡ç®—åœ†çš„é¢ç§¯ã€‚</p><p>å®å®šä¹‰è¿˜å¯ä»¥å¸¦æœ‰å‚æ•°ï¼Œç§°ä¸ºå®å‡½æ•°ï¼ˆMacro Functionï¼‰ã€‚å®å‡½æ•°çš„è¯­æ³•ä¸å‡½æ•°ç±»ä¼¼ï¼Œå¯ä»¥æ¥å—å‚æ•°å¹¶åœ¨æ›¿æ¢æ–‡æœ¬ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SQUARE(x) ((x) * (x))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">SQUARE</span>(<span class="number">5</span>);   <span class="comment">// å±•å¼€ä¸º ((5) * (5))</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå®å‡½æ•°<code>#define SQUARE(x) ((x) * (x))</code>å°†ä¼ å…¥çš„å‚æ•°<code>x</code>å¹³æ–¹å¹¶è¿”å›ç»“æœã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®å®šä¹‰æ˜¯ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸé™åˆ¶ã€‚å®ƒä»¬åœ¨é¢„å¤„ç†é˜¶æ®µç›´æ¥æ›¿æ¢ä»£ç ï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨å®å®šä¹‰æ—¶éœ€è¦è°¨æ…ï¼Œé¿å…å¼•å…¥ä¸å¯é¢„æµ‹çš„é—®é¢˜ã€‚</p><p>æ­¤å¤–ï¼ŒC++ä¸­è¿˜æœ‰ä¸€äº›é¢„å®šä¹‰çš„å®ï¼Œå¦‚<code>__FILE__</code>ï¼ˆå½“å‰æºæ–‡ä»¶åï¼‰ã€<code>__LINE__</code>ï¼ˆå½“å‰è¡Œå·ï¼‰å’Œ<code>__cplusplus</code>ï¼ˆç”¨äºæ£€æŸ¥C++ç¼–è¯‘ç¯å¢ƒï¼‰ç­‰ã€‚è¿™äº›é¢„å®šä¹‰çš„å®åœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸­å¯èƒ½æœ‰æ‰€å·®å¼‚ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨å®ƒä»¬æ¥è·å–ä¸€äº›ç¼–è¯‘æ—¶çš„ä¿¡æ¯ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œå®å®šä¹‰æ˜¯C++ä¸­çš„é¢„å¤„ç†æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ä¹‹å‰å°†æ ‡è¯†ç¬¦æ›¿æ¢ä¸ºæŒ‡å®šçš„æ–‡æœ¬ã€‚å®ƒä»¬å¯ä»¥ç”¨äºå®šä¹‰å¸¸é‡ã€ç®€å•çš„ä»£ç æ›¿æ¢å’Œå®å‡½æ•°ç­‰ã€‚ä½†éœ€è¦æ³¨æ„å®å®šä¹‰çš„æ½œåœ¨é—®é¢˜ï¼Œå¦‚ç¼ºä¹ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸé™åˆ¶ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåº”è¯¥æ…é‡è€ƒè™‘å®</p><h1>å‹å…ƒ</h1><p>åœ¨C++ä¸­ï¼Œå‹å…ƒï¼ˆfriendï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸æŸä¸ªç±»æˆ–å‡½æ•°è®¿é—®å…¶ä»–ç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå…³ç³»å¯ä»¥ç”¨äºå¢å¼ºç±»ä¹‹é—´çš„åä½œå’Œå°è£…æ€§ã€‚å½“ä¸€ä¸ªç±»å°†å¦ä¸€ä¸ªç±»å£°æ˜ä¸ºå‹å…ƒæ—¶ï¼Œè¢«å£°æ˜çš„ç±»å°±å¯ä»¥è®¿é—®è¯¥ç±»çš„ç§æœ‰æˆå‘˜ã€‚</p><p>å‹å…ƒå…³ç³»æœ‰ä¸¤ç§å½¢å¼ï¼šç±»å‹å…ƒå’Œå‡½æ•°å‹å…ƒã€‚</p><ol><li>ç±»å‹å…ƒï¼š<br>ç±»å‹å…ƒå…è®¸å¦ä¸€ä¸ªç±»è®¿é—®å½“å‰ç±»çš„ç§æœ‰æˆå‘˜ã€‚åœ¨ç±»å®šä¹‰ä¸­å£°æ˜å¦ä¸€ä¸ªç±»ä¸ºå‹å…ƒæ—¶ï¼Œå‹å…ƒç±»å¯ä»¥è®¿é—®å½“å‰ç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚è¿™ç§å…³ç³»æ˜¯åŒå‘çš„ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†ç±»å‹å…ƒçš„åº”ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;  <span class="comment">// å‰ç½®å£°æ˜ç±»B</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>() : <span class="built_in">privateData</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;  <span class="comment">// ç±»Bæ˜¯ç±»Açš„å‹å…ƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Private data in class A: &quot;</span> &lt;&lt; privateData &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">modifyPrivateData</span><span class="params">(A&amp; obj, <span class="type">int</span> data)</span> </span>&#123;</span><br><span class="line">        obj.privateData = data;  <span class="comment">// å¯ä»¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œç±»Aå°†ç±»Bå£°æ˜ä¸ºå‹å…ƒã€‚ç±»Bçš„æˆå‘˜å‡½æ•°<code>modifyPrivateData()</code>å¯ä»¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜<code>privateData</code>ã€‚è¿™å…è®¸ç±»Bä¿®æ”¹ç±»Açš„ç§æœ‰æ•°æ®ã€‚</p><ol start="2"><li><p>å‡½æ•°å‹å…ƒï¼š<br>å‡½æ•°å‹å…ƒå…è®¸ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°è®¿é—®æŸä¸ªç±»çš„ç§æœ‰æˆå‘˜ã€‚å‡½æ•°å‹å…ƒä¸å±äºä»»ä½•ç±»ï¼Œä½†å¯ä»¥è®¿é—®è¢«å£°æ˜ä¸ºå‹å…ƒçš„ç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚</p><p><strong>è¿™ä¸ªå‡½æ•°çš„å£°æ˜éœ€è¦åœ¨ç±»ä¸­ï¼Œå¹¶åœ¨å£°æ˜å‰åŠ ä¸Šfriendå…³é”®å­—ï¼Œå®šä¹‰å¯ä»¥åœ¨ç±»ä¸­æˆ–ç±»å¤–ï¼Œå› ä¸ºå‹å…ƒå‡½æ•°ä¸å±äºç±»çš„æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨å‹å…ƒå‡½æ•°æ—¶ä¸éœ€è¦å£°æ˜ä½œç”¨åŸŸ</strong></p></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å‡½æ•°å‹å…ƒçš„åº”ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>() : <span class="built_in">privateData</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">(A&amp; obj)</span></span>;  <span class="comment">// displayPrivateDataå‡½æ•°æ˜¯ç±»Açš„å‹å…ƒ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">(A&amp; obj)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Private data in class A: &quot;</span> &lt;&lt; obj.privateData &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå‡½æ•°<code>displayPrivateData()</code>è¢«å£°æ˜ä¸ºç±»Açš„å‹å…ƒã€‚è¯¥å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜<code>privateData</code>ã€‚</p><p>å‹å…ƒå…³ç³»çš„åº”ç”¨æ–¹å¼å¯ä»¥æœ‰å¤šç§ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å¯ä»¥å°†å…¶ä»–ç±»å£°æ˜ä¸ºå‹å…ƒï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜ï¼Œä»è€Œå®ç°ç±»ä¹‹é—´çš„æ•°æ®å…±äº«æˆ–åä½œã€‚</li><li>å¯ä»¥å£°æ˜ä¸€äº›ç‹¬ç«‹å‡½æ•°ä½œä¸ºå‹å…ƒï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æˆ–å®ç°ç‰¹å®šçš„æ“ä½œã€‚</li></ul><p>è¯·æ³¨æ„ï¼Œå‹å…ƒå…³ç³»ä¼šç ´åå°è£…æ€§ï¼Œå› æ­¤åº”è°¨æ…ä½¿ç”¨ã€‚åªæœ‰åœ¨ç¡®å®éœ€è¦è®¿é—®ç§æœ‰æˆå‘˜å¹¶ä¸”ä¿¡ä»»å‹å…ƒç±»æˆ–å‡½æ•°æ—¶ï¼Œæ‰åº”ä½¿ç”¨å‹å…ƒå…³ç³»ã€‚</p><h1>æšä¸¾</h1><p>åœ¨C++ä¸­ï¼Œæšä¸¾ï¼ˆenumerationï¼‰æ˜¯ä¸€ç§ç”¨äºå®šä¹‰å‘½åå¸¸é‡é›†åˆçš„æ•°æ®ç±»å‹ã€‚æšä¸¾æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºä¸€ç»„ç›¸å…³çš„ç¦»æ•£å€¼ï¼Œå¹¶å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨æšä¸¾çš„åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">EnumName</span> &#123;</span><br><span class="line">    Value1,</span><br><span class="line">    Value2,</span><br><span class="line">    Value3 = <span class="number">10</span>,</span><br><span class="line">    Value4</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>EnumName</code> æ˜¯æšä¸¾ç±»å‹çš„åç§°ã€‚<code>Value1</code>ã€<code>Value2</code>ã€<code>Value3</code> å’Œ <code>Value4</code> æ˜¯æšä¸¾å¸¸é‡ï¼Œå®ƒä»¬ä»£è¡¨äº†æšä¸¾ç±»å‹çš„ä¸åŒå–å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å¸¸é‡çš„å€¼ä¸º 0ï¼Œåç»­çš„æšä¸¾å¸¸é‡çš„å€¼é€’å¢ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ºæšä¸¾å¸¸é‡æŒ‡å®šç‰¹å®šçš„å€¼ï¼ˆå¦‚ <code>Value3 = 10</code>ï¼‰ï¼Œåç»­çš„æšä¸¾å¸¸é‡å°†æŒ‰ç…§å‰ä¸€ä¸ªå¸¸é‡çš„å€¼é€’å¢ã€‚</p><p>æšä¸¾çš„å¸¸é‡å¯ä»¥åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ï¼Œå°±åƒå…¶ä»–å¸¸é‡ä¸€æ ·ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨æšä¸¾çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Day</span> &#123;</span><br><span class="line">    Monday,</span><br><span class="line">    Tuesday,</span><br><span class="line">    Wednesday,</span><br><span class="line">    Thursday,</span><br><span class="line">    Friday,</span><br><span class="line">    Saturday,</span><br><span class="line">    Sunday</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Day today = Wednesday;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (today == Wednesday) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Today is Wednesday.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Today is not Wednesday.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè¡¨ç¤ºæ˜ŸæœŸå‡ çš„æšä¸¾ç±»å‹ <code>Day</code>ï¼Œç„¶åä½¿ç”¨æšä¸¾ç±»å‹åˆ›å»ºäº†ä¸€ä¸ªå˜é‡ <code>today</code>ï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸º <code>Wednesday</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡ä»¶è¯­å¥æ¥æ£€æŸ¥ <code>today</code> æ˜¯å¦ç­‰äº <code>Wednesday</code>ï¼Œå¹¶è¾“å‡ºç›¸åº”çš„æ¶ˆæ¯ã€‚</p><p>æšä¸¾å¯ä»¥ä¸æ•´æ•°ç±»å‹è¿›è¡Œéšå¼è½¬æ¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†æ•´æ•°å€¼è½¬æ¢ä¸ºæšä¸¾ç±»å‹ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Day day = <span class="built_in">static_cast</span>&lt;Day&gt;(<span class="number">2</span>);  <span class="comment">// å°†æ•´æ•°å€¼ 2 è½¬æ¢ä¸º Day æšä¸¾ç±»å‹</span></span><br></pre></td></tr></table></figure><p>æšä¸¾ç±»å‹å¯ä»¥ç”¨ä½œå‡½æ•°çš„å‚æ•°ç±»å‹æˆ–è¿”å›ç±»å‹ï¼Œä»¥æä¾›æ›´å…·å¯è¯»æ€§çš„ä»£ç ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Day <span class="title">getNextDay</span><span class="params">(Day currentDay)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;Day&gt;((currentDay + <span class="number">1</span>) % <span class="number">7</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‡½æ•°æ¥å—ä¸€ä¸ª <code>Day</code> ç±»å‹çš„å‚æ•° <code>currentDay</code>ï¼Œå¹¶è¿”å›ä¸‹ä¸€å¤©çš„æšä¸¾å€¼ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæšä¸¾ä¸­çš„å¸¸é‡åç§°åœ¨åŒä¸€ä½œç”¨åŸŸä¸­æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½é‡å¤å®šä¹‰ç›¸åŒåç§°çš„æšä¸¾å¸¸é‡ã€‚</p><p>é€šè¿‡ä½¿ç”¨æšä¸¾ï¼Œæ‚¨å¯ä»¥æ›´æ¸…æ™°åœ°è¡¨ç¤ºä¸€ç»„ç›¸å…³çš„å¸¸é‡ï¼Œå¹¶ä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><h1>ç»“æ„ä½“</h1><p>åœ¨C++ä¸­ï¼Œç»“æ„ä½“ï¼ˆstructï¼‰æ˜¯ä¸€ç§ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºç»„åˆä¸åŒç±»å‹çš„æ•°æ®æˆå‘˜ã€‚å®ƒç±»ä¼¼äºç±»ï¼ˆclassï¼‰ï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚ä¸‹é¢æ˜¯å…³äºC++ç»“æ„ä½“çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li>å®šä¹‰ç»“æ„ä½“ï¼šç»“æ„ä½“å®šä¹‰ä½¿ç”¨<code>struct</code>å…³é”®å­—ï¼Œåé¢ç´§è·Ÿç»“æ„ä½“çš„åç§°å’Œä¸€å¯¹èŠ±æ‹¬å·ã€‚åœ¨èŠ±æ‹¬å·ä¸­ï¼Œæ‚¨å¯ä»¥å£°æ˜ç»“æ„ä½“çš„æ•°æ®æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">float</span> height;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>Person</code>çš„ç»“æ„ä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªæ•°æ®æˆå‘˜ï¼š<code>age</code>ï¼ˆæ•´æ•°ç±»å‹ï¼‰ï¼Œ<code>name</code>ï¼ˆå­—ç¬¦æ•°ç»„ç±»å‹ï¼‰ï¼Œå’Œ<code>height</code>ï¼ˆæµ®ç‚¹æ•°ç±»å‹ï¼‰ã€‚</p><ol start="2"><li>åˆ›å»ºç»“æ„ä½“å˜é‡ï¼šè¦ä½¿ç”¨ç»“æ„ä½“ï¼Œæ‚¨éœ€è¦åˆ›å»ºç»“æ„ä½“çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä¾‹ï¼ˆå˜é‡ï¼‰ã€‚åˆ›å»ºç»“æ„ä½“å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç»“æ„ä½“åç§°åè·Ÿå˜é‡åç§°ï¼Œå¹¶ç”¨ç»“æ„ä½“çš„æ•°æ®æˆå‘˜åˆå§‹åŒ–å®ƒä»¬ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Person person1;</span><br><span class="line">person1.age = <span class="number">25</span>;</span><br><span class="line"><span class="built_in">strcpy</span>(person1.name, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">person1.height = <span class="number">175.5</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>person1</code>çš„<code>Person</code>ç»“æ„ä½“å˜é‡ï¼Œå¹¶è®¾ç½®äº†å…¶æˆå‘˜çš„å€¼ã€‚</p><ol start="3"><li>è®¿é—®ç»“æ„ä½“æˆå‘˜ï¼šå¯ä»¥ä½¿ç”¨ç‚¹ï¼ˆ<code>.</code>ï¼‰è¿ç®—ç¬¦æ¥è®¿é—®ç»“æ„ä½“å˜é‡çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; person1.name &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; person1.age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Height: &quot;</span> &lt;&lt; person1.height &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†å¦‚ä½•è®¿é—®<code>person1</code>ç»“æ„ä½“å˜é‡çš„æˆå‘˜å¹¶å°†å…¶è¾“å‡ºã€‚</p><ol start="4"><li>ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°ï¼šç»“æ„ä½“å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPersonInfo</span><span class="params">(Person p)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; p.name &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Height: &quot;</span> &lt;&lt; p.height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°å¹¶ä¼ é€’ç»“æ„ä½“å˜é‡</span></span><br><span class="line"><span class="built_in">printPersonInfo</span>(person1);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>printPersonInfo</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code>Person</code>ç»“æ„ä½“å‚æ•°ï¼Œå¹¶æ‰“å°è¯¥ç»“æ„ä½“çš„æˆå‘˜ä¿¡æ¯ã€‚</p><p>è¿™äº›æ˜¯å…³äºC++ç»“æ„ä½“çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ã€‚ç»“æ„ä½“å…è®¸æ‚¨åœ¨ä¸€ä¸ªæ•°æ®ç±»å‹ä¸­ç»„åˆå¤šä¸ªç›¸å…³æ•°æ®æˆå‘˜ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°æ“ä½œå’Œç®¡ç†æ•°æ®ã€‚</p><h1>å…±åŒä½“</h1><p>åœ¨C++ä¸­ï¼Œå…±åŒä½“ï¼ˆunionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå…è®¸åœ¨åŒä¸€å†…å­˜ç©ºé—´ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¸ç»“æ„ä½“ä¸åŒï¼Œå…±åŒä½“çš„æ‰€æœ‰æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜ã€‚å…±åŒä½“çš„å¤§å°ç­‰äºå…¶æœ€å¤§æˆå‘˜çš„å¤§å°ã€‚</p><p>ä¸‹é¢æ˜¯æœ‰å…³C++å…±åŒä½“çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li>å®šä¹‰å…±åŒä½“ï¼šä½¿ç”¨<code>union</code>å…³é”®å­—å®šä¹‰å…±åŒä½“ï¼Œåè·Ÿå…±åŒä½“çš„åç§°å’Œä¸€å¯¹èŠ±æ‹¬å·ã€‚åœ¨èŠ±æ‹¬å·ä¸­ï¼Œæ‚¨å¯ä»¥å£°æ˜å…±åŒä½“çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">    <span class="type">int</span> intValue;</span><br><span class="line">    <span class="type">float</span> floatValue;</span><br><span class="line">    <span class="type">char</span> stringValue[<span class="number">20</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>Data</code>çš„å…±åŒä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªæˆå‘˜ï¼š<code>intValue</code>ï¼ˆæ•´æ•°ç±»å‹ï¼‰ï¼Œ<code>floatValue</code>ï¼ˆæµ®ç‚¹æ•°ç±»å‹ï¼‰ï¼Œå’Œ<code>stringValue</code>ï¼ˆå­—ç¬¦æ•°ç»„ç±»å‹ï¼‰ã€‚</p><ol start="2"><li>ä½¿ç”¨å…±åŒä½“ï¼šå¯ä»¥åˆ›å»ºå…±åŒä½“çš„å®ä¾‹ï¼Œå¹¶å¯¹å…¶æˆå‘˜è¿›è¡Œèµ‹å€¼ã€‚å…±åŒä½“çš„æ‰€æœ‰æˆå‘˜å°†å…±äº«åŒä¸€å—å†…å­˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Data data;</span><br><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line">data.floatValue = <span class="number">3.14</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br><span class="line"><span class="built_in">strcpy</span>(data.stringValue, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;String value: &quot;</span> &lt;&lt; data.stringValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>data</code>çš„<code>Data</code>å…±åŒä½“å®ä¾‹ï¼Œå¹¶å¯¹å…¶ä¸åŒçš„æˆå‘˜èµ‹å€¼ã€‚æ³¨æ„ï¼Œå¯¹ä¸€ä¸ªæˆå‘˜çš„èµ‹å€¼å°†ä¼šå½±å“å…¶ä»–æˆå‘˜çš„å€¼ï¼Œå› ä¸ºå®ƒä»¬å…±äº«åŒä¸€å—å†…å­˜ã€‚</p><ol start="3"><li>è®¿é—®å…±åŒä½“æˆå‘˜ï¼šç”±äºå…±åŒä½“çš„æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜ï¼Œåªèƒ½åŒæ—¶è®¿é—®ä¸€ä¸ªæˆå‘˜ã€‚å¯ä»¥ä½¿ç”¨ç‚¹ï¼ˆ<code>.</code>ï¼‰è¿ç®—ç¬¦æ¥è®¿é—®å…±åŒä½“çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">data.floatValue = <span class="number">3.14</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">strcpy</span>(data.stringValue, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;String value: &quot;</span> &lt;&lt; data.stringValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡è®¿é—®å…±åŒä½“çš„ä¸åŒæˆå‘˜ä¹‹å‰ï¼Œå…ˆä¸ºè¯¥æˆå‘˜èµ‹å€¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®è®¿é—®å’Œè§£é‡Šå…±åŒä½“çš„å†…å®¹ã€‚</p><ol start="4"><li>å…±åŒä½“çš„åº”ç”¨ï¼šå…±åŒä½“å¸¸ç”¨äºåœ¨ä¸åŒç±»å‹ä¹‹é—´è¿›è¡Œç±»å‹è½¬æ¢æˆ–èŠ‚çœå†…å­˜ã€‚é€šè¿‡ä¸ºå…±åŒä½“çš„ä¸åŒæˆå‘˜èµ‹å€¼ï¼Œå¯ä»¥å°†æ•°æ®ä»¥ä¸åŒç±»å‹è¿›è¡Œè§£é‡Šå’Œæ“ä½œã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Data data;</span><br><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">data.floatValue = <span class="built_in">static_cast</span>&lt;<span class="type">float</span>&gt;(data.intValue);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡å°†æ•´æ•°å€¼èµ‹ç»™å…±åŒä½“çš„<code>intValue</code>æˆå‘˜ï¼Œç„¶åå°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°ç±»å‹ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜å†…å­˜ä¸­çš„å€¼çš„æƒ…å†µä¸‹ä»¥ä¸åŒç±»å‹è§£é‡Šè¯¥å€¼ã€‚</p><p>è¿™äº›æ˜¯å…³äºC++</p><p>å…±åŒä½“çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ã€‚å…±åŒä½“æä¾›äº†ä¸€ç§åœ¨ç›¸åŒå†…å­˜ç©ºé—´ä¸­å­˜å‚¨ä¸åŒç±»å‹æ•°æ®çš„æ–¹æ³•ï¼Œä½†éœ€è¦å°å¿ƒä½¿ç”¨ï¼Œç¡®ä¿æ­£ç¡®è§£é‡Šå’Œè®¿é—®å…±åŒä½“çš„æˆå‘˜ã€‚</p><h1>[=]</h1><p>åœ¨C++ä¸­ï¼Œ<code>[=]</code>æ˜¯ä¸€ç§lambdaè¡¨è¾¾å¼çš„æ•è·åˆ—è¡¨ï¼ˆCapture Listï¼‰å½¢å¼ï¼Œç”¨äºæŒ‡å®šlambdaè¡¨è¾¾å¼ä¸­çš„å¤–éƒ¨å˜é‡çš„è®¿é—®æ–¹å¼ã€‚</p><p>Lambdaè¡¨è¾¾å¼æ˜¯C++11å¼•å…¥çš„ä¸€ç§åŒ¿åå‡½æ•°å½¢å¼ï¼Œå®ƒå¯ä»¥ç”¨äºå®šä¹‰ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥æ•è·å±€éƒ¨å˜é‡ï¼Œå³åœ¨å®šä¹‰lambdaè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥è®¿é—®å…¶æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚</p><p>æ•è·åˆ—è¡¨<code>[=]</code>è¡¨ç¤ºé€šè¿‡å€¼æ•è·æ–¹å¼æ¥è®¿é—®å¤–éƒ¨å˜é‡ã€‚å…·ä½“è€Œè¨€ï¼Œä½¿ç”¨<code>[=]</code>æ•è·åˆ—è¡¨ä¼šå¯¼è‡´lambdaè¡¨è¾¾å¼å†…éƒ¨å¯¹å¤–éƒ¨å˜é‡è¿›è¡Œå€¼æ‹·è´ï¼Œä»¥ä¾¿åœ¨lambdaè¡¨è¾¾å¼æ‰§è¡Œæ—¶ä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨<code>[=]</code>æ•è·åˆ—è¡¨çš„lambdaè¡¨è¾¾å¼ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> lambda = [=]() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;x + y = &quot;</span> &lt;&lt; x + y &lt;&lt; std::endl;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lambda</span>();  <span class="comment">// è¾“å‡ºç»“æœï¼šx + y = 30</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œlambdaè¡¨è¾¾å¼ä½¿ç”¨äº†<code>[=]</code>æ•è·åˆ—è¡¨æ¥æ•è·å¤–éƒ¨å˜é‡<code>x</code>å’Œ<code>y</code>ã€‚è¿™æ„å‘³ç€lambdaè¡¨è¾¾å¼å†…éƒ¨å¯ä»¥è®¿é—®å¹¶ä½¿ç”¨è¿™äº›å˜é‡çš„å€¼ã€‚</p><p>å½“æ‰§è¡Œlambdaè¡¨è¾¾å¼æ—¶ï¼Œä¼šè¾“å‡ºå˜é‡<code>x</code>å’Œ<code>y</code>çš„å’Œï¼Œå³30ã€‚è¿™æ˜¯å› ä¸ºåœ¨lambdaè¡¨è¾¾å¼å®šä¹‰æ—¶ï¼Œé€šè¿‡å€¼æ•è·æ–¹å¼å°†<code>x</code>å’Œ<code>y</code>çš„å€¼æ‹·è´åˆ°lambdaå¯¹è±¡ä¸­ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡å€¼æ•è·æ–¹å¼æ•è·çš„å¤–éƒ¨å˜é‡æ˜¯åªè¯»çš„ï¼Œå³æ— æ³•åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä¿®æ”¹è¿™äº›å˜é‡çš„å€¼ã€‚å¦‚æœå¸Œæœ›èƒ½å¤Ÿä¿®æ”¹å¤–éƒ¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨æ•è·æ–¹å¼ï¼ˆ<code>[&amp;]</code>ï¼‰æ¥æ•è·å¤–éƒ¨å˜é‡ã€‚</p><h1>static_cast</h1><p><code>static_cast</code>æ˜¯C++ä¸­çš„ä¸€ç§ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºè¿›è¡Œé™æ€ç±»å‹è½¬æ¢ã€‚å®ƒç”¨äºåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹è½¬æ¢ï¼Œç¼–è¯‘å™¨åœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚<code>static_cast</code>å¯ä»¥ç”¨äºä»¥ä¸‹å‡ ç§è½¬æ¢ï¼š</p><ol><li>ç›¸å…³ç±»å‹çš„è½¬æ¢ï¼š<code>static_cast</code>å¯ç”¨äºç›¸äº’å…³è”çš„ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä¾‹å¦‚æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼ˆä¾‹å¦‚ï¼Œæ•´æ•°åˆ°æµ®ç‚¹æ•°ï¼Œæµ®ç‚¹æ•°åˆ°æ•´æ•°ï¼‰ï¼Œä»¥åŠæŒ‡é’ˆå’Œå¼•ç”¨ä¹‹é—´çš„è½¬æ¢ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> intValue = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> doubleValue = <span class="built_in">static_cast</span>&lt;<span class="type">double</span>&gt;(intValue);</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> floatValue = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">int</span> intFromFloat = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(floatValue);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;number;</span><br><span class="line"><span class="type">void</span>* voidPtr = <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(ptr);</span><br></pre></td></tr></table></figure><ol start="2"><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„è½¬æ¢ï¼š<code>static_cast</code>å¯ç”¨äºåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ä¸æ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ä¹‹é—´çš„è½¬æ¢ã€‚ä½†æ˜¯ï¼Œè¿™ç§è½¬æ¢åªæœ‰åœ¨ç¡®ä¿æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡å®é™…ä¸Šæ˜¯æ´¾ç”Ÿç±»å¯¹è±¡æ—¶æ‰æ˜¯å®‰å…¨çš„ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123; ... &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line">Base* basePtr = <span class="keyword">new</span> <span class="built_in">Derived</span>();</span><br><span class="line">Derived* derivedPtr = <span class="built_in">static_cast</span>&lt;Derived*&gt;(basePtr);</span><br></pre></td></tr></table></figure><ol start="3"><li>éšå¼ç±»å‹è½¬æ¢çš„æ˜¾å¼åŒ–ï¼š<code>static_cast</code>å¯ä»¥å°†ç¼–è¯‘å™¨éšå¼æ‰§è¡Œçš„ç±»å‹è½¬æ¢æ˜¾å¼åŒ–ã€‚è¿™å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œæ˜ç¡®æ€§ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> y = <span class="built_in">static_cast</span>&lt;<span class="type">double</span>&gt;(x);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> ch = <span class="built_in">static_cast</span>&lt;<span class="type">char</span>&gt;(x);</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>static_cast</code>å¹¶ä¸ä¼šæ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥ï¼Œå› æ­¤åœ¨è¿›è¡Œè½¬æ¢æ—¶è¦ç¡®ä¿è½¬æ¢æ˜¯å®‰å…¨çš„ã€‚å¦‚æœå­˜åœ¨ä¸å®‰å…¨çš„è½¬æ¢ï¼Œåº”è¯¥ä½¿ç”¨æ›´ä¸¥æ ¼çš„è½¬æ¢æ“ä½œç¬¦ï¼ˆå¦‚<code>dynamic_cast</code>ï¼‰æ¥è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p><p>å¦å¤–ï¼Œ<code>static_cast</code>ä¹Ÿä¸èƒ½ç”¨äºå°†åº•å±‚constè½¬æ¢ä¸ºéåº•å±‚constï¼Œæˆ–è€…æ‰§è¡Œä¸åº•å±‚constæ— å…³çš„å…¶ä»–è½¬æ¢ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨<code>const_cast</code>å’Œ<code>reinterpret_cast</code>è¿›è¡Œè½¬æ¢ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>static_cast</code>æ˜¯ä¸€ç§ç”¨äºé™æ€ç±»å‹è½¬æ¢çš„æ“ä½œç¬¦ï¼Œé€‚ç”¨äºç›¸å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„è½¬æ¢ï¼Œä»¥åŠæ˜¾å¼åŒ–éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨ä½¿ç”¨<code>static_cast</code>æ—¶ï¼Œè¦ç¡®ä¿è½¬æ¢æ˜¯å®‰å…¨çš„å¹¶éµå¾ªC++çš„ç±»å‹ç³»ç»Ÿè§„åˆ™ã€‚</p><h1>goto</h1><p><code>goto</code>æ˜¯C++ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå®ç°æ— æ¡ä»¶çš„è·³è½¬è¯­å¥ã€‚å®ƒå¯ä»¥å°†ç¨‹åºçš„æ§åˆ¶æµç›´æ¥è·³è½¬åˆ°æŒ‡å®šçš„æ ‡ç­¾å¤„ã€‚<code>goto</code>è¯­å¥çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">label_name:</span><br><span class="line">    <span class="comment">// ä»£ç å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·³è½¬åˆ°æŒ‡å®šçš„æ ‡ç­¾å¤„</span></span><br><span class="line"><span class="keyword">goto</span> label_name;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›å…³äº<code>goto</code>ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹çš„è¯´æ˜ï¼š</p><ol><li><code>goto</code>çš„ä½¿ç”¨æ–¹æ³•ï¼šé¦–å…ˆï¼Œåœ¨ä»£ç ä¸­å®šä¹‰ä¸€ä¸ªæ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œå¹¶åœ¨æ ‡ç­¾åé¢è·Ÿç€ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ã€‚ç„¶åï¼Œé€šè¿‡ä½¿ç”¨<code>goto</code>å…³é”®å­—ï¼Œå°†ç¨‹åºçš„æ§åˆ¶æµæ— æ¡ä»¶åœ°è·³è½¬åˆ°æ ‡ç­¾æ‰€åœ¨çš„ä½ç½®ã€‚è¿™ç§è·³è½¬å¯ä»¥åœ¨åŒä¸€ä¸ªå‡½æ•°å†…éƒ¨ã€è·¨è¶Šå¤šä¸ªä»£ç å—æˆ–å‡½æ•°ä¹‹é—´è¿›è¡Œã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€äº›ä»£ç ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">goto</span> jump;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™éƒ¨åˆ†ä»£ç å°†è¢«è·³è¿‡</span></span><br><span class="line"></span><br><span class="line">    jump:</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°è¿™é‡Œç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p><code>goto</code>çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>é¿å…æ»¥ç”¨ï¼š<code>goto</code>è¯­å¥çš„æ»¥ç”¨ä¼šå¯¼è‡´ç¨‹åºçš„é€»è¾‘å˜å¾—æ··ä¹±å’Œéš¾ä»¥ç†è§£ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨ç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥ï¼ˆå¦‚<code>if</code>ã€<code>while</code>ã€<code>for</code>ç­‰ï¼‰æ¥å®ç°ä»£ç é€»è¾‘ã€‚</p></li><li><p>é˜²æ­¢è·¨è¿‡å˜é‡åˆå§‹åŒ–ï¼šä½¿ç”¨<code>goto</code>è¯­å¥æ—¶è¦å°å¿ƒï¼Œä»¥é˜²æ­¢è·³è¿‡å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚å¦‚æœåœ¨è·³è½¬å‰éœ€è¦å¯¹æŸä¸ªå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç¡®ä¿å˜é‡çš„åˆå§‹åŒ–æ“ä½œä½äºæ ‡ç­¾ä¹‹å‰ã€‚</p></li><li><p>é¿å…è·¨å‡½æ•°è·³è½¬ï¼šåº”é¿å…åœ¨ä¸åŒå‡½æ•°ä¹‹é—´ä½¿ç”¨<code>goto</code>è¯­å¥è¿›è¡Œè·³è½¬ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§å’Œå¯è¯»æ€§ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚</p></li><li><p>ä¿æŒä»£ç æ¸…æ™°å’Œå¯è¯»æ€§ï¼šä½¿ç”¨<code>goto</code>è¯­å¥æ—¶ï¼Œåº”è¯¥æ³¨é‡ä»£ç çš„æ¸…æ™°æ€§å’Œå¯è¯»æ€§ã€‚ç»™æ ‡ç­¾å’Œè·³è½¬è¯­å¥èµ·å…·æœ‰æè¿°æ€§çš„åç§°ï¼Œä»¥ä¾¿äºä»–äººç†è§£ä»£ç çš„é€»è¾‘ã€‚</p></li><li><p>å°½é‡é¿å…ä½¿ç”¨ï¼šç”±äº<code>goto</code>è¯­å¥å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ï¼Œä»¥åŠæ½œåœ¨çš„é”™è¯¯å’Œæ··ä¹±ï¼Œå»ºè®®å°½é‡é¿å…ä½¿ç”¨<code>goto</code>è¯­å¥ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥å¯ä»¥æ›´å¥½åœ°è¡¨è¾¾ä»£ç çš„é€»è¾‘ã€‚</p></li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡<code>goto</code>è¯­å¥åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æä¾›æ–¹ä¾¿ï¼Œä½†å®ƒå¾€å¾€è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸è‰¯çš„ç¼–ç¨‹å®è·µï¼Œåº”è¯¥è°¨æ…ä½¿ç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥æ¥ç»„</p><p>ç»‡ä»£ç å¹¶ä¿æŒä»£ç çš„æ¸…æ™°æ€§å’Œå¯è¯»æ€§ã€‚</p><h1>auto</h1><p>åœ¨C++ä¸­ï¼Œ<code>auto</code>å…³é”®å­—ç”¨äºè‡ªåŠ¨æ¨æ–­å˜é‡çš„ç±»å‹ã€‚é€šè¿‡ä½¿ç”¨<code>auto</code>å…³é”®å­—ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å˜é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼æ¥æ¨æ–­å˜é‡çš„ç±»å‹ï¼Œæ— éœ€æ˜¾å¼æŒ‡å®šç±»å‹ã€‚</p><p><code>auto</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> variable = value;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>variable</code>æ˜¯å˜é‡åï¼Œ<code>value</code>æ˜¯å˜é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> x = <span class="number">10</span>;  <span class="comment">// æ¨æ–­xçš„ç±»å‹ä¸ºintï¼Œåˆå§‹åŒ–ä¸º10</span></span><br><span class="line"><span class="keyword">auto</span> y = <span class="number">3.14</span>;  <span class="comment">// æ¨æ–­yçš„ç±»å‹ä¸ºdoubleï¼Œåˆå§‹åŒ–ä¸º3.14</span></span><br><span class="line"><span class="keyword">auto</span> name = <span class="string">&quot;John&quot;</span>;  <span class="comment">// æ¨æ–­nameçš„ç±»å‹ä¸ºconst char*ï¼Œåˆå§‹åŒ–ä¸ºæŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">auto</span> result = <span class="built_in">add</span>(<span class="number">5</span>, <span class="number">7</span>);  <span class="comment">// æ¨æ–­resultçš„ç±»å‹ä¸ºå‡½æ•°addçš„è¿”å›ç±»å‹ï¼Œæ ¹æ®å‡½æ•°å®šä¹‰æ¥æ¨æ–­</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨<code>auto</code>å…³é”®å­—ï¼Œå¯ä»¥ç®€åŒ–å˜é‡å£°æ˜çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯å½“å˜é‡çš„ç±»å‹è¾ƒä¸ºå¤æ‚æˆ–éš¾ä»¥ç¡®å®šæ—¶ã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼çš„ç±»å‹æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>auto</code>å…³é”®å­—åœ¨å˜é‡å£°æ˜æ—¶ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºå‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹ã€ç±»çš„æˆå‘˜å˜é‡ç­‰åœºæ™¯ã€‚æ­¤å¤–ï¼Œç”±äºç±»å‹æ˜¯åœ¨ç¼–è¯‘æ—¶æ¨æ–­çš„ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä»£ç å¯è¯»æ€§é™ä½ï¼Œç‰¹åˆ«æ˜¯å½“åˆå§‹åŒ–è¡¨è¾¾å¼è¾ƒä¸ºå¤æ‚æˆ–ç±»å‹ä¸æ˜æ˜¾æ—¶ã€‚</p><p>åœ¨C++11ä¹‹åï¼Œå¼•å…¥äº†æ›´åŠ å¼ºå¤§çš„ç±»å‹æ¨æ–­åŠŸèƒ½ï¼Œä¾‹å¦‚<code>decltype</code>å’Œ<code>auto</code>ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥æ›´çµæ´»åœ°æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ã€‚åœ¨C++14ä¸­ï¼Œè¿˜å¼•å…¥äº†<code>decltype(auto)</code>æ¥è¿›è¡Œæ›´ç²¾ç¡®çš„ç±»å‹æ¨æ–­ã€‚è¿™äº›åŠŸèƒ½åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹å¯ä»¥æä¾›æ›´çµæ´»å’Œå‡†ç¡®çš„ç±»å‹æ¨æ–­ã€‚</p><h1>typeid</h1><p>åœ¨C++ä¸­ï¼Œ<code>typeid</code>æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºè·å–è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒè¿”å›ä¸€ä¸ª<code>type_info</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æœ‰å…³è¡¨è¾¾å¼ç±»å‹çš„ä¿¡æ¯ã€‚<code>typeid</code>å¯ä»¥ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol><li>è·å–ç±»å‹ä¿¡æ¯ï¼šä½¿ç”¨<code>typeid</code>å¯ä»¥è·å–è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒå¯ä»¥ç”¨äºå˜é‡ã€å¯¹è±¡ã€æŒ‡é’ˆã€å¼•ç”¨ä»¥åŠç±»çš„å®ä¾‹ç­‰ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(num);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">MyClass obj;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; objType = <span class="built_in">typeid</span>(obj);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; objType.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç±»å‹æ¯”è¾ƒï¼šå¯ä»¥ä½¿ç”¨<code>typeid</code>æ¥æ¯”è¾ƒä¸¤ä¸ªè¡¨è¾¾å¼çš„ç±»å‹æ˜¯å¦ç›¸åŒã€‚å¦‚æœç±»å‹ç›¸åŒï¼Œæ¯”è¾ƒç»“æœä¸º<code>true</code>ï¼›å¦åˆ™ä¸º<code>false</code>ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">typeid</span>(a) == <span class="built_in">typeid</span>(b)) &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ç›¸åŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ä¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>éœ€è¦åŒ…å« <code>&lt;typeinfo&gt;</code> å¤´æ–‡ä»¶ä»¥ä½¿ç”¨ <code>typeid</code>ã€‚</li><li><code>type_info</code> ç±»å‹çš„å¯¹è±¡åœ¨ä¸åŒçš„ç¼–è¯‘å•å…ƒä¸­å¯èƒ½å…·æœ‰ä¸åŒçš„åœ°å€ï¼Œå› æ­¤ä¸èƒ½å°†å…¶åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚</li><li><code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>const char*</code> æŒ‡é’ˆï¼Œè¡¨ç¤ºç±»å‹çš„åç§°ã€‚è¯¥åç§°çš„å…·ä½“æ ¼å¼å¯èƒ½å› ç¼–è¯‘å™¨è€Œå¼‚ã€‚</li><li>ç”±äºç±»å‹åç§°çš„å…·ä½“æ ¼å¼æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„ï¼Œå› æ­¤ä¸åº”ä¾èµ–äº <code>name()</code> è¿”å›çš„å­—ç¬¦ä¸²è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>typeid</code>ä¸»è¦ç”¨äºè¿è¡Œæ—¶çš„ç±»å‹ä¿¡æ¯ï¼Œå› æ­¤å®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¤šæ€ç±»çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œ<code>typeid</code>å°†è¿”å›æŒ‡å‘å®é™…å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŒ‡å‘åŸºç±»çš„ç±»å‹ä¿¡æ¯ã€‚ä¸ºäº†æ­£ç¡®ä½¿ç”¨<code>typeid</code>ï¼Œè¯·ç¡®ä¿åœ¨ä½¿ç”¨å‰å·²ç»äº†è§£äº†ç›¸å…³ç±»å‹çš„ç‰¹æ€§å’Œä½¿ç”¨çº¦æŸã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<code>typeid</code>è¿ç®—ç¬¦å¯ç”¨äºè·å–å’Œæ¯”è¾ƒè¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ï¼Œå¯¹äºè°ƒè¯•ã€ç±»å‹æ£€æŸ¥å’Œè¿è¡Œæ—¶å¤šæ€ç­‰æ–¹é¢æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h1>type_info</h1><p><code>type_info</code> æ˜¯ C++ æ ‡å‡†åº“ <code>&lt;typeinfo&gt;</code> ä¸­å®šä¹‰çš„ç±»ï¼Œå®ƒç”¨äºæä¾›æœ‰å…³ç±»å‹çš„è¿è¡Œæ—¶ä¿¡æ¯ã€‚<code>type_info</code> ç±»ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>è·å–ç±»å‹ä¿¡æ¯ï¼šé€šè¿‡ä½¿ç”¨ <code>typeid</code> è¿ç®—ç¬¦ï¼Œå¯ä»¥è·å¾—è¡¨è¾¾å¼çš„ <code>type_info</code> å¯¹è±¡ï¼Œä»è€Œè·å–æœ‰å…³ç±»å‹çš„ä¿¡æ¯ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(num);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç±»å‹æ¯”è¾ƒï¼š<code>type_info</code> å¯¹è±¡å¯ä»¥è¿›è¡Œç±»å‹æ¯”è¾ƒï¼Œä»¥æ£€æŸ¥ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">typeid</span>(a) == <span class="built_in">typeid</span>(b)) &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ç›¸åŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ä¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>è·å–ç±»å‹åç§°ï¼š<code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>const char*</code> æŒ‡é’ˆï¼Œè¡¨ç¤ºç±»å‹çš„åç§°ã€‚è¯·æ³¨æ„ï¼Œè¿”å›çš„åç§°å¯èƒ½å…·æœ‰å¹³å°å’Œç¼–è¯‘å™¨ç‰¹å®šçš„æ ¼å¼ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(<span class="type">int</span>);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type name: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><code>type_info</code> ç±»åœ¨å¤´æ–‡ä»¶ <code>&lt;typeinfo&gt;</code> ä¸­å®šä¹‰ï¼Œå› æ­¤éœ€è¦åŒ…å«è¯¥å¤´æ–‡ä»¶æ‰èƒ½ä½¿ç”¨å®ƒã€‚</li><li><code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›çš„ç±»å‹åç§°ä¸ä¸€å®šæ˜¯äººç±»å¯è¯»çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ç¼–è¯‘å™¨ç‰¹å®šçš„æ ‡è¯†ç¬¦ã€‚</li><li><code>type_info</code> çš„ <code>==</code> æ“ä½œç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ª <code>type_info</code> å¯¹è±¡æ˜¯å¦ä»£è¡¨ç›¸åŒçš„ç±»å‹ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç±»å‹åç§°ã€‚</li></ul><p>ç”±äº <code>type_info</code> ç±»æä¾›çš„ä¿¡æ¯æ˜¯åœ¨è¿è¡Œæ—¶è·å¾—çš„ï¼Œå› æ­¤å®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å…·æœ‰ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¤šæ€ç±»çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œ<code>type_info</code> è¿”å›çš„ç±»å‹ä¿¡æ¯å°†æ˜¯æŒ‡å‘å®é™…å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŒ‡å‘åŸºç±»çš„ç±»å‹ä¿¡æ¯ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>type_info</code> ç±»æä¾›äº†è·å–è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯çš„åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç±»å‹æ¯”è¾ƒã€‚å®ƒå¯¹äºå®ç°è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€å¤šæ€å’Œå…¶ä»–éœ€è¦ç±»å‹ä¿¡æ¯çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œç”±äºç±»å‹åç§°çš„å…·ä½“æ ¼å¼æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨ <code>type_info</code> è¿”å›çš„åç§°æ—¶åº”è°¨æ…å¯¹å¾…ã€‚</p><h1>nullptr</h1><p><code>nullptr</code> æ˜¯ C++11 å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆå¸¸é‡ã€‚å®ƒæ˜¯ç”¨æ¥æ˜ç¡®è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆå¯¹è±¡æˆ–å‡½æ•°çš„ç‰¹æ®Šå€¼ã€‚åœ¨ä¹‹å‰çš„ C++ æ ‡å‡†ä¸­ï¼Œé€šå¸¸ä½¿ç”¨å®å®šä¹‰ <code>NULL</code> æˆ–æ•´æ•°å¸¸é‡ <code>0</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚</p><p>ä½¿ç”¨ <code>nullptr</code> çš„å¥½å¤„åŒ…æ‹¬ï¼š</p><ol><li>æ¸…æ™°æ˜ç¡®ï¼š<code>nullptr</code> æ˜¾å¼åœ°è¡¨è¾¾äº†æŒ‡é’ˆä¸ºç©ºçš„å«ä¹‰ï¼Œé¿å…äº†ä¸æ•´æ•°é›¶çš„æ··æ·†ã€‚</li><li>ç±»å‹å®‰å…¨ï¼š<code>nullptr</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºæŒ‡é’ˆç±»å‹ï¼Œå®ƒä¸èƒ½éšå¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œä»è€Œé¿å…äº†ç±»å‹é”™è¯¯ã€‚</li><li>å‡å°‘é‡è½½æ­§ä¹‰ï¼šå½“å­˜åœ¨å¤šä¸ªå‡½æ•°é‡è½½æ—¶ï¼Œä¼ é€’ <code>nullptr</code> å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨æ­£ç¡®åœ°é€‰æ‹©å‡½æ•°é‡è½½ç‰ˆæœ¬ã€‚</li></ol><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ <code>nullptr</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">char</span>* ptr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">foo</span>(<span class="literal">nullptr</span>);  <span class="comment">// è°ƒç”¨ foo(char*) å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>* ptr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="comment">// æŒ‡é’ˆä¸ºç©º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªé‡è½½çš„ <code>foo</code> å‡½æ•°ï¼Œä¸€ä¸ªæ¥å— <code>char*</code> ç±»å‹çš„æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªæ¥å— <code>int*</code> ç±»å‹çš„æŒ‡é’ˆã€‚å½“æˆ‘ä»¬ä¼ é€’ <code>nullptr</code> ç»™ <code>foo</code> å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šé€‰æ‹©æ¥å— <code>char*</code> ç±»å‹çš„ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨ <code>==</code> è¿ç®—ç¬¦å°†æŒ‡é’ˆ <code>ptr</code> ä¸ <code>nullptr</code> è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºã€‚</p><p>æ€»ç»“è€Œè¨€ï¼Œ<code>nullptr</code> æ˜¯ C++11 å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆå¸¸é‡ã€‚å®ƒæä¾›äº†æ›´æ˜ç¡®çš„è¯­ä¹‰ã€ç±»å‹å®‰å…¨å’Œå‡å°‘é‡è½½æ­§ä¹‰çš„ä¼˜ç‚¹ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œå¥å£®ã€‚åœ¨ç¼–å†™æ–°çš„ C++ ä»£ç æ—¶ï¼Œæ¨èä½¿ç”¨ <code>nullptr</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚</p><h1>ç®€æ˜“å­¦ç”Ÿç®¡ç†ç³»ç»Ÿæ¨¡æ¿</h1><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€æ˜“çš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿçš„ç¤ºä¾‹ä»£ç ï¼Œå®ƒåŒ…æ‹¬äº†å­¦ç”Ÿç±»å’Œä¸€ä¸ªç®¡ç†ç³»ç»Ÿç±»ï¼Œå¯ä»¥æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿç­‰åŠŸèƒ½ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age, <span class="type">const</span> std::string&amp; id)</span><br><span class="line">        : <span class="built_in">name</span>(name), <span class="built_in">age</span>(age), <span class="built_in">id</span>(id) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getID</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayInfo</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot;, Age: &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot;, ID: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    std::string id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentManagementSystem</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addStudent</span><span class="params">(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age, <span class="type">const</span> std::string&amp; id)</span> </span>&#123;</span><br><span class="line">        <span class="function">Student <span class="title">student</span><span class="params">(name, age, id)</span></span>;</span><br><span class="line">        students.<span class="built_in">push_back</span>(student);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student added successfully.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayAllStudents</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (students.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;No students found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;All students:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">                student.<span class="built_in">displayInfo</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">searchStudent</span><span class="params">(<span class="type">const</span> std::string&amp; id)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="type">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">            <span class="keyword">if</span> (student.<span class="built_in">getID</span>() == id) &#123;</span><br><span class="line">                found = <span class="literal">true</span>;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Student found:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                student.<span class="built_in">displayInfo</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!found) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Student not found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::vector&lt;Student&gt; students;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentManagementSystem system;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">20</span>, <span class="string">&quot;1001&quot;</span>);</span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">19</span>, <span class="string">&quot;1002&quot;</span>);</span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">21</span>, <span class="string">&quot;1003&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">displayAllStudents</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">searchStudent</span>(<span class="string">&quot;1002&quot;</span>);</span><br><span class="line">    system.<span class="built_in">searchStudent</span>(<span class="string">&quot;1004&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Student</code> ç±»è¡¨ç¤ºå­¦ç”Ÿï¼Œå…·æœ‰å§“åã€å¹´é¾„å’Œå­¦å·ç­‰å±æ€§ï¼Œå¹¶æä¾›äº†è·å–å’Œæ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯çš„æˆå‘˜å‡½æ•°ã€‚</p><p><code>StudentManagementSystem</code> ç±»è¡¨ç¤ºå­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼Œå®ƒåŒ…å«ä¸€ä¸ªå­¦ç”Ÿåˆ—è¡¨ï¼ˆä½¿ç”¨ <code>std::vector&lt;Student&gt;</code> å­˜å‚¨å­¦ç”Ÿï¼‰ï¼Œæä¾›äº†æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿçš„æˆå‘˜å‡½æ•°ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>StudentManagementSystem</code> å¯¹è±¡ <code>system</code>ï¼Œå¹¶ä½¿ç”¨å…¶æˆå‘˜å‡½æ•°æ¥æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿã€‚è¾“å‡ºç»“æœä¸ºæ·»åŠ çš„å­¦ç”Ÿä¿¡æ¯ã€æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ä»¥åŠæŸ¥æ‰¾åˆ°çš„å­¦ç”Ÿä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</p><p>è¯·æ³¨æ„ï¼Œä¸Šè¿°ä»£ç æ˜¯ä¸€ä¸ªç®€æ˜“çš„ç¤ºä¾‹ï¼Œæ²¡æœ‰åŒ…æ‹¬é”™è¯¯å¤„ç†å’ŒæŒä¹…åŒ–å­˜å‚¨ç­‰å®Œæ•´çš„åŠŸèƒ½ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„åŠŸèƒ½å’Œæ›´å¤æ‚çš„è®¾è®¡æ¥æ»¡</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»C++çš„æ•°æ®ç±»å‹ã€ç±»ã€ç»“æ„ä½“ç­‰åŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
  </entry>
  
</feed>
