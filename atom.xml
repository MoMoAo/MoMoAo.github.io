<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MoMoAoğŸ“</title>
  
  <subtitle>MoMoAo&#39;s Blog</subtitle>
  <link href="https://momoao.github.io/atom.xml" rel="self"/>
  
  <link href="https://momoao.github.io/"/>
  <updated>2023-09-16T10:43:54.808Z</updated>
  <id>https://momoao.github.io/</id>
  
  <author>
    <name>MoMoAoğŸ“</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MyBatis-Plus</title>
    <link href="https://momoao.github.io/posts/202309142103.html"/>
    <id>https://momoao.github.io/posts/202309142103.html</id>
    <published>2023-09-14T10:19:03.000Z</published>
    <updated>2023-09-16T10:43:54.808Z</updated>
    
    <content type="html"><![CDATA[<h1>MyBatis-Plus</h1><div class="note info flat"><p>å‚è€ƒï¼šå­¦ä¹ å‚è€ƒBç«™å°šç¡…è°·-MyBatisPlusæ•™ç¨‹</p></div><p><a href="https://baomidou.com/pages/24112f/">MyBatis-Pluså®˜ç½‘æ–‡æ¡£</a></p><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p><strong>MyBatis-Plus</strong>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <strong>MyBatis****çš„å¢å¼ºå·¥å…·</strong>ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Š<strong>åªåšå¢å¼ºä¸åšæ”¹å˜</strong>ï¼Œä¸º</p><p><strong>ç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿ</strong>ã€‚</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915155128685.png" alt="image-20230915155128685"></p><h3 id="ç‰¹æ€§"><strong>ç‰¹æ€§</strong></h3><p><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p><p><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</p><p><strong>å¼ºå¤§çš„</strong> <strong>CRUD</strong> <strong>æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ†</p><p>CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</p><p><strong>æ”¯æŒ</strong> <strong>Lambda</strong> <strong>å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p><p><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±</p><p>é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p><p><strong>æ”¯æŒ</strong> <strong>ActiveRecord</strong> <strong>æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼º</p><p>å¤§çš„ CRUD æ“ä½œ</p><p><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</p><p><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€</p><p>Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</p><p><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰</p><p>åŒäºæ™®é€š List æŸ¥è¯¢</p><p><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€</p><p>Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</p><p><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡º</p><p>æ…¢æŸ¥è¯¢</p><p><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²</p><p>è¯¯æ“ä½œ</p><h3 id="æ”¯æŒæ•°æ®åº“">æ”¯æŒæ•°æ®åº“</h3><p>ä»»ä½•èƒ½ä½¿ç”¨MyBatisè¿›è¡Œ CRUD, å¹¶ä¸”æ”¯æŒæ ‡å‡† SQL çš„æ•°æ®åº“ï¼Œå…·ä½“æ”¯æŒæƒ…å†µå¦‚ä¸‹</p><p>MySQLï¼ŒOracleï¼ŒDB2ï¼ŒH2ï¼ŒHSQLï¼ŒSQLiteï¼ŒPostgreSQLï¼ŒSQLServerï¼ŒPhoenixï¼ŒGauss ï¼Œ</p><p>ClickHouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼ŒCubridï¼ŒGoldilocksï¼Œcsiidb</p><p>è¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®</p><p>åº“ï¼Œç€šé«˜æ•°æ®åº“</p><h3 id="æ¡†æ¶ç»“æ„">æ¡†æ¶ç»“æ„</h3><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915155214820.png" alt="image-20230915155214820"></p><h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><p>IDEï¼šidea 2022.3</p><p>JDKï¼šJDK8+</p><p>æ„å»ºå·¥å…·ï¼šmaven 3.5.4</p><p>MySQLç‰ˆæœ¬ï¼šMySQL 8.3</p><p>Spring Bootï¼š2.6.3</p><p>MyBatis-Plusï¼š3.5.1</p><h2 id="åˆè¯†">åˆè¯†</h2><p>åœ¨iocå®¹å™¨ä¸­åªèƒ½å­˜åœ¨ç±»å¯¹åº”çš„beanä¸èƒ½å­˜åœ¨æ¥å£å¯¹åº”çš„bean</p><h3 id="æ•°æ®åº“">æ•°æ®åº“</h3><p>ä½¿ç”¨MySQLåˆ›å»ºæ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `mybatis_plus` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;</span><br><span class="line">use `mybatis_plus`;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">`id` bigint(20) NOT NULL COMMENT &#x27;ä¸»é”®ID&#x27;,</span><br><span class="line">`name` varchar(30) DEFAULT NULL COMMENT &#x27;å§“å&#x27;,</span><br><span class="line">`age` int(11) DEFAULT NULL COMMENT &#x27;å¹´é¾„&#x27;,</span><br><span class="line">`email` varchar(50) DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO user (id, name, age, email) VALUES</span><br><span class="line">(1, &#x27;Jone&#x27;, 18, &#x27;test1@baomidou.com&#x27;),</span><br><span class="line">(2, &#x27;Jack&#x27;, 20, &#x27;test2@baomidou.com&#x27;),</span><br><span class="line">(3, &#x27;Tom&#x27;, 28, &#x27;test3@baomidou.com&#x27;),</span><br><span class="line">(4, &#x27;Sandy&#x27;, 21, &#x27;test4@baomidou.com&#x27;),</span><br><span class="line">(5, &#x27;Billie&#x27;, 24, &#x27;test5@baomidou.com&#x27;);</span><br></pre></td></tr></table></figure><h3 id="IDEA">IDEA</h3><p>ä½¿ç”¨IDEAåˆ›å»ºSpringBootå·¥ç¨‹</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915151757559.png" alt="image-20230915151757559"></p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915151831974.png" alt="image-20230915151831974"></p><p>å¼•å…¥mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®application-yml">é…ç½®application.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment"># é…ç½®æ•°æ®æºç±»å‹</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="comment"># é…ç½®è¿æ¥æ•°æ®åº“çš„å„ä¸ªä¿¡æ¯</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;userSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">mysql123456</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå¯åŠ¨ç±»">åˆ›å»ºå¯åŠ¨ç±»</h3><p>åœ¨Spring Bootå¯åŠ¨ç±»ä¸­æ·»åŠ @MapperScanæ³¨è§£ï¼Œæ‰«æmapperåŒ…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisplusApplication</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MybatisplusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å®ä½“">æ·»åŠ å®ä½“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ </span></span><br><span class="line"><span class="comment">//@NoArgsConstructor</span></span><br><span class="line"><span class="comment">//æ‰€æœ‰å‚æ•°çš„æœ‰å‚æ„é€ </span></span><br><span class="line"><span class="comment">//@AllArgsConstructor</span></span><br><span class="line"><span class="comment">//@Getter</span></span><br><span class="line"><span class="comment">//@Setter</span></span><br><span class="line"><span class="comment">//@EqualsAndHashCode</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ Mapper">æ·»åŠ Mapper</h3><p>BaseMapperæ¥å£ç”±MaBatis-plusæä¾›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•">æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆï¼Œè‹¥æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™å¯ä»¥è®¾ç½®nullä¸ºå‚æ•°</span></span><br><span class="line">        <span class="comment">//ç›¸å½“äºselect (æ‰€æœ‰åˆ—åï¼Œå¹¶é*) from User</span></span><br><span class="line">        List&lt;User&gt; list = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‘ç°    private UserMapper userMapper;è¿™è¡ŒæŠ¥é”™ï¼Œæ˜¯å› ä¸ºUserMapper æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç³»ç»Ÿä¼šç”»çº¢çº¿æç¤ºï¼šâ€œæ— æ³•è‡ªåŠ¨è£…é…ï¼Œæ‰¾ä¸åˆ°â€˜UserMapperâ€™çš„beanâ€ï¼Œè¿™æ˜¯å› ä¸ºUserMapper ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¦åœ¨UserMapper æ¥å£çš„å®šä¹‰ä¸ŠåŠ ä¸€ä¸ª@Repositoryæ³¨è§£</p><p>å°†è¿™ä¸ªæ¥å£æ ‡è¯†ä¸ºæŒä¹…å±‚ç»„ä»¶ï¼ˆç±»ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡è¯†ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ æ—¥å¿—åŠŸèƒ½">æ·»åŠ æ—¥å¿—åŠŸèƒ½</h3><p>åœ¨ymlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ è¿™ä¸ªåŠŸèƒ½åè¾“å‡ºçš„æ—¥å¿—ä¸­å°†å‡ºç°MyBatis-Plusè‡ªåŠ¨ç”Ÿæˆå¹¶æ‰§è¡Œçš„SQLè¯­å¥</p><h3 id="CRUDæµ‹è¯•">CRUDæµ‹è¯•</h3><h4 id="å¢åŠ ">å¢åŠ </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å®ç°æ–°å¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//INSERT INTO user ( id, name, age, email ) VALUES ( ?, ?, ?, ? )</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="comment">//user.setId(100L);</span></span><br><span class="line">    user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">23</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;zhangsan@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">    System.out.println(<span class="string">&quot;id:&quot;</span>+user.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤">åˆ é™¤</h4><p>ä¸€å…±æœ‰5ç§æ–¹æ³•</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915175602725.png" alt="image-20230915175602725"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡idåˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE id=?</span></span><br><span class="line">    <span class="comment">//æ³¨æ„è¿™é‡Œå› ä¸ºIDçš„å€¼è¶…å‡ºäº†intçš„èŒƒå›´ï¼Œæ‰€ä»¥è¦åŠ ä¸€ä¸ªLï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°å­—æ˜¯ä¸€ä¸ªé•¿æ•´æ•°</span></span><br><span class="line">    <span class="comment">/*int result = userMapper.deleteById(1492767055210991617L);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;result:&quot;+result);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®mapé›†åˆä¸­æ‰€è®¾ç½®çš„æ¡ä»¶åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">        map.put(&quot;name&quot;, &quot;å¼ ä¸‰&quot;);</span></span><br><span class="line"><span class="comment">        map.put(&quot;age&quot;, 23);</span></span><br><span class="line"><span class="comment">        int result = userMapper.deleteByMap(map);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;result:&quot;+result);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é€šè¿‡å¤šä¸ªidå®ç°æ‰¹é‡åˆ é™¤</span></span><br><span class="line">    <span class="comment">//DELETE FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    List&lt;Long&gt; list = Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteBatchIds(list);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Serializable</code> æ˜¯ Java ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæ ‡è®°ç±»çš„å®ä¾‹å¯ä»¥è¢«åºåˆ—åŒ–ï¼ˆå³ï¼Œå¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ä»¥ä¾¿äºå­˜å‚¨æˆ–ä¼ è¾“ï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¯ä»¥ååºåˆ—åŒ–ï¼ˆå°†å­—èŠ‚åºåˆ—é‡æ–°è½¬æ¢ä¸ºå¯¹è±¡ï¼‰ã€‚<code>Serializable</code> æ¥å£åœ¨ Java æ ‡å‡†åº“ä¸­ä½äº <code>java.io</code> åŒ…ä¸­ã€‚</p><h4 id="æ›´æ”¹">æ›´æ”¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//UPDATE user SET name=?, email=? WHERE id=?</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">4L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;lisi@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: UPDATE<span class="built_in"> user </span><span class="built_in">SET</span> <span class="attribute">name</span>=?, <span class="attribute">email</span>=? WHERE <span class="attribute">id</span>=?</span><br><span class="line">==&gt; Parameters: æå››(String), lisi@atguigu.com(String), 4(Long)</span><br><span class="line">&lt;==    Updates: 1</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢">æŸ¥è¯¢</h4><p>Serializableç±»å‹çš„å‚æ•°ä»£è¡¨è¿™ä¸ªå‚æ•°å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915181717416.png" alt="image-20230915181717416"></p><ol><li>æ ¹æ®idæŸ¥è¯¢</li><li>æ ¹æ®idæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ï¼ˆåˆ©ç”¨çš„<code>where id in (?,?,?)</code>çš„æ–¹å¼ï¼‰</li><li>æ ¹æ®Map&lt;String,Object&gt;ä¸­çš„å…·ä½“å‚æ•°æŸ¥è¯¢ç”¨æˆ·</li><li>æŸ¥è¯¢æ‰€æœ‰ä¿¡æ¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE id=?</span></span><br><span class="line">    <span class="comment">/*User user = userMapper.selectById(1L);</span></span><br><span class="line"><span class="comment">    System.out.println(user);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®å¤šä¸ªidæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    <span class="comment">/*List&lt;Long&gt; list = Arrays.asList(1L, 2L, 3L);</span></span><br><span class="line"><span class="comment">    List&lt;User&gt; users = userMapper.selectBatchIds(list);</span></span><br><span class="line"><span class="comment">    users.forEach(System.out::println);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ ¹æ®mapé›†åˆä¸­çš„æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class="line"><span class="comment">    map.put(&quot;name&quot;, &quot;Jack&quot;);</span></span><br><span class="line"><span class="comment">    map.put(&quot;age&quot;, 20);</span></span><br><span class="line"><span class="comment">    List&lt;User&gt; users = userMapper.selectByMap(map);</span></span><br><span class="line"><span class="comment">    users.forEach(System.out::println);*/</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="comment">//SELECT id,name,age,email FROM user</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">    <span class="comment">/*Map&lt;String, Object&gt; map = userMapper.selectMapById(1L);</span></span><br><span class="line"><span class="comment">    System.out.println(map);*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>  Preparing: <span class="keyword">SELECT</span> id,name,age,email <span class="keyword">FROM</span> <span class="keyword">user</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> Parameters: </span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>    Columns: id, name, age, email</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">1</span>, Jone, <span class="number">18</span>, test1<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">2</span>, Jack, <span class="number">20</span>, test2<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">3</span>, Tom, <span class="number">28</span>, test3<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">4</span>, æå››, <span class="number">21</span>, lisi<span class="variable">@atguigu</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>        <span class="type">Row</span>: <span class="number">5</span>, Billie, <span class="number">24</span>, test5<span class="variable">@baomidou</span>.com</span><br><span class="line"><span class="operator">&lt;=</span><span class="operator">=</span>      Total: <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰CRUD">è‡ªå®šä¹‰CRUD</h3><p>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmapperç›®å½•ï¼ˆå¿…é¡»æ˜¯mapperï¼‰ï¼Œåˆ›å»ºæ˜ å°„æ–‡ä»¶UserMapper.xml</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915183357703.png" alt="image-20230915183357703"></p><p>ç»™UserMapperç±»å¢åŠ å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Map&lt;String, Object&gt; <span class="title function_">selectMapById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†è‡ªå·±å®šä¹‰çš„æ–¹æ³•åœ¨UserMapper.xmlæ–‡ä»¶ä¸­è¿›è¡Œå®ç°ï¼Œä¹‹åå°±å¯ä»¥ç”¨äº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatisplus.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Map&lt;String, Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectMapById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age,email from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é€šç”¨Service">é€šç”¨Service</h3><p>è¯´æ˜:</p><p>é€šç”¨ Service CRUD å°è£…IServiceæ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD é‡‡ç”¨ get æŸ¥è¯¢å•è¡Œ remove åˆ é™¤ list æŸ¥è¯¢é›†åˆ page åˆ†é¡µ å‰ç¼€å‘½åæ–¹å¼åŒºåˆ† Mapper å±‚é¿å…æ··æ·†ï¼Œæ³›å‹ T ä¸ºä»»æ„å®ä½“å¯¹è±¡</p><p>å»ºè®®å¦‚æœå­˜åœ¨è‡ªå®šä¹‰é€šç”¨ Service æ–¹æ³•çš„å¯èƒ½ï¼Œè¯·åˆ›å»ºè‡ªå·±çš„ IBaseService ç»§æ‰¿</p><p>Mybatis-Plus æä¾›çš„åŸºç±»</p><p>å®˜ç½‘åœ°å€ï¼š<a href="https://baomidou.com/pages/49cc81/#service-crud-%E6%8E%A5%E5%8F%A3">https://baomidou.com/pages/49cc81/#service-crud-æ¥å£</a></p><p>MyBatis-Plusä¸­æœ‰ä¸€ä¸ªæ¥å£ IServiceå’Œå…¶å®ç°ç±» ServiceImplï¼Œå°è£…äº†å¸¸è§çš„ä¸šåŠ¡å±‚é€»è¾‘</p><p>è¯¦æƒ…æŸ¥çœ‹æºç IServiceå’ŒServiceImpl</p><h4 id="åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»">åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* UserServiceç»§æ‰¿IServiceæ¨¡æ¿æä¾›çš„åŸºç¡€åŠŸèƒ½</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®ç°æ¥å£çš„æ—¶å€™è®°å¾—ç»§æ‰¿ServiceImplï¼Œå› ä¸ºæ¥å£ä¸­æœ‰å¥½å¤šæ–¹æ³•éƒ½æ²¡å®ç°ï¼Œæ‰€ä»¥è¦ç»§æ‰¿ServiceImplï¼Œå…¶ä¸­æœ‰æ‰€æœ‰å®ç°å¥½çš„æ–¹æ³•</p><p>æ³¨è§£@Serviceç”¨äºå°†ç±»æ ‡è¯†ä¸ºä¸€ä¸ªæœåŠ¡å±‚çš„ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•é€šç”¨Service">æµ‹è¯•é€šç”¨Service</h3><h4 id="æŸ¥è¯¢æ€»è®°å½•æ•°">æŸ¥è¯¢æ€»è®°å½•æ•°</h4><p>count()çš„å®ç°åœ¨ServiceImplä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="comment">//SELECT COUNT( * ) FROM user</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ‰¹é‡æ·»åŠ ">æ‰¹é‡æ·»åŠ </h4><p>BaseMapper<T>æ¥å£åªæä¾›åº•å±‚æ•°æ®æ“ä½œæ–¹å¼ï¼Œæ‰€ä»¥IService<T>æä¾›ä¸€äº›é«˜çº§çš„ä¸šåŠ¡æ“ä½œ</p><p>saveBatch()çš„å®ç°åœ¨ServiceImplä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertMore</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ‰¹é‡æ·»åŠ </span></span><br><span class="line">        <span class="comment">//INSERT INTO user ( id, name, age ) VALUES ( ?, ?, ? )</span></span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setName(<span class="string">&quot;ybc&quot;</span>+i);</span><br><span class="line">            user.setAge(<span class="number">20</span>+i);</span><br><span class="line">            list.add(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> userService.saveBatch(list);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BaseMapper-T-å’ŒIService-T-çš„å…³ç³»å’Œä½¿ç”¨æ€»ç»“">BaseMapper&lt;T&gt;å’ŒIService&lt;T&gt;çš„å…³ç³»å’Œä½¿ç”¨æ€»ç»“</h3><p>ä½¿ç”¨æ–¹å¼ä¸åŒ</p><h4 id="BaseMapper">BaseMapper</h4><p>å†™ä¸€ä¸ªè‡ªå·±çš„æ¥å£ç»§æ‰¿BaseMapperå¹¶æŒ‡å®šè¦è¿›è¡Œæ“ä½œçš„å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨è§£ç”¨äºå°†æ¥å£æ ‡è¯†ä¸ºç»„ä»¶</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Map&lt;String, Object&gt; <span class="title function_">selectMapById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨mapperï¼ˆå¿…é¡»æ˜¯è¿™ä¸ªç›®å½•ï¼‰ä¸­å†™xmlå®šä¹‰è‡ªå·±å£°æ˜çš„æ–¹æ³•selectMapById()</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230915190350792.png" alt="image-20230915190350792"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatisplus.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Map&lt;String, Object&gt; selectMapById(Long id);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectMapById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age,email from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥ç”¨äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Object&gt; map = userMapper.selectMapById(<span class="number">1L</span>);</span><br><span class="line">      System.out.println(map);</span><br></pre></td></tr></table></figure><h4 id="IService">IService</h4><p>ç±»ServiceImplå¯¹BaseMapperæ¥å£æ ¹æ®IServiceæ¥å£è¿›è¡Œäº†å¢å¼º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceImpl</span>&lt;M <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;T&gt;, T&gt; <span class="keyword">implements</span> <span class="title class_">IService</span>&lt;T&gt; &#123;</span><br><span class="line">    ...è¿™é‡Œå®ç°äº†å¾ˆå¤šé«˜çº§çš„ä¸šåŠ¡æ–¹æ³•ï¼Œæ¯”BaseMapperä¸­çš„åŠŸèƒ½æ›´å¼ºå¤§</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰è‡ªå·±çš„æ¥å£ç»§æ‰¿IService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°è‡ªå·±å®šä¹‰çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥ä½¿ç”¨ServiceImplä¸­çš„é«˜çº§ä¸šåŠ¡æ–¹æ³•äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusServiceTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="comment">//SELECT COUNT( * ) FROM user</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="AIæ€»ç»“">AIæ€»ç»“</h4><p><code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶ä¸­çš„ä¸¤ä¸ªé‡è¦æ¥å£ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºååŠ©å¼€å‘è€…åœ¨Javaåº”ç”¨ä¸­è¿›è¡Œæ•°æ®æŒä¹…åŒ–æ“ä½œã€‚è¿™ä¸¤ä¸ªæ¥å£çš„å…³ç³»å¦‚ä¸‹ï¼š</p><ol><li><p><strong><code>IService&lt;T&gt;</code> æ¥å£</strong>ï¼š</p><ul><li><p><code>IService&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶æä¾›çš„ä¸€ä¸ªé«˜çº§æœåŠ¡æ¥å£ï¼Œç”¨äºå®šä¹‰æ•°æ®è®¿é—®æœåŠ¡çš„ä¸€äº›é€šç”¨æ–¹æ³•ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>IService&lt;T&gt;</code> çš„å®ç°ç±»ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶æä¾›å¯¹æ•°æ®æŒä¹…åŒ–çš„é«˜çº§æ“ä½œã€‚</p></li><li><p><code>IService&lt;T&gt;</code> æ¥å£æä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ•°æ®æ“ä½œçš„æ–¹æ³•ï¼Œä¾‹å¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰ã€‚è¿™äº›æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼é€šå¸¸éƒ½ä¸å®ä½“ç±» <code>T</code> ç›¸å…³ï¼Œç”¨äºå®Œæˆæ•°æ®æ“ä½œã€‚</p></li><li><p>å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè‡ªå®šä¹‰å®ç° <code>IService&lt;T&gt;</code> æ¥å£çš„ç±»ï¼Œä»¥æä¾›ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„æ•°æ®æ“ä½œã€‚</p></li></ul></li><li><p><strong><code>BaseMapper&lt;T&gt;</code> æ¥å£</strong>ï¼š</p><ul><li><p><code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶æä¾›çš„ä¸€ä¸ªåŸºç¡€æ•°æ®è®¿é—®æ¥å£ï¼Œç”¨äºå®šä¹‰é€šç”¨çš„æ•°æ®è®¿é—®æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ç­‰ã€‚</p></li><li><p><code>BaseMapper&lt;T&gt;</code> æ¥å£ä¸­çš„æ–¹æ³•é€šå¸¸æ˜¯ç›´æ¥ä¸åº•å±‚æ•°æ®åº“æ“ä½œç›¸å…³çš„ï¼Œä¾‹å¦‚å¢ã€åˆ ã€æ”¹ã€æŸ¥çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ä¹Ÿä¸å®ä½“ç±» <code>T</code> ç›¸å…³ã€‚</p></li><li><p><code>BaseMapper&lt;T&gt;</code> æ¥å£çš„å®ç°ç±»é€šå¸¸æ˜¯ç”± MyBatis-Plus è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™äº›å®ç°ç±»ä¼šæ ¹æ®å®ä½“ç±»çš„å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ SQL è¯­å¥ï¼Œä»è€Œå®ç°äº†é€šç”¨çš„æ•°æ®è®¿é—®æ“ä½œã€‚</p></li></ul></li><li><p><strong>å…³ç³»</strong>ï¼š</p><ul><li><p><code>IService&lt;T&gt;</code> æ¥å£å’Œ <code>BaseMapper&lt;T&gt;</code> æ¥å£é€šå¸¸ä¸€èµ·ä½¿ç”¨ã€‚<code>IService&lt;T&gt;</code> æ¥å£å®šä¹‰äº†ä¸€äº›é«˜çº§çš„ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œè€Œ <code>BaseMapper&lt;T&gt;</code> æ¥å£æä¾›äº†åº•å±‚çš„æ•°æ®æ“ä½œæ–¹æ³•ã€‚</p></li><li><p><code>IService&lt;T&gt;</code> æ¥å£çš„å®ç°ç±»é€šå¸¸ä¼šè°ƒç”¨ <code>BaseMapper&lt;T&gt;</code> æ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ•°æ®æŒä¹…åŒ–æ“ä½œã€‚è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>IService&lt;T&gt;</code> çš„å®ç°ç±»ä¸­å°è£…æ›´é«˜çº§çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œåº•å±‚çš„æ•°æ®æ“ä½œåˆ™å§”æ‰˜ç»™ <code>BaseMapper&lt;T&gt;</code>ã€‚</p></li><li><p>é€šè¿‡ç»“åˆä½¿ç”¨ <code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code>ï¼Œå¼€å‘è€…å¯ä»¥æ›´è½»æ¾åœ°å®ç°ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®çš„åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li></ul></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>IService&lt;T&gt;</code> å’Œ <code>BaseMapper&lt;T&gt;</code> æ˜¯ MyBatis-Plus æ¡†æ¶ä¸­ç”¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æŒä¹…åŒ–æ“ä½œçš„ä¸¤ä¸ªå…³é”®æ¥å£ï¼Œå®ƒä»¬ååŒå·¥ä½œä»¥å®ç°æ•°æ®æ“ä½œå’Œä¸šåŠ¡é€»è¾‘çš„åˆ†ç¦»å’Œé‡ç”¨ã€‚è¿™æœ‰åŠ©äºç®€åŒ–ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h2 id="å¸¸ç”¨æ³¨è§£">å¸¸ç”¨æ³¨è§£</h2><p>æ“ä½œçš„è¡¨åç”±å®ä½“ç±»çš„åå­—å†³å®šï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ³¨è§£è¿›è¡Œæ›´æ”¹</p><h3 id="æŒ‡å®šæ‰€æœ‰è¡¨çš„å‰ç¼€">æŒ‡å®šæ‰€æœ‰è¡¨çš„å‰ç¼€</h3><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¡¨åçš„å‰ç¼€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"><span class="attr">global-config:</span></span><br><span class="line"><span class="attr">db-config:</span></span><br><span class="line"><span class="attr">table-prefix:</span> <span class="string">t_</span> </span><br></pre></td></tr></table></figure><h3 id="TableName">@TableName</h3><p>æ›´æ”¹å®ä½“ç±»å¯¹åº”çš„è¡¨å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="TableId">@TableId</h3><p>MyBatis-Plusåªèƒ½é»˜è®¤å°†idä½œä¸ºä¸»é”®ï¼Œå¦‚æœæ”¹åä¸ºuidå°†ä¸ä¼šè‡ªåŠ¨èµ‹å€¼ï¼Œéœ€è¦ä½¿ç”¨æ³¨è§£ç‰¹åˆ«å£°æ˜</p><p>ä½¿ç”¨æ³¨è§£@TableIdå°†æŠŠè¿™ä¸ªå±æ€§å¯¹åº”çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“ä¸­ä¸»é”®å«uidï¼Œè¿™é‡Œä¹Ÿå«uidï¼Œå°±å¯ä»¥ä½¿ç”¨@TableIdå°†è¿™ä¸ªå±æ€§å¯¹åº”çš„å­—æ®µæ ‡è¯†ä¸ºä¸»é”®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†å±æ€§æ‰€å¯¹åº”çš„å­—æ®µæŒ‡å®šä¸ºä¸»é”®</span></span><br><span class="line"><span class="meta">@TableId</span></span><br><span class="line"><span class="keyword">private</span> Long uid</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨ç±»ä¸­ä¸è¿›è¡Œæ›´æ”¹ï¼Œä»ç„¶ä½¿ç”¨idï¼Œä½†æ˜¯ æƒ³å¯¹åº”æ•°æ®åº“ä¸­çš„uidï¼Œå°±éœ€è¦ç‰¹åˆ«å£°æ˜</p><p>(ä¸ç‰¹æ„è®¾ç½®å±æ€§ï¼Œé»˜è®¤ä¸ºvalue)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId(&quot;uid&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä¸Šé¢è¿™ä¸ªæŒ‡å®šä»¥å¤–è¿˜æƒ³è¦æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ï¼š</p><p>é»˜è®¤çš„ç”Ÿæˆç­–ç•¥ï¼šé›ªèŠ±ç®—æ³•</p><p>IdType.AUTOï¼šè‡ªåŠ¨é€’å¢ï¼Œå¹¶ä¸æ˜¯é›ªèŠ±ç®—æ³•äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@TableIdæ³¨è§£çš„valueå±æ€§ç”¨äºæŒ‡å®šä¸»é”®çš„å­—æ®µ</span></span><br><span class="line"><span class="comment">//@TableIdæ³¨è§£çš„typeå±æ€§è®¾ç½®ä¸»é”®ç”Ÿæˆç­–ç•¥</span></span><br><span class="line"><span class="comment">//@TableId(value = &quot;uid&quot;, type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨ç”Ÿæˆç­–ç•¥</p><table><thead><tr><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>IdType.ASSIGN_IDï¼ˆé»˜è®¤ï¼‰</td><td>åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆæ•°æ®idï¼Œä¸æ•°æ®åº“idæ˜¯å¦è®¾ç½®è‡ªå¢æ— å…³</td></tr><tr><td>IdType.AUTO</td><td>ä½¿ç”¨æ•°æ®åº“çš„è‡ªå¢ç­–ç•¥ï¼Œæ³¨æ„ï¼Œè¯¥ç±»å‹è¯·ç¡®ä¿æ•°æ®åº“è®¾ç½®äº†idè‡ªå¢ï¼Œ</td></tr></tbody></table><p>ä¹Ÿå¯ä»¥é€šè¿‡å…¨å±€é…ç½®ï¼Œé…ç½®æ‰€æœ‰å®ä¾‹çš„idçš„ç”Ÿæˆç­–ç•¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"><span class="attr">global-config:</span></span><br><span class="line"><span class="attr">db-config:</span></span><br><span class="line"><span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><h4 id="é›ªèŠ±ç®—æ³•">é›ªèŠ±ç®—æ³•</h4><h5 id="èƒŒæ™¯">èƒŒæ™¯</h5><p>éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå»åº”å¯¹æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œä»¥åº”å¯¹é€æ¸å¢é•¿çš„è®¿é—®å‹åŠ›å’Œæ•°æ®é‡ã€‚</p><p>æ•°æ®åº“çš„æ‰©å±•æ–¹å¼ä¸»è¦åŒ…æ‹¬ï¼šä¸šåŠ¡åˆ†åº“ã€ä¸»ä»å¤åˆ¶ï¼Œæ•°æ®åº“åˆ†è¡¨ã€‚</p><h5 id="æ•°æ®åº“åˆ†è¡¨">æ•°æ®åº“åˆ†è¡¨</h5><p>å°†ä¸åŒä¸šåŠ¡æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œèƒ½å¤Ÿæ”¯æ’‘ç™¾ä¸‡ç”šè‡³åƒä¸‡ç”¨æˆ·è§„æ¨¡çš„ä¸šåŠ¡ï¼Œä½†å¦‚æœä¸šåŠ¡</p><p>ç»§ç»­å‘å±•ï¼ŒåŒä¸€ä¸šåŠ¡çš„å•è¡¨æ•°æ®ä¹Ÿä¼šè¾¾åˆ°å•å°æ•°æ®åº“æœåŠ¡å™¨çš„å¤„ç†ç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œæ·˜å®çš„å‡ äº¿ç”¨æˆ·æ•°æ®ï¼Œ</p><p>å¦‚æœå…¨éƒ¨å­˜æ”¾åœ¨ä¸€å°æ•°æ®åº“æœåŠ¡å™¨çš„ä¸€å¼ è¡¨ä¸­ï¼Œè‚¯å®šæ˜¯æ— æ³•æ»¡è¶³æ€§èƒ½è¦æ±‚çš„ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹å•è¡¨æ•°æ®è¿›</p><p>è¡Œæ‹†åˆ†ã€‚</p><p>å•è¡¨æ•°æ®æ‹†åˆ†æœ‰ä¸¤ç§æ–¹å¼ï¼šå‚ç›´åˆ†è¡¨å’Œæ°´å¹³åˆ†è¡¨ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916153953975.png" alt="image-20230916153953975"></p><h5 id="å‚ç›´åˆ†è¡¨">å‚ç›´åˆ†è¡¨</h5><p>å‚ç›´åˆ†è¡¨é€‚åˆå°†è¡¨ä¸­æŸäº›ä¸å¸¸ç”¨ä¸”å äº†å¤§é‡ç©ºé—´çš„åˆ—æ‹†åˆ†å‡ºå»ã€‚</p><p>ä¾‹å¦‚ï¼Œå‰é¢ç¤ºæ„å›¾ä¸­çš„ nickname å’Œ description å­—æ®µï¼Œå‡è®¾æˆ‘ä»¬æ˜¯ä¸€ä¸ªå©šæ‹ç½‘ç«™ï¼Œç”¨æˆ·åœ¨ç­›é€‰å…¶ä»–ç”¨</p><p>æˆ·çš„æ—¶å€™ï¼Œä¸»è¦æ˜¯ç”¨ age å’Œ sex ä¸¤ä¸ªå­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œ nickname å’Œ description ä¸¤ä¸ªå­—æ®µä¸»è¦ç”¨äºå±•</p><p>ç¤ºï¼Œä¸€èˆ¬ä¸ä¼šåœ¨ä¸šåŠ¡æŸ¥è¯¢ä¸­ç”¨åˆ°ã€‚description æœ¬èº«åˆæ¯”è¾ƒé•¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸¤ä¸ªå­—æ®µç‹¬ç«‹åˆ°å¦å¤–</p><p>ä¸€å¼ è¡¨ä¸­ï¼Œè¿™æ ·åœ¨æŸ¥è¯¢ age å’Œ sex æ—¶ï¼Œå°±èƒ½å¸¦æ¥ä¸€å®šçš„æ€§èƒ½æå‡ã€‚</p><h5 id="æ°´å¹³åˆ†è¡¨">æ°´å¹³åˆ†è¡¨</h5><p>æ°´å¹³åˆ†è¡¨é€‚åˆè¡¨è¡Œæ•°ç‰¹åˆ«å¤§çš„è¡¨ï¼Œæœ‰çš„å…¬å¸è¦æ±‚å•è¡¨è¡Œæ•°è¶…è¿‡ 5000 ä¸‡å°±å¿…é¡»è¿›è¡Œåˆ†è¡¨ï¼Œè¿™ä¸ªæ•°å­—å¯ä»¥</p><p>ä½œä¸ºå‚è€ƒï¼Œä½†å¹¶ä¸æ˜¯ç»å¯¹æ ‡å‡†ï¼Œå…³é”®è¿˜æ˜¯è¦çœ‹è¡¨çš„è®¿é—®æ€§èƒ½ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒå¤æ‚çš„è¡¨ï¼Œå¯èƒ½è¶…è¿‡ 1000</p><p>ä¸‡å°±è¦åˆ†è¡¨äº†ï¼›è€Œå¯¹äºä¸€äº›ç®€å•çš„è¡¨ï¼Œå³ä½¿å­˜å‚¨æ•°æ®è¶…è¿‡ 1 äº¿è¡Œï¼Œä¹Ÿå¯ä»¥ä¸åˆ†è¡¨ã€‚</p><p>ä½†ä¸ç®¡æ€æ ·ï¼Œå½“çœ‹åˆ°è¡¨çš„æ•°æ®é‡è¾¾åˆ°åƒä¸‡çº§åˆ«æ—¶ï¼Œä½œä¸ºæ¶æ„å¸ˆå°±è¦è­¦è§‰èµ·æ¥ï¼Œå› ä¸ºè¿™å¾ˆå¯èƒ½æ˜¯æ¶æ„çš„æ€§</p><p>èƒ½ç“¶é¢ˆæˆ–è€…éšæ‚£ã€‚</p><p>æ°´å¹³åˆ†è¡¨ç›¸æ¯”å‚ç›´åˆ†è¡¨ï¼Œä¼šå¼•å…¥æ›´å¤šçš„å¤æ‚æ€§ï¼Œä¾‹å¦‚è¦æ±‚å…¨å±€å”¯ä¸€çš„æ•°æ®idè¯¥å¦‚ä½•å¤„ç†</p><h6 id="ä¸»é”®è‡ªå¢">ä¸»é”®è‡ªå¢</h6><p>â‘ ä»¥æœ€å¸¸è§çš„ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå¯ä»¥æŒ‰ç…§ 1000000 çš„èŒƒå›´å¤§å°è¿›è¡Œåˆ†æ®µï¼Œ1 ~ 999999 æ”¾åˆ°è¡¨ 1ä¸­ï¼Œ</p><p>1000000 ~ 1999999 æ”¾åˆ°è¡¨2ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>â‘¡å¤æ‚ç‚¹ï¼šåˆ†æ®µå¤§å°çš„é€‰å–ã€‚åˆ†æ®µå¤ªå°ä¼šå¯¼è‡´åˆ‡åˆ†åå­è¡¨æ•°é‡è¿‡å¤šï¼Œå¢åŠ ç»´æŠ¤å¤æ‚åº¦ï¼›åˆ†æ®µå¤ªå¤§å¯èƒ½ä¼š</p><p>å¯¼è‡´å•è¡¨ä¾ç„¶å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œä¸€èˆ¬å»ºè®®åˆ†æ®µå¤§å°åœ¨ 100 ä¸‡è‡³ 2000 ä¸‡ä¹‹é—´ï¼Œå…·ä½“éœ€è¦æ ¹æ®ä¸šåŠ¡é€‰å–åˆé€‚</p><p>çš„åˆ†æ®µå¤§å°ã€‚</p><p>â‘¢ä¼˜ç‚¹ï¼šå¯ä»¥éšç€æ•°æ®çš„å¢åŠ å¹³æ»‘åœ°æ‰©å……æ–°çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œç°åœ¨çš„ç”¨æˆ·æ˜¯ 100 ä¸‡ï¼Œå¦‚æœå¢åŠ åˆ° 1000 ä¸‡ï¼Œ</p><p>åªéœ€è¦å¢åŠ æ–°çš„è¡¨å°±å¯ä»¥äº†ï¼ŒåŸæœ‰çš„æ•°æ®ä¸éœ€è¦åŠ¨ã€‚</p><p>â‘£ç¼ºç‚¹ï¼šåˆ†å¸ƒä¸å‡åŒ€ã€‚å‡å¦‚æŒ‰ç…§ 1000 ä¸‡æ¥è¿›è¡Œåˆ†è¡¨ï¼Œæœ‰å¯èƒ½æŸä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡åªæœ‰ 1 æ¡ï¼Œè€Œ</p><p>å¦å¤–ä¸€ä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡æœ‰ 1000 ä¸‡æ¡ã€‚</p><h6 id="å–æ¨¡">å–æ¨¡</h6><p>â‘ åŒæ ·ä»¥ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬ä¸€å¼€å§‹å°±è§„åˆ’äº† 10 ä¸ªæ•°æ®åº“è¡¨ï¼Œå¯ä»¥ç®€å•åœ°ç”¨ user_id % 10 çš„å€¼æ¥</p><p>è¡¨ç¤ºæ•°æ®æ‰€å±çš„æ•°æ®åº“è¡¨ç¼–å·ï¼ŒID ä¸º 985 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·ä¸º 5 çš„å­è¡¨ä¸­ï¼ŒID ä¸º 10086 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·</p><p>ä¸º 6 çš„å­è¡¨ä¸­ã€‚</p><p>â‘¡å¤æ‚ç‚¹ï¼šåˆå§‹è¡¨æ•°é‡çš„ç¡®å®šã€‚è¡¨æ•°é‡å¤ªå¤šç»´æŠ¤æ¯”è¾ƒéº»çƒ¦ï¼Œè¡¨æ•°é‡å¤ªå°‘åˆå¯èƒ½å¯¼è‡´å•è¡¨æ€§èƒ½å­˜åœ¨é—®é¢˜ã€‚</p><p>â‘¢ä¼˜ç‚¹ï¼šè¡¨åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ã€‚</p><p>â‘£ç¼ºç‚¹ï¼šæ‰©å……æ–°çš„è¡¨å¾ˆéº»çƒ¦ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¦é‡åˆ†å¸ƒã€‚</p><h6 id="é›ªèŠ±ç®—æ³•-2">é›ªèŠ±ç®—æ³•</h6><p>é›ªèŠ±ç®—æ³•æ˜¯ç”±Twitterå…¬å¸ƒçš„åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿä¿è¯ä¸åŒè¡¨çš„ä¸»é”®çš„ä¸é‡å¤æ€§ï¼Œä»¥åŠç›¸åŒè¡¨çš„</p><p>ä¸»é”®çš„æœ‰åºæ€§ã€‚</p><p>â‘ æ ¸å¿ƒæ€æƒ³ï¼š</p><p>é•¿åº¦å…±64bitï¼ˆä¸€ä¸ªlongå‹ï¼‰ã€‚</p><p>é¦–å…ˆæ˜¯ä¸€ä¸ªç¬¦å·ä½ï¼Œ1bitæ ‡è¯†ï¼Œç”±äºlongåŸºæœ¬ç±»å‹åœ¨Javaä¸­æ˜¯å¸¦ç¬¦å·çš„ï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œæ­£æ•°æ˜¯0ï¼Œè´Ÿ</p><p>æ•°æ˜¯1ï¼Œæ‰€ä»¥idä¸€èˆ¬æ˜¯æ­£æ•°ï¼Œæœ€é«˜ä½æ˜¯0ã€‚</p><p>41bitæ—¶é—´æˆª(æ¯«ç§’çº§)ï¼Œå­˜å‚¨çš„æ˜¯æ—¶é—´æˆªçš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´æˆª - å¼€å§‹æ—¶é—´æˆª)ï¼Œç»“æœçº¦ç­‰äº69.73å¹´ã€‚</p><p>10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼Œå¯ä»¥éƒ¨ç½²åœ¨1024ä¸ªèŠ‚ç‚¹ï¼‰ã€‚</p><p>12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ã€‚</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916154134835.png" alt="image-20230916154134835"></p><p>â‘¡ä¼˜ç‚¹ï¼šæ•´ä½“ä¸ŠæŒ‰ç…§æ—¶é—´è‡ªå¢æ’åºï¼Œå¹¶ä¸”æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå†…ä¸ä¼šäº§ç”ŸIDç¢°æ’ï¼Œå¹¶ä¸”æ•ˆç‡è¾ƒé«˜ã€‚</p><h3 id="TableField">@TableField</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//æŒ‡å®šå±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</span></span><br><span class="line"><span class="meta">@TableField(&quot;user_name&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure><h3 id="TableLogic"><strong>@TableLogic</strong></h3><p>ä½¿ç”¨è¿™ä¸ªæ³¨è§£æ—¶ï¼Œæ³¨æ„è¡¨ä¸­è¦æœ‰è¿™ä¸ªåˆ—ï¼ŒisDeletedå¯¹åº”çš„è¡¨ä¸­åˆ—åæ˜¯is_deletedï¼ˆintï¼‰</p><p>0è¡¨ç¤ºè¿˜å­˜åœ¨     1è¡¨ç¤ºè¢«åˆ é™¤  ã€å¦‚æœè¿™ä¸ªå­—æ®µæ˜¯nullï¼Œé‚£ä¹ˆç­‰æ•ˆäº1ã€‘</p><p><strong>å¦‚æœå®ä¾‹ç±»ä¸­æœ‰è¿™ä¸ªæ³¨è§£å’Œå±æ€§ï¼Œåœ¨æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œä¼šå°†è¡¨ä¸­å¯¹åº”çš„å­—æ®µçš„is_deletedæ”¹ä¸º0ï¼Œè€Œä¸æ˜¯ç‰©ç†åˆ é™¤æ•°æ®</strong></p><p><strong>å¹¶ä¸”æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨whereæ·»åŠ æ¡ä»¶<code>is_deleted=0</code>ï¼Œè¡¨ç¤ºæ²¡æœ‰è¢«é€»è¾‘åˆ é™¤çš„å­—æ®µ</strong></p><p><code>@TableLogic</code> æ³¨è§£é€šå¸¸ä¸å®ä½“ç±»çš„å­—æ®µä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæ ‡è®°å“ªä¸ªå­—æ®µè¡¨ç¤ºé€»è¾‘åˆ é™¤çŠ¶æ€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer isDeleted;</span><br></pre></td></tr></table></figure><h4 id="é€»è¾‘åˆ é™¤">é€»è¾‘åˆ é™¤</h4><p>ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®</p><p>é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“</p><p>ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•</p><p>ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤</p><h4 id="å®ç°é€»è¾‘åˆ é™¤">å®ç°é€»è¾‘åˆ é™¤</h4><p><strong>step1</strong>**ï¼š**æ•°æ®åº“ä¸­åˆ›å»ºé€»è¾‘åˆ é™¤çŠ¶æ€åˆ—ï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º0</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916165948632.png" alt="image-20230916165948632"></p><p><strong>step2</strong>**ï¼š**å®ä½“ç±»ä¸­æ·»åŠ é€»è¾‘åˆ é™¤å±æ€§</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916170003305.png" alt="image-20230916170003305"></p><p><strong>step3</strong>**ï¼š**æµ‹è¯•</p><p>æµ‹è¯•åˆ é™¤åŠŸèƒ½ï¼ŒçœŸæ­£æ‰§è¡Œçš„æ˜¯ä¿®æ”¹</p><p>UPDATE t_user SET is_deleted=1 WHERE id=? AND is_deleted=0</p><p>æµ‹è¯•æŸ¥è¯¢åŠŸèƒ½ï¼Œè¢«é€»è¾‘åˆ é™¤çš„æ•°æ®é»˜è®¤ä¸ä¼šè¢«æŸ¥è¯¢</p><p>SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0</p><h2 id="æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£">æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£</h2><h3 id="wapperä»‹ç»">wapperä»‹ç»</h3><p>(wapper==åŒ…è£…å™¨ï¼ˆæ¡ä»¶æ„é€ å™¨ï¼‰)</p><p><img src="../assets/image/MyBatis-Plus_Image/image-20230916171406754.png" alt="image-20230916171406754"></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Wrapper</span> ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»</span><br><span class="line">    AbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ <span class="keyword">sql</span> çš„ <span class="keyword">where</span> æ¡ä»¶</span><br><span class="line">    QueryWrapper ï¼š æŸ¥è¯¢æ¡ä»¶å°è£…</span><br><span class="line">    UpdateWrapper ï¼š <span class="keyword">Update</span> æ¡ä»¶å°è£…</span><br><span class="line">    AbstractLambdaWrapper ï¼š ä½¿ç”¨Lambda è¯­æ³•</span><br><span class="line">        LambdaQueryWrapper ï¼šç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢<span class="keyword">Wrapper</span></span><br><span class="line">        LambdaUpdateWrapper ï¼š Lambda æ›´æ–°å°è£…<span class="keyword">Wrapper</span></span><br></pre></td></tr></table></figure><details class="folding-tag" yellow><summary> æŸ¥çœ‹AbstractWrapperæŠ½è±¡ç±»ç»“æ„ </summary>              <div class='content'>              <p><img src="../assets/image/MyBatis-Plus_Image/AbstractWrapper.png" alt="AbstractWrapper"></p>              </div>            </details><h3 id="QueryWrapper"><strong>QueryWrapper</strong></h3><p>åœ¨æ¡ä»¶æ„é€ å™¨ä¸­ï¼Œæ„é€ æ¡ä»¶,ç„¶åæŸ¥è¯¢æ—¶ä½¿ç”¨è¿™ä¸ªåŒ…è£…å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œé‚®ç®±ä¿¡æ¯ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jack&quot;</span>)</span><br><span class="line">        .between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">        .isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">==&gt;  Preparing: <span class="keyword">SELECT</span> id,<span class="type">name</span>,age,email,is_deleted <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> is_deleted=<span class="number">0</span> <span class="keyword">AND</span> (<span class="type">name</span> <span class="keyword">LIKE</span> ? <span class="keyword">AND</span> age <span class="keyword">BETWEEN</span> ? <span class="keyword">AND</span> ? <span class="keyword">AND</span> email <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>)</span><br><span class="line">==&gt; Parameters: %Jack%(String), <span class="number">20</span>(<span class="type">Integer</span>), <span class="number">30</span>(<span class="type">Integer</span>)</span><br><span class="line">&lt;==    <span class="keyword">Columns</span>: id, <span class="type">name</span>, age, email, is_deleted</span><br><span class="line">&lt;==        <span class="keyword">Row</span>: <span class="number">2</span>, Jack, <span class="number">20</span>, test2@baomidou.com, <span class="number">0</span></span><br><span class="line">&lt;==      Total: <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="UpdateWrapper"><strong>UpdateWrapper</strong></h3><h3 id="condition"><strong>condition</strong></h3><h3 id="LambdaQueryWrapper"><strong>LambdaQueryWrapper</strong></h3><h3 id="LambdaUpdateWrapper"><strong>LambdaUpdateWrapper</strong></h3><h1>ç¬”è®°</h1><p>SpringBootç‰ˆæœ¬</p> <div class="row">    <embed src="https://blog.tianao.top/assets/files/MyBatisPlus(SpringBoot).pdf" width="100%" height="550" type="application/pdf"></div><p>Springç‰ˆæœ¬</p> <div class="row">    <embed src="https://blog.tianao.top/assets/files/MyBatisPlus(Spring).pdf" width="100%" height="550" type="application/pdf"></div><h1>AIæ€»ç»“</h1><p>MyBatis-Plus æ˜¯ MyBatis çš„ä¸€ä¸ªå¢å¼ºå·¥å…·åŒ…ï¼Œå®ƒç®€åŒ–äº†åœ¨ Java åº”ç”¨ä¸­ä½¿ç”¨ MyBatis è¿›è¡Œæ•°æ®åº“è®¿é—®çš„å¼€å‘å·¥ä½œã€‚MyBatis-Plus æä¾›äº†ä¸€äº›æ–¹ä¾¿çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä½¿å¼€å‘äººå‘˜æ›´è½»æ¾åœ°ä¸æ•°æ®åº“äº¤äº’ï¼Œå‡å°‘äº†ç¼–å†™æ ·æ¿ä»£ç çš„å·¥ä½œã€‚ä»¥ä¸‹æ˜¯ MyBatis-Plus çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li><p><strong>åŸºäº MyBatis</strong>ï¼šMyBatis-Plus æ˜¯ MyBatis çš„æ‰©å±•ï¼Œå®ƒå……åˆ†åˆ©ç”¨äº† MyBatis çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå› æ­¤ä¸ MyBatis é«˜åº¦å…¼å®¹ï¼Œå¯ä»¥ä¸ç°æœ‰çš„ MyBatis é¡¹ç›®é›†æˆã€‚</p></li><li><p><strong>ä»£ç ç”Ÿæˆå™¨</strong>ï¼šMyBatis-Plus æä¾›äº†ä¸€ä¸ªä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»ã€Mapper æ¥å£å’ŒXMLæ˜ å°„æ–‡ä»¶ï¼Œå‡å°‘äº†æ‰‹åŠ¨ç¼–å†™è¿™äº›æ–‡ä»¶çš„å·¥ä½œé‡ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨å¿«é€Ÿå¼€å‘åŸå‹æˆ–æ–°é¡¹ç›®æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p></li><li><p><strong>å¼ºå¤§çš„æŸ¥è¯¢æ„å»ºå™¨</strong>ï¼šMyBatis-Plus æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æŸ¥è¯¢æ„å»ºå™¨ï¼Œå…è®¸å¼€å‘äººå‘˜ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œä¸å¿…ç¼–å†™å¤æ‚çš„ SQLã€‚è¿™ä½¿å¾—æ„å»ºå¤æ‚æŸ¥è¯¢å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p></li><li><p><strong>é€šç”¨ CRUD æ“ä½œ</strong>ï¼šMyBatis-Plus æä¾›äº†é€šç”¨çš„ CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œæ–¹æ³•ï¼Œæ— éœ€ç¼–å†™SQLè¯­å¥ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’ŒæŸ¥è¯¢ã€‚</p></li><li><p><strong>åˆ†é¡µæŸ¥è¯¢æ”¯æŒ</strong>ï¼šMyBatis-Plus å†…ç½®äº†åˆ†é¡µæŸ¥è¯¢çš„æ”¯æŒï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ“ä½œã€‚</p></li><li><p><strong>æ¡ä»¶æ„é€ å™¨</strong>ï¼šMyBatis-Plus æä¾›äº†æ¡ä»¶æ„é€ å™¨ï¼Œå…è®¸æ‚¨ä»¥ä¸€ç§æ›´åŠ ç›´è§‚çš„æ–¹å¼æ„å»ºå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Œé¿å…æ‰‹åŠ¨æ‹¼æ¥ SQL è¯­å¥ã€‚</p></li><li><p><strong>é€»è¾‘åˆ é™¤</strong>ï¼šMyBatis-Plus æ”¯æŒé€»è¾‘åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡æ ‡è®°åˆ é™¤æ ‡å¿—è€Œä¸æ˜¯ç‰©ç†åˆ é™¤æ¥åˆ é™¤è®°å½•ï¼Œä»è€Œä¿ç•™æ•°æ®çš„å®Œæ•´æ€§ã€‚</p></li><li><p><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šMyBatis-Plus å…è®¸æ‚¨åœ¨æ’å…¥æˆ–æ›´æ–°è®°å½•æ—¶è‡ªåŠ¨å¡«å……æŸäº›å­—æ®µï¼Œä¾‹å¦‚åˆ›å»ºæ—¶é—´æˆ–ä¿®æ”¹æ—¶é—´å­—æ®µï¼Œå‡å°‘äº†æ‰‹åŠ¨è®¾ç½®è¿™äº›å­—æ®µçš„å·¥ä½œã€‚</p></li><li><p><strong>ä¹è§‚é”æ”¯æŒ</strong>ï¼šMyBatis-Plus æ”¯æŒä¹è§‚é”ï¼Œç”¨äºå¤„ç†å¹¶å‘æ›´æ–°æ“ä½œï¼Œä»¥é¿å…æ•°æ®å†²çªã€‚</p></li><li><p><strong>å¤šæ•°æ®æºæ”¯æŒ</strong>ï¼šMyBatis-Plus æä¾›äº†å¯¹å¤šæ•°æ®æºçš„æ”¯æŒï¼Œå¯ä»¥åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­è½»æ¾ç®¡ç†å¤šä¸ªæ•°æ®åº“è¿æ¥ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒMyBatis-Plus æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®åº“è®¿é—®å·¥å…·ï¼Œå®ƒç®€åŒ–äº†ä¸æ•°æ®åº“çš„äº¤äº’ï¼Œå‡å°‘äº†å¼€å‘å·¥ä½œé‡ï¼Œå¹¶æä¾›äº†è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½å’Œç‰¹æ€§ã€‚å®ƒå¹¿æ³›ç”¨äº Java é¡¹ç›®ä¸­ï¼Œç‰¹åˆ«æ˜¯åŸºäº MyBatis çš„æ•°æ®åº“è®¿é—®å±‚çš„å¼€å‘ã€‚å¦‚æœæ‚¨æ­£åœ¨å¼€å‘ä¸€ä¸ªä½¿ç”¨ MyBatis çš„ Java åº”ç”¨ç¨‹åºï¼ŒMyBatis-Plus å¯èƒ½æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„å·¥å…·åŒ…ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆç‡å¹¶æ”¹å–„ä»£ç è´¨é‡ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»MyBatis-Plusçš„ä½¿ç”¨å’ŒåŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="MyBatis" scheme="https://momoao.github.io/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>MySQLé¢è¯•é¢˜</title>
    <link href="https://momoao.github.io/posts/202309131057.html"/>
    <id>https://momoao.github.io/posts/202309131057.html</id>
    <published>2023-09-13T07:27:00.000Z</published>
    <updated>2023-09-13T02:59:41.358Z</updated>
    
    <content type="html"><![CDATA[<div class="note info flat"><p>å‚è€ƒï¼šå†…å®¹æ¥è‡ªå›¾çµæ•™è‚²</p></div><h1>1.ä»€ä¹ˆæ˜¯BufferPoolï¼Ÿ</h1><p><strong>Buffer PoolåŸºæœ¬æ¦‚å¿µ</strong></p><p>Buffer Poolï¼šç¼“å†²æ± ï¼Œç®€ç§°BPã€‚å…¶ä½œç”¨æ˜¯ç”¨æ¥ç¼“å­˜è¡¨æ•°æ®ä¸ç´¢å¼•æ•°æ®ï¼Œå‡å°‘ç£ç›˜IOæ“ä½œï¼Œæå‡æ•ˆç‡ã€‚</p><p>Buffer Poolç”±<strong>ç¼“å­˜æ•°æ®é¡µ(Page)</strong> å’Œ å¯¹ç¼“å­˜æ•°æ®é¡µè¿›è¡Œæè¿°çš„<strong>æ§åˆ¶å—</strong> ç»„æˆ, æ§åˆ¶å—ä¸­å­˜å‚¨ç€å¯¹åº”ç¼“å­˜é¡µçš„æ‰€å±çš„è¡¨ç©ºé—´ã€æ•°æ®é¡µçš„ç¼–å·ã€ä»¥åŠå¯¹åº”ç¼“å­˜é¡µåœ¨Buffer Poolä¸­çš„åœ°å€ç­‰ä¿¡æ¯.</p><p>Buffer Poolé»˜è®¤å¤§å°æ˜¯128M, ä»¥Pageé¡µä¸ºå•ä½ï¼ŒPageé¡µé»˜è®¤å¤§å°16Kï¼Œè€Œæ§åˆ¶å—çš„å¤§å°çº¦ä¸ºæ•°æ®é¡µçš„5%ï¼Œå¤§æ¦‚æ˜¯800å­—èŠ‚ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/5b04714e186c412f89efeb7047c34ef2.png" alt="image.png"></p><blockquote><p>æ³¨: Buffer Poolå¤§å°ä¸º128MæŒ‡çš„å°±æ˜¯ç¼“å­˜é¡µçš„å¤§å°ï¼Œæ§åˆ¶å—åˆ™ä¸€èˆ¬å 5%ï¼Œæ‰€ä»¥æ¯æ¬¡ä¼šå¤šç”³è¯·6Mçš„å†…å­˜ç©ºé—´ç”¨äºå­˜æ”¾æ§åˆ¶å—</p></blockquote><p><strong>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé¡µæ˜¯å¦åœ¨BufferPoolä¸­ç¼“å­˜ ?</strong></p><p>MySQlä¸­æœ‰ä¸€ä¸ªå“ˆå¸Œè¡¨æ•°æ®ç»“æ„ï¼Œå®ƒä½¿ç”¨è¡¨ç©ºé—´å·+æ•°æ®é¡µå·ï¼Œä½œä¸ºä¸€ä¸ªkeyï¼Œç„¶åç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸ºvalueã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/79f20665ae0845d08adfbca28d78392c.png" alt="image.png"></p><ul><li><strong>å½“éœ€è¦è®¿é—®æŸä¸ªé¡µçš„æ•°æ®æ—¶ï¼Œå…ˆä»å“ˆå¸Œè¡¨ä¸­æ ¹æ®è¡¨ç©ºé—´å·+é¡µå·çœ‹çœ‹æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ç¼“å†²é¡µã€‚</strong></li><li><strong>å¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±ä»freeé“¾è¡¨ä¸­é€‰å‡ºä¸€ä¸ªç©ºé—²çš„ç¼“å†²é¡µï¼Œç„¶åæŠŠç£ç›˜ä¸­å¯¹åº”çš„é¡µåŠ è½½åˆ°è¯¥ç¼“å†²é¡µçš„ä½ç½®</strong></li></ul><h1>2.InnoDBå¦‚ä½•ç®¡ç†Pageé¡µï¼Ÿ</h1><p><strong>Pageé¡µåˆ†ç±»</strong></p><p>BPçš„åº•å±‚é‡‡ç”¨é“¾è¡¨æ•°æ®ç»“æ„ç®¡ç†Pageã€‚åœ¨InnoDBè®¿é—®è¡¨è®°å½•å’Œç´¢å¼•æ—¶ä¼šåœ¨Pageé¡µä¸­ç¼“å­˜ï¼Œä»¥åä½¿ç”¨å¯ä»¥å‡å°‘ç£ç›˜IOæ“ä½œï¼Œæå‡æ•ˆç‡ã€‚</p><p>Pageæ ¹æ®çŠ¶æ€å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/b5a63ddee29646edaa90695894203203.png" alt="image.png"></p><ul><li>free page ï¼š ç©ºé—²pageï¼Œæœªè¢«ä½¿ç”¨</li><li>clean pageï¼šè¢«ä½¿ç”¨pageï¼Œæ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹è¿‡</li><li>dirty pageï¼šè„é¡µï¼Œè¢«ä½¿ç”¨pageï¼Œæ•°æ®è¢«ä¿®æ”¹è¿‡ï¼ŒPageé¡µä¸­æ•°æ®å’Œç£ç›˜çš„æ•°æ®äº§ç”Ÿäº†ä¸ä¸€è‡´</li></ul><p>Pageé¡µå¦‚ä½•ç®¡ç†</p><p>é’ˆå¯¹ä¸Šé¢æ‰€è¯´çš„ä¸‰ç§pageç±»å‹ï¼ŒInnoDBé€šè¿‡ä¸‰ç§é“¾è¡¨ç»“æ„æ¥ç»´æŠ¤å’Œç®¡ç†</p><ol><li>free listï¼šè¡¨ç¤ºç©ºé—²ç¼“å†²åŒºï¼Œç®¡ç†free page</li></ol><ul><li>freeé“¾è¡¨æ˜¯æŠŠæ‰€æœ‰ç©ºé—²çš„ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸ºä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹æ”¾åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ï¼Œè¿™ä¸ªé“¾è¡¨ä¾¿ç§°ä¹‹ä¸ºfreeé“¾è¡¨</li><li>åŸºèŠ‚ç‚¹:  freeé“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªåŸºèŠ‚ç‚¹æ˜¯ä¸è®°å½•ç¼“å­˜é¡µä¿¡æ¯(å•ç‹¬ç”³è¯·ç©ºé—´)ï¼Œå®ƒé‡Œé¢å°±å­˜æ”¾äº†freeé“¾è¡¨çš„å¤´èŠ‚ç‚¹çš„åœ°å€ï¼Œå°¾èŠ‚ç‚¹çš„åœ°å€ï¼Œè¿˜æœ‰freeé“¾è¡¨é‡Œå½“å‰æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/2cbb45488a444bfea024a5ebba29d6ce.png" alt="image.png"></p><p>2.flush listï¼š è¡¨ç¤ºéœ€è¦åˆ·æ–°åˆ°ç£ç›˜çš„ç¼“å†²åŒºï¼Œç®¡ç†dirty pageï¼Œå†…éƒ¨pageæŒ‰ä¿®æ”¹æ—¶é—´æ’åºã€‚</p><ul><li>InnoDBå¼•æ“ä¸ºäº†æé«˜å¤„ç†æ•ˆç‡ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹ç¼“å†²é¡µåï¼Œå¹¶ä¸æ˜¯ç«‹åˆ»æŠŠä¿®æ”¹åˆ·æ–°åˆ°ç£ç›˜ä¸Šï¼Œè€Œæ˜¯åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œåˆ·æ–°æ“ä½œ. æ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ°flushé“¾è¡¨å­˜å‚¨è„é¡µï¼Œå‡¡æ˜¯è¢«ä¿®æ”¹è¿‡çš„ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—éƒ½ä¼šä½œä¸ºèŠ‚ç‚¹åŠ å…¥åˆ°flushé“¾è¡¨.</li><li>flushé“¾è¡¨çš„ç»“æ„ä¸freeé“¾è¡¨çš„ç»“æ„ç›¸ä¼¼</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/1ba2e62477434290989d159632574704.png" alt="image.png"></p><p><strong>3.lru list</strong>ï¼šè¡¨ç¤ºæ­£åœ¨ä½¿ç”¨çš„ç¼“å†²åŒºï¼Œç®¡ç†clean pageå’Œdirty pageï¼Œç¼“å†²åŒºä»¥midpointä¸ºåŸºç‚¹ï¼Œå‰é¢é“¾è¡¨ç§°ä¸ºnewåˆ—è¡¨åŒºï¼Œå­˜æ”¾ç»å¸¸è®¿é—®çš„æ•°æ®ï¼Œå 63%ï¼›åé¢çš„é“¾è¡¨ç§°ä¸ºoldåˆ—è¡¨åŒºï¼Œå­˜æ”¾ä½¿ç”¨è¾ƒå°‘æ•°æ®ï¼Œå 37%</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/22d85da8b0ed4c0d9a3f1d88eca9d8d0.png" alt="image.png"></p><h1>3.ä¸ºä»€ä¹ˆå†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Ÿ</h1><p><strong>change BufferåŸºæœ¬æ¦‚å¿µ</strong></p><p>Change Bufferï¼šå†™ç¼“å†²åŒº,æ˜¯é’ˆå¯¹äºŒçº§ç´¢å¼•(è¾…åŠ©ç´¢å¼•) é¡µçš„æ›´æ–°ä¼˜åŒ–æªæ–½ã€‚</p><p>ä½œç”¨:  åœ¨è¿›è¡ŒDMLæ“ä½œæ—¶ï¼Œå¦‚æœè¯·æ±‚çš„è¾…åŠ©ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰æ²¡æœ‰åœ¨ç¼“å†²æ± ä¸­æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»å°†ç£ç›˜é¡µåŠ è½½åˆ°ç¼“å†²æ± ï¼Œè€Œæ˜¯åœ¨CBè®°å½•ç¼“å†²å˜æ›´ï¼Œç­‰æœªæ¥æ•°æ®è¢«è¯»å–æ—¶ï¼Œå†å°†æ•°æ®åˆå¹¶æ¢å¤åˆ°BPä¸­ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/b45afc7c46344260a20480939a88f144.png" alt="image.png"></p><ol><li>ChangeBufferç”¨äºå­˜å‚¨SQLå˜æ›´æ“ä½œï¼Œæ¯”å¦‚Insert/Update/Deleteç­‰SQLè¯­å¥</li><li>ChangeBufferä¸­çš„æ¯ä¸ªå˜æ›´æ“ä½œéƒ½æœ‰å…¶å¯¹åº”çš„æ•°æ®é¡µï¼Œå¹¶ä¸”è¯¥æ•°æ®é¡µæœªåŠ è½½åˆ°ç¼“å­˜ä¸­ï¼›</li><li>å½“ChangeBufferä¸­å˜æ›´æ“ä½œå¯¹åº”çš„æ•°æ®é¡µåŠ è½½åˆ°ç¼“å­˜ä¸­åï¼ŒInnoDBä¼šæŠŠå˜æ›´æ“ä½œMergeåˆ°æ•°æ®é¡µä¸Šï¼›</li><li>InnoDBä¼šå®šæœŸåŠ è½½ChangeBufferä¸­æ“ä½œå¯¹åº”çš„æ•°æ®é¡µåˆ°ç¼“å­˜ä¸­ï¼Œå¹¶Mergeå˜æ›´æ“ä½œï¼›</li></ol><p><strong>change bufferæ›´æ–°æµç¨‹</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/1a9194995ec34d0bbb2700ad07aae00b.png" alt="image.png"></p><p>å†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><ul><li>å¦‚æœåœ¨ç´¢å¼•è®¾ç½®å”¯ä¸€æ€§ï¼Œåœ¨è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒInnoDBå¿…é¡»è¦åšå”¯ä¸€æ€§æ ¡éªŒï¼Œå› æ­¤å¿…é¡»æŸ¥è¯¢ç£ç›˜ï¼Œåšä¸€æ¬¡IOæ“ä½œã€‚ä¼šç›´æ¥å°†è®°å½•æŸ¥è¯¢åˆ°BufferPoolä¸­ï¼Œç„¶ååœ¨ç¼“å†²æ± ä¿®æ”¹ï¼Œä¸ä¼šåœ¨ChangeBufferæ“ä½œã€‚</li></ul><h1>4.MySQLä¸ºä»€ä¹ˆæ”¹è¿›LRUç®—æ³•ï¼Ÿ</h1><p><strong>æ™®é€šLRUç®—æ³•</strong></p><p>LRU = Least Recently Usedï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰: å°±æ˜¯æœ«å°¾æ·˜æ±°æ³•ï¼Œæ–°æ•°æ®ä»é“¾è¡¨å¤´éƒ¨åŠ å…¥ï¼Œé‡Šæ”¾ç©ºé—´æ—¶ä»æœ«å°¾æ·˜æ±°.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/c734385cef9949b484e42ee60222a97a.png" alt="image.png"></p><ol><li>å½“è¦è®¿é—®æŸä¸ªé¡µæ—¶ï¼Œå¦‚æœä¸åœ¨Buffer Poolï¼Œéœ€è¦æŠŠè¯¥é¡µåŠ è½½åˆ°ç¼“å†²æ± ,å¹¶ä¸”æŠŠè¯¥ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸ºèŠ‚ç‚¹æ·»åŠ åˆ°LRUé“¾è¡¨çš„å¤´éƒ¨ã€‚</li><li>å½“è¦è®¿é—®æŸä¸ªé¡µæ—¶ï¼Œå¦‚æœåœ¨Buffer Poolä¸­ï¼Œåˆ™ç›´æ¥æŠŠè¯¥é¡µå¯¹åº”çš„æ§åˆ¶å—ç§»åŠ¨åˆ°LRUé“¾è¡¨çš„å¤´éƒ¨</li><li>å½“éœ€è¦é‡Šæ”¾ç©ºé—´æ—¶,ä»æœ€æœ«å°¾æ·˜æ±°</li></ol><p><strong>æ™®é€šLRUé“¾è¡¨çš„ä¼˜ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹</p><ul><li>æ‰€æœ‰æœ€è¿‘ä½¿ç”¨çš„æ•°æ®éƒ½åœ¨é“¾è¡¨è¡¨å¤´ï¼Œæœ€è¿‘æœªä½¿ç”¨çš„æ•°æ®éƒ½åœ¨é“¾è¡¨è¡¨å°¾,ä¿è¯çƒ­æ•°æ®èƒ½æœ€å¿«è¢«è·å–åˆ°ã€‚</li></ul><p>ç¼ºç‚¹</p><ul><li>å¦‚æœå‘ç”Ÿå…¨è¡¨æ‰«æï¼ˆæ¯”å¦‚ï¼šæ²¡æœ‰å»ºç«‹åˆé€‚çš„ç´¢å¼• or æŸ¥è¯¢æ—¶ä½¿ç”¨select * ç­‰ï¼‰ï¼Œåˆ™æœ‰å¾ˆå¤§å¯èƒ½å°†çœŸæ­£çš„çƒ­æ•°æ®æ·˜æ±°æ‰.</li><li>ç”±äºMySQLä¸­å­˜åœ¨é¢„è¯»æœºåˆ¶ï¼Œå¾ˆå¤šé¢„è¯»çš„é¡µéƒ½ä¼šè¢«æ”¾åˆ°LRUé“¾è¡¨çš„è¡¨å¤´ã€‚å¦‚æœè¿™äº›é¢„è¯»çš„é¡µéƒ½æ²¡æœ‰ç”¨åˆ°çš„è¯ï¼Œè¿™æ ·ï¼Œä¼šå¯¼è‡´å¾ˆå¤šå°¾éƒ¨çš„ç¼“å†²é¡µå¾ˆå¿«å°±ä¼šè¢«æ·˜æ±°ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/ebdd36bca2634360979f5462a409b998.png" alt="image.png"></p><p><strong>æ”¹è¿›å‹LRUç®—æ³•</strong></p><p>æ”¹è¿›å‹LRUï¼šå°†é“¾è¡¨åˆ†ä¸ºnewå’Œoldä¸¤ä¸ªéƒ¨åˆ†ï¼ŒåŠ å…¥å…ƒç´ æ—¶å¹¶ä¸æ˜¯ä»è¡¨å¤´æ’å…¥ï¼Œè€Œæ˜¯ä»ä¸­é—´midpointä½ç½®æ’å…¥(å°±æ˜¯è¯´ä»ç£ç›˜ä¸­æ–°è¯»å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨å†·æ•°æ®åŒºçš„å¤´éƒ¨)ï¼Œå¦‚æœæ•°æ®å¾ˆå¿«è¢«è®¿é—®ï¼Œé‚£ä¹ˆpageå°±ä¼šå‘newåˆ—è¡¨å¤´éƒ¨ç§»åŠ¨ï¼Œå¦‚æœæ•°æ®æ²¡æœ‰è¢«è®¿é—®ï¼Œä¼šé€æ­¥å‘oldå°¾éƒ¨ç§»åŠ¨ï¼Œç­‰å¾…æ·˜æ±°ã€‚</p><p>![](file:///Users/congqing/Downloads/%2002_%E6%8E%88%E8%AF%BE%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/11.jpg?lastModify=1672033423)<img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/82e7eef5d5bd4d21844866cdb8655ae5.png" alt="image.png"></p><p>å†·æ•°æ®åŒºçš„æ•°æ®é¡µä»€ä¹ˆæ—¶å€™ä¼šè¢«è½¬åˆ°åˆ°çƒ­æ•°æ®åŒºå‘¢ ?</p><ol><li>å¦‚æœè¯¥æ•°æ®é¡µåœ¨LRUé“¾è¡¨ä¸­å­˜åœ¨æ—¶é—´è¶…è¿‡1sï¼Œå°±å°†å…¶ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨  ( é“¾è¡¨æŒ‡çš„æ˜¯æ•´ä¸ªLRUé“¾è¡¨)</li><li>å¦‚æœè¯¥æ•°æ®é¡µåœ¨LRUé“¾è¡¨ä¸­å­˜åœ¨çš„æ—¶é—´çŸ­äº1sï¼Œå…¶ä½ç½®ä¸å˜(ç”±äºå…¨è¡¨æ‰«ææœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒå¯¹æŸä¸ªé¡µçš„é¢‘ç¹è®¿é—®æ€»è€—æ—¶ä¼šå¾ˆçŸ­)</li><li>1sè¿™ä¸ªæ—¶é—´æ˜¯ç”±å‚æ•° <code>innodb_old_blocks_time</code> æ§åˆ¶çš„</li></ol><h1>5.ä½¿ç”¨ç´¢å¼•ä¸€å®šå¯ä»¥æå‡æ•ˆç‡å—ï¼Ÿ</h1><p>ç´¢å¼•å°±æ˜¯æ’å¥½åºçš„,å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„.</p><p>ç®€å•æ¥è®²ï¼Œç´¢å¼•å°±æ˜¯ä¸€ç§å°†æ•°æ®åº“ä¸­çš„è®°å½•æŒ‰ç…§ç‰¹æ®Šå½¢å¼å­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚é€šè¿‡ç´¢å¼•ï¼Œèƒ½å¤Ÿæ˜¾è‘—åœ°æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ï¼Œä»è€Œæå‡æœåŠ¡å™¨çš„æ€§èƒ½.</p><p>ç´¢å¼•çš„ä¼˜åŠ¿ä¸åŠ£åŠ¿</p><ul><li><p>ä¼˜ç‚¹</p><ul><li>æé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡,é™ä½æ•°æ®åº“çš„IOæˆæœ¬</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åº,é™ä½æ•°æ®æ’åºçš„æˆæœ¬,é™ä½äº†CPUçš„æ¶ˆè€—</li></ul></li><li><p>ç¼ºç‚¹</p><ul><li>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ </li><li>ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å ç”¨æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ç”¨ä¸€å®šçš„ç‰©ç†ç©ºé—´</li><li>å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œé™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦</li></ul></li><li><p>åˆ›å»ºç´¢å¼•çš„åŸåˆ™</p><ul><li>åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦ï¼›</li><li>åœ¨ä½œä¸ºä¸»é”®çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå¼ºåˆ¶è¯¥åˆ—çš„å”¯ä¸€æ€§å’Œç»„ç»‡è¡¨ä¸­æ•°æ®çš„æ’åˆ—ç»“æ„ï¼›</li><li>åœ¨ç»å¸¸ç”¨åœ¨è¿æ¥çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿æ¥çš„é€Ÿåº¦ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ ¹æ®èŒƒå›´è¿›è¡Œæœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œå…¶æŒ‡å®šçš„èŒƒå›´æ˜¯è¿ç»­çš„ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æ’åºï¼ŒåŠ å¿«æ’åºæŸ¥è¯¢æ—¶é—´ï¼›</li><li>åœ¨ç»å¸¸ä½¿ç”¨åœ¨WHEREå­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚</li></ul></li></ul><h1>6.ä»‹ç»ä¸€ä¸‹Pageé¡µçš„ç»“æ„ï¼Ÿ</h1><p>Pageæ˜¯æ•´ä¸ªInnoDBå­˜å‚¨çš„æœ€åŸºæœ¬æ„ä»¶ï¼Œä¹Ÿæ˜¯InnoDBç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œä¸æ•°æ®åº“ç›¸å…³çš„æ‰€æœ‰å†…å®¹éƒ½å­˜å‚¨åœ¨è¿™ç§Pageç»“æ„é‡Œã€‚</p><p>Pageåˆ†ä¸ºå‡ ç§ç±»å‹ï¼Œå¸¸è§çš„é¡µç±»å‹æœ‰æ•°æ®é¡µï¼ˆB+tree Nodeï¼‰Undoé¡µï¼ˆUndo Log Pageï¼‰ç³»ç»Ÿé¡µï¼ˆSystem Pageï¼‰ äº‹åŠ¡æ•°æ®é¡µï¼ˆTransaction System Pageï¼‰ç­‰</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/771179e015044ba19f2f04fe4775048d.png" alt="image.png"></p><p><strong>Page å„éƒ¨åˆ†è¯´æ˜</strong></p><table><thead><tr><th><strong>åç§°</strong></th><th><strong>å ç”¨å¤§å°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>File Header</strong></td><td><strong>38å­—èŠ‚</strong></td><td><strong>æ–‡ä»¶å¤´, æè¿°é¡µä¿¡æ¯</strong></td></tr><tr><td><strong>Page Header</strong></td><td><strong>56å­—èŠ‚</strong></td><td><strong>é¡µå¤´,é¡µçš„çŠ¶æ€</strong></td></tr><tr><td><strong>Infimum + Supremum</strong></td><td><strong>26å­—èŠ‚</strong></td><td><strong>æœ€å¤§å’Œæœ€å°è®°å½•,è¿™æ˜¯ä¸¤ä¸ªè™šæ‹Ÿçš„è¡Œè®°å½•</strong></td></tr><tr><td><strong>User Records</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>ç”¨æˆ·è®°å½•,å­˜å‚¨æ•°æ®è¡Œè®°å½•</strong></td></tr><tr><td><strong>Free Space</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>ç©ºé—²ç©ºé—´,é¡µä¸­è¿˜æ²¡æœ‰è¢«ä½¿ç”¨çš„ç©ºé—´</strong></td></tr><tr><td><strong>Page Directory</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>é¡µç›®å½•,å­˜å‚¨ç”¨æˆ·è®°å½•çš„ç›¸å¯¹ä½ç½®</strong></td></tr><tr><td><strong>File Trailer</strong></td><td><strong>8å­—èŠ‚</strong></td><td><strong>æ–‡ä»¶å°¾,æ ¡éªŒé¡µæ˜¯å¦å®Œæ•´</strong></td></tr></tbody></table><ul><li>File Header å­—æ®µç”¨äºè®°å½• Page çš„å¤´ä¿¡æ¯ï¼Œå…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯ FIL_PAGE_PREV å’Œ FIL_PAGE_NEXT å­—æ®µï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¯¥é¡µçš„ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µï¼Œå®é™…ä¸Šæ‰€æœ‰é¡µé€šè¿‡ä¸¤ä¸ªå­—æ®µå¯ä»¥å½¢æˆä¸€æ¡åŒå‘é“¾è¡¨</li><li>Page Header å­—æ®µç”¨äºè®°å½• Page çš„çŠ¶æ€ä¿¡æ¯ã€‚</li><li>Infimum å’Œ Supremum æ˜¯ä¸¤ä¸ªä¼ªè¡Œè®°å½•ï¼ŒInfimumï¼ˆä¸‹ç¡®ç•Œï¼‰è®°å½•æ¯”è¯¥é¡µä¸­ä»»ä½•ä¸»é”®å€¼éƒ½è¦å°çš„å€¼ï¼ŒSupremum ï¼ˆä¸Šç¡®ç•Œï¼‰è®°å½•æ¯”è¯¥é¡µä¸­ä»»ä½•ä¸»é”®å€¼éƒ½è¦å¤§çš„å€¼ï¼Œè¿™ä¸ªä¼ªè®°å½•åˆ†åˆ«æ„æˆäº†é¡µä¸­è®°å½•çš„è¾¹ç•Œã€‚</li><li>User Records ä¸­å­˜æ”¾çš„æ˜¯å®é™…çš„æ•°æ®è¡Œè®°å½•</li><li>Free Space ä¸­å­˜æ”¾çš„æ˜¯ç©ºé—²ç©ºé—´ï¼Œè¢«åˆ é™¤çš„è¡Œè®°å½•ä¼šè¢«è®°å½•æˆç©ºé—²ç©ºé—´</li><li>Page Directory è®°å½•ç€ä¸äºŒå‰æŸ¥æ‰¾ç›¸å…³çš„ä¿¡æ¯</li><li>File Trailer å­˜å‚¨ç”¨äºæ£€æµ‹æ•°æ®å®Œæ•´æ€§çš„æ ¡éªŒå’Œç­‰æ•°æ®ã€‚</li></ul><p><strong>é¡µç»“æ„æ•´ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸ºé€šç”¨éƒ¨åˆ†(æ–‡ä»¶å¤´ã€æ–‡ä»¶å°¾)ã€å­˜å‚¨è®°å½•ç©ºé—´ã€ç´¢å¼•éƒ¨åˆ†ã€‚</strong></p><ol><li>é€šç”¨éƒ¨åˆ† (File Header&amp;File Trailer )</li></ol><p>é€šç”¨éƒ¨åˆ† : ä¸»è¦æŒ‡æ–‡ä»¶å¤´å’Œæ–‡ä»¶å°¾ï¼Œå°†é¡µçš„å†…å®¹è¿›è¡Œå°è£…ï¼Œé€šè¿‡æ–‡ä»¶å¤´å’Œæ–‡ä»¶å°¾æ ¡éªŒçš„CheckSumæ–¹å¼æ¥ç¡®ä¿é¡µçš„ä¼ è¾“æ˜¯å®Œæ•´çš„ã€‚</p><p>å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯åœ¨æ–‡ä»¶å¤´ä¸­çš„ <code>FIL_PAGE_PREV</code> å’Œ <code>FIL_PAGE_NEXT</code> å­—æ®µï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¯¥é¡µçš„ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µï¼Œå®é™…ä¸Šæ‰€æœ‰é¡µé€šè¿‡ä¸¤ä¸ªå­—æ®µå¯ä»¥å½¢æˆä¸€æ¡åŒå‘é“¾è¡¨</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/ec7e6df344d941649bfc5b7d5e6a5bfc.png" alt="image.png"></p><ol start="2"><li>è®°å½•éƒ¨åˆ†(User Records&amp;Free Space)</li></ol><p>é¡µçš„ä¸»è¦ä½œç”¨æ˜¯å­˜å‚¨è®°å½•ï¼Œæ‰€ä»¥â€œæœ€å°å’Œæœ€å¤§è®°å½•â€å’Œâ€œç”¨æˆ·è®°å½•â€éƒ¨åˆ†å äº†é¡µç»“æ„çš„ä¸»è¦ç©ºé—´ã€‚å¦å¤–ç©ºé—²ç©ºé—´æ˜¯ä¸ªçµæ´»çš„éƒ¨åˆ†ï¼Œå½“æœ‰æ–°çš„è®°å½•æ’å…¥æ—¶ï¼Œä¼šä»ç©ºé—²ç©ºé—´ä¸­è¿›è¡Œåˆ†é…ç”¨äºå­˜å‚¨æ–°è®°å½•</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/72c8a7b34e04410cae9d6daf7477de4d.png" alt="image.png"></p><p><strong>3)æ•°æ®ç›®å½•éƒ¨åˆ† (Page Directory)</strong></p><p>æ•°æ®é¡µä¸­è¡Œè®°å½•æŒ‰ç…§ä¸»é”®å€¼ç”±å°åˆ°å¤§é¡ºåºä¸²è”æˆä¸€ä¸ªå•é“¾è¡¨(<strong>é¡µä¸­è®°å½•æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„</strong>)ï¼Œä¸”å•é“¾è¡¨çš„é“¾è¡¨å¤´ä¸ºæœ€å°è®°å½•ï¼Œé“¾è¡¨å°¾ä¸ºæœ€å¤§è®°å½•ã€‚å¹¶ä¸”ä¸ºäº†æ›´å¿«é€Ÿåœ°å®šä½åˆ°æŒ‡å®šçš„è¡Œè®°å½•ï¼Œé€šè¿‡ <code>Page Directory</code>å®ç°ç›®å½•çš„åŠŸèƒ½ï¼Œå€ŸåŠ© <code>Page Directory</code>ä½¿ç”¨äºŒåˆ†æ³•å¿«é€Ÿæ‰¾åˆ°éœ€è¦æŸ¥æ‰¾çš„è¡Œè®°å½•ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/3b5dc41516bd42abbc84dc0e26b7d0c1.png" alt="image.png"></p><h1>7.è¯´ä¸€ä¸‹èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•ï¼Ÿ</h1><p>èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«æ˜¯ï¼šå¶èŠ‚ç‚¹æ˜¯å¦å­˜æ”¾ä¸€æ•´è¡Œè®°å½•</p><ul><li><strong>èšç°‡ç´¢å¼•</strong>: å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—,ç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®.</li><li><strong>éèšç°‡ç´¢å¼•</strong>ï¼šå°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æŒ‡å‘äº†æ•°æ®å¯¹åº”çš„ä½ç½®.</li></ul><p>InnoDB ä¸»é”®ä½¿ç”¨çš„æ˜¯èšç°‡ç´¢å¼•ï¼ŒMyISAM ä¸ç®¡æ˜¯ä¸»é”®ç´¢å¼•ï¼Œè¿˜æ˜¯äºŒçº§ç´¢å¼•ä½¿ç”¨çš„éƒ½æ˜¯éèšç°‡ç´¢å¼•ã€‚</p><p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•é‡‡ç”¨çš„å°±æ˜¯èšç°‡ç´¢å¼•ç»“æ„å­˜å‚¨ã€‚</p><p>èšç°‡ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•ï¼‰</p><ul><li>èšç°‡ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼ŒInnoDBçš„èšç°‡ç´¢å¼•å°±æ˜¯æŒ‰ç…§ä¸»é”®é¡ºåºæ„å»º B+Treeç»“æ„ã€‚B+Tree çš„å¶å­èŠ‚ç‚¹å°±æ˜¯è¡Œè®°å½•ï¼Œè¡Œè®°å½•å’Œä¸»é”®å€¼ç´§å‡‘åœ°å­˜å‚¨åœ¨ä¸€èµ·ã€‚ è¿™ä¹Ÿæ„å‘³ç€ InnoDB çš„ä¸»é”®ç´¢å¼•å°±æ˜¯æ•°æ®è¡¨æœ¬èº«ï¼Œå®ƒæŒ‰ä¸»é”®é¡ºåºå­˜æ”¾äº†æ•´å¼ è¡¨çš„æ•°æ®ï¼Œå ç”¨çš„ç©ºé—´å°±æ˜¯æ•´ä¸ªè¡¨æ•°æ®é‡çš„å¤§å°ã€‚é€šå¸¸è¯´çš„ä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•ã€‚</li><li>InnoDBçš„è¡¨è¦æ±‚å¿…é¡»è¦æœ‰èšç°‡ç´¢å¼•ï¼š<ul><li>å¦‚æœè¡¨å®šä¹‰äº†ä¸»é”®ï¼Œåˆ™ä¸»é”®ç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œåˆ™ç¬¬ä¸€ä¸ªéç©ºuniqueåˆ—ä½œä¸ºèšç°‡ç´¢å¼•</li><li>å¦åˆ™InnoDBä¼šä»å»ºä¸€ä¸ªéšè—çš„row-idä½œä¸ºèšç°‡ç´¢å¼•</li></ul></li><li>è¾…åŠ©ç´¢å¼•<br>InnoDBè¾…åŠ©ç´¢å¼•ï¼Œä¹Ÿå«ä½œäºŒçº§ç´¢å¼•ï¼Œæ˜¯æ ¹æ®ç´¢å¼•åˆ—æ„å»º B+Treeç»“æ„ã€‚ä½†åœ¨ B+Tree çš„å¶å­èŠ‚ç‚¹ä¸­åªå­˜äº†ç´¢å¼•åˆ—å’Œä¸»é”®çš„ä¿¡æ¯ã€‚äºŒçº§ç´¢å¼•å ç”¨çš„ç©ºé—´ä¼šæ¯”èšç°‡ç´¢å¼•å°å¾ˆå¤šï¼Œ é€šå¸¸åˆ›å»ºè¾…åŠ©ç´¢å¼•å°±æ˜¯ä¸ºäº†æå‡æŸ¥è¯¢æ•ˆç‡ã€‚ä¸€ä¸ªè¡¨InnoDBåªèƒ½åˆ›å»ºä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä½†å¯ä»¥åˆ›å»ºå¤šä¸ªè¾…åŠ©ç´¢å¼•ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/e66e956acf0c45e19300c4c6ee9b8028.png" alt="image.png"></p><p><strong>éèšç°‡ç´¢å¼•</strong></p><p>ä¸InnoDBè¡¨å­˜å‚¨ä¸åŒï¼ŒMyISMä½¿ç”¨çš„æ˜¯éèšç°‡ç´¢å¼•ï¼Œ éèšç°‡ç´¢å¼•çš„ä¸¤æ£µB+æ ‘çœ‹ä¸Šå»æ²¡ä»€ä¹ˆä¸åŒ ï¼ŒèŠ‚ç‚¹çš„ç»“æ„å®Œå…¨ä¸€è‡´åªæ˜¯å­˜å‚¨çš„å†…å®¹ä¸åŒè€Œå·²ï¼Œä¸»é”®ç´¢å¼•B+æ ‘çš„èŠ‚ç‚¹å­˜å‚¨äº†ä¸»é”®ï¼Œè¾…åŠ©é”®ç´¢å¼•B+æ ‘å­˜å‚¨äº†è¾…åŠ©é”®ã€‚</p><p>è¡¨æ•°æ®å­˜å‚¨åœ¨ç‹¬ç«‹çš„åœ°æ–¹ï¼Œè¿™ä¸¤é¢—B+æ ‘çš„å¶å­èŠ‚ç‚¹éƒ½ä½¿ç”¨ä¸€ä¸ªåœ°å€æŒ‡å‘çœŸæ­£çš„è¡¨æ•°æ®ï¼Œå¯¹äºè¡¨æ•°æ®æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªé”®æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚ç”±äº ç´¢å¼•æ ‘æ˜¯ç‹¬ç«‹çš„ï¼Œé€šè¿‡è¾…åŠ©é”®æ£€ç´¢æ— éœ€è®¿é—®ä¸»é”®çš„ç´¢å¼•æ ‘ ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/3911e2c181a94bb498acad5540ee87cd.png" alt="image.png"></p><p><strong>èšç°‡ç´¢å¼•çš„ä¼˜ç‚¹</strong></p><ol><li>å½“ä½ éœ€è¦å–å‡ºä¸€å®šèŒƒå›´å†…çš„æ•°æ®æ—¶ï¼Œç”¨èšç°‡ç´¢å¼•ä¹Ÿæ¯”ç”¨éèšç°‡ç´¢å¼•å¥½ã€‚</li><li>å½“é€šè¿‡èšç°‡ç´¢å¼•æŸ¥æ‰¾ç›®æ ‡æ•°æ®æ—¶ç†è®ºä¸Šæ¯”éèšç°‡ç´¢å¼•è¦å¿«ï¼Œå› ä¸ºéèšç°‡ç´¢å¼•å®šä½åˆ°å¯¹åº”ä¸»é”®æ—¶è¿˜è¦å¤šä¸€æ¬¡ç›®æ ‡è®°å½•å¯»å€,å³å¤šä¸€æ¬¡I/Oã€‚</li><li>ä½¿ç”¨è¦†ç›–ç´¢å¼•æ‰«æçš„æŸ¥è¯¢å¯ä»¥ç›´æ¥ä½¿ç”¨é¡µèŠ‚ç‚¹ä¸­çš„ä¸»é”®å€¼ã€‚</li></ol><p><strong>èšç°‡ç´¢å¼•çš„ç¼ºç‚¹</strong></p><ol><li>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåº ã€‚</li><li>æ›´æ–°ä¸»é”®çš„ä»£ä»·å¾ˆé«˜ï¼Œå› ä¸ºå°†ä¼šå¯¼è‡´è¢«æ›´æ–°çš„è¡Œç§»åŠ¨ ã€‚</li><li>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç¬¬äºŒæ¬¡æ ¹æ®ä¸»é”®å€¼æ‰¾åˆ°è¡Œæ•°æ®ã€‚</li></ol><h1>8.ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ</h1><p><strong>1ï¼‰æ™®é€šç´¢å¼•</strong></p><ul><li><strong>è¿™æ˜¯æœ€åŸºæœ¬çš„ç´¢å¼•ç±»å‹ï¼ŒåŸºäºæ™®é€šå­—æ®µå»ºç«‹çš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚</strong></li></ul><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> &lt;ç´¢å¼•çš„åå­—&gt; <span class="keyword">ON</span> tablename (å­—æ®µå);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> <span class="keyword">INDEX</span> [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], <span class="keyword">INDEX</span> [ç´¢å¼•çš„åå­—] (å­—æ®µå) );</span><br></pre></td></tr></table></figure><p><strong>2ï¼‰å”¯ä¸€ç´¢å¼•</strong></p><ul><li><strong>ä¸&quot;æ™®é€šç´¢å¼•&quot;ç±»ä¼¼ï¼Œä¸åŒçš„å°±æ˜¯ï¼šç´¢å¼•å­—æ®µçš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ ã€‚</strong></li></ul><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> &lt;ç´¢å¼•çš„åå­—&gt; <span class="keyword">ON</span> tablename (å­—æ®µå);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], <span class="keyword">UNIQUE</span> [ç´¢å¼•çš„åå­—] (å­—æ®µå) ;</span><br></pre></td></tr></table></figure><p><strong>3ï¼‰ä¸»é”®ç´¢å¼•</strong></p><ul><li><strong>å®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ã€‚åœ¨åˆ›å»ºæˆ–ä¿®æ”¹è¡¨æ—¶è¿½åŠ ä¸»é”®çº¦æŸå³å¯ï¼Œæ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], <span class="keyword">PRIMARY</span> KEY (å­—æ®µå) );</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (å­—æ®µå);</span><br></pre></td></tr></table></figure><p><strong>4ï¼‰å¤åˆç´¢å¼•</strong></p><ul><li><strong>ç”¨æˆ·å¯ä»¥åœ¨å¤šä¸ªåˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œè¿™ç§ç´¢å¼•å«åšç»„å¤åˆç´¢å¼•ï¼ˆç»„åˆç´¢å¼•ï¼‰ã€‚å¤åˆç´¢å¼•å¯ä»¥ä»£æ›¿å¤šä¸ªå•ä¸€ç´¢å¼•ï¼Œç›¸æ¯”å¤šä¸ªå•ä¸€ç´¢å¼•å¤åˆç´¢å¼•æ‰€éœ€çš„å¼€é”€æ›´å°ã€‚</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>ç´¢å¼•çš„åå­—<span class="operator">&gt;</span> <span class="keyword">ON</span> tablename (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..) );</span><br></pre></td></tr></table></figure><ul><li><strong>å¤åˆç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</strong><ul><li><strong>ä½•æ—¶ä½¿ç”¨å¤åˆç´¢å¼•ï¼Œè¦æ ¹æ®whereæ¡ä»¶å»ºç´¢å¼•ï¼Œæ³¨æ„ä¸è¦è¿‡å¤šä½¿ç”¨ç´¢å¼•ï¼Œè¿‡å¤šä½¿ç”¨ä¼šå¯¹æ›´æ–°æ“ä½œæ•ˆç‡æœ‰å¾ˆå¤§å½±å“ã€‚</strong></li><li><strong>å¦‚æœè¡¨å·²ç»å»ºç«‹äº†(col1ï¼Œcol2)ï¼Œå°±æ²¡æœ‰å¿…è¦å†å•ç‹¬å»ºç«‹ï¼ˆcol1ï¼‰ï¼›å¦‚æœç°åœ¨æœ‰(col1)ç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢éœ€è¦col1å’Œcol2æ¡ä»¶ï¼Œå¯ä»¥å»ºç«‹(col1,col2)å¤åˆç´¢å¼•ï¼Œå¯¹äºæŸ¥è¯¢æœ‰ä¸€å®šæé«˜ã€‚</strong></li></ul></li></ul><p><strong>5) å…¨æ–‡ç´¢å¼•</strong></p><p>æŸ¥è¯¢æ“ä½œåœ¨æ•°æ®é‡æ¯”è¾ƒå°‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨likeæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹äºå¤§é‡çš„æ–‡æœ¬æ•°æ®æ£€ç´¢ï¼Œæ•ˆç‡å¾ˆä½ã€‚å¦‚æœä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šæ¯”likeå¿«å¾ˆå¤šå€ã€‚</p><p>åœ¨MySQL 5.6 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œåªæœ‰MyISAMå­˜å‚¨å¼•æ“æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œä»MySQL 5.6å¼€å§‹MyISAMå’ŒInnoDBå­˜å‚¨å¼•æ“å‡æ”¯æŒã€‚</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> FULLTEXT <span class="keyword">INDEX</span> &lt;ç´¢å¼•çš„åå­—&gt; <span class="keyword">ON</span> tablename (å­—æ®µå);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> FULLTEXT [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], FULLTEXT <span class="keyword">KEY</span> [ç´¢å¼•çš„åå­—] (å­—æ®µå) ;</span><br></pre></td></tr></table></figure><p>å…¨æ–‡ç´¢å¼•æ–¹å¼æœ‰è‡ªç„¶è¯­è¨€æ£€ç´¢ <code>IN NATURAL LANGUAGE MODE</code>å’Œå¸ƒå°”æ£€ç´¢ <code>IN BOOLEAN MODE</code>ä¸¤ç§</p><p>å’Œå¸¸ç”¨çš„likeæ¨¡ç³ŠæŸ¥è¯¢ä¸åŒï¼Œå…¨æ–‡ç´¢å¼•æœ‰è‡ªå·±çš„è¯­æ³•æ ¼å¼ï¼Œä½¿ç”¨ match å’Œ against å…³é”®å­—ï¼Œæ¯”å¦‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users3 <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(NAME) AGAINST(<span class="string">&#x27;aabb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- * è¡¨ç¤ºé€šé…ç¬¦,åªèƒ½åœ¨è¯çš„åé¢</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users3 <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(NAME) AGAINST(<span class="string">&#x27;aa*&#x27;</span> Â <span class="keyword">IN</span> <span class="type">BOOLEAN</span> MODE);</span><br></pre></td></tr></table></figure><p>å…¨æ–‡ç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å…¨æ–‡ç´¢å¼•å¿…é¡»åœ¨å­—ç¬¦ä¸²ã€æ–‡æœ¬å­—æ®µä¸Šå»ºç«‹ã€‚</li><li>å…¨æ–‡ç´¢å¼•å­—æ®µå€¼å¿…é¡»åœ¨æœ€å°å­—ç¬¦å’Œæœ€å¤§å­—ç¬¦ä¹‹é—´çš„æ‰ä¼šæœ‰æ•ˆã€‚ï¼ˆinnodbï¼š3-84ï¼›myisamï¼š4-84ï¼‰</li></ul><h1>9.ä»‹ç»ä¸€ä¸‹æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼Ÿ</h1><p>1)æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</p><p>æœ€ä½³å·¦å‰ç¼€æ³•åˆ™:  å¦‚æœåˆ›å»ºçš„æ˜¯è”åˆç´¢å¼•,å°±è¦éµå¾ªè¯¥æ³•åˆ™. ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œwhereåé¢çš„æ¡ä»¶éœ€è¦ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹ä½¿ç”¨,å¹¶ä¸”ä¸èƒ½è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ä½¿ç”¨ã€‚</p><ul><li><p>åœºæ™¯1:  æŒ‰ç…§ç´¢å¼•å­—æ®µé¡ºåºä½¿ç”¨ï¼Œä¸‰ä¸ªå­—æ®µéƒ½ä½¿ç”¨äº†ç´¢å¼•,æ²¡æœ‰é—®é¢˜ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name = <span class="string">&#x27;tom&#x27;</span> </span><br><span class="line"><span class="keyword">AND</span> user_age = <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure><p>![](file:///Users/congqing/Downloads/%2002_%E6%8E%88%E8%AF%BE%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/96.jpg?lastModify=1672123139)</p></li><li><p>åœºæ™¯2: ç›´æ¥è·³è¿‡user_nameä½¿ç”¨ç´¢å¼•å­—æ®µï¼Œç´¢å¼•æ— æ•ˆï¼Œæœªä½¿ç”¨åˆ°ç´¢å¼•ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_age = <span class="number">17</span> <span class="keyword">AND</span> user_level = <span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure><p>![](file:///Users/congqing/Downloads/%2002_%E6%8E%88%E8%AF%BE%E8%B5%84%E6%96%99/MySQL%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98_%E6%9C%80%E7%BB%88%E8%AE%B2%E4%B9%89/02_%E5%9B%BE%E7%89%87/97.jpg?lastModify=1672123139)</p></li><li><p>åœºæ™¯3:  ä¸æŒ‰ç…§åˆ›å»ºè”åˆç´¢å¼•çš„é¡ºåº,ä½¿ç”¨ç´¢å¼•</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> </span><br><span class="line">user_age = <span class="number">17</span> <span class="keyword">AND</span> user_name = <span class="string">&#x27;tom&#x27;</span> <span class="keyword">AND</span> user_level = <span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure><p>whereåé¢æŸ¥è¯¢æ¡ä»¶é¡ºåºæ˜¯ <code>user_age</code>ã€<code>user_level</code>ã€<code>user_name</code>ä¸æˆ‘ä»¬åˆ›å»ºçš„ç´¢å¼•é¡ºåº <code>user_name</code>ã€<code>user_age</code>ã€<code>user_level</code>ä¸ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä½¿ç”¨äº†ç´¢å¼•ï¼ŒåŸå› æ˜¯å› ä¸ºMySqlåº•å±‚ä¼˜åŒ–å™¨å¯¹å…¶è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p></li><li><p>æœ€ä½³å·¦å‰ç¼€åº•å±‚åŸç†<br>MySQLåˆ›å»ºè”åˆç´¢å¼•çš„è§„åˆ™æ˜¯: é¦–å…ˆä¼šå¯¹è”åˆç´¢å¼•æœ€å·¦è¾¹çš„å­—æ®µè¿›è¡Œæ’åº( ä¾‹å­ä¸­æ˜¯ <code>user_name</code> ), åœ¨ç¬¬ä¸€ä¸ªå­—æ®µçš„åŸºç¡€ä¹‹ä¸Š å†å¯¹ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº ( ä¾‹å­ä¸­æ˜¯ <code>user_age</code> ) .</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/c88122c037b649a5ac198164bc520ab9.png" alt="image.png"></p></li><li><p>æœ€ä½³å·¦å‰ç¼€åŸåˆ™å…¶å®æ˜¯å’ŒB+æ ‘çš„ç»“æ„æœ‰å…³ç³», æœ€å·¦å­—æ®µè‚¯å®šæ˜¯æœ‰åºçš„, ç¬¬äºŒä¸ªå­—æ®µåˆ™æ˜¯æ— åºçš„(è”åˆç´¢å¼•çš„æ’åºæ–¹å¼æ˜¯: å…ˆæŒ‰ç…§ç¬¬ä¸€ä¸ªå­—æ®µè¿›è¡Œæ’åº,å¦‚æœç¬¬ä¸€ä¸ªå­—æ®µç›¸ç­‰å†æ ¹æ®ç¬¬äºŒä¸ªå­—æ®µæ’åº). æ‰€ä»¥å¦‚æœç›´æ¥ä½¿ç”¨ç¬¬äºŒä¸ªå­—æ®µ <code>user_age</code> é€šå¸¸æ˜¯ä½¿ç”¨ä¸åˆ°ç´¢å¼•çš„.</p></li></ul><h1>10.ä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ</h1><p>ç´¢å¼•ä¸‹æ¨ï¼ˆindex condition pushdown ï¼‰ç®€ç§°ICPï¼Œåœ¨Mysql5.6çš„ç‰ˆæœ¬ä¸Šæ¨å‡ºï¼Œç”¨äºä¼˜åŒ–æŸ¥è¯¢ã€‚</p><p>éœ€æ±‚: æŸ¥è¯¢usersè¡¨ä¸­ â€œåå­—ç¬¬ä¸€ä¸ªå­—æ˜¯å¼ ï¼Œå¹´é¾„ä¸º10å²çš„æ‰€æœ‰è®°å½•â€ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;å¼ %&#x27;</span> <span class="keyword">AND</span> user_age = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>æ ¹æ®æœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œè¯¥è¯­å¥åœ¨æœç´¢ç´¢å¼•æ ‘çš„æ—¶å€™ï¼Œåªèƒ½åŒ¹é…åˆ°åå­—ç¬¬ä¸€ä¸ªå­—æ˜¯â€˜å¼ â€™çš„è®°å½•ï¼Œæ¥ä¸‹æ¥æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿå½“ç„¶å°±æ˜¯ä»è¯¥è®°å½•å¼€å§‹ï¼Œé€ä¸ªå›è¡¨ï¼Œåˆ°ä¸»é”®ç´¢å¼•ä¸Šæ‰¾å‡ºç›¸åº”çš„è®°å½•ï¼Œå†æ¯”å¯¹ <code>age</code> è¿™ä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆã€‚</p><p>å›¾1: åœ¨ (name,age) ç´¢å¼•é‡Œé¢ç‰¹æ„å»æ‰äº† age çš„å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹ InnoDB å¹¶ä¸ä¼šå»çœ‹ age çš„å€¼ï¼Œåªæ˜¯æŒ‰é¡ºåºæŠŠâ€œname ç¬¬ä¸€ä¸ªå­—æ˜¯â€™å¼ â€™â€çš„è®°å½•ä¸€æ¡æ¡å–å‡ºæ¥å›è¡¨ã€‚å› æ­¤ï¼Œéœ€è¦å›è¡¨ 4 æ¬¡</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/fd7f4f815cf24cde9b35c723eaba71ff.png" alt="image.png"></p><p>MySQL 5.6å¼•å…¥äº†ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼Œå¯ä»¥åœ¨ç´¢å¼•éå†è¿‡ç¨‹ä¸­ï¼Œå¯¹ç´¢å¼•ä¸­åŒ…å«çš„å­—æ®µå…ˆåšåˆ¤æ–­ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p><p>å›¾2: InnoDB åœ¨ (name,age) ç´¢å¼•å†…éƒ¨å°±åˆ¤æ–­äº† age æ˜¯å¦ç­‰äº 10ï¼Œå¯¹äºä¸ç­‰äº 10 çš„è®°å½•ï¼Œç›´æ¥åˆ¤æ–­å¹¶è·³è¿‡,å‡å°‘å›è¡¨æ¬¡æ•°.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/8832dd9ba9b44f96a92f721fbf3179fc.png" alt="image.png"></p><p>æ€»ç»“</p><p>å¦‚æœæ²¡æœ‰ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼ˆæˆ–ç§°ICPä¼˜åŒ–ï¼‰ï¼Œå½“è¿›è¡Œç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œé¦–å…ˆæ ¹æ®ç´¢å¼•æ¥æŸ¥æ‰¾è®°å½•ï¼Œç„¶åå†æ ¹æ®whereæ¡ä»¶æ¥è¿‡æ»¤è®°å½•ï¼›</p><p>åœ¨æ”¯æŒICPä¼˜åŒ–åï¼ŒMySQLä¼šåœ¨å–å‡ºç´¢å¼•çš„åŒæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œwhereæ¡ä»¶è¿‡æ»¤å†è¿›è¡Œç´¢å¼•æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯è¯´æå‰æ‰§è¡Œwhereçš„éƒ¨åˆ†è¿‡æ»¤æ“ä½œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¯ä»¥å¤§å¤§å‡å°‘å›è¡¨æ¬¡æ•°ï¼Œä»è€Œæå‡æ•´ä½“æ€§èƒ½ã€‚</p><h1>11.ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Ÿ</h1><p>è‡ªé€‚åº”Hashç´¢å¼•ï¼ˆAdatptive Hash Indexï¼Œå†…éƒ¨ç®€ç§°AHIï¼‰æ˜¯InnoDBçš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ˜¯ Buffer Poolç®€ç§°BPã€åŒå†™ç¼“å†²åŒºï¼ˆDoublewrite Bufferï¼‰ã€‚</p><p>1ã€è‡ªé€‚åº”å³æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å¤„ç†ï¼Œå½“InnoDBå¼•æ“æ ¹æ®æŸ¥è¯¢ç»Ÿè®¡å‘ç°æŸä¸€æŸ¥è¯¢æ»¡è¶³hashç´¢å¼•çš„æ•°æ®ç»“æ„ç‰¹ç‚¹ï¼Œå°±ä¼šç»™å…¶å»ºç«‹ä¸€ä¸ªhashç´¢å¼•ï¼›</p><p>2ã€hashç´¢å¼•åº•å±‚çš„æ•°æ®ç»“æ„æ˜¯æ•£åˆ—è¡¨ï¼ˆHashè¡¨ï¼‰ï¼Œå…¶æ•°æ®ç‰¹ç‚¹å°±æ˜¯æ¯”è¾ƒé€‚åˆåœ¨å†…å­˜ä¸­ä½¿ç”¨ï¼Œè‡ªé€‚åº”Hashç´¢å¼•å­˜åœ¨äºInnoDBæ¶æ„ä¸­çš„ç¼“å­˜ä¸­ï¼ˆä¸å­˜åœ¨äºç£ç›˜æ¶æ„ä¸­ï¼‰ï¼Œè§ä¸‹é¢çš„InnoDBæ¶æ„å›¾ã€‚</p><p>3ã€è‡ªé€‚åº”hashç´¢å¼•åªé€‚åˆæœç´¢ç­‰å€¼çš„æŸ¥è¯¢ï¼Œå¦‚select * from table where index_col=â€˜xxxâ€™ï¼Œè€Œå¯¹äºå…¶ä»–æŸ¥æ‰¾ç±»å‹ï¼Œå¦‚èŒƒå›´æŸ¥æ‰¾ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼›</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/3435b04b2ae34166851e0c3a3aea92c8.png" alt="image.png"></p><p>Adaptive Hash Indexæ˜¯é’ˆå¯¹B+æ ‘Search Pathçš„ä¼˜åŒ–ï¼Œå› æ­¤æ‰€æœ‰ä¼šæ¶‰åŠåˆ°Search Pathçš„æ“ä½œï¼Œå‡å¯ä½¿ç”¨æ­¤Hashç´¢å¼•è¿›è¡Œä¼˜åŒ–.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/60fe814818db44d6a4eae582348080ab.png" alt="image.png"></p><p>æ ¹æ®ç´¢å¼•é”®å€¼(å‰ç¼€)å¿«é€Ÿå®šä½åˆ°å¶å­èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶è®°å½•çš„Offsetï¼Œå‡å°‘äº†B+æ ‘Search Pathçš„ä»£ä»·ï¼Œå°†B+æ ‘ä»RootèŠ‚ç‚¹è‡³LeafèŠ‚ç‚¹çš„è·¯å¾„å®šä½ï¼Œä¼˜åŒ–ä¸ºHash Indexçš„å¿«é€ŸæŸ¥è¯¢ã€‚</p><p>InnoDBçš„è‡ªé€‚åº”Hashç´¢å¼•æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¯ä»¥é€šè¿‡é…ç½®ä¸‹é¢çš„å‚æ•°è®¾ç½®è¿›è¡Œå…³é—­ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">innodb_adaptive_hash_index</span> = <span class="literal">off</span></span><br></pre></td></tr></table></figure><p>è‡ªé€‚åº”Hashç´¢å¼•ä½¿ç”¨åˆ†ç‰‡è¿›è¡Œå®ç°çš„ï¼Œåˆ†ç‰‡æ•°å¯ä»¥ä½¿ç”¨é…ç½®å‚æ•°è®¾ç½®ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">innodb_adaptive_hash_index_parts</span> = <span class="number">8</span></span><br></pre></td></tr></table></figure><h1>12.ä¸ºä»€ä¹ˆLIKEä»¥%å¼€å¤´ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ</h1><p>likeæŸ¥è¯¢ä¸ºèŒƒå›´æŸ¥è¯¢ï¼Œ%å‡ºç°åœ¨å·¦è¾¹ï¼Œåˆ™ç´¢å¼•å¤±æ•ˆã€‚%å‡ºç°åœ¨å³è¾¹ç´¢å¼•æœªå¤±æ•ˆ.</p><p>åœºæ™¯1: ä¸¤è¾¹éƒ½æœ‰% æˆ–è€… å­—æ®µå·¦è¾¹æœ‰%,ç´¢å¼•éƒ½ä¼šå¤±æ•ˆã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%tom%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%tom&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åœºæ™¯2: å­—æ®µå³è¾¹æœ‰%,ç´¢å¼•ç”Ÿæ•ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;tom%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è§£å†³%å‡ºç°åœ¨å·¦è¾¹ç´¢å¼•å¤±æ•ˆçš„æ–¹æ³•ï¼Œä½¿ç”¨è¦†ç›–ç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> user_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%jack%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> user_name,user_age,user_level <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%jack%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”åœºæ™¯1å¯ä»¥çŸ¥é“, é€šè¿‡ä½¿ç”¨è¦†ç›–ç´¢å¼• <code>type = index</code>,å¹¶ä¸” <code>extra = Using index</code>,ä»å…¨è¡¨æ‰«æå˜æˆäº†å…¨ç´¢å¼•æ‰«æ.</p><p><strong>like å¤±æ•ˆçš„åŸå› </strong></p><ol><li><strong>%å·åœ¨å³:</strong> ç”±äºB+æ ‘çš„ç´¢å¼•é¡ºåºï¼Œæ˜¯æŒ‰ç…§é¦–å­—æ¯çš„å¤§å°è¿›è¡Œæ’åºï¼Œ%å·åœ¨å³çš„åŒ¹é…åˆæ˜¯åŒ¹é…é¦–å­—æ¯ã€‚æ‰€ä»¥å¯ä»¥åœ¨B+æ ‘ä¸Šè¿›è¡Œæœ‰åºçš„æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾é¦–å­—æ¯ç¬¦åˆè¦æ±‚çš„æ•°æ®ã€‚æ‰€ä»¥æœ‰äº›æ—¶å€™å¯ä»¥ç”¨åˆ°ç´¢å¼•.</li><li><strong>%å·åœ¨å·¦:</strong>  æ˜¯åŒ¹é…å­—ç¬¦ä¸²å°¾éƒ¨çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´äº†æ’åºè§„åˆ™ï¼Œå°¾éƒ¨çš„å­—æ¯æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥ä¸èƒ½æŒ‰ç…§ç´¢å¼•é¡ºåºæŸ¥è¯¢ï¼Œå°±ç”¨ä¸åˆ°ç´¢å¼•.</li><li><strong>ä¸¤ä¸ª%%å·:</strong>  è¿™ä¸ªæ˜¯æŸ¥è¯¢ä»»æ„ä½ç½®çš„å­—æ¯æ»¡è¶³æ¡ä»¶å³å¯ï¼Œåªæœ‰é¦–å­—æ¯æ˜¯è¿›è¡Œç´¢å¼•æ’åºçš„ï¼Œå…¶ä»–ä½ç½®çš„å­—æ¯éƒ½æ˜¯ç›¸å¯¹æ— åºçš„ï¼Œæ‰€ä»¥æŸ¥æ‰¾ä»»æ„ä½ç½®çš„å­—æ¯æ˜¯ç”¨ä¸ä¸Šç´¢å¼•çš„.</li></ol><h1>13.è‡ªå¢è¿˜æ˜¯UUIDï¼Ÿæ•°æ®åº“ä¸»é”®çš„ç±»å‹è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ</h1><p>auto_incrementçš„ä¼˜ç‚¹ï¼š</p><ol><li>å­—æ®µé•¿åº¦è¾ƒuuidå°å¾ˆå¤šï¼Œå¯ä»¥æ˜¯bigintç”šè‡³æ˜¯intç±»å‹ï¼Œè¿™å¯¹æ£€ç´¢çš„æ€§èƒ½ä¼šæœ‰æ‰€å½±å“ã€‚</li><li>åœ¨å†™çš„æ–¹é¢ï¼Œå› ä¸ºæ˜¯è‡ªå¢çš„ï¼Œæ‰€ä»¥ä¸»é”®æ˜¯è¶‹åŠ¿è‡ªå¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ–°å¢çš„æ•°æ®æ°¸è¿œåœ¨åé¢ï¼Œè¿™ç‚¹å¯¹äºæ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ã€‚</li><li>æ•°æ®åº“è‡ªåŠ¨ç¼–å·ï¼Œé€Ÿåº¦å¿«ï¼Œè€Œä¸”æ˜¯å¢é‡å¢é•¿ï¼ŒæŒ‰é¡ºåºå­˜æ”¾ï¼Œå¯¹äºæ£€ç´¢éå¸¸æœ‰åˆ©ã€‚</li><li>æ•°å­—å‹ï¼Œå ç”¨ç©ºé—´å°ï¼Œæ˜“æ’åºï¼Œåœ¨ç¨‹åºä¸­ä¼ é€’ä¹Ÿæ–¹ä¾¿ã€‚</li></ol><p>auto_incrementçš„ç¼ºç‚¹ï¼š</p><ol><li>ç”±äºæ˜¯è‡ªå¢ï¼Œå¾ˆå®¹æ˜“é€šè¿‡ç½‘ç»œçˆ¬è™«çŸ¥æ™“å½“å‰ç³»ç»Ÿçš„ä¸šåŠ¡é‡ã€‚</li><li>é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œç«äº‰è‡ªå¢é”ä¼šé™ä½æ•°æ®åº“çš„ååèƒ½åŠ›ã€‚</li><li>æ•°æ®è¿ç§»æˆ–åˆ†åº“åˆ†è¡¨åœºæ™¯ä¸‹ï¼Œè‡ªå¢æ–¹å¼ä¸å†é€‚ç”¨ã€‚</li></ol><p>UUIDçš„ä¼˜ç‚¹ï¼š</p><ol><li>ä¸ä¼šå†²çªã€‚è¿›è¡Œæ•°æ®æ‹†åˆ†ã€åˆå¹¶å­˜å‚¨çš„æ—¶å€™ï¼Œèƒ½ä¿è¯ä¸»é”®å…¨å±€çš„å”¯ä¸€æ€§</li><li>å¯ä»¥åœ¨åº”ç”¨å±‚ç”Ÿæˆï¼Œæé«˜æ•°æ®åº“ååèƒ½åŠ›</li></ol><p>UUIDçš„ç¼ºç‚¹ï¼š</p><ol><li>å½±å“æ’å…¥é€Ÿåº¦ï¼Œ å¹¶ä¸”é€ æˆç¡¬ç›˜ä½¿ç”¨ç‡ä½ã€‚ä¸è‡ªå¢ç›¸æ¯”ï¼Œæœ€å¤§çš„ç¼ºé™·å°±æ˜¯éšæœºioï¼Œä¸‹é¢æˆ‘ä»¬ä¼šå»å…·ä½“è§£é‡Š</li><li>å­—ç¬¦ä¸²ç±»å‹ç›¸æ¯”æ•´æ•°ç±»å‹è‚¯å®šæ›´æ¶ˆè€—ç©ºé—´ï¼Œè€Œä¸”ä¼šæ¯”æ•´æ•°ç±»å‹æ“ä½œæ…¢ã€‚</li></ol><p><strong>uuid å’Œè‡ªå¢ id çš„ç´¢å¼•ç»“æ„å¯¹æ¯”</strong></p><p>1ã€<strong>ä½¿ç”¨è‡ªå¢ id çš„å†…éƒ¨ç»“æ„</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/965a1eaee74545ce898051078f21eb43.png" alt="image.png"></p><p>è‡ªå¢çš„ä¸»é”®çš„å€¼æ˜¯é¡ºåºçš„ï¼Œæ‰€ä»¥ InnoDB æŠŠæ¯ä¸€æ¡è®°å½•éƒ½å­˜å‚¨åœ¨ä¸€æ¡è®°å½•çš„åé¢ã€‚</p><ul><li>å½“è¾¾åˆ°é¡µé¢çš„æœ€å¤§å¡«å……å› å­æ—¶å€™ï¼ˆInnoDB é»˜è®¤çš„æœ€å¤§å¡«å……å› å­æ˜¯é¡µå¤§å°çš„ 15/16ï¼Œä¼šç•™å‡º 1/16 çš„ç©ºé—´ç•™ä½œä»¥åçš„ä¿®æ”¹ï¼‰ã€‚</li><li>ä¸‹ä¸€æ¡è®°å½•å°±ä¼šå†™å…¥æ–°çš„é¡µä¸­ï¼Œä¸€æ—¦æ•°æ®æŒ‰ç…§è¿™ç§é¡ºåºçš„æ–¹å¼åŠ è½½ï¼Œä¸»é”®é¡µå°±ä¼šè¿‘ä¹äºé¡ºåºçš„è®°å½•å¡«æ»¡ï¼Œæå‡äº†é¡µé¢çš„æœ€å¤§å¡«å……ç‡ï¼Œä¸ä¼šæœ‰é¡µçš„æµªè´¹ã€‚</li><li>æ–°æ’å…¥çš„è¡Œä¸€å®šä¼šåœ¨åŸæœ‰çš„æœ€å¤§æ•°æ®è¡Œä¸‹ä¸€è¡Œï¼ŒMySQL å®šä½å’Œå¯»å€å¾ˆå¿«ï¼Œä¸ä¼šä¸ºè®¡ç®—æ–°è¡Œçš„ä½ç½®è€Œåšå‡ºé¢å¤–çš„æ¶ˆè€—ã€‚å‡å°‘äº†é¡µåˆ†è£‚å’Œç¢ç‰‡çš„äº§ç”Ÿã€‚</li></ul><p>2ã€<strong>ä½¿ç”¨ uuid çš„ç´¢å¼•å†…éƒ¨ç»“æ„</strong></p><p>æ’å…¥UUIDï¼š æ–°çš„è®°å½•å¯èƒ½ä¼šæ’å…¥ä¹‹å‰è®°å½•çš„ä¸­é—´ï¼Œå› æ­¤éœ€è¦ç§»åŠ¨ä¹‹å‰çš„è®°å½•</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/e55ddabf65f148de983fe7ef1ae2aa16.png" alt="image.png"></p><p>è¢«å†™æ»¡å·²ç»åˆ·æ–°åˆ°ç£ç›˜ä¸Šçš„é¡µå¯èƒ½ä¼šè¢«é‡æ–°è¯»å–</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/da8ea192750e47d280de25e91af24dcf.png" alt="image.png"></p><p>å› ä¸º uuid ç›¸å¯¹é¡ºåºçš„è‡ªå¢ id æ¥è¯´æ˜¯æ¯«æ— è§„å¾‹å¯è¨€çš„ï¼Œæ–°è¡Œçš„å€¼ä¸ä¸€å®šè¦æ¯”ä¹‹å‰çš„ä¸»é”®çš„å€¼è¦å¤§ï¼Œæ‰€ä»¥ innodb æ— æ³•åšåˆ°æ€»æ˜¯æŠŠæ–°è¡Œæ’å…¥åˆ°ç´¢å¼•çš„æœ€åï¼Œè€Œæ˜¯éœ€è¦ä¸ºæ–°è¡Œå¯»æ‰¾æ–°çš„åˆé€‚çš„ä½ç½®ä»è€Œæ¥åˆ†é…æ–°çš„ç©ºé—´ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹éœ€è¦åšå¾ˆå¤šé¢å¤–çš„æ“ä½œï¼Œæ•°æ®çš„æ¯«æ— é¡ºåºä¼šå¯¼è‡´æ•°æ®åˆ†å¸ƒæ•£ä¹±ï¼Œå°†ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ï¼š</p><ol><li>å†™å…¥çš„ç›®æ ‡é¡µå¾ˆå¯èƒ½å·²ç»åˆ·æ–°åˆ°ç£ç›˜ä¸Šå¹¶ä¸”ä»ç¼“å­˜ä¸Šç§»é™¤ï¼Œæˆ–è€…è¿˜æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œinnodb åœ¨æ’å…¥ä¹‹å‰ä¸å¾—ä¸å…ˆæ‰¾åˆ°å¹¶ä»ç£ç›˜è¯»å–ç›®æ ‡é¡µåˆ°å†…å­˜ä¸­ï¼Œè¿™å°†å¯¼è‡´å¤§é‡çš„éšæœº IOã€‚</li><li>å› ä¸ºå†™å…¥æ˜¯ä¹±åºçš„ï¼Œinnodb ä¸å¾—ä¸é¢‘ç¹çš„åšé¡µåˆ†è£‚æ“ä½œï¼Œä»¥ä¾¿ä¸ºæ–°çš„è¡Œåˆ†é…ç©ºé—´ï¼Œé¡µåˆ†è£‚å¯¼è‡´ç§»åŠ¨å¤§é‡çš„æ•°æ®ï¼Œä¸€æ¬¡æ’å…¥æœ€å°‘éœ€è¦ä¿®æ”¹ä¸‰ä¸ªé¡µä»¥ä¸Šã€‚</li><li>ç”±äºé¢‘ç¹çš„é¡µåˆ†è£‚ï¼Œé¡µä¼šå˜å¾—ç¨€ç–å¹¶è¢«ä¸è§„åˆ™çš„å¡«å……ï¼Œæœ€ç»ˆä¼šå¯¼è‡´æ•°æ®ä¼šæœ‰ç¢ç‰‡ã€‚</li><li>åœ¨æŠŠéšæœºå€¼ï¼ˆuuid å’Œé›ªèŠ± idï¼‰è½½å…¥åˆ°èšç°‡ç´¢å¼•ï¼ˆInnoDB é»˜è®¤çš„ç´¢å¼•ç±»å‹ï¼‰ä»¥åï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦åšä¸€æ¬¡ OPTIMEIZE TABLE æ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–é¡µçš„å¡«å……ï¼Œè¿™å°†åˆéœ€è¦ä¸€å®šçš„æ—¶é—´æ¶ˆè€—ã€‚</li></ol><p>ç»“è®ºï¼šä½¿ç”¨ InnoDB åº”è¯¥å°½å¯èƒ½çš„æŒ‰ä¸»é”®çš„è‡ªå¢é¡ºåºæ’å…¥ï¼Œå¹¶ä¸”å°½å¯èƒ½ä½¿ç”¨å•è°ƒçš„å¢åŠ çš„èšç°‡é”®çš„å€¼æ¥æ’å…¥æ–°è¡Œã€‚å¦‚æœæ˜¯åˆ†åº“åˆ†è¡¨åœºæ™¯ä¸‹ï¼Œåˆ†å¸ƒå¼ä¸»é”®IDçš„ç”Ÿæˆæ–¹æ¡ˆ ä¼˜å…ˆé€‰æ‹©é›ªèŠ±ç®—æ³•ç”Ÿæˆå…¨å±€å”¯ä¸€ä¸»é”®ï¼ˆé›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ä¸»é”®åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æœ‰åºçš„ï¼‰ã€‚</p><h1>14.InnoDBä¸MyISAMçš„åŒºåˆ«ï¼Ÿ</h1><p>InnoDBå’ŒMyISAMæ˜¯ä½¿ç”¨MySQLæ—¶æœ€å¸¸ç”¨çš„ä¸¤ç§å¼•æ“ç±»å‹ï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸‹ä¸¤è€…åŒºåˆ«ã€‚</p><ul><li><p>äº‹åŠ¡å’Œå¤–é”®<br>InnoDBæ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼Œå…·æœ‰å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œé€‚åˆå¤§é‡insertæˆ–updateæ“ä½œ<br>MyISAMä¸æ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼Œå®ƒæä¾›é«˜é€Ÿå­˜å‚¨å’Œæ£€ç´¢ï¼Œé€‚åˆå¤§é‡çš„selectæŸ¥è¯¢æ“ä½œ</p></li><li><p>é”æœºåˆ¶<br>InnoDBæ”¯æŒè¡Œçº§é”ï¼Œé”å®šæŒ‡å®šè®°å½•ã€‚åŸºäºç´¢å¼•æ¥åŠ é”å®ç°ã€‚<br>MyISAMæ”¯æŒè¡¨çº§é”ï¼Œé”å®šæ•´å¼ è¡¨ã€‚</p></li><li><p>ç´¢å¼•ç»“æ„<br>InnoDBä½¿ç”¨èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼Œç´¢å¼•å’Œè®°å½•åœ¨ä¸€èµ·å­˜å‚¨ï¼Œæ—¢ç¼“å­˜ç´¢å¼•ï¼Œä¹Ÿç¼“å­˜è®°å½•ã€‚<br>MyISAMä½¿ç”¨éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼Œç´¢å¼•å’Œè®°å½•åˆ†å¼€ã€‚</p></li><li><p>å¹¶å‘å¤„ç†èƒ½åŠ›<br>MyISAMä½¿ç”¨è¡¨é”ï¼Œä¼šå¯¼è‡´å†™æ“ä½œå¹¶å‘ç‡ä½ï¼Œè¯»ä¹‹é—´å¹¶ä¸é˜»å¡ï¼Œè¯»å†™é˜»å¡ã€‚<br>InnoDBè¯»å†™é˜»å¡å¯ä»¥ä¸éš”ç¦»çº§åˆ«æœ‰å…³ï¼Œå¯ä»¥é‡‡ç”¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ¥æ”¯æŒé«˜å¹¶å‘</p></li><li><p>å­˜å‚¨æ–‡ä»¶<br>InnoDBè¡¨å¯¹åº”ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª.frmè¡¨ç»“æ„æ–‡ä»¶ï¼Œä¸€ä¸ª.ibdæ•°æ®æ–‡ä»¶ã€‚InnoDBè¡¨æœ€å¤§æ”¯æŒ64TBï¼›<br>MyISAMè¡¨å¯¹åº”ä¸‰ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª.frmè¡¨ç»“æ„æ–‡ä»¶ï¼Œä¸€ä¸ªMYDè¡¨æ•°æ®æ–‡ä»¶ï¼Œä¸€ä¸ª.MYIç´¢å¼•æ–‡ä»¶ã€‚ä»MySQL5.0å¼€å§‹é»˜è®¤é™åˆ¶æ˜¯256TBã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/789d8c3ad02743b69ce4123954791b03.png" alt="image.png"></p></li></ul><p>MyISAM é€‚ç”¨åœºæ™¯</p><ul><li>ä¸éœ€è¦äº‹åŠ¡æ”¯æŒï¼ˆä¸æ”¯æŒï¼‰</li><li>å¹¶å‘ç›¸å¯¹è¾ƒä½ï¼ˆé”å®šæœºåˆ¶é—®é¢˜ï¼‰</li><li>æ•°æ®ä¿®æ”¹ç›¸å¯¹è¾ƒå°‘ï¼Œä»¥è¯»ä¸ºä¸»</li><li>æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜</li></ul><p>InnoDB é€‚ç”¨åœºæ™¯</p><ul><li>éœ€è¦äº‹åŠ¡æ”¯æŒï¼ˆå…·æœ‰è¾ƒå¥½çš„äº‹åŠ¡ç‰¹æ€§ï¼‰</li><li>è¡Œçº§é”å®šå¯¹é«˜å¹¶å‘æœ‰å¾ˆå¥½çš„é€‚åº”èƒ½åŠ›</li><li>æ•°æ®æ›´æ–°è¾ƒä¸ºé¢‘ç¹çš„åœºæ™¯</li><li>æ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜</li><li>ç¡¬ä»¶è®¾å¤‡å†…å­˜è¾ƒå¤§ï¼Œå¯ä»¥åˆ©ç”¨InnoDBè¾ƒå¥½çš„ç¼“å­˜èƒ½åŠ›æ¥æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œå‡å°‘ç£ç›˜IO</li></ul><p>ä¸¤ç§å¼•æ“è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ</p><ul><li>æ˜¯å¦éœ€è¦äº‹åŠ¡ï¼Ÿæœ‰ï¼ŒInnoDB</li><li>æ˜¯å¦å­˜åœ¨å¹¶å‘ä¿®æ”¹ï¼Ÿæœ‰ï¼ŒInnoDB</li><li>æ˜¯å¦è¿½æ±‚å¿«é€ŸæŸ¥è¯¢ï¼Œä¸”æ•°æ®ä¿®æ”¹å°‘ï¼Ÿæ˜¯ï¼ŒMyISAM</li><li>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨InnoDB</li></ul><p>æ‰©å±•èµ„æ–™ï¼šå„ä¸ªå­˜å‚¨å¼•æ“ç‰¹æ€§å¯¹æ¯”</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/2abdf9facc0a46af8b62223bcce85639.png" alt="image.png"></p><h1>15.Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p><strong>1ï¼‰B-Treeä»‹ç»</strong></p><p>B-Treeæ˜¯ä¸€ç§å¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘,Bæ ‘å…è®¸ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾å¤šä¸ªæ•°æ®. è¿™æ ·å¯ä»¥åœ¨å°½å¯èƒ½å‡å°‘æ ‘çš„æ·±åº¦çš„åŒæ—¶,å­˜æ”¾æ›´å¤šçš„æ•°æ®(æŠŠç˜¦é«˜çš„æ ‘å˜çš„çŸ®èƒ–).</p><p>B-Treeä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å­æ ‘ä¸ªæ•°çš„æœ€å¤§å€¼ç§°ä¸ºB-Treeçš„é˜¶,ç”¨mè¡¨ç¤º.ä¸€é¢—mé˜¶çš„Bæ ‘,å¦‚æœä¸ä¸ºç©º,å°±å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶.</p><p>mé˜¶çš„B-Treeæ»¡è¶³ä»¥ä¸‹æ¡ä»¶:</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæ‹¥æœ‰m-1ä¸ªå…³é”®å­—(æ ¹èŠ‚ç‚¹é™¤å¤–),ä¹Ÿå°±æ˜¯mä¸ªå­æ ‘</li><li>æ ¹èŠ‚ç‚¹è‡³å°‘æœ‰ä¸¤ä¸ªå­æ ‘(å¯ä»¥æ²¡æœ‰å­æ ‘,æœ‰å°±å¿…é¡»æ˜¯ä¸¤ä¸ª)</li><li>åˆ†æ”¯èŠ‚ç‚¹è‡³å°‘æœ‰(m/2)é¢—å­æ ‘ (é™¤å»æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å…¶ä»–éƒ½æ˜¯åˆ†æ”¯èŠ‚ç‚¹)</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚,å¹¶ä¸”ä»¥å‡åºæ’åº</li></ol><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/56ce03b9a0ca4eb4bb704c6341fedb28.png" alt="image.png"></p><p><strong>ä»€ä¹ˆæ˜¯B-Treeçš„é˜¶ ?</strong><br>æ‰€æœ‰èŠ‚ç‚¹ä¸­ï¼ŒèŠ‚ç‚¹ã€60,70,90ã€‘æ‹¥æœ‰çš„å­èŠ‚ç‚¹æ•°ç›®æœ€å¤šï¼Œå››ä¸ªå­èŠ‚ç‚¹ï¼ˆç°è‰²èŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„B-Treeä¸º4é˜¶Bæ ‘ã€‚</p><p><strong>B-Treeç»“æ„å­˜å‚¨ç´¢å¼•çš„ç‰¹ç‚¹</strong></p><p>ä¸ºäº†æè¿°B-Treeé¦–å…ˆå®šä¹‰ä¸€æ¡è®°å½•ä¸ºä¸€ä¸ªé”®å€¼å¯¹[key, data] ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹åº”è¡¨ä¸­çš„ä¸»é”®å€¼(èšç°‡ç´¢å¼•)ï¼Œdataä¸ºä¸€è¡Œè®°å½•ä¸­é™¤ä¸»é”®å¤–çš„æ•°æ®ã€‚å¯¹äºä¸åŒçš„è®°å½•ï¼Œkeyå€¼äº’ä¸ç›¸åŒ</p><ul><li>ç´¢å¼•å€¼å’Œdataæ•°æ®åˆ†å¸ƒåœ¨æ•´æ£µæ ‘ç»“æ„ä¸­</li><li>ç™½è‰²å—éƒ¨åˆ†æ˜¯æŒ‡é’ˆ,å­˜å‚¨ç€å­èŠ‚ç‚¹çš„åœ°å€ä¿¡æ¯ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜æ”¾å¤šä¸ªç´¢å¼•å€¼åŠå¯¹åº”çš„dataæ•°æ®</li><li>æ ‘èŠ‚ç‚¹ä¸­çš„å¤šä¸ªç´¢å¼•å€¼ä»å·¦åˆ°å³å‡åºæ’åˆ—</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/f4502da0577d4dc2af9cf8def7c18edd.png" alt="image.png"></p><p><strong>B-Treeçš„æŸ¥æ‰¾æ“ä½œ</strong></p><p>B-Treeçš„æ¯ä¸ªèŠ‚ç‚¹çš„å…ƒç´ å¯ä»¥è§†ä¸ºä¸€æ¬¡I/Oè¯»å–ï¼Œæ ‘çš„é«˜åº¦è¡¨ç¤ºæœ€å¤šçš„I/Oæ¬¡æ•°ï¼Œåœ¨ç›¸åŒæ•°é‡çš„æ€»å…ƒç´ ä¸ªæ•°ä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å…ƒç´ ä¸ªæ•°è¶Šå¤šï¼Œé«˜åº¦è¶Šä½ï¼ŒæŸ¥è¯¢æ‰€éœ€çš„I/Oæ¬¡æ•°è¶Šå°‘.</p><p><strong>B-Treeæ€»ç»“</strong></p><ul><li>ä¼˜ç‚¹: Bæ ‘å¯ä»¥åœ¨å†…éƒ¨èŠ‚ç‚¹å­˜å‚¨é”®å€¼å’Œç›¸å…³è®°å½•æ•°æ®ï¼Œå› æ­¤æŠŠé¢‘ç¹è®¿é—®çš„æ•°æ®æ”¾åœ¨é è¿‘æ ¹èŠ‚ç‚¹çš„ä½ç½®å°†å¤§å¤§æé«˜çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>ç¼ºç‚¹: Bæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸ä»…åŒ…å«æ•°æ®çš„keyå€¼,è¿˜æœ‰dataæ•°æ®. æ‰€ä»¥å½“dataæ•°æ®è¾ƒå¤§æ—¶,ä¼šå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„keyå€¼å‡å°‘,å¹¶ä¸”å¯¼è‡´Bæ ‘çš„å±‚æ•°å˜é«˜.å¢åŠ æŸ¥è¯¢æ—¶çš„IOæ¬¡æ•°.</li><li>ä½¿ç”¨åœºæ™¯: Bæ ‘ä¸»è¦åº”ç”¨äºæ–‡ä»¶ç³»ç»Ÿä»¥åŠéƒ¨åˆ†æ•°æ®åº“ç´¢å¼•ï¼Œå¦‚MongoDBï¼Œå¤§éƒ¨åˆ†å…³ç³»å‹æ•°æ®åº“ç´¢å¼•åˆ™æ˜¯ä½¿ç”¨B+æ ‘å®ç°</li></ul><p><strong>2ï¼‰B+Tree</strong></p><p>B+Treeæ˜¯åœ¨B-TreeåŸºç¡€ä¸Šçš„ä¸€ç§ä¼˜åŒ–ï¼Œä½¿å…¶æ›´é€‚åˆå®ç°å­˜å‚¨ç´¢å¼•ç»“æ„ï¼ŒInnoDBå­˜å‚¨å¼•æ“å°±æ˜¯ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</p><p><strong>B+Treeçš„ç‰¹å¾</strong></p><ul><li>éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ä¿¡æ¯.</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¹‹é—´éƒ½æœ‰ä¸€ä¸ªé“¾æŒ‡é’ˆ.</li><li>æ•°æ®è®°å½•éƒ½å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­.</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/844e6a92336a4549aa44d237fa1ca447.png" alt="image.png"></p><p><strong>B+Treeçš„ä¼˜åŠ¿</strong></p><ol><li>B+Treeæ˜¯B Treeçš„å˜ç§ï¼ŒB Treeèƒ½è§£å†³çš„é—®é¢˜ï¼ŒB+Treeä¹Ÿèƒ½å¤Ÿè§£å†³ï¼ˆé™ä½æ ‘çš„é«˜åº¦ï¼Œå¢å¤§èŠ‚ç‚¹å­˜å‚¨æ•°æ®é‡ï¼‰</li><li>B+Treeæ‰«åº“å’Œæ‰«è¡¨èƒ½åŠ›æ›´å¼ºï¼Œå¦‚æœæˆ‘ä»¬è¦æ ¹æ®ç´¢å¼•å»è¿›è¡Œæ•°æ®è¡¨çš„æ‰«æï¼Œå¯¹B Treeè¿›è¡Œæ‰«æï¼Œéœ€è¦æŠŠæ•´æ£µæ ‘éå†ä¸€éï¼Œè€ŒB+Treeåªéœ€è¦éå†ä»–çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹å³å¯ï¼ˆå¶å­èŠ‚ç‚¹ä¹‹é—´æœ‰å¼•ç”¨ï¼‰ã€‚</li><li>B+Treeç£ç›˜è¯»å†™èƒ½åŠ›æ›´å¼ºï¼Œä»–çš„æ ¹èŠ‚ç‚¹å’Œæ”¯èŠ‚ç‚¹ä¸ä¿å­˜æ•°æ®åŒºï¼Œæ‰€æœ‰æ ¹èŠ‚ç‚¹å’Œæ”¯èŠ‚ç‚¹åŒæ ·å¤§å°çš„æƒ…å†µä¸‹ï¼Œä¿å­˜çš„å…³é”®å­—è¦æ¯”B Treeè¦å¤šã€‚è€Œå¶å­èŠ‚ç‚¹ä¸ä¿å­˜å­èŠ‚ç‚¹å¼•ç”¨ã€‚æ‰€ä»¥ï¼ŒB+Treeè¯»å†™ä¸€æ¬¡ç£ç›˜åŠ è½½çš„å…³é”®å­—æ¯”B Treeæ›´å¤šã€‚</li><li>B+Treeæ’åºèƒ½åŠ›æ›´å¼ºï¼Œå¦‚ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒB+Treeå¤©ç„¶å…·æœ‰æ’åºåŠŸèƒ½ã€‚</li><li>B+TreeæŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šï¼Œæ¯æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŸ¥è¯¢IOæ¬¡æ•°ä¸€å®šæ˜¯ç¨³å®šçš„ã€‚å½“ç„¶è¿™ä¸ªæ¯ä¸ªäººçš„ç†è§£éƒ½ä¸åŒï¼Œå› ä¸ºåœ¨B Treeå¦‚æœæ ¹èŠ‚ç‚¹å‘½ä¸­ç›´æ¥è¿”å›ï¼Œç¡®å®æ•ˆç‡æ›´é«˜ã€‚</li></ol><h1>16.ä¸€ä¸ªB+æ ‘ä¸­å¤§æ¦‚èƒ½å­˜æ”¾å¤šå°‘æ¡ç´¢å¼•è®°å½•ï¼Ÿ</h1><p>MySQLè®¾è®¡è€…å°†ä¸€ä¸ªB+Treeçš„èŠ‚ç‚¹çš„å¤§å°è®¾ç½®ä¸ºç­‰äºä¸€ä¸ªé¡µ. (è¿™æ ·åšçš„ç›®çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡I/Oå°±å¯ä»¥å®Œå…¨è½½å…¥), InnoDBçš„ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯16KB,æ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ä¹Ÿæ˜¯16KB, å¹¶ä¸”B+Treeçš„æ ¹èŠ‚ç‚¹æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„,å­èŠ‚ç‚¹æ‰æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Š.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/ed746f7baf004f1e92a18649e3000bd0.png" alt="image.png"></p><p><strong>å‡è®¾ä¸€ä¸ªB+æ ‘é«˜ä¸º2ï¼Œå³å­˜åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹å’Œè‹¥å¹²ä¸ªå¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™æ£µB+æ ‘çš„å­˜æ”¾æ€»è®°å½•æ•°ä¸ºï¼š</strong></p><p><strong>æ ¹èŠ‚ç‚¹æŒ‡é’ˆæ•°*å•ä¸ªå¶å­èŠ‚ç‚¹è®°å½•è¡Œæ•°.</strong></p><ul><li><strong>è®¡ç®—æ ¹èŠ‚ç‚¹æŒ‡é’ˆæ•°</strong>: å‡è®¾è¡¨çš„ä¸»é”®ä¸ºINTç±»å‹,å ç”¨çš„å°±æ˜¯4ä¸ªå­—èŠ‚,æˆ–è€…æ˜¯BIGINTå ç”¨8ä¸ªå­—èŠ‚, æŒ‡é’ˆå¤§å°ä¸º6ä¸ªå­—èŠ‚,é‚£ä¹ˆä¸€ä¸ªé¡µ(å°±æ˜¯B+Treeä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹) ,å¤§æ¦‚å¯ä»¥å­˜å‚¨: 16384B / (4B+6B) = 1638 ,ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šå¯ä»¥å­˜å‚¨1638ä¸ªç´¢å¼•æŒ‡é’ˆ.</li><li><strong>è®¡ç®—æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è®°å½•æ•°</strong>:æˆ‘ä»¬å‡è®¾ä¸€è¡Œè®°å½•çš„æ•°æ®å¤§å°ä¸º1k,é‚£ä¹ˆä¸€é¡µå°±å¯ä»¥å­˜å‚¨16è¡Œæ•°æ®,16KB / 1KB = 16.</li><li><strong>ä¸€é¢—é«˜åº¦ä¸º2çš„B+Treeå¯ä»¥å­˜æ”¾çš„è®°å½•æ•°ä¸º</strong>: 1638 * 16=26208 æ¡æ•°æ®è®°å½•, åŒæ ·çš„åŸç†å¯ä»¥æ¨ç®—å‡ºä¸€ä¸ªé«˜åº¦3çš„B+Treeå¯ä»¥å­˜æ”¾: 1638 * 1638 * 16 = 42928704æ¡è¿™æ ·çš„è®°å½•.</li></ul><p><strong>æ‰€ä»¥InnoDBä¸­çš„B+Treeé«˜åº¦ä¸€èˆ¬ä¸º1-3å±‚,å°±å¯ä»¥æ»¡è¶³åƒä¸‡çº§åˆ«çš„æ•°æ®å­˜å‚¨</strong>,åœ¨æŸ¥æ‰¾æ•°æ®æ—¶ä¸€æ¬¡é¡µçš„æŸ¥æ‰¾ä»£è¡¨ä¸€æ¬¡ IOï¼Œæ‰€ä»¥é€šè¿‡ä¸»é”®ç´¢å¼•æŸ¥è¯¢é€šå¸¸åªéœ€è¦ 1-3 æ¬¡ IO æ“ä½œå³å¯æŸ¥æ‰¾åˆ°æ•°æ®ã€‚</p><h1>17.explain ç”¨è¿‡å—ï¼Œæœ‰å“ªäº›ä¸»è¦å­—æ®µï¼Ÿ</h1><p>ä½¿ç”¨ <code>EXPLAIN</code> å…³é”®å­—å¯ä»¥æ¨¡æ‹Ÿä¼˜åŒ–å™¨æ¥æ‰§è¡ŒSQLæŸ¥è¯¢è¯­å¥ï¼Œä»è€ŒçŸ¥é“MySQLæ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬çš„SQLè¯­å¥çš„ã€‚åˆ†æå‡ºæŸ¥è¯¢è¯­å¥æˆ–æ˜¯è¡¨ç»“æ„çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>MySQLæŸ¥è¯¢è¿‡ç¨‹</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/0ffbda5da5ae491bbf13b13bf75fdbdc.png" alt="image.png"></p><p><strong>é€šè¿‡explainæˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š</strong></p><ul><li><strong>è¡¨çš„è¯»å–é¡ºåº</strong></li><li><strong>æ•°æ®è¯»å–æ“ä½œçš„æ“ä½œç±»å‹</strong></li><li><strong>å“ªäº›ç´¢å¼•å¯ä»¥è¢«ä½¿ç”¨</strong></li><li><strong>å“ªäº›ç´¢å¼•çœŸæ­£è¢«ä½¿ç”¨</strong></li><li><strong>è¡¨çš„ç›´æ¥å¼•ç”¨</strong></li><li><strong>æ¯å¼ è¡¨çš„æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢äº†</strong></li></ul><p>Explainä½¿ç”¨æ–¹å¼: <strong>explain+sqlè¯­å¥</strong>, é€šè¿‡æ‰§è¡Œexplainå¯ä»¥è·å¾—sqlè¯­å¥æ‰§è¡Œçš„ç›¸å…³ä¿¡æ¯</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> users;</span><br></pre></td></tr></table></figure><h1>18.typeå­—æ®µä¸­æœ‰å“ªäº›å¸¸è§çš„å€¼ï¼Ÿ</h1><p><strong>typeå­—æ®µåœ¨ MySQL å®˜ç½‘æ–‡æ¡£æè¿°å¦‚ä¸‹ï¼š</strong></p><blockquote><p><strong>The join type. For descriptions of the different types.</strong></p></blockquote><p><strong>typeå­—æ®µæ˜¾ç¤ºçš„æ˜¯è¿æ¥ç±»å‹ ( join typeè¡¨ç¤ºçš„æ˜¯ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥è·å–æ•°æ®)ï¼Œå®ƒæè¿°äº†æ‰¾åˆ°æ‰€éœ€æ•°æ®æ‰€ä½¿ç”¨çš„æ‰«ææ–¹å¼, æ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ã€‚</strong></p><p><strong>ä¸‹é¢ç»™å‡ºå„ç§è¿æ¥ç±»å‹,æŒ‰ç…§ä»æœ€ä½³ç±»å‹åˆ°æœ€åç±»å‹è¿›è¡Œæ’åº:</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å®Œæ•´çš„è¿æ¥ç±»å‹æ¯”è¾ƒå¤š</span></span><br><span class="line"><span class="keyword">system</span> &gt; const &gt; eq_ref &gt; <span class="keyword">ref</span> &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; <span class="keyword">index</span> &gt; <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç®€åŒ–ä¹‹å,æˆ‘ä»¬å¯ä»¥åªå…³æ³¨ä¸€ä¸‹å‡ ç§</span></span><br><span class="line"><span class="keyword">system</span> &gt; const &gt; eq_ref &gt; <span class="keyword">ref</span> &gt; range &gt; <span class="keyword">index</span> &gt; <span class="keyword">ALL</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>ä¸€èˆ¬æ¥è¯´,éœ€è¦ä¿è¯æŸ¥è¯¢è‡³å°‘è¾¾åˆ° rangeçº§åˆ«,æœ€å¥½èƒ½åˆ°ref,å¦åˆ™å°±è¦å°±è¡ŒSQLçš„ä¼˜åŒ–è°ƒæ•´</strong></p></blockquote><p>ä¸‹é¢ä»‹ç»typeå­—æ®µä¸åŒå€¼è¡¨ç¤ºçš„å«ä¹‰:</p><table><thead><tr><th><strong>typeç±»å‹</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td><strong>system</strong></td><td><strong>ä¸è¿›è¡Œç£ç›˜IO,æŸ¥è¯¢ç³»ç»Ÿè¡¨,ä»…ä»…è¿”å›ä¸€æ¡æ•°æ®</strong></td></tr><tr><td><strong>const</strong></td><td><strong>æŸ¥æ‰¾ä¸»é”®ç´¢å¼•,æœ€å¤šè¿”å›1æ¡æˆ–0æ¡æ•°æ®. å±äºç²¾ç¡®æŸ¥æ‰¾</strong></td></tr><tr><td><strong>eq_ref</strong></td><td><strong>æŸ¥æ‰¾å”¯ä¸€æ€§ç´¢å¼•,è¿”å›æ•°æ®æœ€å¤šä¸€æ¡, å±äºç²¾ç¡®æŸ¥æ‰¾</strong></td></tr><tr><td><strong>ref</strong></td><td><strong>æŸ¥æ‰¾éå”¯ä¸€æ€§ç´¢å¼•,è¿”å›åŒ¹é…æŸä¸€æ¡ä»¶çš„å¤šæ¡æ•°æ®,å±äºç²¾ç¡®æŸ¥æ‰¾,æ•°æ®è¿”å›å¯èƒ½æ˜¯å¤šæ¡.</strong></td></tr><tr><td><strong>range</strong></td><td><strong>æŸ¥æ‰¾æŸä¸ªç´¢å¼•çš„éƒ¨åˆ†ç´¢å¼•,åªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œ,å±äºèŒƒå›´æŸ¥æ‰¾. æ¯”å¦‚: &gt; ã€ &lt; ã€in ã€between</strong></td></tr><tr><td><strong>index</strong></td><td><strong>æŸ¥æ‰¾æ‰€æœ‰ç´¢å¼•æ ‘,æ¯”ALLå¿«ä¸€äº›,å› ä¸ºç´¢å¼•æ–‡ä»¶è¦æ¯”æ•°æ®æ–‡ä»¶å°.</strong></td></tr><tr><td><strong>ALL</strong></td><td><strong>ä¸ä½¿ç”¨ä»»ä½•ç´¢å¼•,ç›´æ¥è¿›è¡Œå…¨è¡¨æ‰«æ</strong></td></tr><tr><td></td><td></td></tr></tbody></table><h1>19.Extraæœ‰å“ªäº›ä¸»è¦æŒ‡æ ‡ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>Extra æ˜¯ EXPLAIN è¾“å‡ºä¸­å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„åˆ—ï¼Œè¯¥åˆ—æ˜¾ç¤ºMySQLåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯</p><table><thead><tr><th><strong>extraç±»å‹</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td><strong>Using filesort</strong></td><td><strong>MySQLä¸­æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆçš„æ’åºæ“ä½œç§°ä¸º  â€œæ–‡ä»¶æ’åºâ€</strong></td></tr><tr><td><strong>Using index</strong></td><td><strong>è¡¨ç¤ºç›´æ¥è®¿é—®ç´¢å¼•å°±èƒ½å¤Ÿè·å–åˆ°æ‰€éœ€è¦çš„æ•°æ®ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰ï¼Œä¸éœ€è¦é€šè¿‡ç´¢å¼•å›è¡¨</strong></td></tr><tr><td><strong>Using index condition</strong></td><td><strong>æœç´¢æ¡ä»¶ä¸­è™½ç„¶å‡ºç°äº†ç´¢å¼•åˆ—ï¼Œä½†æ˜¯æœ‰éƒ¨åˆ†æ¡ä»¶æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œ</strong> <strong>ä¼šæ ¹æ®èƒ½ç”¨ç´¢å¼•çš„æ¡ä»¶å…ˆæœç´¢ä¸€éå†åŒ¹é…æ— æ³•ä½¿ç”¨ç´¢å¼•çš„æ¡ä»¶ã€‚</strong></td></tr><tr><td><strong>Using join buffer</strong></td><td><strong>ä½¿ç”¨äº†è¿æ¥ç¼“å­˜, ä¼šæ˜¾ç¤ºjoinè¿æ¥æŸ¥è¯¢æ—¶,MySQLé€‰æ‹©çš„æŸ¥è¯¢ç®—æ³•</strong></td></tr><tr><td><strong>Using temporary</strong></td><td><strong>è¡¨ç¤ºMySQLéœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨ç»“æœé›†ï¼Œå¸¸è§äºæ’åºå’Œåˆ†ç»„æŸ¥è¯¢</strong></td></tr><tr><td><strong>Using where</strong></td><td><strong>æ„å‘³ç€å…¨è¡¨æ‰«ææˆ–è€…åœ¨æŸ¥æ‰¾ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä½†æ˜¯è¿˜æœ‰æŸ¥è¯¢æ¡ä»¶ä¸åœ¨ç´¢å¼•å­—æ®µå½“ä¸­</strong></td></tr></tbody></table><h1>20.å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ</h1><ul><li><p>ä¸€èˆ¬æ€§åˆ†é¡µ</p><p>ä¸€èˆ¬çš„åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨ç®€å•çš„ limit å­å¥å°±å¯ä»¥å®ç°ã€‚limitæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> è¡¨å <span class="keyword">LIMIT</span> [<span class="keyword">offset</span>,] <span class="keyword">rows</span></span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç¬¬ä¸€ä¸ªè¿”å›è®°å½•è¡Œçš„åç§»é‡ï¼Œæ³¨æ„ä»0å¼€å§‹ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¿”å›è®°å½•è¡Œçš„æœ€å¤§æ•°ç›®ï¼›</li><li>å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼›</li></ul><p><strong>æ€è€ƒ1ï¼šå¦‚æœåç§»é‡å›ºå®šï¼Œè¿”å›è®°å½•é‡å¯¹æ‰§è¡Œæ—¶é—´æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</strong></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">10000</span>;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šåœ¨æŸ¥è¯¢è®°å½•æ—¶ï¼Œè¿”å›è®°å½•é‡ä½äº100æ¡ï¼ŒæŸ¥è¯¢æ—¶é—´åŸºæœ¬æ²¡æœ‰å˜åŒ–ï¼Œå·®è·ä¸å¤§ã€‚éšç€æŸ¥è¯¢è®°å½•é‡è¶Šå¤§ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚</p><p><strong>æ€è€ƒ2ï¼šå¦‚æœæŸ¥è¯¢åç§»é‡å˜åŒ–ï¼Œè¿”å›è®°å½•æ•°å›ºå®šå¯¹æ‰§è¡Œæ—¶é—´æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</strong></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">1</span>,<span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10</span>,<span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">100</span>,<span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">1000</span>,<span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">limit</span> <span class="number">10000</span>,<span class="number">100</span>;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šåœ¨æŸ¥è¯¢è®°å½•æ—¶ï¼Œå¦‚æœæŸ¥è¯¢è®°å½•é‡ç›¸åŒï¼Œåç§»é‡è¶…è¿‡100åå°±å¼€å§‹éšç€åç§»é‡å¢å¤§ï¼ŒæŸ¥è¯¢æ—¶é—´æ€¥å‰§çš„å¢åŠ ã€‚ï¼ˆè¿™ç§åˆ†é¡µæŸ¥è¯¢æœºåˆ¶ï¼Œæ¯æ¬¡éƒ½ä¼šä»æ•°æ®åº“ç¬¬ä¸€æ¡è®°å½•å¼€å§‹æ‰«æï¼Œè¶Šå¾€åæŸ¥è¯¢è¶Šæ…¢ï¼Œè€Œä¸”æŸ¥è¯¢çš„æ•°æ®è¶Šå¤šï¼Œä¹Ÿä¼šæ‹–æ…¢æ€»æŸ¥è¯¢é€Ÿåº¦ã€‚ï¼‰</p></li><li><p>åˆ†é¡µä¼˜åŒ–æ–¹æ¡ˆ</p><p><strong>ä¼˜åŒ–1: é€šè¿‡ç´¢å¼•è¿›è¡Œåˆ†é¡µ</strong></p><p>ç›´æ¥è¿›è¡Œlimitæ“ä½œ ä¼šäº§ç”Ÿå…¨è¡¨æ‰«æ,é€Ÿåº¦å¾ˆæ…¢. Limité™åˆ¶çš„æ˜¯ä»ç»“æœé›†çš„Mä½ç½®å¤„å–å‡ºNæ¡è¾“å‡º,å…¶ä½™æŠ›å¼ƒ.</p><p>å‡è®¾IDæ˜¯è¿ç»­é€’å¢çš„,æˆ‘ä»¬æ ¹æ®æŸ¥è¯¢çš„é¡µæ•°å’ŒæŸ¥è¯¢çš„è®°å½•æ•°å¯ä»¥ç®—å‡ºæŸ¥è¯¢çš„idçš„èŒƒå›´ï¼Œç„¶åé…åˆ limitä½¿ç”¨</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> id  &gt;= <span class="number">100001</span> <span class="keyword">LIMIT</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–2ï¼šåˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é¦–å…ˆå®šä½åç§»ä½ç½®çš„id</span></span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> user_contacts <span class="keyword">LIMIT</span> <span class="number">100000</span>,<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ ¹æ®è·å–åˆ°çš„idå€¼å‘åæŸ¥è¯¢.</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_contacts <span class="keyword">WHERE</span> id &gt;=</span><br><span class="line">(<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> user_contacts <span class="keyword">LIMIT</span> <span class="number">100000</span>,<span class="number">1</span>) <span class="keyword">LIMIT</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure><p>åŸå› ï¼šä½¿ç”¨äº†idåšä¸»é”®æ¯”è¾ƒ(id&gt;=)ï¼Œå¹¶ä¸”å­æŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•è¿›è¡Œä¼˜åŒ–ã€‚</p></li></ul><h1>21.å¦‚ä½•åšæ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ</h1><p><strong>MySQL æ…¢æŸ¥è¯¢çš„ç›¸å…³å‚æ•°è§£é‡Šï¼š</strong></p><ul><li><strong>slow_query_log</strong>ï¼šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œ<code>ON(1)</code>è¡¨ç¤ºå¼€å¯,<br><code>OFF(0)</code> è¡¨ç¤ºå…³é—­ã€‚</li><li><strong>slow-query-log-file</strong>ï¼šæ–°ç‰ˆï¼ˆ5.6åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰MySQLæ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚</li><li><strong>long_query_time</strong>ï¼š æ…¢æŸ¥è¯¢<strong>é˜ˆå€¼</strong>ï¼Œå½“æŸ¥è¯¢æ—¶é—´å¤šäºè®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œè®°å½•æ—¥å¿—ã€‚</li></ul><p><strong>æ…¢æŸ¥è¯¢é…ç½®æ–¹å¼</strong></p><ol><li><strong>é»˜è®¤æƒ…å†µä¸‹slow_query_logçš„å€¼ä¸ºOFFï¼Œè¡¨ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯ç¦ç”¨çš„</strong></li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%slow_query_log%&#x27;;</span></span><br><span class="line"><span class="section">+---------------------+------------------------------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  | Value Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â |</span></span><br><span class="line"><span class="section">+---------------------+------------------------------+</span></span><br><span class="line">| slow<span class="emphasis">_query_log Â  Â  Â | ON Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |</span></span><br><span class="line"><span class="emphasis">| slow_query_log_</span>file | /var/lib/mysql/test-slow.log |</span><br><span class="line"><span class="code">+---------------------+</span>------------------------------+</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>å¯ä»¥é€šè¿‡è®¾ç½®slow_query_logçš„å€¼æ¥å¼€å¯</strong></li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> global <span class="attribute">slow_query_log</span>=1;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>ä½¿ç”¨</strong> <code>set global slow_query_log=1</code>  å¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åªå¯¹å½“å‰æ•°æ®åº“ç”Ÿæ•ˆï¼ŒMySQLé‡å¯ååˆ™ä¼šå¤±æ•ˆã€‚å¦‚æœè¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œå°±å¿…é¡»ä¿®æ”¹é…ç½®æ–‡ä»¶my.cnfï¼ˆå…¶å®ƒç³»ç»Ÿå˜é‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰</li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-- </span>ç¼–è¾‘é…ç½®</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="bullet">-- </span>æ·»åŠ å¦‚ä¸‹å†…å®¹</span><br><span class="line">slow<span class="emphasis">_query_log =1</span></span><br><span class="line"><span class="emphasis">slow_query_log_</span>file=/var/lib/mysql/ruyuan-slow.log</span><br><span class="line"></span><br><span class="line"><span class="bullet">-- </span>é‡å¯MySQL</span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line"><span class="section">mysql&gt; show variables like &#x27;%slow_query%&#x27;;</span></span><br><span class="line"><span class="section">+---------------------+--------------------------------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  | Value Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â |</span></span><br><span class="line"><span class="section">+---------------------+--------------------------------+</span></span><br><span class="line">| slow<span class="emphasis">_query_log Â  Â  Â | ON Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |</span></span><br><span class="line"><span class="emphasis">| slow_query_log_</span>file | /var/lib/mysql/ruyuan-slow.log |</span><br><span class="line"><span class="code">+---------------------+</span>--------------------------------+</span><br></pre></td></tr></table></figure><ol start="4"><li>é‚£ä¹ˆå¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åï¼Œä»€ä¹ˆæ ·çš„SQLæ‰ä¼šè®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—é‡Œé¢å‘¢ï¼Ÿ è¿™ä¸ªæ˜¯ç”±å‚æ•° <code>long_query_time</code>æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹long_query_timeçš„å€¼ä¸º10ç§’.</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;long_query_time&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name Â  <span class="operator">|</span> <span class="keyword">Value</span> Â  Â  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> long_query_time <span class="operator">|</span> <span class="number">10.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> long_query_time<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> Â <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;long_query_time&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name Â  <span class="operator">|</span> <span class="keyword">Value</span> Â  Â  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> long_query_time <span class="operator">|</span> <span class="number">10.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br></pre></td></tr></table></figure><ol start="5"><li><strong>ä¿®æ”¹äº†å˜é‡long_query_timeï¼Œä½†æ˜¯æŸ¥è¯¢å˜é‡long_query_timeçš„å€¼è¿˜æ˜¯10ï¼Œéš¾é“æ²¡æœ‰ä¿®æ”¹åˆ°å‘¢ï¼Ÿæ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤ set global long_query_time=1 ä¿®æ”¹åï¼Œéœ€è¦é‡æ–°è¿æ¥æˆ–æ–°å¼€ä¸€ä¸ªä¼šè¯æ‰èƒ½çœ‹åˆ°ä¿®æ”¹å€¼ã€‚</strong></li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;long_query_time&#x27;;</span></span><br><span class="line"><span class="section">+-----------------+----------+</span></span><br><span class="line"><span class="section">| Variable_name Â  | Value Â  Â |</span></span><br><span class="line"><span class="section">+-----------------+----------+</span></span><br><span class="line"><span class="section">| long_query_time | 1.000000 |</span></span><br><span class="line"><span class="section">+-----------------+----------+</span></span><br></pre></td></tr></table></figure><ol start="6"><li><code>log_output</code> å‚æ•°æ˜¯æŒ‡å®šæ—¥å¿—çš„å­˜å‚¨æ–¹å¼ã€‚<code>log_output='FILE'</code>  è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯â€™FILEâ€™ã€‚<code>log_output='TABLE'</code> è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ•°æ®åº“ï¼Œè¿™æ ·æ—¥å¿—ä¿¡æ¯å°±ä¼šè¢«å†™å…¥åˆ° mysql.slow_log è¡¨ä¸­ã€‚</li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; SHOW VARIABLES LIKE &#x27;%log_output%&#x27;;</span></span><br><span class="line"><span class="section">+---------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name | Value |</span></span><br><span class="line"><span class="section">+---------------+-------+</span></span><br><span class="line"><span class="section">| log_output Â  Â | FILE Â |</span></span><br><span class="line"><span class="section">+---------------+-------+</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>MySQLæ•°æ®åº“æ”¯æŒåŒæ—¶ä¸¤ç§æ—¥å¿—å­˜å‚¨æ–¹å¼ï¼Œé…ç½®çš„æ—¶å€™ä»¥é€—å·éš”å¼€å³å¯ï¼Œå¦‚ï¼šlog_output=â€˜FILE,TABLEâ€™ã€‚æ—¥å¿—è®°å½•åˆ°ç³»ç»Ÿçš„ä¸“ç”¨æ—¥å¿—è¡¨ä¸­ï¼Œè¦æ¯”è®°å½•åˆ°æ–‡ä»¶è€—è´¹æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å¯¹äºéœ€è¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆéœ€è¦èƒ½å¤Ÿè·å¾—æ›´é«˜çš„ç³»ç»Ÿæ€§èƒ½ï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆè®°å½•åˆ°æ–‡ä»¶.</strong></p></blockquote><ol start="7"><li>ç³»ç»Ÿå˜é‡ <code>log-queries-not-using-indexes</code>ï¼šæœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ä¹Ÿè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚å¦‚æœè°ƒä¼˜çš„è¯ï¼Œå»ºè®®å¼€å¯è¿™ä¸ªé€‰é¡¹ã€‚</li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;log_queries_not_using_indexes&#x27;;</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  | Value |</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br><span class="line"><span class="section">| log_queries_not_using_indexes | OFF Â  |</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; set global log_queries_not_using_indexes=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="section">mysql&gt; show variables like &#x27;log_queries_not_using_indexes&#x27;;</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  | Value |</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br><span class="line"><span class="section">| log_queries_not_using_indexes | ON Â  Â |</span></span><br><span class="line"><span class="section">+-------------------------------+-------+</span></span><br></pre></td></tr></table></figure><p><strong>3) æ…¢æŸ¥è¯¢æµ‹è¯•</strong></p><ol><li><strong>æ‰§è¡Œ test_index.sql è„šæœ¬,ç›‘æ§æ…¢æŸ¥è¯¢æ—¥å¿—å†…å®¹</strong></li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# tail -f <span class="regexp">/var/</span>lib<span class="regexp">/mysql/</span>ruyuan-slow.log </span><br><span class="line"><span class="regexp">/usr/</span>sbin/mysqld, Version: <span class="number">5.7</span>.<span class="number">30</span>-log (MySQL Community Server (GPL)). started with:</span><br><span class="line">Tcp port: <span class="number">0</span>  Unix socket: <span class="regexp">/var/</span>lib<span class="regexp">/mysql/my</span>sql.sock</span><br><span class="line">Time Â  Â  Â  Â  Â  Â  Â  Â  Id Command Â   Argument</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>æ‰§è¡Œä¸‹é¢çš„SQL,æ‰§è¡Œè¶…æ—¶ (è¶…è¿‡1ç§’) æˆ‘ä»¬å»æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—</strong></li></ol><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM test_index WHERE Â </span><br><span class="line">hobby = &#x27;<span class="number">20009951</span>&#x27; OR hobby = &#x27;<span class="number">10009931</span>&#x27; OR hobby = &#x27;<span class="number">30009931</span>&#x27; </span><br><span class="line">OR dname = &#x27;name<span class="number">4000</span>&#x27; OR dname = &#x27;name<span class="number">6600</span>&#x27; ;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>æ—¥å¿—å†…å®¹</strong></li></ol><p><strong>æˆ‘ä»¬å¾—åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—åï¼Œæœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯å»åˆ†æè¿™ä¸ªæ—¥å¿—ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ…¢æ—¥å¿—é‡Œåˆ°åº•è®°å½•äº†å“ªäº›å†…å®¹ã€‚</strong></p><p><strong>å¦‚ä¸‹å›¾æ˜¯æ…¢æ—¥å¿—é‡Œå…¶ä¸­ä¸€æ¡SQLçš„è®°å½•å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ—¶é—´æˆ³ï¼Œç”¨æˆ·ï¼ŒæŸ¥è¯¢æ—¶é•¿åŠå…·ä½“çš„SQLç­‰ä¿¡æ¯.</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Time: 2022-02-23T13:50:45.005959Z</span></span><br><span class="line"><span class="meta"># User@Host: root[root] @ localhost []  Id: Â  Â  3</span></span><br><span class="line"><span class="meta"># Query_time: 3.724273  Lock_time: 0.000371 Rows_sent: 5  Rows_examined: 5000000</span></span><br><span class="line">SET timestamp=<span class="number">1645624245</span>;</span><br><span class="line">select * from test_index where hobby = &#x27;<span class="number">20009951</span>&#x27; or hobby = &#x27;<span class="number">10009931</span>&#x27; or hobby = &#x27;<span class="number">30009931</span>&#x27; or dname = &#x27;name<span class="number">4000</span>&#x27; or dname = &#x27;name<span class="number">6600</span>&#x27;;</span><br></pre></td></tr></table></figure><ul><li><strong>Time: æ‰§è¡Œæ—¶é—´</strong></li><li><strong>User: ç”¨æˆ·ä¿¡æ¯ ,Idä¿¡æ¯</strong></li><li><strong>Query_time: æŸ¥è¯¢æ—¶é•¿</strong></li><li><strong>Lock_time: ç­‰å¾…é”çš„æ—¶é•¿</strong></li><li><strong>Rows_sent:æŸ¥è¯¢ç»“æœçš„è¡Œæ•°</strong></li><li><strong>Rows_examined: æŸ¥è¯¢æ‰«æçš„è¡Œæ•°</strong></li><li><strong>SET timestamp: æ—¶é—´æˆ³</strong></li><li><strong>SQLçš„å…·ä½“ä¿¡æ¯</strong></li></ul><p><strong>æ…¢æŸ¥è¯¢SQLä¼˜åŒ–æ€è·¯</strong></p><p><strong>1) SQLæ€§èƒ½ä¸‹é™çš„åŸå› </strong></p><p>åœ¨æ—¥å¸¸çš„è¿ç»´è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°DBAå°†ä¸€äº›æ‰§è¡Œæ•ˆç‡è¾ƒä½çš„SQLå‘è¿‡æ¥æ‰¾å¼€å‘äººå‘˜åˆ†æï¼Œå½“æˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ªSQLè¯­å¥ä¹‹åï¼Œåœ¨å¯¹è¿™äº›SQLè¿›è¡Œåˆ†æä¹‹å‰ï¼Œéœ€è¦æ˜ç¡®å¯èƒ½å¯¼è‡´SQLæ‰§è¡Œæ€§èƒ½ä¸‹é™çš„åŸå› è¿›è¡Œåˆ†æï¼Œæ‰§è¡Œæ€§èƒ½ä¸‹é™å¯ä»¥ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li><p><strong>ç­‰å¾…æ—¶é—´é•¿</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é”è¡¨å¯¼è‡´æŸ¥è¯¢ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œåç»­æˆ‘ä»¬ä»MySQLé”çš„æœºåˆ¶å»åˆ†æ<span class="keyword">SQL</span>æ‰§è¡Œçš„åŸç†</span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œæ—¶é—´é•¿</strong></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>æŸ¥è¯¢è¯­å¥å†™çš„çƒ‚</span><br><span class="line"><span class="number">2.</span>ç´¢å¼•å¤±æ•ˆ </span><br><span class="line"><span class="number">3.</span>å…³è”æŸ¥è¯¢å¤ªå¤š<span class="keyword">join</span> </span><br><span class="line"><span class="number">4.</span>æœåŠ¡å™¨è°ƒä¼˜åŠå„ä¸ªå‚æ•°çš„è®¾ç½®</span><br></pre></td></tr></table></figure></li></ul><p><strong>2) æ…¢æŸ¥è¯¢ä¼˜åŒ–æ€è·¯</strong></p><ol><li><p>ä¼˜å…ˆé€‰æ‹©ä¼˜åŒ–é«˜å¹¶å‘æ‰§è¡Œçš„SQL,å› ä¸ºé«˜å¹¶å‘çš„SQLå‘ç”Ÿé—®é¢˜å¸¦æ¥åæœæ›´ä¸¥é‡.</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">æ¯”å¦‚ä¸‹é¢ä¸¤ç§æƒ…å†µ</span><span class="punctuation">:</span></span><br><span class="line">   <span class="attribute">SQL1</span><span class="punctuation">:</span> <span class="string">æ¯å°æ—¶æ‰§è¡Œ10000æ¬¡, æ¯æ¬¡20ä¸ªIO ä¼˜åŒ–åæ¯æ¬¡18ä¸ªIO,æ¯å°æ—¶èŠ‚çœ2ä¸‡æ¬¡IO</span></span><br><span class="line">   <span class="attribute">SQL2</span><span class="punctuation">:</span> <span class="string">æ¯å°æ—¶10æ¬¡,æ¯æ¬¡20000ä¸ªIO,æ¯æ¬¡ä¼˜åŒ–å‡å°‘2000ä¸ªIO,æ¯å°æ—¶èŠ‚çœ2ä¸‡æ¬¡IO</span></span><br><span class="line">   SQL2æ›´éš¾ä¼˜åŒ–,SQL1æ›´å¥½ä¼˜åŒ–.ä½†æ˜¯ç¬¬ä¸€ç§å±äºé«˜å¹¶å‘SQL,æ›´æ€¥éœ€ä¼˜åŒ– æˆæœ¬æ›´ä½</span><br></pre></td></tr></table></figure></li><li><p>å®šä½ä¼˜åŒ–å¯¹è±¡çš„æ€§èƒ½ç“¶é¢ˆ(åœ¨ä¼˜åŒ–ä¹‹å‰äº†è§£æ€§èƒ½ç“¶é¢ˆåœ¨å“ª)</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å»ä¼˜åŒ–SQLæ—¶,é€‰æ‹©ä¼˜åŒ–åˆ†æ–¹å‘æœ‰ä¸‰ä¸ª: </span><br><span class="line">  <span class="number">1.</span>IO<span class="comment">(æ•°æ®è®¿é—®æ¶ˆè€—çš„äº†å¤ªå¤šçš„æ—¶é—´,æŸ¥çœ‹æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†ç´¢å¼•)</span> , </span><br><span class="line">  <span class="number">2.</span>CPU<span class="comment">(æ•°æ®è¿ç®—èŠ±è´¹äº†å¤ªå¤šæ—¶é—´, æ•°æ®çš„è¿ç®—åˆ†ç»„ æ’åºæ˜¯ä¸æ˜¯æœ‰é—®é¢˜)</span> </span><br><span class="line">  <span class="number">3.</span>ç½‘ç»œå¸¦å®½<span class="comment">(åŠ å¤§ç½‘ç»œå¸¦å®½)</span></span><br></pre></td></tr></table></figure></li><li><p>æ˜ç¡®ä¼˜åŒ–ç›®æ ‡</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦æ ¹æ®æ•°æ®åº“å½“å‰çš„çŠ¶æ€</span><br><span class="line">æ•°æ®åº“ä¸­ä¸è¯¥æ¡<span class="keyword">SQL</span>çš„å…³ç³»</span><br><span class="line">å½“å‰<span class="keyword">SQL</span>çš„å…·ä½“åŠŸèƒ½</span><br><span class="line">æœ€å¥½çš„æƒ…å†µæ¶ˆè€—çš„èµ„æº,æœ€å·®æƒ…å†µä¸‹æ¶ˆè€—çš„èµ„æº,ä¼˜åŒ–çš„ç»“æœåªæœ‰ä¸€ä¸ªç»™ç”¨æˆ·ä¸€ä¸ªå¥½çš„ä½“éªŒ</span><br></pre></td></tr></table></figure></li><li><p>ä»explainæ‰§è¡Œè®¡åˆ’å…¥æ‰‹</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªæœ‰<span class="keyword">explain</span>èƒ½å‘Šè¯‰ä½ å½“å‰<span class="keyword">SQL</span>çš„æ‰§è¡ŒçŠ¶æ€</span><br></pre></td></tr></table></figure></li><li><p>æ°¸è¿œç”¨å°çš„ç»“æœé›†é©±åŠ¨å¤§çš„ç»“æœé›†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å°çš„æ•°æ®é›†é©±åŠ¨å¤§çš„æ•°æ®é›†,å‡å°‘å†…å±‚è¡¨è¯»å–çš„æ¬¡æ•°</span><br><span class="line"></span><br><span class="line">ç±»ä¼¼äºåµŒå¥—å¾ªç¯</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">å¦‚æœå°çš„å¾ªç¯åœ¨å¤–å±‚,å¯¹äºæ•°æ®åº“è¿æ¥æ¥è¯´å°±åªè¿æ¥<span class="number">5</span>æ¬¡,è¿›è¡Œ<span class="number">5000</span>æ¬¡æ“ä½œ,å¦‚æœ<span class="number">1000</span>åœ¨å¤–,åˆ™éœ€è¦è¿›è¡Œ<span class="number">1000</span>æ¬¡æ•°æ®åº“è¿æ¥,ä»è€Œæµªè´¹èµ„æºï¼Œå¢åŠ æ¶ˆè€—.è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å°è¡¨é©±åŠ¨å¤§è¡¨ã€‚</span><br></pre></td></tr></table></figure></li><li><p>å°½å¯èƒ½åœ¨ç´¢å¼•ä¸­å®Œæˆæ’åº</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ’åºæ“ä½œç”¨çš„æ¯”è¾ƒå¤š,<span class="keyword">order</span> <span class="title">by</span> åé¢çš„å­—æ®µå¦‚æœåœ¨ç´¢å¼•ä¸­,ç´¢å¼•æœ¬æ¥å°±æ˜¯æ’å¥½åºçš„,æ‰€ä»¥é€Ÿåº¦å¾ˆå¿«,æ²¡æœ‰ç´¢å¼•çš„è¯,å°±éœ€è¦ä»è¡¨ä¸­æ‹¿æ•°æ®,åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åº,å¦‚æœå†…å­˜ç©ºé—´ä¸å¤Ÿè¿˜ä¼šå‘ç”Ÿè½ç›˜æ“ä½œ</span><br></pre></td></tr></table></figure></li><li><p>åªè·å–è‡ªå·±éœ€è¦çš„åˆ—</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸è¦ä½¿ç”¨<span class="keyword">select</span>  * ,<span class="keyword">select</span> * å¾ˆå¯èƒ½ä¸èµ°ç´¢å¼•,è€Œä¸”æ•°æ®é‡è¿‡å¤§</span><br></pre></td></tr></table></figure></li><li><p>åªä½¿ç”¨æœ€æœ‰æ•ˆçš„è¿‡æ»¤æ¡ä»¶</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯¯åŒº <span class="keyword">where</span>åé¢çš„æ¡ä»¶è¶Šå¤šè¶Šå¥½,ä½†å®é™…ä¸Šæ˜¯åº”è¯¥ç”¨æœ€çŸ­çš„è·¯å¾„è®¿é—®åˆ°æ•°æ®</span><br></pre></td></tr></table></figure></li><li><p>å°½å¯èƒ½é¿å…å¤æ‚çš„joinå’Œå­æŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ¯æ¡<span class="keyword">SQL</span>çš„<span class="keyword">JOIN</span>æ“ä½œ å»ºè®®ä¸è¦è¶…è¿‡ä¸‰å¼ è¡¨</span><br><span class="line">å°†å¤æ‚çš„<span class="keyword">SQL</span>, æ‹†åˆ†æˆå¤šä¸ªå°çš„<span class="keyword">SQL</span> å•ä¸ªè¡¨æ‰§è¡Œ,è·å–çš„ç»“æœ åœ¨ç¨‹åºä¸­è¿›è¡Œå°è£…</span><br><span class="line">å¦‚æœ<span class="keyword">join</span>å ç”¨çš„èµ„æºæ¯”è¾ƒå¤š,ä¼šå¯¼è‡´å…¶ä»–è¿›ç¨‹ç­‰å¾…æ—¶é—´å˜é•¿</span><br></pre></td></tr></table></figure></li><li><p>åˆç†è®¾è®¡å¹¶åˆ©ç”¨ç´¢å¼•</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å¦‚ä½•åˆ¤å®šæ˜¯å¦éœ€è¦åˆ›å»ºç´¢å¼•?</span><br><span class="line"> <span class="number">1</span>.è¾ƒä¸ºé¢‘ç¹çš„ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•.</span><br><span class="line"> <span class="number">2</span>.å”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸é€‚åˆå•ç‹¬åˆ›å»ºç´¢å¼•ï¼Œå³ä½¿é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶.ï¼ˆå”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸»è¦æ˜¯æŒ‡å“ªäº›å‘¢ï¼Ÿå¦‚çŠ¶æ€å­—æ®µï¼Œç±»å‹å­—æ®µç­‰ç­‰è¿™äº›å­—æ®µä¸­çš„æ•°æ®å¯èƒ½æ€»å…±å°±æ˜¯é‚£ä¹ˆå‡ ä¸ªå‡ åä¸ªæ•°å€¼é‡å¤ä½¿ç”¨ï¼‰ï¼ˆå½“ä¸€æ¡Queryæ‰€è¿”å›çš„æ•°æ®è¶…è¿‡äº†å…¨è¡¨çš„<span class="number">15</span><span class="comment">%çš„æ—¶å€™ï¼Œå°±ä¸åº”è¯¥å†ä½¿ç”¨ç´¢å¼•æ‰«ææ¥å®Œæˆè¿™ä¸ªQueryäº†ï¼‰.</span></span><br><span class="line"> <span class="number">3</span>.æ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼•.ï¼ˆå› ä¸ºç´¢å¼•ä¸­çš„å­—æ®µè¢«æ›´æ–°çš„æ—¶å€™ï¼Œä¸ä»…ä»…éœ€è¦æ›´æ–°è¡¨ä¸­çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜è¦æ›´æ–°ç´¢å¼•æ•°æ®ï¼Œä»¥ç¡®ä¿ç´¢å¼•ä¿¡æ¯æ˜¯å‡†ç¡®çš„ï¼‰.</span><br><span class="line"> <span class="number">4</span>.ä¸ä¼šå‡ºç°åœ¨WHEREå­å¥ä¸­çš„å­—æ®µä¸è¯¥åˆ›å»ºç´¢å¼•.</span><br><span class="line"></span><br><span class="line">å¦‚ä½•é€‰æ‹©åˆé€‚ç´¢å¼•?</span><br><span class="line"> <span class="number">1</span>.å¯¹äºå•é”®ç´¢å¼•ï¼Œå°½é‡é€‰æ‹©é’ˆå¯¹å½“å‰Queryè¿‡æ»¤æ€§æ›´å¥½çš„ç´¢å¼•.</span><br><span class="line"> <span class="number">2</span>.é€‰æ‹©è”åˆç´¢å¼•æ—¶,å½“å‰Queryä¸­è¿‡æ»¤æ€§æœ€å¥½çš„å­—æ®µåœ¨ç´¢å¼•å­—æ®µé¡ºåºä¸­æ’åˆ—è¦é å‰.</span><br><span class="line"> <span class="number">3</span>.é€‰æ‹©è”åˆç´¢å¼•æ—¶,å°½é‡ç´¢å¼•å­—æ®µå‡ºç°åœ¨wä¸­æ¯”è¾ƒå¤šçš„ç´¢å¼•.</span><br></pre></td></tr></table></figure></li></ol><h1>22.Hashç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h1><p>MySQLä¸­ç´¢å¼•çš„å¸¸ç”¨æ•°æ®ç»“æ„æœ‰ä¸¤ç§: ä¸€ç§æ˜¯B+Tree,å¦ä¸€ç§åˆ™æ˜¯Hash.</p><p>Hashåº•å±‚å®ç°æ˜¯ç”±Hashè¡¨æ¥å®ç°çš„ï¼Œæ˜¯æ ¹æ®é”®å€¼ &lt;key,value&gt; å­˜å‚¨æ•°æ®çš„ç»“æ„ã€‚éå¸¸é€‚åˆæ ¹æ®keyæŸ¥æ‰¾valueå€¼ï¼Œä¹Ÿå°±æ˜¯å•ä¸ªkeyæŸ¥è¯¢ï¼Œæˆ–è€…è¯´ç­‰å€¼æŸ¥è¯¢ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/07494f5bfaff4208a65c0d7426708b47.png" alt="image.png"></p><p>å¯¹äºæ¯ä¸€è¡Œæ•°æ®ï¼Œå­˜å‚¨å¼•æ“éƒ½ä¼šå¯¹æ‰€æœ‰çš„ç´¢å¼•åˆ—è®¡ç®—ä¸€ä¸ªå“ˆå¸Œç ï¼Œå“ˆå¸Œç æ˜¯ä¸€ä¸ªè¾ƒå°çš„å€¼,å¦‚æœå‡ºç°å“ˆå¸Œç å€¼ç›¸åŒçš„æƒ…å†µä¼šæ‹‰å‡ºä¸€æ¡é“¾è¡¨.</p><p>Hsahç´¢å¼•çš„ä¼˜ç‚¹</p><ul><li>å› ä¸ºç´¢å¼•è‡ªèº«åªéœ€è¦å­˜å‚¨å¯¹åº”çš„Hashå€¼,æ‰€ä»¥ç´¢å¼•ç»“æ„éå¸¸ç´§å‡‘, åªéœ€è¦åšç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢ï¼Œè€Œä¸åŒ…å«æ’åºæˆ–èŒƒå›´æŸ¥è¯¢çš„éœ€æ±‚ï¼Œéƒ½é€‚åˆä½¿ç”¨å“ˆå¸Œç´¢å¼• .</li><li>æ²¡æœ‰å“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹,ç­‰å€¼æŸ¥è¯¢è®¿é—®å“ˆå¸Œç´¢å¼•çš„æ•°æ®éå¸¸å¿«.(å¦‚æœå‘ç”ŸHashå†²çª,å­˜å‚¨å¼•æ“å¿…é¡»éå†é“¾è¡¨ä¸­çš„æ‰€æœ‰è¡ŒæŒ‡é’ˆ,é€è¡Œè¿›è¡Œæ¯”è¾ƒ,ç›´åˆ°æ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œ).</li></ul><p>Hashç´¢å¼•çš„ç¼ºç‚¹</p><ul><li>å“ˆå¸Œç´¢å¼•åªåŒ…å«å“ˆå¸Œå€¼å’Œè¡ŒæŒ‡é’ˆï¼Œè€Œä¸å­˜å‚¨å­—æ®µå€¼ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç´¢å¼•ä¸­çš„å€¼æ¥é¿å…è¯»å–è¡Œã€‚</li><li>å“ˆå¸Œç´¢å¼•åªæ”¯æŒç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢ã€‚ä¸æ”¯æŒä»»ä½•èŒƒå›´æŸ¥è¯¢å’Œéƒ¨åˆ†ç´¢å¼•åˆ—åŒ¹é…æŸ¥æ‰¾ã€‚</li><li>å“ˆå¸Œç´¢å¼•æ•°æ®å¹¶ä¸æ˜¯æŒ‰ç…§ç´¢å¼•å€¼é¡ºåºå­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— æ³•ç”¨äºæ’åºã€‚</li></ul><h1>23.è¯´ä¸€ä¸‹InnoDBå†…å­˜ç›¸å…³çš„å‚æ•°ä¼˜åŒ–ï¼Ÿ</h1><p>Buffer Poolå‚æ•°ä¼˜åŒ–</p><p>1.1 ç¼“å†²æ± å†…å­˜å¤§å°é…ç½®</p><p>ä¸€ä¸ªå¤§çš„æ—¥å¿—ç¼“å†²åŒºå…è®¸å¤§é‡çš„äº‹åŠ¡åœ¨æäº¤ä¹‹å‰ä¸å†™æ—¥å¿—åˆ°ç£ç›˜ã€‚å› æ­¤ï¼Œå¦‚æœä½ æœ‰å¾ˆå¤šäº‹åŠ¡çš„æ›´æ–°ï¼Œæ’å…¥æˆ–åˆ é™¤æ“ä½œï¼Œé€šè¿‡è®¾ç½®è¿™ä¸ªå‚æ•°ä¼šå¤§é‡çš„å‡å°‘ç£ç›˜I/Oçš„æ¬¡æ•°æ•°ã€‚<br>å»ºè®®: åœ¨ä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å°†ç¼“å†²æ± å¤§å°è®¾ç½®ä¸ºæœåŠ¡å™¨ç‰©ç†å†…å­˜çš„60% - 80%.</p><ul><li><p><strong>æŸ¥çœ‹ç¼“å†²æ± å¤§å°</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%innodb_buffer_pool_size%&#x27;;</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  | Value Â  Â  |</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br><span class="line"><span class="section">| innodb_buffer_pool_size | 134217728 |</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br><span class="line"></span><br><span class="line"><span class="section">mysql&gt; select 134217728 / 1024 / 1024;</span></span><br><span class="line"><span class="section">+-------------------------+</span></span><br><span class="line"><span class="section">| 134217728 / 1024 / 1024 |</span></span><br><span class="line"><span class="section">+-------------------------+</span></span><br><span class="line"><span class="section">| Â  Â  Â  Â  Â  Â 128.00000000 |</span></span><br><span class="line"><span class="section">+-------------------------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨çº¿è°ƒæ•´InnoDBç¼“å†²æ± å¤§å°</strong><br><strong>innodb_buffer_pool_sizeå¯ä»¥åŠ¨æ€è®¾ç½®ï¼Œå…è®¸åœ¨ä¸é‡æ–°å¯åŠ¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹è°ƒæ•´ç¼“å†²æ± çš„å¤§å°.</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET GLOBAL innodb_buffer_pool_size = 268435456; -- 512</span><br><span class="line">Query OK, 0 rows affected (0.10 sec)</span><br><span class="line"></span><br><span class="line"><span class="section">mysql&gt; show variables like &#x27;%innodb_buffer_pool_size%&#x27;;</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  | Value Â  Â  |</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br><span class="line"><span class="section">| innodb_buffer_pool_size | 268435456 |</span></span><br><span class="line"><span class="section">+-------------------------+-----------+</span></span><br></pre></td></tr></table></figure><p><strong>ç›‘æ§åœ¨çº¿è°ƒæ•´ç¼“å†²æ± çš„è¿›åº¦</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; SHOW STATUS WHERE Variable_name=&#x27;InnoDB_buffer_pool_resize_status&#x27;;</span></span><br><span class="line"><span class="section">+----------------------------------+----------------------------------------------------------------------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | Value Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â |</span></span><br><span class="line"><span class="section">+----------------------------------+----------------------------------------------------------------------+</span></span><br><span class="line"><span class="section">| Innodb_buffer_pool_resize_status | Size did not change (old size = new size = 268435456. Nothing to do. |</span></span><br><span class="line"><span class="section">+----------------------------------+----------------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>1.3 InnoDB ç¼“å­˜æ€§èƒ½è¯„ä¼°</strong></p><p>å½“å‰é…ç½®çš„innodb_buffer_pool_sizeæ˜¯å¦åˆé€‚ï¼Œå¯ä»¥é€šè¿‡åˆ†æInnoDBç¼“å†²æ± çš„ç¼“å­˜å‘½ä¸­ç‡æ¥éªŒè¯ã€‚</p><ul><li><p>ä»¥ä¸‹å…¬å¼è®¡ç®—InnoDB buffer pool å‘½ä¸­ç‡:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä¸­ç‡ = innodb_buffer_pool_read_requests / (innodb_buffer_pool_read_requests+innodb_buffer_pool_reads)* 100</span><br><span class="line"></span><br><span class="line"><span class="section">å‚æ•°1: innodb_buffer_pool_readsï¼šè¡¨ç¤ºInnoDBç¼“å†²æ± æ— æ³•æ»¡è¶³çš„è¯·æ±‚æ•°ã€‚éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ã€‚</span></span><br><span class="line"><span class="section">å‚æ•°2: innodb_buffer_pool_read_requestsï¼šè¡¨ç¤ºä»å†…å­˜ä¸­è¯»å–é¡µçš„è¯·æ±‚æ•°ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show status like &#x27;innodb_buffer_pool_read%&#x27;;</span></span><br><span class="line"><span class="section">+---------------------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  | Value |</span></span><br><span class="line"><span class="section">+---------------------------------------+-------+</span></span><br><span class="line">| Innodb<span class="emphasis">_buffer_pool_read_ahead_rnd Â  Â  | 0 Â  Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_read_ahead Â  Â  Â  Â  | 0 Â  Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_read_ahead_evicted | 0 Â  Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_read_requests Â  Â  Â | 12701 |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_</span>reads Â  Â  Â  Â  Â  Â  Â | 455 Â  |</span><br><span class="line"><span class="code">+---------------------------------------+</span>-------+</span><br><span class="line"></span><br><span class="line"><span class="bullet">-- </span>æ­¤å€¼ä½äº90%ï¼Œåˆ™å¯ä»¥è€ƒè™‘å¢åŠ innodb_buffer_pool_sizeã€‚</span><br><span class="line"><span class="section">mysql&gt; select 12701 / (455 + 12701) * 100 ;</span></span><br><span class="line"><span class="section">+-----------------------------+</span></span><br><span class="line"><span class="section">| 12701 / (455 + 12701) * 100 |</span></span><br><span class="line"><span class="section">+-----------------------------+</span></span><br><span class="line"><span class="section">| Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  96.5415 |</span></span><br><span class="line"><span class="section">+-----------------------------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>1.4 Pageç®¡ç†ç›¸å…³å‚æ•°</strong></p><p><strong>æŸ¥çœ‹Pageé¡µçš„å¤§å°(é»˜è®¤16KB),</strong><code>innodb_page_size</code>åªèƒ½åœ¨åˆå§‹åŒ–MySQLå®ä¾‹ä¹‹å‰é…ç½®ï¼Œä¸èƒ½åœ¨ä¹‹åä¿®æ”¹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤é¡µé¢å¤§å°åˆå§‹åŒ–å®ä¾‹ã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%innodb_page_size%&#x27;; </span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â | Value |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_page_size | 16384 |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br></pre></td></tr></table></figure><p><strong>Pageé¡µç®¡ç†çŠ¶æ€ç›¸å…³å‚æ•°</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show global status like &#x27;%innodb_buffer_pool_pages%&#x27;;</span></span><br><span class="line"><span class="section">+----------------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  Â  Â  Â  Â | Value |</span></span><br><span class="line"><span class="section">+----------------------------------+-------+</span></span><br><span class="line">| Innodb<span class="emphasis">_buffer_pool_pages_data Â  Â | 515 Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_pages_dirty Â  | 0 Â  Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_pages_flushed | 334 Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_pages_free Â  Â | 15868 |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_pages_misc Â  Â | 0 Â  Â  |</span></span><br><span class="line"><span class="emphasis">| Innodb_buffer_pool_pages_</span>total Â  | 16383 |</span><br><span class="line"><span class="code">+----------------------------------+</span>-------+</span><br></pre></td></tr></table></figure><p><strong>pages_data</strong>: InnoDBç¼“å†²æ± ä¸­åŒ…å«æ•°æ®çš„é¡µæ•°ã€‚ è¯¥æ•°å­—åŒ…æ‹¬è„é¡µé¢å’Œå¹²å‡€é¡µé¢ã€‚</p><p><strong>pages_dirty</strong>: æ˜¾ç¤ºåœ¨å†…å­˜ä¸­ä¿®æ”¹ä½†å°šæœªå†™å…¥æ•°æ®æ–‡ä»¶çš„InnoDBç¼“å†²æ± æ•°æ®é¡µçš„æ•°é‡ï¼ˆè„é¡µåˆ·æ–°ï¼‰ã€‚</p><p><strong>pages_flushed</strong>: è¡¨ç¤ºä»InnoDBç¼“å†²æ± ä¸­åˆ·æ–°è„é¡µçš„è¯·æ±‚æ•°ã€‚</p><p><strong>pages_free</strong>: æ˜¾ç¤ºInnoDBç¼“å†²æ± ä¸­çš„ç©ºé—²é¡µé¢</p><p><strong>pages_misc</strong>: ç¼“å­˜æ± ä¸­å½“å‰å·²ç»è¢«ç”¨ä½œç®¡ç†ç”¨é€”æˆ–hash indexè€Œä¸èƒ½ç”¨ä½œä¸ºæ™®é€šæ•°æ®é¡µçš„æ•°ç›®</p><p><strong>pages_total</strong>: ç¼“å­˜æ± çš„é¡µæ€»æ•°ç›®ã€‚å•ä½æ˜¯pageã€‚</p><h1>24.InnoDBæ—¥å¿—ç›¸å…³çš„å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ</h1><p><strong>1.æ—¥å¿—ç¼“å†²åŒºç›¸å…³å‚æ•°é…ç½®</strong></p><p><strong>æ—¥å¿—ç¼“å†²åŒºçš„å¤§å°ã€‚ä¸€èˆ¬é»˜è®¤å€¼16MBæ˜¯å¤Ÿç”¨çš„ï¼Œä½†å¦‚æœäº‹åŠ¡ä¹‹ä¸­å«æœ‰blog/textç­‰å¤§å­—æ®µï¼Œè¿™ä¸ªç¼“å†²åŒºä¼šè¢«å¾ˆå¿«å¡«æ»¡ä¼šå¼•èµ·é¢å¤–çš„IOè´Ÿè½½ã€‚é…ç½®æ›´å¤§çš„æ—¥å¿—ç¼“å†²åŒº,å¯ä»¥æœ‰æ•ˆçš„æé«˜MySQLçš„æ•ˆç‡.</strong></p><ul><li><p><strong>innodb_log_buffer_size ç¼“å†²åŒºå¤§å°</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;innodb_log_buffer_size&#x27;;</span></span><br><span class="line"><span class="section">+------------------------+----------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â | Value Â  Â |</span></span><br><span class="line"><span class="section">+------------------------+----------+</span></span><br><span class="line"><span class="section">| innodb_log_buffer_size | 16777216 |</span></span><br><span class="line"><span class="section">+------------------------+----------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>innodb_log_files_in_group æ—¥å¿—ç»„æ–‡ä»¶ä¸ªæ•°</strong><br><strong>æ—¥å¿—ç»„æ ¹æ®éœ€è¦æ¥åˆ›å»ºã€‚è€Œæ—¥å¿—ç»„çš„æˆå‘˜åˆ™éœ€è¦è‡³å°‘2ä¸ªï¼Œå®ç°å¾ªç¯å†™å…¥å¹¶ä½œä¸ºå†—ä½™ç­–ç•¥ã€‚</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;innodb_log_files_in_group&#x27;;</span></span><br><span class="line"><span class="section">+---------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â  Â  | Value |</span></span><br><span class="line"><span class="section">+---------------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_log_files_in_group | 2 Â  Â  |</span></span><br><span class="line"><span class="section">+---------------------------+-------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>innodb_log_file_size æ—¥å¿—æ–‡ä»¶å¤§å°</strong><br><strong>å‚æ•°innodb_log_file_sizeç”¨äºè®¾å®šMySQLæ—¥å¿—ç»„ä¸­æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°(é»˜è®¤48M)ã€‚æ­¤å‚æ•°æ˜¯ä¸€ä¸ªå…¨å±€çš„é™æ€å‚æ•°ï¼Œä¸èƒ½åŠ¨æ€ä¿®æ”¹ã€‚</strong><br><strong>å‚æ•°innodb_log_file_sizeçš„æœ€å¤§å€¼ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆinnodb_log_file_size * innodb_log_files_in_groupï¼‰ä¸èƒ½è¶…è¿‡512GB.æ‰€ä»¥å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ä¸èƒ½è¶…è¿‡256G.</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;innodb_log_file_size&#x27;;</span></span><br><span class="line"><span class="section">+----------------------+----------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â | Value Â  Â |</span></span><br><span class="line"><span class="section">+----------------------+----------+</span></span><br><span class="line"><span class="section">| innodb_log_file_size | 50331648 |</span></span><br><span class="line"><span class="section">+----------------------+----------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>2.æ—¥å¿—æ–‡ä»¶å‚æ•°ä¼˜åŒ–</strong></p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ—¥å¿—æ–‡ä»¶å¤§å°è®¾ç½®å¯¹æ€§èƒ½çš„å½±å“</p><ul><li>è®¾ç½®è¿‡å°<ol><li>å‚æ•° <code>innodb_log_file_size</code>è®¾ç½®å¤ªå°ï¼Œå°±ä¼šå¯¼è‡´MySQLçš„æ—¥å¿—æ–‡ä»¶( redo logï¼‰é¢‘ç¹åˆ‡æ¢ï¼Œé¢‘ç¹çš„è§¦å‘æ•°æ®åº“çš„æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰ï¼Œå¯¼è‡´åˆ·æ–°è„é¡µåˆ°ç£ç›˜çš„æ¬¡æ•°å¢åŠ ã€‚ä»è€Œå½±å“IOæ€§èƒ½ã€‚</li><li>å¤„ç†å¤§äº‹åŠ¡æ—¶ï¼Œå°†æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶å†™æ»¡äº†ï¼Œäº‹åŠ¡å†…å®¹è¿˜æ²¡æœ‰å†™å®Œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ—¥å¿—ä¸èƒ½åˆ‡æ¢.</li></ol></li><li>è®¾ç½®è¿‡å¤§<br>å‚æ•° <code>innodb_log_file_size</code>å¦‚æœè®¾ç½®å¤ªå¤§ï¼Œè™½ç„¶å¯ä»¥æå‡IOæ€§èƒ½ï¼Œä½†æ˜¯å½“MySQLç”±äºæ„å¤–å®•æœºæ—¶ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—å¾ˆå¤§ï¼Œé‚£ä¹ˆæ¢å¤çš„æ—¶é—´å¿…ç„¶å¾ˆé•¿ã€‚è€Œä¸”è¿™ä¸ªæ¢å¤æ—¶é—´å¾€å¾€ä¸å¯æ§ï¼Œå—å¤šæ–¹é¢å› ç´ å½±å“ã€‚</li></ul><p><strong>ä¼˜åŒ–å»ºè®®:</strong></p><p>å¦‚ä½•è®¾ç½®åˆé€‚çš„æ—¥å¿—æ–‡ä»¶å¤§å° ?</p><ul><li>æ ¹æ®å®é™…ç”Ÿäº§åœºæ™¯çš„ä¼˜åŒ–ç»éªŒ,ä¸€èˆ¬æ˜¯è®¡ç®—ä¸€æ®µæ—¶é—´å†…ç”Ÿæˆçš„äº‹åŠ¡æ—¥å¿—ï¼ˆredo logï¼‰çš„å¤§å°ï¼Œ è€ŒMySQLçš„æ—¥å¿—æ–‡ä»¶çš„å¤§å°æœ€å°‘åº”è¯¥æ‰¿è½½ä¸€ä¸ªå°æ—¶çš„ä¸šåŠ¡æ—¥å¿—é‡(å®˜ç½‘æ–‡æ¡£ä¸­æœ‰è¯´æ˜)ã€‚</li></ul><p>æƒ³è¦ä¼°è®¡ä¸€ä¸‹InnoDB redo logçš„å¤§å°ï¼Œéœ€è¦æŠ“å–ä¸€æ®µæ—¶é—´å†…Log SequenceNumberï¼ˆæ—¥å¿—é¡ºåºå·ï¼‰çš„æ•°æ®,æ¥è®¡ç®—ä¸€å°æ—¶å†…äº§ç”Ÿçš„æ—¥å¿—å¤§å°.</p><blockquote><p><strong>Log sequence number</strong></p><p><strong>è‡ªç³»ç»Ÿä¿®æ”¹å¼€å§‹ï¼Œå°±ä¸æ–­çš„ç”Ÿæˆredoæ—¥å¿—ã€‚ä¸ºäº†è®°å½•ä¸€å…±ç”Ÿæˆäº†å¤šå°‘æ—¥å¿—ï¼Œäºæ˜¯mysqlè®¾è®¡äº†å…¨å±€å˜é‡log sequence numberï¼Œç®€ç§°lsnï¼Œä½†ä¸æ˜¯ä»0å¼€å§‹ï¼Œæ˜¯ä»8704å­—èŠ‚å¼€å§‹ã€‚</strong></p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- pageråˆ†é¡µå·¥å…·, åªè·å– sequenceçš„ä¿¡æ¯</span></span><br><span class="line">mysql&gt; pager grep <span class="keyword">sequence</span>;</span><br><span class="line">PAGER <span class="keyword">set</span> <span class="keyword">to</span> <span class="string">&#x27;grep sequence&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢çŠ¶æ€,å¹¶å€’è®¡æ—¶ä¸€åˆ†é’Ÿ</span></span><br><span class="line">mysql&gt; <span class="keyword">show</span> engine innodb status\G <span class="keyword">select</span> sleep(<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Log</span> <span class="keyword">sequence</span> number <span class="number">5399154</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">1</span> min <span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸€åˆ†æ—¶é—´å†…æ‰€ç”Ÿæˆçš„æ•°æ®é‡ 5406150</span></span><br><span class="line">mysql&gt; <span class="keyword">show</span> engine innodb status\G;</span><br><span class="line"><span class="keyword">Log</span> <span class="keyword">sequence</span> number <span class="number">5406150</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­pager</span></span><br><span class="line">mysql&gt; nopager;</span><br><span class="line">PAGER <span class="keyword">set</span> <span class="keyword">to stdout</span></span><br></pre></td></tr></table></figure><p>æœ‰äº†ä¸€åˆ†é’Ÿçš„æ—¥å¿—é‡,æ®æ­¤æ¨ç®—ä¸€å°æ—¶å†…çš„æ—¥å¿—é‡</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; select (5406150 - 5399154) / 1024 as kb_per_min;</span></span><br><span class="line"><span class="section">+------------+</span></span><br><span class="line"><span class="section">| kb_per_min |</span></span><br><span class="line"><span class="section">+------------+</span></span><br><span class="line"><span class="section">| Â  Â  6.8320 |</span></span><br><span class="line"><span class="section">+------------+</span></span><br><span class="line"></span><br><span class="line"><span class="section">mysql&gt; select (5406150 - 5399154) / 1024 * 60 as kb_per_min;</span></span><br><span class="line"><span class="section">+------------+</span></span><br><span class="line"><span class="section">| kb_per_min |</span></span><br><span class="line"><span class="section">+------------+</span></span><br><span class="line"><span class="section">| Â  409.9219 |</span></span><br><span class="line"><span class="section">+------------+</span></span><br></pre></td></tr></table></figure><p>å¤ªå¤§çš„ç¼“å†²æ± æˆ–éå¸¸ä¸æ­£å¸¸çš„ä¸šåŠ¡è´Ÿè½½å¯èƒ½ä¼šè®¡ç®—å‡ºéå¸¸å¤§(æˆ–éå¸¸å°)çš„æ—¥å¿—å¤§å°ã€‚è¿™ä¹Ÿæ˜¯å…¬å¼ä¸è¶³ä¹‹å¤„ï¼Œéœ€è¦æ ¹æ®åˆ¤æ–­å’Œç»éªŒã€‚ä½†è¿™ä¸ªè®¡ç®—æ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒæ ‡å‡†ã€‚</p><h1>25.InnoDB IOçº¿ç¨‹ç›¸å…³å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ</h1><p>æ•°æ®åº“å±äº IO å¯†é›†å‹çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸»è¦èŒè´£å°±æ˜¯æ•°æ®çš„ç®¡ç†åŠå­˜å‚¨å·¥ä½œã€‚ä»å†…å­˜ä¸­è¯»å–ä¸€ä¸ªæ•°æ®åº“æ•°æ®çš„æ—¶é—´æ˜¯å¾®ç§’çº§åˆ«ï¼Œè€Œä»ä¸€å—æ™®é€šç¡¬ç›˜ä¸Šè¯»å–ä¸€ä¸ªIOæ˜¯åœ¨æ¯«ç§’çº§åˆ«ã€‚è¦ä¼˜åŒ–æ•°æ®åº“ï¼ŒIOæ“ä½œæ˜¯å¿…é¡»è¦ä¼˜åŒ–çš„ï¼Œå°½å¯èƒ½å°†ç£ç›˜IOè½¬åŒ–ä¸ºå†…å­˜IOã€‚</p><p><strong>1) å‚æ•°: query_cache_size&amp;have_query_cache</strong><br>MySQLæŸ¥è¯¢ç¼“å­˜ä¼šä¿å­˜æŸ¥è¯¢è¿”å›çš„å®Œæ•´ç»“æœã€‚å½“æŸ¥è¯¢å‘½ä¸­è¯¥ç¼“å­˜ï¼Œä¼šç«‹åˆ»è¿”å›ç»“æœï¼Œè·³è¿‡äº†è§£æï¼Œä¼˜åŒ–å’Œæ‰§è¡Œé˜¶æ®µã€‚<br>æŸ¥è¯¢ç¼“å­˜ä¼šè·Ÿè¸ªæŸ¥è¯¢ä¸­æ¶‰åŠçš„æ¯ä¸ªè¡¨ï¼Œå¦‚æœè¿™äº›è¡¨å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå’Œè¿™ä¸ªè¡¨ç›¸å…³çš„æ‰€æœ‰ç¼“å­˜éƒ½å°†å¤±æ•ˆã€‚</p><ol><li>æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜æ˜¯å¦å¼€å¯</li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-- </span>æŸ¥è¯¢æ˜¯å¦æ”¯æŒæŸ¥è¯¢ç¼“å­˜</span><br><span class="line"><span class="section">mysql&gt; show variables like &#x27;have_query_cache&#x27;;</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â | Value |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| have_query_cache | YES Â  |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-- </span>æŸ¥è¯¢æ˜¯å¦å¼€å¯æŸ¥è¯¢ç¼“å­˜ é»˜è®¤å…³é—­</span><br><span class="line"><span class="section">mysql&gt; show variables like &#x27;%query_cache_type%&#x27;;</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â | Value |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br><span class="line"><span class="section">| query_cache_type | OFF Â  |</span></span><br><span class="line"><span class="section">+------------------+-------+</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å¼€å¯ç¼“å­˜,åœ¨my.iniä¸­æ·»åŠ ä¸‹é¢ä¸€è¡Œå‚æ•°</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">query_cache_size</span>=128M</span><br><span class="line"><span class="attribute">query_cache_type</span>=1</span><br><span class="line"></span><br><span class="line">query_cache_type:</span><br><span class="line">è®¾ç½®ä¸º0ï¼ŒOFF,ç¼“å­˜ç¦ç”¨</span><br><span class="line">è®¾ç½®ä¸º1ï¼ŒON,ç¼“å­˜æ‰€æœ‰çš„ç»“æœ</span><br><span class="line">è®¾ç½®ä¸º2ï¼ŒDENAND,åªç¼“å­˜åœ¨selectè¯­å¥ä¸­é€šè¿‡SQL_CACHEæŒ‡å®šéœ€è¦ç¼“å­˜çš„æŸ¥è¯¢</span><br></pre></td></tr></table></figure><ol start="3"><li>æµ‹è¯•èƒ½å¦ç¼“å­˜æŸ¥è¯¢</li></ol><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#x27;%Qcache%&#x27;;</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">|<span class="string"> Variable_name           </span>|<span class="string"> Value   </span>|</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">|<span class="string"> Qcache_free_blocks      </span>|<span class="string"> 1       </span>|</span><br><span class="line">|<span class="string"> Qcache_free_memory      </span>|<span class="string"> 1031832 </span>|</span><br><span class="line">|<span class="string"> Qcache_hits             </span>|<span class="string"> 0       </span>|</span><br><span class="line">|<span class="string"> Qcache_inserts          </span>|<span class="string"> 0       </span>|</span><br><span class="line">|<span class="string"> Qcache_lowmem_prunes    </span>|<span class="string"> 0       </span>|</span><br><span class="line">|<span class="string"> Qcache_not_cached       </span>|<span class="string"> 1       </span>|</span><br><span class="line">|<span class="string"> Qcache_queries_in_cache </span>|<span class="string"> 0       </span>|</span><br><span class="line">|<span class="string"> Qcache_total_blocks     </span>|<span class="string"> 1       </span>|</span><br><span class="line">+-------------------------+---------+</span><br></pre></td></tr></table></figure><ul><li><strong>Qcache_free_blocks</strong>:ç¼“å­˜ä¸­ç›®å‰å‰©ä½™çš„blocksæ•°é‡ï¼ˆå¦‚æœå€¼è¾ƒå¤§ï¼Œåˆ™æŸ¥è¯¢ç¼“å­˜ä¸­çš„å†…å­˜ç¢ç‰‡è¿‡å¤šï¼‰</li><li><strong>Qcache_free_memory</strong>:ç©ºé—²ç¼“å­˜çš„å†…å­˜å¤§å°</li><li><strong>Qcache_hits</strong>:å‘½ä¸­ç¼“å­˜æ¬¡æ•°</li><li><strong>Qcache_inserts</strong>: æœªå‘½ä¸­ç„¶åè¿›è¡Œæ­£å¸¸æŸ¥è¯¢</li><li><strong>Qcache_lowmem_prunes</strong>:æŸ¥è¯¢å› ä¸ºå†…å­˜ä¸è¶³è€Œè¢«ç§»é™¤å‡ºæŸ¥è¯¢ç¼“å­˜è®°å½•</li><li><strong>Qcache_not_cached</strong>: æ²¡æœ‰è¢«ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡</li><li><strong>Qcache_queries_in_cache</strong>:å½“å‰ç¼“å­˜ä¸­ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡</li><li><strong>Qcache_total_blocks</strong>:å½“å‰ç¼“å­˜çš„blockæ•°é‡</li></ul><p><strong>ä¼˜åŒ–å»ºè®®</strong>: Query Cacheçš„ä½¿ç”¨éœ€è¦å¤šä¸ªå‚æ•°é…åˆï¼Œå…¶ä¸­æœ€ä¸ºå…³é”®çš„æ˜¯ query_cache_size å’Œ query_cache_type ï¼Œå‰è€…è®¾ç½®ç”¨äºç¼“å­˜ ResultSet çš„å†…å­˜å¤§å°ï¼Œåè€…è®¾ç½®åœ¨ä½•åœºæ™¯ä¸‹ä½¿ç”¨ Query Cacheã€‚</p><p>MySQLæ•°æ®åº“æ•°æ®å˜åŒ–ç›¸å¯¹ä¸å¤šï¼Œquery_cache_size ä¸€èˆ¬è®¾ç½®ä¸º256MBæ¯”è¾ƒåˆé€‚ ,ä¹Ÿå¯ä»¥é€šè¿‡è®¡ç®—Query Cacheçš„å‘½ä¸­ç‡æ¥è¿›è¡Œè°ƒæ•´</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">( Qcache_hits / ( Qcache_hits + Qcache_inserts )</span> * <span class="number">100</span>) )</span><br></pre></td></tr></table></figure><ol start="2"><li>å‚æ•°: innodb_max_dirty_pages_pct è¯¥å‚æ•°æ˜¯InnoDB å­˜å‚¨å¼•æ“ç”¨æ¥æ§åˆ¶buffer poolä¸­è„é¡µçš„ç™¾åˆ†æ¯”ï¼Œå½“è„é¡µæ•°é‡å æ¯”è¶…è¿‡è¿™ä¸ªå‚æ•°è®¾ç½®çš„å€¼æ—¶ï¼ŒInnoDBä¼šå¯åŠ¨åˆ·è„é¡µçš„æ“ä½œã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- innodb_max_dirty_pages_pct å‚æ•°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œæœ€å°å€¼ä¸º0ï¼Œ æœ€å¤§å€¼ä¸º99.99ï¼Œé»˜è®¤å€¼ä¸º 75ã€‚</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_max_dirty_pages_pct&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name Â  Â  Â  Â  Â  Â  Â <span class="operator">|</span> <span class="keyword">Value</span> Â  Â  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> innodb_max_dirty_pages_pct <span class="operator">|</span> <span class="number">75.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+-----------+</span></span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–å»ºè®®</strong>: è¯¥å‚æ•°æ¯”ä¾‹å€¼è¶Šå¤§ï¼Œä»å†…å­˜åˆ°ç£ç›˜çš„å†™å…¥æ“ä½œå°±ä¼šç›¸å¯¹å‡å°‘ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸‹å‡å°‘å†™å…¥æ“ä½œçš„ç£ç›˜IOã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªæ¯”ä¾‹å€¼è¿‡å¤§ï¼Œå½“æ•°æ®åº“ Crash ä¹‹åé‡å¯çš„æ—¶é—´å¯èƒ½å°±ä¼šå¾ˆé•¿ï¼Œå› ä¸ºä¼šæœ‰å¤§é‡çš„äº‹åŠ¡æ•°æ®éœ€è¦ä»æ—¥å¿—æ–‡ä»¶æ¢å¤å‡ºæ¥å†™å…¥æ•°æ®æ–‡ä»¶ä¸­.æœ€å¤§ä¸å»ºè®®è¶…è¿‡90,ä¸€èˆ¬é‡å¯æ¢å¤çš„æ•°æ®åœ¨è¶…è¿‡1GBçš„è¯,å¯åŠ¨é€Ÿåº¦å°±ä¼šå˜æ…¢.</p><p><strong>3) å‚æ•°: innodb_old_blocks_pct&amp;innodb_old_blocks_time</strong><br><code>innodb_old_blocks_pct</code> ç”¨æ¥ç¡®å®šLRUé“¾è¡¨ä¸­old sublistæ‰€å æ¯”ä¾‹,é»˜è®¤å ç”¨37%</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%innodb_old_blocks_pct%&#x27;;</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  | Value |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_old_blocks_pct | 37 Â  Â |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br></pre></td></tr></table></figure><p><code>innodb_old_blocks_time</code>  ç”¨æ¥æ§åˆ¶old sublistä¸­pageçš„è½¬ç§»ç­–ç•¥ï¼Œæ–°çš„pageé¡µåœ¨è¿›å…¥LRUé“¾è¡¨ä¸­æ—¶ï¼Œä¼šå…ˆæ’å…¥åˆ°old sublistçš„å¤´éƒ¨ï¼Œç„¶åpageéœ€è¦åœ¨old sublistä¸­åœç•™innodb_old_blocks_timeè¿™ä¹ˆä¹…åï¼Œä¸‹ä¸€æ¬¡å¯¹è¯¥pageçš„è®¿é—®æ‰ä¼šä½¿å…¶ç§»åŠ¨åˆ°new sublistçš„å¤´éƒ¨ï¼Œé»˜è®¤å€¼1ç§’.</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%innodb_old_blocks_time%&#x27;;</span></span><br><span class="line"><span class="section">+------------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â  Â  Â  Â | Value |</span></span><br><span class="line"><span class="section">+------------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_old_blocks_time | 1000 Â |</span></span><br><span class="line"><span class="section">+------------------------+-------+</span></span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–å»ºè®®</strong>: åœ¨æ²¡æœ‰å¤§è¡¨æ‰«æçš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸”æ•°æ®å¤šä¸ºé¢‘ç¹ä½¿ç”¨çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ innodb_old_blocks_pctçš„å€¼ï¼Œå¹¶ä¸”å‡å°innodb_old_blocks_timeçš„å€¼ã€‚è®©æ•°æ®é¡µèƒ½å¤Ÿæ›´å¿«å’Œæ›´å¤šçš„è¿›å…¥çš„çƒ­ç‚¹æ•°æ®åŒºã€‚</p><h1>26.ä»€ä¹ˆæ˜¯å†™å¤±æ•ˆï¼Ÿ</h1><p>InnoDBçš„é¡µå’Œæ“ä½œç³»ç»Ÿçš„é¡µå¤§å°ä¸ä¸€è‡´ï¼ŒInnoDBé¡µå¤§å°ä¸€èˆ¬ä¸º16Kï¼Œæ“ä½œç³»ç»Ÿé¡µå¤§å°ä¸º4Kï¼ŒInnoDBçš„é¡µå†™å…¥åˆ°ç£ç›˜æ—¶ï¼Œä¸€ä¸ªé¡µéœ€è¦åˆ†4æ¬¡å†™ã€‚</p><p>å¦‚æœå­˜å‚¨å¼•æ“æ­£åœ¨å†™å…¥é¡µçš„æ•°æ®åˆ°ç£ç›˜æ—¶å‘ç”Ÿäº†å®•æœºï¼Œå¯èƒ½å‡ºç°é¡µåªå†™äº†ä¸€éƒ¨åˆ†çš„æƒ…å†µï¼Œæ¯”å¦‚åªå†™äº†4Kï¼Œå°±å®•æœºäº†ï¼Œè¿™ç§æƒ…å†µå«åšéƒ¨åˆ†å†™å¤±æ•ˆï¼ˆpartial page writeï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/186aaf40085542d5a790025d9577b34d.png" alt="image.png"></p><p><strong>åŒå†™ç¼“å†²åŒº Doublewrite Buffer</strong></p><p>ä¸ºäº†è§£å†³å†™å¤±æ•ˆé—®é¢˜ï¼ŒInnoDBå®ç°äº†double write buffer Files, å®ƒä½äºç³»ç»Ÿè¡¨ç©ºé—´ï¼Œæ˜¯ä¸€ä¸ªå­˜å‚¨åŒºåŸŸã€‚</p><p>åœ¨BufferPoolçš„pageé¡µåˆ·æ–°åˆ°ç£ç›˜çœŸæ­£çš„ä½ç½®å‰ï¼Œä¼šå…ˆå°†æ•°æ®å­˜åœ¨Doublewrite ç¼“å†²åŒºã€‚è¿™æ ·åœ¨å®•æœºé‡å¯æ—¶ï¼Œå¦‚æœå‡ºç°æ•°æ®é¡µæŸåï¼Œé‚£ä¹ˆåœ¨åº”ç”¨redo logä¹‹å‰ï¼Œéœ€è¦é€šè¿‡è¯¥é¡µçš„å‰¯æœ¬æ¥è¿˜åŸè¯¥é¡µï¼Œç„¶åå†è¿›è¡Œredo logé‡åšï¼Œdouble writeå®ç°äº†InnoDBå¼•æ“æ•°æ®é¡µçš„å¯é æ€§.</p><p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨åŒå†™ç¼“å†²åŒºï¼Œå¦‚æœè¦ç¦ç”¨Doublewrite ç¼“å†²åŒºï¼Œå¯ä»¥å°† <code>innodb_doublewrite</code>è®¾ç½®ä¸º0ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%innodb_doublewrite%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name      <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> innodb_doublewrite <span class="operator">|</span> <span class="keyword">ON</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><p>æ•°æ®åŒå†™æµç¨‹</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/a31680a18f104e0da3f3cb6c1aa71866.png" alt="image.png"></p><ul><li><strong>step1</strong>ï¼šå½“è¿›è¡Œç¼“å†²æ± ä¸­çš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜çš„æ“ä½œæ—¶,å¹¶ä¸ä¼šç›´æ¥å†™ç£ç›˜,æ¯æ¬¡è„é¡µåˆ·æ–°å¿…é¡»è¦å…ˆå†™double write .</li><li><strong>step2</strong>ï¼šé€šè¿‡memcpyå‡½æ•°å°†è„é¡µå¤åˆ¶åˆ°å†…å­˜ä¸­çš„double write buffer .</li><li><strong>step3</strong>:  double write bufferå†åˆ†ä¸¤æ¬¡ã€æ¯æ¬¡1MB, é¡ºåºå†™å…¥å…±äº«è¡¨ç©ºé—´çš„ç‰©ç†ç£ç›˜ä¸Š, <strong>ç¬¬ä¸€æ¬¡å†™</strong>.</li><li><strong>step4</strong>:  åœ¨å®Œæˆdouble writeé¡µçš„å†™å…¥åï¼Œå†å°†double wirite bufferä¸­çš„é¡µå†™å…¥å„ä¸ªè¡¨çš„<strong>ç‹¬ç«‹è¡¨ç©ºé—´</strong>æ–‡ä»¶ä¸­(æ•°æ®æ–‡ä»¶ .ibd), <strong>ç¬¬äºŒæ¬¡å†™</strong>ã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆå†™ä¸¤æ¬¡ ?</strong></p><p>å¯èƒ½æœ‰çš„åŒå­¦ä¼šæœ‰ç–‘é—®ï¼Œä¸ºå•¥å†™ä¸¤æ¬¡ï¼Œåˆ·ä¸€æ¬¡æ•°æ®æ–‡ä»¶ä¿å­˜æ•°æ®ä¸å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†™å…±äº«è¡¨ç©ºé—´ ?å…¶å®æ˜¯å› ä¸ºå…±äº«è¡¨ç©ºé—´æ˜¯åœ¨ibdbataæ–‡ä»¶ä¸­åˆ’å‡º2Mè¿ç»­çš„ç©ºé—´ï¼Œä¸“é—¨ç»™double writeåˆ·è„é¡µç”¨çš„, ç”±äºåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>double writeé¡µçš„å­˜å‚¨æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å†™å…¥ç£ç›˜ä¸ºé¡ºåºå†™ï¼Œæ€§èƒ½å¾ˆé«˜</strong>ï¼›å®Œæˆdouble writeåï¼Œå†å°†è„é¡µå†™å…¥å®é™…çš„å„ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œè¿™æ—¶å†™å…¥å°±æ˜¯ç¦»æ•£çš„äº†.</p><h1>27.ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ</h1><p><strong>è¡Œè®°å½•æ ¼å¼</strong></p><p><strong>1) è¡Œæ ¼å¼åˆ†ç±»</strong></p><p>è¡¨çš„è¡Œæ ¼å¼å†³å®šäº†å®ƒçš„è¡Œæ˜¯å¦‚ä½•ç‰©ç†å­˜å‚¨çš„ï¼Œè¿™åè¿‡æ¥åˆä¼šå½±å“æŸ¥è¯¢å’ŒDMLæ“ä½œçš„æ€§èƒ½ã€‚å¦‚æœåœ¨å•ä¸ªpageé¡µä¸­å®¹çº³æ›´å¤šè¡Œï¼ŒæŸ¥è¯¢å’Œç´¢å¼•æŸ¥æ‰¾å¯ä»¥æ›´å¿«åœ°å·¥ä½œï¼Œç¼“å†²æ± ä¸­æ‰€éœ€çš„å†…å­˜æ›´å°‘ï¼Œå†™å…¥æ›´æ–°æ—¶æ‰€éœ€çš„I/Oæ›´å°‘ã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“æ”¯æŒå››ç§è¡Œæ ¼å¼ï¼šRedundantã€Compactã€Dynamic å’Œ Compressed .</p><p>æŸ¥è¯¢MySQLä½¿ç”¨çš„è¡Œæ ¼å¼,é»˜è®¤ä¸º: dynamic</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_default_row_format&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name             <span class="operator">|</span> <span class="keyword">Value</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> innodb_default_row_format <span class="operator">|</span> <span class="keyword">dynamic</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šè¡Œæ ¼å¼è¯­æ³•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>table_name(column_name)<span class="operator">&gt;</span> ROW_FORMAT<span class="operator">=</span>è¡Œæ ¼å¼åç§°</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> ROW_FORMAT<span class="operator">=</span>è¡Œæ ¼å¼åç§°</span><br></pre></td></tr></table></figure><p><strong>2) COMPACT è¡Œè®°å½•æ ¼å¼</strong></p><p>Compact è®¾è®¡ç›®æ ‡æ˜¯é«˜æ•ˆåœ°å­˜å‚¨æ•°æ®ï¼Œä¸€ä¸ªé¡µä¸­å­˜æ”¾çš„è¡Œæ•°æ®è¶Šå¤šï¼Œå…¶æ€§èƒ½å°±è¶Šé«˜ã€‚</p><p>Compactè¡Œè®°å½•ç”±ä¸¤éƒ¨åˆ†ç»„æˆ: è®°å½•æ”¾å…¥é¢å¤–ä¿¡æ¯ å’Œ  è®°å½•çš„çœŸå®æ•°æ®.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/55418f9593df402995e37c1b1a0bb05e.png" alt="image.png"></p><p><strong>è®°å½•é¢å¤–ä¿¡æ¯éƒ¨åˆ†</strong></p><p>æœåŠ¡å™¨ä¸ºäº†æè¿°ä¸€æ¡è®°å½•è€Œæ·»åŠ äº†ä¸€äº›é¢å¤–ä¿¡æ¯(å…ƒæ•°æ®ä¿¡æ¯)ï¼Œè¿™äº›é¢å¤–ä¿¡æ¯åˆ†ä¸º3ç±»ï¼Œåˆ†åˆ«æ˜¯: å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€NULLå€¼åˆ—è¡¨å’Œè®°å½•å¤´ä¿¡æ¯.</p><ul><li><p><strong>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</strong></p><p>MySQLæ”¯æŒä¸€äº›å˜é•¿çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚VARCHAR(M)ã€VARBINARY(M)ã€å„ç§TEXTç±»å‹ï¼Œå„ç§BLOBç±»å‹ï¼Œè¿™äº›å˜é•¿çš„æ•°æ®ç±»å‹å ç”¨çš„å­˜å‚¨ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ol><li>çœŸæ­£çš„æ•°æ®å†…å®¹</li><li>å ç”¨çš„å­—èŠ‚æ•°</li></ol><p>å˜é•¿å­—æ®µçš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™è¦æŠŠè¿™äº›æ•°æ®å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿå­˜èµ·æ¥ï¼Œè¯»å–æ•°æ®çš„æ—¶å€™æ‰èƒ½æ ¹æ®è¿™ä¸ªé•¿åº¦åˆ—è¡¨å»è¯»å–å¯¹åº”é•¿åº¦çš„æ•°æ®ã€‚</p><p>åœ¨ <code>Compact</code>è¡Œæ ¼å¼ä¸­ï¼ŒæŠŠæ‰€æœ‰å˜é•¿ç±»å‹çš„åˆ—çš„é•¿åº¦éƒ½å­˜æ”¾åœ¨è®°å½•çš„å¼€å¤´éƒ¨ä½å½¢æˆä¸€ä¸ªåˆ—è¡¨ï¼ŒæŒ‰ç…§åˆ—çš„é¡ºåºé€†åºå­˜æ”¾,è¿™ä¸ªåˆ—è¡¨å°±æ˜¯ <strong>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</strong>ã€‚</p></li><li><p><strong>NULLå€¼åˆ—è¡¨</strong></p><p>è¡¨ä¸­çš„æŸäº›åˆ—å¯èƒ½ä¼šå­˜å‚¨NULLå€¼ï¼Œå¦‚æœæŠŠè¿™äº›NULLå€¼éƒ½æ”¾åˆ°è®°å½•çš„çœŸå®æ•°æ®ä¸­ä¼šæ¯”è¾ƒæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥Compactè¡Œæ ¼å¼æŠŠè¿™äº›å€¼ä¸ºNULLçš„åˆ—å­˜å‚¨åˆ°NULLå€¼åˆ—è¡¨ä¸­ã€‚( å¦‚æœè¡¨ä¸­æ‰€æœ‰åˆ—éƒ½ä¸å…è®¸ä¸º NULLï¼Œå°±ä¸å­˜åœ¨NULLå€¼åˆ—è¡¨ )</p></li><li><p><strong>è®°å½•å¤´ä¿¡æ¯</strong></p><p>è®°å½•å¤´ä¿¡æ¯æ˜¯ç”±å›ºå®šçš„5ä¸ªå­—èŠ‚ç»„æˆï¼Œ5ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯40ä¸ªäºŒè¿›åˆ¶ä½ï¼Œä¸åŒçš„ä½ä»£è¡¨ä¸åŒçš„æ„æ€ï¼Œè¿™äº›å¤´ä¿¡æ¯ä¼šåœ¨åé¢çš„ä¸€äº›åŠŸèƒ½ä¸­çœ‹åˆ°ã€‚</p><table><thead><tr><th>åç§°</th><th>å¤§å°(å•ä½:bit)</th><th>æè¿°</th></tr></thead><tbody><tr><td>é¢„ç•™ä½1</td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td>é¢„ç•™ä½2</td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td>delete_mask</td><td>1</td><td>æ ‡è®°è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤</td></tr><tr><td>min_rec_mask</td><td>1</td><td>æ ‡è®°è¯¥è®°å½•æ˜¯å¦æ˜¯æœ¬å±‚B+æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•</td></tr><tr><td>n_owned</td><td>4</td><td>è¡¨ç¤ºå½“å‰åˆ†ç»„ä¸­ç®¡ç†çš„è®°å½•æ•°</td></tr><tr><td>heap_no</td><td>13</td><td>è¡¨ç¤ºå½“å‰è®°å½•åœ¨è®°å½•å †ä¸­çš„ä½ç½®ä¿¡æ¯</td></tr><tr><td>record_type</td><td>3</td><td>è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹:<br />0 è¡¨ç¤ºæ™®é€šè®°å½•,<br />1 è¡¨ç¤ºB+æ ‘éå¶å­èŠ‚ç‚¹è®°å½•,<br />2 è¡¨ç¤ºæœ€å°è®°å½•,3è¡¨ç¤ºæœ€å¤§è®°å½•</td></tr><tr><td>next_record</td><td>16</td><td>è¡¨ç¤ºä¸‹ä¸€æ¡è®°å½•çš„ç›¸å¯¹ä½ç½®</td></tr></tbody></table><ol><li><p>delete_mask</p><p>è¿™ä¸ªå±æ€§æ ‡è®°ç€å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œå ç”¨1ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå€¼ä¸º0 çš„æ—¶å€™ä»£è¡¨è®°å½•å¹¶æ²¡æœ‰è¢«åˆ é™¤ï¼Œä¸º1 çš„æ—¶å€™ä»£è¡¨è®°å½•è¢«åˆ é™¤æ‰äº†</p></li><li><p>min_rec_mask</p><p>B+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°ã€‚</p></li><li><p>n_owned</p><p>ä»£è¡¨æ¯ä¸ªåˆ†ç»„é‡Œï¼Œæ‰€æ‹¥æœ‰çš„è®°å½•çš„æ•°é‡ï¼Œä¸€èˆ¬æ˜¯åˆ†ç»„é‡Œä¸»é”®æœ€å¤§å€¼æ‰æœ‰çš„ã€‚</p></li><li><p>heap_no</p><p>åœ¨æ•°æ®é¡µçš„User Recordsä¸­æ’å…¥çš„è®°å½•æ˜¯ä¸€æ¡ä¸€æ¡ç´§å‡‘çš„æ’åˆ—çš„ï¼Œè¿™ç§ç´§å‡‘æ’åˆ—çš„ç»“æ„åˆè¢«ç§°ä¸ºå †ã€‚ä¸ºäº†ä¾¿äºç®¡ç†è¿™ä¸ªå †ï¼ŒæŠŠè®°å½•åœ¨å †ä¸­çš„ç›¸å¯¹ä½ç½®ç»™å®šä¸€ä¸ªç¼–å·â€”â€”heap_noã€‚æ‰€ä»¥heap_noè¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®ã€‚</p></li><li><p>record_type</p><p>è¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œä¸€å…±æœ‰4ç§ç±»å‹çš„è®°å½•ï¼Œ 0 è¡¨ç¤ºæ™®é€šç”¨æˆ·è®°å½•ï¼Œ 1 è¡¨ç¤ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•ï¼Œ 2 è¡¨ç¤ºæœ€å°è®°å½•ï¼Œ 3 è¡¨ç¤ºæœ€å¤§è®°å½•ã€‚</p></li><li><p>next_record</p><p>è¡¨ç¤ºä»å½“å‰è®°å½•çš„çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„åœ°å€åç§»é‡ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‡å‘ä¸‹ä¸€æ¡è®°å½•åœ°å€çš„æŒ‡é’ˆã€‚å€¼ä¸ºæ­£æ•°è¯´æ˜ä¸‹ä¸€æ¡è®°å½•åœ¨å½“å‰è®°å½•åé¢ï¼Œä¸ºè´Ÿæ•°è¯´æ˜ä¸‹ä¸€æ¡è®°å½•åœ¨å½“å‰è®°å½•çš„å‰é¢ã€‚</p></li></ol></li><li><p><strong>è®°å½•çœŸå®æ•°æ®éƒ¨åˆ†</strong></p><p>è®°å½•çš„çœŸå®æ•°æ®é™¤äº†æ’å…¥çš„é‚£äº›åˆ—çš„æ•°æ®ï¼ŒMySQLä¼šä¸ºæ¯ä¸ªè®°å½•é»˜è®¤çš„æ·»åŠ ä¸€äº›åˆ—ï¼ˆä¹Ÿç§°ä¸ºéšè—åˆ—ï¼‰ï¼Œå…·ä½“çš„åˆ—å¦‚ä¸‹ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1607287731925286912/4b5476f2251b45939db29cfb4a7198cc.png" alt="image.png"></p><table><thead><tr><th>åˆ—å</th><th>æ˜¯å¦å¿…é¡»</th><th>å ç”¨ç©ºé—´</th><th>æè¿°</th></tr></thead><tbody><tr><td>row_id</td><td>å¦</td><td>6å­—èŠ‚</td><td>è¡ŒID,å”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•</td></tr><tr><td>transaction_id</td><td>æ˜¯</td><td>6å­—èŠ‚</td><td>äº‹åŠ¡ID</td></tr><tr><td>roll_pointer</td><td>æ˜¯</td><td>7å­—èŠ‚</td><td>å›æ»šæŒ‡é’ˆ</td></tr></tbody></table><p>ç”Ÿæˆéšè—ä¸»é”®åˆ—çš„æ–¹å¼æœ‰:</p><ol><li>æœåŠ¡å™¨ä¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ¯å½“å‘æŸä¸ªåŒ…å«éšè—çš„row_idåˆ—çš„è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•æ—¶ï¼Œå°±ä¼šæŠŠè¯¥å˜é‡çš„å€¼å½“ä½œæ–°è®°å½•çš„row_idåˆ—çš„å€¼ï¼Œå¹¶ä¸”æŠŠè¯¥å˜é‡è‡ªå¢1ã€‚</li><li>æ¯å½“è¿™ä¸ªå˜é‡çš„å€¼ä¸º256çš„å€æ•°æ—¶ï¼Œå°±ä¼šå°†è¯¥å˜é‡çš„å€¼åˆ·æ–°åˆ°ç³»ç»Ÿè¡¨ç©ºé—´çš„é¡µå·ä¸º7çš„é¡µé¢ä¸­ä¸€ä¸ªMax Row IDçš„å±æ€§å¤„ã€‚</li><li>å½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šå°†é¡µä¸­çš„Max Row IDå±æ€§åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¯¥å€¼åŠ ä¸Š256ä¹‹åèµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œå› ä¸ºåœ¨ä¸Šæ¬¡å…³æœºæ—¶è¯¥å…¨å±€å˜é‡çš„å€¼å¯èƒ½å¤§äºé¡µä¸­Max Row IDå±æ€§å€¼ã€‚<br>4.</li></ol><p><strong>3) Compactä¸­çš„è¡Œæº¢å‡ºæœºåˆ¶</strong></p><p><strong>ä»€ä¹ˆæ˜¯è¡Œæº¢å‡º ?</strong></p><p>MySQLä¸­æ˜¯ä»¥é¡µä¸ºåŸºæœ¬å•ä½,è¿›è¡Œç£ç›˜ä¸å†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’çš„,æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯16KB,16KB = 16384å­—èŠ‚.è€Œä¸€ä¸ªvarchar(m) ç±»å‹åˆ—æœ€å¤šå¯ä»¥å­˜å‚¨65532ä¸ªå­—èŠ‚,ä¸€äº›å¤§çš„æ•°æ®ç±»å‹æ¯”å¦‚TEXTå¯ä»¥å­˜å‚¨æ›´å¤š.</p><p>å¦‚æœä¸€ä¸ªè¡¨ä¸­å­˜åœ¨è¿™æ ·çš„å¤§å­—æ®µ,é‚£ä¹ˆä¸€ä¸ªé¡µå°±æ— æ³•å­˜å‚¨ä¸€æ¡å®Œæ•´çš„è®°å½•.è¿™æ—¶å°±ä¼šå‘ç”Ÿè¡Œæº¢å‡º,å¤šå‡ºçš„æ•°æ®å°±ä¼šå­˜å‚¨åœ¨å¦å¤–çš„æº¢å‡ºé¡µä¸­.</p><p>æ€»ç»“: å¦‚æœæŸäº›å­—æ®µä¿¡æ¯è¿‡é•¿ï¼Œæ— æ³•å­˜å‚¨åœ¨Bæ ‘èŠ‚ç‚¹ä¸­ï¼Œè¿™æ—¶å€™ä¼šè¢«å•ç‹¬åˆ†é…ç©ºé—´ï¼Œæ­¤æ—¶è¢«ç§°ä¸ºæº¢å‡ºé¡µï¼Œè¯¥å­—æ®µè¢«ç§°ä¸ºé¡µå¤–åˆ—ã€‚</p><p><strong>Compactä¸­çš„è¡Œæº¢å‡ºæœºåˆ¶</strong></p><p>InnoDB è§„å®šä¸€é¡µè‡³å°‘å­˜å‚¨ä¸¤æ¡è®°å½•(B+æ ‘ç‰¹ç‚¹)ï¼Œå¦‚æœé¡µä¸­åªèƒ½å­˜æ”¾ä¸‹ä¸€æ¡è®°å½•ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨å°†è¡Œæ•°æ®å­˜æ”¾åˆ°æº¢å‡ºé¡µä¸­.<br>å½“å‘ç”Ÿè¡Œæº¢å‡ºæ—¶ï¼Œæ•°æ®é¡µåªä¿å­˜äº†å‰768å­—èŠ‚çš„å‰ç¼€æ•°æ®ï¼Œæ¥ç€æ˜¯20ä¸ªå­—èŠ‚çš„åç§»é‡ï¼ŒæŒ‡å‘è¡Œæº¢å‡ºé¡µ.</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/0dcc99e8c9ac4b4e92d2fc2cefef9398.png" alt="image.png"></p></li></ul><h1>28.å¦‚ä½•è¿›è¡ŒJOINä¼˜åŒ–ï¼Ÿ</h1><p>JOIN æ˜¯ MySQL ç”¨æ¥è¿›è¡Œè”è¡¨æ“ä½œçš„ï¼Œç”¨æ¥åŒ¹é…ä¸¤ä¸ªè¡¨çš„æ•°æ®ï¼Œç­›é€‰å¹¶åˆå¹¶å‡ºç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„ç»“æœé›†ã€‚</p><p>JOIN æ“ä½œæœ‰å¤šç§æ–¹å¼ï¼Œå–å†³äºæœ€ç»ˆæ•°æ®çš„åˆå¹¶æ•ˆæœã€‚å¸¸ç”¨è¿æ¥æ–¹å¼çš„æœ‰ä»¥ä¸‹å‡ ç§:</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/55df110a70d9450283a9a2bf0269e2b1.png" alt="image.png"></p><p>ä»€ä¹ˆæ˜¯é©±åŠ¨è¡¨ ?</p><ul><li>å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶,ç¬¬ä¸€ä¸ªè¢«å¤„ç†çš„è¡¨å°±æ˜¯é©±åŠ¨è¡¨,ä½¿ç”¨é©±åŠ¨è¡¨å»å…³è”å…¶ä»–è¡¨.</li><li>é©±åŠ¨è¡¨çš„ç¡®å®šéå¸¸çš„å…³é”®,ä¼šç›´æ¥å½±å“å¤šè¡¨å…³è”çš„é¡ºåº,ä¹Ÿå†³å®šåç»­å…³è”æŸ¥è¯¢çš„æ€§èƒ½</li></ul><p>é©±åŠ¨è¡¨çš„é€‰æ‹©è¦éµå¾ªä¸€ä¸ªè§„åˆ™:</p><ul><li>åœ¨å¯¹æœ€ç»ˆçš„ç»“æœé›†æ²¡æœ‰å½±å“çš„å‰æä¸‹,ä¼˜å…ˆé€‰æ‹©ç»“æœé›†æœ€å°çš„é‚£å¼ è¡¨ä½œä¸ºé©±åŠ¨è¡¨</li></ul><p><strong>3) ä¸‰ç§JOINç®—æ³•</strong></p><p>1.Simple Nested-Loop Joinï¼ˆ ç®€å•çš„åµŒå¥—å¾ªç¯è¿æ¥ )</p><ul><li><p><strong>ç®€å•æ¥è¯´åµŒå¥—å¾ªç¯è¿æ¥ç®—æ³•å°±æ˜¯ä¸€ä¸ªåŒå±‚for å¾ªç¯ ï¼Œé€šè¿‡å¾ªç¯å¤–å±‚è¡¨çš„è¡Œæ•°æ®ï¼Œé€ä¸ªä¸å†…å±‚è¡¨çš„æ‰€æœ‰è¡Œæ•°æ®è¿›è¡Œæ¯”è¾ƒæ¥è·å–ç»“æœ.</strong></p></li><li><p><strong>è¿™ç§ç®—æ³•æ˜¯æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œæ€§èƒ½ä¹Ÿä¸€èˆ¬ã€‚å¯¹å†…å¾ªç¯æ²¡ä¼˜åŒ–ã€‚</strong></p></li><li><p><strong>ä¾‹å¦‚æœ‰è¿™æ ·ä¸€æ¡SQL:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¿æ¥ç”¨æˆ·è¡¨ä¸è®¢å•è¡¨ è¿æ¥æ¡ä»¶æ˜¯ u.id = o.user_id</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> t1 <span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">order</span> t2 <span class="keyword">on</span> t1.id <span class="operator">=</span> t2.user_id;</span><br><span class="line"><span class="comment">-- userè¡¨ä¸ºé©±åŠ¨è¡¨,orderè¡¨ä¸ºè¢«é©±åŠ¨è¡¨</span></span><br></pre></td></tr></table></figure></li><li><p>è½¬æ¢æˆä»£ç æ‰§è¡Œæ—¶çš„æ€è·¯æ˜¯è¿™æ ·çš„:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">for</span>(userè¡¨è¡Œ uRow : userè¡¨)&#123;</span><br><span class="line"> Â  Â <span class="built_in">for</span>(Orderè¡¨çš„è¡Œ oRow : orderè¡¨)&#123;</span><br><span class="line"> Â  Â  Â  Â <span class="built_in">if</span>(uRow.id = oRow.user_id)&#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â return uRow;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åŒ¹é…è¿‡ç¨‹å¦‚ä¸‹å›¾</strong><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/b471d0b4f2da457892be9bce33827285.png" alt="image.png"></p></li><li><p><strong>SNL çš„ç‰¹ç‚¹</strong></p><ul><li><strong>ç®€å•ç²—æš´å®¹æ˜“ç†è§£ï¼Œå°±æ˜¯é€šè¿‡åŒå±‚å¾ªç¯æ¯”è¾ƒæ•°æ®æ¥è·å¾—ç»“æœ</strong></li><li><strong>æŸ¥è¯¢æ•ˆç‡ä¼šéå¸¸æ…¢,å‡è®¾ A è¡¨æœ‰ N è¡Œï¼ŒB è¡¨æœ‰ M è¡Œã€‚SNL çš„å¼€é”€å¦‚ä¸‹ï¼š</strong><ul><li><strong>A è¡¨æ‰«æ 1 æ¬¡ã€‚</strong></li><li><strong>B è¡¨æ‰«æ M æ¬¡ã€‚</strong></li><li><strong>ä¸€å…±æœ‰ N ä¸ªå†…å¾ªç¯ï¼Œæ¯ä¸ªå†…å¾ªç¯è¦ M æ¬¡ï¼Œä¸€å…±æœ‰å†…å¾ªç¯ N * M æ¬¡</strong></li></ul></li></ul></li></ul><p><strong>2) Index Nested-Loop Joinï¼ˆ ç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ ï¼‰</strong></p><ul><li>Index Nested-Loop Join å…¶ä¼˜åŒ–çš„æ€è·¯:  <strong>ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘å†…å±‚è¡¨æ•°æ®çš„åŒ¹é…æ¬¡æ•°</strong> , æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œç”¨æ¥è¿›è¡Œ join çš„å­—æ®µå·²ç»åœ¨è¢«é©±åŠ¨è¡¨ä¸­å»ºç«‹äº†ç´¢å¼•ã€‚</li><li>ä»åŸæ¥çš„  <code>åŒ¹é…æ¬¡æ•° = å¤–å±‚è¡¨è¡Œæ•° * å†…å±‚è¡¨è¡Œæ•°</code> , å˜æˆäº†  <code>åŒ¹é…æ¬¡æ•° = å¤–å±‚è¡¨çš„è¡Œæ•° * å†…å±‚è¡¨ç´¢å¼•çš„é«˜åº¦</code>  ï¼Œæå¤§çš„æå‡äº† joinçš„æ€§èƒ½ã€‚</li><li>å½“ <code>order</code>  è¡¨çš„   <code>user_id</code>  ä¸ºç´¢å¼•çš„æ—¶å€™æ‰§è¡Œè¿‡ç¨‹ä¼šå¦‚ä¸‹å›¾ï¼š</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/524e38edbd0d46b5a3642a0cc2af786c.png" alt="image.png"></p><p><strong>æ³¨æ„ï¼šä½¿ç”¨Index Nested-Loop Join ç®—æ³•çš„å‰ææ˜¯åŒ¹é…çš„å­—æ®µå¿…é¡»å»ºç«‹äº†ç´¢å¼•ã€‚</strong></p><p><strong>3) Block Nested-Loop Join( å—åµŒå¥—å¾ªç¯è¿æ¥ )</strong></p><p>å¦‚æœ join çš„å­—æ®µæœ‰ç´¢å¼•ï¼ŒMySQL ä¼šä½¿ç”¨ INL ç®—æ³•ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼ŒMySQL ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ</p><p>å› ä¸ºä¸å­˜åœ¨ç´¢å¼•äº†ï¼Œæ‰€ä»¥è¢«é©±åŠ¨è¡¨éœ€è¦è¿›è¡Œæ‰«æã€‚è¿™é‡Œ MySQL å¹¶ä¸ä¼šç®€å•ç²—æš´çš„åº”ç”¨ SNL ç®—æ³•ï¼Œè€Œæ˜¯åŠ å…¥äº† buffer ç¼“å†²åŒºï¼Œé™ä½äº†å†…å¾ªç¯çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¢«é©±åŠ¨è¡¨çš„æ‰«ææ¬¡æ•°ã€‚<br><img src="" alt=""><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/df7920c57eb449a68ae9fb902a976729.png" alt="image.png"></p><ul><li><p>åœ¨å¤–å±‚å¾ªç¯æ‰«æ userè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚æ‰«æçš„æ—¶å€™ï¼Œä¼šæŠŠéœ€è¦è¿›è¡Œ join ç”¨åˆ°çš„åˆ—éƒ½ç¼“å­˜åˆ° buffer ä¸­ã€‚buffer ä¸­çš„æ•°æ®æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œé‡Œé¢çš„è®°å½•ä¸éœ€è¦ä¸€æ¡ä¸€æ¡åœ°å–å‡ºæ¥å’Œ order è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ˜¯æ•´ä¸ª buffer å’Œ orderè¡¨è¿›è¡Œæ‰¹é‡æ¯”è¾ƒã€‚</p></li><li><p>å¦‚æœæˆ‘ä»¬æŠŠ buffer çš„ç©ºé—´å¼€å¾—å¾ˆå¤§ï¼Œå¯ä»¥å®¹çº³ä¸‹ user è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œé‚£ä¹ˆ order è¡¨ä¹Ÿåªéœ€è¦è®¿é—®ä¸€æ¬¡ã€‚</p></li><li><p>MySQL é»˜è®¤ buffer å¤§å° 256Kï¼Œå¦‚æœæœ‰ n ä¸ª join æ“ä½œï¼Œä¼šç”Ÿæˆ n-1 ä¸ª join bufferã€‚</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%join_buffer%&#x27;;</span></span><br><span class="line"><span class="section">+------------------+--------+</span></span><br><span class="line"><span class="section">| Variable_name Â  Â | Value Â |</span></span><br><span class="line"><span class="section">+------------------+--------+</span></span><br><span class="line"><span class="section">| join_buffer_size | 262144 |</span></span><br><span class="line"><span class="section">+------------------+--------+</span></span><br><span class="line"></span><br><span class="line">mysql&gt; set session join_buffer_size=262144;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></li></ul><p><strong>4) JOINä¼˜åŒ–æ€»ç»“</strong></p><ol><li>æ°¸è¿œç”¨å°ç»“æœé›†é©±åŠ¨å¤§ç»“æœé›†(å…¶æœ¬è´¨å°±æ˜¯å‡å°‘å¤–å±‚å¾ªç¯çš„æ•°æ®æ•°é‡)</li><li>ä¸ºåŒ¹é…çš„æ¡ä»¶å¢åŠ ç´¢å¼•(å‡å°‘å†…å±‚è¡¨çš„å¾ªç¯åŒ¹é…æ¬¡æ•°)</li><li>å¢å¤§join buffer sizeçš„å¤§å°ï¼ˆä¸€æ¬¡ç¼“å­˜çš„æ•°æ®è¶Šå¤šï¼Œé‚£ä¹ˆå†…å±‚åŒ…çš„æ‰«è¡¨æ¬¡æ•°å°±è¶Šå°‘ï¼‰</li><li>å‡å°‘ä¸å¿…è¦çš„å­—æ®µæŸ¥è¯¢ï¼ˆå­—æ®µè¶Šå°‘ï¼Œjoin buffer æ‰€ç¼“å­˜çš„æ•°æ®å°±è¶Šå¤š</li></ol><h1>29.ç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</h1><ol><li>æŸ¥è¯¢æ¡ä»¶åŒ…å« orï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>éšå¼ç±»å‹è½¬æ¢ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œä¾‹å¦‚ age å­—æ®µç±»å‹æ˜¯ intï¼Œæˆ‘ä»¬ where age = â€œ1â€ï¼Œè¿™æ ·å°±ä¼šè§¦å‘éšå¼ç±»å‹è½¬æ¢</li><li>like é€šé…ç¬¦ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œæ³¨æ„:â€ABC%â€ ä¸ä¼šå¤±æ•ˆï¼Œä¼šèµ° range ç´¢å¼•ï¼Œâ€% ABCâ€ ç´¢å¼•ä¼šå¤±æ•ˆ</li><li>è”åˆç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶çš„æ¡ä»¶åˆ—ä¸æ˜¯è”åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªåˆ—ï¼Œç´¢å¼•å¤±æ•ˆã€‚</li><li>å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°è¿ç®—ã€‚</li><li>å¯¹ç´¢å¼•åˆ—è¿ç®—ï¼ˆå¦‚ï¼Œ+ã€-ã€*ã€/ï¼‰ï¼Œç´¢å¼•å¤±æ•ˆã€‚</li><li>ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ï¼ˆ!= æˆ–è€… &lt; &gt;ï¼Œnot inï¼‰æ—¶ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ is nullï¼Œ is not nullï¼Œå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>ç›¸ join çš„ä¸¤ä¸ªè¡¨çš„å­—ç¬¦ç¼–ç ä¸åŒï¼Œä¸èƒ½å‘½ä¸­ç´¢å¼•ï¼Œä¼šå¯¼è‡´ç¬›å¡å°”ç§¯çš„å¾ªç¯è®¡ç®—</li><li>mysql ä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚</li></ol><h1>30.ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</h1><p><strong>è¦†ç›–ç´¢å¼•æ˜¯ä¸€ç§é¿å…å›è¡¨æŸ¥è¯¢çš„ä¼˜åŒ–ç­–ç•¥:  åªéœ€è¦åœ¨ä¸€æ£µç´¢å¼•æ ‘ä¸Šå°±èƒ½è·å–SQLæ‰€éœ€çš„æ‰€æœ‰åˆ—æ•°æ®ï¼Œæ— éœ€å›è¡¨ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</strong></p><p>å…·ä½“çš„å®ç°æ–¹å¼:</p><ul><li><em>å°†è¢«æŸ¥è¯¢çš„å­—æ®µå»ºç«‹æ™®é€šç´¢å¼•æˆ–è€…è”åˆç´¢å¼•</em>ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥ç›´æ¥è¿”å›ç´¢å¼•ä¸­çš„çš„æ•°æ®ï¼Œä¸éœ€è¦å†é€šè¿‡èšé›†ç´¢å¼•å»å®šä½è¡Œè®°å½•ï¼Œé¿å…äº†å›è¡¨çš„æƒ…å†µå‘ç”Ÿã€‚</li></ul><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> user_name,user_age,user_level <span class="keyword">FROM</span> users </span><br><span class="line"><span class="keyword">WHERE</span> user_name = <span class="string">&#x27;tom&#x27;</span> <span class="keyword">AND</span> user_age = <span class="number">17</span>;</span><br></pre></td></tr></table></figure><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672133064003/9fc6c9a655214e6dbec1e82f51e745e1.png" alt="image.png"></p><p>è¦†ç›–ç´¢å¼•çš„å®šä¹‰ä¸æ³¨æ„äº‹é¡¹:</p><ul><li>å¦‚æœä¸€ä¸ªç´¢å¼•åŒ…å«äº† æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ (ä¸éœ€è¦å›è¡¨)ï¼Œè¿™ä¸ªç´¢å¼•å°±æ˜¯è¦†ç›–ç´¢å¼•ã€‚</li><li>MySQLåªèƒ½ä½¿ç”¨B+Treeç´¢å¼•åšè¦†ç›–ç´¢å¼• (å› ä¸ºåªæœ‰B+æ ‘èƒ½å­˜å‚¨ç´¢å¼•åˆ—å€¼)</li><li>åœ¨explainçš„Extraåˆ—, å¦‚æœå‡ºç° **<code>Using index</code>  è¡¨ç¤º ä½¿ç”¨åˆ°äº†è¦†ç›–ç´¢å¼• , æ‰€å–çš„æ•°æ®å®Œå…¨åœ¨ç´¢å¼•ä¸­å°±èƒ½æ‹¿åˆ°</li></ul><h1>31.ä»‹ç»ä¸€ä¸‹MySQLä¸­äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ</h1><p>åœ¨å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒè¦æˆä¸ºäº‹åŠ¡ï¼Œå¿…é¡»æ»¡è¶³è¿™ 4 ä¸ªç‰¹æ€§ï¼Œå³æ‰€è°“çš„ ACIDï¼šåŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><p>1ï¼‰åŸå­æ€§</p><p>åŸå­æ€§ï¼šäº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“æä¾›äº†ä¸¤ç§äº‹åŠ¡æ—¥å¿—ï¼šredo log(é‡åšæ—¥å¿—)å’Œundo log(å›æ»šæ—¥å¿—)ã€‚å…¶ä¸­redo logç”¨äºä¿è¯äº‹åŠ¡æŒä¹…æ€§ï¼›undo logåˆ™æ˜¯äº‹åŠ¡åŸå­æ€§å’Œéš”ç¦»æ€§å®ç°çš„åŸºç¡€ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1670389670045/c33c69e81e80404a96f4cf49b90a16ab.png" alt="image.png"></p><p>æ¯å†™ä¸€ä¸ªäº‹åŠ¡,éƒ½ä¼šä¿®æ”¹Buffer Pool,ä»è€Œäº§ç”Ÿç›¸åº”çš„Redo/Undoæ—¥å¿—:</p><ul><li>å¦‚æœè¦å›æ»šäº‹åŠ¡ï¼Œé‚£ä¹ˆå°±åŸºäºundo logæ¥å›æ»šå°±å¯ä»¥äº†ï¼ŒæŠŠä¹‹å‰å¯¹ç¼“å­˜é¡µåšçš„ä¿®æ”¹éƒ½ç»™å›æ»šäº†å°±å¯ä»¥äº†ã€‚</li><li>å¦‚æœäº‹åŠ¡æäº¤ä¹‹åï¼Œredo logåˆ·å…¥ç£ç›˜ï¼Œç»“æœMySQLå®•æœºäº†ï¼Œæ˜¯å¯ä»¥æ ¹æ®redo logæ¢å¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„ç¼“å­˜æ•°æ®çš„ã€‚</li></ul><p>å®ç°åŸå­æ€§çš„å…³é”®ï¼Œæ˜¯å½“äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ’¤é”€æ‰€æœ‰å·²ç»æˆåŠŸæ‰§è¡Œçš„sqlè¯­å¥ã€‚</p><p>InnoDB å®ç°å›æ»šï¼Œé çš„æ˜¯undo log ï¼šå½“äº‹åŠ¡å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒInnoDB ä¼šç”Ÿæˆå¯¹åº”çš„undo log  ï¼›å¦‚æœäº‹åŠ¡æ‰§è¡Œå¤±è´¥æˆ–è°ƒç”¨äº†rollback ï¼Œå¯¼è‡´äº‹åŠ¡éœ€è¦å›æ»šï¼Œä¾¿å¯ä»¥åˆ©ç”¨undo logä¸­çš„ä¿¡æ¯å°†æ•°æ®å›æ»šåˆ°ä¿®æ”¹ä¹‹å‰çš„æ ·å­ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/8133afe062ba49389226210a1bd9a30c.png" alt="image.png"></p><p>2ï¼‰ä¸€è‡´æ€§</p><p>ä¸€è‡´æ€§ï¼šäº‹åŠ¡åº”ç¡®ä¿æ•°æ®åº“çš„çŠ¶æ€ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚<em>ä¸€è‡´çŠ¶æ€</em>çš„å«ä¹‰æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®åº”æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚</p><ul><li>çº¦æŸä¸€è‡´æ€§ï¼šåˆ›å»ºè¡¨ç»“æ„æ—¶æ‰€æŒ‡å®šçš„å¤–é”®ã€å”¯ä¸€ç´¢å¼•ç­‰çº¦æŸã€‚</li><li>æ•°æ®ä¸€è‡´æ€§ï¼šæ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„è§„å®šï¼Œå› ä¸ºå®ƒæ˜¯ç”±åŸå­æ€§ã€æŒä¹…æ€§ã€éš”ç¦»æ€§å…±åŒä¿è¯çš„ç»“æœï¼Œè€Œä¸æ˜¯å•å•ä¾èµ–äºæŸä¸€ç§æŠ€æœ¯ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1670389670045/a885bb90c360436aab888b60e95ab5ab.png" alt="image.png"></p><p>3ï¼‰éš”ç¦»æ€§</p><p>éš”ç¦»æ€§ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å…¶ä»–çš„å¹¶å‘äº‹åŠ¡æ˜¯éš”ç¦»çš„ã€‚</p><p>ä¸è€ƒè™‘éš”ç¦»æ€§ä¼šå¼•å‘çš„é—®é¢˜:</p><ul><li><strong>è„è¯»</strong> : ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹ä½†æœªæäº¤çš„æ•°æ®ã€‚</li><li><strong>ä¸å¯é‡å¤è¯»</strong>: ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€è¡Œè®°å½•çš„ç»“æœä¸ä¸€è‡´ï¼Œåé¢è¯»å–çš„è·Ÿå‰é¢è¯»å–çš„ç»“æœä¸ä¸€è‡´ã€‚</li><li><strong>å¹»è¯»</strong> : ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æŒ‰ç›¸åŒæ¡ä»¶æŸ¥è¯¢ï¼Œç»“æœä¸ä¸€è‡´ã€‚åç»­æŸ¥è¯¢çš„ç»“æœå’Œé¢å‰æŸ¥è¯¢ç»“æœä¸åŒï¼Œå¤šäº†æˆ–å°‘äº†å‡ è¡Œè®°å½•ã€‚</li></ul><p>æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰4ä¸ªï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸ºRead uncommitted ã€Read committedã€Repeatable read ã€Serializable ï¼Œè¿™å››ä¸ªçº§åˆ«å¯ä»¥é€ä¸ªè§£å†³è„è¯» ã€ä¸å¯é‡å¤è¯» ã€å¹»è¯» è¿™å‡ ç±»é—®é¢˜ã€‚</p><p>4ï¼‰æŒä¹…æ€§</p><p>æŒä¹…æ€§ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œåç»­çš„æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ï¼Œä¸ä¼šä¸¢å¤±ã€‚</p><p>MySQL äº‹åŠ¡çš„æŒä¹…æ€§ä¿è¯ä¾èµ–çš„æ—¥å¿—æ–‡ä»¶: <code>redo log</code></p><ul><li>redo log ä¹ŸåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€æ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²(redo log buffer)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æ˜“å¤±æ€§çš„ï¼›äºŒæ˜¯ç£ç›˜ä¸Šçš„é‡åšæ—¥å¿—æ–‡ä»¶(redo log file)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æŒä¹…çš„ã€‚redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®åº“ä¸­ç‰©ç†é¡µçš„æƒ…å†µ ã€‚</li><li>å½“æ•°æ®å‘ç”Ÿä¿®æ”¹æ—¶ï¼ŒInnoDBä¸ä»…ä¼šä¿®æ”¹Buffer Poolä¸­çš„æ•°æ®ï¼Œä¹Ÿä¼šåœ¨redo log bufferè®°å½•è¿™æ¬¡æ“ä½œï¼›å½“äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šå¯¹redo log bufferè¿›è¡Œåˆ·ç›˜ï¼Œè®°å½•åˆ°redo log fileä¸­ã€‚å¦‚æœMySQLå®•æœºï¼Œé‡å¯æ—¶å¯ä»¥è¯»å–redo log fileä¸­çš„æ•°æ®ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œæ¢å¤ã€‚è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡æäº¤äº‹åŠ¡éƒ½å®æ—¶è¿›è¡Œåˆ·è„äº†ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/d397f7b8274c418e8e582d7e689a0fbf.png" alt="image.png"></p><p>5ï¼‰ACIDæ€»ç»“</p><ul><li>äº‹åŠ¡çš„æŒä¹…åŒ–æ˜¯ä¸ºäº†åº”å¯¹ç³»ç»Ÿå´©æºƒé€ æˆçš„æ•°æ®ä¸¢å¤±.</li><li>åªæœ‰ä¿è¯äº†äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Œæ‰èƒ½ä¿è¯æ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§</li><li>åœ¨éå¹¶å‘çŠ¶æ€ä¸‹ï¼Œäº‹åŠ¡é—´å¤©ç„¶ä¿è¯éš”ç¦»æ€§ï¼Œå› æ­¤åªéœ€è¦ä¿è¯äº‹åŠ¡çš„åŸå­æ€§å³å¯ä¿è¯ä¸€è‡´æ€§.</li><li>åœ¨å¹¶å‘çŠ¶æ€ä¸‹ï¼Œéœ€è¦ä¸¥æ ¼ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€éš”ç¦»æ€§ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1670389670045/0e07dadfa29943898a6aaeb3ccb5253b.png" alt="image.png"></p><h1>32.MySQL çš„å¯é‡å¤è¯»æ€ä¹ˆå®ç°çš„ï¼Ÿ</h1><p>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å®šä¹‰ï¼š ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>MVCC</p><ul><li>MVCCï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶, ç”¨äºå®ç°<strong>è¯»å·²æäº¤</strong>å’Œ<strong>å¯é‡å¤è¯»</strong>éš”ç¦»çº§åˆ«ã€‚</li><li>MVCCçš„æ ¸å¿ƒå°±æ˜¯ Undo logå¤šç‰ˆæœ¬é“¾ + Read viewï¼Œâ€œMVâ€å°±æ˜¯é€šè¿‡ Undo logæ¥ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œå®ç°å¤šç‰ˆæœ¬çš„ç®¡ç†ï¼Œâ€œCCâ€æ˜¯é€šè¿‡ Read-viewæ¥å®ç°ç®¡ç†ï¼Œé€šè¿‡ Read-viewåŸåˆ™æ¥å†³å®šæ•°æ®æ˜¯å¦æ˜¾ç¤ºã€‚åŒæ—¶é’ˆå¯¹ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œ Read viewçš„ç”Ÿæˆç­–ç•¥ä¸åŒï¼Œä¹Ÿå°±å®ç°äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚</li></ul><p><strong>Undo log å¤šç‰ˆæœ¬é“¾</strong></p><p>æ¯æ¡æ•°æ®éƒ½æœ‰ä¸¤ä¸ªéšè—å­—æ®µ:</p><ul><li>trx_id: äº‹åŠ¡id,è®°å½•æœ€è¿‘ä¸€æ¬¡æ›´æ–°è¿™æ¡æ•°æ®çš„äº‹åŠ¡id.</li><li>roll_pointer: å›æ»šæŒ‡é’ˆ,æŒ‡å‘ä¹‹å‰ç”Ÿæˆçš„undo log</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/3914ba59208c40a1816d7aa616bdb00c.png" alt="image.png"></p><p>æ¯ä¸€æ¡æ•°æ®éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬,ç‰ˆæœ¬ä¹‹é—´é€šè¿‡undo logé“¾æ¡è¿›è¡Œè¿æ¥é€šè¿‡è¿™æ ·çš„è®¾è®¡æ–¹å¼,å¯ä»¥ä¿è¯æ¯ä¸ªäº‹åŠ¡æäº¤çš„æ—¶å€™,ä¸€æ—¦éœ€è¦å›æ»šæ“ä½œ,å¯ä»¥ä¿è¯åŒä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°æ¯”å½“å‰ç‰ˆæœ¬æ›´æ—©æäº¤çš„å€¼,ä¸èƒ½çœ‹åˆ°æ›´æ™šæäº¤çš„å€¼ã€‚</p><p><strong>ReadView</strong></p><p>Read Viewæ˜¯ InnoDB åœ¨å®ç° MVCC æ—¶ç”¨åˆ°çš„ä¸€è‡´æ€§è¯»è§†å›¾ï¼Œå³ consistent read viewï¼Œç”¨äºæ”¯æŒ RCï¼ˆRead Committedï¼Œè¯»æäº¤ï¼‰å’Œ RRï¼ˆRepeatable Readï¼Œå¯é‡å¤è¯»ï¼‰éš”ç¦»çº§åˆ«çš„å®ç°.</p><p>Read Viewç®€å•ç†è§£å°±æ˜¯å¯¹æ•°æ®åœ¨æŸä¸ªæ—¶åˆ»çš„çŠ¶æ€æ‹æˆç…§ç‰‡è®°å½•ä¸‹æ¥ã€‚é‚£ä¹ˆä¹‹åè·å–æŸæ—¶åˆ»çš„æ•°æ®æ—¶å°±è¿˜æ˜¯åŸæ¥çš„ç…§ç‰‡ä¸Šçš„æ•°æ®ï¼Œæ˜¯ä¸ä¼šå˜çš„.</p><p>Read Viewä¸­æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰4ä¸ª:</p><ul><li><code>m_ids</code> : ç”¨æ¥è¡¨ç¤ºMySQLä¸­å“ªäº›äº‹åŠ¡æ­£åœ¨æ‰§è¡Œ,ä½†æ˜¯æ²¡æœ‰æäº¤.</li><li><code>min_trx_id</code>: å°±æ˜¯m_idsé‡Œæœ€å°çš„å€¼.</li><li><code>max_trx_id</code> : ä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„äº‹åŠ¡idå€¼,ä¹Ÿå°±æ˜¯æœ€å¤§äº‹åŠ¡id</li><li><code>creator_trx_id</code>: å°±æ˜¯ä½ è¿™ä¸ªäº‹åŠ¡çš„id</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/10f8a6842fd14b5fa3c510f54bcfac20.png" alt="image.png"></p><p>å½“ä¸€ä¸ªäº‹åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡ŒæŸ¥è¯¢sqlæ—¶ï¼Œä¼šç”Ÿæˆä¸€è‡´æ€§è§†å›¾ read-viewï¼ˆå¿«ç…§ï¼‰ï¼ŒæŸ¥è¯¢æ—¶ä» undo log ä¸­æœ€æ–°çš„ä¸€æ¡è®°å½•å¼€å§‹è·Ÿ read-view åšå¯¹æ¯”ï¼Œå¦‚æœä¸ç¬¦åˆæ¯”è¾ƒè§„åˆ™ï¼Œå°±æ ¹æ®å›æ»šæŒ‡é’ˆå›æ»šåˆ°ä¸Šä¸€æ¡è®°å½•ç»§ç»­æ¯”è¾ƒï¼Œç›´åˆ°å¾—åˆ°ç¬¦åˆæ¯”è¾ƒæ¡ä»¶çš„æŸ¥è¯¢ç»“æœã€‚</p><p><strong>Read Viewåˆ¤æ–­è®°å½•æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„è§„åˆ™å¦‚ä¸‹</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/29c8f326cf8a484dad8da5e9c157c217.png" alt="image.png"></p><p>1.å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨ç»¿è‰²éƒ¨åˆ†ï¼ˆtrx_id &lt; min_idï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬æ˜¯å·²æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œå¯è¯»ã€‚<br>2.å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨çº¢è‰²éƒ¨åˆ†ï¼ˆtrx_id &gt; max_idï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬æ˜¯ç”±å°†æ¥å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œä¸å¯è¯»ã€‚</p><ol start="3"><li><p>å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨é»„è‰²éƒ¨åˆ†ï¼ˆmin_id &lt;= trx_id &lt;= max_idï¼‰ï¼Œåˆ™åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p></li><li><p>è‹¥å½“å‰è®°å½•çš„äº‹åŠ¡idåœ¨æœªæäº¤äº‹åŠ¡çš„æ•°ç»„ä¸­ï¼Œåˆ™æ­¤æ¡è®°å½•ä¸å¯è¯»ï¼›</p></li><li><p>è‹¥å½“å‰è®°å½•çš„äº‹åŠ¡idä¸åœ¨æœªæäº¤äº‹åŠ¡çš„æ•°ç»„ä¸­ï¼Œåˆ™æ­¤æ¡è®°å½•å¯è¯»ã€‚</p></li></ol><p>RC å’Œ RR éš”ç¦»çº§åˆ«éƒ½æ˜¯ç”± MVCC å®ç°ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><ul><li>RC éš”ç¦»çº§åˆ«æ—¶ï¼Œread-view æ˜¯æ¯æ¬¡æ‰§è¡Œ select è¯­å¥æ—¶éƒ½ç”Ÿæˆä¸€ä¸ªï¼›</li><li>RR éš”ç¦»çº§åˆ«æ—¶ï¼Œread-view æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œ select è¯­å¥æ—¶ç”Ÿæˆä¸€ä¸ªï¼ŒåŒä¸€äº‹åŠ¡ä¸­åé¢çš„æ‰€æœ‰ select è¯­å¥éƒ½å¤ç”¨è¿™ä¸ª read-view ã€‚</li></ul><h1>33.Repeatable Read è§£å†³äº†å¹»è¯»é—®é¢˜å—ï¼Ÿ</h1><p>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å®šä¹‰ï¼š ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸è¿‡ç†è®ºä¸Šä¼šå‡ºç°å¹»è¯»ï¼Œç®€å•çš„è¯´å¹»è¯»æŒ‡çš„çš„å½“ç”¨æˆ·è¯»å–æŸä¸€èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆåœ¨è¯¥èŒƒå›´æ’å…¥äº†æ–°è¡Œï¼Œå½“ç”¨æˆ·åœ¨è¯»å–è¯¥èŒƒå›´çš„æ•°æ®æ—¶ä¼šå‘ç°æœ‰æ–°çš„å¹»å½±è¡Œã€‚</p><p><strong>æ³¨æ„åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„æŸ¥è¯¢æ˜¯å¿«ç…§è¯»ï¼Œæ˜¯ä¸ä¼šçœ‹åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®çš„ã€‚å› æ­¤ï¼Œ å¹»è¯»åœ¨â€œå½“å‰è¯»â€ä¸‹æ‰ä¼šå‡ºç°ï¼ˆæŸ¥è¯¢è¯­å¥æ·»åŠ for updateï¼Œè¡¨ç¤ºå½“å‰è¯»ï¼‰ï¼›</strong></p><p>åœ¨ MVCC å¹¶å‘æ§åˆ¶ä¸­ï¼Œè¯»æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤ç±»: å¿«ç…§è¯»ï¼ˆ<code>Snapshot Read</code>ï¼‰ä¸å½“å‰è¯» ï¼ˆ<code>Current Read</code>ï¼‰ã€‚</p><ul><li>å¿«ç…§è¯»<br>å¿«ç…§è¯»æ˜¯æŒ‡è¯»å–æ•°æ®æ—¶ä¸æ˜¯è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯åŸºäºå†å²ç‰ˆæœ¬è¯»å–çš„ä¸€ä¸ªå¿«ç…§ä¿¡æ¯ï¼ˆmysqlè¯»å–undo logå†å²ç‰ˆæœ¬) ï¼Œå¿«ç…§è¯»å¯ä»¥ä½¿æ™®é€šçš„SELECT è¯»å–æ•°æ®æ—¶ä¸ç”¨å¯¹è¡¨æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä»è€Œè§£å†³äº†å› ä¸ºå¯¹æ•°æ®åº“è¡¨çš„åŠ é”è€Œå¯¼è‡´çš„ä¸¤ä¸ªå¦‚ä¸‹é—®é¢˜<ol><li>è§£å†³äº†å› åŠ é”å¯¼è‡´çš„ä¿®æ”¹æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¯»å–é—®é¢˜.</li><li>è§£å†³äº†å› åŠ é”å¯¼è‡´è¯»å–æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„é—®é¢˜.</li></ol></li><li>å½“å‰è¯»<br>å½“å‰è¯»æ˜¯è¯»å–çš„æ•°æ®åº“æœ€æ–°çš„æ•°æ®ï¼Œå½“å‰è¯»å’Œå¿«ç…§è¯»ä¸åŒï¼Œå› ä¸ºè¦è¯»å–æœ€æ–°çš„æ•°æ®è€Œä¸”è¦ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œæ‰€ä»¥å½“å‰è¯»æ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”çš„ï¼ˆ<code>æ’å…¥/æ›´æ–°/åˆ é™¤æ“ä½œï¼Œå±äºå½“å‰è¯»ï¼Œéœ€è¦åŠ é”</code>   , <code>select for update</code> ä¸ºå½“å‰è¯»ï¼‰</li></ul><p>è¡¨ç»“æ„</p><table><thead><tr><th>id</th><th>key</th><th>value</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>å‡è®¾ select * from where value=1 for updateï¼Œåªåœ¨è¿™ä¸€è¡ŒåŠ é”ï¼ˆæ³¨æ„è¿™åªæ˜¯å‡è®¾ï¼‰ï¼Œå…¶å®ƒè¡Œä¸åŠ é”ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°å¦‚ä¸‹åœºæ™¯ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/8b7a527b9b804c649088d8f19f0d298a.png" alt="image.png"></p><p>Session Açš„ä¸‰æ¬¡æŸ¥è¯¢Q1-Q3éƒ½æ˜¯select * from where value=1 for updateï¼ŒæŸ¥è¯¢çš„value=1çš„æ‰€æœ‰rowã€‚</p><ul><li>T1ï¼šQ1åªè¿”å›ä¸€è¡Œ(1,1,1)ï¼›</li><li>T2ï¼šsession Bæ›´æ–°id=0çš„valueä¸º1ï¼Œæ­¤æ—¶è¡¨tä¸­value=1çš„æ•°æ®æœ‰ä¸¤è¡Œ</li><li>T3ï¼šQ2è¿”å›ä¸¤è¡Œ(0,0,1),(1,1,1)</li><li>T4ï¼šsession Cæ’å…¥ä¸€è¡Œ(6,6,1)ï¼Œæ­¤æ—¶è¡¨tä¸­value=1çš„æ•°æ®æœ‰ä¸‰è¡Œ</li><li>T5ï¼šQ3è¿”å›ä¸‰è¡Œ(0,0,1),(1,1,1),(6,6,1)</li><li>T6ï¼šsession Aäº‹ç‰©commitã€‚</li></ul><p>å…¶ä¸­Q3è¯»åˆ°value=1è¿™ä¸€æ ·çš„ç°è±¡ï¼Œå°±ç§°ä¹‹ä¸ºå¹»è¯»ï¼Œ<strong>å¹»è¯»æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢åŒä¸€ä¸ªèŒƒå›´çš„æ—¶å€™ï¼Œåä¸€æ¬¡æŸ¥è¯¢çœ‹åˆ°äº†å‰ä¸€æ¬¡æŸ¥è¯¢æ²¡æœ‰çœ‹åˆ°çš„è¡Œ</strong>ã€‚</p><p>å…ˆå¯¹â€œå¹»è¯»â€åšå‡ºå¦‚ä¸‹è§£é‡Šï¼š</p><ul><li>è¦è®¨è®ºã€Œå¯é‡å¤è¯»ã€éš”ç¦»çº§åˆ«çš„å¹»è¯»ç°è±¡ï¼Œæ˜¯è¦å»ºç«‹åœ¨ã€Œå½“å‰è¯»ã€çš„æƒ…å†µä¸‹ï¼Œè€Œä¸æ˜¯å¿«ç…§è¯»,å› ä¸ºåœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„æŸ¥è¯¢æ˜¯å¿«ç…§è¯»ï¼Œæ˜¯ä¸ä¼šçœ‹åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®çš„ã€‚</li></ul><p><strong>Next-key Lock é”</strong></p><p>äº§ç”Ÿå¹»è¯»çš„åŸå› æ˜¯ï¼Œè¡Œé”åªèƒ½é”ä½è¡Œï¼Œä½†æ˜¯æ–°æ’å…¥è®°å½•è¿™ä¸ªåŠ¨ä½œï¼Œè¦æ›´æ–°çš„æ˜¯è®°å½•ä¹‹é—´çš„â€œé—´éš™â€ã€‚å› æ­¤ï¼ŒInnodb å¼•æ“ä¸ºäº†è§£å†³ã€Œå¯é‡å¤è¯»ã€éš”ç¦»çº§åˆ«ä½¿ç”¨ã€Œå½“å‰è¯»ã€è€Œé€ æˆçš„å¹»è¯»é—®é¢˜ï¼Œå°±å¼•å‡ºäº† next-key é”ï¼Œå°±æ˜¯è®°å½•é”å’Œé—´éš™é”çš„ç»„åˆã€‚</p><ul><li>RecordLocké”ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ã€‚ï¼ˆè®°å½•é”ï¼ŒRCã€RRéš”ç¦»çº§åˆ«éƒ½æ”¯æŒï¼‰</li><li>GapLocké”ï¼šé—´éš™é”ï¼Œé”å®šç´¢å¼•è®°å½•é—´éš™(ä¸åŒ…æ‹¬è®°å½•æœ¬èº«)ï¼Œç¡®ä¿ç´¢å¼•è®°å½•çš„é—´éš™ä¸å˜ã€‚ï¼ˆèŒƒå›´é”ï¼ŒRRéš”ç¦»çº§åˆ«æ”¯æŒï¼‰</li><li>Next-key Lock é”ï¼šè®°å½•é”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶ä¸”é”ä½æ•°æ®å‰åèŒƒå›´ã€‚ï¼ˆè®°å½•é”+èŒƒå›´é”ï¼ŒRRéš”ç¦»çº§åˆ«æ”¯æŒï¼‰</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/45e0e29471574cf4b2d271caa8344369.png" alt="image.png"></p><p><strong>æ€»ç»“</strong></p><ul><li>RRéš”ç¦»çº§åˆ«ä¸‹é—´éš™é”æ‰æœ‰æ•ˆï¼ŒRCéš”ç¦»çº§åˆ«ä¸‹æ²¡æœ‰é—´éš™é”ï¼›</li><li>RRéš”ç¦»çº§åˆ«ä¸‹ä¸ºäº†è§£å†³â€œå¹»è¯»â€é—®é¢˜ï¼šâ€œå¿«ç…§è¯»â€ä¾é MVCCæ§åˆ¶ï¼Œâ€œå½“å‰è¯»â€é€šè¿‡é—´éš™é”è§£å†³ï¼›</li><li>é—´éš™é”å’Œè¡Œé”åˆç§°next-key lockï¼Œæ¯ä¸ªnext-key lockæ˜¯å‰å¼€åé—­åŒºé—´ï¼›</li><li>é—´éš™é”çš„å¼•å…¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŒæ ·è¯­å¥é”ä½æ›´å¤§çš„èŒƒå›´ï¼Œå½±å“å¹¶å‘åº¦ã€‚</li></ul><h1>34.è¯·è¯´ä¸€ä¸‹æ•°æ®åº“é”çš„ç§ç±»ï¼Ÿ</h1><p><strong>MySQLæ•°æ®åº“ç”±äºå…¶è‡ªèº«æ¶æ„çš„ç‰¹ç‚¹,å­˜åœ¨å¤šç§æ•°æ®å­˜å‚¨å¼•æ“, MySQLä¸­ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ã€‚</strong></p><ul><li><strong>MyISAM</strong>å’Œ<strong>MEMORY</strong>å­˜å‚¨å¼•æ“é‡‡ç”¨çš„è¡¨çº§é”ï¼Œ</li><li><strong>InnoDB</strong>å­˜å‚¨å¼•æ“æ—¢æ”¯æŒè¡Œçº§é”ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”ï¼Œé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨è¡Œçº§é”ã€‚</li><li><strong>BDB</strong>é‡‡ç”¨çš„æ˜¯é¡µé¢é”ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”</li></ul><p><strong>æŒ‰ç…§æ•°æ®æ“ä½œçš„ç±»å‹åˆ†</strong></p><ul><li>è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚</li><li>å†™é”ï¼ˆæ’ä»–é”ï¼‰ï¼šå½“å‰å†™æ“ä½œæ²¡æœ‰å®Œæˆå‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚</li></ul><p><strong>æŒ‰ç…§æ•°æ®æ“ä½œçš„ç²’åº¦åˆ†</strong></p><ul><li>è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚</li><li>è¡Œçº§é”ï¼š å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</li><li>é¡µé¢é”ï¼šå¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬</li></ul><p><strong>æŒ‰ç…§æ“ä½œæ€§èƒ½å¯åˆ†ä¸ºä¹è§‚é”å’Œæ‚²è§‚é”</strong></p><ul><li>ä¹è§‚é”ï¼šä¸€èˆ¬çš„å®ç°æ–¹å¼æ˜¯å¯¹è®°å½•æ•°æ®ç‰ˆæœ¬è¿›è¡Œæ¯”å¯¹ï¼Œåœ¨æ•°æ®æ›´æ–°æäº¤çš„æ—¶å€™æ‰ä¼šè¿›è¡Œå†²çªæ£€æµ‹ï¼Œå¦‚æœå‘ç°å†²çªäº†ï¼Œåˆ™æç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li><li>æ‚²è§‚é”ï¼šåœ¨å¯¹ä¸€æ¡æ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…åŒæ—¶è¢«å…¶ä»–äººä¿®æ”¹ï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹å‰å…ˆé”å®šï¼Œå†ä¿®æ”¹çš„æ§åˆ¶æ–¹å¼ã€‚å…±äº«é”å’Œæ’ä»–é”æ˜¯æ‚²è§‚é”çš„ä¸åŒå®ç°ï¼Œä½†éƒ½å±äºæ‚²è§‚é”èŒƒç•´ã€‚</li></ul><h1>35.è¯·è¯´ä¸€ä¸‹å…±äº«é”å’Œæ’ä»–é”ï¼Ÿ</h1><p><strong>è¡Œçº§é”åˆ†ä¸ºå…±äº«é”å’Œæ’ä»–é”ä¸¤ç§ã€‚</strong></p><p>è¡Œé”çš„æ˜¯mysqlé”ä¸­ç²’åº¦æœ€å°çš„ä¸€ç§é”ï¼Œå› ä¸ºé”çš„ç²’åº¦å¾ˆå°ï¼Œæ‰€ä»¥å‘ç”Ÿèµ„æºäº‰æŠ¢çš„æ¦‚ç‡ä¹Ÿæœ€å°ï¼Œå¹¶å‘æ€§èƒ½æœ€å¤§ï¼Œä½†æ˜¯ä¹Ÿä¼šé€ æˆæ­»é”ï¼Œæ¯æ¬¡åŠ é”å’Œé‡Šæ”¾é”çš„å¼€é”€ä¹Ÿä¼šå˜å¤§ã€‚</p><p><strong>ä½¿ç”¨MySQLè¡Œçº§é”çš„ä¸¤ä¸ªå‰æ</strong></p><ul><li>ä½¿ç”¨ innoDB å¼•æ“</li><li>å¼€å¯äº‹åŠ¡ (éš”ç¦»çº§åˆ«ä¸º <code>Repeatable Read</code>)</li></ul><p><strong>InnoDBè¡Œé”çš„ç±»å‹</strong></p><ul><li><strong>å…±äº«é”</strong>ï¼ˆSï¼‰ï¼šå½“äº‹åŠ¡å¯¹æ•°æ®åŠ ä¸Šå…±äº«é”å, å…¶ä»–ç”¨æˆ·å¯ä»¥å¹¶å‘è¯»å–æ•°æ®ï¼Œä½†ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ˆè·å–æ•°æ®ä¸Šçš„æ’ä»–é”ï¼‰ï¼Œç›´åˆ°å·²é‡Šæ”¾æ‰€æœ‰å…±äº«é”ã€‚</li><li><strong>æ’ä»–é”</strong>ï¼ˆXï¼‰ï¼šå¦‚æœäº‹åŠ¡Tå¯¹æ•°æ®AåŠ ä¸Šæ’ä»–é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡ä¸èƒ½å†å¯¹æ•°æ®AåŠ ä»»ä»»ä½•ç±»å‹çš„å°é”ã€‚è·å‡†æ’ä»–é”çš„äº‹åŠ¡æ—¢èƒ½è¯»æ•°æ®ï¼Œåˆèƒ½ä¿®æ”¹æ•°æ®ã€‚</li></ul><p><strong>åŠ é”çš„æ–¹å¼</strong></p><ul><li>InnoDBå¼•æ“é»˜è®¤æ›´æ–°è¯­å¥ï¼Œ<strong>update,delete,insert éƒ½ä¼šè‡ªåŠ¨ç»™æ¶‰åŠåˆ°çš„æ•°æ®åŠ ä¸Šæ’ä»–é”</strong>ï¼Œselectè¯­å¥é»˜è®¤ä¸ä¼šåŠ ä»»ä½•é”ç±»å‹ï¼Œå¦‚æœè¦åŠ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼:</li><li>åŠ å…±äº«é”ï¼ˆSï¼‰ï¼šselect * from table_name where â€¦ <strong>lock in share mode</strong>;</li><li>åŠ æ’ä»–é”ï¼ˆxï¼‰ï¼šselect * from table_name where â€¦ <strong>for update</strong>;</li></ul><p><strong>é”å…¼å®¹</strong></p><ul><li>å…±äº«é”åªèƒ½å…¼å®¹å…±äº«é”, ä¸å…¼å®¹æ’å®ƒé”</li><li>æ’å®ƒé”äº’æ–¥å…±äº«é”å’Œå…¶å®ƒæ’å®ƒé”</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/8c5348a34dad4631a3113a75b7b6fcf5.png" alt="image.png"></p><h1>36.InnoDB çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h1><p>I<strong>nnoDBè¡Œé”æ˜¯é€šè¿‡å¯¹ç´¢å¼•æ•°æ®é¡µä¸Šçš„è®°å½•åŠ é”å®ç°çš„</strong>ï¼Œä¸»è¦å®ç°ç®—æ³•æœ‰ 3 ç§ï¼šRecord Lockã€Gap Lock å’Œ Next-key Lockã€‚</p><ul><li><strong>RecordLocké”ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ã€‚ï¼ˆè®°å½•é”ï¼ŒRCã€RRéš”ç¦»çº§åˆ«éƒ½æ”¯æŒï¼‰</strong></li><li><strong>GapLocké”ï¼šé—´éš™é”ï¼Œé”å®šç´¢å¼•è®°å½•é—´éš™ï¼Œç¡®ä¿ç´¢å¼•è®°å½•çš„é—´éš™ä¸å˜ã€‚ï¼ˆèŒƒå›´é”ï¼ŒRRéš”ç¦»çº§åˆ«æ”¯æŒï¼‰</strong></li><li><strong>Next-key Lock é”ï¼šè®°å½•é”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶ä¸”é”ä½æ•°æ®å‰åèŒƒå›´ã€‚ï¼ˆè®°å½•é”+èŒƒå›´é”ï¼ŒRRéš”ç¦»çº§åˆ«æ”¯æŒï¼‰</strong></li></ul><blockquote><p>æ³¨æ„ï¼š InnoDBè¿™ç§è¡Œé”å®ç°ç‰¹ç‚¹æ„å‘³ç€ï¼šåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”</p></blockquote><p><strong>åœ¨RRéš”ç¦»çº§åˆ«ï¼ŒInnoDBå¯¹äºè®°å½•åŠ é”è¡Œä¸ºéƒ½æ˜¯å…ˆé‡‡ç”¨Next-Key Lockï¼Œä½†æ˜¯å½“SQLæ“ä½œå«æœ‰å”¯ä¸€ç´¢å¼•æ—¶ï¼ŒInnodbä¼šå¯¹Next-Key Lockè¿›è¡Œä¼˜åŒ–ï¼Œé™çº§ä¸ºRecordLockï¼Œä»…é”ä½ç´¢å¼•æœ¬èº«è€ŒéèŒƒå›´ã€‚</strong></p><p>å„ç§æ“ä½œåŠ é”çš„ç‰¹ç‚¹</p><p>1ï¼‰select â€¦ from è¯­å¥ï¼šInnoDBå¼•æ“é‡‡ç”¨MVCCæœºåˆ¶å®ç°éé˜»å¡è¯»ï¼Œæ‰€ä»¥å¯¹äºæ™®é€šçš„selectè¯­å¥ï¼ŒInnoDBä¸åŠ é”</p><p>2ï¼‰select â€¦ from lock in share modeè¯­å¥ï¼šè¿½åŠ äº†å…±äº«é”ï¼ŒInnoDBä¼šä½¿ç”¨Next-Key Locké”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸ºRecordLocké”ã€‚</p><p>3ï¼‰select â€¦ from for updateè¯­å¥ï¼šè¿½åŠ äº†æ’ä»–é”ï¼ŒInnoDBä¼šä½¿ç”¨Next-Key Locké”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸ºRecordLocké”ã€‚</p><p>4ï¼‰update â€¦ where è¯­å¥ï¼šInnoDBä¼šä½¿ç”¨Next-Key Locké”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸ºRecordLocké”ã€‚</p><p>5ï¼‰delete â€¦ where è¯­å¥ï¼šInnoDBä¼šä½¿ç”¨Next-Key Locké”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸ºRecordLocké”ã€‚</p><p>6ï¼‰insertè¯­å¥ï¼šInnoDBä¼šåœ¨å°†è¦æ’å…¥çš„é‚£ä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ’ä»–çš„RecordLocké”ã€‚</p><p><strong>ä¸‹é¢ä»¥â€œupdate t1 set name=â€˜lisiâ€™ where id=10â€æ“ä½œä¸ºä¾‹ï¼Œä¸¾ä¾‹å­åˆ†æä¸‹ InnoDB å¯¹ä¸åŒç´¢å¼•çš„åŠ é”è¡Œä¸ºï¼Œä»¥RRéš”ç¦»çº§åˆ«ä¸ºä¾‹ã€‚</strong></p><ol><li><p>ä¸»é”®åŠ é”</p><p>åŠ é”è¡Œä¸ºï¼šä»…åœ¨id=10çš„ä¸»é”®ç´¢å¼•è®°å½•ä¸ŠåŠ Xé”ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/beb8ed434aa349e789b59c553a9030bc.png" alt="image.png"></p></li><li><p>å”¯ä¸€é”®åŠ é”</p><p>åŠ é”è¡Œä¸ºï¼šç°åœ¨å”¯ä¸€ç´¢å¼•idä¸ŠåŠ Xé”ï¼Œç„¶ååœ¨id=10çš„ä¸»é”®ç´¢å¼•è®°å½•ä¸ŠåŠ Xé”ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/f0787ff46f15443f9e7d14b8a50ee784.png" alt="image.png"></p></li><li><p>éå”¯ä¸€é”®åŠ é”</p><p>åŠ é”è¡Œä¸ºï¼šå¯¹æ»¡è¶³id=10æ¡ä»¶çš„è®°å½•å’Œä¸»é”®åˆ†åˆ«åŠ Xé”ï¼Œç„¶ååœ¨(6,c)-(10,b)ã€(10,b)-(10,d)ã€(10,d)-(11,f)èŒƒå›´åˆ†åˆ«åŠ Gap Lockã€‚</p></li></ol><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/ea4aeac3a77a45488d8f1227e9f83d05.png" alt="image.png"></p><ol start="4"><li><p>æ— ç´¢å¼•åŠ é”</p><p>åŠ é”è¡Œä¸ºï¼šè¡¨é‡Œæ‰€æœ‰è¡Œå’Œé—´éš™éƒ½ä¼šåŠ Xé”ã€‚ï¼ˆå½“æ²¡æœ‰ç´¢å¼•æ—¶ï¼Œä¼šå¯¼è‡´å…¨è¡¨é”å®šï¼Œå› ä¸ºInnoDBå¼•æ“é”æœºåˆ¶æ˜¯åŸºäºç´¢å¼•å®ç°çš„è®°å½•é”å®šï¼‰ã€‚</p></li></ol><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/8b90b13b82a44cd9a013596c04f5e3f9.png" alt="image.png"></p><h1>37.å¹¶å‘äº‹åŠ¡ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜</h1><p>äº‹åŠ¡å¹¶å‘å¤„ç†å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>æ›´æ–°ä¸¢å¤±<br>å½“ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡æ›´æ–°åŒä¸€è¡Œè®°å½•ï¼Œä¼šäº§ç”Ÿæ›´æ–°ä¸¢å¤±ç°è±¡ã€‚å¯ä»¥åˆ†ä¸ºå›æ»šè¦†ç›–å’Œæäº¤è¦†ç›–ã€‚<ul><li>å›æ»šè¦†ç›–ï¼šä¸€ä¸ªäº‹åŠ¡å›æ»šæ“ä½œï¼ŒæŠŠå…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®ç»™è¦†ç›–äº†ã€‚</li><li>æäº¤è¦†ç›–ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤æ“ä½œï¼ŒæŠŠå…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®ç»™è¦†ç›–äº†ã€‚</li></ul></li><li>è„è¯»<br>ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹ä½†æœªæäº¤çš„æ•°æ®ã€‚</li><li>ä¸å¯é‡å¤è¯»<br>ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€è¡Œè®°å½•ä¸ä¸€è‡´ï¼Œåé¢è¯»å–çš„è·Ÿå‰é¢è¯»å–çš„ä¸ä¸€è‡´ã€‚</li><li>å¹»è¯»<br>ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æŒ‰ç›¸åŒæ¡ä»¶æŸ¥è¯¢ï¼Œç»“æœä¸ä¸€è‡´ã€‚åç»­æŸ¥è¯¢çš„ç»“æœå’Œé¢å‰æŸ¥è¯¢ç»“æœä¸åŒï¼Œå¤šäº†æˆ–å°‘äº†å‡ è¡Œè®°å½•ã€‚</li></ul><p>â€œæ›´æ–°ä¸¢å¤±â€ã€â€è„è¯»â€ã€â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€ç­‰å¹¶å‘äº‹åŠ¡é—®é¢˜ï¼Œå…¶å®éƒ½æ˜¯æ•°æ®åº“ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒMySQLæ•°æ®åº“æ˜¯é€šè¿‡äº‹åŠ¡éš”ç¦»çº§åˆ«æ¥è§£å†³çš„ï¼Œæ•°æ®åº“ç³»ç»Ÿæä¾›äº†ä»¥ä¸‹ 4 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ä¾›ç”¨æˆ·é€‰æ‹©ã€‚</p><p>![](file:///Users/congqing/Downloads/%2002_%E6%8E%88%E8%AF%BE%E8%B5%84%E6%96%99/MySQL/MySQL%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%8E%E4%BC%98%E5%8C%96%EF%BC%88%E4%B8%8A%EF%BC%89/images/mysql-2-2.png?lastModify=1673086096)<img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/6950c072d1a743a5934510ccbe06e3ec.png" alt="image.png"></p><ul><li><strong>è¯»æœªæäº¤</strong><br>Read Uncommitted è¯»æœªæäº¤ï¼šè§£å†³äº†å›æ»šè¦†ç›–ç±»å‹çš„æ›´æ–°ä¸¢å¤±ï¼Œä½†å¯èƒ½å‘ç”Ÿè„è¯»ç°è±¡ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚</li><li><strong>å·²æäº¤è¯»</strong><br>Read Committed è¯»å·²æäº¤ï¼šåªèƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­å·²ç»æäº¤çš„æ•°æ®ï¼Œè§£å†³äº†è„è¯»ã€‚ä½†å¯èƒ½å‘ç”Ÿä¸å¯é‡å¤è¯»ç°è±¡ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ã€‚</li><li><strong>å¯é‡å¤åº¦</strong><br>Repeatable Read å¯é‡å¤è¯»ï¼šè§£å†³äº†ä¸å¯é‡å¤è¯»ï¼Œå®ƒç¡®ä¿åŒä¸€äº‹åŠ¡çš„å¤šä¸ªå®ä¾‹åœ¨å¹¶å‘è¯»å–æ•°æ®æ—¶ï¼Œä¼šçœ‹åˆ°åŒæ ·çš„æ•°æ®è¡Œã€‚ä¸è¿‡ç†è®ºä¸Šä¼šå‡ºç°å¹»è¯»ï¼Œç®€å•çš„è¯´å¹»è¯»æŒ‡çš„çš„å½“ç”¨æˆ·è¯»å–æŸä¸€èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆåœ¨è¯¥èŒƒå›´æ’å…¥äº†æ–°è¡Œï¼Œå½“ç”¨æˆ·åœ¨è¯»å–è¯¥èŒƒå›´çš„æ•°æ®æ—¶ä¼šå‘ç°æœ‰æ–°çš„å¹»å½±è¡Œã€‚</li><li><strong>å¯ä¸²è¡ŒåŒ–</strong><br>æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥ä¸²è¡Œæ‰§è¡Œã€‚å®ƒé€šè¿‡å¼ºåˆ¶äº‹åŠ¡æ’åºï¼Œè§£å†³ç›¸äº’å†²çªï¼Œä»è€Œè§£å†³å¹»åº¦çš„é—®é¢˜ã€‚è¿™ä¸ªçº§åˆ«å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡çš„å’Œé”ç«äº‰ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li></ul><p>æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå¹¶å‘é—®é¢˜å°±è¶Šå°ï¼Œä½†æ˜¯å¹¶å‘å¤„ç†èƒ½åŠ›è¶Šå·®ï¼ˆä»£ä»·ï¼‰ã€‚è¯»æœªæäº¤éš”ç¦»çº§åˆ«æœ€ä½ï¼Œå¹¶å‘é—®é¢˜å¤šï¼Œä½†æ˜¯å¹¶å‘å¤„ç†èƒ½åŠ›å¥½ã€‚ä»¥åä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿç‰¹ç‚¹æ¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„éš”ç¦»çº§åˆ«ï¼Œæ¯”å¦‚å¯¹ä¸å¯é‡å¤è¯»å’Œå¹»è¯»å¹¶ä¸æ•æ„Ÿï¼Œæ›´å¤šå…³å¿ƒæ•°æ®åº“å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨Read Commitedéš”ç¦»çº§åˆ«ã€‚</p><p>äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé’ˆå¯¹Innodbå¼•æ“ï¼Œæ”¯æŒäº‹åŠ¡çš„åŠŸèƒ½ã€‚åƒMyISAMå¼•æ“æ²¡æœ‰å…³ç³»ã€‚</p><p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»</strong></p><p>1ï¼‰äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯SQL92å®šåˆ¶çš„æ ‡å‡†ï¼Œç›¸å½“äºäº‹åŠ¡å¹¶å‘æ§åˆ¶çš„æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹é”å’ŒMVCCä½¿ç”¨çš„å°è£…ï¼Œéšè—äº†åº•å±‚ç»†èŠ‚ã€‚</p><p>2ï¼‰é”æ˜¯æ•°æ®åº“å®ç°å¹¶å‘æ§åˆ¶çš„åŸºç¡€ï¼Œäº‹åŠ¡éš”ç¦»æ€§æ˜¯é‡‡ç”¨é”æ¥å®ç°ï¼Œå¯¹ç›¸åº”æ“ä½œåŠ ä¸åŒçš„é”ï¼Œå°±å¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶å¯¹æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œã€‚</p><p>3ï¼‰å¯¹ç”¨æˆ·æ¥è®²ï¼Œé¦–å…ˆé€‰æ‹©ä½¿ç”¨éš”ç¦»çº§åˆ«ï¼Œå½“é€‰ç”¨çš„éš”ç¦»çº§åˆ«ä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜æˆ–éœ€æ±‚æ—¶ï¼Œæ‰æœ‰å¿…è¦åœ¨å¼€å‘ä¸­æ‰‹åŠ¨çš„è®¾ç½®é”ã€‚</p><p>MySQLé»˜è®¤éš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»</p><p>Oracleã€SQLServeré»˜è®¤éš”ç¦»çº§åˆ«ï¼šè¯»å·²æäº¤</p><p>ä¸€èˆ¬ä½¿ç”¨æ—¶ï¼Œå»ºè®®é‡‡ç”¨é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œç„¶åå­˜åœ¨çš„ä¸€äº›å¹¶å‘é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ‚²è§‚é”ã€ä¹è§‚é”ç­‰å®ç°å¤„ç†ã€‚</p><h1>38.è¯´ä¸€ä¸‹MVCCå†…éƒ¨ç»†èŠ‚</h1><p><strong>MVCCæ¦‚å¿µ</strong></p><p>MVCCï¼ˆMulti Version Concurrency Controlï¼‰è¢«ç§°ä¸ºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œæ˜¯æŒ‡åœ¨æ•°æ®åº“ä¸­ä¸ºäº†å®ç°é«˜å¹¶å‘çš„æ•°æ®è®¿é—®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤šç‰ˆæœ¬å¤„ç†ï¼Œå¹¶é€šè¿‡äº‹åŠ¡çš„å¯è§æ€§æ¥ä¿è¯äº‹åŠ¡èƒ½çœ‹åˆ°è‡ªå·±åº”è¯¥çœ‹åˆ°çš„æ•°æ®ç‰ˆæœ¬ã€‚</p><blockquote><p>MVCCæœ€å¤§çš„å¥½å¤„æ˜¯è¯»ä¸åŠ é”ï¼Œè¯»å†™ä¸å†²çªã€‚åœ¨è¯»å¤šå†™å°‘çš„ç³»ç»Ÿåº”ç”¨ä¸­ï¼Œè¯»å†™ä¸å†²çªæ˜¯éå¸¸é‡è¦çš„ï¼Œæå¤§çš„æå‡ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°é˜¶æ®µå‡ ä¹æ‰€æœ‰çš„å…³ç³»å‹æ•°æ®åº“éƒ½æ”¯æŒ MVCC çš„åŸå› ï¼Œä¸è¿‡ç›®å‰MVCCåªåœ¨ Read Commited å’Œ Repeatable Read ä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹å·¥ä½œã€‚</p></blockquote><p>å›ç­”è¿™ä¸ªé¢è¯•é¢˜æ—¶ï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹çš„å‡ ä¸ªå…³é”®å†…å®¹ï¼š</p><p><strong>1ï¼‰è¡Œè®°å½•çš„ä¸‰ä¸ªéšè—å­—æ®µ</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/0f0c75f07cf5455c9f406e5b5ea6489c.png" alt="image.png"></p><ul><li><code>DB_ROW_ID</code> : å¦‚æœæ²¡æœ‰ä¸ºè¡¨æ˜¾å¼çš„å®šä¹‰ä¸»é”®ï¼Œå¹¶ä¸”è¡¨ä¸­ä¹Ÿæ²¡æœ‰å®šä¹‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆInnoDBä¼šè‡ªåŠ¨ä¸ºè¡¨æ·»åŠ ä¸€ä¸ªrow_idçš„éšè—åˆ—ä½œä¸ºä¸»é”®ã€‚</li><li><code>DB_TRX_ID</code> : äº‹åŠ¡ä¸­å¯¹æŸæ¡è®°å½•åšå¢åˆ æ”¹æ—¶,å°±ä¼šå°†è¿™ä¸ªäº‹åŠ¡çš„äº‹åŠ¡IDå†™å…¥åˆ°trx_idä¸­.</li><li><code>DB_ROLL_PTR</code>: å›æ»šæŒ‡é’ˆ,æŒ‡å‘undo logçš„æŒ‡é’ˆ</li></ul><p><strong>2ï¼‰Undo log å¤šç‰ˆæœ¬é“¾</strong></p><p>ä¸¾ä¾‹ï¼šäº‹åŠ¡ T-100 å’Œ T-120 å¯¹è¡¨ä¸­ id = 1 çš„æ•°æ®è¡Œåš update æ“ä½œï¼Œäº‹åŠ¡ T-130 è¿›è¡Œ select æ“ä½œï¼Œå³ä½¿ T-100 å·²ç»æäº¤ä¿®æ”¹ï¼Œä¸‰æ¬¡ select è¯­å¥çš„ç»“æœéƒ½æ˜¯â€œlisiâ€ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/d5dd8418f3a64bef8aa93bc815176584.png" alt="image.png"></p><ul><li>æ¯ä¸€æ¡æ•°æ®éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬,ç‰ˆæœ¬ä¹‹é—´é€šè¿‡undo logé“¾æ¡è¿›è¡Œè¿æ¥</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/776f222b82b142e2a219e8dccc828bd3.png" alt="image.png"></p><p><strong>3ï¼‰ReadView</strong></p><p>Read Viewæ˜¯ InnoDB åœ¨å®ç° MVCC æ—¶ç”¨åˆ°çš„ä¸€è‡´æ€§è¯»è§†å›¾ï¼Œå³ consistent read viewï¼Œç”¨äºæ”¯æŒ RCï¼ˆRead Committedï¼Œè¯»æäº¤ï¼‰å’Œ RRï¼ˆRepeatable Readï¼Œå¯é‡å¤è¯»ï¼‰éš”ç¦»çº§åˆ«çš„å®ç°.</p><p>Read Viewç®€å•ç†è§£å°±æ˜¯å¯¹æ•°æ®åœ¨æ¯ä¸ªæ—¶åˆ»çš„çŠ¶æ€æ‹æˆç…§ç‰‡è®°å½•ä¸‹æ¥ã€‚é‚£ä¹ˆä¹‹åè·å–æŸæ—¶åˆ»çš„æ•°æ®æ—¶å°±è¿˜æ˜¯åŸæ¥çš„ç…§ç‰‡ä¸Šçš„æ•°æ®ï¼Œæ˜¯ä¸ä¼šå˜çš„.</p><p>Read Viewä¸­æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰4ä¸ª:</p><ul><li><code>m_ids</code> : ç”¨æ¥è¡¨ç¤ºMySQLä¸­å“ªäº›äº‹åŠ¡æ­£åœ¨æ‰§è¡Œ,ä½†æ˜¯æ²¡æœ‰æäº¤.</li><li><code>min_trx_id</code>: å°±æ˜¯m_idsé‡Œæœ€å°çš„å€¼.</li><li><code>max_trx_id</code> : ä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„äº‹åŠ¡idå€¼,ä¹Ÿå°±æ˜¯æœ€å¤§äº‹åŠ¡id</li><li><code>creator_trx_id</code>: å°±æ˜¯ä½ è¿™ä¸ªäº‹åŠ¡çš„id</li></ul><p><strong>é€šè¿‡Read Viewåˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„æ–¹å¼æ€»ç»“:</strong></p><ul><li>trx_id = creator_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,ä¸readviewä¸­çš„creator_trx_idå€¼ç›¸åŒ,è¡¨æ˜å½“å‰äº‹åŠ¡åœ¨è®¿é—®è‡ªå·±ä¿®æ”¹è¿‡çš„è®°å½•,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</li><li>trx_id &lt; min_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å°äºreadviewä¸­çš„min_trx_idå€¼,è¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”Ÿæˆreadviewå‰å·²ç»æäº¤,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</li><li>trx_id &gt;= max_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å¤§äºæˆ–ç­‰äºreadviewä¸­çš„max_trx_idå€¼,è¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”Ÿæˆreadviewåæ‰å¼€å¯,è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</li><li>trx_id &gt; min_trx_id &amp;&amp; trx_id &lt; max_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å€¼åœ¨readviewçš„min_trx_idå’Œmax_trx_idä¹‹é—´ï¼Œå°±éœ€è¦åˆ¤æ–­trx_idå±æ€§å€¼æ˜¯ä¸æ˜¯åœ¨m_idsåˆ—è¡¨ä¸­ï¼Ÿ<ul><li>åœ¨ï¼šè¯´æ˜åˆ›å»ºreadviewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡è¿˜æ˜¯æ´»è·ƒçš„,è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«è®¿é—®</li><li>ä¸åœ¨ï¼šè¯´æ˜åˆ›å»ºreadviewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡å·²ç»è¢«æäº¤,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«è®¿é—®</li></ul></li></ul><p><strong>ä½•æ—¶ç”ŸæˆReadViewå¿«ç…§</strong></p><ul><li>åœ¨ <strong>è¯»å·²æäº¤ï¼ˆRead Committedï¼Œ ç®€ç§°RCï¼‰</strong> éš”ç¦»çº§åˆ«ä¸‹ï¼Œ<strong>æ¯ä¸€æ¬¡</strong>è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ªReadVIewã€‚</li><li>åœ¨ <strong>å¯é‡å¤è¯»</strong> ï¼ˆRepeatable Readï¼Œç®€ç§°RRï¼‰éš”ç¦»çº§åˆ«ä¸‹ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåªåœ¨ <strong>ç¬¬ä¸€æ¬¡</strong>è¯»å–æ•°æ®å‰ç”Ÿæˆä¸€ä¸ªReadVIewã€‚</li></ul><p><strong>4ï¼‰å¿«ç…§è¯»ï¼ˆ<code>Snapshot Read</code>ï¼‰ä¸å½“å‰è¯» ï¼ˆ<code>Current Read</code>ï¼‰</strong></p><p>åœ¨ MVCC å¹¶å‘æ§åˆ¶ä¸­ï¼Œè¯»æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤ç±»: å¿«ç…§è¯»ï¼ˆ<code>Snapshot Read</code>ï¼‰ä¸å½“å‰è¯» ï¼ˆ<code>Current Read</code>ï¼‰ã€‚</p><ul><li>å¿«ç…§è¯»<br>å¿«ç…§è¯»æ˜¯æŒ‡è¯»å–æ•°æ®æ—¶ä¸æ˜¯è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯åŸºäºå†å²ç‰ˆæœ¬è¯»å–çš„ä¸€ä¸ªå¿«ç…§ä¿¡æ¯ï¼ˆmysqlè¯»å–undo logå†å²ç‰ˆæœ¬) ï¼Œå¿«ç…§è¯»å¯ä»¥ä½¿æ™®é€šçš„SELECT è¯»å–æ•°æ®æ—¶ä¸ç”¨å¯¹è¡¨æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä»è€Œè§£å†³äº†å› ä¸ºå¯¹æ•°æ®åº“è¡¨çš„åŠ é”è€Œå¯¼è‡´çš„ä¸¤ä¸ªå¦‚ä¸‹é—®é¢˜<ol><li>è§£å†³äº†å› åŠ é”å¯¼è‡´çš„ä¿®æ”¹æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¯»å–é—®é¢˜.</li><li>è§£å†³äº†å› åŠ é”å¯¼è‡´è¯»å–æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„é—®é¢˜.</li></ol></li><li>å½“å‰è¯»<br>å½“å‰è¯»æ˜¯è¯»å–çš„æ•°æ®åº“æœ€æ–°çš„æ•°æ®ï¼Œå½“å‰è¯»å’Œå¿«ç…§è¯»ä¸åŒï¼Œå› ä¸ºè¦è¯»å–æœ€æ–°çš„æ•°æ®è€Œä¸”è¦ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œæ‰€ä»¥å½“å‰è¯»æ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”çš„ï¼ˆ<code>Update delete insert select ....lock in share mode</code>   , <code>select for update</code> ä¸ºå½“å‰è¯»ï¼‰</li></ul><p><strong>æ€»ç»“ä¸€ä¸‹</strong></p><ul><li>å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå†™-å†™æ“ä½œæœ‰åŠ é”è§£å†³æ–¹æ¡ˆï¼Œä½†ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒInnoDBå­˜å‚¨å¼•æ“æä¾›MVCCï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³è¯»-å†™ï¼Œå†™-è¯»æ“ä½œä¸‹ä¸åŠ é”ä»èƒ½å®‰å…¨è¿›è¡Œã€‚</li><li>MVCCçš„è¿‡ç¨‹ï¼Œæœ¬è´¨å°±æ˜¯è®¿é—®ç‰ˆæœ¬é“¾ï¼Œå¹¶åˆ¤æ–­å“ªä¸ªç‰ˆæœ¬å¯è§çš„è¿‡ç¨‹ã€‚è¯¥åˆ¤æ–­ç®—æ³•æ˜¯é€šè¿‡ç‰ˆæœ¬ä¸Šçš„trx_idä¸å¿«ç…§ReadViewçš„è‹¥å¹²ä¸ªä¿¡æ¯è¿›è¡Œå¯¹æ¯”ã€‚</li><li>å¿«ç…§ç”Ÿæˆçš„æ—¶æœºå› éš”ç¦»çº§åˆ«ä¸åŒï¼Œè¯»å·²æäº¤éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯ä¸€æ¬¡è¯»å–å‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¿«ç…§ReadViewï¼›è€Œå¯é‡å¤è¯»åˆ™ä»…åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç¬¬ä¸€æ¬¡è¯»å–å‰ç”Ÿæˆä¸€ä¸ªå¿«ç…§ã€‚</li></ul><h1>39.è¯´ä¸€ä¸‹MySQLæ­»é”çš„åŸå› å’Œå¤„ç†æ–¹æ³•</h1><p><strong>1) è¡¨çš„æ­»é”</strong></p><p><strong>äº§ç”ŸåŸå› :</strong></p><p>ç”¨æˆ·Aè®¿é—®è¡¨Aï¼ˆé”ä½äº†è¡¨Aï¼‰ï¼Œç„¶ååˆè®¿é—®è¡¨Bï¼›å¦ä¸€ä¸ªç”¨æˆ·Bè®¿é—®è¡¨Bï¼ˆé”ä½äº†è¡¨Bï¼‰ï¼Œç„¶åä¼å›¾è®¿é—®è¡¨Aï¼›è¿™æ—¶ç”¨æˆ·Aç”±äºç”¨æˆ·Bå·²ç»é”ä½è¡¨Bï¼Œå®ƒå¿…é¡»ç­‰å¾…ç”¨æˆ·Bé‡Šæ”¾è¡¨Bæ‰èƒ½ç»§ç»­ï¼ŒåŒæ ·ç”¨æˆ·Bè¦ç­‰ç”¨æˆ·Aé‡Šæ”¾è¡¨Aæ‰èƒ½ç»§ç»­ï¼Œè¿™å°±æ­»é”å°±äº§ç”Ÿäº†ã€‚</p><p>ç”¨æˆ·Aâ€“ã€‹Aè¡¨ï¼ˆè¡¨é”ï¼‰â€“ã€‹Bè¡¨ï¼ˆè¡¨é”ï¼‰</p><p>ç”¨æˆ·Bâ€“ã€‹Bè¡¨ï¼ˆè¡¨é”ï¼‰â€“ã€‹Aè¡¨ï¼ˆè¡¨é”ï¼‰</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>è¿™ç§æ­»é”æ¯”è¾ƒå¸¸è§ï¼Œæ˜¯ç”±äºç¨‹åºçš„BUGäº§ç”Ÿçš„ï¼Œé™¤äº†è°ƒæ•´çš„ç¨‹åºçš„é€»è¾‘æ²¡æœ‰å…¶å®ƒçš„åŠæ³•ã€‚</p><p>ä»”ç»†åˆ†æç¨‹åºçš„é€»è¾‘ï¼Œå¯¹äºæ•°æ®åº“çš„å¤šè¡¨æ“ä½œæ—¶ï¼Œå°½é‡æŒ‰ç…§ç›¸åŒçš„é¡ºåºè¿›è¡Œå¤„ç†ï¼Œå°½é‡é¿å…åŒæ—¶é”å®šä¸¤ä¸ªèµ„æºï¼Œå¦‚æ“ä½œAå’ŒBä¸¤å¼ è¡¨æ—¶ï¼Œæ€»æ˜¯æŒ‰å…ˆAåBçš„é¡ºåºå¤„ç†ï¼Œ å¿…é¡»åŒæ—¶é”å®šä¸¤ä¸ªèµ„æºæ—¶ï¼Œè¦ä¿è¯åœ¨ä»»ä½•æ—¶åˆ»éƒ½åº”è¯¥æŒ‰ç…§ç›¸åŒçš„é¡ºåºæ¥é”å®šèµ„æºã€‚</p><p><strong>2) è¡Œçº§é”æ­»é”</strong></p><p><strong>äº§ç”ŸåŸå› 1ï¼š</strong></p><p>å¦‚æœåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œäº†ä¸€æ¡æ²¡æœ‰ç´¢å¼•æ¡ä»¶çš„æŸ¥è¯¢ï¼Œå¼•å‘å…¨è¡¨æ‰«æï¼ŒæŠŠè¡Œçº§é”ä¸Šå‡ä¸ºå…¨è¡¨è®°å½•é”å®šï¼ˆç­‰ä»·äºè¡¨çº§é”ï¼‰ï¼Œå¤šä¸ªè¿™æ ·çš„äº‹åŠ¡æ‰§è¡Œåï¼Œå°±å¾ˆå®¹æ˜“äº§ç”Ÿæ­»é”å’Œé˜»å¡ï¼Œæœ€ç»ˆåº”ç”¨ç³»ç»Ÿä¼šè¶Šæ¥è¶Šæ…¢ï¼Œå‘ç”Ÿé˜»å¡æˆ–æ­»é”ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ1ï¼š</strong></p><p>SQLè¯­å¥ä¸­ä¸è¦ä½¿ç”¨å¤ªå¤æ‚çš„å…³è”å¤šè¡¨çš„æŸ¥è¯¢ï¼›ä½¿ç”¨explainâ€œæ‰§è¡Œè®¡åˆ’&quot;å¯¹SQLè¯­å¥è¿›è¡Œåˆ†æï¼Œå¯¹äºæœ‰å…¨è¡¨æ‰«æå’Œå…¨è¡¨é”å®šçš„SQLè¯­å¥ï¼Œå»ºç«‹ç›¸åº”çš„ç´¢å¼•è¿›è¡Œä¼˜åŒ–ã€‚</p><p><strong>äº§ç”ŸåŸå› 2ï¼š</strong></p><ul><li><p>ä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«æƒ³æ‹¿åˆ°å¯¹æ–¹æŒæœ‰çš„é”ï¼Œäº’ç›¸ç­‰å¾…ï¼Œäºæ˜¯äº§ç”Ÿæ­»é”</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/44213d7bf7b34ccbb340fcf6adb1fb98.png" alt="image.png"></p></li></ul><p><strong>äº§ç”ŸåŸå› 3</strong>ï¼šæ¯ä¸ªäº‹åŠ¡åªæœ‰ä¸€ä¸ªSQL,ä½†æ˜¯æœ‰äº›æƒ…å†µè¿˜æ˜¯ä¼šå‘ç”Ÿæ­»é”.</p><ol><li>äº‹åŠ¡1,ä»nameç´¢å¼•å‡ºå‘ , è¯»åˆ°çš„[hdc, 1],  [hdc, 6]å‡æ»¡è¶³æ¡ä»¶, ä¸ä»…ä¼šåŠ nameç´¢å¼•ä¸Šçš„è®°å½•Xé”, è€Œä¸”ä¼šåŠ èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•Xé”, åŠ é”é¡ºåºä¸ºå…ˆ[1,hdc,100], å[6,hdc,10]</li><li>äº‹åŠ¡2ï¼Œä»pubtimeç´¢å¼•å‡ºå‘ï¼Œ[10,6],[100,1]å‡æ»¡è¶³è¿‡æ»¤æ¡ä»¶ï¼ŒåŒæ ·ä¹Ÿä¼šåŠ èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•Xé”ï¼ŒåŠ é”é¡ºåºä¸º[6,hdc,10]ï¼Œå[1,hdc,100]ã€‚</li><li>ä½†æ˜¯åŠ é”æ—¶å‘ç°è·Ÿäº‹åŠ¡1çš„åŠ é”é¡ºåºæ­£å¥½ç›¸åï¼Œä¸¤ä¸ªSessionæ°å¥½éƒ½æŒæœ‰äº†ç¬¬ä¸€æŠŠé”ï¼Œè¯·æ±‚åŠ ç¬¬äºŒæŠŠé”ï¼Œæ­»é”å°±å‘ç”Ÿäº†ã€‚</li></ol><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/02a98ff1858547d79bb11523a6abd225.png" alt="image.png"></p><p><strong>è§£å†³æ–¹æ¡ˆ:</strong> å¦‚ä¸Šé¢çš„åŸå› 2å’ŒåŸå› 3,  å¯¹ç´¢å¼•åŠ é”é¡ºåºçš„ä¸ä¸€è‡´å¾ˆå¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥ï¼Œå°½é‡ä»¥ç›¸åŒçš„é¡ºåºæ¥è®¿é—®ç´¢å¼•è®°å½•å’Œè¡¨ã€‚åœ¨ç¨‹åºä»¥æ‰¹é‡æ–¹å¼å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœäº‹å…ˆå¯¹æ•°æ®æ’åºï¼Œä¿è¯æ¯ä¸ªçº¿ç¨‹æŒ‰å›ºå®šçš„é¡ºåºæ¥å¤„ç†è®°å½•ï¼Œä¹Ÿå¯ä»¥å¤§å¤§é™ä½å‡ºç°æ­»é”çš„å¯èƒ½ï¼›</p><h1>40.ä»‹ç»ä¸€ä¸‹MySQLçš„ä½“ç³»æ¶æ„ï¼Ÿ</h1><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/bfe09e96eb434e98a1f5870ba779d576.png" alt="image.png"></p><p><strong>MySQL Serveræ¶æ„è‡ªé¡¶å‘ä¸‹å¤§è‡´å¯ä»¥åˆ†ç½‘ç»œè¿æ¥å±‚ã€æœåŠ¡å±‚ã€å­˜å‚¨å¼•æ“å±‚å’Œç³»ç»Ÿæ–‡ä»¶å±‚ã€‚</strong></p><p><strong>ä¸€ã€ç½‘ç»œè¿æ¥å±‚</strong></p><ul><li><strong>å®¢æˆ·ç«¯è¿æ¥å™¨ï¼ˆClient Connectorsï¼‰ï¼šæä¾›ä¸MySQLæœåŠ¡å™¨å»ºç«‹çš„æ”¯æŒã€‚ç›®å‰å‡ ä¹æ”¯æŒæ‰€æœ‰ä¸»æµçš„æœåŠ¡ç«¯ç¼–ç¨‹æŠ€æœ¯ï¼Œä¾‹å¦‚å¸¸è§çš„ Javaã€Cã€Pythonã€.NETç­‰ï¼Œå®ƒä»¬é€šè¿‡å„è‡ªAPIæŠ€æœ¯ä¸MySQLå»ºç«‹è¿æ¥ã€‚</strong></li></ul><p><strong>äºŒã€æœåŠ¡å±‚ï¼ˆMySQL Serverï¼‰</strong></p><p><strong>æœåŠ¡å±‚æ˜¯MySQL Serverçš„æ ¸å¿ƒï¼Œä¸»è¦åŒ…å«ç³»ç»Ÿç®¡ç†å’Œæ§åˆ¶å·¥å…·ã€è¿æ¥æ± ã€SQLæ¥å£ã€è§£æå™¨ã€æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œç¼“å­˜å…­ä¸ªéƒ¨åˆ†ã€‚</strong></p><ul><li><p><strong>è¿æ¥æ± ï¼ˆConnection Poolï¼‰</strong>ï¼šè´Ÿè´£å­˜å‚¨å’Œç®¡ç†å®¢æˆ·ç«¯ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ç®¡ç†ä¸€ä¸ªè¿æ¥ã€‚</p></li><li><p><strong>ç³»ç»Ÿç®¡ç†å’Œæ§åˆ¶å·¥å…·ï¼ˆManagement Services &amp; Utilitiesï¼‰</strong>ï¼šä¾‹å¦‚å¤‡ä»½æ¢å¤ã€å®‰å…¨ç®¡ç†ã€é›†ç¾¤ç®¡ç†ç­‰</p></li><li><p><strong>SQLæ¥å£ï¼ˆSQL Interfaceï¼‰</strong>ï¼šç”¨äºæ¥å—å®¢æˆ·ç«¯å‘é€çš„å„ç§SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›ç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„ç»“æœã€‚æ¯”å¦‚DMLã€DDLã€å­˜å‚¨è¿‡ç¨‹ã€è§†å›¾ã€è§¦å‘å™¨ç­‰ã€‚</p></li><li><p><strong>è§£æå™¨ï¼ˆParserï¼‰</strong>ï¼šè´Ÿè´£å°†è¯·æ±‚çš„SQLè§£æç”Ÿæˆä¸€ä¸ª&quot;è§£ææ ‘&quot;ã€‚ç„¶åæ ¹æ®ä¸€äº›MySQLè§„åˆ™è¿›ä¸€æ­¥æ£€æŸ¥è§£ææ ‘æ˜¯å¦åˆæ³•ã€‚</p></li><li><p><strong>æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰</strong>ï¼šå½“â€œè§£ææ ‘â€é€šè¿‡è§£æå™¨è¯­æ³•æ£€æŸ¥åï¼Œå°†äº¤ç”±ä¼˜åŒ–å™¨å°†å…¶è½¬åŒ–æˆæ‰§è¡Œè®¡åˆ’ï¼Œç„¶åä¸å­˜å‚¨å¼•æ“äº¤äº’ã€‚</p><blockquote><p><strong>select uid,name from user where gender=1;</strong></p><p><strong>é€‰å–â€“ã€‹æŠ•å½±â€“ã€‹è”æ¥ ç­–ç•¥</strong></p><p><strong>1ï¼‰selectå…ˆæ ¹æ®whereè¯­å¥è¿›è¡Œé€‰å–ï¼Œå¹¶ä¸æ˜¯æŸ¥è¯¢å‡ºå…¨éƒ¨æ•°æ®å†è¿‡æ»¤</strong></p><p><strong>2ï¼‰selectæŸ¥è¯¢æ ¹æ®uidå’Œnameè¿›è¡Œå±æ€§æŠ•å½±ï¼Œå¹¶ä¸æ˜¯å–å‡ºæ‰€æœ‰å­—æ®µ</strong></p><p><strong>3ï¼‰å°†å‰é¢é€‰å–å’ŒæŠ•å½±è”æ¥èµ·æ¥æœ€ç»ˆç”ŸæˆæŸ¥è¯¢ç»“æœ</strong></p></blockquote></li><li><p><strong>ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰</strong>ï¼š ç¼“å­˜æœºåˆ¶æ˜¯ç”±ä¸€ç³»åˆ—å°ç¼“å­˜ç»„æˆçš„ã€‚æ¯”å¦‚è¡¨ç¼“å­˜ï¼Œè®°å½•ç¼“å­˜ï¼Œæƒé™ç¼“å­˜ï¼Œå¼•æ“ç¼“å­˜ç­‰ã€‚å¦‚æœæŸ¥è¯¢ç¼“å­˜æœ‰å‘½ä¸­çš„æŸ¥è¯¢ç»“æœï¼ŒæŸ¥è¯¢è¯­å¥å°±å¯ä»¥ç›´æ¥å»æŸ¥è¯¢ç¼“å­˜ä¸­å–æ•°æ®ã€‚</p></li></ul><p><strong>ä¸‰ã€å­˜å‚¨å¼•æ“å±‚ï¼ˆPluggable Storage Enginesï¼‰</strong></p><p><strong>å­˜å‚¨å¼•æ“è´Ÿè´£MySQLä¸­æ•°æ®çš„å­˜å‚¨ä¸æå–ï¼Œä¸åº•å±‚ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚MySQLå­˜å‚¨å¼•æ“æ˜¯æ’ä»¶å¼çš„ï¼ŒæœåŠ¡å™¨ä¸­çš„æŸ¥è¯¢æ‰§è¡Œå¼•æ“é€šè¿‡æ¥å£ä¸å­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ï¼Œæ¥å£å±è”½äº†ä¸åŒå­˜å‚¨å¼•æ“ä¹‹é—´çš„å·®å¼‚ ã€‚ç°åœ¨æœ‰å¾ˆå¤šç§å­˜å‚¨å¼•æ“ï¼Œå„æœ‰å„çš„ç‰¹ç‚¹ï¼Œæœ€å¸¸è§çš„æ˜¯MyISAMå’ŒInnoDBã€‚</strong></p><p><strong>å››ã€ç³»ç»Ÿæ–‡ä»¶å±‚ï¼ˆFile Systemï¼‰</strong></p><p><strong>è¯¥å±‚è´Ÿè´£å°†æ•°æ®åº“çš„æ•°æ®å’Œæ—¥å¿—å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ï¼Œæ˜¯æ–‡ä»¶çš„ç‰©ç†å­˜å‚¨å±‚ã€‚ä¸»è¦åŒ…å«æ—¥å¿—æ–‡ä»¶ï¼Œæ•°æ®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œpid æ–‡ä»¶ï¼Œsocket æ–‡ä»¶ç­‰ã€‚</strong></p><ul><li><strong>æ—¥å¿—æ–‡ä»¶</strong><ul><li><strong>é”™è¯¯æ—¥å¿—ï¼ˆError logï¼‰</strong><br><strong>é»˜è®¤å¼€å¯ï¼Œshow variables like â€˜%log_error%â€™</strong></li><li><strong>é€šç”¨æŸ¥è¯¢æ—¥å¿—ï¼ˆGeneral query logï¼‰</strong><br><strong>è®°å½•ä¸€èˆ¬æŸ¥è¯¢è¯­å¥ï¼Œshow variables like â€˜%general%â€™;</strong></li><li><strong>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinary logï¼‰</strong><br><strong>è®°å½•äº†å¯¹MySQLæ•°æ®åº“æ‰§è¡Œçš„æ›´æ”¹æ“ä½œï¼Œå¹¶ä¸”è®°å½•äº†è¯­å¥çš„å‘ç”Ÿæ—¶é—´ã€æ‰§è¡Œæ—¶é•¿ï¼›ä½†æ˜¯å®ƒä¸è®°å½•selectã€showç­‰ä¸ä¿®æ”¹æ•°æ®åº“çš„SQLã€‚ä¸»è¦ç”¨äºæ•°æ®åº“æ¢å¤å’Œä¸»ä»å¤åˆ¶ã€‚</strong><br><strong>show variables like â€˜%log_bin%â€™; //æ˜¯å¦å¼€å¯</strong><br><strong>show variables like â€˜%binlog%â€™; //å‚æ•°æŸ¥çœ‹</strong><br><strong>show binary logs;//æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶</strong></li><li><strong>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆSlow query logï¼‰</strong><br><strong>è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…æ—¶çš„æŸ¥è¯¢SQLï¼Œé»˜è®¤æ˜¯10ç§’ã€‚</strong><br><strong>show variables like â€˜%slow_query%â€™; //æ˜¯å¦å¼€å¯</strong><br><strong>show variables like â€˜%long_query_time%â€™; //æ—¶é•¿</strong></li></ul></li><li><strong>é…ç½®æ–‡ä»¶</strong><br><strong>ç”¨äºå­˜æ”¾MySQLæ‰€æœ‰çš„é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œæ¯”å¦‚my.cnfã€my.iniç­‰ã€‚</strong></li><li><strong>æ•°æ®æ–‡ä»¶</strong><ul><li><strong>db.opt æ–‡ä»¶ï¼šè®°å½•è¿™ä¸ªåº“çš„é»˜è®¤ä½¿ç”¨çš„å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™ã€‚</strong></li><li><strong>frm æ–‡ä»¶ï¼šå­˜å‚¨ä¸è¡¨ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆmetaï¼‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„çš„å®šä¹‰ä¿¡æ¯ç­‰ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä¼šæœ‰ä¸€ä¸ªfrm æ–‡ä»¶ã€‚</strong></li><li><strong>MYD æ–‡ä»¶ï¼šMyISAM å­˜å‚¨å¼•æ“ä¸“ç”¨ï¼Œå­˜æ”¾ MyISAM è¡¨çš„æ•°æ®ï¼ˆdata)ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä¼šæœ‰ä¸€ä¸ª .MYD æ–‡ä»¶ã€‚</strong></li><li><strong>MYI æ–‡ä»¶ï¼šMyISAM å­˜å‚¨å¼•æ“ä¸“ç”¨ï¼Œå­˜æ”¾ MyISAM è¡¨çš„ç´¢å¼•ç›¸å…³ä¿¡æ¯ï¼Œæ¯ä¸€å¼  MyISAM è¡¨å¯¹åº”ä¸€ä¸ª .MYI æ–‡ä»¶ã€‚</strong></li><li><strong>ibdæ–‡ä»¶å’Œ IBDATA æ–‡ä»¶ï¼šå­˜æ”¾ InnoDB çš„æ•°æ®æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç´¢å¼•ï¼‰ã€‚InnoDB å­˜å‚¨å¼•æ“æœ‰ä¸¤ç§è¡¨ç©ºé—´æ–¹å¼ï¼šç‹¬äº«è¡¨ç©ºé—´å’Œå…±äº«è¡¨ç©ºé—´ã€‚ç‹¬äº«è¡¨ç©ºé—´ä½¿ç”¨ .ibd æ–‡ä»¶æ¥å­˜æ”¾æ•°æ®ï¼Œä¸”æ¯ä¸€å¼  InnoDB è¡¨å¯¹åº”ä¸€ä¸ª .ibd æ–‡ä»¶ã€‚å…±äº«è¡¨ç©ºé—´ä½¿ç”¨ .ibdata æ–‡ä»¶ï¼Œæ‰€æœ‰è¡¨å…±åŒä½¿ç”¨ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼Œè‡ªè¡Œé…ç½®ï¼‰.ibdata æ–‡ä»¶ã€‚</strong></li><li><strong>ibdata1 æ–‡ä»¶ï¼šç³»ç»Ÿè¡¨ç©ºé—´æ•°æ®æ–‡ä»¶ï¼Œå­˜å‚¨è¡¨å…ƒæ•°æ®ã€Undoæ—¥å¿—ç­‰ ã€‚</strong></li><li><strong>ib_logfile0ã€ib_logfile1 æ–‡ä»¶ï¼šRedo log æ—¥å¿—æ–‡ä»¶ã€‚</strong></li></ul></li><li><strong>pid æ–‡ä»¶</strong><br><strong>pid æ–‡ä»¶æ˜¯ mysqld åº”ç”¨ç¨‹åºåœ¨ Unix/Linux ç¯å¢ƒä¸‹çš„ä¸€ä¸ªè¿›ç¨‹æ–‡ä»¶ï¼Œå’Œè®¸å¤šå…¶ä»– Unix/Linux æœåŠ¡ç«¯ç¨‹åºä¸€æ ·ï¼Œå®ƒå­˜æ”¾ç€è‡ªå·±çš„è¿›ç¨‹ idã€‚</strong></li><li><strong>socket æ–‡ä»¶</strong><br><strong>socket æ–‡ä»¶ä¹Ÿæ˜¯åœ¨ Unix/Linux ç¯å¢ƒä¸‹æ‰æœ‰çš„ï¼Œç”¨æˆ·åœ¨ Unix/Linux ç¯å¢ƒä¸‹å®¢æˆ·ç«¯è¿æ¥å¯ä»¥ä¸é€šè¿‡ TCP/IP ç½‘ç»œè€Œç›´æ¥ä½¿ç”¨ Unix Socket æ¥è¿æ¥ MySQLã€‚</strong></li></ul><h1>41.undo logã€redo logã€ bin logçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p><strong>undo log åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>undo logæ˜¯ä¸€ç§ç”¨äºæ’¤é”€å›é€€çš„æ—¥å¿—ï¼Œåœ¨æ•°æ®åº“äº‹åŠ¡å¼€å§‹ä¹‹å‰ï¼ŒMySQLä¼šå…ˆè®°å½•æ›´æ–°å‰çš„æ•°æ®åˆ° undo logæ—¥å¿—æ–‡ä»¶é‡Œé¢ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶æˆ–è€…æ•°æ®åº“å´©æºƒæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ undo logæ¥è¿›è¡Œå›é€€ã€‚</li><li>Undo Logäº§ç”Ÿå’Œé”€æ¯ï¼šUndo Logåœ¨äº‹åŠ¡å¼€å§‹å‰äº§ç”Ÿï¼›äº‹åŠ¡åœ¨æäº¤æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»åˆ é™¤undo logï¼Œinnodbä¼šå°†è¯¥äº‹åŠ¡å¯¹åº”çš„undo logæ”¾å…¥åˆ°åˆ é™¤åˆ—è¡¨ä¸­ï¼Œåé¢ä¼šé€šè¿‡åå°çº¿ç¨‹purge threadè¿›è¡Œå›æ”¶å¤„ç†ã€‚</li></ul><p><strong>æ³¨æ„: undo logä¹Ÿä¼šäº§ç”Ÿredo logï¼Œå› ä¸ºundo logä¹Ÿè¦å®ç°æŒä¹…æ€§ä¿æŠ¤ã€‚</strong></p><p><strong>undo logçš„ä½œç”¨</strong></p><ol><li><strong>æä¾›å›æ»šæ“ä½œã€undo logå®ç°äº‹åŠ¡çš„åŸå­æ€§ã€‘</strong><br>åœ¨æ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ä»…è®°å½•äº†redo logï¼Œè¿˜è®°å½•äº†ç›¸å¯¹åº”çš„undo logï¼Œå¦‚æœå› ä¸ºæŸäº›åŸå› å¯¼è‡´äº‹åŠ¡æ‰§è¡Œå¤±è´¥äº†ï¼Œå¯ä»¥å€ŸåŠ©undo logè¿›è¡Œå›æ»šã€‚<br><em>undo log å’Œ redo log è®°å½•ç‰©ç†æ—¥å¿—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯</em>é€»è¾‘æ—¥å¿—ã€‚å¯ä»¥è®¤ä¸ºå½“deleteä¸€æ¡è®°å½•æ—¶ï¼Œundo logä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„insertè®°å½•ï¼Œåä¹‹äº¦ç„¶ï¼Œå½“updateä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„updateè®°å½•ã€‚</li><li><strong>æä¾›å¤šç‰ˆæœ¬æ§åˆ¶(MVCC)ã€<em>undo logå®ç°å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰</em>ã€‘</strong><br>MVCCï¼Œå³å¤šç‰ˆæœ¬æ§åˆ¶ã€‚åœ¨MySQLæ•°æ®åº“InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œç”¨undo Logæ¥å®ç°å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶(MVCC)ã€‚å½“è¯»å–çš„æŸä¸€è¡Œè¢«å…¶ä»–äº‹åŠ¡é”å®šæ—¶ï¼Œå®ƒå¯ä»¥ä»undo logä¸­åˆ†æå‡ºè¯¥è¡Œè®°å½•ä»¥å‰çš„æ•°æ®ç‰ˆæœ¬æ˜¯æ€æ ·çš„ï¼Œä»è€Œè®©ç”¨æˆ·èƒ½å¤Ÿè¯»å–åˆ°å½“å‰äº‹åŠ¡æ“ä½œä¹‹å‰çš„æ•°æ®ã€å¿«ç…§è¯»ã€‘ã€‚</li></ol><p><strong>redo log åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>InnoDBå¼•æ“å¯¹æ•°æ®çš„æ›´æ–°ï¼Œæ˜¯å…ˆå°†æ›´æ–°è®°å½•å†™å…¥redo logæ—¥å¿—ï¼Œç„¶åä¼šåœ¨ç³»ç»Ÿç©ºé—²çš„æ—¶å€™æˆ–è€…æ˜¯æŒ‰ç…§è®¾å®šçš„æ›´æ–°ç­–ç•¥å†å°†æ—¥å¿—ä¸­çš„å†…å®¹æ›´æ–°åˆ°ç£ç›˜ä¹‹ä¸­ã€‚è¿™å°±æ˜¯æ‰€è°“çš„é¢„å†™å¼æŠ€æœ¯ï¼ˆWrite Ahead loggingï¼‰ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥å¤§å¤§å‡å°‘IOæ“ä½œçš„é¢‘ç‡ï¼Œæå‡æ•°æ®åˆ·æ–°çš„æ•ˆç‡ã€‚</li><li>redo logï¼šè¢«ç§°ä½œé‡åšæ—¥å¿—, åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²ï¼š <code>redo log buffer</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ç£ç›˜ä¸Šçš„æ—¥å¿—æ–‡ä»¶ï¼š <code>redo log file</code> ã€‚</li></ul><p><strong>redo logçš„ä½œç”¨</strong></p><ul><li>mysql æ¯æ‰§è¡Œä¸€æ¡ DML è¯­å¥ï¼Œå…ˆå°†è®°å½•å†™å…¥ redo log buffer ã€‚åç»­æŸä¸ªæ—¶é—´ç‚¹å†ä¸€æ¬¡æ€§å°†å¤šä¸ªæ“ä½œè®°å½•å†™åˆ° redo log file ã€‚å½“æ•…éšœå‘ç”Ÿè‡´ä½¿å†…å­˜æ•°æ®ä¸¢å¤±åï¼ŒInnoDBä¼šåœ¨é‡å¯æ—¶ï¼Œç»è¿‡é‡æ”¾ redoï¼Œå°†Pageæ¢å¤åˆ°å´©æºƒä¹‹å‰çš„çŠ¶æ€ <strong>é€šè¿‡Redo logå¯ä»¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ ã€‚</strong></li></ul><p><strong>bin logåŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>binlogæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“æ›´æ–°çš„SQLè¯­å¥ä¿¡æ¯ï¼Œä¾‹å¦‚æ›´æ”¹æ•°æ®åº“è¡¨å’Œæ›´æ”¹å†…å®¹çš„SQLè¯­å¥éƒ½ä¼šè®°å½•åˆ°binlogé‡Œï¼Œä½†æ˜¯ä¸ä¼šè®°å½•SELECTå’ŒSHOWè¿™ç±»æ“ä½œã€‚</li><li>binlogåœ¨MySQLçš„Serverå±‚å®ç°(å¼•æ“å…±ç”¨)</li><li>binlogä¸ºé€»è¾‘æ—¥å¿—,è®°å½•çš„æ˜¯ä¸€æ¡SQLè¯­å¥çš„åŸå§‹é€»è¾‘<ul><li>binlogä¸é™åˆ¶å¤§å°,è¿½åŠ å†™å…¥,ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—.</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œbinlogæ—¥å¿—æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ï¼Œä¸èƒ½ä½¿ç”¨æŸ¥çœ‹æ–‡æœ¬å·¥å…·çš„å‘½ä»¤ï¼ˆæ¯”å¦‚ï¼Œcatï¼Œviç­‰ï¼‰æŸ¥çœ‹ï¼Œè€Œä½¿ç”¨mysqlbinlogè§£ææŸ¥çœ‹ã€‚</li></ul></li></ul><p><strong>bin logçš„ä½œç”¨</strong></p><ol><li>ä¸»ä»å¤åˆ¶ï¼šåœ¨ä¸»åº“ä¸­å¼€å¯BinlogåŠŸèƒ½ï¼Œè¿™æ ·ä¸»åº“å°±å¯ä»¥æŠŠBinlogä¼ é€’ç»™ä»åº“ï¼Œä»åº“æ‹¿åˆ°Binlogåå®ç°æ•°æ®æ¢å¤è¾¾åˆ°ä¸»ä»æ•°æ®ä¸€è‡´æ€§ã€‚</li><li>æ•°æ®æ¢å¤ï¼šé€šè¿‡mysqlbinlogå·¥å…·æ¥æ¢å¤æ•°æ®ã€‚</li></ol><h1>42.redo logä¸undo logçš„æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ</h1><p><strong>redo logæŒä¹…åŒ–</strong></p><p>ç¼“å†²åŒºæ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ— æ³•ç›´æ¥å†™å…¥ç£ç›˜çš„ï¼Œä¸­é—´å¿…é¡»ç»è¿‡æ“ä½œç³»ç»Ÿç¼“å†²åŒº( OS Buffer )ã€‚å› æ­¤ï¼Œ redo log buffer å†™å…¥ redo logfile å®é™…ä¸Šæ˜¯å…ˆå†™å…¥ OS Bufferï¼Œç„¶åå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨ fsync() å°†å…¶åˆ·åˆ° redo log file.</p><p>Redo Buffer æŒä¹…åŒ–åˆ° redo log çš„ç­–ç•¥ï¼Œå¯é€šè¿‡ <code>Innodb_flush_log_at_trx_commit</code> è®¾ç½®ï¼š</p><table><thead><tr><th><strong>å‚æ•°å€¼</strong></th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0 (å»¶è¿Ÿå†™)</td><td>äº‹åŠ¡æäº¤æ—¶ä¸ä¼šå°† <code>redo log buffer</code>ä¸­æ—¥å¿—å†™å…¥åˆ° <code>os buffer</code>ï¼Œ è€Œæ˜¯æ¯ç§’å†™å…¥ <code>os buffer</code>å¹¶è°ƒç”¨ <code>fsync()</code>å†™å…¥åˆ° <code>redo log file</code>ä¸­ã€‚ ä¹Ÿå°±æ˜¯è¯´è®¾ç½®ä¸º0æ—¶æ˜¯(å¤§çº¦)æ¯ç§’åˆ·æ–°å†™å…¥åˆ°ç£ç›˜ä¸­çš„ï¼Œå½“ç³»ç»Ÿå´©æºƒï¼Œä¼šä¸¢å¤±1ç§’é’Ÿçš„æ•°æ®ã€‚</td></tr><tr><td>1  (å®æ—¶å†™,å®æ—¶åˆ·)</td><td>äº‹åŠ¡æ¯æ¬¡æäº¤éƒ½ä¼šå°† <code>redo log buffer</code>ä¸­çš„æ—¥å¿—å†™å…¥ <code>os buffer</code>å¹¶ è°ƒç”¨ <code>fsync()</code>åˆ·åˆ° <code>redo log file</code>ä¸­ã€‚è¿™ç§æ–¹å¼å³ä½¿ç³»ç»Ÿå´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±ä»»ä½•æ•°æ®ï¼Œä½†æ˜¯å› ä¸ºæ¯æ¬¡æäº¤éƒ½å†™å…¥ç£ç›˜ï¼ŒIOçš„æ€§èƒ½è¾ƒå·®ã€‚</td></tr><tr><td>2 (å®æ—¶å†™, å»¶æ—¶åˆ·)</td><td>æ¯æ¬¡æäº¤éƒ½ä»…å†™å…¥åˆ° <code>os buffer</code>ï¼Œç„¶åæ˜¯æ¯ç§’è°ƒç”¨ <code>fsync()</code>å°† <code>os buffer</code>ä¸­çš„æ—¥å¿—å†™å…¥åˆ° <code>redo log file</code>ã€‚</td></tr></tbody></table><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/b6fcf484cec943ba99ef0780844c79d2.png" alt="image.png"></p><p>ä¸€èˆ¬å»ºè®®é€‰æ‹©å–å€¼2ï¼Œå› ä¸º MySQL æŒ‚äº†æ•°æ®æ²¡æœ‰æŸå¤±ï¼Œæ•´ä¸ªæœåŠ¡å™¨æŒ‚äº†æ‰ä¼šæŸå¤±1ç§’çš„äº‹åŠ¡æäº¤æ•°æ®</p><p><strong>undo logæŒä¹…åŒ–</strong></p><p>MySQLä¸­çš„Undo Logä¸¥æ ¼çš„è®²ä¸æ˜¯Logï¼Œè€Œæ˜¯æ•°æ®ï¼Œå› æ­¤ä»–çš„ç®¡ç†å’Œè½ç›˜éƒ½è·Ÿæ•°æ®æ˜¯ä¸€æ ·çš„ï¼š</p><ul><li>Undoçš„ç£ç›˜ç»“æ„å¹¶ä¸æ˜¯é¡ºåºçš„ï¼Œè€Œæ˜¯åƒæ•°æ®ä¸€æ ·æŒ‰Pageç®¡ç†</li><li>Undoå†™å…¥æ—¶ï¼Œä¹Ÿåƒæ•°æ®ä¸€æ ·äº§ç”Ÿå¯¹åº”çš„Redo Log (å› ä¸ºundoä¹Ÿæ˜¯å¯¹é¡µé¢çš„ä¿®æ”¹ï¼Œè®°å½•undoè¿™ä¸ªæ“ä½œæœ¬èº«ä¹Ÿä¼šæœ‰å¯¹åº”çš„redo)ã€‚</li><li>Undoçš„Pageä¹Ÿåƒæ•°æ®ä¸€æ ·ç¼“å­˜åœ¨Buffer Poolä¸­ï¼Œè·Ÿæ•°æ®Pageä¸€èµ·åšLRUæ¢å…¥æ¢å‡ºï¼Œä»¥åŠåˆ·è„ã€‚Undo Pageçš„åˆ·è„ä¹Ÿåƒæ•°æ®ä¸€æ ·è¦ç­‰åˆ°å¯¹åº”çš„Redo Log è½ç›˜ä¹‹å</li></ul><p>å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œinnodbä¸ä¼šç«‹å³åˆ é™¤undo logï¼Œå› ä¸ºåç»­è¿˜å¯èƒ½ä¼šç”¨åˆ°undo logï¼Œå¦‚éš”ç¦»çº§åˆ«ä¸ºrepeatable readæ—¶ï¼Œäº‹åŠ¡è¯»å–çš„éƒ½æ˜¯å¼€å¯äº‹åŠ¡æ—¶çš„æœ€æ–°æäº¤è¡Œç‰ˆæœ¬ï¼Œåªè¦è¯¥äº‹åŠ¡ä¸ç»“æŸï¼Œè¯¥è¡Œç‰ˆæœ¬å°±ä¸èƒ½åˆ é™¤ï¼Œå³undo logä¸èƒ½åˆ é™¤ã€‚</p><p>ä½†æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°†è¯¥äº‹åŠ¡å¯¹åº”çš„undo logæ”¾å…¥åˆ°åˆ é™¤åˆ—è¡¨ä¸­ï¼Œæœªæ¥é€šè¿‡purgeæ¥åˆ é™¤ã€‚å¹¶ä¸”æäº¤äº‹åŠ¡æ—¶ï¼Œè¿˜ä¼šåˆ¤æ–­undo logåˆ†é…çš„é¡µæ˜¯å¦å¯ä»¥é‡ç”¨ï¼Œå¦‚æœå¯ä»¥é‡ç”¨ï¼Œåˆ™ä¼šåˆ†é…ç»™åé¢æ¥çš„äº‹åŠ¡ï¼Œé¿å…ä¸ºæ¯ä¸ªç‹¬ç«‹çš„äº‹åŠ¡åˆ†é…ç‹¬ç«‹çš„undo logé¡µè€Œæµªè´¹å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½ã€‚</p><h1>43.bin logä¸undo logçš„åŒºåˆ«ï¼Ÿ</h1><p><strong>1ï¼‰redo logæ˜¯InnoDBå¼•æ“ç‰¹æœ‰çš„ï¼›binlogæ˜¯MySQLçš„Serverå±‚å®ç°çš„ï¼Œæ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚</strong></p><p><strong>2ï¼‰redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œåœ¨XXXæ•°æ®é¡µä¸Šåšäº†XXXä¿®æ”¹â€ï¼›binlogæ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯åŸå§‹é€»è¾‘ï¼Œå…¶è®°å½•æ˜¯å¯¹åº”çš„SQLè¯­å¥ã€‚</strong></p><ul><li>ç‰©ç†æ—¥å¿—: è®°å½•çš„æ˜¯æ¯ä¸€ä¸ªpageé¡µä¸­å…·ä½“å­˜å‚¨çš„å€¼æ˜¯å¤šå°‘ï¼Œåœ¨è¿™ä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹.  æ¯”å¦‚: æŸä¸ªäº‹ç‰©å°†ç³»ç»Ÿè¡¨ç©ºé—´ä¸­çš„ç¬¬100ä¸ªé¡µé¢ä¸­åç§»é‡ä¸º1000å¤„çš„é‚£ä¸ªå­—èŠ‚çš„å€¼1æ”¹ä¸º2.</li><li>é€»è¾‘æ—¥å¿—: è®°å½•çš„æ˜¯æ¯ä¸€ä¸ªpageé¡µé¢ä¸­å…·ä½“æ•°æ®æ˜¯æ€ä¹ˆå˜åŠ¨çš„ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªå˜åŠ¨çš„è¿‡ç¨‹æˆ–SQLè¯­å¥çš„é€»è¾‘, æ¯”å¦‚: æŠŠä¸€ä¸ªpageé¡µä¸­çš„ä¸€ä¸ªæ•°æ®ä»1æ”¹ä¸º2ï¼Œå†ä»2æ”¹ä¸º3,é€»è¾‘æ—¥å¿—å°±ä¼šè®°å½•1-&gt;2,2-&gt;3è¿™ä¸ªæ•°æ®å˜åŒ–çš„è¿‡ç¨‹.</li></ul><p><strong>3ï¼‰redo logæ˜¯å¾ªç¯å†™çš„ï¼Œç©ºé—´ä¸€å®šä¼šç”¨å®Œï¼Œéœ€è¦write poså’Œcheck pointæ­é…ï¼›binlogæ˜¯è¿½åŠ å†™ï¼Œå†™åˆ°ä¸€å®šå¤§å°ä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—</strong></p><ul><li>Redo Log æ–‡ä»¶å†…å®¹æ˜¯ä»¥é¡ºåºå¾ªç¯çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œå†™æ»¡æ—¶åˆ™å›æº¯åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œè¦†ç›–å†™ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/70fa5785c2044d038e1e6d04b553028d.png" alt="image.png"></p><ul><li><strong>write pos</strong>: è¡¨ç¤ºæ—¥å¿—å½“å‰è®°å½•çš„ä½ç½®ï¼Œå½“ib_logfile_4å†™æ»¡åï¼Œä¼šä»ib_logfile_1ä»å¤´å¼€å§‹è®°å½•ï¼›</li><li><strong>check point</strong>: è¡¨ç¤ºå°†æ—¥å¿—è®°å½•çš„ä¿®æ”¹å†™è¿›ç£ç›˜ï¼Œå®Œæˆæ•°æ®è½ç›˜ï¼Œæ•°æ®è½ç›˜åcheckpointä¼šå°†æ—¥å¿—ä¸Šçš„ç›¸å…³è®°å½•æ“¦é™¤æ‰ï¼Œå³ <code>write pos -&gt; checkpoint</code>  ä¹‹é—´çš„éƒ¨åˆ†æ˜¯redo logç©ºç€çš„éƒ¨åˆ†ï¼Œç”¨äºè®°å½•æ–°çš„è®°å½•ï¼Œ<code>checkpoint -&gt; write pos</code> ä¹‹é—´æ˜¯redo log å¾…è½ç›˜çš„æ•°æ®ä¿®æ”¹è®°å½•</li><li>å¦‚æœ write pos è¿½ä¸Š checkpointï¼Œè¡¨ç¤ºå†™æ»¡ï¼Œè¿™æ—¶å€™ä¸èƒ½å†æ‰§è¡Œæ–°çš„æ›´æ–°ï¼Œå¾—åœä¸‹æ¥å…ˆæ“¦æ‰ä¸€äº›è®°å½•ï¼ŒæŠŠ checkpoint æ¨è¿›ä¸€ä¸‹ã€‚</li></ul><p><strong>3ï¼‰Redo Logä½œä¸ºæœåŠ¡å™¨å¼‚å¸¸å®•æœºåäº‹åŠ¡æ•°æ®è‡ªåŠ¨æ¢å¤ä½¿ç”¨ï¼ŒBinlogå¯ä»¥ä½œä¸ºä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚Binlogæ²¡æœ‰è‡ªåŠ¨crash-safeèƒ½åŠ›</strong></p><p>CrashSafeæŒ‡MySQLæœåŠ¡å™¨å®•æœºé‡å¯åï¼Œèƒ½å¤Ÿä¿è¯ï¼š</p><ul><li>æ‰€æœ‰å·²ç»æäº¤çš„äº‹åŠ¡çš„æ•°æ®ä»ç„¶å­˜åœ¨ã€‚</li><li>æ‰€æœ‰æ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„æ•°æ®è‡ªåŠ¨å›æ»šã€‚</li></ul><h1>44.MySQLçš„binlogæœ‰å‡ ç§æ—¥å¿—æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>binlogæ—¥å¿—æœ‰ä¸‰ç§æ¨¡å¼</p><p>1ï¼‰ROWï¼ˆrow-based replication, RBRï¼‰ï¼šæ—¥å¿—ä¸­ä¼šè®°å½•æ¯ä¸€è¡Œæ•°æ®è¢«ä¿®æ”¹çš„æƒ…å†µï¼Œç„¶ååœ¨slaveç«¯å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šèƒ½æ¸…æ¥šè®°å½•æ¯ä¸€ä¸ªè¡Œæ•°æ®çš„ä¿®æ”¹ç»†èŠ‚ï¼Œèƒ½å®Œå…¨å®ç°ä¸»ä»æ•°æ®åŒæ­¥å’Œæ•°æ®çš„æ¢å¤ã€‚è€Œä¸”ä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹å­˜å‚¨è¿‡ç¨‹æˆ–functionæ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ã€‚</li><li>ç¼ºç‚¹ï¼šæ‰¹é‡æ“ä½œï¼Œä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯alter tableä¼šè®©æ—¥å¿—é‡æš´æ¶¨ã€‚</li></ul><p>2ï¼‰STATMENTï¼ˆstatement-based replication, SBRï¼‰ï¼šè®°å½•æ¯ä¸€æ¡ä¿®æ”¹æ•°æ®çš„SQLè¯­å¥ï¼ˆæ‰¹é‡ä¿®æ”¹æ—¶ï¼Œè®°å½•çš„ä¸æ˜¯å•æ¡SQLè¯­å¥ï¼Œè€Œæ˜¯æ‰¹é‡ä¿®æ”¹çš„SQLè¯­å¥äº‹ä»¶ï¼‰, slaveåœ¨å¤åˆ¶çš„æ—¶å€™SQLè¿›ç¨‹ä¼šè§£ææˆå’ŒåŸæ¥masterç«¯æ‰§è¡Œè¿‡çš„ç›¸åŒçš„SQLå†æ¬¡æ‰§è¡Œã€‚ç®€ç§°SQLè¯­å¥å¤åˆ¶ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šæ—¥å¿—é‡å°ï¼Œå‡å°‘ç£ç›˜IOï¼Œæå‡å­˜å‚¨å’Œæ¢å¤é€Ÿåº¦</li><li>ç¼ºç‚¹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼Œæ¯”å¦‚last_insert_id()ã€now()ç­‰å‡½æ•°ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/b8e6f4dcef054331b143f57c748d9c58.png" alt="image.png"></p><p>3ï¼‰MIXEDï¼ˆmixed-based replication, MBRï¼‰ï¼šä»¥ä¸Šä¸¤ç§æ¨¡å¼çš„æ··åˆä½¿ç”¨ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨STATEMENTæ¨¡å¼ä¿å­˜binlogï¼Œå¯¹äºSTATEMENTæ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ROWæ¨¡å¼ä¿å­˜binlogï¼ŒMySQLä¼šæ ¹æ®æ‰§è¡Œçš„SQLè¯­å¥é€‰æ‹©å†™å…¥æ¨¡å¼ã€‚</p><p>ä¼ä¸šåœºæ™¯å¦‚ä½•é€‰æ‹©binlogçš„æ¨¡å¼</p><ol><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½ç›¸å¯¹å°‘ï¼ˆå­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€å‡½æ•°ï¼‰ã€‚é€‰æ‹©é»˜è®¤çš„è¯­å¥æ¨¡å¼ï¼ŒStatementã€‚</li><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½è¾ƒå¤šçš„ï¼Œå¯ä»¥é€‰æ‹©Mixedæ¨¡å¼ã€‚</li><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½è¾ƒå¤šï¼Œåˆå¸Œæœ›æ•°æ®æœ€å¤§åŒ–ä¸€è‡´ï¼Œæ­¤æ—¶æœ€å¥½Row æ¨¡å¼ï¼›ä½†æ˜¯è¦æ³¨æ„ï¼Œè¯¥æ¨¡å¼çš„binlogæ—¥å¿—é‡å¢é•¿éå¸¸å¿«.</li></ol><h1>45.mysql çº¿ä¸Šä¿®æ”¹å¤§è¡¨ç»“æ„æœ‰å“ªäº›é£é™©ï¼Ÿ</h1><p>åœ¨çº¿ä¿®æ”¹å¤§è¡¨çš„å¯èƒ½å½±å“</p><ul><li>åœ¨çº¿ä¿®æ”¹å¤§è¡¨çš„è¡¨ç»“æ„æ‰§è¡Œæ—¶é—´å¾€å¾€ä¸å¯é¢„ä¼°ï¼Œä¸€èˆ¬æ—¶é—´è¾ƒé•¿ã€‚</li><li>ç”±äºä¿®æ”¹è¡¨ç»“æ„æ˜¯è¡¨çº§é”ï¼Œå› æ­¤åœ¨ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼Œå½±å“è¡¨å†™å…¥æ“ä½œã€‚</li><li>å¦‚æœé•¿æ—¶é—´çš„ä¿®æ”¹è¡¨ç»“æ„ï¼Œä¸­é€”ä¿®æ”¹å¤±è´¥ï¼Œç”±äºä¿®æ”¹è¡¨ç»“æ„æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå› æ­¤å¤±è´¥åä¼šè¿˜åŸè¡¨ç»“æ„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¡¨éƒ½æ˜¯é”ç€ä¸å¯å†™å…¥ã€‚</li><li>ä¿®æ”¹å¤§è¡¨ç»“æ„å®¹æ˜“å¯¼è‡´æ•°æ®åº“CPUã€IOç­‰æ€§èƒ½æ¶ˆè€—ï¼Œä½¿MySQLæœåŠ¡å™¨æ€§èƒ½é™ä½ã€‚</li><li>åœ¨çº¿ä¿®æ”¹å¤§è¡¨ç»“æ„å®¹æ˜“å¯¼è‡´ä¸»ä»å»¶æ—¶ï¼Œä»è€Œå½±å“ä¸šåŠ¡è¯»å–ã€‚</li></ul><p>ä¿®æ”¹æ–¹å¼ï¼š</p><ol><li>å¯¹è¡¨åŠ é”(è¡¨æ­¤æ—¶åªè¯»)</li><li>å¤åˆ¶åŸè¡¨ç‰©ç†ç»“æ„</li><li>ä¿®æ”¹è¡¨çš„ç‰©ç†ç»“æ„</li><li>æŠŠåŸè¡¨æ•°æ®å¯¼å…¥ä¸­é—´è¡¨ä¸­ ï¼Œæ•°æ®åŒæ­¥å®Œåï¼Œ**é”å®šä¸­é—´è¡¨ï¼Œå¹¶åˆ é™¤åŸè¡¨</li><li>renameä¸­é—´è¡¨ä¸ºåŸè¡¨</li><li>åˆ·æ–°æ•°æ®å­—å…¸ï¼Œå¹¶é‡Šæ”¾é”</li></ol><p>ä½¿ç”¨å·¥å…·ï¼š <strong>online-schema-change</strong> ï¼Œæ˜¯perconaæ¨å‡ºçš„ä¸€ä¸ªé’ˆå¯¹mysqlåœ¨çº¿ddlçš„å·¥å…·ã€‚perconaæ˜¯ä¸€ä¸ªmysqlåˆ†æ”¯ç»´æŠ¤å…¬å¸ï¼Œä¸“é—¨æä¾›mysqlæŠ€æœ¯æœåŠ¡çš„ã€‚</p><h1>46.count(åˆ—å)ã€count(1)å’Œ count(*)æœ‰ä»€ä¹ˆåŒºåˆ«?</h1><p><strong>è¿›è¡Œç»Ÿè®¡æ“ä½œæ—¶,countä¸­çš„ç»Ÿè®¡æ¡ä»¶å¯ä»¥ä¸‰ç§é€‰æ‹©:</strong></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> Â <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(*) <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> Â <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(åˆ—å) <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> Â <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ•ˆæœä¸Šï¼š</p><ul><li>count(*) åŒ…æ‹¬äº†æ‰€æœ‰çš„åˆ—,åœ¨ç»Ÿè®¡æ—¶ ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºnullçš„æ•°æ®ã€‚</li><li>count(1) ç”¨1è¡¨ç¤ºä»£ç è¡Œ,åœ¨ç»Ÿè®¡æ—¶,ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºnullçš„æ•°æ®ã€‚</li><li>count(åˆ—å)åœ¨ç»Ÿè®¡æ—¶,ä¼šå¿½ç•¥åˆ—å€¼ä¸ºç©ºçš„æ•°æ®,å°±æ˜¯è¯´æŸä¸ªå­—æ®µçš„å€¼ä¸ºnullæ—¶ä¸ç»Ÿè®¡ã€‚</li></ul><p>æ‰§è¡Œæ•ˆç‡ä¸Šï¼š</p><ul><li>InnoDBå¼•æ“ï¼šcountï¼ˆå­—æ®µ) &lt; count(1) = count(*)<ul><li>InnoDBé€šè¿‡éå†æœ€å°çš„å¯ç”¨äºŒçº§ç´¢å¼•æ¥å¤„ç†select count(*) è¯­å¥ï¼Œé™¤éç´¢å¼•æˆ–ä¼˜åŒ–å™¨æç¤ºæŒ‡ç¤ºä¼˜åŒ–å™¨ä½¿ç”¨ä¸åŒçš„ç´¢å¼•ã€‚å¦‚æœäºŒçº§ç´¢å¼•ä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡æ‰«æèšé›†ç´¢å¼•æ¥å¤„ç†ã€‚</li><li>InnoDBå·²åŒæ ·çš„æ–¹å¼å¤„ç†count(1)å’Œcount(*)</li></ul></li><li>MyISAMå¼•æ“ï¼šcountï¼ˆå­—æ®µ) &lt; count(1) &lt;= count(*)<ul><li>MyISAMå­˜å‚¨äº†æ•°æ®çš„å‡†ç¡®è¡Œæ•°ï¼Œä½¿ç”¨ <code>count(*)</code>ä¼šç›´æ¥è¯»å–è¯¥è¡Œæ•°ï¼Œ åªæœ‰å½“ç¬¬ä¸€åˆ—å®šä¹‰ä¸ºNOT NULLæ—¶ï¼Œcountï¼ˆ1ï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œè¯¥æ“ä½œï¼Œæ‰€ä»¥ä¼˜å…ˆé€‰æ‹© <code>count(*)</code></li></ul></li><li>count(åˆ—å) ä¼šéå†æ•´ä¸ªè¡¨ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šå…ˆè·å–åˆ—ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œç„¶åç´¯åŠ ï¼Œå› æ­¤count(åˆ—å)æ€§èƒ½ä¸å¦‚å‰ä¸¤è€…ã€‚</li></ul><p>æ³¨æ„ï¼šcount(*)ï¼Œè¿™æ˜¯SQL92 å®šä¹‰çš„æ ‡å‡†ç»Ÿè®¡è¡Œæ•°çš„è¯­æ³•ï¼Œè·Ÿæ•°æ®åº“æ— å…³ï¼Œä¸NULLä¹Ÿæ— å…³ã€‚è€Œcount(åˆ—å) æ˜¯ç»Ÿè®¡åˆ—å€¼æ•°é‡ï¼Œä¸è®¡NULLï¼Œç›¸åŒåˆ—å€¼ç®—ä¸€ä¸ªã€‚</p><h1>47.ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ï¼Ÿä»€ä¹ˆæ—¶å€™è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Ÿ</h1><p><strong>ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨</strong></p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŒ‡é€šè¿‡æŸç§ç‰¹å®šçš„æ¡ä»¶ï¼Œå°†æˆ‘ä»¬å­˜æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­çš„æ•°æ®åˆ†æ•£å­˜æ”¾åˆ°å¤šä¸ªæ•°æ®åº“ï¼ˆä¸»æœºï¼‰ä¸Šé¢ï¼Œä»¥è¾¾åˆ°åˆ†æ•£å•å°è®¾å¤‡è´Ÿè½½çš„æ•ˆæœã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/351672652c6a4a1bb6e648f75651d730.png" alt="image.png"></p><ul><li><p>åˆ†åº“åˆ†è¡¨è§£å†³çš„é—®é¢˜</p><p><strong>åˆ†åº“åˆ†è¡¨çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ç”±äºæ•°æ®é‡è¿‡å¤§è€Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½é™ä½çš„é—®é¢˜ï¼Œå°†åŸæ¥å•ä½“æœåŠ¡çš„æ•°æ®åº“è¿›è¡Œæ‹†åˆ†.å°†æ•°æ®å¤§è¡¨æ‹†åˆ†æˆè‹¥å¹²æ•°æ®è¡¨ç»„æˆï¼Œä½¿å¾—å•ä¸€æ•°æ®åº“ã€å•ä¸€æ•°æ®è¡¨çš„æ•°æ®é‡å˜å°ï¼Œä»è€Œè¾¾åˆ°æå‡æ•°æ®åº“æ€§èƒ½çš„ç›®çš„ã€‚</strong></p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åˆ†åº“åˆ†è¡¨</p><ul><li><strong>å•æœºå­˜å‚¨å®¹é‡é‡åˆ°ç“¶é¢ˆ.</strong></li><li><strong>è¿æ¥æ•°,å¤„ç†èƒ½åŠ›è¾¾åˆ°ä¸Šé™.</strong></li></ul></li></ul><blockquote><p>æ³¨æ„:</p><p>åˆ†åº“åˆ†è¡¨ä¹‹å‰,è¦æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µ ç¡®å®šæˆ‘ä»¬çš„æ•°æ®é‡æ˜¯ä¸æ˜¯å¤Ÿå¤§,å¹¶å‘é‡æ˜¯ä¸æ˜¯å¤Ÿå¤§,æ¥å†³å®šæ˜¯å¦åˆ†åº“åˆ†è¡¨.</p><p>æ•°æ®é‡ä¸å¤Ÿå°±ä¸è¦åˆ†è¡¨,å•è¡¨æ•°æ®é‡è¶…è¿‡1000ä¸‡æˆ–100Gçš„æ—¶å€™, é€Ÿåº¦å°±ä¼šå˜æ…¢(å®˜æ–¹æµ‹è¯•),</p></blockquote><p>åˆ†åº“åˆ†è¡¨åŒ…æ‹¬ï¼š å‚ç›´åˆ†åº“ã€å‚ç›´åˆ†è¡¨ã€æ°´å¹³åˆ†åº“ã€æ°´å¹³åˆ†è¡¨ å››ç§æ–¹å¼ã€‚</p><p><strong>å‚ç›´åˆ†åº“</strong></p><ul><li><p>æ•°æ®åº“ä¸­ä¸åŒçš„è¡¨å¯¹åº”ç€ä¸åŒçš„ä¸šåŠ¡ï¼Œå‚ç›´åˆ‡åˆ†æ˜¯æŒ‡æŒ‰ç…§ä¸šåŠ¡çš„ä¸åŒå°†è¡¨è¿›è¡Œåˆ†ç±»,åˆ†å¸ƒåˆ°ä¸åŒçš„æ•°æ®åº“ä¸Šé¢</p><ul><li>å°†æ•°æ®åº“éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œä»è€Œè¾¾åˆ°å¤šä¸ªæœåŠ¡å™¨å…±åŒåˆ†æ‘Šå‹åŠ›çš„æ•ˆæœ</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/dcbbe3674442421c967fe8541f28b6b0.png" alt="image.png"></p></li></ul><p><strong>å‚ç›´åˆ†è¡¨</strong></p><p>è¡¨ä¸­å­—æ®µå¤ªå¤šä¸”åŒ…å«å¤§å­—æ®µçš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢æ—¶å¯¹æ•°æ®åº“çš„IOã€å†…å­˜ä¼šå—åˆ°å½±å“ï¼ŒåŒæ—¶æ›´æ–°æ•°æ®æ—¶ï¼Œäº§ç”Ÿçš„binlogæ–‡ä»¶ä¼šå¾ˆå¤§ï¼ŒMySQLåœ¨ä¸»ä»åŒæ­¥æ—¶ä¹Ÿä¼šæœ‰å»¶è¿Ÿçš„é£é™©</p><ul><li>å°†ä¸€ä¸ªè¡¨æŒ‰ç…§å­—æ®µåˆ†æˆå¤šè¡¨ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨å…¶ä¸­ä¸€éƒ¨åˆ†å­—æ®µã€‚</li><li>å¯¹èŒä½è¡¨è¿›è¡Œå‚ç›´æ‹†åˆ†, å°†èŒä½åŸºæœ¬ä¿¡æ¯æ”¾åœ¨ä¸€å¼ è¡¨, å°†èŒä½æè¿°ä¿¡æ¯å­˜æ”¾åœ¨å¦ä¸€å¼ è¡¨</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/d401ca741da24ac782d6356a38e20311.png" alt="image.png"></p><ul><li>å‚ç›´æ‹†åˆ†å¸¦æ¥çš„ä¸€äº›æå‡<ul><li>è§£å†³ä¸šåŠ¡å±‚é¢çš„è€¦åˆï¼Œä¸šåŠ¡æ¸…æ™°</li><li>èƒ½å¯¹ä¸åŒä¸šåŠ¡çš„æ•°æ®è¿›è¡Œåˆ†çº§ç®¡ç†ã€ç»´æŠ¤ã€ç›‘æ§ã€æ‰©å±•ç­‰</li><li>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå‚ç›´åˆ†åº“ä¸€å®šç¨‹åº¦çš„æé«˜è®¿é—®æ€§èƒ½</li></ul></li><li>å‚ç›´æ‹†åˆ†æ²¡æœ‰å½»åº•è§£å†³å•è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜</li></ul><p><strong>æ°´å¹³åˆ†åº“</strong></p><ul><li><p>å°†å•å¼ è¡¨çš„æ•°æ®åˆ‡åˆ†åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šå»ï¼Œæ¯ä¸ªæœåŠ¡å™¨å…·æœ‰ç›¸åº”çš„åº“ä¸è¡¨ï¼Œåªæ˜¯è¡¨ä¸­æ•°æ®é›†åˆä¸åŒã€‚ æ°´å¹³åˆ†åº“åˆ†è¡¨èƒ½å¤Ÿæœ‰æ•ˆçš„ç¼“è§£å•æœºå’Œå•åº“çš„æ€§èƒ½ç“¶é¢ˆå’Œå‹åŠ›ï¼Œçªç ´IOã€è¿æ¥æ•°ã€ç¡¬ä»¶èµ„æºç­‰çš„ç“¶é¢ˆ.</p></li><li><p>ç®€å•è®²å°±æ˜¯æ ¹æ®è¡¨ä¸­çš„æ•°æ®çš„é€»è¾‘å…³ç³»ï¼Œå°†åŒä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æŒ‰ç…§æŸç§æ¡ä»¶æ‹†åˆ†åˆ°å¤šå°æ•°æ®åº“ï¼ˆä¸»æœºï¼‰ä¸Šé¢, ä¾‹å¦‚å°†è®¢å•è¡¨ æŒ‰ç…§idæ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°, åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„åº“ä¸­ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/ce46a9c5ae894a6da70a4ee5b72df1f2.png" alt="image.png"></p></li></ul><p><strong>æ°´å¹³åˆ†è¡¨</strong></p><ul><li><p>é’ˆå¯¹æ•°æ®é‡å·¨å¤§çš„å•å¼ è¡¨ï¼ˆæ¯”å¦‚è®¢å•è¡¨ï¼‰ï¼ŒæŒ‰ç…§è§„åˆ™æŠŠä¸€å¼ è¡¨çš„æ•°æ®åˆ‡åˆ†åˆ°å¤šå¼ è¡¨é‡Œé¢å»ã€‚ ä½†æ˜¯è¿™äº›è¡¨è¿˜æ˜¯åœ¨åŒä¸€ä¸ªåº“ä¸­ï¼Œæ‰€ä»¥åº“çº§åˆ«çš„æ•°æ®åº“æ“ä½œè¿˜æ˜¯æœ‰IOç“¶é¢ˆã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/307c531d662c484f9d68d249eb48620d.png" alt="image.png"></p></li><li><p>æ€»ç»“</p><ul><li><strong>å‚ç›´åˆ†è¡¨</strong>: å°†ä¸€ä¸ªè¡¨æŒ‰ç…§å­—æ®µåˆ†æˆå¤šè¡¨ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨å…¶ä¸­ä¸€éƒ¨åˆ†å­—æ®µã€‚</li><li><strong>å‚ç›´åˆ†åº“</strong>: æ ¹æ®è¡¨çš„ä¸šåŠ¡ä¸åŒ,åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„åº“ä¸­,è¿™äº›åº“åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨.</li><li><strong>æ°´å¹³åˆ†åº“</strong>: æŠŠä¸€å¼ è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™,åˆ†é…åˆ°<strong>ä¸åŒçš„æ•°æ®åº“</strong>,æ¯ä¸€ä¸ªåº“åªæœ‰è¿™å¼ è¡¨çš„éƒ¨åˆ†æ•°æ®.</li><li><strong>æ°´å¹³åˆ†è¡¨</strong>: æŠŠä¸€å¼ è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™,åˆ†é…åˆ°<strong>åŒä¸€ä¸ªæ•°æ®åº“çš„å¤šå¼ è¡¨ä¸­</strong>,æ¯ä¸ªè¡¨åªæœ‰è¿™ä¸ªè¡¨çš„éƒ¨åˆ†æ•°æ®.</li></ul></li></ul><h1>48.è¯´è¯´ MySQL çš„ä¸»ä»å¤åˆ¶ï¼Ÿ</h1><p><strong>ä¸»ä»å¤åˆ¶çš„ç”¨é€”</strong></p><ul><li>å®æ—¶ç¾å¤‡ï¼Œç”¨äºæ•…éšœåˆ‡æ¢</li><li>è¯»å†™åˆ†ç¦»ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡</li><li>å¤‡ä»½ï¼Œé¿å…å½±å“ä¸šåŠ¡</li></ul><p><strong>ä¸»ä»éƒ¨ç½²å¿…è¦æ¡ä»¶</strong></p><ul><li>ä¸»åº“å¼€å¯binlogæ—¥å¿—ï¼ˆè®¾ç½®log-binå‚æ•°ï¼‰</li><li>ä¸»ä»server-idä¸åŒ</li><li>ä»åº“æœåŠ¡å™¨èƒ½è¿é€šä¸»åº“</li></ul><p><strong>ä¸»ä»å¤åˆ¶çš„åŸç†</strong></p><ul><li>Mysql ä¸­æœ‰ä¸€ç§æ—¥å¿—å«åš bin æ—¥å¿—ï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰ã€‚è¿™ä¸ªæ—¥å¿—ä¼šè®°å½•ä¸‹æ‰€æœ‰ä¿®æ”¹äº†æ•°æ®åº“çš„SQL è¯­å¥ï¼ˆinsert,update,delete,create/alter/drop table, grant ç­‰ç­‰ï¼‰ã€‚</li><li>ä¸»ä»å¤åˆ¶çš„åŸç†å…¶å®å°±æ˜¯æŠŠä¸»æœåŠ¡å™¨ä¸Šçš„ bin æ—¥å¿—å¤åˆ¶åˆ°ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸€éï¼Œè¿™æ ·ä»æœåŠ¡å™¨ä¸Šçš„æ•°æ®å°±å’Œä¸»æœåŠ¡å™¨ä¸Šçš„æ•°æ®ç›¸åŒäº†ã€‚</li></ul><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/c0327525e85b4d098b0369093290b898.png" alt="image.png"></p><ol><li>ä¸»åº“dbçš„æ›´æ–°äº‹ä»¶(updateã€insertã€delete)è¢«å†™åˆ°binlog</li><li>ä¸»åº“åˆ›å»ºä¸€ä¸ªbinlog dump threadï¼ŒæŠŠbinlogçš„å†…å®¹å‘é€åˆ°ä»åº“</li><li>ä»åº“å¯åŠ¨å¹¶å‘èµ·è¿æ¥ï¼Œè¿æ¥åˆ°ä¸»åº“</li><li>ä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œè¯»å–ä¸»åº“ä¼ è¿‡æ¥çš„binlogå†…å®¹å¹¶å†™å…¥åˆ°relay log</li><li>ä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªSQLçº¿ç¨‹ï¼Œä»relay logé‡Œé¢è¯»å–å†…å®¹ï¼Œæ‰§è¡Œè¯»å–åˆ°çš„æ›´æ–°äº‹ä»¶ï¼Œå°†æ›´æ–°å†…å®¹å†™å…¥åˆ°slaveçš„db</li></ol><h1>49. è¯´ä¸€ä¸‹ MySQL æ‰§è¡Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h1><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672984425088/a2d06073396b4f5b8e0ed33531e8706e.png" alt="image.png"></p><ul><li><p>â‘ å»ºç«‹è¿æ¥ï¼ˆConnectors&amp;Connection Poolï¼‰ï¼Œé€šè¿‡å®¢æˆ·ç«¯/æœåŠ¡å™¨é€šä¿¡åè®®ä¸MySQLå»ºç«‹è¿æ¥ã€‚MySQL å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é€šä¿¡æ–¹å¼æ˜¯ â€œ åŠåŒå·¥ â€ã€‚å¯¹äºæ¯ä¸€ä¸ª MySQL çš„è¿æ¥ï¼Œæ—¶åˆ»éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹çŠ¶æ€æ¥æ ‡è¯†è¿™ä¸ªè¿æ¥æ­£åœ¨åšä»€ä¹ˆã€‚<br>é€šè®¯æœºåˆ¶ï¼š</p><ul><li>å…¨åŒå·¥ï¼šèƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä¾‹å¦‚å¹³æ—¶æ‰“ç”µè¯ã€‚</li><li>åŠåŒå·¥ï¼šæŒ‡çš„æŸä¸€æ—¶åˆ»ï¼Œè¦ä¹ˆå‘é€æ•°æ®ï¼Œè¦ä¹ˆæ¥æ”¶æ•°æ®ï¼Œä¸èƒ½åŒæ—¶ã€‚ä¾‹å¦‚æ—©æœŸå¯¹è®²æœº</li><li>å•å·¥ï¼šåªèƒ½å‘é€æ•°æ®æˆ–åªèƒ½æ¥æ”¶æ•°æ®ã€‚ä¾‹å¦‚å•è¡Œé“</li></ul><p>çº¿ç¨‹çŠ¶æ€ï¼š<br>show processlist; //æŸ¥çœ‹ç”¨æˆ·æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ä¿¡æ¯ï¼Œrootç”¨æˆ·èƒ½æŸ¥çœ‹æ‰€æœ‰çº¿ç¨‹ï¼Œå…¶ä»–ç”¨æˆ·åªèƒ½çœ‹è‡ªå·±çš„</p><ul><li>idï¼šçº¿ç¨‹IDï¼Œå¯ä»¥ä½¿ç”¨kill xxï¼›</li><li>userï¼šå¯åŠ¨è¿™ä¸ªçº¿ç¨‹çš„ç”¨æˆ·</li><li>Hostï¼šå‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„IPå’Œç«¯å£å·</li><li>dbï¼šå½“å‰å‘½ä»¤åœ¨å“ªä¸ªåº“æ‰§è¡Œ</li><li>Commandï¼šè¯¥çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ“ä½œå‘½ä»¤<ul><li>Create DBï¼šæ­£åœ¨åˆ›å»ºåº“æ“ä½œ</li><li>Drop DBï¼šæ­£åœ¨åˆ é™¤åº“æ“ä½œ</li><li>Executeï¼šæ­£åœ¨æ‰§è¡Œä¸€ä¸ªPreparedStatement</li><li>Close Stmtï¼šæ­£åœ¨å…³é—­ä¸€ä¸ªPreparedStatement</li><li>Queryï¼šæ­£åœ¨æ‰§è¡Œä¸€ä¸ªè¯­å¥</li><li>Sleepï¼šæ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯­å¥</li><li>Quitï¼šæ­£åœ¨é€€å‡º</li><li>Shutdownï¼šæ­£åœ¨å…³é—­æœåŠ¡å™¨</li></ul></li><li>Timeï¼šè¡¨ç¤ºè¯¥çº¿ç¨‹å¤„äºå½“å‰çŠ¶æ€çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’</li><li>Stateï¼šçº¿ç¨‹çŠ¶æ€<ul><li>Updatingï¼šæ­£åœ¨æœç´¢åŒ¹é…è®°å½•ï¼Œè¿›è¡Œä¿®æ”¹</li><li>Sleepingï¼šæ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€æ–°è¯·æ±‚</li><li>Startingï¼šæ­£åœ¨æ‰§è¡Œè¯·æ±‚å¤„ç†</li><li>Checking tableï¼šæ­£åœ¨æ£€æŸ¥æ•°æ®è¡¨</li><li>Closing table : æ­£åœ¨å°†è¡¨ä¸­æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­</li><li>Lockedï¼šè¢«å…¶ä»–æŸ¥è¯¢é”ä½äº†è®°å½•</li><li>Sending Dataï¼šæ­£åœ¨å¤„ç†SelectæŸ¥è¯¢ï¼ŒåŒæ—¶å°†ç»“æœå‘é€ç»™å®¢æˆ·ç«¯</li></ul></li><li>Infoï¼šä¸€èˆ¬è®°å½•çº¿ç¨‹æ‰§è¡Œçš„è¯­å¥ï¼Œé»˜è®¤æ˜¾ç¤ºå‰100ä¸ªå­—ç¬¦ã€‚æƒ³æŸ¥çœ‹å®Œæ•´çš„ä½¿ç”¨show full processlist;</li></ul></li><li><p>â‘¡æŸ¥è¯¢ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰ï¼Œè¿™æ˜¯MySQLçš„ä¸€ä¸ªå¯ä¼˜åŒ–æŸ¥è¯¢çš„åœ°æ–¹ï¼Œå¦‚æœå¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ä¸”åœ¨æŸ¥è¯¢ç¼“å­˜è¿‡ç¨‹ä¸­æŸ¥è¯¢åˆ°å®Œå…¨ç›¸åŒçš„SQLè¯­å¥ï¼Œåˆ™å°†æŸ¥è¯¢ç»“æœç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæ²¡æœ‰å¼€å¯æŸ¥è¯¢ç¼“å­˜æˆ–è€…æ²¡æœ‰æŸ¥è¯¢åˆ°å®Œå…¨ç›¸åŒçš„ SQL è¯­å¥åˆ™ä¼šç”±è§£æå™¨è¿›è¡Œè¯­æ³•è¯­ä¹‰è§£æï¼Œå¹¶ç”Ÿæˆâ€œè§£ææ ‘â€ã€‚</p><ul><li>ç¼“å­˜SelectæŸ¥è¯¢çš„ç»“æœå’ŒSQLè¯­å¥</li><li>æ‰§è¡ŒSelectæŸ¥è¯¢æ—¶ï¼Œå…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯ç”¨çš„è®°å½•é›†ï¼Œè¦æ±‚æ˜¯å¦å®Œå…¨ç›¸åŒï¼ˆåŒ…æ‹¬å‚æ•°å€¼ï¼‰ï¼Œè¿™æ ·æ‰ä¼šåŒ¹é…ç¼“å­˜æ•°æ®å‘½ä¸­ã€‚</li><li>å³ä½¿å¼€å¯æŸ¥è¯¢ç¼“å­˜ï¼Œä»¥ä¸‹SQLä¹Ÿä¸èƒ½ç¼“å­˜<ul><li>æŸ¥è¯¢è¯­å¥ä½¿ç”¨SQL_NO_CACHE</li><li>æŸ¥è¯¢çš„ç»“æœå¤§äºquery_cache_limitè®¾ç½®</li><li>æŸ¥è¯¢ä¸­æœ‰ä¸€äº›ä¸ç¡®å®šçš„å‚æ•°ï¼Œæ¯”å¦‚now()</li></ul></li><li>show variables like â€˜%query_cache%â€™; //æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜æ˜¯å¦å¯ç”¨ï¼Œç©ºé—´å¤§å°ï¼Œé™åˆ¶ç­‰</li><li>show status like â€˜Qcache%â€™; //æŸ¥çœ‹æ›´è¯¦ç»†çš„ç¼“å­˜å‚æ•°ï¼Œå¯ç”¨ç¼“å­˜ç©ºé—´ï¼Œç¼“å­˜å—ï¼Œç¼“å­˜å¤šå°‘ç­‰</li></ul></li><li><p>â‘¢è§£æå™¨ï¼ˆParserï¼‰å°†å®¢æˆ·ç«¯å‘é€çš„SQLè¿›è¡Œè¯­æ³•è§£æï¼Œç”Ÿæˆ&quot;è§£ææ ‘&quot;ã€‚é¢„å¤„ç†å™¨æ ¹æ®ä¸€äº›MySQLè§„åˆ™è¿›ä¸€æ­¥æ£€æŸ¥â€œè§£ææ ‘â€æ˜¯å¦åˆæ³•ï¼Œä¾‹å¦‚è¿™é‡Œå°†æ£€æŸ¥æ•°æ®è¡¨å’Œæ•°æ®åˆ—æ˜¯å¦å­˜åœ¨ï¼Œè¿˜ä¼šè§£æåå­—å’Œåˆ«åï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦æœ‰æ­§ä¹‰ï¼Œæœ€åç”Ÿæˆæ–°çš„â€œè§£ææ ‘â€ã€‚</p></li><li><p>â‘£æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰æ ¹æ®â€œè§£ææ ‘â€ç”Ÿæˆæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚MySQLä½¿ç”¨å¾ˆå¤šä¼˜åŒ–ç­–ç•¥ç”Ÿæˆæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šé™æ€ä¼˜åŒ–ï¼ˆç¼–è¯‘æ—¶ä¼˜åŒ–ï¼‰ã€åŠ¨æ€ä¼˜åŒ–ï¼ˆè¿è¡Œæ—¶ä¼˜åŒ–ï¼‰ã€‚</p><ul><li>ç­‰ä»·å˜æ¢ç­–ç•¥<ul><li>5=5 and a&gt;5 æ”¹æˆ a &gt; 5</li><li>a &lt; b and a=5 æ”¹æˆb&gt;5 and a=5</li><li>åŸºäºè”åˆç´¢å¼•ï¼Œè°ƒæ•´æ¡ä»¶ä½ç½®ç­‰</li></ul></li><li>ä¼˜åŒ–countã€minã€maxç­‰å‡½æ•°<ul><li>InnoDBå¼•æ“minå‡½æ•°åªéœ€è¦æ‰¾ç´¢å¼•æœ€å·¦è¾¹</li><li>InnoDBå¼•æ“maxå‡½æ•°åªéœ€è¦æ‰¾ç´¢å¼•æœ€å³è¾¹</li><li>MyISAMå¼•æ“count(*)ï¼Œä¸éœ€è¦è®¡ç®—ï¼Œç›´æ¥è¿”å›</li></ul></li><li>æå‰ç»ˆæ­¢æŸ¥è¯¢<ul><li>ä½¿ç”¨äº†limitæŸ¥è¯¢ï¼Œè·å–limitæ‰€éœ€çš„æ•°æ®ï¼Œå°±ä¸åœ¨ç»§ç»­éå†åé¢æ•°æ®</li></ul></li><li>inçš„ä¼˜åŒ–<ul><li>MySQLå¯¹inæŸ¥è¯¢ï¼Œä¼šå…ˆè¿›è¡Œæ’åºï¼Œå†é‡‡ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾æ•°æ®ã€‚æ¯”å¦‚where id in (2,1,3)ï¼Œå˜æˆ in (1,2,3)</li></ul></li></ul></li><li><p>â‘¤æŸ¥è¯¢æ‰§è¡Œå¼•æ“è´Ÿè´£æ‰§è¡Œ SQL è¯­å¥ï¼Œæ­¤æ—¶æŸ¥è¯¢æ‰§è¡Œå¼•æ“ä¼šæ ¹æ® SQL è¯­å¥ä¸­è¡¨çš„å­˜å‚¨å¼•æ“ç±»å‹ï¼Œä»¥åŠå¯¹åº”çš„APIæ¥å£ä¸åº•å±‚å­˜å‚¨å¼•æ“ç¼“å­˜æˆ–è€…ç‰©ç†æ–‡ä»¶çš„äº¤äº’ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è‹¥å¼€å¯ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œè¿™æ—¶ä¼šå°†SQL è¯­å¥å’Œç»“æœå®Œæ•´åœ°ä¿å­˜åˆ°æŸ¥è¯¢ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰ä¸­ï¼Œä»¥åè‹¥æœ‰ç›¸åŒçš„ SQL è¯­å¥æ‰§è¡Œåˆ™ç›´æ¥è¿”å›ç»“æœã€‚</p><ul><li>å¦‚æœå¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ï¼Œå…ˆå°†æŸ¥è¯¢ç»“æœåšç¼“å­˜æ“ä½œ</li><li>è¿”å›ç»“æœè¿‡å¤šï¼Œé‡‡ç”¨å¢é‡æ¨¡å¼è¿”å›</li></ul></li></ul><h1>50.Mysqlå†…éƒ¨æ”¯æŒç¼“å­˜æŸ¥è¯¢å—ï¼Ÿ</h1><p>ä½¿ç”¨ç¼“å­˜çš„å¥½å¤„ï¼šå½“MySQLæ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æŸ¥è¯¢SQLä¹‹åï¼Œä»…ä»…åªéœ€è¦å¯¹å…¶è¿›è¡Œç›¸åº”çš„æƒé™éªŒè¯ä¹‹åï¼Œå°±ä¼šé€šè¿‡Query Cacheæ¥æŸ¥æ‰¾ç»“æœï¼Œç”šè‡³éƒ½ä¸éœ€è¦ç»è¿‡Optimizeræ¨¡å—è¿›è¡Œæ‰§è¡Œè®¡åˆ’çš„åˆ†æä¼˜åŒ–ï¼Œæ›´ä¸éœ€è¦å‘ç”Ÿä»»ä½•å­˜å‚¨å¼•æ“çš„äº¤äº’.</p><p>mysql5.7æ”¯æŒå†…éƒ¨ç¼“å­˜ï¼Œ8.0ä¹‹åå·²åºŸå¼ƒ</p><p>mysqlç¼“å­˜çš„é™åˆ¶</p><ol><li>mysqlåŸºæœ¬æ²¡æœ‰æ‰‹æ®µçµæ´»çš„ç®¡ç†ç¼“å­˜å¤±æ•ˆå’Œç”Ÿæ•ˆï¼Œå°¤å…¶å¯¹äºé¢‘ç¹æ›´æ–°çš„è¡¨</li><li>SQLå¿…é¡»å®Œå…¨ä¸€è‡´æ‰ä¼šå¯¼è‡´cacheå‘½ä¸­</li><li>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¤ªå¤§çš„result setä¸ä¼šè¢«cache (&lt; query_cache_limit)ï¼›</li><li>MySQLç¼“å­˜åœ¨åˆ†åº“åˆ†è¡¨ç¯å¢ƒä¸‹æ˜¯ä¸èµ·ä½œç”¨çš„ï¼›</li><li>æ‰§è¡ŒSQLé‡Œæœ‰è§¦å‘å™¨,è‡ªå®šä¹‰å‡½æ•°æ—¶ï¼ŒMySQLç¼“å­˜ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼›</li><li>åœ¨è¡¨çš„ç»“æ„æˆ–æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒåŸºäºè¯¥è¡¨ç›¸å…³cacheç«‹å³å…¨éƒ¨å¤±æ•ˆã€‚</li></ol><p>æ›¿ä»£æ–¹æ¡ˆ</p><ul><li>åº”ç”¨å±‚ç»„ç»‡ç¼“å­˜ï¼Œæœ€ç®€å•çš„æ˜¯ä½¿ç”¨redisï¼Œehcachedç­‰</li></ul>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»MySQLå¸¸é—®é¢è¯•é¢˜</summary>
    
    
    
    <category term="é¢è¯•" scheme="https://momoao.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
    <category term="MySQL" scheme="https://momoao.github.io/tags/MySQL/"/>
    
    <category term="é¢è¯•é¢˜" scheme="https://momoao.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼é¢è¯•é¢˜</title>
    <link href="https://momoao.github.io/posts/202309131058.html"/>
    <id>https://momoao.github.io/posts/202309131058.html</id>
    <published>2023-09-13T07:27:00.000Z</published>
    <updated>2023-09-13T02:59:23.949Z</updated>
    
    <content type="html"><![CDATA[<div class="note info flat"><p>å‚è€ƒï¼šå†…å®¹æ¥è‡ªå›¾çµæ•™è‚²</p></div><h1>1.è¯´ä¸€ä¸‹å¼€å‘ä¸­éœ€è¦éµå®ˆçš„è®¾è®¡åŸåˆ™ï¼Ÿ</h1><p><strong>è®¾è®¡æ¨¡å¼ä¸­ä¸»è¦æœ‰å…­å¤§è®¾è®¡åŸåˆ™ï¼Œç®€ç§°ä¸ºSOLID ï¼Œæ˜¯ç”±äºå„ä¸ªåŸåˆ™çš„é¦–å­—æ¯ç®€ç§°åˆå¹¶çš„æ¥(ä¸¤ä¸ªLç®—ä¸€ä¸ª,solid ç¨³å®šçš„)ï¼Œå…­å¤§è®¾è®¡åŸåˆ™åˆ†åˆ«å¦‚ä¸‹ï¼š</strong></p><p><strong>1ã€å•ä¸€èŒè´£åŸåˆ™</strong></p><p>å•ä¸€èŒè´£åŸåˆ™çš„å®šä¹‰æè¿°éå¸¸ç®€å•ï¼Œä¹Ÿä¸éš¾ç†è§£ã€‚ä¸€ä¸ªç±»åªè´Ÿè´£å®Œæˆä¸€ä¸ªèŒè´£æˆ–è€…åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ç±»çš„è®¾è®¡ä¸­ æˆ‘ä»¬ä¸è¦è®¾è®¡å¤§è€Œå…¨çš„ç±»,è€Œæ˜¯è¦è®¾è®¡ç²’åº¦å°ã€åŠŸèƒ½å•ä¸€çš„ç±»ã€‚</p><blockquote><p>æ¯”å¦‚ æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç±»é‡Œé¢æ—¢åŒ…å«äº†ç”¨æˆ·çš„ä¸€äº›æ“ä½œ,åˆåŒ…å«äº†æ”¯ä»˜çš„ä¸€äº›æ“ä½œ,é‚£è¿™ä¸ªç±»çš„èŒè´£å°±ä¸å¤Ÿå•ä¸€,åº”è¯¥å°†è¯¥ç±»è¿›è¡Œæ‹†åˆ†,æ‹†åˆ†æˆå¤šä¸ªåŠŸèƒ½æ›´åŠ å•ä¸€çš„,ç²’åº¦æ›´ç»†çš„ç±».</p></blockquote><p><strong>2ã€å¼€æ”¾å°é—­åŸåˆ™</strong></p><p>å®šä¹‰ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</p><p>å¯¹æ‰©å±•å¼€æ”¾å’Œå¯¹ä¿®æ”¹å…³é—­è¡¨ç¤ºå½“ä¸€ä¸ªç±»æˆ–ä¸€ä¸ªæ–¹æ³•æœ‰æ–°éœ€æ±‚æˆ–è€…éœ€æ±‚å‘ç”Ÿæ”¹å˜æ—¶åº”è¯¥é‡‡ç”¨æ‰©å±•çš„æ–¹å¼è€Œä¸åº”è¯¥é‡‡ç”¨ä¿®æ”¹åŸæœ‰é€»è¾‘çš„æ–¹å¼æ¥å®ç°ã€‚å› ä¸ºæ‰©å±•äº†æ–°çš„é€»è¾‘å¦‚æœæœ‰é—®é¢˜åªä¼šå½±å“æ–°çš„ä¸šåŠ¡ï¼Œä¸ä¼šå½±å“è€ä¸šåŠ¡ï¼›è€Œå¦‚æœé‡‡ç”¨ä¿®æ”¹çš„æ–¹å¼ï¼Œå¾ˆæœ‰å¯èƒ½å°±ä¼šå½±å“åˆ°è€ä¸šåŠ¡å—å½±å“ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>æ–°è€é€»è¾‘è§£è€¦ï¼Œéœ€æ±‚å‘ç”Ÿæ”¹å˜ä¸ä¼šå½±å“è€ä¸šåŠ¡çš„é€»è¾‘</li><li>æ”¹åŠ¨æˆæœ¬æœ€å°ï¼Œåªéœ€è¦è¿½åŠ æ–°é€»è¾‘ï¼Œä¸éœ€è¦æ”¹çš„è€é€»è¾‘</li><li>æä¾›ä»£ç çš„ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§</li></ol><p><strong>3ã€é‡Œæ°æ›¿æ¢åŸåˆ™</strong></p><p>è¦ç†è§£é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå…¶å®å°±æ˜¯è¦ç†è§£ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>ä»€ä¹ˆæ˜¯æ›¿æ¢ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ä¸æœŸæœ›è¡Œä¸ºä¸€è‡´çš„æ›¿æ¢ï¼ˆRobert Martinæ‰€è¯´çš„â€œå¿…é¡»èƒ½å¤Ÿæ›¿æ¢â€ï¼‰ï¼Ÿ</li></ul><p>1 ) ä»€ä¹ˆæ˜¯æ›¿æ¢ ?</p><p>æ›¿æ¢çš„å‰ææ˜¯é¢å‘å¯¹è±¡è¯­è¨€æ‰€æ”¯æŒçš„å¤šæ€ç‰¹æ€§ï¼ŒåŒä¸€ä¸ªè¡Œä¸ºå…·æœ‰å¤šä¸ªä¸åŒè¡¨ç°å½¢å¼æˆ–å½¢æ€çš„èƒ½åŠ›ã€‚</p><blockquote><p><strong>ä»¥JDKçš„é›†åˆæ¡†æ¶ä¸ºä¾‹ï¼Œ</strong><code>List</code>æ¥å£çš„å®šä¹‰ä¸ºæœ‰åºé›†åˆï¼Œ<code>List</code>æ¥å£æœ‰å¤šä¸ªæ´¾ç”Ÿç±»ï¼Œæ¯”å¦‚å¤§å®¶è€³ç†Ÿèƒ½è¯¦çš„ <code>ArrayList</code>, <code>LinkedList</code>ã€‚é‚£å½“æŸä¸ªæ–¹æ³•å‚æ•°æˆ–å˜é‡æ˜¯ <code>List</code>æ¥å£ç±»å‹æ—¶ï¼Œæ—¢å¯ä»¥æ˜¯ <code>ArrayList</code>çš„å®ç°, ä¹Ÿå¯ä»¥æ˜¯ <code>LinkedList</code>çš„å®ç°ï¼Œè¿™å°±æ˜¯æ›¿æ¢ã€‚</p></blockquote><p>2 ) ä»€ä¹ˆæ˜¯ä¸æœŸæœ›è¡Œä¸ºä¸€è‡´çš„æ›¿æ¢ï¼Ÿ</p><p>åœ¨ä¸äº†è§£æ´¾ç”Ÿç±»çš„æƒ…å†µä¸‹ï¼Œä»…é€šè¿‡æ¥å£æˆ–åŸºç±»çš„æ–¹æ³•ï¼Œå³å¯æ¸…æ¥šçš„çŸ¥é“æ–¹æ³•çš„è¡Œä¸ºï¼Œè€Œä¸ç®¡å“ªç§æ´¾ç”Ÿç±»çš„å®ç°ï¼Œéƒ½ä¸æ¥å£æˆ–åŸºç±»æ–¹æ³•çš„æœŸæœ›è¡Œä¸ºä¸€è‡´ã€‚</p><blockquote><p><strong>ä¸éœ€è¦å…³å¿ƒæ˜¯å“ªä¸ªç±»å¯¹æ¥å£è¿›è¡Œäº†å®ç°,å› ä¸ºä¸ç®¡åº•å±‚å¦‚ä½•å®ç°,æœ€ç»ˆçš„ç»“æœéƒ½ä¼šç¬¦åˆæ¥å£ä¸­å…³äºæ–¹æ³•çš„æè¿°(ä¹Ÿå°±æ˜¯ä¸æ¥å£ä¸­æ–¹æ³•çš„æœŸæœ›è¡Œä¸ºä¸€è‡´).</strong></p><p><strong>æˆ–è€…è¯´æ¥å£æˆ–åŸºç±»çš„æ–¹æ³•æ˜¯ä¸€ç§å¥‘çº¦ï¼Œä½¿ç”¨æ–¹æŒ‰ç…§è¿™ä¸ªå¥‘çº¦æ¥ä½¿ç”¨ï¼Œæ´¾ç”Ÿç±»ä¹ŸæŒ‰ç…§è¿™ä¸ªå¥‘çº¦æ¥å®ç°ã€‚è¿™å°±æ˜¯ä¸æœŸæœ›è¡Œä¸ºä¸€è‡´çš„æ›¿æ¢ã€‚</strong></p></blockquote><p><strong>4ã€æ¥å£éš”ç¦»åŸåˆ™</strong></p><p>å®šä¹‰ï¼šè¦ä¸ºå„ä¸ªç±»å»ºç«‹å®ƒä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£ï¼Œè€Œä¸è¦è¯•å›¾å»å»ºç«‹ä¸€ä¸ªå¾ˆåºå¤§çš„æ¥å£ä¾›æ‰€æœ‰ä¾èµ–å®ƒçš„ç±»å»è°ƒç”¨ã€‚</p><p>æ¥å£éš”ç¦»åŸåˆ™ä¸å•ä¸€èŒè´£åŸåˆ™çš„åŒºåˆ«</p><p>æ¥å£éš”ç¦»åŸåˆ™å’Œå•ä¸€èŒè´£éƒ½æ˜¯ä¸ºäº†æé«˜ç±»çš„å†…èšæ€§ã€é™ä½å®ƒä»¬ä¹‹é—´çš„è€¦åˆæ€§ï¼Œä½“ç°äº†å°è£…çš„æ€æƒ³ï¼Œä½†ä¸¤è€…æ˜¯ä¸åŒçš„ï¼š</p><ul><li>å•ä¸€èŒè´£åŸåˆ™æ³¨é‡çš„æ˜¯èŒè´£ï¼Œè€Œæ¥å£éš”ç¦»åŸåˆ™æ³¨é‡çš„æ˜¯å¯¹æ¥å£ä¾èµ–çš„éš”ç¦»ã€‚</li><li>å•ä¸€èŒè´£åŸåˆ™ä¸»è¦æ˜¯çº¦æŸç±»ï¼Œå®ƒé’ˆå¯¹çš„æ˜¯ç¨‹åºä¸­çš„å®ç°å’Œç»†èŠ‚ï¼›æ¥å£éš”ç¦»åŸåˆ™ä¸»è¦çº¦æŸæ¥å£ï¼Œä¸»è¦é’ˆå¯¹æŠ½è±¡å’Œç¨‹åºæ•´ä½“æ¡†æ¶çš„æ„å»ºã€‚</li></ul><p><strong>5ã€ä¾èµ–å€’ç½®åŸåˆ™</strong></p><p>å®šä¹‰ï¼šä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principleï¼ŒDIPï¼‰æ˜¯æŒ‡åœ¨è®¾è®¡ä»£ç æ¶æ„æ—¶ï¼Œé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºåº•å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</p><p>ä¾èµ–å€’ç½®åŸåˆ™æ˜¯å®ç°å¼€é—­åŸåˆ™çš„é‡è¦é€”å¾„ä¹‹ä¸€ï¼Œå®ƒé™ä½äº†å®¢æˆ·ä¸å®ç°æ¨¡å—ä¹‹é—´çš„è€¦åˆã€‚</p><p>ä¾èµ–å€’ç½®åŸåˆ™çš„å¥½å¤„:</p><ul><li>å‡å°‘ç±»é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ . (æ ¹æ®ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆåº¦ä»å¼±åˆ°å¼ºæ’åˆ—ï¼šä¾èµ–å…³ç³»ã€å…³è”å…³ç³»ã€èšåˆå…³ç³»ã€ç»„åˆå…³ç³»ã€æ³›åŒ–å…³ç³»å’Œå®ç°å…³ç³» )</li><li>é™ä½å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™© (ä¸¤ä¸ªç±»ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œåªè¦åˆ¶å®šå‡ºä¸¤è€…ä¹‹é—´çš„æ¥å£ï¼ˆæˆ–æŠ½è±¡ç±»ï¼‰å°±å¯ä»¥ç‹¬ç«‹å¼€å‘äº†)</li><li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li></ul><p><strong>6ã€è¿ªç±³ç‰¹æ³•åˆ™</strong></p><p>ç®€å•æ¥è¯´è¿ªç±³ç‰¹æ³•åˆ™æƒ³è¦è¡¨è¾¾çš„æ€æƒ³å°±æ˜¯:  <strong>ä¸è¯¥æœ‰ç›´æ¥ä¾èµ–å…³ç³»çš„ç±»ä¹‹é—´ï¼Œä¸è¦æœ‰ä¾èµ–ï¼›æœ‰ä¾èµ–å…³ç³»çš„ç±»ä¹‹é—´ï¼Œå°½é‡åªä¾èµ–å¿…è¦çš„æ¥å£ã€‚</strong></p><blockquote><p><strong>å¦‚æœä¸¤ä¸ªè½¯ä»¶å®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è½¬å‘è¯¥è°ƒç”¨ã€‚å…¶ç›®çš„æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚</strong></p></blockquote><p><strong>è½¯ä»¶å¼€å‘ä¸­æˆ‘ä»¬è¦åŸºäºè¿™å…­ä¸ªåŸåˆ™,è®¾è®¡å»ºç«‹ç¨³å®šã€çµæ´»ã€å¥å£®çš„ç¨‹åº.</strong></p><h1>2.<strong>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½¿ç”¨è¿‡è®¾è®¡æ¨¡å¼å—ï¼Ÿ</strong></h1><p>è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“</p><p>åœ¨GOFç¼–å†™çš„è®¾è®¡æ¨¡å¼(å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€)ä¸€ä¹¦ä¸­è¯´é“:  æœ¬ä¹¦æ¶‰åŠçš„è®¾è®¡æ¨¡å¼å¹¶ä¸æè¿°æ–°çš„æˆ–æœªç»è¯å®çš„è®¾è®¡ï¼Œæˆ‘ä»¬åªæ”¶å½•é‚£äº›åœ¨ä¸åŒç³»ç»Ÿä¸­å¤šæ¬¡ä½¿ç”¨è¿‡çš„æˆåŠŸè®¾è®¡ã€‚</p><p><strong>å¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¦è§£å†³çš„éƒ½æ˜¯ä»£ç çš„å¯é‡ç”¨æ€§ã€å¯æ‰©å±•æ€§é—®é¢˜</strong></p><blockquote><p><strong>å¦‚æœè¯´æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯æ•™ä½ å¦‚ä½•å†™å‡ºé«˜æ•ˆä»£ç ï¼Œé‚£è®¾è®¡æ¨¡å¼è®²çš„æ˜¯å¦‚ä½•å†™å‡ºå¯æ‰©å±•ã€å¯è¯»ã€å¯ç»´æŠ¤çš„é«˜è´¨é‡ä»£ç ï¼Œæ‰€ä»¥ï¼Œå®ƒä»¬è·Ÿå¹³æ—¶çš„ç¼–ç ä¼šæœ‰ç›´æ¥çš„å…³ç³»ï¼Œä¹Ÿä¼šç›´æ¥å½±å“åˆ°ä½ çš„å¼€å‘èƒ½åŠ›ã€‚</strong></p></blockquote><p><strong>è®¾è®¡æ¨¡å¼çš„å¥½å¤„</strong></p><ul><li>ä¸å†ç¼–å†™ bullshit-code</li><li>æé«˜å¤æ‚ä»£ç çš„è®¾è®¡å’Œå¼€å‘èƒ½åŠ›</li><li>æœ‰åŠ©äºæˆ‘ä»¬è¯»æ‡‚æºç ,å­¦ä¹ æ¡†æ¶æ›´åŠ äº‹åŠåŠŸå€</li></ul><p><strong>GoFè®¾è®¡æ¨¡å¼åªæœ‰23ä¸ªï¼Œä½†æ˜¯å®ƒä»¬å„å…·ç‰¹è‰² ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½ä¸ºæŸä¸€ä¸ªå¯é‡å¤çš„è®¾è®¡é—®é¢˜æä¾›äº†ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚</strong></p><p><strong>æ ¹æ®å®ƒä»¬çš„ç”¨é€”ï¼Œè®¾è®¡æ¨¡å¼å¯åˆ†ä¸º åˆ›å»ºå‹(Creational) ï¼Œç»“æ„å‹(Structural)  å’Œè¡Œä¸ºå‹(Behavioral)</strong></p><p>åˆ›å»ºå‹æ¨¡å¼(5ç§)ï¼šæä¾›åˆ›å»ºå¯¹è±¡çš„æœºåˆ¶ï¼Œæå‡å·²æœ‰ä»£ç çš„çµæ´»æ€§å’Œå¯å¤ç”¨æ€§</p><ul><li>å¸¸ç”¨çš„æœ‰ï¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ï¼ˆå·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚ï¼‰ã€å»ºé€ è€…æ¨¡å¼ã€‚</li><li>ä¸å¸¸ç”¨çš„æœ‰ï¼šåŸå‹æ¨¡å¼ã€‚</li></ul><p>ç»“æ„å‹æ¨¡å¼(7ç§)ï¼šä»‹ç»å¦‚ä½•å°†å¯¹è±¡å’Œç±»ç»„è£…æˆè¾ƒå¤§çš„ç»“æ„ï¼Œå¹¶åŒæ—¶ä¿æŒç»“æ„çš„çµæ´»å’Œé«˜æ•ˆ</p><ul><li>å¸¸ç”¨çš„æœ‰ï¼šä»£ç†æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€‚</li><li>ä¸å¸¸ç”¨çš„æœ‰ï¼šé—¨é¢æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚</li></ul><p>è¡Œä¸ºæ¨¡å¼(11ç§)ï¼šè´Ÿè´£å¯¹è±¡é—´çš„é«˜æ•ˆæ²Ÿé€šå’ŒèŒè´£ä¼ é€’å§”æ´¾</p><ul><li>å¸¸ç”¨çš„æœ‰ï¼šè§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€‚</li><li>ä¸å¸¸ç”¨çš„æœ‰ï¼šè®¿é—®è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€ä¸­ä»‹æ¨¡å¼ã€‚</li></ul><h1>3.è¯´ä¸€ä¸‹å•ä¾‹æ¨¡å¼ï¼ŒåŠå…¶åº”ç”¨åœºæ™¯ï¼Ÿ</h1><p>å®šä¹‰</p><p>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œæ­¤æ¨¡å¼ä¿è¯æŸä¸ªç±»åœ¨è¿è¡ŒæœŸé—´ï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹å¤–æä¾›æœåŠ¡ï¼Œè€Œè¿™ä¸ªç±»è¢«ç§°ä¸ºå•ä¾‹ç±»ã€‚</p><blockquote><p><strong>å•ä¾‹æ¨¡å¼ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯”å¦‚ä¸€ä¸ªäººä¸€ç”Ÿå½“ä¸­åªèƒ½æœ‰ä¸€ä¸ªçœŸå®çš„èº«ä»½è¯å·ï¼Œä¸€ä¸ªå›½å®¶åªæœ‰ä¸€ä¸ªæ”¿åºœï¼Œç±»ä¼¼çš„åœºæ™¯éƒ½æ˜¯å±äºå•ä¾‹æ¨¡å¼ã€‚</strong></p></blockquote><p>ä½¿ç”¨å•ä¾‹æ¨¡å¼è¦åšçš„ä¸¤ä»¶äº‹</p><ol><li>ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹</li><li>ä¸ºè¯¥å®ä¾‹æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®èŠ‚ç‚¹</li></ol><p>å•ä¾‹æ¨¡å¼ç»“æ„</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/4cd8bc431f3049e38f0923c0490fb479.png" alt="image.png"></p><p><strong>å•ä¾‹çš„å®ç°</strong></p><ul><li>é¥¿æ±‰å¼</li><li>æ‡’æ±‰å¼</li><li>åŒé‡æ£€æµ‹</li><li>é™æ€å†…éƒ¨ç±»</li><li>æšä¸¾æ–¹å¼</li></ul><p><strong>åº”ç”¨åœºæ™¯</strong></p><ul><li>èµ„æºå…±äº«çš„æƒ…å†µä¸‹ï¼Œé¿å…ç”±äºèµ„æºæ“ä½œæ—¶å¯¼è‡´çš„æ€§èƒ½æˆ–æŸè€—ç­‰ã€‚å¦‚ä¸Šè¿°ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼Œåº”ç”¨é…ç½®ã€‚</li><li>æ§åˆ¶èµ„æºçš„æƒ…å†µä¸‹ï¼Œæ–¹ä¾¿èµ„æºä¹‹é—´çš„äº’ç›¸é€šä¿¡ã€‚å¦‚çº¿ç¨‹æ± ç­‰ã€‚</li></ul><h1>4.ä»‹ç»ä¸€ä¸‹ä»£ç†æ¨¡å¼çš„ç§ç±»å’Œå®ƒä»¬ä¹‹é—´åŒºåˆ«ï¼Ÿ</h1><p><strong>1ï¼‰é™æ€ä»£ç†</strong></p><p>è¿™ç§ä»£ç†æ–¹å¼éœ€è¦ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å®ç°ä¸€æ ·çš„æ¥å£ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šå¯ä»¥åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„å‰æä¸‹æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚</li><li>ç¼ºç‚¹ï¼š<ol><li>å†—ä½™ã€‚ç”±äºä»£ç†å¯¹è±¡è¦å®ç°ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œä¼šäº§ç”Ÿè¿‡å¤šçš„ä»£ç†ç±»ã€‚</li><li>ä¸æ˜“ç»´æŠ¤ã€‚ä¸€æ—¦æ¥å£å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ã€‚</li></ol></li></ul><p><strong>2ï¼‰JDKåŠ¨æ€ä»£ç†</strong></p><p>åŠ¨æ€ä»£ç†åˆ©ç”¨äº†JDK API,åŠ¨æ€åœ°åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡,ä»è€Œå®ç°å¯¹ç›®æ ‡å¯¹è±¡çš„ä»£ç†åŠŸèƒ½.åŠ¨æ€ä»£ç†åˆè¢«ç§°ä¸ºJDKä»£ç†æˆ–æ¥å£ä»£ç†.</p><p>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«:</p><ol><li>é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å®ç°äº†,ç¼–è¯‘å®Œæˆåä»£ç†ç±»æ˜¯ä¸€ä¸ªå®é™…çš„classæ–‡ä»¶</li><li>åŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆçš„,å³ç¼–è¯‘å®Œæˆåæ²¡æœ‰å®é™…çš„classæ–‡ä»¶,è€Œæ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ,å¹¶åŠ è½½åˆ°JVMä¸­.</li></ol><p><strong>3ï¼‰CGLIB åŠ¨æ€ä»£ç†</strong></p><p>cglib (Code Generation Library ) æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ä»£ç ç”Ÿæˆç±»åº“ï¼Œè¿è¡Œæ—¶åœ¨å†…å­˜ä¸­åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»å¯¹è±¡ä»è€Œå®ç°å¯¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½çš„æ‰©å±•ã€‚cglib ä¸ºæ²¡æœ‰å®ç°æ¥å£çš„ç±»æä¾›ä»£ç†ï¼Œä¸ºJDKçš„åŠ¨æ€ä»£ç†æä¾›äº†å¾ˆå¥½çš„è¡¥å……ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/c3ca7d140b6c4661a38256b4721324c9.png" alt="image.png"></p><ul><li>æœ€åº•å±‚æ˜¯å­—èŠ‚ç </li><li>ASMæ˜¯æ“ä½œå­—èŠ‚ç çš„å·¥å…·</li><li>cglibåŸºäºASMå­—èŠ‚ç å·¥å…·æ“ä½œå­—èŠ‚ç ï¼ˆå³åŠ¨æ€ç”Ÿæˆä»£ç†ï¼Œå¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºï¼‰</li><li>SpringAOPåŸºäºcglibè¿›è¡Œå°è£…ï¼Œå®ç°cglibæ–¹å¼çš„åŠ¨æ€ä»£ç†</li></ul><p><strong>4ï¼‰ä¸‰ç§ä»£ç†æ¨¡å¼å®ç°æ–¹å¼çš„å¯¹æ¯”</strong></p><ul><li><p>jdkä»£ç†å’ŒCGLIBä»£ç†</p><p>ä½¿ç”¨CGLibå®ç°åŠ¨æ€ä»£ç†ï¼ŒCGLibåº•å±‚é‡‡ç”¨ASMå­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œä½¿ç”¨å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»ï¼Œåœ¨JDK1.6ä¹‹å‰æ¯”ä½¿ç”¨Javaåå°„æ•ˆç‡è¦é«˜ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCGLibä¸èƒ½å¯¹å£°æ˜ä¸ºfinalçš„ç±»æˆ–è€…æ–¹æ³•è¿›è¡Œä»£ç†ï¼Œå› ä¸ºCGLibåŸç†æ˜¯åŠ¨æ€ç”Ÿæˆè¢«ä»£ç†ç±»çš„å­ç±»ã€‚</p><p>åœ¨JDK1.6ã€JDK1.7ã€JDK1.8é€æ­¥å¯¹JDKåŠ¨æ€ä»£ç†ä¼˜åŒ–ä¹‹åï¼Œåœ¨è°ƒç”¨æ¬¡æ•°è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼ŒJDKä»£ç†æ•ˆç‡é«˜äºCGLibä»£ç†æ•ˆç‡ï¼Œåªæœ‰å½“è¿›è¡Œå¤§é‡è°ƒç”¨çš„æ—¶å€™ï¼ŒJDK1.6å’ŒJDK1.7æ¯”CGLibä»£ç†æ•ˆç‡ä½ä¸€ç‚¹ï¼Œä½†æ˜¯åˆ°JDK1.8çš„æ—¶å€™ï¼ŒJDKä»£ç†æ•ˆç‡é«˜äºCGLibä»£ç†ã€‚æ‰€ä»¥å¦‚æœæœ‰æ¥å£ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰æ¥å£ä½¿ç”¨CGLIBä»£ç†ã€‚</p></li><li><p>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†</p><p>åŠ¨æ€ä»£ç†ä¸é™æ€ä»£ç†ç›¸æ¯”è¾ƒï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼ˆInvocationHandler.invokeï¼‰ã€‚è¿™æ ·ï¼Œåœ¨æ¥å£æ–¹æ³•æ•°é‡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œçµæ´»å¤„ç†ï¼Œè€Œä¸éœ€è¦åƒé™æ€ä»£ç†é‚£æ ·æ¯ä¸€ä¸ªæ–¹æ³•è¿›è¡Œä¸­è½¬ã€‚</p><p>å¦‚æœæ¥å£å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œé™æ€ä»£ç†æ¨¡å¼é™¤äº†æ‰€æœ‰å®ç°ç±»éœ€è¦å®ç°è¿™ä¸ªæ–¹æ³•å¤–ï¼Œæ‰€æœ‰ä»£ç†ç±»ä¹Ÿéœ€è¦å®ç°æ­¤æ–¹æ³•ã€‚å¢åŠ äº†ä»£ç ç»´æŠ¤çš„å¤æ‚åº¦ã€‚è€ŒåŠ¨æ€ä»£ç†ä¸ä¼šå‡ºç°è¯¥é—®é¢˜</p></li></ul><h1>5.å·¥å‚æ¨¡å¼æœ‰å“ªå‡ ç§ï¼Œä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1><p>åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p><p>ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­ï¼Œå·¥å‚æ¨¡å¼è¢«åˆ†ä¸ºäº†ä¸‰ç§ï¼šç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚ã€‚ï¼ˆä¸è¿‡ï¼Œåœ¨ä¹¦ä¸­ä½œè€…å°†ç®€å•å·¥å‚æ¨¡å¼çœ‹ä½œæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§ç‰¹ä¾‹ã€‚</p><p><strong>1ï¼‰ç®€å•å·¥å‚æ¨¡å¼</strong></p><p>ç®€å•å·¥å‚ä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œåè€Œæ¯”è¾ƒåƒæ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ã€‚ç®€å•å·¥å‚æ¨¡å¼åˆå«åšé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆstatic Factory Method patternï¼‰,å®ƒæ˜¯é€šè¿‡ä½¿ç”¨é™æ€æ–¹æ³•æ¥æ”¶ä¸åŒçš„å‚æ•°æ¥è¿”å›ä¸åŒçš„å®ä¾‹å¯¹è±¡.</p><p>å®ç°æ–¹å¼: å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ä¸åŒè¿”å›ä¸åŒçš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„å®ä¾‹å…·æœ‰å…±åŒçš„çˆ¶ç±»æˆ–æ¥å£ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/040d2d85f6e144bfb383a90f781c10c9.png" alt="image.png"></p><p>é€‚ç”¨åœºæ™¯ï¼š<br>ã€€ã€€ï¼ˆ1ï¼‰éœ€è¦åˆ›å»ºçš„å¯¹è±¡è¾ƒå°‘ã€‚<br>ã€€ã€€ï¼ˆ2ï¼‰å®¢æˆ·ç«¯ä¸å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å°è£…äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡å‚æ•°ç›´æ¥è·å–å¯¹è±¡ã€‚æŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä¸šåŠ¡é€»è¾‘å±‚åˆ†å¼€ï¼Œè¿™æ ·ä»¥åå°±é¿å…äº†ä¿®æ”¹å®¢æˆ·ä»£ç ï¼Œå¦‚æœè¦å®ç°æ–°äº§å“ç›´æ¥ä¿®æ”¹å·¥å‚ç±»ï¼Œè€Œä¸éœ€è¦åœ¨åŸä»£ç ä¸­ä¿®æ”¹ï¼Œè¿™æ ·å°±é™ä½äº†å®¢æˆ·ä»£ç ä¿®æ”¹çš„å¯èƒ½æ€§ï¼Œæ›´åŠ å®¹æ˜“æ‰©å±•ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å¢åŠ æ–°äº§å“æ—¶è¿˜æ˜¯éœ€è¦ä¿®æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚</li></ul><p><strong>2ï¼‰å·¥å‚æ–¹æ³•æ¨¡å¼</strong></p><p>å·¥å‚æ–¹æ³•æ¨¡å¼ <code>Factory Method pattern</code>,å±äºåˆ›å»ºå‹æ¨¡å¼.</p><p>æ¦‚å¿µ: å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªäº§å“ç±»å¯¹è±¡ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å·¥å‚çš„å­ç±»ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/36732a94d5524e29856dda02f216a0b7.png" alt="image.png"></p><p>å·¥å‚æ–¹æ³•æ¨¡ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ï¼›</li><li>åœ¨ç³»ç»Ÿå¢åŠ æ–°çš„äº§å“æ—¶åªéœ€è¦æ·»åŠ å…·ä½“äº§å“ç±»å’Œå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œæ— é¡»å¯¹åŸå·¥å‚è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ï¼›</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ¯å¢åŠ ä¸€ä¸ªäº§å“å°±è¦å¢åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»å’Œä¸€ä¸ªå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</li></ul><p><strong>3ï¼‰æŠ½è±¡å·¥å‚æ¨¡å¼</strong></p><p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒå®é™…ä¸Šæ˜¯å¯¹å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ‰©å±•ï¼Œç›¸å½“äºä¸€ä¸ªè¶…çº§å·¥å‚ï¼Œç”¨äºåˆ›å»ºå…¶ä»–å·¥å‚çš„æ¨¡å¼ã€‚</p><p>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œæ¥å£æ˜¯è´Ÿè´£åˆ›å»ºä¸€ä¸ªç›¸å…³å¯¹è±¡çš„å·¥å‚ï¼Œè€Œä¸”æ¯ä¸ªå·¥å‚éƒ½èƒ½æŒ‰ç…§å·¥å‚æ¨¡å¼æä¾›å¯¹è±¡ã€‚å…¶å®æŠ½è±¡å·¥å‚ä¹Ÿæ˜¯ä¸ºäº†å‡å°‘å·¥å‚æ–¹æ³•ä¸­çš„å­ç±»å’Œå·¥å‚ç±»æ•°é‡ï¼ŒåŸºäºæ­¤æå‡ºçš„è®¾è®¡æ¨¡å¼ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/7887608beff043a099de1a8b981c43a8.png" alt="image.png"></p><p>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­,æ¯ä¸€ä¸ªå…·ä½“å·¥å‚éƒ½æä¾›äº†å¤šä¸ªå·¥å‚æ–¹æ³•,ç”¨äºäº§ç”Ÿå¤šç§ä¸åŒç±»å‹çš„äº§å“</p><p>æŠ½è±¡å·¥å‚æ¨¡å¼ä¼˜ç‚¹</p><ol><li>å¯¹äºä¸åŒäº§å“ç³»åˆ—æœ‰æ¯”è¾ƒå¤šå…±æ€§ç‰¹å¾æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œæœ‰åŠ©äºæå‡ç»„ä»¶çš„å¤ç”¨æ€§.</li><li>å½“éœ€è¦æå‡ä»£ç çš„æ‰©å±•æ€§å¹¶é™ä½ç»´æŠ¤æˆæœ¬æ—¶ï¼ŒæŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨è¿‡ç¨‹åˆ†å¼€ï¼Œèƒ½æœ‰æ•ˆåœ°å°†ä»£ç ç»Ÿä¸€åˆ°ä¸€ä¸ªçº§åˆ«ä¸Š</li><li>è§£å†³è·¨å¹³å°å¸¦æ¥çš„å…¼å®¹æ€§é—®é¢˜</li></ol><p>æŠ½è±¡å·¥å‚æ¨¡å¼ç¼ºç‚¹</p><ul><li>å¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„éº»çƒ¦,éœ€è¦å¯¹åŸæœ‰ç»“æ„è¿›è¡Œè¾ƒå¤§çš„ä¿®æ”¹,ç”šè‡³éœ€è¦ä¿®æ”¹æŠ½è±¡å±‚ä»£ç ,è¿™æ˜¾ç„¶ä¼šå¸¦æ¥è¾ƒå¤§ä¸å˜,è¿èƒŒäº†å¼€é—­åŸåˆ™.</li></ul><h1>6.ä»‹ç»ä¸€ä¸‹è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼Ÿ</h1><p><strong>è§‚å¯Ÿè€…æ¨¡å¼(observer pattern)çš„åŸå§‹å®šä¹‰æ˜¯ï¼šå®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œè¿™æ ·å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½ä¼šè‡ªåŠ¨å¾—åˆ°é€šçŸ¥å’Œæ›´æ–°ã€‚</strong></p><p>è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„å®šä¹‰: è§‚å¯Ÿè€…æ¨¡å¼å®ƒæ˜¯ç”¨äºå»ºç«‹ä¸€ç§å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»,ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶å°†è‡ªåŠ¨é€šçŸ¥å…¶ä»–å¯¹è±¡,å…¶ä»–å¯¹è±¡å°†ç›¸åº”çš„ä½œå‡ºååº”.</p><blockquote><p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­å‘ç”Ÿæ”¹å˜çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿç›®æ ‡,è€Œè¢«é€šçŸ¥çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿè€…,ä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥åº”å¯¹å¤šä¸ªè§‚å¯Ÿè€…,è€Œä¸”è¿™äº›è§‚å¯Ÿè€…ä¹‹é—´å¯ä»¥æ²¡æœ‰ä»»ä½•ç›¸äº’è”ç³»,å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…,ä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ‰©å±•.</p><p>è§‚å¯Ÿè€…æ¨¡å¼çš„åˆ«åæœ‰å‘å¸ƒ-è®¢é˜…(Publish/Subscribe)æ¨¡å¼,æ¨¡å‹-è§†å›¾(Model-View)æ¨¡å¼ã€æº-ç›‘å¬(Source-Listener) æ¨¡å¼ç­‰</p></blockquote><p><strong>è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„ä¸­é€šå¸¸åŒ…æ‹¬: è§‚å¯Ÿç›®æ ‡å’Œè§‚å¯Ÿè€…ä¸¤ä¸ªç»§æ‰¿å±‚æ¬¡ç»“æ„.</strong></p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/dbf3897db4b8443fa6efae8f7e3b3f1d.png" alt="image.png"></p><p><strong>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­æœ‰å¦‚ä¸‹è§’è‰²ï¼š</strong></p><ul><li>Subjectï¼šæŠ½è±¡ä¸»é¢˜ï¼ˆæŠ½è±¡è¢«è§‚å¯Ÿè€…ï¼‰ï¼ŒæŠ½è±¡ä¸»é¢˜è§’è‰²æŠŠæ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ä¿å­˜åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„è§‚å¯Ÿè€…ï¼ŒæŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ã€‚</li><li>ConcreteSubjectï¼šå…·ä½“ä¸»é¢˜ï¼ˆå…·ä½“è¢«è§‚å¯Ÿè€…ï¼‰ï¼Œè¯¥è§’è‰²å°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼Œåœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰æ³¨å†Œè¿‡çš„è§‚å¯Ÿè€…å‘é€é€šçŸ¥ã€‚</li><li>Observerï¼šæŠ½è±¡è§‚å¯Ÿè€…ï¼Œæ˜¯è§‚å¯Ÿè€…çš„æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ›´æ–°æ¥å£ï¼Œä½¿å¾—åœ¨å¾—åˆ°ä¸»é¢˜æ›´æ”¹é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ã€‚</li><li>ConcrereObserverï¼šå…·ä½“è§‚å¯Ÿè€…ï¼Œå®ç°æŠ½è±¡è§‚å¯Ÿè€…å®šä¹‰çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿åœ¨å¾—åˆ°ä¸»é¢˜æ›´æ”¹é€šçŸ¥æ—¶æ›´æ–°è‡ªèº«çš„çŠ¶æ€ã€‚åœ¨å…·ä½“è§‚å¯Ÿè€…ä¸­ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å…·ä½“ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨,å®ƒå­˜å‚¨å…·ä½“è§‚å¯Ÿè€…çš„æœ‰å…³çŠ¶æ€,è¿™äº›çŠ¶æ€éœ€è¦ä¸å…·ä½“ç›®æ ‡ä¿æŒä¸€è‡´.</li></ul><p><strong>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç‚¹</strong></p><ul><li>é™ä½äº†ç›®æ ‡ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œä¸¤è€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆå…³ç³»ã€‚</li><li>è¢«è§‚å¯Ÿè€…å‘é€é€šçŸ¥ï¼Œæ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…éƒ½ä¼šæ”¶åˆ°ä¿¡æ¯ã€å¯ä»¥å®ç°å¹¿æ’­æœºåˆ¶ã€‘</li></ul><p><strong>è§‚å¯Ÿè€…æ¨¡å¼çš„ç¼ºç‚¹</strong></p><ul><li>å¦‚æœè§‚å¯Ÿè€…éå¸¸å¤šçš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è§‚å¯Ÿè€…æ”¶åˆ°è¢«è§‚å¯Ÿè€…å‘é€çš„é€šçŸ¥ä¼šè€—æ—¶æ¯”è¾ƒå¤š</li><li>å¦‚æœè¢«è§‚å¯Ÿè€…æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œé‚£ä¹ˆè¢«è§‚å¯Ÿè€…å‘é€é€šçŸ¥ä¼šä½¿è§‚å¯Ÿè€…å¾ªç¯è°ƒç”¨ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒ</li></ul><p><strong>è§‚å¯Ÿè€…æ¨¡å¼å¸¸è§çš„ä½¿ç”¨åœºæ™¯</strong></p><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€çš„æ”¹å˜éœ€è¦æ”¹å˜å…¶ä»–å¯¹è±¡æ—¶ã€‚æ¯”å¦‚ï¼Œå•†å“åº“å­˜æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦é€šçŸ¥å•†å“è¯¦æƒ…é¡µã€è´­ç‰©è½¦ç­‰ç³»ç»Ÿæ”¹å˜æ•°é‡ã€‚</li><li>ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶åªæƒ³è¦å‘é€é€šçŸ¥ï¼Œè€Œä¸éœ€è¦çŸ¥é“æ¥æ”¶è€…æ˜¯è°ã€‚æ¯”å¦‚ï¼Œè®¢é˜…å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« ï¼Œå‘é€è€…é€šè¿‡å…¬ä¼—å·å‘é€ï¼Œè®¢é˜…è€…å¹¶ä¸çŸ¥é“å“ªäº›ç”¨æˆ·è®¢é˜…äº†å…¬ä¼—å·ã€‚</li><li>éœ€è¦åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶æ—¶ã€‚æ¯”å¦‚ï¼Œåœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ï¼ŒA å¯¹è±¡çš„è¡Œä¸ºå°†å½±å“ B å¯¹è±¡ï¼ŒB å¯¹è±¡çš„è¡Œä¸ºå°†å½±å“ C å¯¹è±¡â€¦â€¦è¿™æ ·é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼èƒ½å¤Ÿå¾ˆå¥½åœ°å®ç°ã€‚</li><li>å¾®åšæˆ–å¾®ä¿¡æœ‹å‹åœˆå‘é€çš„åœºæ™¯ã€‚è¿™æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œä¸€ä¸ªäººå‘å¾®åšæˆ–æœ‹å‹åœˆï¼Œåªè¦æ˜¯å…³è”çš„æœ‹å‹éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼›ä¸€æ—¦å–æ¶ˆå…³æ³¨ï¼Œæ­¤äººä»¥åå°†ä¸ä¼šæ”¶åˆ°ç›¸å…³é€šçŸ¥ã€‚</li></ul><h1>7.è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h1><p>1ï¼‰<strong>ä»£ç†æ¨¡å¼(Proxy Design Pattern )</strong> åŸå§‹å®šä¹‰æ˜¯ï¼šè®©ä½ èƒ½å¤Ÿæä¾›å¯¹è±¡çš„æ›¿ä»£å“æˆ–å…¶å ä½ç¬¦ã€‚ä»£ç†æ§åˆ¶ç€å¯¹äºåŸå¯¹è±¡çš„è®¿é—®ï¼Œå¹¶å…è®¸å°†è¯·æ±‚æäº¤ç»™å¯¹è±¡å‰åè¿›è¡Œä¸€äº›å¤„ç†ã€‚</p><p><strong>ä»£ç†æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p><ul><li>åŠŸèƒ½å¢å¼º<br>å½“éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®æä¾›ä¸€äº›é¢å¤–æ“ä½œæ—¶,å¯ä»¥ä½¿ç”¨ä»£ç†æ¨¡å¼</li><li>è¿œç¨‹ï¼ˆRemoteï¼‰ä»£ç†<br>å®é™…ä¸Šï¼ŒRPC æ¡†æ¶ä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç§ä»£ç†æ¨¡å¼ï¼ŒGoF çš„ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­æŠŠå®ƒç§°ä½œè¿œç¨‹ä»£ç†ã€‚é€šè¿‡è¿œç¨‹ä»£ç†ï¼Œå°†ç½‘ç»œé€šä¿¡ã€æ•°æ®ç¼–è§£ç ç­‰ç»†èŠ‚éšè—èµ·æ¥ã€‚å®¢æˆ·ç«¯åœ¨ä½¿ç”¨ RPC æœåŠ¡çš„æ—¶å€™ï¼Œå°±åƒä½¿ç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ï¼Œæ— éœ€äº†è§£è·ŸæœåŠ¡å™¨äº¤äº’çš„ç»†èŠ‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRPC æœåŠ¡çš„å¼€å‘è€…ä¹Ÿåªéœ€è¦å¼€å‘ä¸šåŠ¡é€»è¾‘ï¼Œå°±åƒå¼€å‘æœ¬åœ°ä½¿ç”¨çš„å‡½æ•°ä¸€æ ·ï¼Œä¸éœ€è¦å…³æ³¨è·Ÿå®¢æˆ·ç«¯çš„äº¤äº’ç»†èŠ‚ã€‚</li><li>é˜²ç«å¢™ï¼ˆFirewallï¼‰ä»£ç†<br>å½“ä½ å°†æµè§ˆå™¨é…ç½®æˆä½¿ç”¨ä»£ç†åŠŸèƒ½æ—¶ï¼Œé˜²ç«å¢™å°±å°†ä½ çš„æµè§ˆå™¨çš„è¯·æ±‚è½¬ç»™äº’è”ç½‘ï¼›å½“äº’è”ç½‘è¿”å›å“åº”æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å†æŠŠå®ƒè½¬ç»™ä½ çš„æµè§ˆå™¨ã€‚</li><li>ä¿æŠ¤ï¼ˆProtect or Accessï¼‰ä»£ç†<br>æ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™ã€‚</li></ul><p>2ï¼‰<strong>è£…é¥°å™¨æ¨¡å¼(decorator pattern)</strong> çš„åŸå§‹å®šä¹‰æ˜¯ï¼šåŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£. å°±æ‰©å±•åŠŸèƒ½è€Œè¨€,è£…é¥°å™¨æ¨¡å¼æä¾›äº†ä¸€ç§æ¯”ä½¿ç”¨å­ç±»æ›´åŠ çµæ´»çš„æ›¿ä»£æ–¹æ¡ˆ.</p><p><strong>è£…é¥°å™¨æ¨¡å¼çš„é€‚ç”¨åœºæ™¯</strong></p><ul><li>å¿«é€ŸåŠ¨æ€æ‰©å±•å’Œæ’¤é”€ä¸€ä¸ªç±»çš„åŠŸèƒ½åœºæ™¯ã€‚ æ¯”å¦‚ï¼Œæœ‰çš„åœºæ™¯ä¸‹å¯¹ API æ¥å£çš„å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨è£…é¥°æ¨¡å¼å¯¹ä¼ è¾“çš„å­—ç¬¦ä¸²æ•°æ®è¿›è¡Œå‹ç¼©æˆ–åŠ å¯†ã€‚å¦‚æœå®‰å…¨æ€§è¦æ±‚ä¸é«˜ï¼Œåˆ™å¯ä»¥ä¸ä½¿ç”¨ã€‚</li><li>ä¸æ”¯æŒç»§æ‰¿æ‰©å±•ç±»çš„åœºæ™¯ã€‚ æ¯”å¦‚ï¼Œä½¿ç”¨ final å…³é”®å­—çš„ç±»ï¼Œæˆ–è€…ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡é€šè¿‡ç»§æ‰¿äº§ç”Ÿçš„å­ç±»ã€‚</li></ul><p><strong>è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼çš„åŒºåˆ«</strong></p><p>å¯¹è£…é¥°å™¨æ¨¡å¼æ¥è¯´ï¼Œè£…é¥°è€…ï¼ˆdecoratorï¼‰å’Œè¢«è£…é¥°è€…ï¼ˆdecorateeï¼‰éƒ½å®ç°åŒä¸€ä¸ª æ¥å£ã€‚</p><p>å¯¹ä»£ç†æ¨¡å¼æ¥è¯´ï¼Œä»£ç†ç±»ï¼ˆproxy classï¼‰å’ŒçœŸå®å¤„ç†çš„ç±»ï¼ˆreal classï¼‰éƒ½å®ç°åŒä¸€ä¸ªæ¥å£ã€‚</p><p>ä»–ä»¬ä¹‹é—´çš„è¾¹ç•Œç¡®å®æ¯”è¾ƒæ¨¡ç³Šï¼Œä¸¤è€…éƒ½æ˜¯å¯¹ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œå…·ä½“åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li>è£…é¥°å™¨æ¨¡å¼å¼ºè°ƒçš„æ˜¯å¢å¼ºè‡ªèº«ï¼Œåœ¨è¢«è£…é¥°ä¹‹åä½ èƒ½å¤Ÿåœ¨è¢«å¢å¼ºçš„ç±»ä¸Šä½¿ç”¨å¢å¼ºåçš„åŠŸèƒ½ã€‚å¢å¼ºåä½ è¿˜æ˜¯ä½ ï¼Œåªä¸è¿‡èƒ½åŠ›æ›´å¼ºäº†è€Œå·²ï¼›ä»£ç†æ¨¡å¼å¼ºè°ƒè¦è®©åˆ«äººå¸®ä½ å»åšä¸€äº›æœ¬èº«ä¸ä½ ä¸šåŠ¡æ²¡æœ‰å¤ªå¤šå…³ç³»çš„èŒè´£ï¼ˆè®°å½•æ—¥å¿—ã€è®¾ç½®ç¼“å­˜ï¼‰ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†å®ç°å¯¹è±¡çš„æ§åˆ¶ï¼Œå› ä¸ºè¢«ä»£ç†çš„å¯¹è±¡å¾€å¾€éš¾ä»¥ç›´æ¥è·å¾—æˆ–è€…æ˜¯å…¶å†…éƒ¨ä¸æƒ³æš´éœ²å‡ºæ¥ã€‚</li><li>è£…é¥°æ¨¡å¼æ˜¯ä»¥å¯¹å®¢æˆ·ç«¯é€æ˜çš„æ–¹å¼æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ˜¯ç»§æ‰¿æ–¹æ¡ˆçš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼›ä»£ç†æ¨¡å¼åˆ™æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹åŸæœ‰å¯¹è±¡çš„å¼•ç”¨ï¼›</li><li>è£…é¥°æ¨¡å¼æ˜¯ä¸ºè£…é¥°çš„å¯¹è±¡å¢å¼ºåŠŸèƒ½ï¼›è€Œä»£ç†æ¨¡å¼å¯¹ä»£ç†çš„å¯¹è±¡æ–½åŠ æ§åˆ¶ï¼Œä½†ä¸å¯¹å¯¹è±¡æœ¬èº«çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºï¼›</li></ol><h1>8.JDK ç±»åº“å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</h1><p>1ï¼‰æŠ½è±¡å·¥å‚</p><ul><li>javax.xml.parsers.DocumentBuilderFactoryæŠ½è±¡ç±»</li><li>public static DocumentBuilderFactory newInstance()æ–¹æ³•</li><li>ç±»åŠŸèƒ½ï¼šä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡XMLæ–‡ä»¶ï¼Œè·å¾—ä¸€ä¸ªèƒ½ç”ŸæˆDOMå¯¹è±¡çš„è§£æå™¨ã€‚</li><li>æ–¹æ³•åŠŸèƒ½ï¼šè·å–ä¸€ä¸ªDocumentBuilderFactoryçš„æ–°å®ä¾‹ã€‚è¿™ä¸€é™æ€æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å·¥å‚å®ä¾‹ã€‚</li></ul><p>2ï¼‰å»ºé€ è€…æ¨¡å¼</p><ul><li>java.lang.StringBuilderï¼Œè¿™æ˜¯ä¸€ä¸ªfinalç±»ã€‚</li><li>public StringBuilder append(String str)æ–¹æ³•ï¼Œè¿™ä¸€æ–¹æ³•æ˜¯å¯¹çˆ¶ç±»çš„è¦†å†™ã€‚</li><li>ç±»åŠŸèƒ½ï¼šç”¨äºä¸€ä¸ªä¸å¯æ›´æ”¹çš„å­—ç¬¦åºåˆ—ã€‚</li><li>æ–¹æ³•åŠŸèƒ½ï¼šæ ¹æ®ç°æœ‰å­—ç¬¦åºåˆ—å’Œè¿½åŠ å­—ç¬¦ï¼Œé€šè¿‡ç³»ç»Ÿæ‹·è´æ–¹æ³•System.arraycopyç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦åºåˆ—ã€‚</li></ul><p>3ï¼‰å·¥å‚æ¨¡å¼</p><ul><li>java.text.NumberFormatæŠ½è±¡ç±»ã€‚</li><li>public final static NumberFormat getInstance()æ–¹æ³•ã€‚</li><li>ç±»åŠŸèƒ½ï¼šç”¨äºæ•°å­—æ ¼å¼çš„æŠ½è±¡åŸºç±»ã€‚</li><li>æ–¹æ³•åŠŸèƒ½ï¼šè¿”å›ä¸€ä¸ªâ€œå¯¹å½“å‰é»˜è®¤åœºæ™¯ä¸‹çš„ä¸€ä¸ªé€šç”¨æ•°å­—æ ¼å¼â€çš„NumberFormatã€‚æ˜¾ç„¶å±äºå·¥å‚æ¨¡å¼çš„ä½¿ç”¨ã€‚</li></ul><p>4ï¼‰åŸå‹æ¨¡å¼</p><ul><li>java.lang.Object</li><li>protected native Object clone() æ–¹æ³•</li><li>ç±»åŠŸèƒ½ï¼šæ‰€æœ‰ç±»çš„çˆ¶ç±»</li><li>æ–¹æ³•åŠŸèƒ½ï¼šæ ¹æ®ç°æœ‰å®ä¾‹ï¼Œè¿”å›ä¸€ä¸ªæµ…æ‹·è´å¯¹è±¡ã€‚</li></ul><p>5ï¼‰å•ä¾‹æ¨¡å¼</p><ul><li>java.lang.RunTimeç±»</li><li>public static Runtime getRuntime()</li><li>ç±»åŠŸèƒ½ï¼šæ¯ä¸€ä¸ªè¿è¡Œçš„javaåº”ç”¨éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„RunTimeç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹ä½¿å¾—åº”ç”¨ç¨‹åºåœ¨è¿è¡ŒæœŸé—´èƒ½å¤Ÿå—åˆ°è¿è¡Œç¯å¢ƒçš„å½±å“ã€‚</li><li>æ–¹æ³•åŠŸèƒ½ï¼šè¿”å›ä¸€ä¸ªå’Œå½“å‰javaåº”ç”¨å…³è”çš„RunTimeå¯¹è±¡ã€‚</li></ul><p>6ï¼‰é€‚é…å™¨æ¨¡å¼</p><ul><li>java.util.Arraysã€‚</li><li>public static List asList(Tâ€¦ a)æ–¹æ³•ã€‚</li><li>ç±»åŠŸèƒ½ï¼šæ­¤ç±»åŒ…å«äº†å¤§é‡å¯¹æ•°ç»„æ“ä½œçš„æ–¹æ³•ã€‚</li><li>æ–¹æ³•åŠŸèƒ½ï¼šå°†ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„æ•°ç»„è½¬ä¸ºä¸€ä¸ªListã€‚ä»è€Œå¯ä»¥ä½¿ç”¨Listç±»çš„æ“ä½œæ¥æ“ä½œæ•°ç»„å¯¹è±¡ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šå°±æ˜¯ä¸èƒ½ä½¿ç”¨add(),remove()æ“ä½œï¼Œå› ä¸ºè¿”å›çš„liståº•å±‚æ˜¯åŸºäºæ•°ç»„çš„ï¼Œæ•°ç»„ç»“æ„æ˜¯ä¸èƒ½æ›´æ”¹çš„ã€‚ listç±»å°±æ˜¯è¿™é‡Œçš„é€‚é…å™¨ï¼Œé€šè¿‡è¿™ä¸ªé€‚é…å™¨ï¼Œå¯¹æ•°ç»„çš„ç›´æ¥æ“ä½œå˜ä¸ºé—´æ¥æ“ä½œã€‚</li></ul><h1>9.Mybatisæ¡†æ¶ä¸­ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</h1><p>Builderæ¨¡å¼</p><ul><li><strong>åœ¨Mybatisç¯å¢ƒçš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œ</strong><code>SqlSessionFactoryBuilder</code>ä¼šè°ƒç”¨ <code>XMLConfigBuilder</code>è¯»å–æ‰€æœ‰çš„ <code>MybatisMapConfig.xml</code>å’Œæ‰€æœ‰çš„ <code>*Mapper.xml</code>æ–‡ä»¶ï¼Œæ„å»ºMybatisè¿è¡Œçš„æ ¸å¿ƒå¯¹è±¡ <code>Configuration</code>å¯¹è±¡ï¼Œç„¶åå°†è¯¥ <code>Configuration</code>å¯¹è±¡ä½œä¸ºå‚æ•°æ„å»ºä¸€ä¸ª <code>SqlSessionFactory</code>å¯¹è±¡ã€‚</li></ul><p>å·¥å‚æ¨¡å¼</p><ul><li><p><strong>åœ¨Mybatisä¸­æ¯”å¦‚</strong> <code>SqlSessionFactory</code>ä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ï¼Œè¯¥å·¥å‚æ²¡æœ‰é‚£ä¹ˆå¤æ‚çš„é€»è¾‘ï¼Œæ˜¯ä¸€ä¸ªç®€å•å·¥å‚æ¨¡å¼ã€‚</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/322ecc57e6094884bb48b54e607ea0a4.png" alt="image.png"></p></li><li><p><code>SqlSession</code>å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªMybatiså·¥ä½œçš„æ ¸å¿ƒçš„æ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£å¯ä»¥æ‰§è¡Œæ‰§è¡ŒSQLè¯­å¥ã€è·å–Mappersã€ç®¡ç†äº‹åŠ¡ã€‚ç±»ä¼¼äºè¿æ¥MySQLçš„ <code>Connection</code>å¯¹è±¡ã€‚</p></li></ul><p>å•ä¾‹æ¨¡å¼</p><p><strong>åœ¨Mybatisä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹ç”¨åˆ°å•ä¾‹æ¨¡å¼ï¼Œ</strong><code>ErrorContext</code>å’Œ <code>LogFactory</code>ï¼Œå…¶ä¸­ <code>ErrorContext</code>æ˜¯ç”¨åœ¨æ¯ä¸ªçº¿ç¨‹èŒƒå›´å†…çš„å•ä¾‹ï¼Œç”¨äºè®°å½•è¯¥çº¿ç¨‹çš„æ‰§è¡Œç¯å¢ƒé”™è¯¯ä¿¡æ¯ï¼Œè€Œ <code>LogFactory</code>åˆ™æ˜¯æä¾›ç»™æ•´ä¸ªMybatisä½¿ç”¨çš„æ—¥å¿—å·¥å‚ï¼Œç”¨äºè·å¾—é’ˆå¯¹é¡¹ç›®é…ç½®å¥½çš„æ—¥å¿—å¯¹è±¡ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ErrorContext</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final ThreadLocal&lt;ErrorContext&gt; LOCAL = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ErrorContext</span>()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ErrorContext <span class="title">instance</span>()</span> &#123;</span><br><span class="line">        ErrorContext context = LOCAL.<span class="keyword">get</span>();</span><br><span class="line">        <span class="keyword">if</span> (context == <span class="literal">null</span>) &#123;</span><br><span class="line">            context = <span class="keyword">new</span> ErrorContext();</span><br><span class="line">            LOCAL.<span class="keyword">set</span>(context);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°æ˜¯privateä¿®é¥°ï¼Œå…·æœ‰ä¸€ä¸ªstaticçš„å±€éƒ¨instanceå˜é‡å’Œä¸€ä¸ªè·å–instanceå˜é‡çš„æ–¹æ³•ï¼Œåœ¨è·å–å®ä¾‹çš„æ–¹æ³•ä¸­ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©ºå¦‚æœæ˜¯çš„è¯å°±å…ˆåˆ›å»ºï¼Œç„¶åè¿”å›æ„é€ å¥½çš„å¯¹è±¡ã€‚</p><p>åªæ˜¯è¿™é‡Œæœ‰ä¸ªæœ‰è¶£çš„åœ°æ–¹æ˜¯ï¼ŒLOCALçš„é™æ€å®ä¾‹å˜é‡ä½¿ç”¨äº† <code>ThreadLocal</code>ä¿®é¥°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå±äºæ¯ä¸ªçº¿ç¨‹å„è‡ªçš„æ•°æ®ï¼Œè€Œåœ¨ <code>instance()</code>æ–¹æ³•ä¸­ï¼Œå…ˆè·å–æœ¬çº¿ç¨‹çš„è¯¥å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºè¯¥çº¿ç¨‹ç‹¬æœ‰çš„ <code>ErrorContext</code>ã€‚</p><p>ä»£ç†æ¨¡å¼</p><p><strong>ä»£ç†æ¨¡å¼å¯ä»¥è®¤ä¸ºæ˜¯Mybatisçš„æ ¸å¿ƒä½¿ç”¨çš„æ¨¡å¼ï¼Œæ­£æ˜¯ç”±äºè¿™ä¸ªæ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™</strong> <code>Mapper.java</code>æ¥å£ï¼Œä¸éœ€è¦å®ç°ï¼Œç”±Mybatisåå°å¸®æˆ‘ä»¬å®Œæˆå…·ä½“SQLçš„æ‰§è¡Œã€‚</p><p>é€‚é…å™¨æ¨¡å¼</p><p>åœ¨Mybatsiçš„loggingåŒ…ä¸­ï¼Œæœ‰ä¸€ä¸ªLogæ¥å£ï¼š</p><p><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1672997686010/4d1484b110fa43eb9fd51ebdd446af66.png" alt="image.png"></p><p>è¯¥æ¥å£å®šä¹‰äº†Mybatisç›´æ¥ä½¿ç”¨çš„æ—¥å¿—æ–¹æ³•ï¼Œè€ŒLogæ¥å£å…·ä½“ç”±è°æ¥å®ç°å‘¢ï¼ŸMybatisæä¾›äº†å¤šç§æ—¥å¿—æ¡†æ¶çš„å®ç°ï¼Œè¿™äº›å®ç°éƒ½åŒ¹é…è¿™ä¸ªLogæ¥å£æ‰€å®šä¹‰çš„æ¥å£æ–¹æ³•ï¼Œæœ€ç»ˆå®ç°äº†æ‰€æœ‰å¤–éƒ¨æ—¥å¿—æ¡†æ¶åˆ°Mybatisæ—¥å¿—åŒ…çš„é€‚é…ã€‚</p><h1>10.Springæ¡†æ¶ä¸­ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</h1><p>1ï¼‰ç®€å•å·¥å‚</p><p>BeanFactoryã€‚Springä¸­çš„BeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œæ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥è·å¾—Beanå¯¹è±¡ï¼Œä½†æ˜¯å¦æ˜¯åœ¨ä¼ å…¥å‚æ•°ååˆ›å»ºè¿˜æ˜¯ä¼ å…¥å‚æ•°å‰åˆ›å»ºè¿™ä¸ªè¦æ ¹æ®å…·ä½“æƒ…å†µæ¥å®šã€‚</p><p>2ï¼‰å·¥å‚æ–¹æ³•</p><p>FactoryBeanæ¥å£</p><p>å®ç°äº†FactoryBeanæ¥å£çš„beanæ˜¯ä¸€ç±»å«åšfactoryçš„beanã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼Œspringä¼šåœ¨ä½¿ç”¨getBean()è°ƒç”¨è·å¾—è¯¥beanæ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥beançš„getObject()æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯factoryè¿™ä¸ªbeanï¼Œè€Œæ˜¯è¿™ä¸ªbean.getOjbect()æ–¹æ³•çš„è¿”å›å€¼ã€‚</p><p>3ï¼‰å•ä¾‹æ¨¡å¼</p><p>Springä¾èµ–æ³¨å…¥Beanå®ä¾‹é»˜è®¤æ˜¯å•ä¾‹çš„ã€‚</p><p>Springçš„ä¾èµ–æ³¨å…¥ï¼ˆåŒ…æ‹¬lazy-initæ–¹å¼ï¼‰éƒ½æ˜¯å‘ç”Ÿåœ¨AbstractBeanFactoryçš„getBeané‡Œã€‚getBeançš„doGetBeanæ–¹æ³•è°ƒç”¨getSingletonè¿›è¡Œbeançš„åˆ›å»ºã€‚</p><p>4ï¼‰é€‚é…å™¨æ¨¡å¼</p><p>SpringMVCä¸­çš„é€‚é…å™¨HandlerAdatperã€‚</p><p>HandlerAdatperä½¿å¾—Handlerçš„æ‰©å±•å˜å¾—å®¹æ˜“ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„Handlerå’Œä¸€ä¸ªå¯¹åº”çš„HandlerAdapterå³å¯ã€‚</p><p>å› æ­¤Springå®šä¹‰äº†ä¸€ä¸ªé€‚é…æ¥å£ï¼Œä½¿å¾—æ¯ä¸€ç§Controlleræœ‰ä¸€ç§å¯¹åº”çš„é€‚é…å™¨å®ç°ç±»ï¼Œè®©é€‚é…å™¨ä»£æ›¿controlleræ‰§è¡Œç›¸åº”çš„æ–¹æ³•ã€‚è¿™æ ·åœ¨æ‰©å±•Controlleræ—¶ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªé€‚é…å™¨ç±»å°±å®Œæˆäº†SpringMVCçš„æ‰©å±•äº†ã€‚</p><p>5ï¼‰è£…é¥°å™¨æ¨¡å¼</p><p>Springä¸­ç”¨åˆ°çš„åŒ…è£…å™¨æ¨¡å¼åœ¨ç±»åä¸Šæœ‰ä¸¤ç§è¡¨ç°ï¼šä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Wrapperï¼Œå¦ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Decoratorã€‚</p><p>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚</p><p>å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼ŒDecoratoræ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</p><p>6ï¼‰ä»£ç†æ¨¡å¼</p><p>AOPåº•å±‚ï¼Œå°±æ˜¯åŠ¨æ€ä»£ç†æ¨¡å¼çš„å®ç°ã€‚</p><p>7ï¼‰è§‚å¯Ÿè€…æ¨¡å¼</p><p>Spring åŸºäºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ç°äº†è‡ªèº«çš„äº‹ä»¶æœºåˆ¶ä¹Ÿå°±æ˜¯äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œäº‹ä»¶é©±åŠ¨æ¨¡å‹é€šå¸¸ä¹Ÿè¢«ç†è§£æˆè§‚å¯Ÿè€…æˆ–è€…å‘å¸ƒ/è®¢é˜…æ¨¡å‹ã€‚</p><p>8ï¼‰ç­–ç•¥æ¨¡å¼</p><p>Springæ¡†æ¶çš„èµ„æºè®¿é—®Resourceæ¥å£ã€‚è¯¥æ¥å£æä¾›äº†æ›´å¼ºçš„èµ„æºè®¿é—®èƒ½åŠ›ï¼ŒSpring æ¡†æ¶æœ¬èº«å¤§é‡ä½¿ç”¨äº† Resource æ¥å£æ¥è®¿é—®åº•å±‚èµ„æºã€‚</p><p>Rsource æ¥å£æ˜¯å…·ä½“èµ„æºè®¿é—®ç­–ç•¥çš„æŠ½è±¡ï¼Œä¹Ÿæ˜¯æ‰€æœ‰èµ„æºè®¿é—®ç±»æ‰€å®ç°çš„æ¥å£ã€‚</p><p>Resource æ¥å£æœ¬èº«æ²¡æœ‰æä¾›è®¿é—®ä»»ä½•åº•å±‚èµ„æºçš„å®ç°é€»è¾‘ï¼Œ<strong>é’ˆå¯¹ä¸åŒçš„åº•å±‚èµ„æºï¼ŒSpring å°†ä¼šæä¾›ä¸åŒçš„ Resource å®ç°ç±»ï¼Œä¸åŒçš„å®ç°ç±»è´Ÿè´£ä¸åŒçš„èµ„æºè®¿é—®é€»è¾‘ã€‚</strong></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»ä½¿ç”¨Mybatiså¼€å‘çš„åŸºæœ¬æ­¥éª¤ï¼Œç®€æ˜“æäº¤çœ‹Springçš„ç›¸å…³ç¬”è®°</summary>
    
    
    
    <category term="é¢è¯•" scheme="https://momoao.github.io/categories/%E9%9D%A2%E8%AF%95/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://momoao.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://momoao.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰çº§ç½‘ç»œæŠ€æœ¯</title>
    <link href="https://momoao.github.io/posts/202309121527.html"/>
    <id>https://momoao.github.io/posts/202309121527.html</id>
    <published>2023-09-11T07:30:03.000Z</published>
    <updated>2023-09-16T01:23:05.255Z</updated>
    
    <content type="html"><![CDATA[<h1>è®¡ç®—æœºä¸‰çº§ç½‘ç»œæŠ€æœ¯</h1><h1>å¾—åˆ†ç»“æ„</h1><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230908154557976.png" alt="image-20230908154557976"></p><h1>çŸ¥è¯†ç‚¹è®°å½•</h1><h2 id="ç¬¬ä¸€ç« ">ç¬¬ä¸€ç« </h2><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230908162909118.png" alt="image-20230908162909118"></p><h3 id="RPR">RPR</h3><ul><li>å¯ä»¥ä¸ºä¸åŒçš„ä¸šåŠ¡æ•°æ®åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§</li><li>èƒ½åœ¨50msçš„æ—¶é—´å†…éš”ç¦»å‡ºç°æ•…éšœçš„ç»“ç‚¹å’Œå…‰çº¤æ®µ</li><li>å†…ç¯å’Œå¤–ç¯éƒ½å¯ä»¥ç”¨äºä¼ è¾“æ•°æ®åˆ†ç»„å’Œæ§åˆ¶åˆ†ç»„</li><li>æ˜¯ä¸€ç§ç”¨äºç›´æ¥åœ¨å…‰çº¤ä¸Šé«˜æ•ˆä¼ è¾“IPåˆ†ç»„çš„ä¼ è¾“æŠ€æœ¯</li><li>æ•°æ®å¸§ç”±ç›®çš„ç»“ç‚¹å›æ”¶</li><li>åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡ŒSRPå…¬å¹³ç®—æ³•</li><li>ä¸¤ä¸ªRPRèŠ‚ç‚¹ä¹‹é—´çš„è£¸å…‰çº¤æœ€å¤§é•¿åº¦ä¸º100å…¬é‡Œ</li><li>å°†æ²¿<strong>é¡ºæ—¶é’ˆ</strong>ä¼ è¾“çš„å…‰çº¤å«åš<strong>å¤–ç¯</strong>ï¼Œå°†æ²¿<strong>é€†æ—¶é’ˆ</strong>ä¼ è¾“çš„å…‰çº¤å«åš<strong>å†…ç¯</strong>ã€‚å†…ç¯å’Œå¤–ç¯å¯ä»¥ç”¨<strong>ç»Ÿè®¡å¤ç”¨</strong>çš„æ–¹å¼ä¼ è¾“IPåˆ†ç»„<ul><li>å†…ç¯å’Œå¤–ç¯éƒ½å¯ä»¥ä¼ è¾“æ•°æ®åˆ†ç»„å’Œæ§åˆ¶åˆ†ç»„</li></ul></li></ul><h3 id="ITU">ITU</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911165341499.png" alt="image-20230911165341499"></p><p>OC-3ï¼š155.52Mbps</p><p>OC-12ï¼š622.08Mbps</p><p>OC-24ï¼š1.244Gbps</p><p>OC-48ï¼š2.488Gbps</p><p>OC-192ï¼š9.954Gbps</p><h3 id="HFC">HFC</h3><ul><li>==å…‰çº¤åŒè½´ç”µç¼†æ··åˆç½‘</li><li>æ˜¯ä¸€ä¸ªåŒå‘ä¼ è¾“ç³»ç»Ÿ</li><li>å…‰çº¤ç»“ç‚¹é€šè¿‡åŒè½´ç”µç¼†ä¸‹å¼•çº¿ä¸ºç”¨æˆ·æä¾›æœåŠ¡</li><li>ä¸ºæœ‰çº¿ç”µè§†ç”¨æˆ·æä¾›ä¸€ç§Internetæ¥å…¥æ–¹å¼</li></ul><h3 id="IPV6">IPV6</h3><p>åŒå†’å·å‹ç¼©ï¼šä¸èƒ½çœç•¥éå…¨0æ®µçš„0</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911170901677.png" alt="image-20230911170901677"></p><h3 id="IEEE802-11">IEEE802.11</h3><ul><li>å„ç§åè®®ä¼ è¾“æœ€å¤§é€Ÿç‡<ul><li>802.11bï¼š11Mbps</li><li>802.11aï¼š54Mbpsï¼ˆå·¥ä½œé¢‘æ®µ5GHzï¼Œé‡‡ç”¨äº†å¤šè½½æ³¢è°ƒåˆ¶æŠ€æœ¯ï¼‰<ul><li>802.11jï¼šæ˜¯802.11açš„è¡¥å……ï¼Œåœ¨4.9GHz~5.0GHzè¿™ä¸ªæ— çº¿é¢‘ç‡èŒƒå›´å†…å¢åŠ ä¿¡é“</li></ul></li><li>802.11gï¼š54Mbpsï¼ˆå·¥ä½œé¢‘æ®µ2.4 GHz ï¼‰</li><li>802.11nï¼š300Mbps</li></ul></li></ul><h3 id="IEEE802-16">IEEE802.16</h3><p>æä¾›å®½å¸¦åŸåŸŸç½‘ç”¨æˆ·è®¿é—®Internetæ‰€éœ€è¦çš„è·¯ç”±æœåŠ¡</p><p>ä¼ è¾“é€Ÿç‡ï¼š32~134Mbps</p><p>ä½¿ç”¨æ— çº¿é¢‘æ®µ10~66GHz</p><p>ä¸ä¹‹å¯¹åº”çš„è®ºå›ç»„ç»‡WiMAX</p><h3 id="ä»¥å¤ªç½‘æŠ€æœ¯">ä»¥å¤ªç½‘æŠ€æœ¯</h3><p>å…‰ä»¥å¤ªç½‘ç”¨å…‰ä¿¡å·æ¥ä¼ è¾“æ•°æ®ï¼Œä»¥ä¿¡å…ƒä¸ºå•ä½ä¼ è¾“æ•°æ®çš„æ˜¯ATMç½‘</p><ul><li>èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚åˆ†é…å¸¦å®½</li><li>å…·æœ‰ä¿æŠ¤ç”¨æˆ·å’Œç½‘ç»œèµ„æºå®‰å…¨çš„è®¤è¯å’ŒæˆæƒåŠŸèƒ½</li><li>æä¾›åˆ†çº§çš„QoSæœåŠ¡</li><li>æ”¯æŒMPLSï¼ˆå¤šåè®®æ ‡è®°äº¤æ¢ï¼‰åè®®</li></ul><h3 id="æ— çº¿æ¥å…¥æŠ€æœ¯">æ— çº¿æ¥å…¥æŠ€æœ¯</h3><ul><li>åˆ†ç±»<ul><li>æ— çº¿å±€åŸŸç½‘æ¥å…¥ï¼ˆIEEE  802.11æ ‡å‡†ï¼‰<ul><li>WLAN</li></ul></li><li>æ— çº¿åŸåŸŸç½‘æ¥å…¥ï¼ˆIEEE  802.16æ ‡å‡†ï¼‰<ul><li>WiMAX<ul><li>å¯ä»¥åœ¨50kmå†…æä¾›70Mbit/sçš„é€Ÿåº¦</li></ul></li></ul></li><li>Ad hocæ¥å…¥</li></ul></li></ul><p>WLAN ã€WiMAXã€Wi Fi ã€WMANã€Ad hoc</p><h3 id="å®½å¸¦æ¥å…¥æŠ€æœ¯">å®½å¸¦æ¥å…¥æŠ€æœ¯</h3><ul><li>åˆ†ç±»<ul><li>æ•°å­—ç”¨æˆ·çº¿xDSLæŠ€æœ¯</li><li>å…‰çº¤åŒè½´ç”µç¼†æ··åˆç½‘HFCæŠ€æœ¯</li><li>å…‰çº¤æ¥å…¥æŠ€æœ¯</li><li>æ— çº¿æ¥å…¥æŠ€æœ¯<ul><li>æ— çº¿å±€åŸŸç½‘æ¥å…¥</li><li>æ— çº¿åŸåŸŸç½‘æ¥å…¥</li><li>æ— çº¿Ad hocæ¥å…¥</li></ul></li><li>å±€åŸŸç½‘æ¥å…¥æŠ€æœ¯</li></ul></li></ul><h3 id="QoS">QoS</h3><p>QoSï¼ˆQuality of Serviceï¼‰æ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºç®¡ç†å’Œæ§åˆ¶ç½‘ç»œä¸Šçš„æ•°æ®æµï¼Œä»¥ç¡®ä¿ä¸åŒç±»å‹çš„æ•°æ®æµèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­å¾—åˆ°é€‚å½“çš„å¸¦å®½ã€å»¶è¿Ÿã€ä¸¢åŒ…ç‡ç­‰æœåŠ¡è´¨é‡å‚æ•°ã€‚QoSæŠ€æœ¯çš„ä¸»è¦ç›®æ ‡æ˜¯æ»¡è¶³ç½‘ç»œä¸Šä¸åŒåº”ç”¨å’ŒæœåŠ¡çš„æ€§èƒ½éœ€æ±‚ï¼Œå¹¶ç¡®ä¿å…³é”®åº”ç”¨çš„è‰¯å¥½è¿è¡Œã€‚</p><p>å±äºQoSæŠ€æœ¯çš„æœ‰</p><ul><li>Diffservï¼ˆåŒºåˆ†æœåŠ¡ï¼‰</li><li>RSVPï¼ˆèµ„æºé¢„ç•™ï¼‰</li><li>MPLSï¼ˆå¤šåè®®æ ‡è®°äº¤æ¢ï¼‰</li></ul><h3 id="APON">APON</h3><p>å…‰çº¤æ¥å…¥æŠ€æœ¯</p><h3 id="HFC-2">HFC</h3><p>æ¥å…¥æ–¹å¼é‡‡ç”¨å…±äº«å¼çš„ä¼ è¾“æ–¹å¼ï¼Œæ‰€æœ‰ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨ä¿¡å·çš„å‘é€ã€æ¥æ”¶ä½¿ç”¨åŒä¸€ä¸ªä¸Šè¡Œå’Œä¸‹è¡Œé€šé“ã€‚å› æ­¤HFCç½‘ä¸Šçš„ç”¨æˆ·è¶Šå¤šï¼Œæ¯ä¸ªç”¨æˆ·å®é™…å¯ç”¨çš„å¸¦å®½å°±è¶Šçª„</p><p><strong>ç»„æˆ</strong>ï¼šæœ‰çº¿ç”µè§†å¤´ç«¯ã€é•¿è·ç¦»å¹²çº¿ã€æ”¾å¤§å™¨ã€é¦ˆçº¿ã€ä¸‹å¼•çº¿</p><p><strong>ä¼ è¾“é€Ÿç‡</strong>:10~36Mbps</p><p>HFCé€šè¿‡ç”µç¼†è°ƒåˆ¶è§£è°ƒå™¨å°†ç”¨æˆ·è®¡ç®—æœºä¸åŒè½´ç”µç¼†è¿æ¥èµ·æ¥</p><h3 id="å…‰çº¤ä¼ è¾“ç³»ç»Ÿ">å…‰çº¤ä¼ è¾“ç³»ç»Ÿ</h3><p>ä¸­ç»§è·ç¦»å¯è¾¾100å…¬é‡Œä»¥ä¸Š</p><h3 id="Cable-Modem">Cable Modem</h3><p>åˆ©ç”¨é¢‘åˆ†å¤ç”¨(FDM)çš„æ–¹æ³•ï¼Œå°†ä¿¡é“åˆ†ä¸ºä¸Šè¡Œä¿¡é“å’Œä¸‹è¡Œä¿¡é“</p><p>æŠŠç”¨æˆ·è®¡ç®—æœºå’Œæœ‰çº¿ç”µè§†åŒè½´ç”µç¼†è¿æ¥èµ·æ¥</p><p>ä¼ è¾“é€Ÿç‡å¯è¾¾10~36Mbps</p><h3 id="æ±‡èšå±‚">æ±‡èšå±‚</h3><p>ä¸æä¾›ç”¨æˆ·è®¿é—®Internetæ‰€éœ€çš„è·¯ç”±æœåŠ¡</p><p>åŸºæœ¬åŠŸèƒ½</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911175749527.png" alt="image-20230911175749527"></p><h3 id="æ ¸å¿ƒäº¤æ¢å±‚">æ ¸å¿ƒäº¤æ¢å±‚</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911182423848.png" alt="image-20230911182423848"></p><h3 id="å®½å¸¦åŸåŸŸç½‘">å®½å¸¦åŸåŸŸç½‘</h3><p>ç»“æ„ï¼ˆä¸‰ä¸ªå¹³å°ä¸€ä¸ªå‡ºå£ï¼‰</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911175533514.png" alt="image-20230911175533514"></p><p>å…‰ä»¥å¤ªç½‘</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911180322849.png" alt="image-20230911180322849"></p><p>å¸¦å†…ç®¡ç†ï¼šåˆ©ç”¨ä¼ ç»Ÿç”µä¿¡ç½‘è¿›è¡Œçš„ç½‘ç»œç®¡ç†ï¼Œå¦‚æ•°æ®é€šä¿¡ç½‘ï¼ˆDCNï¼‰æˆ–å…¬å…±äº¤æ¢ç”µè¯ç½‘ï¼ˆPSTNï¼‰æ‹¨å·ï¼Œå¯¹ç½‘ç»œè®¾å¤‡è¿›è¡Œé…ç½®</p><p>å¸¦å¤–ç®¡ç†ï¼šåˆ©ç”¨IPåè®®è¿›è¡Œçš„ç½‘ç»œç®¡ç†ï¼Œåˆ©ç”¨çš„æ˜¯SNMPåè®®</p><h3 id="æœåŠ¡å™¨æŠ€æœ¯">æœåŠ¡å™¨æŠ€æœ¯</h3><ul><li>æœåŠ¡å™¨ç£ç›˜æ€§èƒ½è¡¨ç°åœ¨ç£ç›˜å­˜å‚¨å®¹é‡ä¸I/Oé€Ÿåº¦</li><li>æœåŠ¡å™¨<strong>å¯é æ€§</strong>é€šå¸¸ç”¨å¹³å‡æ— æ•…éšœæ—¶é—´ï¼ˆMTBFï¼‰ï¼Œç”¨å¹³å‡ç»´ä¿®æ—¶é—´ï¼ˆMTBRï¼‰æ¥åº¦é‡ç³»ç»Ÿ<strong>å¯ç»´æŠ¤æ€§</strong>ï¼Œè€Œ<strong>å¯ç”¨æ€§=MTBF/(MTBF+MTBR)</strong></li></ul><h3 id="SDN">SDN</h3><p>ä¸»è¦ç”¨äºå¹¿åŸŸç½‘ä¸­ï¼ˆè€ŒéåŸåŸŸç½‘ï¼‰</p><h3 id="ADSL">ADSL</h3><p>ä½¿ç”¨ä¸€å¯¹é“œåŒç»çº¿</p><p>ADSL Modemï¼ˆè§£è°ƒå™¨ï¼‰ç”¨äºè¿æ¥è®¡ç®—æœº</p><p>æä¾›éå¯¹ç§°å¸¦å®½ç‰¹æ€§</p><ul><li>ä¸Šè¡Œé€Ÿåº¦ï¼š64Kbit/s ~ 640Kbit/s</li><li>ä¸‹è¡Œé€Ÿåº¦ï¼š500Kbit/s ~ 7Mbit/s</li></ul><p>åœ¨ç°æœ‰ç”¨æˆ·ç”µè¯çº¿ä¸Šæ”¯æŒç”µè¯ä¸šåŠ¡å’Œæ•°å­—ä¸šåŠ¡</p><p>xDSLæŒ‰ä¸Šè¡Œå’Œä¸‹è¡Œé€Ÿç‡åˆ†ä¸ºé€Ÿç‡å¯¹ç§°å’Œéå¯¹ç§°</p><p>HDSLä¸Šè¡Œä¼ è¾“é€Ÿç‡ä¸º1.544Mbps</p><h3 id="å…‰æ¥å…¥ç½‘">å…‰æ¥å…¥ç½‘</h3><p>å…‰æ¥å…¥ç½‘ä¸é€‚å®œä½¿ç”¨å¤æ‚çš„æ¿€å…‰å™¨åŠå…¶ä»–å¤æ‚å…‰å™¨ä»¶ï¼Œä»¥å‡å°‘å¤§é‡ç”¨æˆ·æ¥å…¥æ—¶çš„å®‰è£…ã€ç»´æŠ¤çš„å·¥ä½œé‡ï¼Œä»¥é™ä½æˆæœ¬æé«˜ç³»ç»Ÿå¯é æ€§ã€‚è¿™äº›è¦æ±‚æ„å‘³ç€æ— æºå…‰æ¥å…¥ç½‘æ¯”æœ‰æºå…‰æ¥å…¥ç½‘æ›´ç¬¦åˆå®é™…åº”ç”¨</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911172000367.png" alt="image-20230911172000367"></p><h2 id="ç¬¬äºŒç« ">ç¬¬äºŒç« </h2><h3 id="ç£ç›˜é˜µåˆ—æŠ€æœ¯">ç£ç›˜é˜µåˆ—æŠ€æœ¯</h3><p>RAIDèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜ç£ç›˜å­˜å‚¨å®¹é‡ï¼Œä½†ä¸èƒ½æé«˜å®¹é”™ç‡</p><h3 id="æœåŠ¡å™¨æŠ€æœ¯-2">æœåŠ¡å™¨æŠ€æœ¯</h3><p>æ³¨æ„ï¼šé›†ç¾¤æœåŠ¡å™¨ä¸­ä¸€ä¸ªä¸»æœºå‡ºç°æ•…éšœï¼Œè™½ç„¶ä¸ä¼šå½±å“ç³»ç»Ÿçš„<strong>æ­£å¸¸æœåŠ¡</strong>ï¼Œä½†æ˜¯ä¼šå½±å“ç³»ç»Ÿçš„æ€§èƒ½</p><p>ä½¿ç”¨RISCç»“æ„å¤„ç†å™¨çš„æœåŠ¡å™¨é€šå¸¸ä½¿ç”¨<strong>UNIX</strong>æ“ä½œç³»ç»Ÿ</p><p>åˆ†å¸ƒå¼**å†…å­˜è®¿é—®æŠ€æœ¯ï¼ˆNUMAï¼‰<strong>å°†å¯¹ç§°å¤šå¤„ç†å™¨ï¼ˆSMPï¼‰å’Œ</strong>é›†ç¾¤ï¼ˆClusterï¼‰**æŠ€æœ¯ç»“åˆ</p><p><strong>ClusteræŠ€æœ¯</strong>ï¼šä¸€ä¸ªä¸»æœºä¸Šçš„ç¨‹åºå¼‚å¸¸ï¼Œè¯¥ä¸»æœºä¸Šçš„ç¨‹åºå°†ç«‹å³è½¬ç§»è‡³å…¶ä»–ä¸»æœº</p><p><strong>B/S</strong>ï¼šæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼</p><p>æœåŠ¡å™¨<strong>ç£ç›˜æ€§èƒ½</strong>ï¼šç”±ç£ç›˜å®¹é‡å’ŒI/Oé€Ÿåº¦å†³å®š</p><p>çƒ­æ’æ‹”ï¼šä¸èƒ½æ›´æ¢<strong>ä¸»èƒŒæ¿</strong>ã€<strong>ä¸»æ¿</strong></p><ul><li>ä¸ºäº†æé«˜æœåŠ¡å™¨æ€§èƒ½é‡‡ç”¨äº†ä»¥ä¸‹æŠ€æœ¯ï¼š<ul><li>å¯¹ç§°å¤šå¤„ç†ï¼ˆSMPï¼‰</li><li>é›†ç¾¤ï¼ˆClusterï¼‰</li><li>éä¸€è‡´å†…å­˜è®¿é—®ï¼ˆNUMAï¼‰</li><li>é«˜æ€§èƒ½å­˜å‚¨ä¸æ™ºèƒ½I/OæŠ€æœ¯</li><li>æœåŠ¡å¤„ç†å™¨ä¸æœåŠ¡æ§åˆ¶ï¼ˆISCï¼‰</li><li>åº”æ€¥ç®¡ç†ç«¯å£ï¼ˆEMPï¼‰</li><li>çƒ­æ’æ‹”</li></ul></li></ul><p>å‡é‡‡å–äº†é“¾è·¯å†—ä½™çš„æ–¹æ³•</p><p>æ ¸å¿ƒå±‚ç›®å‰ä¸»è¦é‡‡ç”¨GE/10GEç½‘ç»œæŠ€æœ¯</p><p>açš„æˆæœ¬é«˜ï¼Œå¯é æ€§é«˜</p><p>bæ›´æ˜“å½¢æˆå¸¦å®½ç“¶é¢ˆï¼Œå®¹æ˜“å½¢æˆå•ç‚¹æ•…éšœ</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916090403212.png" alt="image-20230916090403212"></p><h3 id="è·¯ç”±å™¨æŠ€æœ¯">è·¯ç”±å™¨æŠ€æœ¯</h3><ul><li>æ€§èƒ½æŒ‡æ ‡<ul><li>ååé‡</li><li>èƒŒæ¿èƒ½åŠ›</li><li>ä¸¢åŒ…ç‡</li><li>æ—¶å»¶ä¸æ—¶å»¶æŠ–åŠ¨</li><li>çªå‘å¤„ç†èƒ½åŠ›</li><li>è·¯ç”±è¡¨å®¹é‡</li><li>æœåŠ¡è´¨é‡</li><li>ç½‘ç®¡èƒ½åŠ›</li><li>å¯é æ€§</li><li>å¯ç”¨æ€§</li></ul></li></ul><p><strong>è·¯ç”±å™¨çš„åŒ…è½¬å‘èƒ½åŠ›</strong>ï¼šä¸<strong>ç«¯å£æ•°é‡ã€ç«¯å£é€Ÿç‡ã€åŒ…é•¿åº¦å’ŒåŒ…ç±»å‹</strong>æœ‰å…³</p><p>ååæ˜¯è·¯ç”±å™¨çš„åŒ…è½¬å‘èƒ½åŠ›</p><p><strong>èƒŒæ¿èƒ½åŠ›å†³å®šäº†è·¯ç”±å™¨çš„ååé‡</strong></p><p>è¯­éŸ³ã€è§†é¢‘ä¸šåŠ¡å¯¹å»¶æ—¶æŠ–åŠ¨è¦æ±‚<strong>è¾ƒé«˜</strong></p><p>è·¯ç”±å™¨çš„çªå‘å¤„ç†èƒ½åŠ›æ˜¯ä»¥<strong>æœ€å°å¸§é—´éš”çš„å‘é€æ•°æ®åŒ…</strong>è€Œ<strong>ä¸å¼•èµ·ä¸¢å¤±çš„æœ€å¤§å‘é€é€Ÿç‡</strong>æ¥è¡¡é‡çš„ï¼Œè€Œä¸å•å•åªæ˜¯ä»¥æœ€å°å¸§é—´éš”æ¥è¡¡é‡</p><p><strong>ä¸¢åŒ…ç‡</strong>æ˜¯è¡¡é‡è·¯ç”±å™¨è¶…è´Ÿè·å·¥ä½œèƒ½åŠ›çš„æŒ‡æ ‡ä¹‹ä¸€</p><p><strong>è·¯ç”±å™¨çš„æœåŠ¡è´¨é‡</strong>ï¼šä¸»è¦è¡¨ç°åœ¨é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ä¸æ”¯æŒçš„Qosåè®®ç±»å‹ä¸Š</p><p><strong>ä¼ ç»Ÿè·¯ç”±å™¨</strong>é‡‡ç”¨<strong>å…±äº«èƒŒæ¿</strong>çš„ç»“æ„ï¼Œ<strong>é«˜æ€§èƒ½è·¯ç”±å™¨</strong>é‡‡ç”¨<strong>å¯äº¤æ¢å¼</strong>ç»“æ„</p><p>é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ï¼šæŒ‡è·¯ç”±å™¨çš„é˜Ÿåˆ—è°ƒåº¦ç®—æ³•å’Œ<strong>æ‹¥å¡ç®¡ç†æœºåˆ¶</strong></p><p>é«˜ç«¯è·¯ç”±å™¨å¯é ä¸å¯ç”¨æ€§æŒ‡æ ‡ï¼š</p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916091237962.png" alt="image-20230916091237962"></p><h3 id="ç½‘ç»œéœ€æ±‚åˆ†æ">ç½‘ç»œéœ€æ±‚åˆ†æ</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916084311163.png" alt="image-20230916084311163"></p><h3 id="ç½‘ç»œç³»ç»Ÿåˆ†å±‚è®¾è®¡">ç½‘ç»œç³»ç»Ÿåˆ†å±‚è®¾è®¡</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230916092304990.png" alt="image-20230916092304990"></p><h2 id="é¢˜åº“">é¢˜åº“</h2><h3 id="IPåœ°å€è®¡ç®—">IPåœ°å€è®¡ç®—</h3><p>ç½‘ç»œåœ°å€ï¼šä¸»æœºä½å˜0</p><p>ç›´æ¥å¹¿æ’­åœ°å€ï¼šä¸»æœºä½å˜1</p><p>ä¸»æœºå·ï¼šç½‘ç»œä¸ºå˜0</p><p>å­ç½‘ç¬¬ä¸€ä¸ªå¯ç”¨ipåœ°å€ï¼šç½‘ç»œåœ°å€+1</p><h3 id="NATè½¬æ¢">NATè½¬æ¢</h3><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911185634062.png" alt="image-20230911185634062"></p><p><img src="../assets/image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%89%E7%BA%A7%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF_Image/image-20230911185647419.png" alt="image-20230911185647419"></p><h1>AIæ€»ç»“</h1><h2 id="ç¬¬ä¸€ç« -2">ç¬¬ä¸€ç« </h2><h3 id="RPR-2">RPR</h3><p>RPRï¼ˆRapid Spanning Tree Protocolï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„åè®®ï¼Œæ—¨åœ¨è§£å†³ç¯è·¯é—®é¢˜å’Œæé«˜ç½‘ç»œå¯é æ€§ã€‚å®ƒå…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹ç‚¹ï¼š</p><ol><li><p><strong>ç¯è·¯é˜²æŠ¤</strong>ï¼šRPRé˜²æ­¢ä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯å½¢æˆï¼Œé¿å…å¹¿æ’­é£æš´å’Œæ•°æ®åŒ…æ´ªæ³›ç­‰é—®é¢˜ï¼Œä»è€Œæé«˜ç½‘ç»œæ€§èƒ½ã€‚</p></li><li><p><strong>å¿«é€Ÿæ”¶æ•›</strong>ï¼šRPRèƒ½å¤Ÿå¿«é€Ÿæ£€æµ‹ç½‘ç»œæ•…éšœå¹¶å¿«é€Ÿæ¢å¤ï¼Œé™ä½ç½‘ç»œä¸­æ–­çš„æ—¶é—´ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„STPæ›´å¿«é€Ÿã€‚</p></li><li><p><strong>å†—ä½™è·¯å¾„</strong>ï¼šRPRæ”¯æŒå¤šä¸ªè·¯å¾„ï¼Œå½“ä¸»è·¯å¾„å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥è¿…é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œæé«˜ç½‘ç»œå¯ç”¨æ€§ã€‚</p></li><li><p><strong>QoSæ”¯æŒ</strong>ï¼šRPRå…è®¸é…ç½®ä¸åŒçš„æœåŠ¡è´¨é‡ï¼Œç¡®ä¿å…³é”®åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚</p></li><li><p><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šRPRä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œä¸éœ€è¦ä¸­å¤®æ§åˆ¶å™¨ï¼Œæé«˜äº†ç½‘ç»œçš„å¯ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§ã€‚</p></li><li><p><strong>é€‚ç”¨æ€§</strong>ï¼šRPRé€šå¸¸ç”¨äºå¤§å‹ä»¥å¤ªç½‘ç½‘ç»œï¼Œå¦‚åŸåŸŸç½‘å’Œå¹¿åŸŸç½‘ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿæ¢å¤çš„åº”ç”¨åœºæ™¯ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒRPRæŠ€æœ¯æ—¨åœ¨æ”¹å–„ä»¥å¤ªç½‘ç½‘ç»œçš„æ€§èƒ½å’Œå¯é æ€§ï¼Œé€šè¿‡é˜²æ­¢ç¯è·¯å’Œå¿«é€Ÿæ¢å¤æ•…éšœæ¥ç¡®ä¿ç½‘ç»œçš„é«˜å¯ç”¨æ€§ã€‚è¿™å¯¹äºå¤§å‹ç½‘ç»œå’Œå…³é”®åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚</p><h3 id="STP">STP</h3><p>STPï¼ˆSpanning Tree Protocolï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„åè®®ï¼Œæ—¨åœ¨é˜²æ­¢ç½‘ç»œä¸­çš„ç¯è·¯å¹¶ç¡®ä¿æ•°æ®åŒ…ä¼ è¾“çš„ç¨³å®šæ€§ã€‚STPæ˜¯IEEE 802.1Dæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ„å»ºä¸€ä¸ªæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œä»¥é¿å…å¹¿æ’­é£æš´å’Œæ•°æ®åŒ…æ´ªæ³›ã€‚</p><p>ä»¥ä¸‹æ˜¯STPæŠ€æœ¯çš„å…³é”®æ¦‚å¿µå’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>ç¯è·¯é˜²æŠ¤</strong>ï¼šSTPçš„ä¸»è¦ç›®æ ‡æ˜¯é˜²æ­¢ä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯ã€‚ç¯è·¯å¯èƒ½å¯¼è‡´æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ï¼Œä»è€Œè€—å°½ç½‘ç»œèµ„æºå¹¶é™ä½æ€§èƒ½ã€‚STPé€šè¿‡é€‰æ‹©ä¸€æ¡ä¸»è¦è·¯å¾„ï¼Œå°†å…¶ä»–å†—ä½™è·¯å¾„ç¦ç”¨ï¼Œä»¥ç¡®ä¿ç½‘ç»œä¸­ä¸å­˜åœ¨ç¯è·¯ã€‚</p></li><li><p><strong>æ¡¥å’Œäº¤æ¢æœº</strong>ï¼šSTPåè®®é€‚ç”¨äºæ¡¥å’Œäº¤æ¢æœºï¼ˆä¹Ÿç§°ä¸ºç½‘æ¡¥å’Œäº¤æ¢æœºï¼‰ï¼Œè¿™äº›è®¾å¤‡åœ¨ä»¥å¤ªç½‘ç½‘ç»œä¸­ä¼ è¾“æ•°æ®å¸§ã€‚æ¯ä¸ªæ¡¥æˆ–äº¤æ¢æœºå‚ä¸STPåè®®ï¼Œå…±åŒåå•†å¹¶ç»´æŠ¤æ‹“æ‰‘ä¿¡æ¯ã€‚</p></li><li><p><strong>æ ‘çŠ¶æ‹“æ‰‘</strong>ï¼šSTPæ„å»ºä¸€ä¸ªæ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œå…¶ä¸­ä¸€ä¸ªæ¡¥æˆ–äº¤æ¢æœºè¢«é€‰ä¸ºæ ¹æ¡¥ï¼ˆRoot Bridgeï¼‰ï¼Œæ‰€æœ‰å…¶ä»–æ¡¥æˆ–äº¤æ¢æœºéƒ½é€šè¿‡æœ€ä½³è·¯å¾„è¿æ¥åˆ°æ ¹æ¡¥ã€‚è¿™ç¡®ä¿äº†æ— ç¯çš„ç½‘ç»œæ‹“æ‰‘ã€‚</p></li><li><p><strong>ç«¯å£çŠ¶æ€</strong>ï¼šSTPå®šä¹‰äº†ç«¯å£çŠ¶æ€ï¼ŒåŒ…æ‹¬é˜»å¡ã€ç›‘å¬ã€å­¦ä¹ å’Œè½¬å‘çŠ¶æ€ã€‚åœ¨æ ‘çŠ¶æ‹“æ‰‘ä¸­ï¼Œåªæœ‰ä¸€ä¸ªç«¯å£å¤„äºè½¬å‘çŠ¶æ€ï¼Œå…¶ä½™ç«¯å£å¤„äºé˜»å¡çŠ¶æ€ï¼Œä»¥é˜²æ­¢ç¯è·¯ã€‚</p></li><li><p><strong>æ•…éšœæ¢å¤</strong>ï¼šSTPèƒ½å¤Ÿæ£€æµ‹åˆ°ç½‘ç»œä¸­çš„æ‹“æ‰‘æ›´æ”¹ï¼Œä¾‹å¦‚é“¾è·¯æ•…éšœæˆ–è®¾å¤‡æ·»åŠ /ç§»é™¤ï¼Œå¹¶è‡ªåŠ¨é‡æ–°è®¡ç®—æ‹“æ‰‘ä»¥é€‚åº”è¿™äº›æ›´æ”¹ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</p></li><li><p><strong>å¤šä¸ªå˜ç§</strong>ï¼šSTPæœ‰å‡ ä¸ªå˜ç§ï¼ŒåŒ…æ‹¬ç»å…¸STPï¼ˆCSTPï¼‰ã€å¿«é€ŸSTPï¼ˆRSTPï¼‰ï¼Œä»¥åŠæ›´å¿«é€Ÿçš„å¤šé‡å®ä¾‹STPï¼ˆMSTPï¼‰ã€‚è¿™äº›å˜ç§å¢å¼ºäº†STPçš„æ€§èƒ½å’Œå¿«é€Ÿæ•…éšœæ¢å¤èƒ½åŠ›ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒSTPæŠ€æœ¯æ˜¯ä¸€ç§ç”¨äºä»¥å¤ªç½‘ç½‘ç»œçš„å…³é”®åè®®ï¼Œæ—¨åœ¨é˜²æ­¢ç¯è·¯å¹¶ç¡®ä¿ç½‘ç»œçš„å¯é æ€§ã€‚å®ƒé€šè¿‡æ„å»ºæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼Œå¹¶èƒ½å¤Ÿåœ¨ç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è¿›è¡Œè°ƒæ•´ï¼Œä»¥ç»´æŠ¤ç½‘ç»œçš„ç¨³å®šæ€§ã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSTPçš„æ”¶æ•›é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œå› æ­¤åœ¨è¦æ±‚æ›´å¿«é€Ÿçš„ç½‘ç»œæ¢å¤çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å…¶ä»–åè®®ï¼Œå¦‚RSTPæˆ–MSTPã€‚</p><h3 id="RPRå’ŒSTPåŒºåˆ«">RPRå’ŒSTPåŒºåˆ«</h3><p>RPRï¼ˆRapid Spanning Tree Protocolï¼‰å’ŒSTPï¼ˆSpanning Tree Protocolï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„ç½‘ç»œåè®®ï¼Œç”¨äºä»¥å¤ªç½‘ç½‘ç»œä¸­çš„ç¯è·¯é˜²æŠ¤ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ï¼š</p><ol><li><p><strong>ç›®æ ‡</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRçš„ä¸»è¦ç›®æ ‡æ˜¯æé«˜ä»¥å¤ªç½‘ç½‘ç»œçš„æ¢å¤é€Ÿåº¦å’Œæ€§èƒ½ã€‚å®ƒæ—¨åœ¨å¿«é€Ÿæ£€æµ‹ç½‘ç»œä¸­çš„æ•…éšœå¹¶è¿…é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œä»¥å‡å°‘ç½‘ç»œä¸­æ–­æ—¶é—´ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPçš„ä¸»è¦ç›®æ ‡æ˜¯é˜²æ­¢ç½‘ç»œä¸­çš„ç¯è·¯ï¼Œè€Œä¸æ˜¯å¼ºè°ƒå¿«é€Ÿæ¢å¤ã€‚STPæ„å»ºä¸€ä¸ªæ— ç¯çš„æ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œç¡®ä¿æ•°æ®åŒ…ä¸ä¼šåœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯ã€‚</p></li></ul></li><li><p><strong>æ”¶æ•›é€Ÿåº¦</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRè¢«è®¾è®¡ä¸ºå¿«é€Ÿæ”¶æ•›çš„åè®®ï¼Œé€šå¸¸èƒ½å¤Ÿåœ¨æ¯«ç§’çº§åˆ«å†…æ£€æµ‹åˆ°ç½‘ç»œæ•…éšœå¹¶å¿«é€Ÿæ¢å¤ï¼Œé™ä½ç½‘ç»œä¸­æ–­çš„å½±å“ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPçš„æ”¶æ•›é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œé€šå¸¸éœ€è¦å‡ ç§’é’Ÿæˆ–æ›´é•¿æ—¶é—´æ¥æ¢å¤ç½‘ç»œã€‚è¿™æ˜¯å› ä¸ºSTPä½¿ç”¨å®šæ—¶å™¨å’ŒçŠ¶æ€æœºæ¥ç¡®å®šæœ€ä½³è·¯å¾„ï¼Œéœ€è¦ä¸€äº›æ—¶é—´æ¥è®¡ç®—å’Œé€‰æ‹©æ–°çš„è·¯å¾„ã€‚</p></li></ul></li><li><p><strong>æ‹“æ‰‘ç»“æ„</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRå…è®¸å¤šä¸ªè·¯å¾„åŒæ—¶å­˜åœ¨äºç½‘ç»œä¸­ï¼Œä»¥æé«˜å†—ä½™æ€§ã€‚å¦‚æœä¸»è·¯å¾„å‡ºç°æ•…éšœï¼ŒRPRå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨è·¯å¾„ï¼Œç¡®ä¿ç½‘ç»œçš„è¿é€šæ€§ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPæ„å»ºä¸€ä¸ªæ ‘çŠ¶æ‹“æ‰‘ç»“æ„ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªä¸»è·¯å¾„ï¼Œå…¶ä»–è·¯å¾„å¤„äºé˜»å¡çŠ¶æ€ã€‚è¿™å¯ä»¥é˜²æ­¢ç¯è·¯ï¼Œä½†æ˜¯å¯¹äºå†—ä½™è·¯å¾„çš„åˆ©ç”¨æœ‰é™ã€‚</p></li></ul></li><li><p><strong>åˆ†å¸ƒå¼ vs. é›†ä¸­å¼</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRé‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç‹¬ç«‹è¿›è¡Œå†³ç­–ï¼Œè€Œæ— éœ€ä¸­å¤®æ§åˆ¶å™¨ã€‚è¿™æé«˜äº†ç½‘ç»œçš„å¯ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPé€šå¸¸æ˜¯é›†ä¸­å¼çš„ï¼Œç½‘ç»œä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹è¢«é€‰ä¸ºæ ¹æ¡¥ï¼Œç„¶åè®¡ç®—è·¯å¾„ä»¥è¿æ¥åˆ°æ ¹æ¡¥ã€‚è¿™ç§é›†ä¸­å¼æ–¹æ³•å¯ä»¥å¯¼è‡´æ€§èƒ½ç“¶é¢ˆå’Œå•ç‚¹æ•…éšœã€‚</p></li></ul></li><li><p><strong>é€‚ç”¨æ€§</strong>:</p><ul><li><p><strong>RPR</strong>ï¼šRPRé€šå¸¸ç”¨äºåŸåŸŸç½‘ï¼ˆMetropolitan Area Networksï¼ŒMANsï¼‰å’Œå¹¿åŸŸç½‘ï¼ˆWide Area Networksï¼ŒWANsï¼‰ç­‰å¤§å‹ä»¥å¤ªç½‘ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯éœ€è¦é«˜å¯ç”¨æ€§å’Œå¿«é€Ÿæ¢å¤çš„åº”ç”¨åœºæ™¯ã€‚</p></li><li><p><strong>STP</strong>ï¼šSTPé€šå¸¸ç”¨äºå±€åŸŸç½‘ï¼ˆLocal Area Networksï¼ŒLANsï¼‰æˆ–å°å‹ç½‘ç»œï¼Œè¦æ±‚ç¯è·¯é˜²æŠ¤ï¼Œä½†å¯¹äºå¿«é€Ÿæ¢å¤æ€§èƒ½è¦æ±‚ä¸æ˜¯å¾ˆé«˜çš„æƒ…å†µã€‚</p></li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒRPRå’ŒSTPæ˜¯ä¸¤ç§ä¸åŒçš„ç¯è·¯é˜²æŠ¤åè®®ï¼Œå®ƒä»¬çš„è®¾è®¡ç›®æ ‡å’Œæ€§èƒ½ç‰¹ç‚¹æœ‰æ‰€ä¸åŒã€‚RPRå¼ºè°ƒå¿«é€Ÿæ¢å¤å’Œå†—ä½™è·¯å¾„æ”¯æŒï¼Œé€‚ç”¨äºå¤§å‹ç½‘ç»œï¼Œè€ŒSTPä¸»è¦ç”¨äºå°å‹ç½‘ç»œï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯ç¯è·¯é˜²æŠ¤ã€‚é€‰æ‹©å“ªç§åè®®å–å†³äºç½‘ç»œè§„æ¨¡ã€æ€§èƒ½è¦æ±‚å’Œç‰¹å®šçš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="FDDI">FDDI</h3><p>FDDIï¼ˆFiber Distributed Data Interfaceï¼‰æ˜¯ä¸€ç§æ—©æœŸçš„å±€åŸŸç½‘ï¼ˆLANï¼‰æŠ€æœ¯ï¼Œæœ€æ—©äº1987å¹´ç”±ç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆANSIï¼‰æ ‡å‡†åŒ–ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºå…‰çº¤å’ŒåŒç»çº¿çš„é«˜æ€§èƒ½ç½‘ç»œæŠ€æœ¯ï¼Œæ—¨åœ¨æä¾›é«˜å¸¦å®½ã€ä½å»¶è¿Ÿå’Œé«˜å¯ç”¨æ€§çš„ç½‘ç»œè¿æ¥ã€‚ä»¥ä¸‹æ˜¯å…³äºFDDIçš„ä¸»è¦ç‰¹ç‚¹å’Œç‰¹ç‚¹ï¼š</p><ol><li><p><strong>å…‰çº¤ä¼ è¾“</strong>ï¼šFDDIçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ä½¿ç”¨å…‰çº¤ä½œä¸ºä¸»è¦çš„ä¼ è¾“åª’ä»‹ã€‚å…‰çº¤å…·æœ‰é«˜å¸¦å®½ã€ä½ä¿¡å·è¡°å‡å’ŒæŠ—ç”µç£å¹²æ‰°çš„ç‰¹ç‚¹ï¼Œå› æ­¤èƒ½å¤Ÿæ”¯æŒè¿œè·ç¦»çš„æ•°æ®ä¼ è¾“ï¼Œå¹¶æä¾›è¾ƒé«˜çš„æ•°æ®ä¼ è¾“é€Ÿåº¦ã€‚</p></li><li><p><strong>åŒç¯æ‹“æ‰‘</strong>ï¼šFDDIç½‘ç»œé‡‡ç”¨åŒç¯æ‹“æ‰‘ç»“æ„ï¼Œåˆ†ä¸ºä¸»ç¯ï¼ˆPrimary Ringï¼‰å’Œå¤‡ç”¨ç¯ï¼ˆSecondary Ringï¼‰ã€‚è¿™ä¸¤ä¸ªç¯çŠ¶ç»“æ„å¯ä»¥åœ¨ç½‘ç»œæ•…éšœæ—¶æä¾›å†—ä½™è·¯å¾„ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„é«˜å¯ç”¨æ€§ã€‚å¦‚æœä¸»ç¯ä¸­çš„æŸä¸€éƒ¨åˆ†å‡ºç°æ•…éšœï¼Œæ•°æ®å°†è¢«åˆ‡æ¢åˆ°å¤‡ç”¨ç¯è·¯ï¼Œå‡ ä¹æ— æ„ŸçŸ¥åœ°ç»§ç»­ä¼ è¾“ã€‚</p></li><li><p><strong>é«˜å¸¦å®½</strong>ï¼šFDDIæ”¯æŒé«˜å¸¦å®½ï¼Œæœ€åˆçš„é€Ÿåº¦ä¸º100 Mbpsï¼ˆå…†æ¯”ç‰¹æ¯ç§’ï¼‰ã€‚åæ¥ï¼ŒFDDI-IIæ ‡å‡†æå‡ºäº†æ›´é«˜é€Ÿåº¦çš„å˜ç§ï¼Œè¾¾åˆ°äº†200 Mbpsã€‚è¿™ä½¿å¾—FDDIæˆä¸ºå½“æ—¶æ€§èƒ½æœ€é«˜çš„LANæŠ€æœ¯ä¹‹ä¸€ã€‚</p></li><li><p><strong>ä½å»¶è¿Ÿ</strong>ï¼šFDDIè®¾è®¡ç”¨äºæ”¯æŒå®æ—¶åº”ç”¨ç¨‹åºï¼Œå› æ­¤å…·æœ‰ä½å»¶è¿Ÿç‰¹æ€§ã€‚è¿™å¯¹äºéœ€è¦å¿«é€Ÿå“åº”æ—¶é—´çš„åº”ç”¨ç¨‹åºéå¸¸é‡è¦ï¼Œä¾‹å¦‚éŸ³é¢‘å’Œè§†é¢‘ä¼ è¾“ã€‚</p></li><li><p><strong>æ”¯æŒå¤šåè®®</strong>ï¼šFDDIå¯ä»¥æ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬TCP/IPã€IPX/SPXç­‰ï¼Œä½¿å…¶åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºç¯å¢ƒä¸­é€šç”¨ã€‚</p></li><li><p><strong>ç®¡ç†å’Œå¯é æ€§</strong>ï¼šFDDIå…·æœ‰å¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥ç›‘è§†ç½‘ç»œæ€§èƒ½å’Œè¯†åˆ«æ•…éšœã€‚å®ƒè¿˜å…·æœ‰è‡ªåŠ¨æ£€æµ‹å’Œçº æ­£ç¯è·¯æ•…éšœçš„èƒ½åŠ›ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</p></li><li><p><strong>ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚</strong>ï¼šFDDIå®šä¹‰äº†ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„æ ‡å‡†ï¼ŒåŒ…æ‹¬å…‰çº¤ä¼ è¾“è§„èŒƒã€å¸§æ ¼å¼å’ŒMACï¼ˆMedia Access Controlï¼‰åè®®ã€‚</p></li><li><p><strong>é€‚ç”¨æ€§</strong>ï¼šFDDIæœ€åˆè®¾è®¡ç”¨äºå¤§å‹ä¼ä¸šç½‘ç»œå’Œæ•°æ®ä¸­å¿ƒï¼Œä»¥æ»¡è¶³é«˜å¸¦å®½ã€é«˜å¯ç”¨æ€§å’Œä½å»¶è¿Ÿçš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œä»¥å¤ªç½‘ç­‰å…¶ä»–LANæŠ€æœ¯é€æ¸å´­éœ²å¤´è§’ï¼ŒFDDIåœ¨è¾ƒå°è§„æ¨¡çš„ç½‘ç»œä¸­çš„ä½¿ç”¨é€æ¸å‡å°‘ã€‚</p></li></ol><p>æ€»ä¹‹ï¼ŒFDDIæ˜¯ä¸€ç§å…‰çº¤å±€åŸŸç½‘æŠ€æœ¯ï¼Œå…·æœ‰é«˜å¸¦å®½ã€ä½å»¶è¿Ÿã€é«˜å¯ç”¨æ€§å’Œå¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ã€‚å°½ç®¡å®ƒåœ¨è¿‡å»æ›¾ç»æ˜¯ä¸»è¦çš„ç½‘ç»œæŠ€æœ¯ä¹‹ä¸€ï¼Œä½†éšç€ä»¥å¤ªç½‘ç­‰æŠ€æœ¯çš„å´­éœ²å¤´è§’ï¼ŒFDDIçš„ä½¿ç”¨é€æ¸å‡å°‘ã€‚ç„¶è€Œï¼Œå®ƒçš„ä¸€äº›ç‰¹ç‚¹ä»ç„¶åœ¨ç‰¹å®šçš„ç½‘ç»œç¯å¢ƒä¸­æœ‰ä»·å€¼ï¼Œä¾‹å¦‚éœ€è¦é«˜å¯é æ€§å’Œä½å»¶è¿Ÿçš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="ADSL-2">ADSL</h3><p>ADSLï¼ˆAsymmetric Digital Subscriber Lineï¼‰æ˜¯ä¸€ç§å¸¸è§çš„å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œç”¨äºå°†æ•°å­—æ•°æ®é€šè¿‡æ™®é€šç”µè¯çº¿ä¼ è¾“ã€‚ADSLä¹‹æ‰€ä»¥ç§°ä¸º&quot;ä¸å¯¹ç§°&quot;ï¼Œæ˜¯å› ä¸ºå®ƒæ”¯æŒä¸åŒçš„ä¸Šè¡Œï¼ˆä¸Šä¼ ï¼‰å’Œä¸‹è¡Œï¼ˆä¸‹è½½ï¼‰æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œé€šå¸¸ä¸‹è½½é€Ÿåº¦è¾ƒé«˜ï¼Œé€‚ç”¨äºå¤§å¤šæ•°å®¶åº­ç”¨æˆ·çš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³ADSLçš„ä¸»è¦ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>ä¸å¯¹ç§°é€Ÿåº¦</strong>ï¼š</p><ul><li>ä¸‹è¡Œé€Ÿåº¦ï¼ˆä»äº’è”ç½‘åˆ°ç”¨æˆ·ï¼‰é€šå¸¸æ¯”ä¸Šè¡Œé€Ÿåº¦ï¼ˆä»ç”¨æˆ·åˆ°äº’è”ç½‘ï¼‰å¿«å¾—å¤šã€‚è¿™ç§è®¾è®¡æ˜¯åŸºäºå®¶åº­ç”¨æˆ·é€šå¸¸æ›´å¤šåœ°ä¸‹è½½å†…å®¹è€Œè¾ƒå°‘ä¸Šä¼ çš„ä½¿ç”¨æ¨¡å¼ã€‚</li></ul></li><li><p><strong>ç”µè¯çº¿ä¼ è¾“</strong>ï¼š</p><ul><li>ADSLä½¿ç”¨æ™®é€šç”µè¯çº¿ï¼ˆé“œçº¿ï¼‰æ¥ä¼ è¾“æ•°å­—æ•°æ®ã€‚è¿™æ„å‘³ç€åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸éœ€è¦æ–°çš„ç”µç¼†æˆ–åŸºç¡€è®¾æ–½ï¼Œåªéœ€ä½¿ç”¨ç”µè¯çº¿æ¥å…¥ADSLå³å¯ã€‚</li></ul></li><li><p><strong>æ‹†åˆ†é¢‘æ®µ</strong>ï¼š</p><ul><li>ADSLæŠ€æœ¯å…è®¸ç”µè¯çº¿åŒæ—¶ä¼ è¾“æ¨¡æ‹Ÿç”µè¯ä¿¡å·å’Œæ•°å­—æ•°æ®ä¿¡å·ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œé¢‘è°±è¢«åˆ’åˆ†ä¸ºä¸åŒçš„é¢‘æ®µï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ç”¨äºä¼ è¾“è¯­éŸ³ä¿¡å·ï¼Œè€Œå¦ä¸€éƒ¨åˆ†ç”¨äºä¼ è¾“æ•°å­—æ•°æ®ã€‚</li></ul></li><li><p><strong>è°ƒåˆ¶ä¸è§£è°ƒåˆ¶</strong>ï¼š</p><ul><li>ADSLä¸­ï¼Œæ•°å­—æ•°æ®é€šè¿‡è°ƒåˆ¶ï¼ˆåœ¨å‘é€ç«¯ï¼‰å’Œè§£è°ƒåˆ¶ï¼ˆåœ¨æ¥æ”¶ç«¯ï¼‰çš„è¿‡ç¨‹æ¥ä¼ è¾“ã€‚è°ƒåˆ¶å°†æ•°å­—æ•°æ®è½¬æ¢æˆæ¨¡æ‹Ÿä¿¡å·ï¼Œä»¥ä¾¿é€šè¿‡ç”µè¯çº¿ä¼ è¾“ã€‚è§£è°ƒåˆ¶åˆ™å°†æ¥æ”¶åˆ°çš„ä¿¡å·è¿˜åŸä¸ºæ•°å­—æ•°æ®ã€‚</li></ul></li><li><p><strong>è·ç¦»é™åˆ¶</strong>ï¼š</p><ul><li>ADSLçš„æ€§èƒ½å—åˆ°ç”¨æˆ·å’Œæä¾›å•†ä¹‹é—´çš„è·ç¦»é™åˆ¶ã€‚é€šå¸¸ï¼Œç”¨æˆ·è¶Šè¿œç¦»æä¾›å•†çš„ä¸­å¿ƒå±€ï¼ˆDSLAMï¼ŒDSL Access Multiplexerï¼‰ï¼Œå…¶ADSLè¿æ¥é€Ÿåº¦å°±ä¼šé™ä½ã€‚è¿™æ˜¯å› ä¸ºä¿¡å·åœ¨é•¿è·ç¦»ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šé€æ¸å‡å¼±ã€‚</li></ul></li><li><p><strong>ä¸é€‚ç”¨äºå¯¹ç§°éœ€æ±‚</strong>ï¼š</p><ul><li>å°½ç®¡ADSLé€‚ç”¨äºå®¶åº­ç”¨æˆ·å’Œå°å‹ä¼ä¸šï¼Œä½†å¯¹äºéœ€è¦å¯¹ç§°ä¸Šä¼ å’Œä¸‹è½½é€Ÿåº¦çš„åº”ç”¨ï¼ˆå¦‚è§†é¢‘ä¼šè®®æˆ–è¿œç¨‹æœåŠ¡å™¨è®¿é—®ï¼‰ï¼ŒADSLå¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚</li></ul></li><li><p><strong>æ™®åŠæ€§</strong>ï¼š</p><ul><li>åœ¨è¿‡å»çš„å‡ åå¹´ä¸­ï¼ŒADSLæ›¾æ˜¯å®¶åº­å’Œå°å‹ä¼ä¸šå®½å¸¦æ¥å…¥çš„ä¸»è¦é€‰æ‹©ï¼Œå› ä¸ºå®ƒæä¾›äº†ç›¸å¯¹è¾ƒé«˜çš„ä¸‹è½½é€Ÿåº¦ï¼Œè€Œä¸”æ™®åŠç‡é«˜ã€‚ç„¶è€Œï¼Œéšç€å…‰çº¤å’Œæœ‰çº¿å®½å¸¦æŠ€æœ¯çš„å‘å±•ï¼ŒADSLåœ¨ä¸€äº›åœ°åŒºé€æ¸è¢«æ›´å¿«çš„å®½å¸¦è¿æ¥æ›¿ä»£ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼ŒADSLæ˜¯ä¸€ç§å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œé€‚ç”¨äºå®¶åº­ç”¨æˆ·å’Œå°å‹ä¼ä¸šï¼Œå› å…¶ä¾¿æ·æ€§å’Œç›¸å¯¹ä½å»‰çš„æˆæœ¬è€Œå—æ¬¢è¿ã€‚ç„¶è€Œï¼Œåœ¨éœ€è¦æ›´é«˜å¯¹ç§°å¸¦å®½æˆ–æ›´è¿œè·ç¦»è¿æ¥çš„åœºæ™¯ä¸­ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–å®½å¸¦æŠ€æœ¯ï¼Œå¦‚å…‰çº¤æˆ–æœ‰çº¿å®½å¸¦ã€‚</p><h3 id="NAT">NAT</h3><p>NATï¼Œå…¨ç§°ä¸ºNetwork Address Translationï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰ï¼Œæ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œå¸¸ç”¨äºè¿æ¥ç§æœ‰ç½‘ç»œä¸å…¬å…±äº’è”ç½‘ä¹‹é—´ï¼Œä»¥å®ç°å¤šå°è®¾å¤‡å…±äº«å•ä¸ªå…¬å…±IPåœ°å€çš„ç›®çš„ã€‚NATçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢å’Œç®¡ç†ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³NATçš„ä¸»è¦æ¦‚å¿µå’ŒåŠŸèƒ½ï¼š</p><ol><li><p><strong>IPåœ°å€è½¬æ¢</strong>ï¼š</p><ul><li>NATä¸»è¦å·¥ä½œæ˜¯å°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä½¿ç”¨ç§æœ‰IPåœ°å€ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢ã€‚ç§æœ‰IPåœ°å€é€šå¸¸ä½äºä»¥ä¸‹ä¿ç•™åœ°å€æ®µä¹‹ä¸€ï¼š10.0.0.0è‡³10.255.255.255ã€172.16.0.0è‡³172.31.255.255æˆ–192.168.0.0è‡³192.168.255.255ã€‚</li></ul></li><li><p><strong>å•ä¸€å…¬å…±IPåœ°å€</strong>ï¼š</p><ul><li>NATå…è®¸å¤šå°è®¾å¤‡åœ¨å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­ä½¿ç”¨ç›¸åŒçš„å…¬å…±IPåœ°å€è¿›è¡Œäº’è”ç½‘è®¿é—®ã€‚è¿™ç§æ–¹å¼å¯ä»¥å¸®åŠ©èŠ‚çœå…¬å…±IPåœ°å€ï¼Œå¹¶æé«˜ç½‘ç»œçš„å®‰å…¨æ€§ï¼Œå› ä¸ºå†…éƒ¨è®¾å¤‡çš„IPåœ°å€å¯¹å¤–éƒ¨ä¸å¯è§ã€‚</li></ul></li><li><p><strong>ç«¯å£æ˜ å°„</strong>ï¼š</p><ul><li>é™¤äº†IPåœ°å€è½¬æ¢ï¼ŒNATè¿˜å¯ä»¥ä½¿ç”¨ç«¯å£æ˜ å°„ï¼ˆPort Mappingï¼‰æ¥å°†å¤šä¸ªå†…éƒ¨è®¾å¤‡ä¸åŒä¸€ä¸ªå…¬å…±IPåœ°å€å…³è”èµ·æ¥ã€‚é€šè¿‡åœ¨å…¬å…±IPåœ°å€å’Œç«¯å£ä¹‹é—´å»ºç«‹æ˜ å°„ï¼ŒNATå¯ä»¥å°†å¤–éƒ¨è¯·æ±‚æ­£ç¡®è·¯ç”±åˆ°å†…éƒ¨çš„ç‰¹å®šè®¾å¤‡ä¸Šã€‚</li></ul></li><li><p><strong>ç±»å‹</strong>ï¼š</p><ul><li>æœ‰ä¸åŒç±»å‹çš„NATï¼ŒåŒ…æ‹¬é™æ€NATã€åŠ¨æ€NATå’ŒPATï¼ˆPort Address Translationï¼‰ã€‚<ul><li><strong>é™æ€NAT</strong>ï¼šä¸ºç‰¹å®šå†…éƒ¨è®¾å¤‡åˆ†é…ä¸€ä¸ªå›ºå®šçš„å…¬å…±IPåœ°å€ï¼Œé€šå¸¸ç”¨äºæœåŠ¡å™¨ç­‰éœ€è¦å¯¹å¤–éƒ¨å¯è§çš„è®¾å¤‡ã€‚</li><li><strong>åŠ¨æ€NAT</strong>ï¼šä¸ºå†…éƒ¨è®¾å¤‡åŠ¨æ€åˆ†é…å…¬å…±IPåœ°å€ï¼Œé€šå¸¸æ˜¯ä»ä¸€ä¸ªå¯ç”¨çš„åœ°å€æ± ä¸­é€‰æ‹©ã€‚</li><li><strong>PAT</strong>ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„NATï¼Œå®ƒä½¿ç”¨å•ä¸ªå…¬å…±IPåœ°å€ï¼Œå¹¶é€šè¿‡ä¸åŒçš„ç«¯å£å·æ¥åŒºåˆ†ä¸åŒçš„å†…éƒ¨è®¾å¤‡ã€‚</li></ul></li></ul></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼š</p><ul><li>NATæä¾›ä¸€å®šç¨‹åº¦çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå†…éƒ¨è®¾å¤‡çš„IPåœ°å€å¯¹å¤–éƒ¨äº’è”ç½‘ä¸å¯è§ã€‚è¿™å¯ä»¥é˜²æ­¢å¤–éƒ¨ç½‘ç»œç›´æ¥è®¿é—®å†…éƒ¨è®¾å¤‡ï¼Œæé«˜äº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚</li></ul></li><li><p><strong>IPv4åœ°å€æ¯ç«­é—®é¢˜</strong>ï¼š</p><ul><li>NATä¹Ÿæœ‰åŠ©äºç¼“è§£IPv4åœ°å€çŸ­ç¼ºé—®é¢˜ï¼Œå› ä¸ºå®ƒå…è®¸å¤šä¸ªå†…éƒ¨è®¾å¤‡å…±äº«ä¸€ä¸ªå…¬å…±IPåœ°å€ã€‚è¿™å¯¹äºé¢ä¸´IPåœ°å€ä¸è¶³é—®é¢˜çš„ç½‘ç»œéå¸¸é‡è¦ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>NATå¸¸ç”¨äºå®¶åº­ç½‘ç»œè·¯ç”±å™¨ã€ä¼ä¸šç½‘ç»œå’Œäº‘è®¡ç®—ç¯å¢ƒä¸­ï¼Œä»¥å…è®¸å¤šä¸ªè®¾å¤‡åœ¨å†…éƒ¨ç½‘ç»œä¸­è®¿é—®äº’è”ç½‘ã€‚å®ƒä¹Ÿç”¨äºåœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­ç®¡ç†è™šæ‹Ÿæœºçš„ç½‘ç»œè¿æ¥ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼ŒNATæ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºå°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡ä¸å¤–éƒ¨äº’è”ç½‘ä¹‹é—´çš„é€šä¿¡è¿›è¡Œè½¬æ¢å’Œç®¡ç†ï¼Œä»¥å®ç°å¤šä¸ªè®¾å¤‡å…±äº«å•ä¸ªå…¬å…±IPåœ°å€çš„ç›®çš„ã€‚å®ƒå¯¹ç½‘ç»œçš„å®‰å…¨æ€§å’ŒIPv4åœ°å€æ¯ç«­é—®é¢˜éƒ½æœ‰ç§¯æçš„å½±å“ã€‚</p><h3 id="æ•°å­—ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·">æ•°å­—ä¿¡å·å’Œæ¨¡æ‹Ÿä¿¡å·</h3><p>æ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·æ˜¯ä¸¤ç§ä¸åŒç±»å‹çš„ä¿¡å·ï¼Œå®ƒä»¬åœ¨ç”µå­é€šä¿¡å’Œä¿¡æ¯å¤„ç†ä¸­å…·æœ‰é‡è¦ä½œç”¨ã€‚ä»¥ä¸‹æ˜¯æœ‰å…³æ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·çš„ä¸»è¦ç‰¹ç‚¹å’ŒåŒºåˆ«ï¼š</p><p><strong>æ¨¡æ‹Ÿä¿¡å·ï¼ˆAnalog Signalsï¼‰</strong>ï¼š</p><ol><li><p><strong>è¿ç»­æ€§</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ï¼Œå®ƒä»¬å¯ä»¥åœ¨ä¸€å®šèŒƒå›´å†…å–ä»»æ„å€¼ã€‚åœ¨æ¨¡æ‹Ÿä¿¡å·ä¸­ï¼Œä¿¡å·çš„å€¼åœ¨æ—¶é—´ä¸Šä¸æ–­å˜åŒ–ï¼Œå¯ä»¥é‡‡ç”¨æ— é™æ•°é‡çš„å€¼ã€‚</p></li><li><p><strong>æ³¢å½¢</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·å¯ä»¥å‘ˆç°ä¸ºè¿ç»­çš„æ³¢å½¢ï¼Œå¦‚æ­£å¼¦æ³¢ã€ä½™å¼¦æ³¢æˆ–ä»»ä½•å¤æ‚çš„æ³¢å½¢ã€‚è¿™äº›æ³¢å½¢è¡¨ç¤ºä¿¡å·åœ¨æ—¶é—´ä¸Šçš„å˜åŒ–ã€‚</p></li><li><p><strong>ç‰©ç†è¡¨ç¤º</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·é€šå¸¸ç”±è¿ç»­çš„ç‰©ç†é‡è¡¨ç¤ºï¼Œä¾‹å¦‚ç”µå‹ã€ç”µæµæˆ–å£°éŸ³å‹åŠ›ã€‚è¿™äº›ç‰©ç†é‡çš„å˜åŒ–å¯¹åº”äºä¿¡å·çš„å˜åŒ–ã€‚</p></li><li><p><strong>ç²¾åº¦</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·çš„ç²¾åº¦å—åˆ°å™ªå£°å’Œå¹²æ‰°çš„å½±å“ï¼Œå¯èƒ½å­˜åœ¨ä¿¡å·å¤±çœŸã€‚å› æ­¤ï¼Œä¿æŒä¿¡å·çš„è´¨é‡éœ€è¦é‡‡å–ä¸€äº›æªæ–½ï¼Œå¦‚æ»¤æ³¢å’Œæ”¾å¤§ã€‚</p></li><li><p><strong>ç”¨é€”</strong>ï¼šæ¨¡æ‹Ÿä¿¡å·å¸¸ç”¨äºä¼ è¾“è¿ç»­çš„ä¿¡æ¯ï¼Œå¦‚éŸ³é¢‘ã€è§†é¢‘å’Œä¼ æ„Ÿå™¨æ•°æ®ã€‚ä¼ ç»Ÿçš„ç”µè¯çº¿è·¯å°±æ˜¯ä¸€ä¸ªä¼ è¾“æ¨¡æ‹Ÿä¿¡å·çš„ä¾‹å­ã€‚</p></li></ol><p><strong>æ•°å­—ä¿¡å·ï¼ˆDigital Signalsï¼‰</strong>ï¼š</p><ol><li><p><strong>ç¦»æ•£æ€§</strong>ï¼šæ•°å­—ä¿¡å·æ˜¯ç¦»æ•£çš„ï¼Œå®ƒä»¬åªèƒ½å–æœ‰é™æ•°é‡çš„ç¦»æ•£å€¼ã€‚åœ¨æ•°å­—ä¿¡å·ä¸­ï¼Œä¿¡å·çš„å€¼ä»¥ç¦»æ•£çš„æ­¥è¿›æ–¹å¼å˜åŒ–ã€‚</p></li><li><p><strong>è¡¨ç¤º</strong>ï¼šæ•°å­—ä¿¡å·é€šå¸¸è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ä»£ç ï¼Œå³ç”±ä¸€ç³»åˆ—0å’Œ1ç»„æˆçš„åºåˆ—ã€‚æ¯ä¸ªäºŒè¿›åˆ¶æ•°å­—ä»£è¡¨ä¿¡å·çš„ç¦»æ•£å€¼ã€‚</p></li><li><p><strong>æŠ—å¹²æ‰°æ€§</strong>ï¼šæ•°å­—ä¿¡å·åœ¨ä¼ è¾“å’Œå¤„ç†è¿‡ç¨‹ä¸­å¯¹å™ªå£°å’Œå¹²æ‰°å…·æœ‰è¾ƒå¼ºçš„æŠ—æ€§ã€‚ç”±äºä¿¡å·æ˜¯ä»¥ç¦»æ•£å€¼è¡¨ç¤ºçš„ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°æ£€æµ‹å’Œçº æ­£ä¼ è¾“ä¸­çš„é”™è¯¯ã€‚</p></li><li><p><strong>ç²¾åº¦</strong>ï¼šæ•°å­—ä¿¡å·çš„ç²¾åº¦é€šå¸¸è¾ƒé«˜ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä»¥è¶³å¤Ÿé«˜çš„åˆ†è¾¨ç‡è¡¨ç¤ºä¿¡å·ï¼Œä»¥ä¾¿å‡†ç¡®ä¼ è¾“å’Œå¤„ç†ã€‚</p></li><li><p><strong>ç”¨é€”</strong>ï¼šæ•°å­—ä¿¡å·å¹¿æ³›ç”¨äºè®¡ç®—æœºå’Œæ•°å­—é€šä¿¡ä¸­ï¼ŒåŒ…æ‹¬äº’è”ç½‘ã€æ•°å­—éŸ³é¢‘å’Œè§†é¢‘ä¼ è¾“ã€æ•°å­—ç”µè§†å’Œç§»åŠ¨é€šä¿¡ç­‰é¢†åŸŸã€‚æ•°å­—ä¿¡å·ä¹Ÿç”¨äºæ•°å­—ç”µå­è®¾å¤‡çš„å†…éƒ¨é€šä¿¡å’Œå¤„ç†ã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œæ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„ã€å…·æœ‰æ— é™å¯èƒ½å€¼çš„ä¿¡å·ï¼Œé€šå¸¸ç”¨äºä¼ è¾“è¿ç»­çš„ä¿¡æ¯ã€‚è€Œæ•°å­—ä¿¡å·æ˜¯ç¦»æ•£çš„ã€ä»¥äºŒè¿›åˆ¶ä»£ç è¡¨ç¤ºçš„ä¿¡å·ï¼Œå¯¹å™ªå£°å…·æœ‰è¾ƒå¼ºçš„æŠ—æ€§ï¼Œå¹¿æ³›ç”¨äºæ•°å­—åŒ–ä¿¡æ¯å’Œæ•°æ®çš„å¤„ç†ã€ä¼ è¾“å’Œå­˜å‚¨ã€‚åœ¨ç°ä»£é€šä¿¡å’Œä¿¡æ¯æŠ€æœ¯ä¸­ï¼Œæ•°å­—ä¿¡å·é€šå¸¸æ›´ä¸ºå¸¸è§ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰é«˜ç²¾åº¦å’ŒæŠ—å¹²æ‰°æ€§ï¼Œé€‚ç”¨äºæ•°å­—ç³»ç»Ÿä¸­çš„å¤šç§åº”ç”¨ã€‚</p><h3 id="åœ°å€åˆ’åˆ†">åœ°å€åˆ’åˆ†</h3><p>IPv4åœ°å€ç©ºé—´è¢«åˆ†ä¸ºäº”ä¸ªä¸åŒçš„åœ°å€ç±»åˆ«ï¼šAã€Bã€Cã€Då’ŒEã€‚æ¯ä¸ªåœ°å€ç±»åˆ«éƒ½å…·æœ‰ä¸åŒçš„åœ°å€èŒƒå›´å’Œç”¨é€”ã€‚ä»¥ä¸‹æ˜¯å„ä¸ªIPv4åœ°å€ç±»åˆ«çš„åœ°å€èŒƒå›´ï¼š</p><ol><li><p><strong>Aç±»åœ°å€</strong>ï¼š</p><ul><li>Aç±»åœ°å€ç”¨äºå¤§å‹ç½‘ç»œï¼Œé€šå¸¸ç”±å¤§å‹ç»„ç»‡ã€æ”¿åºœæœºæ„æˆ–äº’è”ç½‘æœåŠ¡æä¾›å•†ä½¿ç”¨ã€‚Aç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º0ã€‚Aç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»1.0.0.0åˆ°126.0.0.0ï¼Œå…¶ä¸­æœ€å°çš„Aç±»åœ°å€æ˜¯1.0.0.0ï¼Œè€Œæœ€å¤§çš„Aç±»åœ°å€æ˜¯126.255.255.255ã€‚Aç±»åœ°å€ä¸­æœ‰16,777,214ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Bç±»åœ°å€</strong>ï¼š</p><ul><li>Bç±»åœ°å€ç”¨äºä¸­å‹ç½‘ç»œï¼Œé€šå¸¸ç”±ä¸­ç­‰è§„æ¨¡çš„ç»„ç»‡æˆ–å…¬å¸ä½¿ç”¨ã€‚Bç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º10ã€‚Bç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»128.0.0.0åˆ°191.255.0.0ï¼Œå…¶ä¸­æœ€å°çš„Bç±»åœ°å€æ˜¯128.0.0.0ï¼Œè€Œæœ€å¤§çš„Bç±»åœ°å€æ˜¯191.255.255.255ã€‚Bç±»åœ°å€ä¸­æœ‰65,534ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Cç±»åœ°å€</strong>ï¼š</p><ul><li>Cç±»åœ°å€ç”¨äºå°å‹ç½‘ç»œï¼Œé€šå¸¸ç”±å°å‹ä¼ä¸šæˆ–ç»„ç»‡ä½¿ç”¨ã€‚Cç±»åœ°å€çš„ç‰¹ç‚¹æ˜¯å…¶é«˜ä½å­—èŠ‚çš„æœ€é«˜ä½ä¸º110ã€‚Cç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»192.0.0.0åˆ°223.255.255.0ï¼Œå…¶ä¸­æœ€å°çš„Cç±»åœ°å€æ˜¯192.0.0.0ï¼Œè€Œæœ€å¤§çš„Cç±»åœ°å€æ˜¯223.255.255.255ã€‚Cç±»åœ°å€ä¸­æœ‰254ä¸ªå¯ç”¨çš„ä¸»æœºåœ°å€ã€‚</li></ul></li><li><p><strong>Dç±»åœ°å€</strong>ï¼š</p><ul><li>Dç±»åœ°å€ç”¨äºå¤šæ’­ï¼ˆMulticastï¼‰é€šä¿¡ã€‚å¤šæ’­åœ°å€ç”¨äºä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šçš„é€šä¿¡ï¼Œè€Œä¸æ˜¯ä¸€å¯¹ä¸€çš„é€šä¿¡ã€‚Dç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»224.0.0.0åˆ°239.255.255.255ã€‚</li></ul></li><li><p><strong>Eç±»åœ°å€</strong>ï¼š</p><ul><li>Eç±»åœ°å€ä¿ç•™ç”¨äºå®éªŒå’Œç ”ç©¶ï¼Œä¸ç”¨äºæ­£å¼çš„äº’è”ç½‘é€šä¿¡ã€‚Eç±»åœ°å€çš„åœ°å€èŒƒå›´æ˜¯ä»240.0.0.0åˆ°255.255.255.255ã€‚</li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›åœ°å€èŒƒå›´ä¸­çš„ä¸€äº›åœ°å€å·²è¢«ä¿ç•™ç”¨äºç‰¹å®šç”¨é€”ï¼Œå¦‚ç§æœ‰åœ°å€ç©ºé—´ã€ä¿ç•™åœ°å€å’Œå¤šæ’­åœ°å€ã€‚æ­¤å¤–ï¼ŒIPv4åœ°å€ç©ºé—´å·²ç»è€—å°½ï¼ŒIPv6è¢«å¹¿æ³›é‡‡ç”¨ä»¥åº”å¯¹IPv4åœ°å€çŸ­ç¼ºé—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å®é™…ç½‘ç»œä¸­ï¼ŒIPv6åœ°å€åˆ†é…å·²ç»å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚</p><h3 id="POS">POS</h3><p>åœ¨è®¡ç®—æœºç½‘ç»œæŠ€æœ¯ä¸­ï¼ŒPOSï¼ˆPoint of Saleï¼‰æŠ€æœ¯é€šå¸¸æŒ‡çš„æ˜¯ä¸é›¶å”®ä¸šåŠ¡ç›¸å…³çš„è®¡ç®—æœºç³»ç»Ÿå’Œè®¾å¤‡ï¼Œç”¨äºå¤„ç†é”€å”®äº¤æ˜“å’Œç®¡ç†å•†åº—æˆ–ä¼ä¸šçš„é”€å”®æ´»åŠ¨ã€‚POSæŠ€æœ¯åœ¨é›¶å”®ã€é¤é¥®å’ŒæœåŠ¡è¡Œä¸šä¸­å¹¿æ³›åº”ç”¨ï¼Œä»¥æé«˜äº¤æ˜“æ•ˆç‡ã€ç®¡ç†åº“å­˜ã€è·Ÿè¸ªé”€å”®æ•°æ®ç­‰ã€‚ä»¥ä¸‹æ˜¯è®¡ç®—æœºç½‘ç»œä¸­çš„POSæŠ€æœ¯çš„å…³é”®æ–¹é¢ï¼š</p><ol><li><p><strong>POSç»ˆç«¯</strong>ï¼š</p><ul><li>POSç³»ç»Ÿé€šå¸¸åŒ…æ‹¬POSç»ˆç«¯ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„è®¡ç®—æœºè®¾å¤‡æˆ–åº”ç”¨ç¨‹åºï¼Œç”¨äºå¤„ç†äº¤æ˜“ã€‚POSç»ˆç«¯é€šå¸¸ä¸ç½‘ç»œè¿æ¥ï¼Œä»¥ä¾¿ä¸åç«¯æœåŠ¡å™¨æˆ–æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä»¥è·å–äº§å“ä»·æ ¼ã€åº“å­˜ä¿¡æ¯ç­‰ã€‚</li></ul></li><li><p><strong>ç½‘ç»œè¿æ¥</strong>ï¼š</p><ul><li>POSç»ˆç«¯éœ€è¦ä¸åç«¯æœåŠ¡å™¨æˆ–äº‘æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œä»¥è·å–å®æ—¶çš„äº§å“ä¿¡æ¯ã€ä»·æ ¼ã€åº“å­˜çŠ¶æ€ç­‰ã€‚è¿™é€šå¸¸éœ€è¦ç½‘ç»œè¿æ¥ï¼Œå¯ä»¥æ˜¯æœ‰çº¿æˆ–æ— çº¿ç½‘ç»œï¼Œä»¥ç¡®ä¿å¿«é€Ÿå’Œå¯é çš„äº¤æ˜“å¤„ç†ã€‚</li></ul></li><li><p><strong>æ”¯ä»˜å¤„ç†</strong>ï¼š</p><ul><li>POSæŠ€æœ¯é€šå¸¸åŒ…æ‹¬æ”¯ä»˜å¤„ç†åŠŸèƒ½ï¼Œå…è®¸å®¢æˆ·ä½¿ç”¨å„ç§æ”¯ä»˜æ–¹å¼ï¼Œå¦‚ä¿¡ç”¨å¡ã€å€Ÿè®°å¡ã€ç§»åŠ¨æ”¯ä»˜ã€ç°é‡‘ç­‰ï¼Œå®Œæˆäº¤æ˜“ã€‚æ”¯ä»˜ä¿¡æ¯éœ€è¦å®‰å…¨ä¼ è¾“å’Œå¤„ç†ï¼Œå› æ­¤ç½‘ç»œè¿æ¥é€šå¸¸ä¼šé‡‡ç”¨åŠ å¯†å’Œå®‰å…¨åè®®ã€‚</li></ul></li><li><p><strong>åº“å­˜ç®¡ç†</strong>ï¼š</p><ul><li>POSç³»ç»Ÿèƒ½å¤Ÿè·Ÿè¸ªåº“å­˜æ°´å¹³ï¼Œä»¥ä¾¿åœ¨é”€å”®äº§å“æ—¶æ›´æ–°åº“å­˜ã€‚å½“äº§å“å”®ç½„æˆ–åº“å­˜ä½äºé˜ˆå€¼æ—¶ï¼ŒPOSç³»ç»Ÿå¯ä»¥è‡ªåŠ¨å‘å‡ºè®¢å•æˆ–æé†’åº“å­˜ç®¡ç†äººå‘˜ã€‚</li></ul></li><li><p><strong>é”€å”®æ•°æ®å’ŒæŠ¥å‘Š</strong>ï¼š</p><ul><li>POSç³»ç»Ÿè®°å½•æ¯ç¬”äº¤æ˜“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬äº§å“ã€ä»·æ ¼ã€æ—¥æœŸã€æ—¶é—´ç­‰ã€‚è¿™äº›æ•°æ®å¯ç”¨äºç”Ÿæˆé”€å”®æŠ¥å‘Šå’Œåˆ†æï¼Œå¸®åŠ©å•†å®¶äº†è§£é”€å”®è¶‹åŠ¿ã€äº§å“æµè¡Œåº¦ç­‰ä¿¡æ¯ã€‚</li></ul></li><li><p><strong>å®¢æˆ·ç®¡ç†</strong>ï¼š</p><ul><li>ä¸€äº›POSç³»ç»ŸåŒ…æ‹¬å®¢æˆ·ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸å•†å®¶è·Ÿè¸ªå®¢æˆ·è´­ä¹°å†å²ã€å‘é€ä¿ƒé”€ä¿¡æ¯ã€ç®¡ç†å®¢æˆ·ç§¯åˆ†æˆ–å¥–åŠ±è®¡åˆ’ç­‰ã€‚</li></ul></li><li><p><strong>äº‘POS</strong>ï¼š</p><ul><li>æœ€è¿‘ï¼Œäº‘POSæŠ€æœ¯ä¹Ÿé€æ¸æµè¡Œèµ·æ¥ã€‚äº‘POSç³»ç»Ÿå°†POSæ•°æ®å­˜å‚¨åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå…è®¸å•†å®¶è¿œç¨‹è®¿é—®å’Œç®¡ç†POSæ•°æ®ï¼Œæ— è®ºåœ¨ä½•åœ°éƒ½å¯ä»¥æŸ¥çœ‹é”€å”®æ•°æ®ã€‚</li></ul></li><li><p><strong>å®‰å…¨æ€§</strong>ï¼š</p><ul><li>POSæŠ€æœ¯å¿…é¡»å…·å¤‡é«˜åº¦çš„å®‰å…¨æ€§ï¼Œä»¥ä¿æŠ¤æ”¯ä»˜ä¿¡æ¯å’Œå®¢æˆ·æ•°æ®ã€‚è¿™åŒ…æ‹¬åŠ å¯†æ•°æ®ä¼ è¾“ã€å®‰å…¨è®¿é—®æ§åˆ¶ã€é˜²æ­¢æ¶æ„è½¯ä»¶æ”»å‡»ç­‰å®‰å…¨æªæ–½ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œè®¡ç®—æœºç½‘ç»œä¸­çš„POSæŠ€æœ¯æ˜¯ç”¨äºå¤„ç†é”€å”®å’Œç®¡ç†é›¶å”®ä¸šåŠ¡çš„å…³é”®å·¥å…·ã€‚å®ƒé€šè¿‡ç½‘ç»œè¿æ¥ã€æ”¯ä»˜å¤„ç†ã€åº“å­˜ç®¡ç†ã€æ•°æ®åˆ†æç­‰åŠŸèƒ½ï¼Œå¸®åŠ©å•†å®¶æé«˜äº¤æ˜“æ•ˆç‡ã€æä¾›æ›´å¥½çš„å®¢æˆ·æœåŠ¡ï¼Œå¹¶ä¸ºç»è¥å†³ç­–æä¾›æœ‰ç”¨çš„æ•°æ®ã€‚</p><h3 id="SDN-2">SDN</h3><p>SDNï¼ˆSoftware-Defined Networkingï¼‰æŠ€æœ¯æ˜¯ä¸€ç§ç½‘ç»œæ¶æ„å’Œç®¡ç†æ–¹æ³•ï¼Œå®ƒé€šè¿‡å°†ç½‘ç»œæ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰ä¸æ•°æ®è½¬å‘å¹³é¢ï¼ˆData Planeï¼‰åˆ†ç¦»ï¼Œå¹¶å°†ç½‘ç»œæ§åˆ¶é€»è¾‘é›†ä¸­åŒ–ï¼Œä»¥å®ç°æ›´çµæ´»ã€å¯ç¼–ç¨‹å’Œè‡ªåŠ¨åŒ–çš„ç½‘ç»œç®¡ç†ã€‚ä¸‹é¢æ˜¯å…³äºSDNæŠ€æœ¯çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li><p><strong>æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢åˆ†ç¦»</strong>ï¼šä¼ ç»Ÿç½‘ç»œè®¾å¤‡å¦‚è·¯ç”±å™¨å’Œäº¤æ¢æœºé€šå¸¸å°†æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢é›†æˆåœ¨ä¸€èµ·ï¼Œè¿™æ„å‘³ç€ç½‘ç»œçš„æ§åˆ¶é€»è¾‘ä¸æ•°æ®åŒ…çš„å¤„ç†åœ¨åŒä¸€è®¾å¤‡ä¸Šå®Œæˆã€‚SDNå°†è¿™ä¸¤ä¸ªå¹³é¢åˆ†å¼€ï¼Œå…è®¸ç½‘ç»œç®¡ç†å‘˜é›†ä¸­ç®¡ç†ç½‘ç»œç­–ç•¥ï¼Œè€Œæ•°æ®å¹³é¢è®¾å¤‡åˆ™è´Ÿè´£æ ¹æ®è¿™äº›ç­–ç•¥æ¥è½¬å‘æ•°æ®åŒ…ã€‚</p></li><li><p><strong>SDNæ§åˆ¶å™¨</strong>ï¼šSDNç½‘ç»œçš„æ ¸å¿ƒæ˜¯SDNæ§åˆ¶å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸­å¤®å®ä½“ï¼Œè´Ÿè´£ç®¡ç†ç½‘ç»œè®¾å¤‡å’Œè·¯ç”±æµé‡ã€‚æµè¡Œçš„SDNæ§åˆ¶å™¨åŒ…æ‹¬OpenDaylightã€ONOSã€Floodlightå’ŒCiscoçš„APIC-EMç­‰ã€‚è¿™äº›æ§åˆ¶å™¨æä¾›äº†ä¸€ç§æ¥å£ï¼Œå…è®¸ç®¡ç†å‘˜å®šä¹‰ç½‘ç»œç­–ç•¥ã€ç›‘æ§æµé‡å¹¶åŠ¨æ€é…ç½®ç½‘ç»œè®¾å¤‡ã€‚</p></li><li><p><strong>ç½‘ç»œå¯ç¼–ç¨‹æ€§</strong>ï¼šSDNä½¿ç½‘ç»œæ›´åŠ å¯ç¼–ç¨‹ï¼Œå…è®¸ç®¡ç†å‘˜æ ¹æ®åº”ç”¨ç¨‹åºéœ€æ±‚åŠ¨æ€é…ç½®ç½‘ç»œç­–ç•¥ã€‚è¿™ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒåº”ç”¨çš„è¦æ±‚ï¼Œä»è€Œæä¾›æ›´é«˜çš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚</p></li><li><p><strong>è‡ªåŠ¨åŒ–</strong>ï¼šSDNæŠ€æœ¯å¯ä»¥è‡ªåŠ¨åŒ–è®¸å¤šç½‘ç»œç®¡ç†ä»»åŠ¡ï¼Œä¾‹å¦‚æµé‡å·¥ç¨‹ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ã€‚é€šè¿‡é›†ä¸­åŒ–çš„æ§åˆ¶ï¼Œç½‘ç»œç®¡ç†å‘˜å¯ä»¥æ›´è½»æ¾åœ°å®æ–½è¿™äº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œæé«˜äº†ç½‘ç»œçš„å¯é æ€§å’Œæ•ˆç‡ã€‚</p></li><li><p><strong>SDNåè®®</strong>ï¼šåœ¨SDNä¸­ï¼ŒOpenFlowæ˜¯æœ€å¸¸ç”¨çš„é€šä¿¡åè®®ä¹‹ä¸€ï¼Œç”¨äºåœ¨æ§åˆ¶å™¨å’Œæ•°æ®å¹³é¢è®¾å¤‡ä¹‹é—´ä¼ é€’æµé‡è½¬å‘è§„åˆ™ã€‚æ­¤å¤–ï¼Œå…¶ä»–åè®®å¦‚NETCONFå’ŒRESTful APIä¹Ÿå¯ä»¥ç”¨äºSDNæ§åˆ¶å™¨ä¸ç½‘ç»œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚</p></li><li><p><strong>SDNçš„ä¼˜åŠ¿</strong>ï¼šSDNæŠ€æœ¯æä¾›äº†æ›´å¥½çš„ç½‘ç»œç®¡ç†å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œæœ‰åŠ©äºé™ä½è¿è¥æˆæœ¬ã€‚å®ƒè¿˜å…è®¸ç½‘ç»œæ›´å¥½åœ°é€‚åº”æ–°çš„åº”ç”¨éœ€æ±‚ï¼Œæé«˜äº†ç½‘ç»œçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p></li><li><p><strong>SDNçš„åº”ç”¨</strong>ï¼šSDNæŠ€æœ¯å¹¿æ³›åº”ç”¨äºæ•°æ®ä¸­å¿ƒç½‘ç»œã€å¹¿åŸŸç½‘ï¼ˆWANï¼‰ã€ç”µä¿¡ç½‘ç»œå’Œä¼ä¸šç½‘ç»œä¸­ã€‚å®ƒåœ¨è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘ï¼ˆIoTï¼‰å’Œ5Gç½‘ç»œç­‰é¢†åŸŸéƒ½æœ‰ç€é‡è¦çš„ä½œç”¨ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSDNæŠ€æœ¯è™½ç„¶å…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›æŒ‘æˆ˜ï¼Œä¾‹å¦‚å®‰å…¨æ€§å’Œå¤æ‚æ€§ã€‚ç½‘ç»œç®¡ç†å‘˜éœ€è¦ä»”ç»†è€ƒè™‘å¦‚ä½•æœ‰æ•ˆåœ°éƒ¨ç½²å’Œç®¡ç†SDNç½‘ç»œï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</p><h3 id="QoS-2">QoS</h3><p>QoSï¼ˆQuality of Serviceï¼‰æ˜¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºç®¡ç†å’Œæ§åˆ¶ç½‘ç»œä¸Šçš„æ•°æ®æµï¼Œä»¥ç¡®ä¿ä¸åŒç±»å‹çš„æ•°æ®æµèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­å¾—åˆ°é€‚å½“çš„å¸¦å®½ã€å»¶è¿Ÿã€ä¸¢åŒ…ç‡ç­‰æœåŠ¡è´¨é‡å‚æ•°ã€‚QoSæŠ€æœ¯çš„ä¸»è¦ç›®æ ‡æ˜¯æ»¡è¶³ç½‘ç»œä¸Šä¸åŒåº”ç”¨å’ŒæœåŠ¡çš„æ€§èƒ½éœ€æ±‚ï¼Œå¹¶ç¡®ä¿å…³é”®åº”ç”¨çš„è‰¯å¥½è¿è¡Œã€‚</p><p>ä»¥ä¸‹æ˜¯QoSæŠ€æœ¯çš„ä¸»è¦ç»„æˆéƒ¨åˆ†å’Œç›¸å…³æ¦‚å¿µï¼š</p><ol><li><p><strong>å¸¦å®½ç®¡ç†</strong>ï¼šQoSçš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯å¸¦å®½ç®¡ç†ï¼Œå®ƒæ¶‰åŠåˆ†é…å’Œæ§åˆ¶ç½‘ç»œä¸­å¯ç”¨å¸¦å®½çš„æ–¹å¼ã€‚è¿™åŒ…æ‹¬å¸¦å®½åˆ†é…ã€å¸¦å®½ä¿éšœã€å¸¦å®½è°ƒæ•´ç­‰ç­–ç•¥ï¼Œä»¥ç¡®ä¿é‡è¦åº”ç”¨èƒ½å¤Ÿè·å¾—è¶³å¤Ÿçš„å¸¦å®½ã€‚</p></li><li><p><strong>æµé‡åˆ†ç±»</strong>ï¼šQoSæŠ€æœ¯æ ¹æ®æµé‡çš„ç‰¹æ€§å¯¹æ•°æ®æµè¿›è¡Œåˆ†ç±»ã€‚é€šå¸¸ï¼Œæµé‡å¯ä»¥åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œå¦‚å®æ—¶æµé‡ï¼ˆä¾‹å¦‚VoIPå’Œè§†é¢‘æµï¼‰ã€äº¤äº’å¼æµé‡ï¼ˆä¾‹å¦‚Webæµè§ˆï¼‰å’Œåå°ä¼ è¾“æµé‡ï¼ˆä¾‹å¦‚æ–‡ä»¶ä¸‹è½½ï¼‰ã€‚è¿™äº›ä¸åŒçš„ç±»åˆ«é€šå¸¸éœ€è¦ä¸åŒçš„QoSå¤„ç†ã€‚</p></li><li><p><strong>æ ‡è®°å’Œæ ‡ç­¾</strong>ï¼šä¸ºäº†å¯¹ä¸åŒçš„æ•°æ®æµåº”ç”¨QoSç­–ç•¥ï¼Œç½‘ç»œè®¾å¤‡é€šå¸¸ä½¿ç”¨æ ‡è®°æˆ–æ ‡ç­¾æ¥è¯†åˆ«æµé‡ã€‚è¿™äº›æ ‡è®°å¯ä»¥é€šè¿‡ä¸åŒçš„å­—æ®µï¼ˆå¦‚DiffServæˆ–802.1pæ ‡å¤´å­—æ®µï¼‰æ·»åŠ åˆ°æ•°æ®åŒ…ä¸­ï¼Œå¹¶åœ¨ç½‘ç»œä¸­è·¯ç”±å’Œå¤„ç†æ•°æ®åŒ…æ—¶å‚è€ƒã€‚</p></li><li><p><strong>æµé‡æ§åˆ¶</strong>ï¼šQoSæŠ€æœ¯å…è®¸ç®¡ç†å‘˜è®¾ç½®æµé‡æ§åˆ¶ç­–ç•¥ï¼Œä»¥æ§åˆ¶æ•°æ®æµçš„é€Ÿç‡å’Œä¼˜å…ˆçº§ã€‚è¿™åŒ…æ‹¬æµé‡è°ƒåº¦ã€é˜Ÿåˆ—ç®¡ç†å’Œæ‹¥å¡æ§åˆ¶ç­‰æŠ€æœ¯ï¼Œä»¥ç¡®ä¿é«˜ä¼˜å…ˆçº§æµé‡åœ¨ç½‘ç»œä¸­å¾—åˆ°åŠæ—¶ä¼ è¾“ã€‚</p></li><li><p><strong>æ‹¥å¡ç®¡ç†</strong>ï¼šæ‹¥å¡æ˜¯ç½‘ç»œä¸­å¸¸è§çš„é—®é¢˜ï¼Œä¼šå¯¼è‡´æ•°æ®åŒ…ä¸¢å¤±å’Œå»¶è¿Ÿå¢åŠ ã€‚QoSæŠ€æœ¯å¯ä»¥å¸®åŠ©ç½‘ç»œè®¾å¤‡è¯†åˆ«å’Œåº”å¯¹æ‹¥å¡æƒ…å†µï¼Œä¾‹å¦‚é€šè¿‡é™ä½ä½ä¼˜å…ˆçº§æµé‡çš„é€Ÿç‡æ¥ä¿æŠ¤é«˜ä¼˜å…ˆçº§æµé‡ã€‚</p></li><li><p><strong>ç­–ç•¥é…ç½®</strong>ï¼šQoSç­–ç•¥é€šå¸¸éœ€è¦åœ¨ç½‘ç»œè®¾å¤‡ä¸Šè¿›è¡Œé…ç½®ã€‚è¿™åŒ…æ‹¬è®¾ç½®æµé‡åˆ†ç±»ã€æ ‡è®°å’Œæ ‡ç­¾ã€å®šä¹‰å¸¦å®½é™åˆ¶å’Œä¼˜å…ˆçº§ã€é…ç½®é˜Ÿåˆ—ç­‰ã€‚</p></li><li><p><strong>ç›‘æµ‹å’ŒæŠ¥å‘Š</strong>ï¼šQoSæŠ€æœ¯é€šå¸¸éœ€è¦ç›‘æµ‹ç½‘ç»œæ€§èƒ½ï¼Œå¹¶ç”ŸæˆæŠ¥å‘Šä»¥è¯„ä¼°QoSç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚è¿™å¯ä»¥é€šè¿‡ç½‘ç»œç›‘æ§å·¥å…·å’ŒQoSæŠ¥å‘Šç”Ÿæˆå™¨æ¥å®ç°ã€‚</p></li></ol><p>QoSæŠ€æœ¯åœ¨å„ç§ç½‘ç»œç¯å¢ƒä¸­éƒ½æœ‰é‡è¦åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦æ”¯æŒå®æ—¶åº”ç”¨ç¨‹åºï¼ˆå¦‚VoIPå’Œè§†é¢‘ä¼šè®®ï¼‰çš„ä¼ä¸šç½‘ç»œã€äº‘è®¡ç®—ç¯å¢ƒå’Œç”µä¿¡ç½‘ç»œä¸­ã€‚é€šè¿‡æœ‰æ•ˆå®æ–½QoSç­–ç•¥ï¼Œå¯ä»¥æä¾›æ›´ç¨³å®šã€å¯é å’Œé«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡ï¼Œç¡®ä¿é‡è¦åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="HFC-3">HFC</h3><p>HFCï¼ˆHybrid Fiber-Coaxialï¼‰æ˜¯ä¸€ç§é€šä¿¡ç½‘ç»œæ¶æ„ï¼Œé€šå¸¸ç”¨äºæä¾›æœ‰çº¿ç”µè§†å’Œå®½å¸¦äº’è”ç½‘æœåŠ¡ã€‚HFCç½‘ç»œç»“åˆäº†å…‰çº¤ï¼ˆFiberï¼‰å’ŒåŒè½´ç”µç¼†ï¼ˆCoaxial Cableï¼‰ä¸¤ç§ä¸åŒçš„ä¼ è¾“ä»‹è´¨ï¼Œä»¥å®ç°é«˜é€Ÿæ•°æ®ä¼ è¾“å’Œå¹¿æ’­ç”µè§†ä¿¡å·çš„åˆ†å‘ã€‚ä»¥ä¸‹æ˜¯HFCç½‘ç»œçš„ä¸€äº›å…³é”®ç‰¹ç‚¹å’Œç»„æˆéƒ¨åˆ†ï¼š</p><ol><li><p><strong>å…‰çº¤éƒ¨åˆ†</strong>ï¼š</p><ul><li>HFCç½‘ç»œçš„æ ¸å¿ƒæ˜¯å…‰çº¤ï¼ˆå…‰å¯¼çº¤ç»´ï¼‰ï¼Œé€šå¸¸ç”±å…‰ç¼†ç»„æˆã€‚å…‰çº¤å…·æœ‰é«˜å¸¦å®½å’Œä½æŸè€—çš„ç‰¹ç‚¹ï¼Œä½¿å…¶èƒ½å¤Ÿä¼ è¾“å¤§é‡æ•°æ®ï¼ŒåŒæ—¶å…·æœ‰è¾ƒé•¿çš„ä¼ è¾“è·ç¦»ã€‚</li><li>åœ¨HFCç½‘ç»œä¸­ï¼Œå…‰çº¤é€šå¸¸å»¶ä¼¸åˆ°ç½‘ç»œæä¾›å•†çš„ä¸­å¤®åŠå…¬å®¤ï¼ˆHeadendï¼‰æˆ–æ•°æ®ä¸­å¿ƒã€‚</li></ul></li><li><p><strong>åŒè½´ç”µç¼†éƒ¨åˆ†</strong>ï¼š</p><ul><li>ä»ä¸­å¤®åŠå…¬å®¤å»¶ä¼¸å‡ºæ¥çš„å…‰çº¤é€šå¸¸ä¼šè¿æ¥åˆ°åŒè½´ç”µç¼†ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç”µç¼†ï¼Œå…·æœ‰è¾ƒé«˜çš„ä¿¡å·ä¼ è¾“èƒ½åŠ›ã€‚</li><li>åŒè½´ç”µç¼†åœ¨æœ€åä¸€è‹±é‡Œï¼ˆLast Mileï¼‰æˆ–ç”¨æˆ·å®¶åº­é™„è¿‘çš„ç½‘ç»œä¸­ç”¨äºä¼ è¾“æ•°æ®å’Œç”µè§†ä¿¡å·ã€‚å®ƒé€šå¸¸åˆ†ä¸ºå¤šä¸ªä¿¡å·é¢‘å¸¦ï¼Œæ¯ä¸ªé¢‘å¸¦ç”¨äºä¸åŒçš„ç›®çš„ã€‚</li></ul></li><li><p><strong>åˆ†é…å™¨å’Œæ”¾å¤§å™¨</strong>ï¼š</p><ul><li>åœ¨HFCç½‘ç»œä¸­ï¼Œå…‰çº¤åˆ°è¾¾è¡—åŒºï¼ˆé€šå¸¸ç§°ä¸ºèŠ‚ç‚¹ï¼‰çš„åœ°æ–¹ï¼Œç„¶åé€šè¿‡åˆ†é…å™¨å°†ä¿¡å·åˆ†å‘åˆ°å„ä¸ªç”¨æˆ·å®¶åº­ã€‚</li><li>æ”¾å¤§å™¨ï¼ˆAmplifiersï¼‰ç”¨äºå¢å¼ºä¿¡å·ï¼Œä»¥å¼¥è¡¥ä¿¡å·åœ¨åŒè½´ç”µç¼†ä¸­çš„ä¼ è¾“æŸè€—ã€‚è¿™äº›æ”¾å¤§å™¨é€šå¸¸ä½äºåŒè½´ç”µç¼†çš„ä¸åŒä½ç½®ï¼Œä»¥ç¡®ä¿ä¿¡å·è´¨é‡ã€‚</li></ul></li><li><p><strong>æ•°æ®å’Œç”µè§†ä¿¡å·</strong>ï¼š</p><ul><li>HFCç½‘ç»œæ—¨åœ¨æ”¯æŒå¤šç§æœåŠ¡ï¼ŒåŒ…æ‹¬å®½å¸¦äº’è”ç½‘ã€æœ‰çº¿ç”µè§†å’Œç”µè¯æœåŠ¡ã€‚å…‰çº¤éƒ¨åˆ†ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“ï¼Œè€ŒåŒè½´ç”µç¼†éƒ¨åˆ†åŒæ—¶ç”¨äºå¹¿æ’­ç”µè§†ä¿¡å·çš„ä¼ è¾“ã€‚</li><li>æ•°æ®ä¿¡å·é€šå¸¸é‡‡ç”¨æ•°å­—ä¼ è¾“ï¼Œè€Œç”µè§†ä¿¡å·å¯ä»¥æ˜¯æ¨¡æ‹Ÿæˆ–æ•°å­—ä¿¡å·ï¼Œå…·ä½“å–å†³äºç½‘ç»œæä¾›å•†çš„æŠ€æœ¯å’ŒæœåŠ¡ã€‚</li></ul></li><li><p><strong>åŒå‘é€šä¿¡</strong>ï¼š</p><ul><li>HFCç½‘ç»œé€šå¸¸æ˜¯åŒå‘çš„ï¼Œå…è®¸ç”¨æˆ·åŒæ—¶ä¸‹è½½å’Œä¸Šä¼ æ•°æ®ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå®½å¸¦äº’è”ç½‘æœåŠ¡ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç½‘ç»œä¸Šä¼ å’Œä¸‹è½½å¤§æ–‡ä»¶ã€æµåª’ä½“å†…å®¹ç­‰ã€‚</li></ul></li><li><p><strong>ç½‘ç»œæä¾›å•†</strong>ï¼š</p><ul><li>HFCç½‘ç»œé€šå¸¸ç”±ç”µè§†æœ‰çº¿è¿è¥å•†æˆ–äº’è”ç½‘æœåŠ¡æä¾›å•†æä¾›å’Œç»´æŠ¤ã€‚è¿™äº›æä¾›å•†é€šè¿‡HFCç½‘ç»œå‘ç”¨æˆ·æä¾›å¤šç§æœåŠ¡ï¼Œå¹¶é€šå¸¸ä¼šæä¾›æœ‰çº¿ç”µè§†ã€å®½å¸¦äº’è”ç½‘å’Œç”µè¯æœåŠ¡çš„æ†ç»‘å¥—é¤ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒHFCç½‘ç»œæ˜¯ä¸€ç§çµæ´»ä¸”å¤šç”¨é€”çš„é€šä¿¡ç½‘ç»œæ¶æ„ï¼Œå®ƒç»“åˆäº†å…‰çº¤çš„é«˜é€Ÿæ•°æ®ä¼ è¾“èƒ½åŠ›å’ŒåŒè½´ç”µç¼†çš„å¹¿æ’­ç”µè§†ä¿¡å·ä¼ è¾“èƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›äº†å¤šç§é€šä¿¡å’Œå¨±ä¹æœåŠ¡ã€‚ç„¶è€Œï¼Œéšç€æŠ€æœ¯çš„å‘å±•ï¼Œä¸€äº›åœ°åŒºæ­£åœ¨é€æ¸å‡çº§åˆ°æ›´å…ˆè¿›çš„çº¯å…‰çº¤ç½‘ç»œï¼Œä»¥æä¾›æ›´é«˜çš„é€Ÿåº¦å’Œæ€§èƒ½ã€‚</p><h3 id="MPLS">MPLS</h3><p>MPLSï¼ˆMultiprotocol Label Switchingï¼‰æ˜¯ä¸€ç§ç”¨äºæ„å»ºé«˜æ•ˆã€çµæ´»å’Œå¯ç®¡ç†çš„æ•°æ®ç½‘ç»œçš„é€šä¿¡åè®®å’ŒæŠ€æœ¯ã€‚å®ƒå°†ä¼ ç»Ÿçš„IPè·¯ç”±å’Œæ•°æ®åŒ…äº¤æ¢ä¸æ ‡ç­¾äº¤æ¢ç›¸ç»“åˆï¼Œä¸ºæ•°æ®åŒ…åœ¨ç½‘ç»œä¸­çš„ä¼ è¾“æä¾›äº†æ›´é«˜çš„æ€§èƒ½å’Œè´¨é‡ã€‚</p><p>ä»¥ä¸‹æ˜¯MPLSçš„å…³é”®ç‰¹ç‚¹å’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>æ ‡ç­¾äº¤æ¢</strong>ï¼š</p><ul><li>MPLSå¼•å…¥äº†ä¸€ä¸ªç§°ä¸º&quot;æ ‡ç­¾&quot;çš„æ•°æ®åŒ…å¤´éƒ¨ä¿¡æ¯ï¼Œç”¨äºæ ‡è¯†æ•°æ®åŒ…çš„è·¯ç”±å’Œå¤„ç†æ–¹å¼ã€‚</li><li>è¿™äº›æ ‡ç­¾æ˜¯çŸ­ã€å›ºå®šé•¿åº¦çš„å€¼ï¼Œè¢«é™„åŠ åˆ°æ•°æ®åŒ…çš„å¤´éƒ¨ï¼Œä»¥ä¾¿è·¯ç”±å™¨å’Œäº¤æ¢æœºèƒ½å¤Ÿå¿«é€ŸæŸ¥æ‰¾å’Œè½¬å‘æ•°æ®åŒ…ï¼Œè€Œä¸å¿…è¿›è¡Œå¤æ‚çš„IPè·¯ç”±æŸ¥æ‰¾ã€‚</li></ul></li><li><p><strong>æ ‡ç­¾äº¤æ¢çš„ä¼˜ç‚¹</strong>ï¼š</p><ul><li>æ›´å¿«çš„æ•°æ®åŒ…è½¬å‘é€Ÿåº¦ï¼šç”±äºæ ‡ç­¾æŸ¥æ‰¾é€Ÿåº¦æ¯”ä¼ ç»ŸIPè·¯ç”±æ›´å¿«ï¼ŒMPLSå¯ä»¥å®ç°æ›´é«˜çš„æ•°æ®åŒ…è½¬å‘é€Ÿåº¦ï¼Œé€‚ç”¨äºè¦æ±‚ä½å»¶è¿Ÿçš„åº”ç”¨ã€‚</li><li>çµæ´»æ€§ï¼šMPLSå¯ä»¥æ ¹æ®æ ‡ç­¾çš„å€¼æ¥å®ç°æµé‡å·¥ç¨‹ã€è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç®¡ç†ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç½‘ç»œè¿è¥å•†å’Œä¼ä¸šçš„éœ€æ±‚ã€‚</li></ul></li><li><p><strong>æ ‡ç­¾åˆ†å‘å’Œäº¤æ¢</strong>ï¼š</p><ul><li>MPLSç½‘ç»œä¸­çš„è·¯ç”±å™¨å’Œäº¤æ¢æœºè¢«ç§°ä¸º&quot;MPLSèŠ‚ç‚¹&quot;ï¼Œå®ƒä»¬è´Ÿè´£ä¸ºæ•°æ®åŒ…åˆ†å‘å’Œäº¤æ¢æ ‡ç­¾ã€‚</li><li>å½“æ•°æ®åŒ…è¿›å…¥MPLSç½‘ç»œæ—¶ï¼Œç¬¬ä¸€ä¸ªMPLSèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯è¾¹ç¼˜è·¯ç”±å™¨ï¼‰ä¼šåˆ†é…ä¸€ä¸ªæ ‡ç­¾ï¼Œå¹¶å°†å…¶é™„åŠ åˆ°æ•°æ®åŒ…å¤´éƒ¨ã€‚</li><li>æ•°æ®åŒ…åœ¨MPLSç½‘ç»œä¸­æ ¹æ®æ ‡ç­¾è¿›è¡Œè·¯ç”±ï¼Œæ¯ä¸ªMPLSèŠ‚ç‚¹æ ¹æ®æ ‡ç­¾å†³å®šæ•°æ®åŒ…çš„ä¸‹ä¸€è·³ã€‚</li><li>å½“æ•°æ®åŒ…ç¦»å¼€MPLSç½‘ç»œæ—¶ï¼Œæœ€åä¸€ä¸ªMPLSèŠ‚ç‚¹ä¼šå°†æ ‡ç­¾ç§»é™¤ï¼Œå°†æ•°æ®åŒ…å‘é€åˆ°ç›®æ ‡ã€‚</li></ul></li><li><p><strong>MPLSåº”ç”¨</strong>ï¼š</p><ul><li>MPLSå¹¿æ³›ç”¨äºæ„å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼ˆVPNï¼‰å’Œå¤šåè®®æ ‡ç­¾äº¤æ¢ï¼ˆMPLS-VPNï¼‰ã€‚</li><li>å®ƒä¹Ÿç”¨äºæ”¯æŒæœåŠ¡æä¾›å•†ç½‘ç»œä¸­çš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç®¡ç†ã€æµé‡å·¥ç¨‹å’Œè´Ÿè½½å‡è¡¡ã€‚</li><li>MPLSè¿˜åœ¨å¹¿åŸŸç½‘ï¼ˆWANï¼‰å’Œæ•°æ®ä¸­å¿ƒç½‘ç»œä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œä»¥æä¾›é«˜æ€§èƒ½çš„äº’è”äº’é€šã€‚</li></ul></li><li><p><strong>MPLSä¸IP</strong>ï¼š</p><ul><li>MPLSä¸IPæ˜¯å¯ä»¥ååŒå·¥ä½œçš„æŠ€æœ¯ã€‚äº‹å®ä¸Šï¼ŒMPLSå¯ä»¥åœ¨ç°æœ‰çš„IPç½‘ç»œä¸Šéƒ¨ç½²ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŠ¿ã€‚</li><li>MPLSé€šå¸¸ä¸BGPï¼ˆBorder Gateway Protocolï¼‰ç­‰è·¯ç”±åè®®ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®å®šæ•°æ®åŒ…çš„è·¯å¾„å’Œæ ‡ç­¾åˆ†å‘ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒMPLSæ˜¯ä¸€ç§å¼ºå¤§çš„ç½‘ç»œæŠ€æœ¯ï¼Œç”¨äºæé«˜æ•°æ®ç½‘ç»œçš„æ€§èƒ½ã€å¯ç®¡ç†æ€§å’Œè´¨é‡ã€‚å®ƒåœ¨æä¾›å¹¿åŸŸç½‘è¿æ¥ã€å»ºç«‹è™šæ‹Ÿä¸“ç”¨ç½‘ç»œã€å®ç°æœåŠ¡è´¨é‡ç®¡ç†ç­‰æ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œå¹¶åœ¨å¤§å‹ä¼ä¸šç½‘ç»œã€äº‘æœåŠ¡å’Œç”µä¿¡ç½‘ç»œä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚</p><h3 id="é¢‘åˆ†å¤ç”¨">é¢‘åˆ†å¤ç”¨</h3><p>é¢‘åˆ†å¤ç”¨ï¼ˆFrequency Division Multiplexingï¼ŒFDMï¼‰æ˜¯ä¸€ç§å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œç”¨äºåœ¨é€šä¿¡ç³»ç»Ÿä¸­å°†å¤šä¸ªç‹¬ç«‹çš„ä¿¡å·æˆ–æ•°æ®æµåˆå¹¶æˆä¸€ä¸ªå¤åˆä¿¡å·ï¼Œå¹¶é€šè¿‡ä¸åŒçš„é¢‘ç‡å°†å®ƒä»¬ä¼ è¾“åˆ°ç›®æ ‡æ¥æ”¶ç«¯ã€‚è¿™ä¸ªæŠ€æœ¯å…è®¸å¤šä¸ªä¿¡å·åŒæ—¶å…±äº«ä¼ è¾“ä»‹è´¨ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</p><p>ä»¥ä¸‹æ˜¯é¢‘åˆ†å¤ç”¨çš„ä¸€äº›å…³é”®æ¦‚å¿µå’Œå·¥ä½œåŸç†ï¼š</p><ol><li><p><strong>ä¿¡å·åˆ†ç¦»</strong>ï¼š</p><ul><li>åœ¨é¢‘åˆ†å¤ç”¨ä¸­ï¼Œæ¯ä¸ªç‹¬ç«‹çš„ä¿¡å·æˆ–æ•°æ®æµè¢«åˆ†é…åˆ°ä¸åŒçš„é¢‘ç‡å¸¦å®½ä¸Šã€‚</li><li>æ¯ä¸ªä¿¡å·é€šå¸¸ç»è¿‡ä¸€ä¸ªè°ƒåˆ¶å™¨ï¼ˆModulatorï¼‰ï¼Œå°†å…¶è½¬æ¢æˆå¯ä»¥åœ¨ç‰¹å®šé¢‘æ®µå†…ä¼ è¾“çš„ä¿¡å·ã€‚</li></ul></li><li><p><strong>åˆå¹¶å’Œä¼ è¾“</strong>ï¼š</p><ul><li>åˆå¹¶å™¨ï¼ˆMultiplexerï¼‰è´Ÿè´£å°†æ‰€æœ‰åˆ†é…ç»™ä¸åŒé¢‘ç‡çš„ä¿¡å·åˆå¹¶æˆä¸€ä¸ªå¤åˆä¿¡å·ã€‚</li><li>å¤åˆä¿¡å·éšåè¢«ä¼ è¾“åˆ°é€šä¿¡åª’ä»‹ï¼ˆå¦‚ç”µç¼†ã€å…‰çº¤æˆ–ç©ºä¸­ä¼ è¾“ï¼‰ä¸Šï¼Œä»¥ä¾¿ä¼ è¾“åˆ°æ¥æ”¶ç«¯ã€‚</li></ul></li><li><p><strong>é¢‘ç‡é€‰æ‹©</strong>ï¼š</p><ul><li>æ¥æ”¶ç«¯ä½¿ç”¨ä¸€ä¸ªåˆ†é¢‘å™¨ï¼ˆDemultiplexerï¼‰æ¥é€‰æ‹©ç‰¹å®šé¢‘ç‡å¸¦å®½ï¼Œå¹¶å°†å…¶åˆ†ç¦»æˆç‹¬ç«‹çš„ä¿¡å·ã€‚</li><li>æ¯ä¸ªåˆ†ç¦»å‡ºçš„ä¿¡å·ç»è¿‡è§£è°ƒå™¨ï¼ˆDemodulatorï¼‰ä»¥è¿˜åŸåŸå§‹æ•°æ®æˆ–ä¿¡æ¯ã€‚</li></ul></li><li><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨å…è®¸å¤šä¸ªä¿¡å·å¹¶è¡Œä¼ è¾“ï¼Œè€Œä¸ä¼šå¹²æ‰°å½¼æ­¤ã€‚</li><li>å®ƒå¯ä»¥æé«˜é€šä¿¡ç³»ç»Ÿçš„æ•ˆç‡ï¼Œå…è®¸å¤šä¸ªç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºå…±äº«é€šä¿¡é€šé“ï¼Œä»è€Œå‡å°‘äº†é€šä¿¡ç³»ç»Ÿçš„æˆæœ¬ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨å¹¿æ³›åº”ç”¨äºå„ç§é€šä¿¡ç³»ç»Ÿï¼ŒåŒ…æ‹¬æœ‰çº¿ç”µè§†ã€å¹¿æ’­ã€å«æ˜Ÿé€šä¿¡ã€ç§»åŠ¨é€šä¿¡å’Œè®¡ç®—æœºç½‘ç»œç­‰ã€‚</li><li>åœ¨ç§»åŠ¨é€šä¿¡é¢†åŸŸï¼Œä¸åŒçš„ç§»åŠ¨ç”µè¯ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„é¢‘æ®µï¼Œä»¥ä¾¿åœ¨åŒä¸€æ—¶é—´å…±äº«ç›¸åŒçš„é€šä¿¡åŸºç¡€è®¾æ–½ã€‚</li></ul></li><li><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>é¢‘åˆ†å¤ç”¨çš„ä¸»è¦ç¼ºç‚¹æ˜¯éœ€è¦è¶³å¤Ÿçš„é¢‘å¸¦å®½æ¥å®¹çº³æ‰€æœ‰ä¿¡å·ã€‚å¦‚æœé¢‘å¸¦å®½åº¦ä¸è¶³ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¿¡å·é‡å å’Œå¹²æ‰°ã€‚</li><li>å®ƒä¹Ÿå¯èƒ½åœ¨ä¿¡é“çš„ä¼ è¾“è·ç¦»è¾ƒé•¿æˆ–å¸¦å®½æœ‰é™çš„æƒ…å†µä¸‹æ•ˆç‡ä¸é«˜ã€‚</li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢‘åˆ†å¤ç”¨æ˜¯ä¸€ç§ä¼ ç»Ÿçš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œè™½ç„¶ä»ç„¶åœ¨ä¸€äº›åº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œä½†åœ¨ä¸€äº›ç°ä»£é€šä¿¡ç³»ç»Ÿä¸­ï¼Œä¾‹å¦‚æ•°å­—é€šä¿¡å’Œå…‰çº¤é€šä¿¡ï¼Œæ›´é«˜çº§çš„å¤ç”¨æŠ€æœ¯å¦‚æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰å’Œç åˆ†å¤ç”¨ï¼ˆCDMï¼‰ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚è¿™äº›æŠ€æœ¯åœ¨æä¾›é«˜æ•ˆã€å¯é é€šä¿¡æ–¹é¢å…·æœ‰é‡è¦ä½œç”¨ã€‚</p><h3 id="å¤šè·¯å¤ç”¨">å¤šè·¯å¤ç”¨</h3><p>å¤šè·¯å¤ç”¨æŠ€æœ¯æ˜¯ä¸€ç§å°†å¤šä¸ªä¿¡å·æˆ–æ•°æ®æµåˆå¹¶åœ¨ä¸€èµ·å¹¶åœ¨å…±äº«ä¼ è¾“åª’ä½“ä¸ŠåŒæ—¶ä¼ è¾“å®ƒä»¬çš„é€šä¿¡æŠ€æœ¯ã€‚è¿™æœ‰åŠ©äºæœ‰æ•ˆåœ°åˆ©ç”¨é€šä¿¡èµ„æºï¼Œä»¥æ»¡è¶³å¤šä¸ªç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼š</p><ol><li><p><strong>æ—¶åˆ†å¤ç”¨ï¼ˆTime Division Multiplexingï¼ŒTDMï¼‰</strong>ï¼š</p><ul><li>TDMå°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€ç³»åˆ—é—´éš”ï¼Œå¹¶åœ¨æ¯ä¸ªæ—¶é—´é—´éš”å†…ä¾æ¬¡ä¼ è¾“ä¸åŒä¿¡å·çš„éƒ¨åˆ†ã€‚</li><li>è¿™æ„å‘³ç€æ¯ä¸ªä¿¡å·å ç”¨ç‹¬å çš„æ—¶é—´é—´éš”ï¼Œä½¿å¾—å¤šä¸ªä¿¡å·å¯ä»¥åœ¨å…±äº«ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>TDMå¸¸ç”¨äºç”µè¯ç½‘ç»œå’Œæ•°å­—é€šä¿¡ç³»ç»Ÿä¸­ã€‚</li></ul></li><li><p><strong>é¢‘åˆ†å¤ç”¨ï¼ˆFrequency Division Multiplexingï¼ŒFDMï¼‰</strong>ï¼š</p><ul><li>FDMå°†é¢‘è°±åˆ†æˆå¤šä¸ªä¸åŒçš„é¢‘å¸¦ï¼Œæ¯ä¸ªé¢‘å¸¦ç”¨äºä¼ è¾“ä¸åŒä¿¡å·ã€‚</li><li>è¿™å…è®¸å¤šä¸ªä¿¡å·ä»¥ä¸åŒçš„é¢‘ç‡å¹¶è¡Œä¼ è¾“ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>FDMå¹¿æ³›åº”ç”¨äºå¹¿æ’­ã€ç”µè§†å’Œä¸€äº›æ— çº¿é€šä¿¡ç³»ç»Ÿä¸­ã€‚</li></ul></li><li><p><strong>ç åˆ†å¤ç”¨ï¼ˆCode Division Multiplexingï¼ŒCDMï¼‰</strong>ï¼š</p><ul><li>CDMä½¿ç”¨ä¸åŒçš„ç¼–ç åºåˆ—æ¥åŒºåˆ†å’Œåˆå¹¶å¤šä¸ªä¿¡å·ã€‚</li><li>ä¸åŒçš„ç¼–ç åºåˆ—å…è®¸å¤šä¸ªä¿¡å·åœ¨ç›¸åŒçš„é¢‘å¸¦ä¸Šä¼ è¾“ï¼Œå¹¶ä¸”åªæœ‰æ¥æ”¶ç«¯ä½¿ç”¨æ­£ç¡®çš„è§£ç åºåˆ—æ‰èƒ½è¿˜åŸåŸå§‹ä¿¡å·ã€‚</li><li>CDMç”¨äºCDMAï¼ˆCode Division Multiple Accessï¼‰ç­‰æ— çº¿é€šä¿¡æŠ€æœ¯ä¸­ã€‚</li></ul></li><li><p><strong>æ³¢åˆ†å¤ç”¨ï¼ˆWavelength Division Multiplexingï¼ŒWDMï¼‰</strong>ï¼š</p><ul><li>WDMæ˜¯ä¸€ç§å…‰çº¤é€šä¿¡ä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œå®ƒä½¿ç”¨ä¸åŒçš„å…‰æ³¢é•¿ï¼ˆæ³¢é•¿ï¼‰æ¥ä¼ è¾“å¤šä¸ªç‹¬ç«‹çš„ä¿¡å·ã€‚</li><li>æ¯ä¸ªæ³¢é•¿ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„é€šé“ï¼Œå¯ä»¥ä¼ è¾“ä¸åŒæ•°æ®æµã€‚</li><li>WDMå¹¿æ³›åº”ç”¨äºé•¿è·ç¦»å…‰çº¤é€šä¿¡å’Œå…‰ç½‘ç»œä¸­ã€‚</li></ul></li><li><p><strong>ç åˆ†å¤šå€ï¼ˆCode Division Multiple Accessï¼ŒCDMAï¼‰</strong>ï¼š</p><ul><li>CDMAæ˜¯ä¸€ç§æ— çº¿é€šä¿¡æŠ€æœ¯ï¼Œå…è®¸å¤šä¸ªç”¨æˆ·åœ¨ç›¸åŒçš„é¢‘ç‡èŒƒå›´å†…ä¼ è¾“æ•°æ®ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li><li>æ¯ä¸ªç”¨æˆ·ä½¿ç”¨å”¯ä¸€çš„ç¼–ç åºåˆ—ï¼Œä½¿æ¥æ”¶ç«¯èƒ½å¤Ÿå°†ç‰¹å®šç”¨æˆ·çš„ä¿¡å·ä»æ··åˆä¿¡å·ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</li><li>CDMAç”¨äº3Gå’Œ4Gç§»åŠ¨é€šä¿¡ç½‘ç»œä¸­ã€‚</li></ul></li><li><p><strong>ç»Ÿè®¡å¤ç”¨</strong>ï¼š</p><ul><li>ç»Ÿè®¡å¤ç”¨æŠ€æœ¯æ ¹æ®ä¿¡å·çš„éœ€æ±‚åŠ¨æ€åˆ†é…ä¼ è¾“èµ„æºï¼Œä»¥æé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚</li><li>ä¸å›ºå®šåˆ†é…ä¸åŒï¼Œç»Ÿè®¡å¤ç”¨å…è®¸å¤šä¸ªç”¨æˆ·å…±äº«èµ„æºï¼Œä½†å¯èƒ½éœ€è¦å¤„ç†ç«äº‰å’Œç¢°æ’ç­‰é—®é¢˜ã€‚</li><li>ç»Ÿè®¡å¤ç”¨å¹¿æ³›ç”¨äºä»¥å¤ªç½‘å’Œäº’è”ç½‘é€šä¿¡ä¸­ã€‚</li></ul></li></ol><p>ä¸åŒçš„å¤šè·¯å¤ç”¨æŠ€æœ¯é€‚ç”¨äºä¸åŒçš„é€šä¿¡åœºæ™¯å’Œéœ€æ±‚ã€‚é€‰æ‹©æ­£ç¡®çš„å¤šè·¯å¤ç”¨æŠ€æœ¯å–å†³äºç½‘ç»œè®¾è®¡çš„è¦æ±‚ã€èµ„æºå¯ç”¨æ€§ä»¥åŠä¼ è¾“åª’ä½“çš„ç‰¹æ€§ã€‚è¿™äº›æŠ€æœ¯åœ¨æé«˜é€šä¿¡ç³»ç»Ÿæ•ˆç‡ã€å¢åŠ å®¹é‡å’Œæ»¡è¶³å¤šç”¨æˆ·éœ€æ±‚æ–¹é¢éƒ½å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚</p><h2 id="ç¬¬äºŒç« -2">ç¬¬äºŒç« </h2><h3 id="ç£ç›˜é˜µåˆ—æŠ€æœ¯-2">ç£ç›˜é˜µåˆ—æŠ€æœ¯</h3><p>ç£ç›˜é˜µåˆ—æŠ€æœ¯æ˜¯ä¸€ç§å°†å¤šä¸ªç‰©ç†ç¡¬ç›˜é©±åŠ¨å™¨ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æé«˜æ•°æ®å­˜å‚¨æ€§èƒ½ã€å†—ä½™å’Œå®¹é”™èƒ½åŠ›çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ç£ç›˜é˜µåˆ—æŠ€æœ¯ï¼š</p><ol><li><p><strong>RAID 0ï¼ˆæ¡å¸¦åŒ–ï¼‰</strong>ï¼š</p><ul><li>RAID 0å°†å¤šä¸ªç¡¬ç›˜é©±åŠ¨å™¨ç»„åˆæˆä¸€ä¸ªå¤§çš„é€»è¾‘å·ï¼Œæ•°æ®åˆ†æ•£å­˜å‚¨åœ¨è¿™äº›é©±åŠ¨å™¨ä¸Šã€‚</li><li>æé«˜æ€§èƒ½ï¼Œå› ä¸ºæ•°æ®å¯ä»¥åŒæ—¶ä»å¤šä¸ªé©±åŠ¨å™¨è¯»å–æˆ–å†™å…¥ã€‚</li><li>ä½†æ²¡æœ‰å†—ä½™ï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚</li></ul></li><li><p><strong>RAID 1ï¼ˆé•œåƒï¼‰</strong>ï¼š</p><ul><li>RAID 1ä½¿ç”¨ä¸¤ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ï¼Œå°†ç›¸åŒçš„æ•°æ®åŒæ—¶å†™å…¥ä¸¤ä¸ªé©±åŠ¨å™¨ã€‚</li><li>æä¾›å†—ä½™ï¼Œå¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œæ•°æ®ä»ç„¶å¯ä»¥ä»å¦ä¸€ä¸ªé©±åŠ¨å™¨æ¢å¤ã€‚</li><li>ä½†å®¹é‡åˆ©ç”¨ç‡è¾ƒä½ï¼Œåªæœ‰ä¸€åŠçš„å®¹é‡å¯ç”¨äºæ•°æ®å­˜å‚¨ã€‚</li></ul></li><li><p><strong>RAID 5</strong>ï¼š</p><ul><li>RAID 5ä½¿ç”¨è‡³å°‘ä¸‰ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ï¼Œå°†æ•°æ®å’Œæ ¡éªŒä¿¡æ¯åˆ†æ•£å­˜å‚¨åœ¨è¿™äº›é©±åŠ¨å™¨ä¸Šã€‚</li><li>æä¾›æ€§èƒ½å’Œå†—ä½™ã€‚å¦‚æœä¸€ä¸ªé©±åŠ¨å™¨æ•…éšœï¼Œå¯ä»¥é€šè¿‡æ ¡éªŒä¿¡æ¯ä»å…¶ä½™çš„é©±åŠ¨å™¨ä¸­é‡å»ºæ•°æ®ã€‚</li><li>å®¹é‡å’Œæ€§èƒ½ä¹‹é—´å–å¾—äº†ä¸€ç§å¹³è¡¡ã€‚</li></ul></li><li><p><strong>RAID 6</strong>ï¼š</p><ul><li>RAID 6ç±»ä¼¼äºRAID 5ï¼Œä½†ä½¿ç”¨äº†ä¸¤ä¸ªæ ¡éªŒä¿¡æ¯å—ï¼Œå› æ­¤å¯ä»¥å®¹å¿ä¸¤ä¸ªç¡¬ç›˜é©±åŠ¨å™¨çš„æ•…éšœã€‚</li><li>æä¾›æ›´é«˜çº§åˆ«çš„å®¹é”™èƒ½åŠ›ï¼Œä½†å¯¹äºå°å‹é˜µåˆ—å¯èƒ½ä¼šæœ‰æ€§èƒ½æŸå¤±ã€‚</li></ul></li><li><p><strong>RAID 10ï¼ˆ1+0ï¼‰</strong>ï¼š</p><ul><li>RAID 10æ˜¯å°†RAID 1å’ŒRAID 0ç»„åˆåœ¨ä¸€èµ·çš„æ–¹å¼ã€‚å®ƒè‡³å°‘éœ€è¦å››ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ã€‚</li><li>æä¾›äº†æ€§èƒ½å’Œå†—ä½™çš„æœ€ä½³ç»„åˆã€‚æ•°æ®è¢«é•œåƒå¹¶è¿›è¡Œæ¡å¸¦åŒ–ã€‚</li><li>å¯ä»¥å®¹å¿å¤šä¸ªé©±åŠ¨å™¨çš„æ•…éšœã€‚</li></ul></li><li><p><strong>JBODï¼ˆJust a Bunch Of Disksï¼‰</strong>ï¼š</p><ul><li>JBODä¸æ˜¯çœŸæ­£çš„RAIDï¼Œè€Œæ˜¯å°†å¤šä¸ªç¡¬ç›˜é©±åŠ¨å™¨ç®€å•åœ°ç»„åˆæˆä¸€ä¸ªå¤§çš„é€»è¾‘å·ã€‚</li><li>æ²¡æœ‰æ€§èƒ½æå‡æˆ–å†—ä½™ã€‚æ¯ä¸ªé©±åŠ¨å™¨æ•…éšœéƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</li></ul></li><li><p><strong>RAID 50å’ŒRAID 60</strong>ï¼š</p><ul><li>è¿™äº›æ˜¯RAID 5å’ŒRAID 6çš„æ¡å¸¦åŒ–ç‰ˆæœ¬ã€‚å®ƒä»¬æä¾›æ›´å¥½çš„æ€§èƒ½ï¼Œä½†éœ€è¦æ›´å¤šçš„ç¡¬ç›˜é©±åŠ¨å™¨ã€‚</li></ul></li><li><p><strong>RAID 7</strong>ï¼š</p><ul><li>RAID 7æ˜¯ä¸€ç§ç¡¬ä»¶RAIDï¼Œå…·æœ‰é«˜çº§çš„å®‰å…¨æ€§å’Œæ€§èƒ½åŠŸèƒ½ã€‚å®ƒé€šå¸¸ç”¨äºä¼ä¸šçº§åº”ç”¨ã€‚</li></ul></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸ç”¨çš„ç£ç›˜é˜µåˆ—æŠ€æœ¯ã€‚é€‰æ‹©å“ªç§æŠ€æœ¯å–å†³äºæ‚¨çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬æ€§èƒ½ã€å†—ä½™ã€å®¹é‡å’Œé¢„ç®—ã€‚ä¸åŒçš„RAIDçº§åˆ«æä¾›ä¸åŒçš„æƒè¡¡æ–¹æ¡ˆã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»è®¡ç®—æœºä¸‰çº§ç½‘ç»œæŠ€æœ¯è€ƒè¯•å†…å®¹</summary>
    
    
    
    <category term="ç½‘ç»œ" scheme="https://momoao.github.io/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="ç½‘ç»œ" scheme="https://momoao.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript</title>
    <link href="https://momoao.github.io/posts/202308290811.html"/>
    <id>https://momoao.github.io/posts/202308290811.html</id>
    <published>2023-08-29T07:33:03.000Z</published>
    <updated>2023-08-29T01:40:21.882Z</updated>
    
    <content type="html"><![CDATA[<h1>JavaScript</h1><h2 id="æ‰€æœ‰æ•°æ®ç±»å‹">æ‰€æœ‰æ•°æ®ç±»å‹</h2><p>JavaScriptæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œè¿™äº›æ•°æ®ç±»å‹å¯ä»¥æ ¹æ®å…¶ç‰¹æ€§å’Œç”¨é€”è¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯JavaScriptä¸­çš„ä¸»è¦æ•°æ®ç±»å‹ï¼š</p><ol><li><p><strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Data Typesï¼‰</strong>ï¼š</p><ul><li><strong>String</strong>ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šè¡¨ç¤ºæ–‡æœ¬æ•°æ®ï¼Œä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥ã€‚</li><li><strong>Number</strong>ï¼ˆæ•°å­—ï¼‰ï¼šè¡¨ç¤ºæ•°å€¼ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚</li><li><strong>Boolean</strong>ï¼ˆå¸ƒå°”ï¼‰ï¼šè¡¨ç¤ºé€»è¾‘å€¼ï¼Œåªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š<code>true</code>ï¼ˆçœŸï¼‰å’Œ<code>false</code>ï¼ˆå‡ï¼‰ã€‚</li><li><strong>null</strong>ï¼šè¡¨ç¤ºç©ºå€¼æˆ–æ— å€¼ã€‚</li><li><strong>undefined</strong>ï¼šè¡¨ç¤ºæœªå®šä¹‰çš„å€¼ã€‚</li></ul></li><li><p><strong>å¤æ‚æ•°æ®ç±»å‹ï¼ˆComplex Data Typesï¼‰</strong>ï¼š</p><ul><li><strong>Object</strong>ï¼ˆå¯¹è±¡ï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ã€‚å¯¹è±¡å¯ä»¥ç”¨èŠ±æ‹¬å· <code>&#123;&#125;</code> æ¥å®šä¹‰ã€‚</li><li><strong>Array</strong>ï¼ˆæ•°ç»„ï¼‰ï¼šè¡¨ç¤ºæœ‰åºçš„åˆ—è¡¨ï¼ŒåŒ…å«ä¸€ç»„å€¼ã€‚æ•°ç»„å¯ä»¥ç”¨æ–¹æ‹¬å· <code>[]</code> æ¥å®šä¹‰ã€‚</li><li><strong>Function</strong>ï¼ˆå‡½æ•°ï¼‰ï¼šè¡¨ç¤ºå¯æ‰§è¡Œçš„ä»£ç å—ï¼Œå¯ä»¥è¢«è°ƒç”¨æ‰§è¡Œã€‚</li></ul></li><li><p><strong>ç‰¹æ®Šæ•°æ®ç±»å‹</strong>ï¼š</p><ul><li><strong>Symbol</strong>ï¼ˆç¬¦å·ï¼‰ï¼šES6å¼•å…¥çš„æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºå”¯ä¸€çš„ã€ä¸å¯å˜çš„å€¼ï¼Œä¸»è¦ç”¨äºåˆ›å»ºå¯¹è±¡å±æ€§çš„å”¯ä¸€é”®ã€‚</li></ul></li><li><p><strong>åŒ…è£…å¯¹è±¡ï¼ˆWrapper Objectsï¼‰</strong>ï¼š</p><ul><li>JavaScriptä¸ºåŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†ç›¸åº”çš„åŒ…è£…å¯¹è±¡ï¼Œä½¿å…¶å¯ä»¥åƒå¯¹è±¡ä¸€æ ·è®¿é—®å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ<code>String</code>ã€<code>Number</code> å’Œ <code>Boolean</code>ã€‚</li></ul></li></ol><p>è¿™äº›æ•°æ®ç±»å‹åœ¨JavaScriptä¸­å…·æœ‰ä¸åŒçš„ç‰¹æ€§å’Œç”¨é€”ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²ç”¨äºå¤„ç†æ–‡æœ¬ï¼Œæ•°å­—ç”¨äºæ•°å€¼è®¡ç®—ï¼Œå¯¹è±¡å’Œæ•°ç»„ç”¨äºç»„ç»‡å’Œå­˜å‚¨æ•°æ®ï¼Œå‡½æ•°ç”¨äºå°è£…å¯æ‰§è¡Œçš„ä»£ç å—ç­‰ã€‚</p><p>åœ¨JavaScriptä¸­ï¼Œæ•°æ®ç±»å‹é€šå¸¸æ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³ç€å˜é‡çš„ç±»å‹å¯ä»¥åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚è¿™ç§çµæ´»æ€§ä½¿JavaScriptéå¸¸é€‚åˆç”¨äºå„ç§åº”ç”¨ç¨‹åºï¼Œä»ç½‘é¡µäº¤äº’åˆ°æœåŠ¡å™¨ç«¯å¼€å‘ã€‚</p><h3 id="nullå’Œundefinedå’ŒNANçš„åŒºåˆ«">nullå’Œundefinedå’ŒNANçš„åŒºåˆ«</h3><p><code>null</code>ã€<code>undefined</code> å’Œ <code>NaN</code> éƒ½æ˜¯ JavaScript ä¸­è¡¨ç¤ºç‰¹æ®Šå€¼æˆ–ç‰¹å®šæƒ…å†µçš„å€¼ï¼Œå®ƒä»¬åœ¨å«ä¹‰å’Œç”¨æ³•ä¸Šæœ‰æ‰€ä¸åŒï¼š</p><ol><li><p><strong>null</strong>ï¼š</p><ul><li><code>null</code> è¡¨ç¤ºä¸€ä¸ªç©ºå€¼æˆ–ç¼ºå¤±å€¼ã€‚</li><li>å½“æ‚¨æƒ³è¦æ˜ç¡®åœ°è¡¨ç¤ºä¸€ä¸ªå˜é‡æ²¡æœ‰å€¼æ—¶ï¼Œå¯ä»¥å°†å…¶èµ‹å€¼ä¸º <code>null</code>ã€‚</li><li><code>null</code> æ˜¯ä¸€ä¸ªåŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºçš„æˆ–æ— æ•ˆçš„å¯¹è±¡å¼•ç”¨ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>null</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li><li><p><strong>undefined</strong>ï¼š</p><ul><li>å½“å£°æ˜äº†ä¸€ä¸ªå˜é‡ä½†æ²¡æœ‰ä¸ºå…¶èµ‹å€¼æ—¶ï¼Œå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ã€‚</li><li>å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å› <code>undefined</code>ã€‚</li><li>è®¿é—®å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§æ—¶ï¼Œè¿”å›çš„å€¼ä¹Ÿæ˜¯ <code>undefined</code>ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>undefined</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li><li><p><strong>NaN</strong>ï¼ˆNot-a-Numberï¼‰ï¼š</p><ul><li><code>NaN</code> è¡¨ç¤ºä¸€ä¸ªéæ•°å­—çš„å€¼ï¼Œé€šå¸¸åœ¨è¿›è¡Œæ•°å­¦è¿ç®—å‡ºé”™æ—¶è¿”å›ã€‚</li><li>ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²è§£ææˆæ•°å­—å¤±è´¥æ—¶ï¼Œç»“æœå°±æ˜¯ <code>NaN</code>ã€‚</li><li><code>NaN</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å€¼ï¼Œå®ƒä¸ä»»ä½•å…¶ä»–å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚å› æ­¤ï¼Œ<code>NaN !== NaN</code>ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>NaN</code> è¢«è§†ä¸ºä¸€ä¸ª&quot;å‡å€¼&quot;ï¼ˆfalsey valueï¼‰ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul></li></ol><p>æ€»ç»“åŒºåˆ«ï¼š</p><ul><li><code>null</code> è¡¨ç¤ºæ˜ç¡®çš„ç©ºå€¼æˆ–ç¼ºå¤±å€¼ï¼Œæ˜¯ä¸€ä¸ªèµ‹å€¼çš„æ“ä½œï¼Œå±äºåŸå§‹æ•°æ®ç±»å‹ã€‚</li><li><code>undefined</code> è¡¨ç¤ºæœªå®šä¹‰çš„å€¼ï¼Œå¯ä»¥æ˜¯å˜é‡å£°æ˜ä½†æœªèµ‹å€¼ï¼Œå‡½æ•°æœªè¿”å›å€¼ç­‰æƒ…å†µã€‚</li><li><code>NaN</code> è¡¨ç¤ºéæ•°å­—çš„å€¼ï¼Œé€šå¸¸åœ¨æ•°å­¦è¿ç®—å‡ºé”™æ—¶è¿”å›ï¼Œå±äºæ•°å€¼ç±»å‹ã€‚</li><li>åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œ<code>null</code>ã€<code>undefined</code> å’Œ <code>NaN</code> éƒ½è¢«è§†ä¸º&quot;å‡å€¼&quot;ï¼Œä½†ä¸ç­‰äºå¸ƒå°”å€¼ <code>false</code>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// è¾“å‡ºï¼šundefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// è¾“å‡ºï¼šnull</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&quot;string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> parsedNumber = <span class="built_in">parseInt</span>(c);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedNumber); <span class="comment">// è¾“å‡ºï¼šNaN</span></span><br></pre></td></tr></table></figure><p>äº†è§£è¿™äº›ç‰¹æ®Šå€¼çš„å«ä¹‰å’Œè¡Œä¸ºå¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°å¤„ç†å˜é‡èµ‹å€¼ã€é€»è¾‘åˆ¤æ–­å’Œæ•°å­¦è¿ç®—ç­‰æƒ…å†µã€‚</p><h2 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</h2><ul><li>JavaScriptçš„è¯­æ³•ä¸è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€ç›¸ä¼¼ï¼ŒåŒ…æ‹¬å˜é‡ã€æ•°æ®ç±»å‹ã€è¿ç®—ç¬¦ç­‰ã€‚</li><li>å®šä¹‰å˜é‡ä½¿ç”¨ <code>var</code>ã€<code>let</code> æˆ– <code>const</code>ï¼Œå…¶ä¸­ <code>let</code> å’Œ <code>const</code> æ˜¯ES6å¼•å…¥çš„æ–°å£°æ˜æ–¹å¼ã€‚</li><li>åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼Œä»¥åŠç‰¹æ®Šå€¼ <code>null</code> å’Œ <code>undefined</code>ã€‚</li><li>ä½¿ç”¨ <code>+</code> è¿ç®—ç¬¦å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ï¼Œæ‰§è¡Œæ•°å­—ç›¸åŠ ã€‚</li><li>æ¡ä»¶è¯­å¥å¦‚ <code>if</code>ã€<code>else if</code> å’Œ <code>else</code> ç”¨äºæ§åˆ¶ä»£ç çš„æ‰§è¡Œè·¯å¾„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜é‡å’Œæ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²è¿æ¥</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="string">&quot;Hello, &quot;</span> + name;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ä»¶è¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Number is greater than 5&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Number is not greater than 5&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="varã€letã€constçš„åŒºåˆ«">varã€letã€constçš„åŒºåˆ«</h3><p>åœ¨JavaScriptä¸­ï¼Œ<code>var</code>ã€<code>let</code>å’Œ<code>const</code>æ˜¯ç”¨äºå£°æ˜å˜é‡çš„å…³é”®å­—ï¼Œå®ƒä»¬åœ¨ä½œç”¨åŸŸã€å¯å˜æ€§å’Œç”Ÿå‘½å‘¨æœŸç­‰æ–¹é¢æœ‰ä¸åŒçš„è¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š</p><ol><li><p><strong>var</strong>ï¼š</p><ul><li><code>var</code> æ˜¯åœ¨ES5ä¸­å¼•å…¥çš„å˜é‡å£°æ˜å…³é”®å­—ã€‚</li><li>å˜é‡å£°æ˜æå‡ï¼šåœ¨ä½œç”¨åŸŸå†…ï¼Œ<code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å£°æ˜ä¹‹å‰å¼•ç”¨å˜é‡ã€‚</li><li>æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼š<code>var</code> å£°æ˜çš„å˜é‡åœ¨å‡½æ•°ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨å—ï¼ˆå¦‚å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ï¼‰ä¸­æœ‰æ•ˆã€‚</li><li>å…è®¸é‡å¤å£°æ˜ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œæ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨ <code>var</code> å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</li></ul></li><li><p><strong>let</strong>ï¼š</p><ul><li><code>let</code> æ˜¯åœ¨ES6ä¸­å¼•å…¥çš„å—çº§ä½œç”¨åŸŸå˜é‡å£°æ˜å…³é”®å­—ã€‚</li><li>å—çº§ä½œç”¨åŸŸï¼š<code>let</code> å£°æ˜çš„å˜é‡ä»…åœ¨å…¶å£°æ˜çš„å—å†…æœ‰æ•ˆï¼Œä¸ä¼šæå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚</li><li>ä¸å…è®¸é‡å¤å£°æ˜ï¼šåœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œä¸å…è®¸ä½¿ç”¨ <code>let</code> é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</li></ul></li><li><p><strong>const</strong>ï¼š</p><ul><li><code>const</code> ä¹Ÿæ˜¯åœ¨ES6ä¸­å¼•å…¥çš„ï¼Œç”¨äºå£°æ˜å¸¸é‡ï¼Œå³ä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†æ”¹å˜çš„å˜é‡ã€‚</li><li>å—çº§ä½œç”¨åŸŸï¼š<code>const</code> åŒæ ·éµå¾ªå—çº§ä½œç”¨åŸŸè§„åˆ™ï¼Œåªåœ¨å…¶å£°æ˜çš„å—å†…æœ‰æ•ˆã€‚</li><li>å¿…é¡»åˆå§‹åŒ–ï¼šåœ¨å£°æ˜ <code>const</code> å˜é‡æ—¶å¿…é¡»è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</li><li>å¸¸é‡å€¼ä¸å¯å˜ï¼šä¸€æ—¦èµ‹å€¼ï¼Œ<code>const</code> å˜é‡çš„å€¼å°±ä¸èƒ½å†æ”¹å˜ã€‚</li></ul></li></ol><p>æ€»ç»“åŒºåˆ«ï¼š</p><ul><li>ä½¿ç”¨ <code>var</code> å¯èƒ½ä¼šå¯¼è‡´å˜é‡æå‡å’Œéš¾ä»¥é¢„æµ‹çš„ä½œç”¨åŸŸè¡Œä¸ºã€‚å®ƒçš„ä½¿ç”¨å·²ç»é€æ¸è¢« <code>let</code> å’Œ <code>const</code> å–ä»£ã€‚</li><li><code>let</code> å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å˜é‡ï¼Œå¹¶ä¸”å˜é‡çš„å€¼å¯ä»¥é‡æ–°èµ‹å€¼ã€‚</li><li><code>const</code> ç”¨äºå£°æ˜å¸¸é‡ï¼Œå˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸èƒ½æ›´æ”¹ï¼Œå¹¶ä¸”ä¹Ÿéµå¾ªå—çº§ä½œç”¨åŸŸã€‚</li></ul><p>æ¨èåœ¨ç°ä»£JavaScriptä»£ç ä¸­ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> æ¥è·å¾—æ›´ä¸¥æ ¼çš„ä½œç”¨åŸŸæ§åˆ¶å’Œä»£ç å¯ç»´æŠ¤æ€§ã€‚</p><h2 id="å‡½æ•°">å‡½æ•°</h2><ul><li>ä½¿ç”¨ <code>function</code> å…³é”®å­—å®šä¹‰å‡½æ•°ã€‚å‡½æ•°å¯ä»¥æ¥å—å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿”å›å€¼ã€‚</li><li>å¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ï¼ˆæ— åå‡½æ•°ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°ã€‚</li><li>å‡½æ•°å¯ä»¥åœ¨å…¶ä»–å‡½æ•°ä¸­è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå›è°ƒä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½åå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> multiply = <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">3</span>, <span class="number">5</span>));       <span class="comment">// è¾“å‡ºï¼š8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">2</span>, <span class="number">4</span>)); <span class="comment">// è¾“å‡ºï¼š8</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„å’Œå¯¹è±¡">æ•°ç»„å’Œå¯¹è±¡</h2><ul><li>æ•°ç»„ç”¨äºå­˜å‚¨å¤šä¸ªå€¼ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ã€‚ä½¿ç”¨æ–¹æ‹¬å· <code>[]</code> åˆ›å»ºæ•°ç»„ã€‚</li><li>å¯¹è±¡ç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼Œæ¯ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼ã€‚ä½¿ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code> åˆ›å»ºå¯¹è±¡ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Johnson&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers[<span class="number">2</span>]);        <span class="comment">// è¾“å‡ºï¼š3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">firstName</span>);  <span class="comment">// è¾“å‡ºï¼š&quot;Alice&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯">å¾ªç¯</h2><ul><li>ä½¿ç”¨ <code>for</code> å¾ªç¯å’Œ <code>while</code> å¾ªç¯å¯ä»¥é‡å¤æ‰§è¡Œä¸€ç»„æ“ä½œã€‚</li><li><code>for...of</code> å¾ªç¯ç”¨äºéå†æ•°ç»„ç­‰å¯è¿­ä»£å¯¹è±¡çš„å€¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(numbers[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// for...of å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// while å¾ªç¯</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (count &lt; <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å’ŒDOMæ“ä½œ">äº‹ä»¶å’ŒDOMæ“ä½œ</h2><ul><li>JavaScriptå¯ä»¥ç”¨äºæ“ä½œç½‘é¡µä¸Šçš„å…ƒç´ ã€‚é€šè¿‡DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰å¯ä»¥è·å–å’Œä¿®æ”¹HTMLå…ƒç´ ã€‚</li><li>ä½¿ç”¨ <code>addEventListener</code> æ¥é™„åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨ç­‰ã€‚</li></ul><!DOCTYPE html><html><head>  <title>DOM Example</title></head><body>  <button id="myButton">Click Me</button>  <script>    const button = document.getElementById('myButton');    button.addEventListener('click', () => {      alert('Button Clicked!');    });  </script></body></html><h2 id="å¼‚æ­¥ç¼–ç¨‹">å¼‚æ­¥ç¼–ç¨‹</h2><ul><li>JavaScriptä¸­çš„å¼‚æ­¥ç¼–ç¨‹éå¸¸é‡è¦ã€‚å¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°ã€Promiseå’Œasync/awaitæ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ setTimeout æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Start&quot;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Inside setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;End&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="JSON">JSON</h2><ul><li>JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œç”¨äºè¡¨ç¤ºç»“æ„åŒ–æ•°æ®ã€‚å®ƒåœ¨JavaScriptä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;Jane&quot;, &quot;age&quot;: 25&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> parsedData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonData);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedData.<span class="property">name</span>); <span class="comment">// è¾“å‡ºï¼š&quot;Jane&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ¨¡å—åŒ–">æ¨¡å—åŒ–</h2><ul><li>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæ¨¡å—åŒ–ä½¿ä»£ç æ›´æœ‰ç»„ç»‡æ€§ã€‚å¯ä»¥ä½¿ç”¨ <code>import</code> å’Œ <code>export</code> å…³é”®å­—è¿›è¡Œæ¨¡å—å¯¼å…¥å’Œå¯¼å‡ºã€‚</li><li>åœ¨æ¨¡å—ä¸­ä¸ä½¿ç”¨exportå¯¼å‡ºçš„å†…å®¹æ—¶ç§æœ‰çš„ï¼Œåˆ«çš„æ¨¡å—ä¸­ä¸èƒ½ä½¿ç”¨importå¼•ç”¨</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./math.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// è¾“å‡ºï¼š7</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»JavaScriptçš„åŸºç¡€çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="JavaScript" scheme="https://momoao.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Javaåå°„</title>
    <link href="https://momoao.github.io/posts/202308281533.html"/>
    <id>https://momoao.github.io/posts/202308281533.html</id>
    <published>2023-08-28T07:33:03.000Z</published>
    <updated>2023-08-29T00:10:26.364Z</updated>
    
    <content type="html"><![CDATA[<h1>Javaåå°„</h1><h1>æ¦‚å¿µ</h1><p>1.åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p><p>2.åå°„å¯ä»¥åœ¨ä¸€ä¸ªç±»è¿è¡Œçš„æ—¶å€™è·å–ç±»çš„ä¿¡æ¯çš„æœºåˆ¶ï¼Œå¯ä»¥è·å–åœ¨ç¼–è¯‘æœŸä¸å¯èƒ½è·å¾—çš„ç±»çš„ä¿¡æ¯ã€‚</p><p>3.å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½è°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ã€‚</p><p>4.å› ä¸ºç±»çš„ä¿¡æ¯æ˜¯ä¿å­˜åœ¨Classå¯¹è±¡ä¸­çš„ï¼Œè€Œè¿™ä¸ªClasså¯¹è±¡æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰åŠ¨æ€åŠ è½½çš„ã€‚</p><p>5.å½“ç±»åŠ è½½å™¨è£…è½½è¿è¡Œäº†ç±»åï¼ŒåŠ¨æ€è·å–Classå¯¹è±¡çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€æ“ä½œClasså¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaçš„åå°„æœºåˆ¶ã€‚</p><h1>ä½œç”¨</h1><p>1.åç¼–è¯‘ï¼š.class â€”&gt; .javaã€‚</p><p>2.é€šè¿‡åå°„æœºåˆ¶è®¿é—®Javaå¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ç­‰ã€‚</p><h1>åå°„åŸç†</h1><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/format,png.png" alt="img"></p><h1>ç±»åŠ è½½è¿‡ç¨‹</h1><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/image-20230523192847278.png" alt="image-20230523192847278"></p><p>Javaçš„åå°„å°±æ˜¯åˆ©ç”¨ä¸Šé¢ç¬¬äºŒæ­¥åŠ è½½åˆ°jvmä¸­çš„.classæ–‡ä»¶æ¥è¿›è¡Œæ“ä½œçš„ã€‚.classæ–‡ä»¶ä¸­åŒ…å«javaç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå½“ä½ ä¸çŸ¥é“æŸä¸ªç±»å…·ä½“ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åå°„è·å–classï¼Œç„¶åè¿›è¡Œå„ç§æ“ä½œã€‚</p><p>Javaåå°„å°±æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„æ–¹æ³•å’Œå±æ€§ï¼›å¹¶ä¸”èƒ½æ”¹å˜å®ƒçš„å±æ€§ã€‚</p><h2 id="ç±»åŠ è½½å™¨å±‚æ¬¡ç»“æ„">ç±»åŠ è½½å™¨å±‚æ¬¡ç»“æ„</h2><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/image-20230523193541423.png" alt="image-20230523193541423"></p><h2 id="è·å–classçš„ä¸‰ç§ç»“æ„">è·å–classçš„ä¸‰ç§ç»“æ„</h2><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/format,png-16848418498382.png" alt="img"></p><h2 id="classç±»å¸¸ç”¨æ–¹æ³•">classç±»å¸¸ç”¨æ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>String getName()</code></td><td>è¿”å›ç±»çš„å…¨é™å®šåã€‚</td></tr><tr><td><code>Class&lt;?&gt; getSuperclass()</code></td><td>è¿”å›çˆ¶ç±»çš„Classå¯¹è±¡ã€‚</td></tr><tr><td><code>Class&lt;?&gt;[] getInterfaces()</code></td><td>è¿”å›å®ç°çš„æ¥å£çš„Classå¯¹è±¡æ•°ç»„ã€‚</td></tr><tr><td><code>boolean isInterface()</code></td><td>åˆ¤æ–­æ˜¯å¦æ˜¯æ¥å£ã€‚</td></tr><tr><td><code>boolean isAssignableFrom(Class&lt;?&gt; cls)</code></td><td>åˆ¤æ–­æ˜¯å¦å¯ä»¥èµ‹å€¼ç»™æŒ‡å®šçš„ç±»ã€‚</td></tr><tr><td><code>Object newInstance()</code></td><td>åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚</td></tr><tr><td><code>Field[] getFields()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±å­—æ®µçš„æ•°ç»„ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field getField(String name)</code></td><td>è¿”å›æŒ‡å®šåç§°çš„å…¬å…±å­—æ®µï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field[] getDeclaredFields()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰å­—æ®µçš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Field getDeclaredField(String name)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šåç§°çš„å­—æ®µï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„å­—æ®µã€‚</td></tr><tr><td><code>Method[] getMethods()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±æ–¹æ³•çš„æ•°ç»„ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method getMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›æŒ‡å®šåç§°å’Œå‚æ•°ç±»å‹çš„å…¬å…±æ–¹æ³•ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method[] getDeclaredMethods()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰æ–¹æ³•çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šåç§°å’Œå‚æ•°ç±»å‹çš„æ–¹æ³•ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt;[] getConstructors()</code></td><td>è¿”å›æ‰€æœ‰å…¬å…±æ„é€ å‡½æ•°çš„æ•°ç»„ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›æŒ‡å®šå‚æ•°ç±»å‹çš„å…¬å…±æ„é€ å‡½æ•°ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt;[] getDeclaredConstructors()</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æ‰€æœ‰æ„é€ å‡½æ•°çš„æ•°ç»„ã€‚</td></tr><tr><td><code>Constructor&lt;?&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></td><td>è¿”å›å½“å‰ç±»å£°æ˜çš„æŒ‡å®šå‚æ•°ç±»å‹çš„æ„é€ å‡½æ•°ã€‚</td></tr></tbody></table><p>ä½œè€…æ€»ç»“çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">getName()ï¼šè·å¾—ç±»çš„å®Œæ•´åå­—ã€‚</span><br><span class="line"></span><br><span class="line">getFields()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„å±æ€§ã€‚</span><br><span class="line"></span><br><span class="line">getDeclaredFields()ï¼šè·å¾—ç±»çš„æ‰€æœ‰å±æ€§ã€‚åŒ…æ‹¬<span class="keyword">private</span> å£°æ˜çš„å’Œç»§æ‰¿ç±»</span><br><span class="line"></span><br><span class="line">getMethods()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">getDeclaredMethods()ï¼šè·å¾—ç±»çš„æ‰€æœ‰æ–¹æ³•ã€‚åŒ…æ‹¬<span class="keyword">private</span> å£°æ˜çš„å’Œç»§æ‰¿ç±»</span><br><span class="line"></span><br><span class="line">getMethod(String name, Class[] parameterTypes)ï¼šè·å¾—ç±»çš„ç‰¹å®šæ–¹æ³•ï¼Œnameå‚æ•°æŒ‡å®šæ–¹æ³•çš„åå­—ï¼ŒparameterTypes å‚æ•°æŒ‡å®šæ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</span><br><span class="line"></span><br><span class="line">getConstructors()ï¼šè·å¾—ç±»çš„<span class="keyword">public</span>ç±»å‹çš„æ„é€ æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">getConstructor(Class[] parameterTypes)ï¼šè·å¾—ç±»çš„ç‰¹å®šæ„é€ æ–¹æ³•ï¼ŒparameterTypes å‚æ•°æŒ‡å®šæ„é€ æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚</span><br><span class="line"></span><br><span class="line">newInstance()ï¼šé€šè¿‡ç±»çš„æ„é€ æ–¹æ³•åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure><h1>Classç±»èƒ½å®ç°çš„åŠŸèƒ½</h1><h2 id="èƒ½å®ç°çš„åŠŸèƒ½">èƒ½å®ç°çš„åŠŸèƒ½</h2><p>1åˆ¤æ–­å¯¹è±¡å±äºå“ªä¸ªç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">Class class2= person.getClass();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;class2ï¼š&quot;</span>+class2);</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼šclass2ï¼š<span class="keyword">class</span> <span class="title class_">reflect</span>.Person</span><br></pre></td></tr></table></figure><p>2è·å–ç±»ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Person.class;</span><br><span class="line"></span><br><span class="line">Method[] methods = class1.getMethods();</span><br><span class="line"></span><br><span class="line">Method[] declaredMethods = class1.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line">Field[] declaredFields = class1.getDeclaredFields();</span><br></pre></td></tr></table></figure><p>3æ„å»ºå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">Class class2= person.getClass();</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> class2.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼ºè½¬å‰å…ˆç”¨instanceofåˆ¤æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(o <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line"></span><br><span class="line">((Person) o).workIng();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4åŠ¨æ€æ‰§è¡Œæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflect.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Method</span> <span class="variable">work</span> <span class="operator">=</span> class1.getDeclaredMethod(<span class="string">&quot;work&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">work.invoke(person);</span><br></pre></td></tr></table></figure><p>5åŠ¨æ€æ“ä½œå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">class1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;reflect.Person&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> class1.getDeclaredField(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">field.set(person,<span class="string">&quot;pine&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€èµ‹å€¼å’Œæ™®é€šèµ‹å€¼çš„åŒºåˆ«">åŠ¨æ€èµ‹å€¼å’Œæ™®é€šèµ‹å€¼çš„åŒºåˆ«</h2><p><img src="image/Java%E5%8F%8D%E5%B0%84_Image/image-20230523201134659.png" alt="image-20230523201134659"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»Javaåå°„çš„çŸ¥è¯†ç‚¹</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Spring</title>
    <link href="https://momoao.github.io/posts/202308281529.html"/>
    <id>https://momoao.github.io/posts/202308281529.html</id>
    <published>2023-08-28T07:30:03.000Z</published>
    <updated>2023-08-28T07:30:10.788Z</updated>
    
    <content type="html"><![CDATA[<h1>Spring</h1><h1>å¼€å‘æ­¥éª¤</h1><ol><li><p>å¯¼å…¥Springå¼€å‘çš„åŸºæœ¬åŒ…åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230524091130200.png" alt="image-20230524091130200"></p></li><li><p>ç¼–å†™Daoæ¥å£å’Œå®ç°ç±»</p></li><li><p>åˆ›å»ºSpringæ ¸å¿ƒé…ç½®æ–‡ä»¶</p></li><li><p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®UserDaoImpl</p></li><li><p>ä½¿ç”¨Springçš„APIè·å¾—Beanå®ä¾‹</p><p><img src="../assets/image/Spring_Image/image-20230524093003542.png" alt="image-20230524093003542"></p></li></ol><h1>Springé…ç½®æ–‡ä»¶</h1><p>é»˜è®¤ä½¿ç”¨æ— å‚æ„é€ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;userDao&quot;</span> class=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><h2 id="scopeå±æ€§å€¼">scopeå±æ€§å€¼</h2><p><img src="../assets/image/Spring_Image/image-20230524093629771.png" alt="image-20230524093629771"></p><h3 id="singletonæ¨¡å¼">singletonæ¨¡å¼</h3><p><img src="../assets/image/Spring_Image/image-20230524100219430.png" alt="image-20230524100219430"></p><h3 id="prototypeæ¨¡å¼">prototypeæ¨¡å¼</h3><p><img src="../assets/image/Spring_Image/image-20230524110346654.png" alt="image-20230524110346654"></p><p><img src="../assets/image/Spring_Image/image-20230524110356913.png" alt="image-20230524110356913"></p><h3 id="è¿™ä¸¤ä¸ªæ¨¡å¼åˆ›å»ºBeançš„æ—¶æœºä¸åŒ">è¿™ä¸¤ä¸ªæ¨¡å¼åˆ›å»ºBeançš„æ—¶æœºä¸åŒ</h3><ul><li><p>singletonæ¨¡å¼</p><ul><li><p>åœ¨</p></li><li><pre><code>ApplicationContext app = new ClassPathXmlApplicationContext(&quot;applicationCOntext.xml&quot;);<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   æ—¶å°±åˆ›å»ºäº†Bean</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   è¯æ˜ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">        -</span>   ![<span class="string">image-20230524111351773</span>](<span class="link">../assets/image/Spring_Image/image-20230524111351773.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">        -</span>   åœ¨åˆ›å»ºApplicationContextå¯¹è±¡çš„æ—¶å€™è¿™ä¸ªç±»çš„æ— å‚æ„é€ è¢«è°ƒç”¨äº†</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span>   prototypeæ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   åœ¨</span><br><span class="line"></span><br><span class="line"><span class="bullet">    -</span>   <span class="code">```</span></span><br><span class="line"><span class="code">        UserDao userDao1 = (UserDao) app.getBean(&quot;userDao&quot;);</span></span><br></pre></td></tr></table></figure></code></pre></li><li><p>æ—¶åˆ›å»ºäº†Bean</p></li></ul></li></ul><h1>Beanå®ç°å¯¹è±¡å®ä¾‹åŒ–çš„ä¸‰ç§æ–¹å¼</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ— å‚æ„é€ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é»˜è®¤ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚é™æ€--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.StaticFactory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚å®ä¾‹--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å·¥å‚æ ‡ç­¾--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.DynamicFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è¿™ä¸ªæ ‡ç­¾æŒ‡å®šå·¥å‚beanã€å·¥å‚æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h1>å°†UserDaoæ³¨å…¥ç»™UserServiceçš„æ–¹æ³•</h1><h2 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³•</h2><p>é€šè¿‡æœ‰å‚æ„é€ å°†UserDaoå†™åœ¨UserServiceçš„æ„é€ æ–¹æ³•å‚æ•°ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="setæ–¹æ³•">setæ–¹æ³•</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™é‡Œnameçš„userDaoæ˜¯setUserDao()åå­—ä¸­setåé¢çš„ï¼Œä½†æ˜¯é¦–å­—æ¯å°å†™--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™ç±»refä¸­çš„userDaoæ˜¯ä¸Šé¢é‚£ä¸ªbeançš„id--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è¿™ä¸ªæ ‡ç­¾çš„ç”¨å¤„æ˜¯å°†bean userDaoé€šè¿‡setUserDao()æ³¨å…¥åˆ°bean userServiceä¸­--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="../assets/image/Spring_Image/image-20230524164039354.png" alt="image-20230524164039354"></p><p><img src="../assets/image/Spring_Image/image-20230524171224135.png" alt="image-20230524171224135"></p><h3 id="på‘½åç©ºé—´æ³¨å…¥ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯setæ³¨å…¥ï¼‰">på‘½åç©ºé—´æ³¨å…¥ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯setæ³¨å…¥ï¼‰</h3><p>åœ¨beansæ ‡ç­¾ä¸­æ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserServiceImpl&quot;</span> <span class="attr">p:userDao-ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æ³¨å…¥æ–¹æ³•åªéœ€è¦æ”¹xmlæ–‡ä»¶ï¼Œä¸éœ€è¦åœ¨UserServiceImplç±»ä¸­åˆ›å»ºsetUserDao()4</p><p><strong>ä»¥ä¸Šè®²çš„æ˜¯å¼•ç”¨ç±»å‹æ•°æ®çš„æ³¨å…¥ï¼Œä¸‹é¢è®²æ™®é€šæ•°æ®ç±»å‹å’Œé›†åˆç±»å‹çš„æ³¨å…¥</strong></p><h1>æ™®é€šç±»å‹æ•°æ®å’Œå¼•ç”¨ç±»å‹çš„æ³¨å…¥</h1><p><img src="../assets/image/Spring_Image/image-20230524192930799.png" alt="image-20230524192930799"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoimpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;strList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;u1&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;u2&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;user2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>ppp1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>ppp2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Tom&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŒ—äº¬&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.domain.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jerry&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addr&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šæµ·&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>Beanæ ‡ç­¾çš„å¸¸ç”¨æ–¹æ³•</h1><p><img src="../assets/image/Spring_Image/image-20230524201233971.png" alt="image-20230524201233971"></p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>æŒ‡å®šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</td></tr><tr><td>class</td><td>æŒ‡å®šbeançš„ç±»åã€‚</td></tr><tr><td>name</td><td>æŒ‡å®šbeançš„åç§°ã€‚å¯ä»¥ä½¿ç”¨é€—å·æˆ–åˆ†å·åˆ†éš”å¤šä¸ªåç§°ã€‚</td></tr><tr><td>scope</td><td>æŒ‡å®šbeançš„ä½œç”¨åŸŸï¼Œå¦‚singletonï¼ˆå•ä¾‹ï¼‰ã€prototypeï¼ˆåŸå‹ï¼‰ç­‰ã€‚</td></tr><tr><td>constructor-arg</td><td>æŒ‡å®šbeançš„æ„é€ å‡½æ•°å‚æ•°ã€‚å¯ä»¥é€šè¿‡<code>&lt;value&gt;</code>æˆ–<code>&lt;ref&gt;</code>å­å…ƒç´ æ¥æŒ‡å®šå€¼æˆ–å¼•ç”¨å…¶ä»–beanã€‚</td></tr><tr><td>property</td><td>æŒ‡å®šbeançš„å±æ€§ã€‚å¯ä»¥é€šè¿‡<code>&lt;value&gt;</code>æˆ–<code>&lt;ref&gt;</code>å­å…ƒç´ æ¥æŒ‡å®šå€¼æˆ–å¼•ç”¨å…¶ä»–beanã€‚</td></tr><tr><td>init-method</td><td>æŒ‡å®šbeanåˆå§‹åŒ–æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚</td></tr><tr><td>destroy-method</td><td>æŒ‡å®šbeané”€æ¯æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚</td></tr><tr><td>autowire</td><td>æŒ‡å®šè‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¦‚byNameã€byTypeã€constructorç­‰ã€‚</td></tr><tr><td>lazy-init</td><td>æŒ‡å®šæ˜¯å¦å»¶è¿Ÿåˆå§‹åŒ–beanã€‚</td></tr><tr><td>depends-on</td><td>æŒ‡å®šbeançš„ä¾èµ–å…³ç³»ï¼Œå³åœ¨å½“å‰beanå®ä¾‹åŒ–ä¹‹å‰éœ€è¦å…ˆå®ä¾‹åŒ–çš„å…¶ä»–beanã€‚</td></tr><tr><td>factory-bean</td><td>æŒ‡å®šä¸€ä¸ªå·¥å‚beançš„åç§°ï¼Œç”¨äºåˆ›å»ºå½“å‰beanå®ä¾‹ã€‚</td></tr><tr><td>factory-method</td><td>æŒ‡å®šå·¥å‚beanä¸­ç”¨äºåˆ›å»ºå½“å‰beanå®ä¾‹çš„é™æ€æ–¹æ³•ã€‚</td></tr></tbody></table><h1>getBean()ä½¿ç”¨</h1><p><img src="../assets/image/Spring_Image/image-20230525093249319.png" alt="image-20230525093249319"></p><p>å› ä¸º</p><p><img src="../assets/image/Spring_Image/image-20230525092849583.png" alt="image-20230525092849583"></p><p>ä½†æ˜¯å¦‚æœæœ‰ä¸¤ä¸ªbeanï¼Œè¿˜é€šè¿‡.getBean(UserService.class)è·å–å¯¹è±¡å°±ä¼šæŠ¥é”™ã€‚</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…¶ä¸­ï¼Œå½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®Beançš„idä»å®¹å™¨ä¸­è·å¾—Beanå®ä¾‹ï¼Œè¿”å›æ˜¯<span class="keyword">Object</span>ï¼Œéœ€è¦å¼ºè½¬ã€‚</span><br><span class="line">å½“å‚æ•°çš„æ•°æ®ç±»å‹æ˜¯<span class="keyword">Class</span>ç±»å‹æ—¶ï¼Œè¡¨ç¤ºæ ¹æ®ç±»å‹ä»å®¹å™¨ä¸­åŒ¹é…Beanå®ä¾‹ï¼Œå½“å®¹å™¨ä¸­ç›¸åŒç±»å‹çš„Beanæœ‰å¤šä¸ªæ—¶ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šæŠ¥é”™</span><br></pre></td></tr></table></figure><h1>Springé…ç½®æ•°æ®æº</h1><h2 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h2><p><img src="../assets/image/Spring_Image/image-20230525161326550.png" alt="image-20230525161326550"></p><h2 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h2><p><img src="../assets/image/Spring_Image/image-20230525161340641.png" alt="image-20230525161340641"></p><h2 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰</h2><p><img src="../assets/image/Spring_Image/image-20230525161359050.png" alt="image-20230525161359050"></p><p><img src="../assets/image/Spring_Image/image-20230525161415108.png" alt="image-20230525161415108"></p><h2 id="æ–¹æ³•å››">æ–¹æ³•å››</h2><p>è¿™ç§æ–¹æ³•è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯ç§é…ç½®æ–‡ä»¶éƒ½åº”è¯¥æœ‰è‡ªå·±çš„èŒè´£</p><p>ä¾‹å¦‚xmlé…ç½®springç”¨</p><p>è€Œmysqlçš„é…ç½®æ”¾åœ¨propertiesä¸­æ›´å¥½ä¸€äº›</p><p>æ–¹æ³•äº”å°†å¯¹è¿™ç§æ–¹æ³•è¿›è¡Œä¼˜åŒ–</p><p><img src="../assets/image/Spring_Image/image-20230525161438908.png" alt="image-20230525161438908"></p><p><img src="../assets/image/Spring_Image/image-20230525161446087.png" alt="image-20230525161446087"></p><h2 id="æ–¹æ³•äº”">æ–¹æ³•äº”</h2><h3 id="åœ¨xmlæ–‡ä»¶ä¸­åˆ›å»ºå‘½åç©ºé—´context">åœ¨xmlæ–‡ä»¶ä¸­åˆ›å»ºå‘½åç©ºé—´context</h3><p>å¤åˆ¶xmlnsé‚£è¡Œç²˜è´´åœ¨ä¸‹é¢ï¼Œåé¢åŠ :contextï¼ŒæŠŠbeansæ”¹ä¸ºcontext</p><p>åœ¨xsi:schemaLocationçš„å€¼çš„å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸€è¡Œæ–°æ•°æ®ï¼ˆæ³¨æ„åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼‰ï¼ŒæŠŠbeansæ”¹ä¸ºcontext</p><p><img src="../assets/image/Spring_Image/image-20230525162300727.png" alt="image-20230525162300727"></p><h3 id="åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶">åŠ è½½å¤–éƒ¨é…ç½®æ–‡ä»¶</h3><p><img src="../assets/image/Spring_Image/image-20230525162501007.png" alt="image-20230525162501007"></p><p>ç„¶åå°±å¯ä»¥åœ¨beanä¸­ä½¿ç”¨propertiesäº†</p><p><img src="../assets/image/Spring_Image/image-20230525162631930.png" alt="image-20230525162631930"></p><p>testæ–¹æ³•ä¸­ä½¿ç”¨bean</p><p><img src="../assets/image/Spring_Image/image-20230525162821705.png" alt="image-20230525162821705"></p><h1>Springæ³¨è§£å¼€å‘</h1><p>Springæ˜¯è½»ä»£ç è€Œé‡é…ç½®çš„æ¡†æ¶ï¼Œé…ç½®æ¯”è¾ƒç¹é‡ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œæ‰€ä»¥æ³¨è§£å¼€å‘æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œæ³¨è§£ä»£æ›¿xmlé…ç½®æ–‡ä»¶å¯ä»¥ç®€åŒ–é…ç½®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>SpringåŸå§‹æ³¨è§£ä¸»è¦æ˜¯æ›¿ä»£<Bean>çš„é…ç½®</p><h2 id="åŸå§‹æ³¨è§£">åŸå§‹æ³¨è§£</h2><p>SpringåŸå§‹æ³¨è§£ï¼š</p><p>2ã€3ã€4å·æ³¨è§£å’Œ1å·ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨ä¸åŒçš„å±‚ä½¿ç”¨ä¸åŒçš„æ³¨è§£å¯è¯»æ€§å¼ºä¸€äº›</p><table><thead><tr><th><strong>æ³¨è§£</strong></th><th style="text-align:left"><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@Component</td><td style="text-align:left">ä½¿ç”¨åœ¨ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Controller</td><td style="text-align:left">ä½¿ç”¨åœ¨webå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Service</td><td style="text-align:left">ä½¿ç”¨åœ¨serviceå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Repository</td><td style="text-align:left">ä½¿ç”¨åœ¨daoå±‚ç±»ä¸Šç”¨äºå®ä¾‹åŒ–Bean</td></tr><tr><td>@Autowired</td><td style="text-align:left">ä½¿ç”¨åœ¨å­—æ®µä¸Šç”¨äºæ ¹æ®ç±»å‹ä¾èµ–æ³¨å…¥</td></tr><tr><td>@Qualifier</td><td style="text-align:left">ç»“åˆ@Autowiredä¸€èµ·ä½¿ç”¨ç”¨äºæ ¹æ®åç§°è¿›è¡Œä¾èµ–æ³¨å…¥</td></tr><tr><td>@Resource</td><td style="text-align:left">ç›¸å½“äº@Autowired+@Qualifierï¼ŒæŒ‰ç…§åç§°è¿›è¡Œæ³¨å…¥</td></tr><tr><td>@Value</td><td style="text-align:left">æ³¨å…¥æ™®é€šå±æ€§</td></tr><tr><td>@Scope</td><td style="text-align:left">æ ‡æ³¨Beançš„ä½œç”¨èŒƒå›´</td></tr><tr><td>@PostConstruct</td><td style="text-align:left">ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„åˆå§‹åŒ–æ–¹æ³•</td></tr><tr><td>@PreDestroy</td><td style="text-align:left">ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šæ ‡æ³¨è¯¥æ–¹æ³•æ˜¯Beançš„é”€æ¯æ–¹æ³•</td></tr></tbody></table><h3 id="å¼•ç”¨æ•°æ®ç±»å‹æ³¨å…¥">å¼•ç”¨æ•°æ®ç±»å‹æ³¨å…¥</h3><p>ä¸ä½¿ç”¨æ³¨è§£æ—¶çš„å¼€å‘ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525174516514.png" alt="image-20230525174516514"></p><p>ä½¿ç”¨æ³¨è§£çš„å¼€å‘ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525174739036.png" alt="image-20230525174739036"></p><p><img src="../assets/image/Spring_Image/image-20230525174750940.png" alt="image-20230525174750940"></p><p><img src="../assets/image/Spring_Image/image-20230525174756764.png" alt="image-20230525174756764"></p><p>ä¸Šé¢è¿™ä¸ªä»£ç ä¹Ÿå¯ä»¥ä¸å†™set()ï¼Œåœ¨å±æ€§ä¸Šé¢å†™ä¸¤ä¸ªæ³¨è§£ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525175234254.png" alt="image-20230525175234254"></p><p>ç”šè‡³ä¸ç”¨@Qualifier(â€œuserDaoâ€)ä¹Ÿå¯ä»¥</p><p>è¿™ç§å°±æ˜¯Springæ ¹æ®æ•°æ®ç±»å‹ä»å®¹å™¨ä¸­è·å–ï¼ˆæ‰¾UserDaoç±»å‹çš„beanè¿›è¡Œæ³¨å…¥ï¼‰ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªUserDaoç±»å‹çš„beanï¼Œå¦‚æœæœ‰å¤šä¸ªå°±å¿…é¡»é€šè¿‡@Qualifier(â€œuserDaoâ€)æ¥æŒ‡å®šæ³¨å…¥beançš„id</p><p>@Qualifieræ¯æ¬¡ä½¿ç”¨éƒ½è¦å’Œ@Autowiredæ­é…ä½¿ç”¨ï¼Œåä¹‹åˆ™ä¸å¿…é¡»</p><p><img src="../assets/image/Spring_Image/image-20230525175305381.png" alt="image-20230525175305381"></p><h3 id="æ™®é€šæ•°æ®ç±»å‹çš„æ³¨å…¥">æ™®é€šæ•°æ®ç±»å‹çš„æ³¨å…¥</h3><p><img src="../assets/image/Spring_Image/image-20230525175940199.png" alt="image-20230525175940199"></p><p><img src="../assets/image/Spring_Image/image-20230525180137750.png" alt="image-20230525180137750"></p><p>ä½¿ç”¨ä¸Šé¢è¿™ç§æ—¶è®°å¾—åœ¨xmlæ·»åŠ å¤–éƒ¨é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230525180235443.png" alt="image-20230525180235443"></p><p>ä½¿ç”¨æ³¨è§£æ³¨å…¥beançš„scopeå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230525180353087.png" alt="image-20230525180353087"></p><p>åªç”¨æ³¨è§£æŒ‡å®šbeançš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230525180746096.png" alt="image-20230525180746096"></p><h2 id="æ–°æ³¨è§£">æ–°æ³¨è§£</h2><p>ä½¿ç”¨ä¸Šé¢çš„æ³¨è§£è¿˜ä¸èƒ½å…¨éƒ¨æ›¿ä»£xmlé…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦ä½¿ç”¨æ³¨è§£æ›¿ä»£çš„é…ç½®å¦‚ä¸‹ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525181241227.png" alt="image-20230525181241227"></p><p>æ‰€ä»¥éœ€è¦æ›´å¤šçš„æ³¨è§£</p><p>æ–°æ³¨è§£ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525181337349.png" alt="image-20230525181337349"></p><p>é€šè¿‡æ³¨è§£ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®</p><p>ä¸»é…ç½®ç±»ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525183645266.png" alt="image-20230525183645266"></p><p>æ•°æ®æºé…ç½®ç±»ï¼š</p><p>ä¸»è¦è´Ÿè´£è·å¾—æ•°æ®æºï¼ˆä¾‹å¦‚ï¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯å†è¿æ¥MySQLï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230525183738657.png" alt="image-20230525183738657"></p><p>å°†é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®è¯»åˆ°å±æ€§ä¸­æ‰èƒ½ä½¿ç”¨</p><p><img src="../assets/image/Spring_Image/image-20230525183837510.png" alt="image-20230525183837510"></p><p>åœ¨ä½¿ç”¨@Bean(â€œdataSourceâ€)å°†æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ”¾åˆ°å®¹å™¨ä¸­</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Springä¼šå°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼å·²æŒ‡å®šåç§°å­˜å‚¨åˆ°Springçš„å®¹å™¨ä¸­</span><br><span class="line">å’Œ<span class="meta">@Component</span>ä¸åŒçš„åœ°æ–¹ï¼š</span><br><span class="line"><span class="meta">@Component</span>æ˜¯é€šè¿‡ç±»åˆ›å»ºbeanæ”¾åˆ°å®¹å™¨ï¼Œå¯èƒ½é€šè¿‡</span><br><span class="line">  <span class="meta">@Autowired</span>å’Œ <span class="meta">@Qualifier</span>å¯¹å¼•ç”¨å€¼æ³¨å…¥</span><br><span class="line">  <span class="meta">@Value</span>å¯¹æ™®é€šæ•°æ®ç±»å‹æ³¨å…¥</span><br><span class="line">è€Œ<span class="meta">@Bean</span>æ˜¯æŠŠç»è¿‡æ–¹æ³•å¤„ç†çš„æ•°æ®æ”¾åˆ°å®¹å™¨ä¸­</span><br></pre></td></tr></table></figure><p><img src="../assets/image/Spring_Image/image-20230525183920925.png" alt="image-20230525183920925"></p><p>å¼€å‘åçš„æµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230525184150286.png" alt="image-20230525184150286"></p><h1>Springæ•´åˆJUnit</h1><p>å› ä¸ºï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525184729697.png" alt="image-20230525184729697"></p><p>è§£å†³æ€è·¯ï¼š</p><ul><li>è®©SpringJunitè´Ÿè´£åˆ›å»ºSpringå®¹å™¨ï¼Œä½†æ˜¯éœ€è¦å°†é…ç½®æ–‡ä»¶çš„åç§°å‘Šè¯‰å®ƒ</li><li>å°†éœ€è¦è¿›è¡Œæµ‹è¯•Beanç›´æ¥åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ³¨å…¥</li></ul><p>Springé›†æˆJunitæ­¥éª¤ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230525184839840.png" alt="image-20230525184839840"></p><p>å¯¼å…¥åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230525191924851.png" alt="image-20230525191924851"></p><p>å†™æµ‹è¯•ç±»è¿è¡Œå°±å¯ä»¥ä½¿ç”¨</p><p><img src="../assets/image/Spring_Image/image-20230525193314457.png" alt="image-20230525193314457"></p><p>å°±ç®—åªè¿è¡Œtest1()ï¼Œä¹Ÿä¼šä»applicationContext.xmlä¸­è¯»å–éœ€è¦çš„å†…å®¹</p><p><img src="../assets/image/Spring_Image/image-20230525193502055.png" alt="image-20230525193502055"></p><p><img src="../assets/image/Spring_Image/image-20230525193733099.png" alt="image-20230525193733099"></p><p><img src="../assets/image/Spring_Image/image-20230525193800525.png" alt="image-20230525193800525"></p><p>ä¸ä½†å¯ä»¥é€šè¿‡xmlæ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ç±»æ¥æµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230525195652352.png" alt="image-20230525195652352"></p><h1>SpringAOP</h1><h2 id="åˆ‡é¢-åˆ‡ç‚¹-é€šçŸ¥">åˆ‡é¢=åˆ‡ç‚¹+é€šçŸ¥</h2><p>ä»€ä¹ˆæ˜¯AOP</p><p><img src="../assets/image/Spring_Image/image-20230526151632822.png" alt="image-20230526151632822"></p><p>ä½œç”¨åŠå…¶ä¼˜åŠ¿</p><p><img src="../assets/image/Spring_Image/image-20230526151657426.png" alt="image-20230526151657426"></p><p>åº•å±‚å®ç°</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®é™…ä¸Šï¼ŒAOP çš„åº•å±‚æ˜¯é€šè¿‡ Spring æä¾›çš„çš„åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°çš„ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼ŒSpringé€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯åŠ¨æ€çš„ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•æ‰§è¡Œæ—¶è¿›è¡Œå¢å¼ºåŠŸèƒ½çš„ä»‹å…¥ï¼Œåœ¨å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼Œä»è€Œå®ŒæˆåŠŸèƒ½çš„å¢å¼ºã€‚</span><br></pre></td></tr></table></figure><h2 id="åŸºäºJDKçš„åŠ¨æ€ä»£ç†">åŸºäºJDKçš„åŠ¨æ€ä»£ç†</h2><h3 id="ç›®æ ‡å¯¹è±¡">ç›®æ ‡å¯¹è±¡</h3><p><img src="../assets/image/Spring_Image/image-20230526160309406.png" alt="image-20230526160309406"></p><h3 id="å¢å¼ºå¯¹è±¡">å¢å¼ºå¯¹è±¡</h3><p><img src="../assets/image/Spring_Image/image-20230526160320891.png" alt="image-20230526160320891"></p><p>ä½¿ç”¨å¢å¼ºå¯¹è±¡ å¯¹ ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½è¿›è¡Œå¢å¼º</p><p><img src="../assets/image/Spring_Image/image-20230526160404843.png" alt="image-20230526160404843"></p><h2 id="åŸºäºcglibçš„åŠ¨æ€ä»£ç†">åŸºäºcglibçš„åŠ¨æ€ä»£ç†</h2><p>mavenå®˜æ–¹æ•´åˆäº†cglibè¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…</p><p><img src="../assets/image/Spring_Image/image-20230526173343588.png" alt="image-20230526173343588"></p><h2 id="AOPç›¸å…³æ¦‚å¿µ">AOPç›¸å…³æ¦‚å¿µ</h2><p><img src="../assets/image/Spring_Image/image-20230526185340919.png" alt="image-20230526185340919"></p><h2 id="AOP-å¼€å‘æ˜ç¡®çš„äº‹é¡¹">AOP å¼€å‘æ˜ç¡®çš„äº‹é¡¹</h2><p><img src="../assets/image/Spring_Image/image-20230526190210094.png" alt="image-20230526190210094"></p><h2 id="xmlå®ç°AOP">xmlå®ç°AOP</h2><h3 id="é€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç±»å‹">é€šçŸ¥ï¼ˆå¢å¼ºï¼‰çš„ç±»å‹</h3><p><img src="../assets/image/Spring_Image/image-20230527163019327.png" alt="image-20230527163019327"></p><p>å¢åŠ aopå‘½åç©ºé—´</p><p><img src="../assets/image/Spring_Image/image-20230527093235236.png" alt="image-20230527093235236"></p><h3 id="ä½¿ç”¨å‰åç½®æ–¹æ³•è¿›è¡Œå¢å¼º">ä½¿ç”¨å‰åç½®æ–¹æ³•è¿›è¡Œå¢å¼º</h3><p>xmlä¸­çš„é…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230527093347536.png" alt="image-20230527093347536"></p><p>ä½¿ç”¨Springä¸­æ•´åˆçš„JUnitè¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527093414356.png" alt="image-20230527093414356"></p><p>è¿è¡Œç»“æœ</p><p><img src="../assets/image/Spring_Image/image-20230527093427571.png" alt="image-20230527093427571"></p><p>åˆ‡ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230527102831520.png" alt="image-20230527102831520"></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡å®šå›ºå®šçš„æŸä¸ªæ–¹æ³•ï¼Œè¿™ç§è¡¨è¾¾å¼ä¸å¸¸ç”¨</span><br><span class="line">execution(<span class="keyword">public</span> <span class="keyword">void</span> com.itheima.aop.Target.method())</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šTargetç±»ä¸‹çš„æ‰€æœ‰<span class="keyword">void</span>æ–¹æ³•</span><br><span class="line">execution(<span class="keyword">void</span> com.itheima.aop.Target.*(..))</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šaopåŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼ä»»æ„</span><br><span class="line">execution(* com.itheima.aop.*.*(..))</span><br><span class="line">    </span><br><span class="line">æŒ‡å®šaopåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼ä»»æ„   </span><br><span class="line">execution(* com.itheima.aop..*.*(..))</span><br><span class="line">    </span><br><span class="line">è¿™ç§æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰</span><br><span class="line">execution(* *..*.*(..))</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç¯ç»•æ–¹æ³•è¿›è¡Œå¢å¼º">ä½¿ç”¨ç¯ç»•æ–¹æ³•è¿›è¡Œå¢å¼º</h3><p>æ•ˆæœå’Œå‰åç½®ä¸€æ ·</p><p><img src="../assets/image/Spring_Image/image-20230527162023399.png" alt="image-20230527162023399"></p><p>å°†ä¹‹å‰å†™åœ¨ä¸¤ä¸ªæ–¹æ³•ä¸­çš„å†…å®¹ï¼Œåœ¨ä¸€ä¸ªç¯ç»•æ–¹æ³•ä¸­å®ç°</p><p><img src="../assets/image/Spring_Image/image-20230527162031929.png" alt="image-20230527162031929"></p><h3 id="å¯¹æ–¹æ³•çš„å¼‚å¸¸å¤„ç†è¿›è¡Œå¢å¼º">å¯¹æ–¹æ³•çš„å¼‚å¸¸å¤„ç†è¿›è¡Œå¢å¼º</h3><p>åœ¨é…ç½®æ–‡ä»¶ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230527162414419.png" alt="image-20230527162414419"></p><p>åœ¨ç›®æ ‡æ–¹æ³•ä¸­å†™ä¸€ä¸ªå¼‚å¸¸</p><p><img src="../assets/image/Spring_Image/image-20230527162421234.png" alt="image-20230527162421234"></p><p>åœ¨MyAspectç±»ä¸­æ–°å¢ä¸€ä¸ªç”¨äºå¼‚å¸¸å¤„ç†çš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230527162431636.png" alt="image-20230527162431636"></p><h3 id="æœ€ç»ˆå¢å¼º">æœ€ç»ˆå¢å¼º</h3><p>åœ¨MyAspectç±»ä¸­æ–°å¢ä¸€ä¸ªç”¨äºæœ€ç»ˆå¢å¼ºçš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230527162649720.png" alt="image-20230527162649720"></p><p>xmlä¸­è¿›è¡Œé…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230527162714155.png" alt="image-20230527162714155"></p><p>æ‰§è¡Œç»“æœ</p><p><img src="../assets/image/Spring_Image/image-20230527162918780.png" alt="image-20230527162918780"></p><p>æœ‰å¼‚å¸¸æ—¶çš„å¢å¼º</p><p><img src="../assets/image/Spring_Image/image-20230527162938700.png" alt="image-20230527162938700"></p><h3 id="xmlä¸­æ›´å¥½çš„å†™æ³•">xmlä¸­æ›´å¥½çš„å†™æ³•</h3><p>é€šè¿‡è¡¨è¾¾å¼</p><p><img src="../assets/image/Spring_Image/image-20230527173053857.png" alt="image-20230527173053857"></p><h2 id="åŸºäºæ³¨è§£çš„AOPå¼€å‘">åŸºäºæ³¨è§£çš„AOPå¼€å‘</h2><p>å¼€å‘æ­¥éª¤</p><p><img src="../assets/image/Spring_Image/image-20230527173932228.png" alt="image-20230527173932228"></p><p>åˆ‡ç‚¹è¡¨è¾¾å¼ç”¨äºæŒ‡æ˜å¯¹å“ªäº›æ–¹æ³•è¿›è¡Œå¢å¼º</p><p>ç›®æ ‡ç±»ç”¨æ³¨è§£åŠ è½½è¿›å®¹å™¨ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230527180726305.png" alt="image-20230527180726305"></p><p>å¸¦æœ‰é€šçŸ¥çš„ç±»é€šè¿‡æ³¨è§£åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œå¹¶æŒ‡æ˜è¿™ä¸ªç±»æ˜¯åˆ‡é¢ç±»</p><p><img src="../assets/image/Spring_Image/image-20230527181017239.png" alt="image-20230527181017239"></p><p>å°†é€šçŸ¥åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œéœ€æŒ‡æ˜åˆ‡ç‚¹è¡¨è¾¾å¼</p><p><img src="../assets/image/Spring_Image/image-20230527181044398.png" alt="image-20230527181044398"></p><p>åœ¨xmlä¸­å¼€å¯ç»„ä»¶æ‰«æã€å¼€å¯aopè‡ªåŠ¨ä»£ç†</p><p><img src="../assets/image/Spring_Image/image-20230527181139590.png" alt="image-20230527181139590"></p><p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527181156639.png" alt="image-20230527181156639"></p><p>åŸºäºæ³¨è§£çš„AOPå¼€å‘çš„çŸ¥è¯†è¦ç‚¹</p><p><img src="../assets/image/Spring_Image/image-20230527181339131.png" alt="image-20230527181339131"></p><h1>jdbcæ¨¡æ¿</h1><ol><li>åˆ›å»ºæ•°æ®æº</li><li>åˆ›å»ºæ¨¡æ¿</li><li>è®¾ç½®æ¨¡æ¿çš„æ•°æ®æºå¯¹è±¡</li><li>æ‰§è¡Œæ“ä½œ</li></ol><p><img src="../assets/image/Spring_Image/image-20230527194006087.png" alt="image-20230527194006087"></p><p>å°†ä¸Šé¢å›¾ç‰‡ä¸­çš„æ“ä½œå˜ä¸ºspring xmlä¸­çš„æ“ä½œå°±æ˜¯</p><p><img src="../assets/image/Spring_Image/image-20230527194833220.png" alt="image-20230527194833220"></p><p><img src="../assets/image/Spring_Image/image-20230527195216939.png" alt="image-20230527195216939"></p><p>æŠŠæ•°æ®åº“ä¿¡æ¯æ”¾åœ¨propertiesä¸­</p><p>æ·»åŠ å‘½åç©ºé—´ã€åŠ è½½é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230527195632141.png" alt="image-20230527195632141"></p><p>ç”¨SpringJunit4è¿›è¡Œæµ‹è¯•</p><p><img src="../assets/image/Spring_Image/image-20230527200240194.png" alt="image-20230527200240194"></p><p>æŸ¥è¯¢</p><p>æŸ¥è¯¢å¤šåˆ—ï¼ˆåŠ å¤šè¡Œï¼‰æ•°æ®å’Œå•ä¸ªæ•°æ®</p><p><img src="../assets/image/Spring_Image/image-20230527203751932.png" alt="image-20230527203751932"></p><p>ç”¨Accountç±»è¿›è¡Œæ¥å—æ•°æ®çš„æ“ä½œ</p><p>ç±»ä¸­å¿…é¡»å«æœ‰æŸ¥è¯¢å‡ºæ¥çš„ç»“æœçš„å¯¹åº”å±æ€§</p><p><strong>å¹¶ä¸”å¿…é¡»æœ‰è¿™å†™å±æ€§çš„set()   å¯ä»¥æ²¡æœ‰get()</strong></p><p><strong>ç±»çš„å±æ€§åå’Œæ•°æ®åº“çš„åˆ—åå¿…é¡»ç›¸åŒ</strong></p><p><img src="../assets/image/Spring_Image/image-20230527204144865.png" alt="image-20230527204144865"></p><h2 id="çŸ¥è¯†è¦ç‚¹">çŸ¥è¯†è¦ç‚¹</h2><p><img src="../assets/image/Spring_Image/image-20230527204723426.png" alt="image-20230527204723426"></p><h1>Springäº‹åŠ¡æ§åˆ¶</h1><h2 id="ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶">ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶</h2><h3 id="TransactionDefinition">TransactionDefinition</h3><p><img src="../assets/image/Spring_Image/image-20230528171824146.png" alt="image-20230528171824146"></p><h3 id="äº‹åŠ¡éš”ç¦»ç­‰çº§">äº‹åŠ¡éš”ç¦»ç­‰çº§</h3><p>æœ€åä¸€ä¸ªï¼šä¸²è¡ŒåŒ–    ç›¸å½“äºé”è¡¨</p><p><img src="../assets/image/Spring_Image/image-20230528172103438.png" alt="image-20230528172103438"></p><h3 id="äº‹åŠ¡ä¼ æ’­è¡Œä¸º">äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><p><img src="../assets/image/Spring_Image/image-20230528172218278.png" alt="image-20230528172218278"></p><h3 id="TransactionStatus">TransactionStatus</h3><p><img src="../assets/image/Spring_Image/image-20230528173344446.png" alt="image-20230528173344446"></p><h3 id="ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ä¸‰å¤§å¯¹è±¡">ç¼–ç¨‹å¼äº‹åŠ¡æ§åˆ¶ä¸‰å¤§å¯¹è±¡</h3><p>æ ¹æ®DAOå±‚é‡‡ç”¨ä¸åŒçš„æŠ€æœ¯æ—¶ï¼Œç”¨ä¸åŒçš„å¯¹è±¡æ§åˆ¶</p><p><img src="../assets/image/Spring_Image/image-20230528174020171.png" alt="image-20230528174020171"></p><h2 id="å£°æ˜å¼äº‹åŠ¡æ§åˆ¶">å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h2><h3 id="åŸºäºXML">åŸºäºXML</h3><p>ä»€ä¹ˆæ˜¯å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Spring</span> çš„å£°æ˜å¼äº‹åŠ¡é¡¾åæ€ä¹‰å°±æ˜¯é‡‡ç”¨å£°æ˜çš„æ–¹å¼æ¥å¤„ç†äº‹åŠ¡ã€‚è¿™é‡Œæ‰€è¯´çš„å£°æ˜ï¼Œå°±æ˜¯æŒ‡åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜ï¼Œç”¨åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å£°æ˜å¼çš„å¤„ç†äº‹åŠ¡æ¥ä»£æ›¿ä»£ç å¼çš„å¤„ç†äº‹åŠ¡ã€‚</span><br></pre></td></tr></table></figure><p>å£°æ˜å¼äº‹åŠ¡å¤„ç†çš„ä½œç”¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">äº‹åŠ¡ç®¡ç†ä¸ä¾µå…¥å¼€å‘çš„ç»„ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œä¸šåŠ¡é€»è¾‘å¯¹è±¡å°±ä¸ä¼šæ„è¯†åˆ°æ­£åœ¨äº‹åŠ¡ç®¡ç†ä¹‹ä¸­ï¼Œäº‹å®ä¸Šä¹Ÿåº”è¯¥å¦‚æ­¤ï¼Œå› ä¸ºäº‹åŠ¡ç®¡ç†æ˜¯å±äºç³»ç»Ÿå±‚é¢çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæƒ³è¦æ”¹å˜äº‹åŠ¡ç®¡ç†ç­–åˆ’çš„è¯ï¼Œä¹Ÿåªéœ€è¦åœ¨å®šä¹‰æ–‡ä»¶ä¸­é‡æ–°é…ç½®å³å¯</span><br><span class="line">åœ¨ä¸éœ€è¦äº‹åŠ¡ç®¡ç†çš„æ—¶å€™ï¼Œåªè¦åœ¨è®¾å®šæ–‡ä»¶ä¸Šä¿®æ”¹ä¸€ä¸‹ï¼Œå³å¯ç§»å»äº‹åŠ¡ç®¡ç†æœåŠ¡ï¼Œæ— éœ€æ”¹å˜ä»£ç é‡æ–°ç¼–è¯‘ï¼Œè¿™æ ·ç»´æŠ¤èµ·æ¥æå…¶æ–¹ä¾¿</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šSpring å£°æ˜å¼äº‹åŠ¡æ§åˆ¶åº•å±‚å°±æ˜¯AOP</strong>ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</p><h3 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h3><p><img src="../assets/image/Spring_Image/image-20230528175846163.png" alt="image-20230528175846163"></p><h4 id="åœ¨xmlæ–‡ä»¶ä¸­">åœ¨xmlæ–‡ä»¶ä¸­</h4><p>1.é…ç½®æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090016333.png" alt="image-20230531090016333"></p><p>2.é…ç½®jdbcæ¨¡æ¿</p><p>é‡Œé¢æ³¨å…¥æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090144429.png" alt="image-20230531090144429"></p><p>3.é…ç½®è‡ªå·±å†™çš„æŒä¹…å±‚ç±»</p><p>æ³¨å…¥jdbcæ¨¡æ¿ç»™è¿™ä¸ªç±»çš„å±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230531090402268.png" alt="image-20230531090402268"></p><p><img src="../assets/image/Spring_Image/image-20230531090255770.png" alt="image-20230531090255770"></p><p>4.é…ç½®è‡ªå·±å†™çš„ä¸šåŠ¡å±‚ç±»</p><p>æ³¨å…¥æŒä¹…å±‚ç±»</p><p><img src="../assets/image/Spring_Image/image-20230531090342933.png" alt="image-20230531090342933"></p><p><img src="../assets/image/Spring_Image/image-20230531090424272.png" alt="image-20230531090424272"></p><p>5.é…ç½®å¹³å°äº‹åŠ¡ç®¡ç†å™¨</p><p>æ³¨å…¥æ•°æ®æº</p><p><img src="../assets/image/Spring_Image/image-20230531090519305.png" alt="image-20230531090519305"></p><p>6.äº‹åŠ¡ï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰çš„å¢å¼º</p><p>å…ˆæŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨</p><p>ç„¶åæ·»åŠ äº‹åŠ¡çš„å±æ€§</p><p>â€‹[æ–¹æ³•å]    [éš”ç¦»ç­‰çº§]    [æ˜¯å¦åªè¯»]</p><p>å¦‚æœè®¾ç½®åªè¯»ï¼Œnameè¿™ä¸ªæ–¹æ³•åªèƒ½è¯»æ•°æ®åº“ä¸èƒ½å†™</p><p><img src="../assets/image/Spring_Image/image-20230531092715160.png" alt="image-20230531092715160"></p><p>7.ç”¨aopå°†äº‹åŠ¡çš„å¢å¼ºç»‡å…¥åˆ°åˆ‡ç‚¹è¡¨è¾¾å¼ä¸­</p><p>è™½ç„¶ä¸Šé¢æŒ‡å®šäº†éœ€è¦äº‹åŠ¡æ§åˆ¶çš„æ–¹æ³•åï¼Œä½†æ˜¯aopç»‡å…¥çš„æ—¶å€™ä¹Ÿè¦æŒ‡å®šå°†å“ªä¸ªäº‹åŠ¡å¢å¼ºç»‡å…¥åˆ°å“ªä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230531090952569.png" alt="image-20230531090952569"></p><h3 id="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶">åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶</h3><p>åœ¨xmlä¸­</p><p>å¼€å¯ç»„ä»¶æ‰«æã€æ·»åŠ æ•°æ®æºã€æ·»åŠ jdbcæ¨¡æ¿ã€æ·»åŠ äº‹åŠ¡æ§åˆ¶ç®¡ç†å™¨ã€äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</p><p>å…¶ä¸­jdbcæ¨¡æ¿å’Œäº‹åŠ¡ç®¡ç†å™¨éƒ½è¦æ³¨å…¥æ•°æ®æº</p><p><strong>ä¸åŠ æ³¨è§£é©±åŠ¨æ³¨è§£å¯èƒ½ä¸èµ·ä½œç”¨</strong></p><p><img src="../assets/image/Spring_Image/image-20230531095808450.png" alt="image-20230531095808450"></p><p>æŒä¹…å±‚</p><p>æ³¨å…¥jdbcæ¨¡æ¿</p><p><img src="../assets/image/Spring_Image/image-20230531095826459.png" alt="image-20230531095826459"></p><p>ä¸šåŠ¡å±‚</p><p>æ³¨å…¥æŒä¹…å±‚</p><p>ç»™éœ€è¦äº‹åŠ¡æ§åˆ¶çš„æ–¹æ³•ä½¿ç”¨æ³¨è§£@Transactional</p><p>é€šè¿‡ç»™æ³¨è§£æ·»åŠ å±æ€§(isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED)</p><p>å®ç°éš”ç¦»ç­‰çº§ã€ä¼ æ’­ã€æ˜¯å¦åªè¯»çš„è®¾ç½®</p><p><img src="../assets/image/Spring_Image/image-20230531095852416.png" alt="image-20230531095852416"></p><h1>Springé›†æˆwebç¯å¢ƒ</h1><p>pom.xmlä¸­æ·»åŠ ä¸¤ä¸ªæ–°çš„åæ ‡</p><p><img src="../assets/image/Spring_Image/image-20230601154914365.png" alt="image-20230601154914365"></p><p>webå±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160436675.png" alt="image-20230601160436675"></p><p>æœåŠ¡å±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160451287-16856066914451.png" alt="image-20230601160451287"></p><p>æŒä¹…å±‚</p><p><img src="../assets/image/Spring_Image/image-20230601160502709.png" alt="image-20230601160502709"></p><p>applicationContext.xmlä¸­æŠŠDaoæ³¨å…¥åˆ°Serviceä¸­</p><p><img src="../assets/image/Spring_Image/image-20230601160534406.png" alt="image-20230601160534406"></p><p>webå±‚è°ƒç”¨â€“&gt;Serviceâ€“&gt;Dao</p><p>æ¯æ¬¡ä½¿ç”¨webå±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br></pre></td></tr></table></figure><p>éƒ½è¦åŠ è½½é…ç½®æ–‡ä»¶å’Œåˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</p><p><img src="../assets/image/Spring_Image/image-20230601160821601.png" alt="image-20230601160821601"></p><p>è§£å†³æ–¹æ³•ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230601161003281.png" alt="image-20230601161003281"></p><h2 id="å¼€å‘æ­¥éª¤">å¼€å‘æ­¥éª¤</h2><h3 id="web-xmlä¸­">web.xmlä¸­</h3><p>é…ç½®å…¨å±€ä¸Šä¸‹æ–‡å‚æ•°ï¼Œåœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡nameè®¿é—®valueçš„å€¼</p><p>è¿™æ ·æ”¹é…ç½®æ–‡ä»¶çš„æ—¶å€™å°±ä¸ç”¨æ”¹ä»£ç äº†</p><p><img src="../assets/image/Spring_Image/image-20230601181728122.png" alt="image-20230601181728122"></p><p>é…ç½®ç›‘å¬å™¨</p><p><img src="../assets/image/Spring_Image/image-20230601181837657.png" alt="image-20230601181837657"></p><p>æ€»ç»“</p><p><img src="../assets/image/Spring_Image/image-20230601182916680.png" alt="image-20230601182916680"></p><p><strong>MVC == Model  View  Control</strong></p><h1>SpringMVC</h1><p>æ¦‚è¿°</p><p><img src="../assets/image/Spring_Image/image-20230601190911958.png" alt="image-20230601190911958"></p><h2 id="å¼€å‘æ­¥éª¤-2">å¼€å‘æ­¥éª¤</h2><p><img src="../assets/image/Spring_Image/image-20230602152213016.png" alt="image-20230602152213016"></p><h3 id="web-xml">web.xml</h3><p>é…ç½®å‰ç«¯æ§åˆ¶å™¨</p><p><img src="../assets/image/Spring_Image/image-20230602162411110.png" alt="image-20230602162411110"></p><p>é…ç½®å…¨å±€åˆå§‹åŒ–å‚æ•°</p><p>å°†ä¼˜å…ˆåˆå§‹åŒ–è¿™ä¸ªèµ„æºxmlæ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230602162502572.png" alt="image-20230602162502572"></p><p>é…ç½®ç›‘å¬å™¨</p><p><img src="../assets/image/Spring_Image/image-20230602162714540.png" alt="image-20230602162714540"></p><p>é…ç½®è‡ªå·±çš„æ˜ å°„</p><p>ç½‘å€ååŠ ä¸Š/userServeletå°†è¿è¡Œcom.itheima.web.UserServeletç±»ä¸­çš„doGet()</p><p><img src="../assets/image/Spring_Image/image-20230602162742705.png" alt="image-20230602162742705"></p><p><img src="../assets/image/Spring_Image/image-20230602162839136.png" alt="image-20230602162839136"></p><h3 id="applicationContext-xml">applicationContext.xml</h3><p><img src="../assets/image/Spring_Image/image-20230602162924426.png" alt="image-20230602162924426"></p><h3 id="spring-mvc-xml">spring-mvc.xml</h3><p>é…ç½®ç»„ä»¶æ‰«æï¼Œç”¨äºæ‰«æåŒ…ä¸­çš„æ³¨è§£</p><p><img src="../assets/image/Spring_Image/image-20230602163017412.png" alt="image-20230602163017412"></p><h3 id="webapp">webapp</h3><p>ä¸‹é¢åˆ›å»ºä¸€ä¸ªç½‘é¡µsuccess.jsp</p><p><img src="../assets/image/Spring_Image/image-20230602163052149.png" alt="image-20230602163052149"></p><p>åœ¨ç»„ä»¶æ‰«æçš„åŒ…ä¸­å†™ä¸ªç±»ï¼Œç”¨äºé“¾æ¥åˆ°success.jsp</p><p>è¯¥ç±»ä½¿ç”¨@Controllerå°†è¿™ä¸ªç±»åŠ è½½åˆ°springå®¹å™¨ä¸­</p><p>ä½¿ç”¨@RequestMapping(â€œ/quickâ€)æŒ‡å®šäº†ç½‘å€ï¼Œåœ¨ç½‘å€ååŠ ä¸Šè¿™ä¸ªå°±å¯ä»¥è®¿é—®è¿™ä¸ªæ–¹æ³•è¿”å›çš„StringæŒ‡å®šä½ç½®çš„æ–‡ä»¶</p><p><img src="../assets/image/Spring_Image/image-20230602163141705.png" alt="image-20230602163141705"></p><h2 id="ç¨‹åºå¯»æ‰¾é¡ºåº">ç¨‹åºå¯»æ‰¾é¡ºåº</h2><p>è¾“å…¥localhost:8080/quickå</p><p>å…ˆæ‰¾Tomcat</p><p>ç„¶ååœ¨web.xmlå› ä¸ºæœ‰å‰ç«¯æ§åˆ¶å™¨å¹¶ä¸”</p><p><url-pattern>/</url-pattern></p><p>è¡¨ç¤ºæ‰¾ä»»ä½•åœ°å€éƒ½å…ˆç»è¿‡è¿™ä¸ªæ§åˆ¶å™¨</p><p>ç„¶åå°±èƒ½æ‰¾åˆ°/quickäº†</p><p><img src="../assets/image/Spring_Image/image-20230602163424126.png" alt="image-20230602163424126"></p><p>èƒ½æ‰¾åˆ°/quickæ˜¯å› ä¸ºèµ„æºé…ç½®æ–‡ä»¶spring-mvc.xmlä¸­å¼€å¯äº†åŒ…com.itheima.controllerçš„æ‰«æ</p><p><img src="../assets/image/Spring_Image/image-20230602163820093.png" alt="image-20230602163820093"></p><p>ç„¶ååœ¨è¿™ä¸ªåŒ…ä¸­æœ‰ä¸ªç±»</p><p>é€šè¿‡æ³¨è§£å°†è¿™ä¸ªç±»åŠ åˆ°äº†å®¹å™¨ä¸­ï¼Œè€Œç”¨æ³¨è§£@RequestMapping(â€œ/quickâ€)æ³¨è§£çš„æ–¹æ³•ï¼Œå½“è¾“å…¥è¿™ä¸ªç½‘å€æ—¶å°±ä¼šè°ƒç”¨ï¼Œæ‰§è¡Œå®Œæ–¹æ³•åï¼Œé“¾æ¥åˆ°è¿”å›çš„StringæŒ‡å¼•çš„æ–‡ä»¶ä¸Š</p><p><img src="../assets/image/Spring_Image/image-20230603110612766.png" alt="image-20230603110612766"></p><p>success.jspæ–‡ä»¶ä¸­æ˜¯htmlä»£ç </p><p><img src="../assets/image/Spring_Image/image-20230602164008972.png" alt="image-20230602164008972"></p><h2 id="é€»è¾‘æµç¨‹å›¾">é€»è¾‘æµç¨‹å›¾</h2><p><img src="../assets/image/Spring_Image/image-20230603093641452.png" alt="image-20230603093641452"></p><h2 id="SpringMVCæ‰§è¡Œæµç¨‹">SpringMVCæ‰§è¡Œæµç¨‹</h2><p><img src="../assets/image/Spring_Image/image-20230603094019177.png" alt="image-20230603094019177"></p><h2 id="ç»„ä»¶è§£æ">ç»„ä»¶è§£æ</h2><p><img src="../assets/image/Spring_Image/image-20230603100720670.png" alt="image-20230603100720670"></p><p><img src="../assets/image/Spring_Image/image-20230603100743066.png" alt="image-20230603100743066"></p><p>åœ¨ä½¿ç”¨ç»„ä»¶æ‰«ææ—¶å¯ä»¥ä»¥æŒ‡å®šæ‰«æåŒ…å«å“ªäº›æ³¨è§£æˆ–é™¤å»å“ªäº›æ³¨è§£</p><p><img src="../assets/image/Spring_Image/image-20230603141215035.png" alt="image-20230603141215035"></p><p>é…ç½®å†…éƒ¨èµ„æºè§£æå™¨</p><p>åœ¨é…ç½®ä¹‹å‰ï¼Œå› ä¸ºjspæ–‡ä»¶éƒ½åœ¨jspæ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€ä»¥returnçš„å€¼è¦å†™å‰ç¼€å’Œåç¼€ï¼ˆ.jspï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230603141255107.png" alt="image-20230603141255107"></p><p>é…ç½®ä¹‹åï¼Œåªéœ€è¦å†™æ–‡ä»¶å</p><p><img src="../assets/image/Spring_Image/image-20230603141349511.png" alt="image-20230603141349511"></p><p>åœ¨spring-mvc.xmlä¸­é…ç½®</p><p>è¡¨ç¤ºä¸ºæ¯ä¸ªå¸¦æœ‰@RequestMappingæ³¨è§£çš„æ–¹æ³•è¿”å›çš„StringåŠ ä¸Šå‰åç¼€</p><p><img src="../assets/image/Spring_Image/image-20230603141418537.png" alt="image-20230603141418537"></p><h2 id="æ³¨è§£è§£æ">æ³¨è§£è§£æ</h2><p><img src="../assets/image/Spring_Image/image-20230603100808598.png" alt="image-20230603100808598"></p><p>ä¾‹å¦‚ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230603111806588.png" alt="image-20230603111806588"></p><p>éœ€è¦çš„urlé“¾æ¥å¿…é¡»è¦æœ‰å‚æ•°usernmae l</p><p><img src="../assets/image/Spring_Image/image-20230603111841101.png" alt="image-20230603111841101"></p><h2 id="SpringMVCç›¸å…³ç»„ä»¶">SpringMVCç›¸å…³ç»„ä»¶</h2><p><img src="../assets/image/Spring_Image/image-20230603141627910.png" alt="image-20230603141627910"></p><p>åœ¨return &quot;suuccess&quot;æ—¶é»˜è®¤å‰é¢å¸¦forwardï¼Œæ„æ€æ˜¯åœ¨å½“å‰ç½‘å€ååŠ ä¸Šåè®¿é—®çš„ç›®å½•ã€‚å¦‚æœå†™return &quot;redirect:suuccess&quot;å°±ä¼šæŠŠç½‘å€å˜ä¸ºlocalhost:8080/success   è€Œä¸æ˜¯ç½‘å€å åŠ </p><p><img src="../assets/image/Spring_Image/image-20230603142014109.png" alt="image-20230603142014109"></p><h1>æµè§ˆå™¨è¯·æ±‚æ–¹å¼</h1><p><img src="../assets/image/Spring_Image/image-20230603111430937.png" alt="image-20230603111430937"></p><h1>SpringMVCæ•°æ®å“åº”</h1><h2 id="æ•°æ®å“åº”æ–¹å¼">æ•°æ®å“åº”æ–¹å¼</h2><p><img src="../assets/image/Spring_Image/image-20230603142722394.png" alt="image-20230603142722394"></p><h3 id="é¡µé¢è·³è½¬">é¡µé¢è·³è½¬</h3><p>è¿”å›å­—ç¬¦ä¸²å½¢å¼</p><p><img src="../assets/image/Spring_Image/image-20230603143115529.png" alt="image-20230603143115529"></p><p>è¿”å›ModelAndViewå½¢å¼</p><p><img src="../assets/image/Spring_Image/image-20230603143228470.png" alt="image-20230603143228470"></p><p>æ•°æ®åœ¨jspæ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨${é”®å}çš„æ–¹å¼æå–</p><p><img src="../assets/image/Spring_Image/image-20230603143902717.png" alt="image-20230603143902717"></p><p><img src="../assets/image/Spring_Image/image-20230603143943620.png" alt="image-20230603143943620"></p><p>springMVCæ¡†æ¶ä¼šæ£€æµ‹å‚æ•°ï¼Œå¯ä»¥è‡ªåŠ¨æä¾›ä¸€ä¸ªModelAndViewå¯¹è±¡</p><p><img src="../assets/image/Spring_Image/image-20230603144544631.png" alt="image-20230603144544631"></p><p>ä¹Ÿå¯ä»¥å•ç‹¬è¿”å›Model</p><p>ä½†æ˜¯ä¸è®¾ç½®è§†å›¾çš„è¯ï¼Œä¼šè‡ªåŠ¨æŸ¥æ‰¾</p><p><img src="../assets/image/Spring_Image/image-20230603144831279.png" alt="image-20230603144831279"></p><p><img src="../assets/image/Spring_Image/image-20230603145121111.png" alt="image-20230603145121111"></p><h3 id="å›å†™æ•°æ®">å›å†™æ•°æ®</h3><h4 id="è¿”å›å­—ç¬¦ä¸²">è¿”å›å­—ç¬¦ä¸²</h4><p>æ–¹æ³•1</p><p><img src="../assets/image/Spring_Image/image-20230603150457780.png" alt="image-20230603150457780"></p><p>æ–¹æ³•2</p><p><img src="../assets/image/Spring_Image/image-20230603150536247.png" alt="image-20230603150536247"></p><p>è¿”å›jsonå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ObjectMapperå°†å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</p><p><img src="../assets/image/Spring_Image/image-20230603151501882.png" alt="image-20230603151501882"></p><h4 id="è¿”å›å¯¹è±¡æˆ–é›†åˆ">è¿”å›å¯¹è±¡æˆ–é›†åˆ</h4><p>å¯ä»¥é€šè¿‡é…ç½®å¤„ç†å™¨æ˜ å°„å™¨æ¥å‘Šè¯‰SpringMVCæ¡†æ¶è‡ªåŠ¨å°†æ¶ˆæ¯è½¬æ¢</p><p>è‡ªåŠ¨å°†è¿”å›çš„å¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</p><p><img src="../assets/image/Spring_Image/image-20230603152340236.png" alt="image-20230603152340236"></p><p><img src="../assets/image/Spring_Image/image-20230603152353202.png" alt="image-20230603152353202"></p><p>å¯ä»¥é…ç½®mvcæ³¨è§£é©±åŠ¨æ¥è®©mvcè‡ªå·±è°ƒç”¨æ˜ å°„å™¨ï¼Œè€Œä¸ç”¨è‡ªå·±é…ç½®</p><p><img src="../assets/image/Spring_Image/image-20230603152959755.png" alt="image-20230603152959755"></p><p><strong>åœ¨ SpringMVC çš„å„ä¸ªç»„ä»¶ä¸­ï¼Œå¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨ç§°ä¸º SpringMVC çš„ä¸‰å¤§ç»„ä»¶ã€‚</strong></p><h1>SpringMVCè·å¾—è¯·æ±‚æ•°æ®</h1><p><img src="../assets/image/Spring_Image/image-20230603155305748.png" alt="image-20230603155305748"></p><h2 id="åŸºæœ¬ç±»å‹æ•°æ®">åŸºæœ¬ç±»å‹æ•°æ®</h2><p><img src="../assets/image/Spring_Image/image-20230603160109243.png" alt="image-20230603160109243"></p><h2 id="POJOç±»å‹å‚æ•°">POJOç±»å‹å‚æ•°</h2><p>è¾“å…¥çš„å‚æ•°å’ŒUserç±»çš„å±æ€§åä¸€è‡´ï¼Œå°±å¯ä»¥è‡ªåŠ¨å°è£…</p><p><img src="../assets/image/Spring_Image/image-20230603160333507.png" alt="image-20230603160333507"></p><h2 id="æ•°ç»„ç±»å‹å‚æ•°">æ•°ç»„ç±»å‹å‚æ•°</h2><p><img src="../assets/image/Spring_Image/image-20230603160957402.png" alt="image-20230603160957402"></p><p><img src="../assets/image/Spring_Image/image-20230603161003841.png" alt="image-20230603161003841"></p><h2 id="é›†åˆç±»å‹å‚æ•°">é›†åˆç±»å‹å‚æ•°</h2><p>ç¬¬ä¸€ç§æ–¹æ³•</p><p>è¿˜æ˜¯å°è£…åœ¨ç±»ä¸­</p><p><img src="../assets/image/Spring_Image/image-20230603172517789.png" alt="image-20230603172517789"></p><p><img src="../assets/image/Spring_Image/image-20230603172529481.png" alt="image-20230603172529481"></p><p>åœ¨jspæ–‡ä»¶ä¸­ä½¿ç”¨è¡¨å•æäº¤é›†åˆå¯¹è±¡ï¼Œè¦æ±‚å’Œç±»ä¸­çš„å±æ€§åä¸€è‡´ã€‚å¯ä»¥æŒ‡å®šé›†åˆä¸­ç¬¬å‡ ä¸ªå…ƒç´ çš„æŸä¸ªå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230603172552484.png" alt="image-20230603172552484"></p><p>ç¬¬äºŒç§æ–¹æ³•</p><p>ç›´æ¥æ¥æ”¶ç”±æµè§ˆå™¨é¡µé¢å‘å‡ºçš„æ•°æ®</p><p>ä½¿ç”¨jqueryåŒ…ä¸­çš„æ–¹æ³•ï¼Œå‘é€æ•°æ®</p><p>è®¿é—®ajax.jsp</p><p><img src="../assets/image/Spring_Image/image-20230604201620098.png" alt="image-20230604201620098"></p><p><img src="../assets/image/Spring_Image/image-20230604201336222.png" alt="image-20230604201336222"></p><p>å¹¶å°†jqueryçš„è®¿é—®æƒé™å¼€æ”¾ï¼Œä¸ç„¶æµè§ˆå™¨å¯èƒ½è·³è½¬åˆ°jqueryæ—¶å°±åœæ­¢è·³è½¬</p><p>åœ¨spring-mvc.xmlä¸­é…ç½®å¯¹jqueryèµ„æºçš„è®¿é—®æƒé™</p><p><img src="../assets/image/Spring_Image/image-20230604202315828.png" alt="image-20230604202315828"></p><p>ä¹‹åè®¿é—®ajax.jspï¼Œæµè§ˆå™¨çš„è·³è½¬é¡ºåºå°±ä¼šè¿™æ ·</p><p><img src="../assets/image/Spring_Image/image-20230604202350908.png" alt="image-20230604202350908"></p><p>è¿˜æœ‰ä¸€ç§å¼€æ”¾èµ„æºçš„åŠæ³•</p><p><img src="../assets/image/Spring_Image/image-20230604203052408.png" alt="image-20230604203052408"></p><h2 id="å‚æ•°ç»‘å®šæ³¨è§£">å‚æ•°ç»‘å®šæ³¨è§£</h2><p>å½“è¯·æ±‚çš„å‚æ•°åç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡@RequestParamæ³¨è§£æ˜¾ç¤ºçš„ç»‘å®šã€‚</p><p>å¦‚æœç½‘å€åæäº¤çš„å‚æ•°ä¸æ˜¯usernameæ˜¯nameå°±è¿™æ ·æ”¹</p><p><img src="../assets/image/Spring_Image/image-20230604203429433.png" alt="image-20230604203429433"></p><p>æ”¹å®Œä¹‹åå°±åªèƒ½ç”¨nameæäº¤äº†ï¼Œå› ä¸ºæœ‰è¿™ä¸ªæ³¨è§£çš„å­˜åœ¨ï¼Œä¼šå°†nameçš„å€¼æ˜ å°„åˆ°usernameä¸Š</p><p>@RequestParamæ³¨è§£çš„å…¶ä»–å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230604203836242.png" alt="image-20230604203836242"></p><p>é»˜è®¤nameå‚æ•°ä¸å¿…é¡»åŒ…å«ï¼Œæäº¤åæ‰“å°å€¼ä¸ºnull</p><p><img src="../assets/image/Spring_Image/image-20230604203927135.png" alt="image-20230604203927135"></p><p><img src="../assets/image/Spring_Image/image-20230604203952230.png" alt="image-20230604203952230"></p><p>ä½¿ç”¨äº†é»˜è®¤å€¼ï¼Œæäº¤åæ‰“å°itcast</p><p><img src="../assets/image/Spring_Image/image-20230604204045987.png" alt="image-20230604204045987"></p><p><img src="../assets/image/Spring_Image/image-20230604204054637.png" alt="image-20230604204054637"></p><h2 id="è·å–Restfulé£æ ¼çš„å‚æ•°">è·å–Restfulé£æ ¼çš„å‚æ•°</h2><p>åœ¨ç½‘å€ä¸­å†™å…¥è¯·æ±‚æ–¹å¼</p><p><img src="../assets/image/Spring_Image/image-20230605162451916.png" alt="image-20230605162451916"></p><p>@PathVariableä¸­çš„valueå¿…é¡»å’Œ@RequestMappingç›¸åŒï¼Œä½†æ˜¯å¯ä»¥å’Œå‚æ•°ä¸­çš„Stringä¸åŒ</p><p><img src="../assets/image/Spring_Image/image-20230605162842599.png" alt="image-20230605162842599"></p><p>ä½¿ç”¨ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230605163339876.png" alt="image-20230605163339876"></p><p><img src="../assets/image/Spring_Image/image-20230605163344930.png" alt="image-20230605163344930"></p><h2 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨">è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h2><p><img src="../assets/image/Spring_Image/image-20230605163640580.png" alt="image-20230605163640580"></p><p>åƒè¿™ç§int ageæ¡†æ¶è™½ç„¶æ¥æ”¶çš„æ˜¯Stringï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨è½¬æ¢åä¼ ç»™å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230605163703848.png" alt="image-20230605163703848"></p><p>æ‰‹åŠ¨å®ç°ç±»å‹è½¬æ¢</p><p>å®ç°èƒŒæ™¯ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230605192805294.png" alt="image-20230605192805294"></p><p><img src="../assets/image/Spring_Image/image-20230605192906187.png" alt="image-20230605192906187"></p><p>æäº¤æ•°æ®æ—¶ï¼Œé»˜è®¤éœ€è¦æ¥æ”¶ç”¨/çš„æ—¶é—´æ ¼å¼ï¼Œä½†æ˜¯æäº¤æ—¶å¦‚æœç”¨äº†-åˆ†ç¦»å°±ä¼šæŠ¥é”™ï¼Œä¸‹é¢å†™ä¸€ä¸ªæ ¼å¼è½¬æ¢å™¨æ¥è¿›è¡Œæ ¼å¼è½¬æ¢</p><p>å…ˆå†™ä¸€ä¸ªç”¨äºå°†Stringè½¬æ¢ä¸ºDateçš„ç±»ï¼Œå®ç°äº†æ¥å£Converter</p><p><img src="../assets/image/Spring_Image/image-20230605194004702.png" alt="image-20230605194004702"></p><p>ç„¶ååœ¨spring-mvc.xmlä¸­é…ç½®</p><p>å£°æ˜ä¸€ä¸ªå·¥å‚ç”¨äºåˆ›å»ºè‡ªå·±å†™çš„æ ¼å¼è½¬æ¢å™¨</p><p><img src="../assets/image/Spring_Image/image-20230605194052205.png" alt="image-20230605194052205"></p><p>åŒæ—¶ä¹Ÿè¦æ›´æ”¹MVCçš„æ³¨è§£é©±åŠ¨</p><p><img src="../assets/image/Spring_Image/image-20230605194156791.png" alt="image-20230605194156791"></p><h2 id="è·å¾—è¯·æ±‚å¤´">è·å¾—è¯·æ±‚å¤´</h2><p><img src="../assets/image/Spring_Image/image-20230605195538973.png" alt="image-20230605195538973"></p><p>è‡ªå·±å†™çš„æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230605195947915.png" alt="image-20230605195947915"></p><p>è®¿é—®</p><p><img src="../assets/image/Spring_Image/image-20230605195953802.png" alt="image-20230605195953802"></p><p>ç„¶åè¾“å‡ºçš„å°±æ˜¯è¯·æ±‚å¤´ä¸­å±æ€§User-Agentå¯¹åº”çš„å€¼</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Mozilla</span>/<span class="number">5</span>.<span class="number">0</span> (Windows NT <span class="number">10</span>.<span class="number">0</span>; Win64; x64) AppleWebKit/<span class="number">537</span>.<span class="number">36</span> (KHTML, like Gecko) Chrome/<span class="number">114.0.0.0</span> Safari/<span class="number">537</span>.<span class="number">36</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜æœ‰å…¶ä»–å±æ€§çš„ä¿¡æ¯éƒ½å¯ä»¥è·å–ï¼ˆCookieé™¤å¤–ï¼‰</p><p><img src="../assets/image/Spring_Image/image-20230605200132776.png" alt="image-20230605200132776"></p><p><img src="../assets/image/Spring_Image/image-20230605200139984.png" alt="image-20230605200139984"></p><p>ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè¿™ä¸ªä¿¡æ¯ä¸å¿…é¡»æäº¤ï¼Œè¿™æ ·å°±ç®—è¯·æ±‚å¤´ä¸­æ²¡æœ‰User-Agentå±æ€§ï¼Œä¹Ÿå¯ä»¥ç»§ç»­è®¿é—®</p><p><img src="../assets/image/Spring_Image/image-20230605200308335.png" alt="image-20230605200308335"></p><p>Cookieå€¼ç‰¹æ®Šï¼Œéœ€è¦ç”¨ç‰¹æ®Šçš„æ³¨è§£è·å–@CookieValue</p><p><img src="../assets/image/Spring_Image/image-20230605200445310.png" alt="image-20230605200445310"></p><p><img src="../assets/image/Spring_Image/image-20230605200739049.png" alt="image-20230605200739049"></p><h2 id="æ–‡ä»¶ä¸Šä¼ ">æ–‡ä»¶ä¸Šä¼ </h2><h3 id="æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯ä¸‰è¦ç´ ">æ–‡ä»¶ä¸Šä¼ å®¢æˆ·ç«¯ä¸‰è¦ç´ </h3><p><img src="../assets/image/Spring_Image/image-20230606083616517.png" alt="image-20230606083616517"></p><p>æ–‡ä»¶ä¸Šä¼ åŸç†</p><p><img src="../assets/image/Spring_Image/image-20230606084525462.png" alt="image-20230606084525462"></p><h3 id="å•æ–‡ä»¶ä¸Šä¼ æ­¥éª¤">å•æ–‡ä»¶ä¸Šä¼ æ­¥éª¤</h3><p><img src="../assets/image/Spring_Image/image-20230606084701980.png" alt="image-20230606084701980"></p><p>ç¬¬ä¸€æ­¥</p><p><img src="../assets/image/Spring_Image/image-20230606084721236.png" alt="image-20230606084721236"></p><p>ç¬¬äºŒæ­¥</p><p><img src="../assets/image/Spring_Image/image-20230606084849265.png" alt="image-20230606084849265"></p><p>ç¬¬ä¸‰æ­¥</p><p><img src="../assets/image/Spring_Image/image-20230607100141415.png" alt="image-20230607100141415"></p><p>å¦‚æœä¸æŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤ä¸º</p><p><img src="../assets/image/Spring_Image/image-20230607101118195.png" alt="image-20230607101118195"></p><h1>SpringMVCæ‹¦æˆªå™¨</h1><h2 id="ä½œç”¨">ä½œç”¨</h2><p><img src="../assets/image/Spring_Image/image-20230607110544253.png" alt="image-20230607110544253"></p><p>ä¸»ä¹‰ï¼šåªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œå¦‚æœè®¿é—®çš„æ˜¯ jspï¼Œhtml,css,image æˆ–è€… js æ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</p><h2 id="æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«">æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«</h2><p><img src="../assets/image/Spring_Image/image-20230607111126956.png" alt="image-20230607111126956"></p><h2 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨åˆ›å»º">è‡ªå®šä¹‰æ‹¦æˆªå™¨åˆ›å»º</h2><p><img src="../assets/image/Spring_Image/image-20230607111300321.png" alt="image-20230607111300321"></p><p>1ã€å†™æ‹¦æˆªå™¨çš„ç±»ï¼Œå®ç°HandlerInterceptoræ¥å£</p><p>æ¥å£ä¸­æœ‰3ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”éƒ½æœ‰æ–¹æ³•ä½“ï¼Œæ‰€ä»¥å®ç°HandlerInterceptoræ¥å£åæ²¡æœ‰å¿…é¡»è¦é‡å†™çš„æ–¹æ³•ï¼Œåªæ˜¯éœ€è¦å“ªä¸ªå°±é‡å†™å“ªä¸ªå°±è¡Œäº†</p><p>HandlerInterceptoræ¥å£å†…å®¹ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230607122443128.png" alt="image-20230607122443128"></p><p>å†™æ‹¦æˆªå™¨ç”¨çš„ç±»ï¼›</p><p><img src="../assets/image/Spring_Image/image-20230607122512532.png" alt="image-20230607122512532"></p><p>å…¶ä¸­çš„æ–¹æ³•ï¼š</p><p>preHandle()</p><p>â€‹è¿™ä¸ªæ–¹æ³•åœ¨è¦æ‹¦æˆªçš„å†…å®¹æ–¹æ³•å‰æ‰§è¡Œ</p><p>â€‹å…¶ä¸­å¯ä»¥åšä¸€äº›å¤„ç†ï¼Œæ–¹æ³•è¿”å›å€¼ä¸ºtrueæ—¶æ‰ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ª  preHandle()æˆ–è€…ç›®æ ‡èµ„æºï¼Œå¦‚æœè¿”å›falseåˆ™ä¸ä¼šè°ƒç”¨ã€‚æ‰€ä»¥å¯ä»¥åœ¨è¿”å›falseå‰åšä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚è¿”å›ä¸€ä¸ªä¸“é—¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„jsp</p><p>postHandle()</p><p>â€‹è¿™ä¸ªæ–¹æ³•åœ¨æ‹¦æˆªçš„æ–¹æ³•åæ‰§è¡Œï¼Œä½†åœ¨è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰</p><p>afterCompletion()</p><p>â€‹æœ€åæ‰§è¡Œ</p><p>ç„¶ååœ¨spring-mvc.xmlä¸­é…ç½®</p><p>è¿™é‡Œé…ç½®äº†ä¸¤ä¸ªæ‹¦æˆªå™¨ï¼Œä¹Ÿå°±å½¢æˆäº†æ‹¦æˆªå™¨é“¾</p><p><img src="../assets/image/Spring_Image/image-20230607122823858.png" alt="image-20230607122823858"></p><p>æ‰§è¡Œé¡ºåºï¼šMyInterceptor2çš„preHandle()  â€”&gt;  MyInterceptor1çš„preHandle()  â€”&gt;  ç›®æ ‡èµ„æºæ‰§è¡Œ  â€”&gt;  MyInterceptor1çš„postHandle()  â€”&gt;  MyInterceptor2çš„postHandle()  â€”&gt;  è§†å›¾å¯¹è±¡è¿”å›  â€”&gt;  MyInterceptor1çš„afterCompletion()  â€”&gt;  MyInterceptor2çš„afterCompletion()</p><p><img src="../assets/image/Spring_Image/image-20230607122923203.png" alt="image-20230607122923203"></p><p>æ³¨æ„ï¼šæ‰§è¡Œé¡ºåºä¸­åœ¨æ‹¦æˆªå™¨é“¾å‰é¢çš„ç±»çš„æ–¹æ³•åœ¨ç›®æ ‡èµ„æºæ‰§è¡Œå‰å…ˆæ‰§è¡Œï¼Œä¹‹ååœ¨æ‹¦æˆªå™¨é“¾å‰é¢çš„ç±»çš„æ–¹æ³•éƒ½åæ‰§è¡Œ</p><p>æ‹¦æˆªå™¨çš„æ–¹æ³•è¯¦ç»†è¯´æ˜ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230607123702698.png" alt="image-20230607123702698"></p><h2 id="æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶">æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•æƒé™æ§åˆ¶</h2><p><img src="../assets/image/Spring_Image/image-20230607192734604.png" alt="image-20230607192734604"></p><p>æ‹¦æˆªå™¨ä¹Ÿå¯ä»¥é…ç½®ä¸æ‹¦æˆªå“ªäº›èµ„æº</p><p><img src="../assets/image/Spring_Image/image-20230607193905008.png" alt="image-20230607193905008"></p><h1>SpringMVCå¼‚å¸¸å¤„ç†</h1><h2 id="å¼‚å¸¸å¤„ç†çš„æ€è·¯">å¼‚å¸¸å¤„ç†çš„æ€è·¯</h2><p><img src="../assets/image/Spring_Image/image-20230607195612215.png" alt="image-20230607195612215"></p><p>é…ç½®å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨spring-mvc.xmlä¸­</p><p>é…ç½®é»˜è®¤é”™è¯¯è§†å›¾å’ŒæŒ‡å®šé”™è¯¯å¯¹åº”çš„è§†å›¾</p><p><img src="../assets/image/Spring_Image/image-20230607202438481.png" alt="image-20230607202438481"></p><p>å†™ä¸€ä¸ªä¸“é—¨æŠ›å‡ºå¼‚å¸¸çš„ç±»</p><p><img src="../assets/image/Spring_Image/image-20230607203325123.png" alt="image-20230607203325123"></p><p>åœ¨webå±‚è°ƒç”¨</p><p><img src="../assets/image/Spring_Image/image-20230607203359140.png" alt="image-20230607203359140"></p><h2 id="è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†">è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</h2><p>show5()æŠ›å‡ºçš„å°±æ˜¯è‡ªå®šä¹‰å¼‚å¸¸</p><p>å†™ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç»§æ‰¿Exception</p><p><img src="../assets/image/Spring_Image/image-20230607203530172.png" alt="image-20230607203530172"></p><p>å†™ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨ç±»ï¼Œå®ç°HandlerExceptionResolver</p><p><img src="../assets/image/Spring_Image/image-20230607203629158.png" alt="image-20230607203629158"></p><p>åœ¨spring-mvc.xmlä¸­å£°æ˜è¿™ä¸ªç±»</p><p><img src="../assets/image/Spring_Image/image-20230607203813066.png" alt="image-20230607203813066"></p><p>å’ŒSpringMVCè‡ªå¸¦çš„å¼‚å¸¸å¤„ç†å™¨ä¸åŒï¼Œè‡ªå·±å†™çš„å¼‚å¸¸å¤„ç†å™¨åœ¨spring-mvc.xmlä¸­å£°æ˜è¦æ–­çš„å¤šï¼Œåªéœ€è¦ä¸€ä¸ªbeanï¼Œæ¡†æ¶å°±å¯ä»¥è°ƒç”¨ç±»ä¸­çš„resolveException()æ¥å¤„ç†å¼‚å¸¸ã€‚</p><p>å¦‚æœé…ç½®äº†å¤šä¸ªå¼‚å¸¸å¤„ç†å™¨ï¼Œå…¶ä¸­éƒ½æœ‰åŒä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£æ¡†æ¶ä»¥åœ¨ä¸Šé¢å£°æ˜çš„å¼‚å¸¸å¤„ç†å™¨ä¸ºä¸»</p><p><img src="../assets/image/Spring_Image/image-20230607204705168.png" alt="image-20230607204705168"></p><h2 id="æ€»ç»“ï¼šå¼‚å¸¸å¤„ç†æ­¥éª¤">æ€»ç»“ï¼šå¼‚å¸¸å¤„ç†æ­¥éª¤</h2><ol><li>åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨ç±»å®ç°HandlerExceptionResolveræ¥å£</li><li>é…ç½®å¼‚å¸¸å¤„ç†å™¨</li><li>ç¼–å†™å¼‚å¸¸é¡µé¢</li><li>æµ‹è¯•å¼‚å¸¸è·³è½¬</li></ol><h1>Spring+SpringMVCç»ƒä¹ </h1><p>webå±‚</p><p>â€‹å°½é‡ä¸€ä¸ªæ–¹æ³•è§£å†³é—®é¢˜ï¼Œå°†ä¼ å…¥çš„å‚æ•°ä¼ ä¸ªè¿™ä¸ªæ–¹æ³•</p><p>serviceå±‚</p><p>â€‹å°½é‡å°†å¤§é—®é¢˜æ‹†æˆå‡ ä¸ªå°æ­¥éª¤ï¼Œè°ƒç”¨è‹¥å¹²ä¸ªæ–¹æ³•è¿›è¡Œå®ç°</p><p>daoå±‚</p><p>â€‹å®ç°è‹¥å¹²ä¸ªå°æ–¹æ³•ï¼Œç•™ä¸ªserviceå±‚è°ƒç”¨</p><h2 id="ç¯å¢ƒæ­å»ºæ­¥éª¤">ç¯å¢ƒæ­å»ºæ­¥éª¤</h2><p><img src="../assets/image/Spring_Image/image-20230608202124896.png" alt="image-20230608202124896"></p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h3><h4 id="web-xml-2">web.xml</h4><ol><li>å…¨å±€åˆå§‹åŒ–å‚æ•°</li><li>é…ç½®Springç›‘å¬å™¨</li><li>SpringMVCå‰ç«¯æ§åˆ¶å™¨</li></ol><p><img src="../assets/image/Spring_Image/image-20230609112404748.png" alt="image-20230609112404748"></p><h4 id="spring-mvc-xml-2">spring-mvc.xml</h4><ol><li>MVCæ³¨è§£é©±åŠ¨</li><li>è§†å›¾è§£æå™¨</li><li>é™æ€èµ„æºæƒé™å…¨å¼€æ”¾</li></ol><p><img src="../assets/image/Spring_Image/image-20230609160409257.png" alt="image-20230609160409257"></p><h4 id="applicationContext-xml-2">applicationContext.xml</h4><ol><li>åŠ è½½jdbc.propertiesé…ç½®æ–‡ä»¶</li><li>é…ç½®æ•°æ®æº</li><li>é…ç½®jdbcæ¨¡æ¿</li></ol><p><img src="../assets/image/Spring_Image/image-20230609112644396.png" alt="image-20230609112644396"></p><h4 id="ç»™æ¯ä¸ªè¡¨ç¼–å†™ä¸€ä¸ªç±»">ç»™æ¯ä¸ªè¡¨ç¼–å†™ä¸€ä¸ªç±»</h4><p><img src="../assets/image/Spring_Image/image-20230609163953792.png" alt="image-20230609163953792"></p><p><img src="../assets/image/Spring_Image/image-20230609164003304.png" alt="image-20230609164003304"></p><h3 id="æ•°æ®åº“è®¾è®¡">æ•°æ®åº“è®¾è®¡</h3><p>ç”¨æˆ·å’Œè§’è‰²ä¹‹é—´æ˜¯å¤šå¯¹å¤šå…³ç³»</p><p>â€‹ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·æ‹¥æœ‰ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´çš„å…³ç³»ç”¨å¦ä¸€ä¸ªè¡¨è®°å½•</p><p><img src="../assets/image/Spring_Image/image-20230609113549707.png" alt="image-20230609113549707"></p><p>CEO:é¦–å¸­æ‰§è¡Œå®˜</p><p>COO:é¦–å¸­è¿è¥å®˜</p><p>CFO:é¦–å¸­è´¢åŠ¡å®˜</p><p>CTO:é¦–å¸­æŠ€æœ¯å®˜</p><p>roleè¡¨</p><p><img src="../assets/image/Spring_Image/image-20230609113623333.png" alt="image-20230609113623333"></p><p>userè¡¨</p><p><img src="../assets/image/Spring_Image/image-20230609113639037.png" alt="image-20230609113639037"></p><p>user_roleè¡¨ï¼š</p><p><img src="../assets/image/Spring_Image/image-20230609113655789.png" alt="image-20230609113655789"></p><h3 id="è§’è‰²åˆ—è¡¨å±•ç¤º">è§’è‰²åˆ—è¡¨å±•ç¤º</h3><h4 id="å±•ç¤ºæ•ˆæœ">å±•ç¤ºæ•ˆæœ</h4><p><img src="../assets/image/Spring_Image/image-20230609150749690.png" alt="image-20230609150749690"></p><h4 id="æ­¥éª¤">æ­¥éª¤</h4><p><img src="../assets/image/Spring_Image/image-20230609150758116.png" alt="image-20230609150758116"></p><h5 id="æ‰“å¼€ç»„ä»¶æ‰«æ">æ‰“å¼€ç»„ä»¶æ‰«æ</h5><p>spring-mvc.xml</p><p><img src="../assets/image/Spring_Image/image-20230609163626091.png" alt="image-20230609163626091"></p><h5 id="é…ç½®web-xml">é…ç½®web.xml</h5><p><img src="../assets/image/Spring_Image/image-20230609185121145.png" alt="image-20230609185121145"></p><h5 id="é…ç½®Daoå±‚å’ŒServiceçš„Bean">é…ç½®Daoå±‚å’ŒServiceçš„Bean</h5><p>applicationCOntext.xml</p><p><img src="../assets/image/Spring_Image/image-20230609163751635.png" alt="image-20230609163751635"></p><h5 id="ç¼–å†™Daoå±‚">ç¼–å†™Daoå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163815759.png" alt="image-20230609163815759"></p><h5 id="ç¼–å†™Serviceå±‚">ç¼–å†™Serviceå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163832462.png" alt="image-20230609163832462"></p><h5 id="ç¼–å†™Controllerå±‚">ç¼–å†™Controllerå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609163905690.png" alt="image-20230609163905690"></p><h5 id="ä¿®æ”¹è¶…é“¾æ¥">ä¿®æ”¹è¶…é“¾æ¥</h5><p>åœ¨jspä¸­å°†å¯¹åº”çš„è¶…é“¾æ¥æ”¹ä¸ºControllerå±‚ä¸­çš„å¯¹åº”æ–¹æ³•</p><p><img src="../assets/image/Spring_Image/image-20230609164144033.png" alt="image-20230609164144033"></p><h3 id="è§’è‰²æ·»åŠ ">è§’è‰²æ·»åŠ </h3><h4 id="æ­¥éª¤-2">æ­¥éª¤</h4><p><img src="../assets/image/Spring_Image/image-20230609183629603.png" alt="image-20230609183629603"></p><h5 id="ç¼–å†™Controllerå±‚-2">ç¼–å†™Controllerå±‚</h5><p>æäº¤å®Œåé‡å®šå‘åˆ°/role/listä¸‹</p><p><img src="../assets/image/Spring_Image/image-20230609185958417.png" alt="image-20230609185958417"></p><h5 id="ç¼–å†™Serviceå±‚-2">ç¼–å†™Serviceå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609190025182.png" alt="image-20230609190025182"></p><h5 id="ç¼–å†™Daoå±‚-2">ç¼–å†™Daoå±‚</h5><p><img src="../assets/image/Spring_Image/image-20230609190049284.png" alt="image-20230609190049284"></p><h5 id="ä¿®æ”¹è¡¨å•æäº¤é“¾æ¥">ä¿®æ”¹è¡¨å•æäº¤é“¾æ¥</h5><p><img src="../assets/image/Spring_Image/image-20230609190143789.png" alt="image-20230609190143789"></p><p>å› ä¸ºæ˜¯ç”¨postæ–¹å¼æäº¤ï¼Œå¯èƒ½æœ‰ä¹±ç é—®é¢˜</p><h5 id="é…ç½®ç¼–ç è¿‡æ»¤å™¨">é…ç½®ç¼–ç è¿‡æ»¤å™¨</h5><p>web.xmlä¸­</p><p><img src="../assets/image/Spring_Image/image-20230609190308082.png" alt="image-20230609190308082"></p><h3 id="ç”¨æˆ·åˆ—è¡¨å±•ç¤º">ç”¨æˆ·åˆ—è¡¨å±•ç¤º</h3><h4 id="å±•ç¤ºæ•ˆæœ-2">å±•ç¤ºæ•ˆæœ</h4><p><img src="../assets/image/Spring_Image/image-20230609191548547.png" alt="image-20230609191548547"></p><h4 id="ç»™Userç±»æ·»åŠ å±æ€§">ç»™Userç±»æ·»åŠ å±æ€§</h4><p><img src="../assets/image/Spring_Image/image-20230609191711651.png" alt="image-20230609191711651"></p><h4 id="æ”¹é¡µé¢ä¸­çš„è¶…é“¾æ¥">æ”¹é¡µé¢ä¸­çš„è¶…é“¾æ¥</h4><p><img src="../assets/image/Spring_Image/image-20230609191917227.png" alt="image-20230609191917227"></p><h4 id="ç¼–å†™Controllerå±‚-3">ç¼–å†™Controllerå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193514470.png" alt="image-20230609193514470"></p><h4 id="ç¼–å†™Serviceå±‚-3">ç¼–å†™Serviceå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193545907.png" alt="image-20230609193545907"></p><h4 id="ç¼–å†™Daoå±‚-3">ç¼–å†™Daoå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230609193603053.png" alt="image-20230609193603053"></p><h4 id="é…ç½®Serviceå±‚ã€Daoå±‚çš„bean">é…ç½®Serviceå±‚ã€Daoå±‚çš„bean</h4><p><img src="../assets/image/Spring_Image/image-20230609193648087.png" alt="image-20230609193648087"></p><h4 id="jspä¸­å¼•å…¥æ ¸å¿ƒæ ‡ç­¾åº“">jspä¸­å¼•å…¥æ ¸å¿ƒæ ‡ç­¾åº“</h4><p><img src="../assets/image/Spring_Image/image-20230609194314134.png" alt="image-20230609194314134"></p><p><img src="../assets/image/Spring_Image/image-20230609194325662.png" alt="image-20230609194325662"></p><h4 id="å±•ç¤ºè§’è‰²åç§°">å±•ç¤ºè§’è‰²åç§°</h4><p>å› ä¸ºUserè¡¨å’ŒRoleè¡¨çš„å…³ç³»å­˜åœ¨å¤–è¡¨ä¸­ï¼Œæƒ³æŸ¥åˆ°Userå¯¹åº”çš„Roleå°±è¦æŠŠClass Userä¸­çš„private List<Role> roles;  ä¸­çš„å±æ€§å°è£…å¥½</p><h5 id="Controllerå±‚">Controllerå±‚</h5><p>ä¸å˜ï¼Œä»–åªè°ƒç”¨äº†Serviceå±‚ä¸­çš„list()</p><p><img src="../assets/image/Spring_Image/image-20230610093414020.png" alt="image-20230610093414020"></p><h5 id="Serviceå±‚">Serviceå±‚</h5><p>åº”ä¸ºUserServiceImplè¦è°ƒç”¨RoleDaoçš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨xmlä¸­æ³¨å…¥</p><p><img src="../assets/image/Spring_Image/image-20230610094728489.png" alt="image-20230610094728489"></p><p>éå†userListï¼Œä¸»è¦ä½¿ç”¨æ¯ä¸€ä¸ªå…¶ä¸­æ¯ä¸€ä¸ªUser çš„Idï¼Œåˆ©ç”¨Idè°ƒç”¨Daoå±‚çš„æ–¹æ³•æŸ¥è¯¢Role</p><p>ä¸€äº›ç»å¸¸ç”¨çš„æ“ä½œï¼ŒåƒfindRoleByUserIdå°±äº¤ç»™Daoå±‚å®ç°</p><p><img src="../assets/image/Spring_Image/image-20230610093442919.png" alt="image-20230610093442919"></p><h5 id="Daoå±‚">Daoå±‚</h5><p>å› ä¸ºä¸»è¦ç›®çš„æ˜¯findRoleï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ”¾åœ¨RoleDaoImplä¸­</p><p><img src="../assets/image/Spring_Image/image-20230610094003364.png" alt="image-20230610094003364"></p><h4 id="user-list-jsp">user-list.jsp</h4><p>å‰é¢å°†Userä¸­çš„private List<Role> roles;å±æ€§å®Œæˆäº†å°è£…</p><p>åœ¨jspæ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨äº†</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c<span class="keyword">:forEach</span> <span class="attribute">items</span>=<span class="string">&quot;<span class="variable">$&#123;userList&#125;</span>&quot;</span> <span class="attribute">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>æ„æ€æ˜¯éå†userListä¸­çš„å±æ€§ï¼Œæ¯æ¬¡å–å‡ºçš„å€¼åä¸ºuserï¼Œå³useræ˜¯userListä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡user.æ¥è®¿é—®è¿™ä¸ªå…ƒç´ çš„å¯¹è±¡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c<span class="keyword">:forEach</span> <span class="attribute">items</span>=<span class="string">&quot;<span class="variable">$&#123;user.roles&#125;</span>&quot;</span> <span class="attribute">var</span>=<span class="string">&quot;role&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>éå†userä¸­çš„roleså±æ€§ï¼Œå°±æ˜¯List<Role> rolesï¼Œä½¿ç”¨å…¶ä¸­å…ƒç´ ï¼ˆRoleå®ä¾‹ï¼‰çš„roleNameå±æ€§</p><p><img src="../assets/image/Spring_Image/image-20230610094123889.png" alt="image-20230610094123889"></p><h3 id="ç”¨æˆ·æ·»åŠ ">ç”¨æˆ·æ·»åŠ </h3><h4 id="Controllerå±‚-2">Controllerå±‚</h4><p>å› ä¸ºåœ¨æ–°å»ºé¡µé¢ä¸­ï¼Œç”¨æˆ·è§’è‰²æ˜¯è¦é€‰æ‹©çš„ï¼Œæ‰€ä»¥åœ¨ä»user-list.jspè·³åˆ°user-add.jspçš„æ–°å»ºæŒ‰é’®ä¸Šè¦å°†é“¾æ¥è¿æ¥åˆ°æ–¹æ³•ä¸Š</p><p><img src="../assets/image/Spring_Image/image-20230610113940607.png" alt="image-20230610113940607"></p><p>åœ¨webå±‚å°½é‡ä½¿ç”¨serviceå±‚çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨daoå±‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ³¨å…¥æ–°çš„å±æ€§ï¼Œprivate RoleService roleService;ä½¿ç”¨å…¶ä¸­çš„æ–¹æ³•ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­å­˜åœ¨çš„æ‰€æœ‰roleçš„rolename,æ·»åŠ åˆ°ModelAndViewçš„Modelä¸­</p><p><img src="../assets/image/Spring_Image/image-20230610113951453.png" alt="image-20230610113951453"></p><h4 id="user-add-jsp">user-add.jsp</h4><p>ä¸­å°±å¯ä»¥ä½¿ç”¨æ”¾åœ¨ModelAndViewä¸­æŸ¥è¯¢å‡ºæ¥çš„roleListäº†</p><p><img src="../assets/image/Spring_Image/image-20230610114301033.png" alt="image-20230610114301033"></p><p>è¿™æ ·åœ¨æ¯æ¬¡æ‰“å¼€æ–°å»ºç”¨æˆ·ç•Œé¢æ—¶ï¼Œç”¨æˆ·è§’è‰²çš„é€‰é¡¹æ¡å°±æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥å‡ºçš„æœ€æ–°çš„</p><h4 id="Serviceå±‚-2">Serviceå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230610135331934.png" alt="image-20230610135331934"></p><h4 id="Daoå±‚-2">Daoå±‚</h4><p>ä½¿ç”¨save(User user)ä¿å­˜Userå®ä¾‹ï¼Œå¹¶å°†ä¿å­˜åœ¨æ•°æ®åº“åç”Ÿæˆçš„IDè¿”å›</p><p><img src="../assets/image/Spring_Image/image-20230610135353401.png" alt="image-20230610135353401"></p><p>jdbcTemplate.update()çš„ä¸åŒä½¿ç”¨æ–¹æ³•</p><p>å¸¸è§çš„ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbcTemplate.update(&quot;<span class="keyword">insert</span> <span class="keyword">into</span> sys_user_role <span class="keyword">values</span>(?,?)<span class="string">&quot;,userId,roleId);</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™é‡Œè¦æ±‚å—²ç”¨æ–¹æ³•åè¿˜è¦è¿”å›IDï¼Œæ‰€ä»¥è¿™ä¹ˆå†™</p><p>åˆ›å»ºPreparedStatementCreatorå¯¹è±¡ï¼Œå°†è¦æ‰§è¡Œçš„è¯­å¥çš„æ ¼å¼å’Œæ•°æ®éƒ½å°è£…åœ¨å¯¹è±¡é‡Œã€‚</p><p>åˆ›å»ºGeneratedKeyHolderå¯¹è±¡ï¼Œåœ¨æ‰§è¡ŒjdbcTemplate.update()æ—¶ï¼Œä¼šä¿å­˜PreparedStatementCreatorå®ä¾‹ç”Ÿæˆçš„ID</p><p>GeneratedKeyHolderçš„ä½œç”¨å°±æ˜¯å°†è¿˜æ²¡ä¼ è¿‡å»çš„ä¸»é”®ä¿å­˜ä¸‹æ¥</p><p><img src="../assets/image/Spring_Image/image-20230610135648256.png" alt="image-20230610135648256"></p><h3 id="ç”¨æˆ·åˆ é™¤">ç”¨æˆ·åˆ é™¤</h3><p>åˆ é™¤å’Œä¹‹å‰çš„ä¸ä¸€æ ·ï¼Œéœ€è¦ä»ç½‘é¡µè·å–IDåè¿”å›åå°</p><p>ç‚¹å‡»åˆ é™¤åè°ƒç”¨delUser()</p><p>ä½¿ç”¨confirm()å‡½æ•°æ¥åœ¨ç½‘é¡µä¸­è·³å‡ºå¼¹çª—è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤åˆ é™¤</p><p><img src="../assets/image/Spring_Image/image-20230610141223329.png" alt="image-20230610141223329"></p><p>delUser()è´Ÿè´£æé†’ç”¨æˆ·æ˜¯å¦ç»§ç»­ï¼Œå¦‚æœæ˜¯ï¼Œå°±å°†userIdè¿”ç»™åå°</p><p><img src="../assets/image/Spring_Image/image-20230610141249752.png" alt="image-20230610141249752"></p><h4 id="Webå±‚ä¸­">Webå±‚ä¸­</h4><p>ä½¿ç”¨ç½‘å€æ¥æ¥å—userIdï¼Œä½¿ç”¨æ³¨è§£@PathVariable(â€œuserIdâ€)å°†ç½‘å€ä¸­çš„userIdè£…é€’ç»™å‚æ•°</p><p><img src="../assets/image/Spring_Image/image-20230610142229279.png" alt="image-20230610142229279"></p><h4 id="Serviceå±‚-3">Serviceå±‚</h4><p>è¿™é‡Œæ²¡æœ‰çº§è”åˆ é™¤ï¼Œæ‰€ä»¥è¦å…ˆåˆ é™¤å…³ç³»è¡¨ä¸­çš„æ•°æ®</p><p><img src="../assets/image/Spring_Image/image-20230610142316603.png" alt="image-20230610142316603"></p><h4 id="Daoå±‚-3">Daoå±‚</h4><p><img src="../assets/image/Spring_Image/image-20230610142352244.png" alt="image-20230610142352244"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»Springå’ŒSpringMVCçš„å¼€å‘æ­¥éª¤</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="Spring" scheme="https://momoao.github.io/tags/Spring/"/>
    
    <category term="SpringMVC" scheme="https://momoao.github.io/tags/SpringMVC/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis</title>
    <link href="https://momoao.github.io/posts/202308281527.html"/>
    <id>https://momoao.github.io/posts/202308281527.html</id>
    <published>2023-08-28T07:27:00.000Z</published>
    <updated>2023-08-28T07:29:07.081Z</updated>
    
    <content type="html"><![CDATA[<h1>Mybatis</h1><h1>ç®€ä»‹</h1><h2 id="å›é¡¾åŸå§‹jdbcæ“ä½œ">å›é¡¾åŸå§‹jdbcæ“ä½œ</h2><p>æŸ¥è¯¢</p><p><img src="../assets/image/Mybatis_Image/image-20230610142612838.png" alt="image-20230610142612838"></p><p>æ’å…¥</p><p><img src="../assets/image/Mybatis_Image/image-20230610142816805.png" alt="image-20230610142816805"></p><p>åŸå§‹jdbcå­˜åœ¨çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</p><p><img src="../assets/image/Mybatis_Image/image-20230610143103345.png" alt="image-20230610143103345"></p><h2 id="ä»€ä¹ˆæ˜¯Mybatis">ä»€ä¹ˆæ˜¯Mybatis</h2><p><img src="../assets/image/Mybatis_Image/image-20230610143700208.png" alt="image-20230610143700208"></p><h1>å¼€å‘æ­¥éª¤</h1><p><img src="../assets/image/Mybatis_Image/image-20230611081715389.png" alt="image-20230611081715389"></p><h2 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h2><h3 id="æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085537432.png" alt="image-20230611085537432"></p><h3 id="æ ¸å¿ƒé…ç½®æ–‡ä»¶">æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><p>sqlMapConfig.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611085605028.png" alt="image-20230611085605028"></p><h3 id="sqlè¯­å¥æ–‡ä»¶">sqlè¯­å¥æ–‡ä»¶</h3><p>UserMapper.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611085613972.png" alt="image-20230611085613972"></p><h3 id="æµ‹è¯•æ–‡ä»¶">æµ‹è¯•æ–‡ä»¶</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085648930.png" alt="image-20230611085648930"></p><h3 id="å¿…é¡»è¦æ·»åŠ çš„åæ ‡">å¿…é¡»è¦æ·»åŠ çš„åæ ‡</h3><p><img src="../assets/image/Mybatis_Image/image-20230611085757976.png" alt="image-20230611085757976"></p><h2 id="æ˜ å°„æ–‡ä»¶æ¦‚è¿°">æ˜ å°„æ–‡ä»¶æ¦‚è¿°</h2><p><img src="../assets/image/Mybatis_Image/image-20230611090222574.png" alt="image-20230611090222574"></p><h1>å¢åˆ æ”¹æŸ¥æ“ä½œ</h1><h2 id="å¢">å¢</h2><p>UserMapper.xml</p><p><img src="../assets/image/Mybatis_Image/image-20230611093202381.png" alt="image-20230611093202381"></p><p>æµ‹è¯•ä»£ç </p><p>æ‰§è¡Œç»“æœè¿”å›è¿˜æ˜¯1ï¼Œä½†æ˜¯æ•°æ®åº“å¹¶æ²¡æœ‰æ”¶å½±å“</p><p><img src="../assets/image/Mybatis_Image/image-20230611093244040.png" alt="image-20230611093244040"></p><p>mybatisçš„äº‹åŠ¡é»˜è®¤æ˜¯ä¸æäº¤çš„ï¼ŒåŸå§‹çš„jdbcé»˜è®¤æ˜¯æäº¤çš„ï¼Œæ‰€ä»¥è¦æäº¤åæ•°æ®æ‰ä¼šè¿›åˆ°æ•°æ®åº“</p><p><img src="../assets/image/Mybatis_Image/image-20230611095203056.png" alt="image-20230611095203056"></p><p>æäº¤åå‘ç°idæ˜¯3è€Œä¸æ˜¯1ï¼Œå› ä¸ºsqlå·²ç»åˆ°äº†æ•°æ®åº“ï¼Œä½†æ˜¯ä¸šåŠ¡æ²¡æäº¤ï¼Œåªæœ‰idè‡ªå¢äº†ï¼Œä½†æ˜¯è¡¨å†…çš„æ•°æ®æ²¡å˜</p><p><img src="../assets/image/Mybatis_Image/image-20230611095217220.png" alt="image-20230611095217220"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611101214983.png" alt="image-20230611101214983"></p><h2 id="æ”¹">æ”¹</h2><p><img src="../assets/image/Mybatis_Image/image-20230611102918409.png" alt="image-20230611102918409"></p><p><img src="../assets/image/Mybatis_Image/image-20230611102928968.png" alt="image-20230611102928968"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611103409878.png" alt="image-20230611103409878"></p><h2 id="åˆ ">åˆ </h2><p>å› ä¸ºè¿™é‡Œåªæœ‰ä¸€ä¸ªå‚æ•°java.lang.Integerï¼Œæ‰€ä»¥#{}ä¸­å†™ä»€ä¹ˆåå­—éƒ½è¡Œï¼Œå†™idæ˜¯ä¸ºäº†æé«˜å¯è¯»æ€§</p><p><img src="../assets/image/Mybatis_Image/image-20230611103216866.png" alt="image-20230611103216866"></p><p><img src="../assets/image/Mybatis_Image/image-20230611103321664.png" alt="image-20230611103321664"></p><p>æ³¨æ„äº‹é¡¹</p><p><img src="../assets/image/Mybatis_Image/image-20230611103421397.png" alt="image-20230611103421397"></p><h2 id="çŸ¥è¯†å°ç»“">çŸ¥è¯†å°ç»“</h2><p><img src="../assets/image/Mybatis_Image/image-20230611105031427.png" alt="image-20230611105031427"></p><h1>æ ¸å¿ƒé…ç½®æ–‡ä»¶æ¦‚è¿°</h1><h2 id="å±‚çº§å…³ç³»">å±‚çº§å…³ç³»</h2><p><img src="../assets/image/Mybatis_Image/image-20230611154600251.png" alt="image-20230611154600251"></p><h2 id="environmentsæ ‡ç­¾">environmentsæ ‡ç­¾</h2><p><img src="../assets/image/Mybatis_Image/image-20230611155133546.png" alt="image-20230611155133546"></p><p><img src="../assets/image/Mybatis_Image/image-20230611155345158.png" alt="image-20230611155345158"></p><h2 id="mappersæ ‡ç­¾">mappersæ ‡ç­¾</h2><p><img src="../assets/image/Mybatis_Image/image-20230611160012398.png" alt="image-20230611160012398"></p><p><img src="../assets/image/Mybatis_Image/image-20230611160046561.png" alt="image-20230611160046561"></p><h2 id="Propertiesæ ‡ç­¾">Propertiesæ ‡ç­¾</h2><p>åœ¨æ–‡ä»¶ä¸­å¼•å…¥é…ç½®æ–‡ä»¶</p><p><img src="../assets/image/Mybatis_Image/image-20230611160827286.png" alt="image-20230611160827286"></p><p><img src="../assets/image/Mybatis_Image/image-20230611160835561.png" alt="image-20230611160835561"></p><h2 id="typeAliasesæ ‡ç­¾">typeAliasesæ ‡ç­¾</h2><p>ä½œç”¨æ˜¯å£°æ˜å…¨å±€åˆ«åï¼Œä¾‹å¦‚å°†com.itheima.domain.Userå£°æ˜ä¸ºuser</p><p>åœ¨ä»¥åä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä½¿ç”¨useräº†</p><p><img src="../assets/image/Mybatis_Image/image-20230611161044825.png" alt="image-20230611161044825"></p><p><img src="../assets/image/Mybatis_Image/image-20230611161202020.png" alt="image-20230611161202020"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»ä½¿ç”¨Mybatiså¼€å‘çš„åŸºæœ¬æ­¥éª¤ï¼Œç®€æ˜“æäº¤çœ‹Springçš„ç›¸å…³ç¬”è®°</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="Mybatis" scheme="https://momoao.github.io/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>VSCodeä¸­C++ç¯å¢ƒé…ç½®</title>
    <link href="https://momoao.github.io/posts/202308241554.html"/>
    <id>https://momoao.github.io/posts/202308241554.html</id>
    <published>2023-08-09T10:19:03.000Z</published>
    <updated>2023-08-25T12:44:14.007Z</updated>
    
    <content type="html"><![CDATA[<h1>VSCodeé…ç½®</h1><h1>c++ç¯å¢ƒé…ç½®</h1><ul><li><p>ä¸‹è½½è¿™ä¸ªæ‹“å±•ï¼Œ1.8.4ç‰ˆæœ¬<img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714165903555.png" alt="image-20230714165903555"></p></li><li><p>é€‰æ‹©ç¼–è¯‘å™¨ç¬¬ä¸€ä¸ª</p><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170141470.png" alt="image-20230714170141470"></p></li><li><p>è¿˜æ˜¯ç¬¬ä¸€ä¸ª</p><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170213229.png" alt="image-20230714170213229"></p></li><li><p>è¿è¡Œåè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶</p><ul><li><p>launch.json</p><ul><li>è®¾ç½®programæŒ‡å®šexeæ–‡ä»¶ç”Ÿæˆè·¯å¾„</li><li>è®¾ç½®externalConsoleæŒ‡å®šæ˜¯å¦åœ¨æ§åˆ¶å°ä¸­è¾“å‡º<ul><li>ä¸€èˆ¬ä½¿ç”¨trueï¼ˆé»˜è®¤falseï¼‰ï¼Œä¸ç„¶ä¼šæœ‰ä¹±ç é—®é¢˜</li></ul></li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714170851815.png" alt="image-20230714170851815"></li></ul></li><li><p>task.json</p><ul><li>è¿™é‡Œä¹ŸæŒ‡å®šexeæ–‡ä»¶çš„è·¯å¾„ï¼Œéœ€è¦ä¸ä¸Šé¢çš„ä¸€æ ·</li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714171026376.png" alt="image-20230714171026376"></li></ul></li></ul></li></ul><h1>è‡ªå®šä¹‰ä»£ç æ®µé…ç½®</h1><ul><li></li><li><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714171247386.png" alt="image-20230714171247386"></li></ul><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNjI2NTE2Mi0yNzRiZTI5ZWQxNGY3NWU4LnBuZw.png" alt="aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNjI2NTE2Mi0yNzRiZTI5ZWQxNGY3NWU4LnBuZw"></p><ul><li><p>æ–‡ä»¶ä¸­çš„é…ç½®</p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172404490.png" alt="image-20230714172404490"></p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172345791.png" alt="image-20230714172345791"></p></li><li><p>é…ç½®ä¹¦å†™è§„èŒƒ</p></li><li><p><img src="../assets/image/VSCode%E9%85%8D%E7%BD%AE_Image/image-20230714172431725.png" alt="image-20230714172431725"></p></li></ul>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»VSCodeä¸­C++ç¯å¢ƒçš„é…ç½®å’Œä½¿ç”¨</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://momoao.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="VSCode" scheme="https://momoao.github.io/tags/VSCode/"/>
    
    <category term="è½¯ä»¶é…ç½®" scheme="https://momoao.github.io/tags/%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>C++QT</title>
    <link href="https://momoao.github.io/posts/202308241636.html"/>
    <id>https://momoao.github.io/posts/202308241636.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-27T07:39:45.715Z</updated>
    
    <content type="html"><![CDATA[<h1>C++QT</h1><h1>æ¦‚è¿°</h1><h2 id="QT">QT</h2><p>QTï¼ˆQtï¼‰æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œç”¨äºå¼€å‘å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºå’ŒåµŒå…¥å¼ç³»ç»Ÿã€‚å®ƒç”±Qt Companyï¼ˆå‰èº«ä¸ºNokiaï¼‰å¼€å‘å¹¶ç»´æŠ¤ï¼Œé‡‡ç”¨C++ç¼–å†™ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„åº“å’Œå·¥å…·ï¼Œä»¥ç®€åŒ–è½¯ä»¶å¼€å‘è¿‡ç¨‹ã€‚</p><p>Qtæä¾›äº†ä¸€å¥—å®Œæ•´çš„å·¥å…·å’Œç»„ä»¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•å’Œæ˜“äºç»´æŠ¤çš„åº”ç”¨ç¨‹åºã€‚å®ƒæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxã€Androidå’ŒiOSç­‰ã€‚ä½¿ç”¨Qtï¼Œå¼€å‘äººå‘˜å¯ä»¥ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œç„¶åå°†å…¶ç§»æ¤åˆ°ä¸åŒå¹³å°ä¸Šè¿è¡Œï¼Œä»è€Œå®ç°è·¨å¹³å°å¼€å‘ã€‚</p><p>Qtæ¡†æ¶çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>è·¨å¹³å°ï¼šQtå…è®¸å¼€å‘äººå‘˜åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶æä¾›äº†ä¸€è‡´çš„APIå’Œå·¥å…·ã€‚</p></li><li><p>å¯è§†åŒ–è®¾è®¡ï¼šQtæä¾›äº†ä¸€å¥—å¯è§†åŒ–è®¾è®¡å·¥å…·ï¼Œå¦‚Qt Designerï¼Œå¯å¸®åŠ©å¼€å‘äººå‘˜è½»æ¾è®¾è®¡å’Œå¸ƒå±€å›¾å½¢ç•Œé¢ã€‚</p></li><li><p>ä¸°å¯Œçš„åº“ï¼šQtæä¾›äº†è®¸å¤šåŠŸèƒ½å¼ºå¤§çš„åº“ï¼Œæ¶µç›–äº†å„ç§é¢†åŸŸï¼ŒåŒ…æ‹¬å›¾å½¢æ¸²æŸ“ã€ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“è®¿é—®ã€å¤šåª’ä½“å¤„ç†ç­‰ã€‚</p></li><li><p>ä¿¡å·ä¸æ§½æœºåˆ¶ï¼šQtå¼•å…¥äº†ä¿¡å·ä¸æ§½æœºåˆ¶ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„é€šä¿¡å’Œäº‹ä»¶å¤„ç†ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºçš„é€»è¾‘æ›´åŠ çµæ´»å’Œæ˜“äºç»„ç»‡ã€‚</p></li><li><p>å¤šçº¿ç¨‹æ”¯æŒï¼šQtæä¾›äº†å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ”¯æŒï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°ç¼–å†™å¹¶å‘å’Œå¹¶è¡Œçš„åº”ç”¨ç¨‹åºã€‚</p></li></ol><p>Qtå¹¿æ³›ç”¨äºå¼€å‘å„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¡Œé¢åº”ç”¨ç¨‹åºã€ç§»åŠ¨åº”ç”¨ç¨‹åºã€åµŒå…¥å¼ç³»ç»Ÿå’Œå›¾å½¢åŒ–å·¥å…·ç­‰ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äºè¡Œä¸šé¢†åŸŸï¼Œå¦‚è‡ªåŠ¨åŒ–ã€åŒ»ç–—ã€æ¸¸æˆå¼€å‘ã€èˆªç©ºèˆªå¤©ç­‰ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒQtæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œç”¨äºå¼€å‘å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºå’ŒåµŒå…¥å¼ç³»ç»Ÿã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åº“å’Œå·¥å…·ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾æ„å»ºè·¨å¹³å°ã€é«˜æ€§èƒ½å’Œå¯æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚</p><h2 id="QML">QML</h2><p>QMLï¼ˆQt Meta-Object Languageï¼‰æ˜¯ä¸€ç§ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„å£°æ˜æ€§è¯­è¨€ï¼Œç”±Qtæ¡†æ¶æä¾›æ”¯æŒã€‚å®ƒè¢«å¹¿æ³›ç”¨äºå¼€å‘è·¨å¹³å°çš„æ¡Œé¢ã€ç§»åŠ¨å’ŒåµŒå…¥å¼åº”ç”¨ç¨‹åºã€‚QMLçš„è®¾è®¡ç†å¿µæ˜¯å°†ç•Œé¢çš„ç»“æ„ã€å¤–è§‚å’Œäº¤äº’é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä»¥ä¸€ç§ç›´è§‚å’Œçµæ´»çš„æ–¹å¼åˆ›å»ºå¯Œæœ‰å¸å¼•åŠ›çš„ç”¨æˆ·ç•Œé¢ã€‚</p><p>ä»¥ä¸‹æ˜¯QMLçš„ä¸€äº›é‡è¦ç‰¹ç‚¹å’Œæ¦‚å¿µï¼š</p><ol><li><p><strong>å£°æ˜æ€§è¯­è¨€</strong>ï¼šQMLæ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€ï¼Œå®ƒé€šè¿‡æè¿°ç•Œé¢å…ƒç´ ä¹‹é—´çš„å…³ç³»å’Œå±æ€§æ¥å®šä¹‰ç”¨æˆ·ç•Œé¢ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç®€æ´çš„è¯­æ³•æ¥å£°æ˜ç•Œé¢çš„ç»“æ„ã€æ ·å¼å’Œè¡Œä¸ºï¼Œè€Œæ— éœ€ç¼–å†™å¤§é‡çš„ä»£ç ã€‚</p></li><li><p><strong>å¯¹è±¡æ¨¡å‹</strong>ï¼šQMLåŸºäºå¯¹è±¡æ¨¡å‹ï¼Œå…¶ä¸­ç•Œé¢å…ƒç´ è¢«è¡¨ç¤ºä¸ºå¯é‡ç”¨çš„å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡å¯ä»¥å…·æœ‰å±æ€§ã€ä¿¡å·å’Œæ–¹æ³•ï¼Œå¯ä»¥åµŒå¥—å’Œç»„åˆå½¢æˆå±‚æ¬¡ç»“æ„ã€‚è¿™ç§å¯¹è±¡æ¨¡å‹ä½¿å¾—æ„å»ºå¤æ‚çš„ç•Œé¢å˜å¾—å®¹æ˜“ï¼Œå¹¶æ”¯æŒä»£ç çš„æ¨¡å—åŒ–å’Œé‡ç”¨ã€‚</p></li><li><p><strong>è§†è§‰å…ƒç´ </strong>ï¼šQMLæä¾›äº†ä¸°å¯Œçš„è§†è§‰å…ƒç´ æ¥æ„å»ºç”¨æˆ·ç•Œé¢ï¼ŒåŒ…æ‹¬çŸ©å½¢ã€åœ†è§’çŸ©å½¢ã€æ–‡æœ¬ã€å›¾åƒã€æŒ‰é’®ã€åˆ—è¡¨è§†å›¾ç­‰ã€‚è¿™äº›å…ƒç´ å¯ä»¥é€šè¿‡è®¾ç½®å±æ€§æ¥å®šåˆ¶å¤–è§‚å’Œè¡Œä¸ºï¼Œå¹¶å¯ä»¥ä½¿ç”¨åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœæ¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚</p></li><li><p><strong>å¸ƒå±€å’Œä½ç½®</strong>ï¼šQMLæä¾›äº†çµæ´»çš„å¸ƒå±€å’Œä½ç½®ç®¡ç†å™¨ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå®šä¹‰ç•Œé¢å…ƒç´ çš„ä½ç½®å’Œå¤§å°ã€‚å¯ä»¥ä½¿ç”¨å‚ç›´å¸ƒå±€ã€æ°´å¹³å¸ƒå±€ã€æ …æ ¼å¸ƒå±€ç­‰æ¥è‡ªåŠ¨æ’åˆ—å…ƒç´ ï¼Œå¹¶æ”¯æŒé”šç‚¹ã€å¡«å……ã€å¯¹é½ç­‰å±æ€§æ¥æ§åˆ¶å…ƒç´ çš„ä½ç½®ã€‚</p></li><li><p><strong>ä¿¡å·å’Œæ§½æœºåˆ¶</strong>ï¼šQMLæ”¯æŒä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥å’Œç•Œé¢å…ƒç´ ä¹‹é—´çš„é€šä¿¡ã€‚å¯ä»¥å®šä¹‰ä¿¡å·å¹¶å°†å…¶è¿æ¥åˆ°ç‰¹å®šçš„æ§½å‡½æ•°ï¼Œä»¥å“åº”äº‹ä»¶æˆ–æ•°æ®çš„å˜åŒ–ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—å®ç°äº¤äº’é€»è¾‘å’Œå¤„ç†ç”¨æˆ·æ“ä½œå˜å¾—ç®€å•å’Œç›´è§‚ã€‚</p></li><li><p><strong>åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ</strong>ï¼šQMLå…·æœ‰å†…ç½®çš„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœç³»ç»Ÿï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºå¹³æ»‘çš„ç•Œé¢åŠ¨ç”»ã€‚å¯ä»¥åœ¨å±æ€§ä¹‹é—´å®šä¹‰åŠ¨ç”»ï¼Œä¾‹å¦‚æ·¡å…¥æ·¡å‡ºã€å¹³ç§»ã€æ—‹è½¬ç­‰ï¼Œä»¥åŠåœ¨ä¸åŒç•Œé¢çŠ¶æ€ä¹‹é—´å®šä¹‰è¿‡æ¸¡æ•ˆæœï¼Œä¾‹å¦‚é¡µé¢åˆ‡æ¢æ•ˆæœã€‚</p></li><li><p><strong>ä¸C++çš„äº¤äº’</strong>ï¼šQMLå¯ä»¥ä¸C++ä»£ç è¿›è¡Œæ— ç¼é›†æˆï¼Œé€šè¿‡Qtçš„å…ƒå¯¹è±¡ç³»ç»Ÿå®ç°è·¨è¯­è¨€äº¤äº’ã€‚å¯ä»¥å°†QMLç•Œé¢ä¸åç«¯çš„C++é€»è¾‘ç›¸ç»“åˆï¼Œä½¿å¼€</p></li></ol><p>å‘äººå‘˜èƒ½å¤Ÿå……åˆ†åˆ©ç”¨Qtæ¡†æ¶æä¾›çš„å¼ºå¤§åŠŸèƒ½å’Œåº“ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒQMLæ˜¯ä¸€ç§å¼ºå¤§çš„ç”¨æˆ·ç•Œé¢å¼€å‘è¯­è¨€ï¼Œå®ƒä»¥å£°æ˜æ€§çš„æ–¹å¼æè¿°ç•Œé¢å…ƒç´ ï¼Œå…·æœ‰çµæ´»çš„å¸ƒå±€å’Œä½ç½®ç®¡ç†ï¼Œæ”¯æŒåŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœï¼Œå¹¶èƒ½ä¸C++ä»£ç è¿›è¡Œäº¤äº’ã€‚é€šè¿‡ä½¿ç”¨QMLï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å¿«é€Ÿã€æ›´é«˜æ•ˆåœ°æ„å»ºå‡ºè‰²çš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚</p><h2 id="ä¿¡å·å’Œæ§½æœºåˆ¶">ä¿¡å·å’Œæ§½æœºåˆ¶</h2><p>åœ¨Qtä¸­ï¼Œä¿¡å·ï¼ˆSignalsï¼‰å’Œæ§½ï¼ˆSlotsï¼‰æœºåˆ¶æ˜¯ä¸€ç§ç”¨äºå®ç°å¯¹è±¡é—´é€šä¿¡çš„é‡è¦æœºåˆ¶ã€‚å®ƒæ˜¯Qtæ¡†æ¶ä¸­çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œç”¨äºè§£è€¦å’Œè¿æ¥ä¸åŒçš„å¯¹è±¡ã€‚</p><p>ä¿¡å·ï¼ˆSignalsï¼‰æ˜¯Qtå¯¹è±¡åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶å‘å‡ºçš„æ¶ˆæ¯ã€‚ä¸€ä¸ªä¿¡å·å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªç‰¹å®šäº‹ä»¶çš„å‘å‡ºè€…ã€‚ä¾‹å¦‚ï¼Œå½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼ŒQPushButtonç±»å¯ä»¥å‘å‡ºä¸€ä¸ªclickedï¼ˆç‚¹å‡»ï¼‰ä¿¡å·ã€‚</p><p>æ§½ï¼ˆSlotsï¼‰æ˜¯Qtå¯¹è±¡ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºå“åº”ä¿¡å·çš„å‘å‡ºã€‚æ§½å¯ä»¥è¢«è§†ä¸ºä¿¡å·çš„æ¥æ”¶è€…ï¼Œå®ƒå®šä¹‰äº†å½“ç‰¹å®šä¿¡å·å‘ç”Ÿæ—¶åº”è¯¥æ‰§è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ§½å‡½æ•°æ¥å¤„ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><p>ä¿¡å·å’Œæ§½æœºåˆ¶çš„è¿æ¥æ˜¯é€šè¿‡ä½¿ç”¨QObjectç±»çš„connect()å‡½æ•°æ¥å®ç°çš„ã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå‘å‡ºä¿¡å·çš„å¯¹è±¡ã€ä¸€ä¸ªä¿¡å·çš„åç§°ã€ä¸€ä¸ªæ¥æ”¶ä¿¡å·çš„å¯¹è±¡å’Œä¸€ä¸ªæ§½å‡½æ•°çš„åç§°ä½œä¸ºå‚æ•°ã€‚å½“ä¿¡å·è¢«å‘å‡ºæ—¶ï¼Œä¸ä¹‹è¿æ¥çš„æ§½å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†ä¿¡å·å’Œæ§½çš„ä½¿ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(QObject *parent = <span class="literal">nullptr</span>) : <span class="built_in">QObject</span>(parent) &#123;</span><br><span class="line">        QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Click me&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">connect</span>(button, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">handleButtonClick</span>()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">handleButtonClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Button clicked!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MyClass myObject;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒMyClassæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„QObjectå­ç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæŒ‰é’®ï¼ˆQPushButtonï¼‰ã€‚å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œclicked()ä¿¡å·ä¼šè¢«å‘å‡ºã€‚è¿™ä¸ªä¿¡å·ä¸MyClassç±»ä¸­çš„handleButtonClick()æ§½å‡½æ•°è¿æ¥èµ·æ¥ã€‚å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒhandleButtonClick()å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå¹¶è¾“å‡º&quot;Button clicked!&quot;ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œå¿…é¡»å°†QObjectå­ç±»çš„å¤´æ–‡ä»¶åŒ…å«è¿›æ¥ï¼Œå¹¶åœ¨ç±»çš„å®šä¹‰ä¸­ä½¿ç”¨Q_OBJECTå®ã€‚è¿™ä¸ªå®ä¼šä¸ºç±»æ·»åŠ å¿…è¦çš„å…ƒå¯¹è±¡ï¼ˆMeta-Objectï¼‰ä¿¡æ¯ï¼Œä»¥æ”¯æŒä¿¡å·å’Œæ§½çš„è¿æ¥ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œä¿¡å·å’Œæ§½æœºåˆ¶æ˜¯Qtä¸­ä¸€ç§å¼ºå¤§çš„å¯¹è±¡é—´é€šä¿¡æ–¹å¼ï¼Œå®ƒå…è®¸å¯¹è±¡ä¹‹é—´çš„è§£è€¦å’Œçµæ´»è¿æ¥ã€‚é€šè¿‡ä½¿ç”¨ä¿¡å·å’Œæ§½ï¼Œä½ å¯ä»¥å®ç°äº‹ä»¶çš„å“åº”å’Œæ•°æ®çš„ä¼ é€’ï¼Œä½¿å¾—Qtç¨‹åºæ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚</p><h1>ç•Œé¢è§£è¯»</h1><h2 id="è®¾è®¡ç•Œé¢">è®¾è®¡ç•Œé¢</h2><p><img src="../assets/image/C++QT_Image/image-20230622134750896.png" alt="image-20230622134750896"></p><h3 id="Layouts-å¸ƒå±€">Layouts-å¸ƒå±€</h3><p><img src="../assets/image/C++QT_Image/image-20230622135030754.png" alt="image-20230622135030754"></p><p>æ°´å¹³å¸ƒå±€</p><p>å‚ç›´å¸ƒå±€</p><p>ç½‘æ ¼å¸ƒå±€ï¼ˆè®¡ç®—å™¨ï¼‰</p><p>è¡¨å•å¸ƒå±€</p><h3 id="Spacers-å¼¹ç°§">Spacers-å¼¹ç°§</h3><p><img src="../assets/image/C++QT_Image/image-20230622135023591.png" alt="image-20230622135023591"></p><p>æ°´å¹³å¼¹ç°§</p><p>ç«–ç›´å¼¹ç°§</p><p><img src="../assets/image/C++QT_Image/image-20230622135014724.png" alt="image-20230622135014724"></p><p>ä¾‹å¦‚ï¼šç¡®å®šçš„å·¦è¾¹å°±ç©ºäº†å¥½å¤šåœ°æ–¹ï¼Œå°±æ˜¯å› ä¸ºæœ‰ä¸€ä¸ªæ°´å¹³çš„å¼¹ç°§</p><h3 id="Buttons-æŒ‰é’®">Buttons-æŒ‰é’®</h3><p><img src="../assets/image/C++QT_Image/image-20230622135116717.png" alt="image-20230622135116717"></p><p>æ™®é€šæŒ‰é’®</p><p>å·¥å…·æŒ‰é’®</p><p>å•é€‰æŒ‰é’®</p><p>å¤é€‰æŒ‰é’®</p><p>å‘½ä»¤é“¾æ¥æŒ‰é’®</p><p>å¯¹è¯æ¡†æŒ‰é’®ç›’</p><h3 id="Item-Views-Model-Based-å•å…ƒè§†å›¾">Item Views(Model-Based)-å•å…ƒè§†å›¾</h3><p><img src="../assets/image/C++QT_Image/image-20230622152529030.png" alt="image-20230622152529030"></p><p>åˆ—è¡¨è§†å›¾</p><p>æ ‘å½¢è§†å›¾</p><p>è¡¨æ ¼è§†å›¾</p><h2 id="ç•Œé¢å…ƒç´ ">ç•Œé¢å…ƒç´ </h2><p>ä»ä¸Šåˆ°ä¸‹è¡¨æ˜äº†ç»§æ‰¿å…³ç³»</p><p><img src="../assets/image/C++QT_Image/image-20230622154010513.png" alt="image-20230622154010513"></p><h1>æŒ‰é’®æ“ä½œ</h1><h2 id="ç¬¬ä¸€ç§å†™æ³•">ç¬¬ä¸€ç§å†™æ³•</h2><p>å³é”®æŒ‰é’®é€‰æ‹©è½¬åˆ°æ§½</p><p><img src="../assets/image/C++QT_Image/image-20230622162057438.png" alt="image-20230622162057438"></p><p>ä¹‹åé€‰æ‹©ä¸€ç§ä¿¡å·ç±»å‹</p><p><img src="../assets/image/C++QT_Image/image-20230622162121883.png" alt="image-20230622162121883"></p><p>åœ¨widget.hæ–‡ä»¶ä¸­å°±ä¼šè‡ªåŠ¨ç”Ÿæˆ</p><p><img src="../assets/image/C++QT_Image/image-20230622162157178.png" alt="image-20230622162157178"></p><p>åœ¨widget.cppæ–‡ä»¶ä¸­å°±ä¼šè‡ªåŠ¨ç”Ÿæˆ</p><p><img src="../assets/image/C++QT_Image/image-20230622162213901.png" alt="image-20230622162213901"></p><p>ä¹‹ååœ¨æ–¹æ³•ä½“é‡Œå†™ç‚¹å‡»æŒ‰é’®åæ‰§è¡Œçš„æ“ä½œ</p><p>è·å–å¯¹è±¡æ–‡æœ¬ï¼Œæ‰§è¡Œè¿™ä¸ªè¿›ç¨‹</p><p>ä¾‹å¦‚ï¼šè¾“å…¥notepadåå°±ä¼šæ‰“å¼€è®°äº‹æœ¬</p><p><img src="../assets/image/C++QT_Image/image-20230622162236358.png" alt="image-20230622162236358"></p><h2 id="ç¬¬äºŒç§æ–¹æ³•">ç¬¬äºŒç§æ–¹æ³•</h2><p>åœ¨æ„é€ æ–¹æ³•ä¸­ä½¿ç”¨connectå‡½æ•°</p><p><img src="../assets/image/C++QT_Image/image-20230622162400415.png" alt="image-20230622162400415"></p><h1>connect()ä½¿ç”¨</h1><p>åœ¨Qtä¸­ï¼Œ<code>connect()</code>å‡½æ•°æ˜¯ç”¨äºå»ºç«‹ä¿¡å·ä¸æ§½ï¼ˆSignal-Slotï¼‰ä¹‹é—´çš„è¿æ¥ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚ä»¥ä¸‹æ˜¯<code>connect()</code>å‡½æ•°çš„åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(sender, <span class="built_in">SIGNAL</span>(signal), receiver, <span class="built_in">SLOT</span>(slot));</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><p><img src="../assets/image/C++QT_Image/image-20230623123021722.png" alt="image-20230623123021722"></p><p>å…¶ä¸­ï¼Œ<code>sender</code>æ˜¯å‘é€ä¿¡å·çš„å¯¹è±¡ï¼Œ<code>signal</code>æ˜¯ä¿¡å·çš„åç§°ï¼Œ<code>receiver</code>æ˜¯æ¥æ”¶ä¿¡å·çš„å¯¹è±¡ï¼Œ<code>slot</code>æ˜¯æ§½çš„åç§°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>connect()</code>å‡½æ•°çš„ç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sender</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">sendSignal</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">emit <span class="title">mySignal</span><span class="params">(<span class="string">&quot;Hello, World!&quot;</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mySignal</span><span class="params">(<span class="type">const</span> QString&amp; message)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Receiver</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">receiveSlot</span><span class="params">(<span class="type">const</span> QString&amp; message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="literal">nullptr</span>, <span class="string">&quot;Message&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    Sender sender;</span><br><span class="line">    Receiver receiver;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿æ¥ä¿¡å·å’Œæ§½</span></span><br><span class="line">    QObject::<span class="built_in">connect</span>(&amp;sender, <span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>(<span class="type">const</span> QString&amp;)), &amp;receiver, <span class="built_in">SLOT</span>(<span class="built_in">receiveSlot</span>(<span class="type">const</span> QString&amp;)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€ä¿¡å·</span></span><br><span class="line">    sender.<span class="built_in">sendSignal</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼š<code>Sender</code>å’Œ<code>Receiver</code>ã€‚<code>Sender</code>ç±»æœ‰ä¸€ä¸ª<code>sendSignal()</code>å‡½æ•°ï¼Œå®ƒé€šè¿‡<code>emit</code>å…³é”®å­—å‘å‡ºä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²å‚æ•°çš„è‡ªå®šä¹‰ä¿¡å·<code>mySignal</code>ã€‚<code>Receiver</code>ç±»æœ‰ä¸€ä¸ª<code>receiveSlot()</code>æ§½å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶ä½¿ç”¨<code>QMessageBox::information()</code>æ˜¾ç¤ºæ¶ˆæ¯æ¡†ã€‚</p><p>åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†<code>Sender</code>å’Œ<code>Receiver</code>çš„å®ä¾‹ã€‚ç„¶åï¼Œä½¿ç”¨<code>connect()</code>å‡½æ•°å°†<code>Sender</code>å¯¹è±¡çš„<code>mySignal</code>ä¿¡å·ä¸<code>Receiver</code>å¯¹è±¡çš„<code>receiveSlot</code>æ§½å‡½æ•°è¿›è¡Œè¿æ¥ã€‚</p><p>æœ€åï¼Œè°ƒç”¨<code>sender.sendSignal()</code>å‘é€ä¿¡å·ï¼Œå½“ä¿¡å·å‘å‡ºæ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ§½å‡½æ•°<code>receiver.receiveSlot()</code>ï¼Œå¹¶åœ¨æ¶ˆæ¯æ¡†ä¸­æ˜¾ç¤ºæ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†æ­£ç¡®ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶ï¼Œéœ€è¦åœ¨ç›¸åº”çš„ç±»å£°æ˜ä¸­æ·»åŠ <code>Q_OBJECT</code>å®ï¼Œå¹¶ä½¿ç”¨<code>SIGNAL()</code>å’Œ<code>SLOT()</code>å®æ¥æŒ‡å®šä¿¡å·å’Œæ§½çš„åç§°ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ä½¿ç”¨Qtçš„å…ƒå¯¹è±¡ç³»ç»Ÿï¼ˆMeta-Object Systemï¼‰æ¥æ”¯æŒä¿¡å·å’Œæ§½çš„è¿æ¥ï¼Œå› æ­¤éœ€è¦åœ¨ä»£ç ä¸­åŒ…å«<code>&lt;QObject&gt;</code>å¤´æ–‡ä»¶ï¼Œå¹¶åœ¨æ„å»ºé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„Qtæ¨¡å—ä¾èµ–ã€‚</p><p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„<code>connect()</code>å‡½æ•°ä½¿ç”¨ç¤ºä¾‹ï¼Œå®é™…ä¸­å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚å’Œåœºæ™¯æ¥è¿æ¥ä¸åŒçš„ä¿¡å·å’Œæ§½ã€‚åœ¨Qtçš„å®˜æ–¹æ–‡æ¡£ä¸­å¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„<code>connect()</code>å‡½æ•°ç”¨æ³•å’Œç¤ºä¾‹ã€‚</p><h2 id="QTè‡ªå¸¦ä¿¡å·">QTè‡ªå¸¦ä¿¡å·</h2><p>Qtæ¡†æ¶è‡ªå¸¦äº†è®¸å¤šå¸¸ç”¨çš„ä¿¡å·ï¼Œå¯ä»¥åœ¨å„ç§Qtç±»ä¸­ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Qtè‡ªå¸¦ä¿¡å·çš„ç¤ºä¾‹ï¼š</p><ol><li><p>QPushButtonç±»çš„ä¿¡å·ï¼š</p><ul><li>clicked()ï¼šæŒ‰é’®è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>pressed()ï¼šæŒ‰é’®è¢«æŒ‰ä¸‹æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>released()ï¼šæŒ‰é’®è¢«é‡Šæ”¾æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li><li><p>QCheckBoxç±»çš„ä¿¡å·ï¼š</p><ul><li>clicked()ï¼šå¤é€‰æ¡†è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li><li>stateChanged(int)ï¼šå¤é€‰æ¡†çŠ¶æ€æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„çŠ¶æ€å€¼ã€‚</li></ul></li><li><p>QLineEditç±»çš„ä¿¡å·ï¼š</p><ul><li>textChanged(const QString&amp;)ï¼šæ–‡æœ¬æ¡†å†…å®¹æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„æ–‡æœ¬å†…å®¹ã€‚</li><li>editingFinished()ï¼šç¼–è¾‘å®Œæˆæ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li><li><p>QComboBoxç±»çš„ä¿¡å·ï¼š</p><ul><li>currentIndexChanged(int)ï¼šä¸‹æ‹‰æ¡†å½“å‰é€‰é¡¹æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°é€‰ä¸­çš„é€‰é¡¹ç´¢å¼•ã€‚</li></ul></li><li><p>QSliderç±»çš„ä¿¡å·ï¼š</p><ul><li>valueChanged(int)ï¼šæ»‘åŠ¨æ¡å€¼æ”¹å˜æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯æ–°çš„å€¼ã€‚</li></ul></li><li><p>QListWidgetç±»çš„ä¿¡å·ï¼š</p><ul><li>itemClicked(QListWidgetItem*)ï¼šåˆ—è¡¨é¡¹è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ä¿¡å·ï¼Œå‚æ•°æ˜¯è¢«ç‚¹å‡»çš„åˆ—è¡¨é¡¹å¯¹è±¡ã€‚</li></ul></li><li><p>QTimerç±»çš„ä¿¡å·ï¼š</p><ul><li>timeout()ï¼šå®šæ—¶å™¨è¶…æ—¶æ—¶å‘å‡ºçš„ä¿¡å·ã€‚</li></ul></li></ol><p>ä»¥ä¸Šåªæ˜¯ä¸€äº›å¸¸è§çš„Qtç±»çš„ä¿¡å·ç¤ºä¾‹ï¼Œå®é™…ä¸ŠQtæ¡†æ¶ä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»çš„ä¿¡å·å¯ä¾›ä½¿ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥é˜…Qtçš„å®˜æ–¹æ–‡æ¡£æ¥è·å–å®Œæ•´çš„ä¿¡å·åˆ—è¡¨å’Œä½¿ç”¨è¯´æ˜ï¼Œä»¥ä¾¿åœ¨ç¼–ç¨‹ä¸­é€‰æ‹©é€‚åˆçš„ä¿¡å·æ¥å®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚</p><p>é™„åŠ ï¼š</p><p><code>returnPressed()</code>æ˜¯Qtä¸­æŸäº›ç»„ä»¶ï¼ˆå¦‚QLineEditï¼‰çš„ä¸€ä¸ªä¿¡å·ã€‚å½“ç”¨æˆ·åœ¨è¯¥ç»„ä»¶ä¸ŠæŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œå°±ä¼šå‘å‡º<code>returnPressed()</code>ä¿¡å·ã€‚</p><h1>ç»„ä»¶ä¸­å€¼çš„è·å–</h1><p>åœ¨Qtçš„UIä¸­ï¼Œå¯ä»¥ä½¿ç”¨å„ç§ç»„ä»¶ï¼ˆä¾‹å¦‚QLineEditã€QComboBoxã€QSliderç­‰ï¼‰æ¥æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥æˆ–é€‰æ‹©ã€‚è¦è·å–è¿™äº›ç»„ä»¶ä¸­çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åº”çš„æ–¹æ³•æˆ–å±æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§ç»„ä»¶å€¼è·å–çš„ç¤ºä¾‹ï¼š</p><ol><li><p>QLineEditï¼ˆæ–‡æœ¬æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>text()</code>æ–¹æ³•è·å–æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QLineEdit* lineEdit = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">QString text = lineEdit-&gt;<span class="built_in">text</span>();</span><br></pre></td></tr></table></figure></li><li><p>QComboBoxï¼ˆä¸‹æ‹‰æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>currentText()</code>æ–¹æ³•è·å–å½“å‰é€‰ä¸­é¡¹çš„æ–‡æœ¬å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QComboBox* comboBox = <span class="keyword">new</span> <span class="built_in">QComboBox</span>(<span class="keyword">this</span>);</span><br><span class="line">QString selectedText = comboBox-&gt;<span class="built_in">currentText</span>();</span><br></pre></td></tr></table></figure></li><li><p>QSliderï¼ˆæ»‘åŠ¨æ¡ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>value()</code>æ–¹æ³•è·å–æ»‘åŠ¨æ¡çš„å½“å‰å€¼ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QSlider* slider = <span class="keyword">new</span> <span class="built_in">QSlider</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">int</span> value = slider-&gt;<span class="built_in">value</span>();</span><br></pre></td></tr></table></figure></li><li><p>QCheckBoxï¼ˆå¤é€‰æ¡†ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>isChecked()</code>æ–¹æ³•è·å–å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox* checkBox = <span class="keyword">new</span> <span class="built_in">QCheckBox</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">bool</span> checked = checkBox-&gt;<span class="built_in">isChecked</span>();</span><br></pre></td></tr></table></figure></li><li><p>QRadioButtonï¼ˆå•é€‰æŒ‰é’®ï¼‰ï¼š</p><ul><li>ä½¿ç”¨<code>isChecked()</code>æ–¹æ³•è·å–å•é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QRadioButton* radioButton = <span class="keyword">new</span> <span class="built_in">QRadioButton</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="type">bool</span> checked = radioButton-&gt;<span class="built_in">isChecked</span>();</span><br></pre></td></tr></table></figure></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§ç»„ä»¶å€¼è·å–çš„ç¤ºä¾‹ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰é€‚ç”¨äºè·å–å€¼çš„æ–¹æ³•ã€‚å¯ä»¥æ ¹æ®å…·ä½“çš„ç»„ä»¶ç±»å‹å’Œéœ€æ±‚ï¼ŒæŸ¥é˜…Qtçš„å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´å¤šå…³äºç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¿¡å·å’Œæ§½æœºåˆ¶æ¥æ•è·ç»„ä»¶å€¼çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è¿æ¥æ–‡æœ¬æ¡†çš„<code>textChanged()</code>ä¿¡å·æˆ–æ»‘åŠ¨æ¡çš„<code>valueChanged()</code>ä¿¡å·ï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ç›¸åº”çš„æ§½å‡½æ•°ï¼Œåœ¨æ§½å‡½æ•°ä¸­è·å–æœ€æ–°çš„å€¼å¹¶è¿›è¡Œå¤„ç†ã€‚</p><h1>æ·»åŠ å›¾ç‰‡èµ„æº</h1><p>å³é”®é¡¹ç›®æ·»åŠ æ–°æ–‡ä»¶</p><p><img src="../assets/image/C++QT_Image/image-20230623131551654.png" alt="image-20230623131551654"></p><p>å°†å›¾ç‰‡æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªresæ–‡ä»¶å¤¹å†…ï¼Œå¹¶æ”¾åœ¨é¡¹ç›®ä¸‹</p><p><img src="../assets/image/C++QT_Image/image-20230623131634103.png" alt="image-20230623131634103"></p><p>å°†rcc.exeæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­</p><p>D:\QT5.9\5.9\mingw53_32\bin</p><p>åœ¨cmdä¸­ä½¿ç”¨rccæŒ‡ä»¤å°†qrcä¸­åŒ…å«çš„å›¾ç‰‡æ–‡ä»¶å˜ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶plane.rcc</p><p><strong>rcc -binary res.qrc -o plane.rcc</strong></p><p><img src="../assets/image/C++QT_Image/image-20230623131736291.png" alt="image-20230623131736291"></p><p>ä½¿ç”¨è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦åŒ…å«å¤´æ–‡ä»¶</p><p>#include <QResource></p><p>æ³¨å†ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¿¡æ¯</p><p>ä¹‹åå°±å¯ä»¥é€šè¿‡QResource::registerResource(GAME_RES_PATH);æ¥æŒ‡æ˜å¼•å…¥äº†ä»€ä¹ˆèµ„æºï¼Œå¯ä»¥åˆ é™¤qrcæ–‡ä»¶ï¼Œä½†æ˜¯resæ–‡ä»¶å¤¹è¦ç•™ç€</p><p>æ³¨æ„ï¼šè¿™é‡Œçš„è·¯å¾„æ˜¯é¡¹ç›®çš„æ‰€åœ¨ç›®å½•ï¼Œè€Œä¸æ˜¯é¡¹ç›®ç›®å½•ä¸‹</p><p>#define GAME_RES_PATH â€œPlaneWar/plane.rccâ€</p><p><img src="../assets/image/C++QT_Image/image-20230623132226055.png" alt="image-20230623132226055"></p><p>åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®å›¾æ ‡å³å¯åœ¨çª—å£å·¦ä¸Šè§’åŠ è½½</p><p>éœ€è¦#include <QIcon></p><p><img src="../assets/image/C++QT_Image/image-20230623132645766.png" alt="image-20230623132645766"></p><h1>ç¨‹åºå¼€å‘</h1><h2 id="åœ°å›¾æ»šåŠ¨">åœ°å›¾æ»šåŠ¨</h2><h3 id="map-h">map.h</h3><p>è´Ÿè´£å®šä¹‰åœ°å›¾çš„åæ ‡è®¡ç®—æ–¹æ³•</p><p><img src="../assets/image/C++QT_Image/image-20230623162142354.png" alt="image-20230623162142354"></p><h3 id="map-cpp">map.cpp</h3><p>åœ¨æ„é€ æ–¹æ³•é‡ŒåŠ è½½åœ°å›¾å›¾ç‰‡ï¼Œåˆå§‹åŒ–è¿™ä¸¤ä¸ªå›¾ç‰‡Yåæ ‡ï¼Œè®¾ç½®æ»šåŠ¨é€Ÿåº¦</p><p>åœ°å›¾çš„åæ ‡æ”¹å˜è®¡ç®—</p><p><img src="../assets/image/C++QT_Image/image-20230623163427376.png" alt="image-20230623163427376"></p><h3 id="mainscene-h">mainscene.h</h3><p><img src="../assets/image/C++QT_Image/image-20230624082153740.png" alt="image-20230624082153740"></p><h3 id="mainscene-cpp">mainscene.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainscene.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QIcon&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">MainScene::<span class="built_in">MainScene</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    <span class="built_in">initScene</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯åŠ¨æ¸¸æˆ</span></span><br><span class="line">    <span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainScene::~<span class="built_in">MainScene</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::initScene</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®çª—å£å›ºå®šå°ºå¯¸</span></span><br><span class="line">    <span class="built_in">setFixedSize</span>(GAME_WIDTH,GAME_HEIGHT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">setWindowTitle</span>(GAME_TITLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŠ è½½å›¾æ ‡</span></span><br><span class="line">    <span class="built_in">setWindowIcon</span>(<span class="built_in">QIcon</span>(GAME_ICON));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šæ—¶å™¨åˆå§‹åŒ–</span></span><br><span class="line">    m_Timer.<span class="built_in">setInterval</span>(GAME_RATE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¯åŠ¨å®šæ—¶å™¨</span></span><br><span class="line">    m_Timer.<span class="built_in">start</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›‘å¬ç›‘å¬å™¨å‘é€çš„ä¿¡å·</span></span><br><span class="line">    <span class="comment">//ï¼ˆå“ªä¸ªç›‘å¬å™¨ï¼Œæ—¶é—´åˆ°äº†å‘é€ä»€ä¹ˆä¿¡å·ï¼Œç”¨æ–¹æ³•å¤„ç†ï¼‰</span></span><br><span class="line">    <span class="built_in">connect</span>(&amp;m_Timer,&amp;QTimer::timeout,[=]()&#123;</span><br><span class="line">        <span class="comment">//æ›´æ–°æ¸¸æˆä¸­æ‰€æœ‰å…ƒç´ çš„åæ ‡</span></span><br><span class="line">        <span class="built_in">updatePosition</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»˜åˆ¶åˆ°å±å¹•ä¸Š</span></span><br><span class="line">        <span class="built_in">update</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶åœ°å›¾</span></span><br><span class="line">    <span class="comment">//(xåæ ‡ï¼Œyåæ ‡ï¼ŒQPixmapå¯¹è±¡)</span></span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map1_posY,m_map.m_map1);</span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map2_posY,m_map.m_map2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::updatePosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_map.<span class="built_in">mapPosition</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>Clion QTå¼€å‘</h1><h2 id="åŸºç¡€æ“ä½œ">åŸºç¡€æ“ä½œ</h2><p>æ–°å»ºé¡¹ç›®</p><p><img src="../assets/image/C++QT_Image/image-20230622185007059.png" alt="image-20230622185007059"></p><p>åˆ›å»ºç›®å½•æ–¹ä¾¿ç®¡ç†</p><p>å³é”®é¡¹ç›®ç›®å½•æ–°å»ºqtuiæ–‡ä»¶</p><p>å°†.uiæ–‡ä»¶æ”¾åœ¨Formsä¸­</p><p>å°†.hæ–‡ä»¶æ”¾åœ¨Headersä¸­</p><p>å°†.cppæ–‡ä»¶æ”¾åœ¨Sourcesä¸­</p><p><img src="../assets/image/C++QT_Image/image-20230622185031539.png" alt="image-20230622185031539"></p><p>åœ¨CMakeLists.txtä¸­æ·»åŠ </p><p>è¯¥å‘½ä»¤ç”¨äºå‘Šè¯‰ CMake ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦æœç´¢å¤´æ–‡ä»¶çš„è·¯å¾„</p><p><img src="../assets/image/C++QT_Image/image-20230622185231986.png" alt="image-20230622185231986"></p><p>æ”¹mainwindow.cppæ–‡ä»¶åŒ…å«çš„å¤´æ–‡ä»¶åœ°å€</p><p>å°†#include &quot;ui_MainWindow.h&quot;æ”¹ä¸º</p><p>â€‹#include â€œForms/ui_MainWindow.hâ€</p><p><img src="../assets/image/C++QT_Image/image-20230622185351011.png" alt="image-20230622185351011"></p><p>æ”¹main.cppæ–‡ä»¶ä¸­çš„å†…å®¹</p><p><img src="../assets/image/C++QT_Image/image-20230622185430456.png" alt="image-20230622185430456"></p><p>åœ¨è®¾ç½®ä¸­æ‰¾åˆ°å¤–éƒ¨å·¥å…·</p><p><img src="../assets/image/C++QT_Image/image-20230622185459076.png" alt="image-20230622185459076"></p><p>æ·»åŠ ç”¨äºç¼–å†™UIçš„designer.exe</p><p><img src="../assets/image/C++QT_Image/image-20230622185532722.png" alt="image-20230622185532722"></p><p>ä¹‹åå°±å¯ä»¥åœ¨clionçš„å³é”®èœå•ä¸­ç›´æ¥ä½¿ç”¨</p><p><img src="../assets/image/C++QT_Image/image-20230622185602055.png" alt="image-20230622185602055"></p><h2 id="æ·»åŠ é¢å¤–å¤´æ–‡ä»¶">æ·»åŠ é¢å¤–å¤´æ–‡ä»¶</h2><p>ä¾‹å¦‚è¦æ·»åŠ Networkç›¸å…³çš„åº“</p><p>åœ¨CMakeLists.txtæ–‡ä»¶ä¸­</p><p>è¿™ä¸¤ä¸ªåœ°æ–¹æ·»åŠ Networkçš„æè¿°</p><p>ç„¶ååœ¨Clionä¸­ä½¿ç”¨#include <QNetworkAccessManager>æ—¶ä¸ä¼šæŠ¥é”™å¹¶ä¸”æœ‰ä»£ç æç¤ºï¼Œä½†æ˜¯è¿è¡Œè¿˜æ˜¯ä¼šé—ªé€€</p><p><img src="../assets/image/C++QT_Image/image-20230622190238095.png" alt="image-20230622190238095"></p><p><img src="../assets/image/C++QT_Image/image-20230622190246224.png" alt="image-20230622190246224"></p><p>è¿˜éœ€è¦å°†ä¸‹é¢è·¯å¾„ä¸­çš„æ–‡ä»¶å¤åˆ¶åˆ°cmake-build-debugæ–‡ä»¶å¤¹ä¸‹</p><p>D:\QT\6.2.4\mingw_64\bin\Qt6Network.dll</p><p><img src="../assets/image/C++QT_Image/image-20230622190424926.png" alt="image-20230622190424926"></p><h2 id="æ·»åŠ ä¿¡å·å’Œæ§½">æ·»åŠ ä¿¡å·å’Œæ§½</h2><p>åœ¨mainwindow.hæ–‡ä»¶ä¸­</p><p>åœ¨ç±»MainWindowä¸­</p><p>æ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_commitButton_clicked</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_cancelButton_clicked</span>()</span>;</span><br></pre></td></tr></table></figure><p>è¡¨ç¤ºç»™commitButtonç»„ä»¶æ·»åŠ clickedä¿¡å·</p><p>è¡¨ç¤ºç»™cancelButtonç»„ä»¶æ·»åŠ clickedä¿¡å·</p><p><img src="../assets/image/C++QT_Image/image-20230622191908562.png" alt="image-20230622191908562"></p><p>åœ¨æ–‡ä»¶mainwindow.cppæ–‡ä»¶ä¸­è¿›è¡Œå®ç°</p><p><img src="../assets/image/C++QT_Image/image-20230622192226007.png" alt="image-20230622192226007"></p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»QTç¼–ç¨‹çš„åŸºç¡€å†…å®¹ï¼Œå’ŒQTCreatorçš„åŸºæœ¬ä½¿ç”¨</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
    <category term="QT" scheme="https://momoao.github.io/tags/QT/"/>
    
  </entry>
  
  <entry>
    <title>C++åŸºç¡€</title>
    <link href="https://momoao.github.io/posts/202308241930.html"/>
    <id>https://momoao.github.io/posts/202308241930.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:42:33.829Z</updated>
    
    <content type="html"><![CDATA[<h1>C++åŸºç¡€</h1><h1>é›¶ç¢é—®é¢˜</h1><h2 id="æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«">æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼ŒæŒ‡é’ˆï¼ˆPointersï¼‰å’Œå¼•ç”¨ï¼ˆReferencesï¼‰éƒ½æ˜¯ç”¨äºå¤„ç†å†…å­˜å’Œå˜é‡çš„é‡è¦æ¦‚å¿µï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«ï¼š</p><ol><li><p>å†…å­˜åœ°å€ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå­˜å‚¨çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘æŸä¸ªå˜é‡æˆ–å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨æ˜¯æŸä¸ªå˜é‡æˆ–å¯¹è±¡çš„åˆ«åï¼Œæ²¡æœ‰è‡ªå·±çš„å†…å­˜åœ°å€ã€‚å®ƒä¸è¢«å¼•ç”¨çš„å˜é‡å…±äº«ç›¸åŒçš„å†…å­˜åœ°å€ã€‚</li></ul></li><li><p>åˆå§‹åŒ–ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆåœ¨å®šä¹‰æ—¶éœ€è¦æ˜¾å¼åœ°åˆå§‹åŒ–ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„å†…å­˜åœ°å€ï¼Œå¯ä»¥æ˜¯nullptrï¼ˆç©ºæŒ‡é’ˆï¼‰æˆ–è€…æŒ‡å‘æŸä¸ªå¯¹è±¡ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨åœ¨å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–ä¸ºä¸€ä¸ªå·²å­˜åœ¨çš„å˜é‡æˆ–å¯¹è±¡ï¼Œä¸”ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ä¸ºå¼•ç”¨å…¶ä»–å˜é‡ã€‚</li></ul></li><li><p>ç©ºå€¼ï¼ˆnullï¼‰ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆå¯ä»¥æ˜¯ç©ºæŒ‡é’ˆï¼ˆnullptrï¼‰ï¼Œå³ä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„å†…å­˜åœ°å€ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨å¿…é¡»å§‹ç»ˆå¼•ç”¨æŸä¸ªå·²å­˜åœ¨çš„å˜é‡æˆ–å¯¹è±¡ï¼Œä¸å­˜åœ¨ç©ºå¼•ç”¨çš„æ¦‚å¿µã€‚</li></ul></li><li><p>é‡å®šå‘ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆå¯ä»¥åœ¨è¿è¡Œæ—¶é‡æ–°æŒ‡å‘ä¸åŒçš„å˜é‡æˆ–å¯¹è±¡ã€‚</li><li>å¼•ç”¨ï¼šä¸€æ—¦å¼•ç”¨è¢«åˆå§‹åŒ–ï¼Œå®ƒå°†ä¸€ç›´å¼•ç”¨åŒä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡ï¼Œæ— æ³•æ”¹å˜å¼•ç”¨çš„ç›®æ ‡ã€‚</li></ul></li><li><p>ç©ºé—´å ç”¨ï¼š</p><ul><li>æŒ‡é’ˆï¼šæŒ‡é’ˆæœ¬èº«å æ®å†…å­˜ç©ºé—´ï¼ˆé€šå¸¸æ˜¯4ä¸ªå­—èŠ‚æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºç³»ç»Ÿï¼‰ã€‚</li><li>å¼•ç”¨ï¼šå¼•ç”¨åœ¨å†…å­˜ä¸­ä¸å æ®é¢å¤–çš„ç©ºé—´ï¼Œå®ƒåªæ˜¯è¢«å¼•ç”¨å˜é‡çš„åˆ«åã€‚</li></ul></li><li><p>ç©ºé—´ç¬¦å·ï¼š</p><ul><li>æŒ‡é’ˆï¼šä½¿ç”¨<code>*</code>æ¥å£°æ˜æŒ‡é’ˆå˜é‡ï¼Œå¹¶ä½¿ç”¨<code>*</code>æ¥è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼ˆè§£å¼•ç”¨ï¼‰ã€‚</li><li>å¼•ç”¨ï¼šä½¿ç”¨<code>&amp;</code>æ¥å£°æ˜å¼•ç”¨ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¸éœ€è¦åŠ <code>&amp;</code>ç¬¦å·ï¼Œç›´æ¥ä½¿ç”¨å¼•ç”¨å³å¯ã€‚</li></ul></li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;x; <span class="comment">// æŒ‡é’ˆptræŒ‡å‘å˜é‡x</span></span><br><span class="line"><span class="type">int</span>&amp; ref = x;  <span class="comment">// å¼•ç”¨refæ˜¯å˜é‡xçš„åˆ«å</span></span><br><span class="line"></span><br><span class="line">*ptr = <span class="number">20</span>; <span class="comment">// ä¿®æ”¹æŒ‡é’ˆptræŒ‡å‘çš„å˜é‡çš„å€¼ï¼ˆxå˜ä¸º20ï¼‰</span></span><br><span class="line">ref = <span class="number">30</span>;  <span class="comment">// ä¿®æ”¹å¼•ç”¨refæ‰€å¼•ç”¨çš„å˜é‡çš„å€¼ï¼ˆxå˜ä¸º30ï¼‰</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š<br>æŒ‡é’ˆå’Œå¼•ç”¨åœ¨C++ä¸­éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒä»¬éƒ½ç”¨äºå¤„ç†å˜é‡å’Œå†…å­˜ã€‚é€‰æ‹©ä½¿ç”¨æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨å–å†³äºå…·ä½“çš„æƒ…å†µå’Œéœ€æ±‚ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦åœ¨è¿è¡Œæ—¶æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œæˆ–è€…éœ€è¦æ”¯æŒç©ºå€¼ï¼Œä½¿ç”¨æŒ‡é’ˆæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœä½ åªéœ€è¦åˆ«åæ¥ç®€åŒ–ä»£ç å¹¶ä¸”ä¸éœ€è¦é‡æ–°æŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œä½¿ç”¨å¼•ç”¨å¯èƒ½æ›´æ–¹ä¾¿å’Œå®‰å…¨ã€‚</p><h2 id="finalå’ŒconståŒºåˆ«">finalå’ŒconståŒºåˆ«</h2><p><code>final</code>å’Œ<code>const</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å…³é”®å­—ï¼Œç”¨äºä¸åŒçš„ç›®çš„å’Œåœºæ™¯ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>ç”¨é€”å’Œä½œç”¨ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»ï¼Œç”¨äºé™åˆ¶ç»§æ‰¿ã€å‡½æ•°é‡å†™å’Œç»§æ‰¿é“¾çš„æ‰©å±•æ€§ã€‚</li><li><code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡ã€æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ï¼Œä»¥åŠä¿®é¥°å‡½æ•°å‚æ•°å’Œæˆå‘˜å‡½æ•°ï¼Œç”¨äºæ§åˆ¶æ•°æ®çš„ä¸å¯ä¿®æ”¹æ€§ã€‚</li></ul></li><li><p>åº”ç”¨èŒƒå›´ï¼š</p><ul><li><code>final</code>å…³é”®å­—é€‚ç”¨äºç±»çš„å£°æ˜ã€è™šå‡½æ•°çš„å£°æ˜å’Œæ´¾ç”Ÿç±»çš„å£°æ˜ã€‚</li><li><code>const</code>å…³é”®å­—é€‚ç”¨äºå˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹å’Œæˆå‘˜å‡½æ•°ã€‚</li></ul></li><li><p>ä¿®æ”¹é™åˆ¶ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºç¦æ­¢ç±»è¢«ç»§æ‰¿ã€è™šå‡½æ•°è¢«é‡å†™å’Œæ´¾ç”Ÿç±»çš„è¿›ä¸€æ­¥æ´¾ç”Ÿã€‚</li><li><code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡æˆ–æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ï¼Œä¸èƒ½ä¿®æ”¹è¢«å£°æ˜ä¸º<code>const</code>çš„å¯¹è±¡ã€‚</li></ul></li><li><p>ä½œç”¨äºå¯¹è±¡ï¼š</p><ul><li><code>final</code>å…³é”®å­—ä½œç”¨äºç±»å’Œå‡½æ•°ï¼Œç”¨äºé™åˆ¶å…¶å¯ç»§æ‰¿æ€§å’Œé‡å†™æ€§ã€‚</li><li><code>const</code>å…³é”®å­—ä½œç”¨äºå˜é‡å’Œå‡½æ•°ï¼Œç”¨äºå£°æ˜å¸¸é‡ã€æŒ‡ç¤ºåªè¯»æ€§ä»¥åŠé™åˆ¶å¯¹è¢«ä¿®é¥°å¯¹è±¡çš„ä¿®æ”¹ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼Œ<code>final</code>å…³é”®å­—ç”¨äºé™åˆ¶ç»§æ‰¿å’Œå‡½æ•°é‡å†™çš„æ‰©å±•æ€§ï¼Œè€Œ<code>const</code>å…³é”®å­—ç”¨äºå£°æ˜å¸¸é‡å’ŒæŒ‡ç¤ºå¯¹è±¡çš„åªè¯»æ€§ã€‚å®ƒä»¬åœ¨ç”¨é€”ã€åº”ç”¨èŒƒå›´å’Œä½œç”¨äºå¯¹è±¡ä¸Šéƒ½æœ‰æ˜æ˜¾çš„å·®å¼‚ã€‚</p><h2 id="ä½¿ç”¨-å’Œ-çš„åŒºåˆ«">ä½¿ç”¨ .å’Œ-&gt;çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼Œä½¿ç”¨<code>.</code>å’Œ<code>-&gt;</code>æ˜¯ç”¨äºè®¿é—®æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æˆå‘˜çš„ä¸¤ç§æ–¹å¼ã€‚</p><ol><li><p>ç‚¹æ“ä½œç¬¦ï¼ˆ.ï¼‰ï¼šç‚¹æ“ä½œç¬¦ç”¨äºç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œå®ƒåªèƒ½ç”¨äºå¯¹è±¡æœ¬èº«ï¼Œè€Œä¸èƒ½ç”¨äºæŒ‡é’ˆã€‚å¦‚æœè¦ä½¿ç”¨ç‚¹æ“ä½œç¬¦ï¼Œéœ€è¦å°†æŒ‡é’ˆè§£å¼•ç”¨ä¸ºå¯¹è±¡ã€‚</p></li><li><p>ç®­å¤´æ“ä½œç¬¦ï¼ˆ-&gt;ï¼‰ï¼šç®­å¤´æ“ä½œç¬¦ç”¨äºé€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œå®ƒæ˜¯æŒ‡é’ˆç‰¹æœ‰çš„æ“ä½œç¬¦ã€‚ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦æ—¶ï¼Œä¸éœ€è¦å°†æŒ‡é’ˆè§£å¼•ç”¨ä¸ºå¯¹è±¡ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†<code>.</code>å’Œ<code>-&gt;</code>çš„åŒºåˆ«ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj;</span><br><span class="line">    obj.value = <span class="number">42</span>;</span><br><span class="line">    obj.<span class="built_in">printValue</span>();      <span class="comment">// ä½¿ç”¨ç‚¹æ“ä½œç¬¦ç›´æ¥è®¿é—®å¯¹è±¡æˆå‘˜ï¼Œè¾“å‡º: Value: 42</span></span><br><span class="line"></span><br><span class="line">    MyClass* ptr = &amp;obj;</span><br><span class="line">    ptr-&gt;value = <span class="number">24</span>;</span><br><span class="line">    ptr-&gt;<span class="built_in">printValue</span>();     <span class="comment">// ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡æˆå‘˜ï¼Œè¾“å‡º: Value: 24</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>MyClass</code>ç±»ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ•´å‹æˆå‘˜å˜é‡<code>value</code>å’Œä¸€ä¸ªæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>MyClass</code>å¯¹è±¡<code>obj</code>ï¼Œå¹¶é€šè¿‡ç‚¹æ“ä½œç¬¦ç›´æ¥è®¿é—®äº†å¯¹è±¡çš„æˆå‘˜å˜é‡<code>value</code>å’Œæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘<code>obj</code>çš„æŒ‡é’ˆ<code>ptr</code>ï¼Œå¹¶ä½¿ç”¨ç®­å¤´æ“ä½œç¬¦é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®äº†å¯¹è±¡çš„æˆå‘˜å˜é‡<code>value</code>å’Œæˆå‘˜å‡½æ•°<code>printValue()</code>ã€‚æ³¨æ„ï¼Œä½¿ç”¨ç®­å¤´æ“ä½œç¬¦æ—¶ï¼Œä¸éœ€è¦è§£å¼•ç”¨æŒ‡é’ˆã€‚</p><p>æ€»ç»“èµ·æ¥ï¼š</p><ul><li>ä½¿ç”¨<code>.</code>æ“ä½œç¬¦ç”¨äºç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œéœ€è¦å¯¹è±¡æœ¬èº«è€Œä¸æ˜¯æŒ‡é’ˆã€‚</li><li>ä½¿ç”¨<code>-&gt;</code>æ“ä½œç¬¦ç”¨äºé€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜ï¼Œä¸éœ€è¦è§£å¼•ç”¨æŒ‡é’ˆã€‚</li></ul><h2 id="ä¸ºä»€ä¹ˆè¯´-bits-stdc-h-æ˜¯ä¸‡èƒ½å¤´æ–‡ä»¶">ä¸ºä»€ä¹ˆè¯´&lt;bits/stdc++.h&gt;æ˜¯ä¸‡èƒ½å¤´æ–‡ä»¶</h2><p>åœ¨C++ç¼–ç¨‹ä¸­ï¼Œ<code>&lt;bits/stdc++.h&gt;</code>æ˜¯ä¸€ä¸ªéæ ‡å‡†å¤´æ–‡ä»¶ï¼Œå®ƒé€šå¸¸è¢«ç”¨äºç«èµ›ç¼–ç¨‹å’Œå¿«é€ŸåŸå‹å¼€å‘ï¼Œè¢«è®¤ä¸ºæ˜¯&quot;ä¸‡èƒ½å¤´æ–‡ä»¶&quot;ã€‚è¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«äº†å¤§é‡å¸¸ç”¨çš„æ ‡å‡†C++åº“çš„å…¶ä»–å¤´æ–‡ä»¶ï¼Œå› æ­¤åœ¨ä½¿ç”¨å®ƒä¹‹åï¼Œå°±ä¸éœ€è¦ä¸ºæ¯ä¸ªæ ‡å‡†åº“å¼•å…¥å•ç‹¬çš„å¤´æ–‡ä»¶äº†ã€‚</p><p>ä½¿ç”¨<code>&lt;bits/stdc++.h&gt;</code>å¤´æ–‡ä»¶çš„å¥½å¤„æ˜¯å®ƒç®€åŒ–äº†ä»£ç çš„ç¼–å†™ï¼Œå› ä¸ºåªéœ€è¦åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶å³å¯ä½¿ç”¨å¤§éƒ¨åˆ†æ ‡å‡†åº“çš„åŠŸèƒ½ï¼Œä¸éœ€è¦è€ƒè™‘å…·ä½“çš„å¤´æ–‡ä»¶è·¯å¾„å’Œå¼•å…¥é¡ºåºã€‚è¿™åœ¨ç«èµ›ç¼–ç¨‹ä¸­å°¤ä¸ºæ–¹ä¾¿ï¼Œå› ä¸ºå¯ä»¥èŠ‚çœç¼–å†™å’Œè°ƒè¯•ä»£ç æ‰€éœ€çš„æ—¶é—´ã€‚</p><p>ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>&lt;bits/stdc++.h&gt;</code>ä¸æ˜¯æ ‡å‡†C++çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒåªæ˜¯æŸäº›ç¼–è¯‘å™¨ï¼ˆå¦‚GCCå’ŒMinGWï¼‰çš„æ‰©å±•ã€‚å› æ­¤ï¼Œåœ¨ä¸€äº›ç‰¹å®šçš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå¯èƒ½æ— æ³•ä½¿ç”¨è¿™ä¸ªå¤´æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå®ƒåŒ…å«äº†å¤§é‡æ ‡å‡†åº“çš„å†…å®¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é—´å¢åŠ ï¼Œå› æ­¤åœ¨å¤§å‹é¡¹ç›®æˆ–éœ€è¦ç²¾ç»†æ§åˆ¶çš„åœºæ™¯ä¸­ï¼Œæœ€å¥½ä½¿ç”¨å…·ä½“çš„æ ‡å‡†åº“å¤´æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¾èµ–äº<code>&lt;bits/stdc++.h&gt;</code>ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œå°½ç®¡<code>&lt;bits/stdc++.h&gt;</code>å¤´æ–‡ä»¶æ–¹ä¾¿ç¼–å†™å¿«é€ŸåŸå‹å’Œç«èµ›ä»£ç ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨ç²¾ç¡®çš„æ ‡å‡†åº“å¤´æ–‡ä»¶æ¥ä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="ä¸­å¸¸é‡å’Œé™æ€å˜é‡çš„åŒºåˆ«">ä¸­å¸¸é‡å’Œé™æ€å˜é‡çš„åŒºåˆ«</h2><p>åœ¨C++ä¸­ï¼Œå¸¸é‡å’Œé™æ€å˜é‡æ˜¯ä¸¤ç§ä¸åŒçš„æ¦‚å¿µã€‚</p><ol><li><p>å¸¸é‡ï¼ˆConstantsï¼‰ï¼š</p><ul><li>å¸¸é‡æ˜¯æŒ‡åœ¨ç¨‹åºä¸­å£°æ˜çš„å›ºå®šå€¼ï¼Œå…¶å€¼åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯æ”¹å˜ã€‚</li><li>å¸¸é‡å¯ä»¥ä½¿ç”¨<code>const</code>å…³é”®å­—å£°æ˜ï¼Œå¹¶ä¸”å¿…é¡»åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>å¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ç¨‹åºè¿è¡Œæ—¶ä¿®æ”¹ã€‚</li><li>å¸¸é‡åœ¨å†…å­˜ä¸­é€šå¸¸è¢«è§†ä¸ºå­—é¢å€¼ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¢«ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_VALUE = <span class="number">100</span>;</span><br></pre></td></tr></table></figure></li><li><p>é™æ€å˜é‡ï¼ˆStatic Variablesï¼‰ï¼š</p><ul><li>é™æ€å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°å†…éƒ¨æˆ–è€…ç±»çš„æˆå‘˜å˜é‡ä¸­å£°æ˜çš„å˜é‡ï¼Œåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¿æŒå…¶å€¼ä¸å˜ã€‚</li><li>é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼Œè¢«æ‰€æœ‰å¯¹è±¡æˆ–è€…å‡½æ•°æ‰€å…±äº«ã€‚</li><li>é™æ€å˜é‡åœ¨å‡½æ•°å†…éƒ¨æ—¶ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è°ƒç”¨ç»“æŸåä¸ä¼šè¢«é”€æ¯ã€‚</li><li>é™æ€æˆå‘˜å˜é‡åœ¨ç±»ä¸­æ—¶ï¼Œå¯ä»¥é€šè¿‡ç±»åå’Œä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ¥è®¿é—®ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">  count++;</span><br><span class="line">  cout &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> instanceCount;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> MyClass::instanceCount = <span class="number">0</span>;</span><br></pre></td></tr></table></figure></li></ol><p>æ€»ç»“ï¼š<br>å¸¸é‡æ˜¯æŒ‡åœ¨ç¨‹åºä¸­å£°æ˜çš„å›ºå®šå€¼ï¼Œå…¶å€¼åœ¨æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯æ”¹å˜ã€‚è€Œé™æ€å˜é‡æ˜¯åœ¨å‡½æ•°æˆ–ç±»ä¸­å£°æ˜çš„å˜é‡ï¼Œå®ƒä»¬çš„å€¼åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¿æŒä¸å˜ã€‚å¸¸é‡åœ¨å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œè€Œé™æ€å˜é‡å¯ä»¥åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œèµ‹å€¼ã€‚å¸¸é‡åœ¨å†…å­˜ä¸­é€šå¸¸è¢«è§†ä¸ºå­—é¢å€¼ï¼Œè€Œé™æ€å˜é‡åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½æ‹·è´ã€‚</p><h2 id="ä¸ºä»€ä¹ˆå¸¸é‡å¼•ç”¨å°±å¯ä»¥èµ‹æ™®é€šæ•°å€¼">ä¸ºä»€ä¹ˆå¸¸é‡å¼•ç”¨å°±å¯ä»¥èµ‹æ™®é€šæ•°å€¼</h2><p>åœ¨C++ä¸­ï¼Œå¸¸é‡å¼•ç”¨å¯ä»¥ç»‘å®šåˆ°æ™®é€šæ•°å€¼ï¼Œæ˜¯å› ä¸ºç¼–è¯‘å™¨ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚</p><p>å½“ä¸€ä¸ªå¸¸é‡å¼•ç”¨è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªæ™®é€šæ•°å€¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå°†æ™®é€šæ•°å€¼è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶çš„åŒ¿åå¸¸é‡ã€‚è¿™ä¸ªåŒ¿åå¸¸é‡ä¸åŸå§‹çš„æ™®é€šæ•°å€¼å…·æœ‰ç›¸åŒçš„å€¼ï¼Œä½†æ˜¯å®ƒè¢«è§†ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå› æ­¤å¯ä»¥ç»‘å®šåˆ°å¸¸é‡å¼•ç”¨ã€‚</p><p>è¿™ç§éšå¼ç±»å‹è½¬æ¢åœ¨ç¼–è¯‘å™¨å±‚é¢è¿›è¡Œï¼Œå¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢æ“ä½œã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—å¸¸é‡å¼•ç”¨èƒ½å¤Ÿæ›´çµæ´»åœ°ä¸æ™®é€šæ•°å€¼è¿›è¡Œäº¤äº’ï¼ŒåŒæ—¶ä¿æŒäº†å¯¹å¸¸é‡çš„é™åˆ¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼çš„æƒ…å†µï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; value)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; value &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line">    <span class="built_in">printValue</span>(number);  <span class="comment">// å¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>printValue</code>å‡½æ•°æ¥å—ä¸€ä¸ªå¸¸é‡å¼•ç”¨å‚æ•°ï¼Œç„¶åæ‰“å°è¯¥å€¼ã€‚åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ™®é€šæ•°å€¼<code>number</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>printValue</code>å‡½æ•°ã€‚ç¼–è¯‘å™¨ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œå°†æ™®é€šæ•°å€¼<code>number</code>è½¬æ¢ä¸ºä¸€ä¸ªåŒ¿åå¸¸é‡ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°å‡½æ•°ä¸­çš„å¸¸é‡å¼•ç”¨å‚æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§éšå¼ç±»å‹è½¬æ¢åªé€‚ç”¨äºå¸¸é‡å¼•ç”¨ï¼Œè€Œä¸èƒ½ç›´æ¥åº”ç”¨äºéå¸¸é‡å¼•ç”¨ã€‚å¦‚æœå°è¯•å°†ä¸€ä¸ªéå¸¸é‡å¼•ç”¨ç»‘å®šåˆ°æ™®é€šæ•°å€¼ï¼Œåˆ™ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ã€‚</p><h2 id="c-ç‰ˆæœ¬">c++ç‰ˆæœ¬</h2><p>C++98æ˜¯C++è¯­è¨€çš„ç¬¬ä¸€ä¸ªæ ‡å‡†åŒ–ç‰ˆæœ¬ï¼Œäº1998å¹´å‘å¸ƒã€‚åœ¨C++98ä¹‹åï¼Œè¿˜å‘å¸ƒäº†å‡ ä¸ªC++æ ‡å‡†ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½å¼•å…¥äº†æ–°çš„ç‰¹æ€§å’Œè¯­è¨€æ”¹è¿›ã€‚ä»¥ä¸‹æ˜¯C++98ä¹‹åçš„ä¸€äº›é‡è¦ç‰ˆæœ¬åŠå…¶ä¸»è¦ç‰¹æ€§ï¼š</p><ol><li><p>C++03ï¼ˆC++98ä¿®æ­£ç‰ˆï¼‰ï¼š</p><ul><li>C++03äº2003å¹´å‘å¸ƒï¼Œæ˜¯å¯¹C++98æ ‡å‡†çš„ä¸€äº›å°ä¿®æ­£å’Œæ”¹è¿›ã€‚</li><li>ä¸»è¦ä¿®æ­£äº†ä¸€äº›è¯­è¨€å’Œåº“çš„ç¼ºé™·ï¼Œæä¾›äº†æ›´å¥½çš„å…¼å®¹æ€§å’Œç¨³å®šæ€§ã€‚</li></ul></li><li><p>C++11ï¼ˆC++0xï¼‰ï¼š</p><ul><li>C++11äº2011å¹´å‘å¸ƒï¼Œæ˜¯C++æ ‡å‡†çš„é‡å¤§æ›´æ–°ã€‚</li><li>å¼•å…¥äº†è®¸å¤šæ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå¦‚è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼ˆautoå…³é”®å­—ï¼‰ã€ç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•ï¼ˆåˆå§‹åŒ–åˆ—è¡¨å’ŒèŠ±æ‹¬å·åˆå§‹åŒ–ï¼‰ã€lambdaè¡¨è¾¾å¼ã€å³å€¼å¼•ç”¨ï¼ˆç§»åŠ¨è¯­ä¹‰ï¼‰ã€æ™ºèƒ½æŒ‡é’ˆã€èŒƒå›´-based forå¾ªç¯ç­‰ã€‚</li><li>æ·»åŠ äº†ä¸€äº›æ ‡å‡†åº“ç»„ä»¶ï¼Œå¦‚std::threadï¼ˆå¤šçº¿ç¨‹ç¼–ç¨‹ï¼‰ã€std::regexï¼ˆæ­£åˆ™è¡¨è¾¾å¼åº“ï¼‰ã€std::chronoï¼ˆæ—¶é—´å’Œæ—¶é’Ÿåº“ï¼‰ç­‰ã€‚</li><li>å¼•å…¥äº†å¼‚å¸¸è§„èŒƒçš„æ”¹è¿›å’Œæ–°çš„å…³é”®å­—ï¼ˆä¾‹å¦‚noexceptå’Œconstexprï¼‰ã€‚</li></ul></li><li><p>C++14ï¼š</p><ul><li>C++14äº2014å¹´å‘å¸ƒï¼Œæ˜¯å¯¹C++11çš„ä¸€äº›å°æ”¹è¿›å’Œæ‰©å±•ã€‚</li><li>æ”¹è¿›äº†ç±»å‹æ¨å¯¼è§„åˆ™ï¼Œç®€åŒ–äº†ä»£ç ä¹¦å†™ã€‚</li><li>å¢åŠ äº†äºŒè¿›åˆ¶å­—é¢å€¼ã€é€šç”¨çš„lambdaæ•è·åˆå§‹åŒ–ã€è¿”å›ç±»å‹æ¨å¯¼ã€constexprå‡½æ•°çš„æ”¾å®½ç­‰æ–°ç‰¹æ€§ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::make_uniqueï¼ˆæ™ºèƒ½æŒ‡é’ˆçš„å¢å¼ºç‰ˆï¼‰ã€std::user-defined literalsï¼ˆè‡ªå®šä¹‰å­—é¢å€¼ï¼‰ç­‰ã€‚</li></ul></li><li><p>C++17ï¼š</p><ul><li>C++17äº2017å¹´å‘å¸ƒï¼Œå¼•å…¥äº†ä¸€äº›é‡è¦çš„æ–°åŠŸèƒ½ã€‚</li><li>å¢åŠ äº†ç»“æ„åŒ–ç»‘å®šï¼ˆstructured bindingsï¼‰ã€ifè¯­å¥ä¸­çš„åˆå§‹åŒ–ã€æŠ˜å è¡¨è¾¾å¼ï¼ˆfold expressionsï¼‰ç­‰è¯­è¨€ç‰¹æ€§ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::optionalï¼ˆå¯é€‰å€¼ï¼‰ã€std::variantï¼ˆå˜ä½“ç±»å‹ï¼‰ã€std::anyï¼ˆç±»å‹å®‰å…¨çš„ä»»æ„ç±»å‹å®¹å™¨ï¼‰ç­‰ã€‚</li></ul></li><li><p>C++20ï¼š</p><ul><li>C++20äº2020å¹´å‘å¸ƒï¼Œæ˜¯ä¸€ä¸ªè¾ƒå¤§çš„æ ‡å‡†æ›´æ–°ã€‚</li><li>å¼•å…¥äº†ä¸€äº›æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œå¦‚æ¦‚å¿µï¼ˆConceptsï¼‰ã€åç¨‹ï¼ˆCoroutinesï¼‰ã€ä¸‰æ–¹è¿ç®—ç¬¦ï¼ˆThree-Way Comparisonï¼‰ç­‰ã€‚</li><li>æ‰©å±•äº†æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬std::spanï¼ˆè·¨åº¦ç±»å‹ï¼‰ã€std::rangesï¼ˆèŒƒå›´åº“ï¼‰ã€std::formatï¼ˆæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰ç­‰ã€‚</li></ul></li></ol><p>æ¯ä¸ªC++æ ‡å‡†ç‰ˆæœ¬éƒ½å¸¦æ¥äº†æ–°çš„è¯­è¨€ç‰¹æ€§å’Œåº“æ‰©å±•ï¼Œä»¥æä¾›æ›´å¥½çš„ç¼–ç¨‹ä½“éªŒå’Œæ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚å¼€å‘è€…å¯ä»¥æ ¹æ®ç›®æ ‡å¹³å°å’Œ</p><h2 id="CMakeæ˜¯ä»€ä¹ˆ">CMakeæ˜¯ä»€ä¹ˆ</h2><p>CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºæ„å»ºå·¥å…·ï¼Œç”¨äºç®¡ç†è½¯ä»¶é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚å®ƒå¯ä»¥ç”Ÿæˆé€‚ç”¨äºä¸åŒç¼–è¯‘å™¨å’Œæ“ä½œç³»ç»Ÿçš„æ„å»ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚Makefileã€Visual Studioé¡¹ç›®æ–‡ä»¶ç­‰ï¼‰ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨ä¸åŒçš„å¹³å°ä¸Šæ–¹ä¾¿åœ°æ„å»ºå’Œç®¡ç†é¡¹ç›®ã€‚</p><p>CMakeçš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€åŒ–å’Œæ ‡å‡†åŒ–çš„æ„å»ºç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°è·¨å¹³å°å¼€å‘å’Œæ„å»ºè½¯ä»¶ã€‚å®ƒä½¿ç”¨ä¸€ç§å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™CMakeLists.txtæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†æ„å»ºé…ç½®å’Œè§„åˆ™ã€‚</p><p>CMakeå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li><p>è·¨å¹³å°æ”¯æŒï¼šCMakeå¯ä»¥åœ¨å„ç§æ“ä½œç³»ç»Ÿä¸Šå·¥ä½œï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxç­‰ï¼Œä»¥åŠå¤šç§ç¼–è¯‘å™¨å’Œæ„å»ºå·¥å…·ã€‚</p></li><li><p>ç®€åŒ–çš„è¯­æ³•ï¼šCMakeä½¿ç”¨ä¸€ç§ç®€åŒ–çš„å£°æ˜å¼è¯­æ³•ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–å†™CMakeLists.txtæ–‡ä»¶æ¥æè¿°é¡¹ç›®çš„æ„å»ºè§„åˆ™ï¼ŒåŒ…æ‹¬æºæ–‡ä»¶ã€ç¼–è¯‘é€‰é¡¹ã€é“¾æ¥åº“ç­‰ã€‚</p></li><li><p>è‡ªåŠ¨æ£€æµ‹ä¾èµ–ï¼šCMakeèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹é¡¹ç›®æ‰€ä¾èµ–çš„å¤–éƒ¨åº“å’Œç»„ä»¶ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ„å»ºé…ç½®ï¼Œä»¥ç¡®ä¿æ„å»ºè¿‡ç¨‹ä¸­çš„ä¾èµ–å…³ç³»å¾—åˆ°æ»¡è¶³ã€‚</p></li><li><p>å¤šç§æ„å»ºç³»ç»Ÿæ”¯æŒï¼šCMakeå¯ä»¥ç”Ÿæˆå„ç§å¸¸è§çš„æ„å»ºç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œå¦‚Makefileã€Ninjaã€Visual Studioé¡¹ç›®æ–‡ä»¶ç­‰ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥é€‰æ‹©ä»–ä»¬ç†Ÿæ‚‰çš„æ„å»ºå·¥å…·è¿›è¡Œé¡¹ç›®æ„å»ºã€‚</p></li><li><p>åµŒå¥—é¡¹ç›®æ”¯æŒï¼šCMakeæ”¯æŒç®¡ç†å’Œæ„å»ºå¤šä¸ªåµŒå¥—çš„å­é¡¹ç›®ï¼Œä½¿å¾—å¤§å‹é¡¹ç›®å¯ä»¥è¢«åˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—ï¼Œå¹¶æ–¹ä¾¿åœ°è¿›è¡Œç»„ç»‡å’Œæ„å»ºã€‚</p></li></ol><p>ä½¿ç”¨CMakeï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œç›®æ ‡å¹³å°ï¼Œç¼–å†™CMakeLists.txtæ–‡ä»¶æ¥å®šä¹‰é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚ç„¶åï¼Œé€šè¿‡è¿è¡ŒCMakeå‘½ä»¤æ¥ç”Ÿæˆé€‚åˆäºä¸åŒå¹³å°å’Œç¼–è¯‘å™¨çš„æ„å»ºé…ç½®æ–‡ä»¶ï¼Œæœ€åä½¿ç”¨ç›¸åº”çš„æ„å»ºå·¥å…·è¿›è¡Œé¡¹ç›®æ„å»ºã€‚</p><p>æ€»ç»“èµ·æ¥ï¼ŒCMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºæ„å»ºå·¥å…·ï¼Œç”¨äºç®¡ç†è½¯ä»¶é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€åŒ–å’Œæ ‡å‡†åŒ–çš„æ„å»ºç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°è·¨å¹³å°å¼€å‘å’Œæ„å»ºè½¯ä»¶ã€‚</p><h2 id="å¤´æ–‡ä»¶æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤">å¤´æ–‡ä»¶æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">//EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</span></span></span><br><span class="line">ä»€ä¹ˆæ„æ€</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯C++ä¸­çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ§åˆ¶å¤´æ–‡ä»¶çš„åŒ…å«ã€‚ä¸‹é¢è§£é‡Šæ¯ä¸€è¡Œçš„å«ä¹‰ï¼š</p><ol><li><p><code>#ifndef EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤çš„å¼€å§‹éƒ¨åˆ†ã€‚<code>#ifndef</code>è¡¨ç¤º&quot;if not defined&quot;ï¼Œå³å¦‚æœ<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>æœªå®šä¹‰ï¼Œæ‰§è¡Œåç»­æ“ä½œã€‚</p></li><li><p><code>#define EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯å®å®šä¹‰æŒ‡ä»¤ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªåä¸º<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>çš„å®ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºéé›¶å€¼ã€‚è¿™ä¸ªå®çš„ä½œç”¨æ˜¯ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼Œåç»­å¯ä»¥æ ¹æ®è¿™ä¸ªå®æ˜¯å¦è¢«å®šä¹‰æ¥æ‰§è¡Œä¸åŒçš„ä»£ç ã€‚</p></li><li><p><code>#endif //EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>ï¼šè¿™æ˜¯æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤çš„ç»“æŸéƒ¨åˆ†ã€‚<code>#endif</code>è¡¨ç¤ºç»“æŸæ¡ä»¶ç¼–è¯‘å—ï¼Œæ­¤å¤„æ˜¯ä¸<code>#ifndef</code>å¯¹åº”çš„ç»“æŸã€‚<code>//EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>æ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œç”¨äºæä¾›å¯¹<code>#ifndef</code>çš„æ ‡è¯†è¯´æ˜ã€‚</p></li></ol><p>æ•´ä¸ªä»£ç çš„ä½œç”¨æ˜¯ï¼Œå½“<code>EMPLOYEEMANAGEMENTSYSTEM_STUDENT_H</code>å®æœªå®šä¹‰æ—¶ï¼Œæ‰§è¡Œåç»­çš„ä»£ç ï¼Œå³å°†å¤´æ–‡ä»¶çš„å†…å®¹åŒ…å«åœ¨æ¡ä»¶ç¼–è¯‘å—ä¸­ã€‚è¿™æ ·å¯ä»¥é¿å…é‡å¤åŒ…å«å¤´æ–‡ä»¶ï¼Œé˜²æ­¢å¤šé‡å®šä¹‰é”™è¯¯ã€‚</p><p>å¸¸è§çš„åšæ³•æ˜¯å°†è¿™æ ·çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æ”¾åœ¨å¤´æ–‡ä»¶çš„å¼€å¤´å’Œç»“å°¾ï¼Œä»¥ç¡®ä¿å¤´æ–‡ä»¶åªè¢«ç¼–è¯‘ä¸€æ¬¡ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢åœ¨å¤šä¸ªæºæ–‡ä»¶ä¸­åŒ…å«åŒä¸€ä¸ªå¤´æ–‡ä»¶æ—¶å‡ºç°é‡å¤å®šä¹‰çš„é—®é¢˜ã€‚</p><h2 id="Clang-Tidy-Function-â€˜getIdâ€™-should-be-marked-nodiscard">Clang-Tidy: Function â€˜getIdâ€™ should be marked [[nodiscard]]</h2><p>è¿™ä¸ªæç¤ºæ¥è‡ªäºClang-Tidyï¼Œå®ƒå»ºè®®åœ¨å‡½æ•°<code>getId</code>ä¸Šæ·»åŠ <code>[[nodiscard]]</code>å±æ€§ã€‚</p><p><code>[[nodiscard]]</code>æ˜¯C++17å¼•å…¥çš„ä¸€ç§å±æ€§ï¼Œç”¨äºæŒ‡ç¤ºå‡½æ•°çš„è¿”å›å€¼åº”è¯¥è¢«ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è¢«å¿½ç•¥ã€‚å½“å‡½æ•°è¢«æ ‡è®°ä¸º<code>[[nodiscard]]</code>æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å‡½æ•°è¿”å›å€¼æ²¡æœ‰è¢«ä½¿ç”¨æ—¶äº§ç”Ÿè­¦å‘Šã€‚</p><p>åœ¨ä½ çš„æƒ…å†µä¸‹ï¼ŒClang-Tidyå»ºè®®åœ¨<code>getId</code>å‡½æ•°ä¸Šæ·»åŠ <code>[[nodiscard]]</code>å±æ€§ï¼Œè¿™æ„å‘³ç€è°ƒç”¨è¯¥å‡½æ•°ååº”è¯¥ä½¿ç”¨å…¶è¿”å›å€¼ã€‚å¦‚æœå¿½ç•¥äº†è¯¥è¿”å›å€¼ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼Œæé†’å¼€å‘è€…æ£€æŸ¥å’Œå¤„ç†å‡½æ•°çš„è¿”å›å€¼ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªè­¦å‘Šï¼Œä½ å¯ä»¥æŒ‰ç…§å»ºè®®åœ¨<code>getId</code>å‡½æ•°å£°æ˜æˆ–å®šä¹‰çš„åœ°æ–¹æ·»åŠ <code>[[nodiscard]]</code>å±æ€§ï¼Œä»¥æ˜ç¡®è¡¨ç¤ºè¯¥å‡½æ•°çš„è¿”å›å€¼åº”è¯¥è¢«ä½¿ç”¨ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[nodiscard]] <span class="function"><span class="type">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123; ... &#125;  <span class="comment">// å‡½æ•°å£°æ˜æˆ–å®šä¹‰å¤„æ·»åŠ [[nodiscard]]å±æ€§</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡éµå¾ªè¿™ä¸ªæç¤ºï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¥å£®æ€§ï¼Œé˜²æ­¢å› ä¸ºæœªä½¿ç”¨å‡½æ•°è¿”å›å€¼è€Œå¯¼è‡´çš„æ½œåœ¨é”™è¯¯ã€‚</p><h2 id="Clang-Tidyæ˜¯ä»€ä¹ˆ">Clang-Tidyæ˜¯ä»€ä¹ˆ</h2><p>Clang-Tidyæ˜¯ä¸€ä¸ªé™æ€ä»£ç åˆ†æå·¥å…·ï¼Œç”¨äºæ£€æŸ¥å’Œæ”¹è¿›C++ä»£ç çš„è´¨é‡ã€‚å®ƒæ˜¯åŸºäºLLVM/Clangé¡¹ç›®å¼€å‘çš„ï¼Œå¯ä»¥é€šè¿‡å¯¹C++ä»£ç è¿›è¡Œé™æ€åˆ†æå’Œè§„åˆ™æ£€æŸ¥ï¼Œæä¾›æœ‰å…³ä»£ç æ½œåœ¨é—®é¢˜å’Œæ”¹è¿›å»ºè®®çš„è­¦å‘Šå’Œå»ºè®®ã€‚</p><p>Clang-Tidyä½¿ç”¨Clangç¼–è¯‘å™¨çš„è¯æ³•å’Œè¯­æ³•åˆ†æåŠŸèƒ½ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œä»¥è¯†åˆ«æ½œåœ¨çš„é”™è¯¯ã€ä½æ•ˆçš„ä»£ç ã€ä¸è§„èŒƒçš„ç¼–ç é£æ ¼ä»¥åŠå…¶ä»–å¯èƒ½å½±å“ä»£ç è´¨é‡å’Œæ€§èƒ½çš„é—®é¢˜ã€‚å®ƒåŸºäºä¸€ç»„é¢„å®šä¹‰çš„è§„åˆ™ï¼ˆæ£€æŸ¥å™¨ï¼‰æ‰§è¡Œé™æ€ä»£ç åˆ†æï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„è­¦å‘Šå’Œå»ºè®®ã€‚</p><p>Clang-Tidyçš„ä¸€äº›ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>ä¸°å¯Œçš„æ£€æŸ¥å™¨é›†åˆï¼šClang-Tidyæä¾›äº†å¤šä¸ªå†…ç½®çš„æ£€æŸ¥å™¨ï¼Œè¦†ç›–äº†å„ç§ä»£ç é—®é¢˜ï¼Œå¦‚æ½œåœ¨çš„é”™è¯¯ã€ä»£ç é£æ ¼è¿è§„ã€æ€§èƒ½é—®é¢˜ç­‰ã€‚æ¯ä¸ªæ£€æŸ¥å™¨éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è§„åˆ™é›†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¯ç”¨æˆ–ç¦ç”¨ã€‚</p></li><li><p>å¯é…ç½®æ€§ï¼šClang-Tidyå…è®¸ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤è¡Œé€‰é¡¹è‡ªå®šä¹‰æ£€æŸ¥å™¨çš„è¡Œä¸ºã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„æ£€æŸ¥å™¨ã€è°ƒæ•´è­¦å‘Šçº§åˆ«ï¼Œå¹¶æä¾›è‡ªå®šä¹‰è§„åˆ™å’Œæ‰©å±•ã€‚</p></li><li><p>é›†æˆåˆ°æ„å»ºç³»ç»Ÿï¼šClang-Tidyå¯ä»¥ä¸å¸¸è§çš„æ„å»ºç³»ç»Ÿï¼ˆå¦‚CMakeå’ŒMakeï¼‰é›†æˆï¼Œé€šè¿‡æ„å»ºå·¥å…·è‡ªåŠ¨æ‰§è¡Œé™æ€åˆ†æï¼Œå¹¶å°†è­¦å‘Šå’Œå»ºè®®é›†æˆåˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚</p></li><li><p>è‡ªåŠ¨ä¿®å¤ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒClang-Tidyå¯ä»¥è‡ªåŠ¨ä¿®å¤ä¸€äº›å¸¸è§çš„ä»£ç é—®é¢˜ï¼Œå¦‚ä¿®å¤ä¸è§„èŒƒçš„ä»£ç é£æ ¼æˆ–æ½œåœ¨çš„é”™è¯¯ã€‚è¿™å‡å°‘äº†æ‰‹åŠ¨ä¿®å¤çš„å·¥ä½œé‡ï¼Œå¹¶æé«˜äº†ä»£ç çš„ä¸€è‡´æ€§ã€‚</p></li></ol><p>é€šè¿‡ä½¿ç”¨Clang-Tidyï¼Œå¼€å‘è€…å¯ä»¥æ›´æ—©åœ°å‘ç°å’Œçº æ­£æ½œåœ¨çš„ä»£ç é—®é¢˜ï¼Œæ”¹è¿›ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œå¹¶éµå¾ªè‰¯å¥½çš„ç¼–ç å®è·µã€‚å®ƒå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½œä¸ºä¸€ç§è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´é«˜è´¨é‡ã€æ›´å¥å£®çš„C++ä»£ç ã€‚</p><h2 id="C-ä¸­åŸŸæ˜¯ä»€ä¹ˆ">C++ä¸­åŸŸæ˜¯ä»€ä¹ˆ</h2><p>åœ¨C++ä¸­ï¼ŒåŸŸï¼ˆScopeï¼‰æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰å’Œè®¿é—®æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸçš„èŒƒå›´ã€‚æ¯ä¸ªæ ‡è¯†ç¬¦éƒ½å­˜åœ¨äºç‰¹å®šçš„åŸŸä¸­ï¼Œå¹¶ä¸”åªèƒ½åœ¨å…¶æ‰€å±çš„åŸŸä¸­è¢«è®¿é—®å’Œä½¿ç”¨ã€‚</p><p>C++ä¸­æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹çš„åŸŸï¼š</p><ol><li><p>å…¨å±€åŸŸï¼ˆGlobal Scopeï¼‰ï¼š</p><ul><li>å…¨å±€åŸŸæ˜¯æ•´ä¸ªç¨‹åºçš„æœ€å¤–å±‚åŸŸï¼Œå…¶ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦åœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½å¯è§ã€‚</li><li>å…¨å±€åŸŸä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚</li></ul></li><li><p>å‘½åç©ºé—´åŸŸï¼ˆNamespace Scopeï¼‰ï¼š</p><ul><li>å‘½åç©ºé—´æ˜¯ä¸€ç§ç”¨äºç»„ç»‡æ ‡è¯†ç¬¦çš„æœºåˆ¶ï¼Œåœ¨C++ä¸­å¯ä»¥é€šè¿‡<code>namespace</code>å…³é”®å­—å®šä¹‰ã€‚</li><li>åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦åªåœ¨è¯¥å‘½åç©ºé—´ä¸­å¯è§ï¼Œéœ€è¦ä½¿ç”¨å‘½åç©ºé—´é™å®šç¬¦æ‰èƒ½è®¿é—®ã€‚</li></ul></li><li><p>ç±»åŸŸï¼ˆClass Scopeï¼‰ï¼š</p><ul><li>ç±»åŸŸæ˜¯æŒ‡ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åªèƒ½åœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡æˆå‘˜è®¿é—®æ“ä½œç¬¦ï¼ˆ<code>.</code>æˆ–<code>-&gt;</code>ï¼‰æ¥è®¿é—®ã€‚</li></ul></li><li><p>å±€éƒ¨åŸŸï¼ˆLocal Scopeï¼‰ï¼š</p><ul><li>å±€éƒ¨åŸŸæ˜¯æŒ‡åœ¨å‡½æ•°ã€ä»£ç å—æˆ–å¾ªç¯ç»“æ„ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨å±€éƒ¨åŸŸä¸­å®šä¹‰çš„å˜é‡åªåœ¨å…¶æ‰€å±çš„ä»£ç å—æˆ–å‡½æ•°å†…éƒ¨å¯è§ï¼Œè¶…å‡ºè¯¥èŒƒå›´åå°†ä¸å†å¯è®¿é—®ã€‚</li></ul></li><li><p>è¯­å¥åŸŸï¼ˆStatement Scopeï¼‰ï¼š</p><ul><li>è¯­å¥åŸŸæ˜¯æŒ‡åœ¨è¯­å¥ä¸­å®šä¹‰çš„æ ‡è¯†ç¬¦çš„å¯è§èŒƒå›´ã€‚</li><li>åœ¨è¯­å¥ä¸­å®šä¹‰çš„å˜é‡åªåœ¨è¯¥è¯­å¥ä¸­å¯è§ï¼Œè¶…å‡ºè¯¥è¯­å¥åå°†ä¸å†å¯è®¿é—®ã€‚</li></ul></li></ol><p>æ¯ä¸ªåŸŸéƒ½æœ‰å…¶ç‰¹å®šçš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚æ ‡è¯†ç¬¦çš„å¯è§æ€§å†³å®šäº†å®ƒåœ¨ç¨‹åºçš„å“ªäº›ä½ç½®å¯ä»¥è¢«è®¿é—®ï¼Œè€Œç”Ÿå‘½å‘¨æœŸåˆ™æŒ‡å®šäº†æ ‡è¯†ç¬¦åœ¨å†…å­˜ä¸­å­˜åœ¨çš„æ—¶é—´èŒƒå›´ã€‚ç†è§£å’Œæ­£ç¡®ä½¿ç”¨åŸŸæ˜¯ç¼–å†™æ­£ç¡®å’Œå¯ç»´æŠ¤çš„C++ç¨‹åºçš„é‡è¦æ–¹é¢ã€‚</p><h2 id="å¸¸è§ç¼–è¯‘å™¨">å¸¸è§ç¼–è¯‘å™¨</h2><p>C++æœ‰å¤šä¸ªå¸¸ç”¨çš„ç¼–è¯‘å™¨å¯ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p>GCCï¼ˆGNU Compiler Collectionï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–è¯‘å™¨å¥—ä»¶ï¼ŒåŒ…å«äº†C++ç¼–è¯‘å™¨ï¼ˆg++ï¼‰ã€‚å®ƒæ˜¯è®¸å¤šLinuxå‘è¡Œç‰ˆçš„é»˜è®¤ç¼–è¯‘å™¨ï¼Œå¹¶ä¸”å¯åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚</p></li><li><p>Clangï¼šClangæ˜¯LLVMé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ç¼–è¯‘å™¨å¥—ä»¶ã€‚å®ƒæä¾›äº†é«˜æ€§èƒ½å’Œé«˜åº¦å¯é…ç½®çš„C++ç¼–è¯‘å™¨ã€‚Clangä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå¯æ›¿ä»£çš„ç¼–è¯‘å™¨é€‰æ‹©ã€‚</p></li><li><p>Microsoft Visual C++ï¼šè¿™æ˜¯Windowså¹³å°ä¸Šçš„å®˜æ–¹C++ç¼–è¯‘å™¨ã€‚å®ƒæ˜¯Microsoft Visual Studioé›†æˆå¼€å‘ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸°å¯Œçš„å·¥å…·å’ŒåŠŸèƒ½ã€‚</p></li><li><p>Intel C++ Compilerï¼šè¿™æ˜¯Intelæä¾›çš„é’ˆå¯¹è‹±ç‰¹å°”ä½“ç³»ç»“æ„çš„C++ç¼–è¯‘å™¨ã€‚å®ƒä¸“æ³¨äºä¼˜åŒ–æ€§èƒ½ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ç”Ÿæˆæ›´é«˜æ•ˆçš„ä»£ç ã€‚</p></li><li><p>Clang-CLï¼šè¿™æ˜¯åŸºäºClangçš„å¾®è½¯å¼€å‘çš„ä¸€ç§ç¼–è¯‘å™¨ï¼Œå…¼å®¹äºWindowså¹³å°ï¼Œæ”¯æŒMicrosoft Visual Studioå¼€å‘ç¯å¢ƒã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„C++ç¼–è¯‘å™¨ï¼Œæ¯ä¸ªç¼–è¯‘å™¨éƒ½æœ‰å…¶ç‰¹ç‚¹å’Œä¼˜åŠ¿ã€‚é€‰æ‹©ç¼–è¯‘å™¨æ—¶ï¼Œå¯ä»¥æ ¹æ®ç‰¹å®šçš„éœ€æ±‚ã€å¹³å°å’Œä¸ªäººåå¥½åšå‡ºå†³ç­–ã€‚</p><h2 id="MinGW">MinGW</h2><p>MinGWï¼ˆMinimalist GNU for Windowsï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œæ—¨åœ¨ä¸ºWindowså¹³å°æä¾›GNUå·¥å…·é›†å’Œå¼€å‘ç¯å¢ƒã€‚å®ƒåŸºäºGCCï¼ˆGNU Compiler Collectionï¼‰å’Œbinutilsï¼Œå¹¶åŒ…æ‹¬äº†ä¸€ç³»åˆ—çš„å·¥å…·ï¼Œå¦‚C/C++ç¼–è¯‘å™¨ã€é“¾æ¥å™¨ã€è°ƒè¯•å™¨ç­‰ã€‚</p><p>MinGWçš„ç›®æ ‡æ˜¯åœ¨Windowsä¸Šæä¾›ä¸€ä¸ªè½»é‡çº§çš„å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç±»Unixçš„å·¥å…·å’Œå‘½ä»¤æ¥ç¼–è¯‘ã€é“¾æ¥å’Œè°ƒè¯•ä»–ä»¬çš„ä»£ç ã€‚å®ƒä½¿ç”¨GNUå·¥å…·é“¾ï¼Œå› æ­¤èƒ½å¤Ÿæä¾›å¹¿æ³›çš„å¼€å‘åŠŸèƒ½å’Œç‰¹æ€§ã€‚</p><p>MinGWçš„ä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å®ƒå…è®¸å¼€å‘äººå‘˜åœ¨Windowsä¸Šä½¿ç”¨å¸¸è§çš„Unixå·¥å…·å’Œåº“ï¼Œè€Œæ— éœ€ä¾èµ–äºWindowsç‰¹å®šçš„APIå’Œå·¥å…·ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å°†ä»–ä»¬çš„ä»£ç ä»Unix/Linuxå¹³å°ç§»æ¤åˆ°Windowså¹³å°ã€‚</p><p>å¦ä¸€ä¸ªé‡è¦çš„ç‰¹ç‚¹æ˜¯MinGWæä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„æ›¿ä»£å“ï¼Œç›¸å¯¹äºä½¿ç”¨å®Œæ•´çš„Visual Studioå¼€å‘ç¯å¢ƒï¼Œå®ƒå¯ä»¥æ›´å¿«åœ°è¿›è¡Œç¼–è¯‘å’Œæ„å»ºã€‚è¿™ä½¿å¾—MinGWæˆä¸ºä¸€ç§æµè¡Œçš„é€‰æ‹©ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦å¿«é€ŸåŸå‹è®¾è®¡å’Œå°å‹é¡¹ç›®å¼€å‘çš„å¼€å‘äººå‘˜ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒMinGWæ˜¯ä¸€ä¸ªæä¾›GNUå·¥å…·é›†å’Œå¼€å‘ç¯å¢ƒçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºåœ¨Windowså¹³å°ä¸Šè¿›è¡ŒC/C++å¼€å‘ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§åœ¨Windowsä¸Šä½¿ç”¨Unixå·¥å…·å’Œåº“çš„ç®€ä¾¿æ–¹å¼ï¼Œä»¥åŠæ›´å¿«çš„ç¼–è¯‘å’Œæ„å»ºé€Ÿåº¦ã€‚</p><h2 id="GNU">GNU</h2><p>GNUæ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶è¿åŠ¨çš„é¡¹ç›®ï¼Œç›®æ ‡æ˜¯ä¸ºç”¨æˆ·æä¾›è‡ªç”±çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‚GNUé¡¹ç›®çš„å…¨ç§°æ˜¯â€œGNUâ€™s Not Unixâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’ç¼©å†™ï¼Œæ„æ€æ˜¯â€œGNUä¸æ˜¯Unixâ€ã€‚å®ƒçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªç±»Unixçš„æ“ä½œç³»ç»Ÿï¼Œä½†ä¸ä¾èµ–äºUnixçš„ä»£ç ã€‚</p><p>GNUé¡¹ç›®å§‹äº1983å¹´ï¼Œç”±ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼ï¼ˆRichard Stallmanï¼‰å‘èµ·ã€‚æ–¯æ‰˜æ›¼æ„è¯†åˆ°è®¸å¤šè®¡ç®—æœºç”¨æˆ·é¢ä¸´ç§æœ‰è½¯ä»¶çš„é™åˆ¶ï¼Œæ— æ³•æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ†äº«è½¯ä»¶çš„æºä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å‘èµ·äº†GNUé¡¹ç›®ï¼Œæ—¨åœ¨å¼€å‘ä¸€ä¸ªå®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚</p><p>GNUé¡¹ç›®åŒ…æ‹¬äº†è®¸å¤šå…³é”®çš„ç»„ä»¶ï¼Œå¦‚GNUç¼–è¯‘å™¨é›†åˆï¼ˆGCCï¼‰ã€GNUè°ƒè¯•å™¨ï¼ˆGDBï¼‰ã€GNU Bash shellã€GNUæ ¸å¿ƒå·¥å…·é›†ï¼ˆCoreutilsï¼‰ç­‰ã€‚è¿™äº›ç»„ä»¶å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„è‡ªç”±è½¯ä»¶å †æ ˆï¼Œå¯ç”¨äºæ„å»ºè‡ªç”±æ“ä½œç³»ç»Ÿã€‚</p><p>ç„¶è€Œï¼ŒGNUé¡¹ç›®ä¸­å”¯ä¸€å°šæœªå®Œæˆçš„éƒ¨åˆ†æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä¸ºäº†å¡«è¡¥è¿™ä¸ªç©ºç™½ï¼ŒGNUé¡¹ç›®ä¸Linuxå†…æ ¸ç›¸ç»“åˆï¼Œå½¢æˆäº†ä»Šå¤©è¢«å¹¿æ³›ä½¿ç”¨çš„GNU/Linuxæ“ä½œç³»ç»Ÿã€‚GNU/Linuxæ“ä½œç³»ç»Ÿçš„åŸºç¡€æ˜¯Linuxå†…æ ¸ï¼Œä½†å®ƒåŒ…å«äº†è®¸å¤šGNUé¡¹ç›®çš„ç»„ä»¶ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨è‡ªç”±è½¯ä»¶æ„å»ºå’Œå®šåˆ¶ä»–ä»¬çš„ç³»ç»Ÿã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒGNUæ˜¯ä¸€ä¸ªè‡ªç”±è½¯ä»¶è¿åŠ¨çš„é¡¹ç›®ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›è‡ªç”±çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€‚å®ƒçš„ç»„ä»¶æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„è‡ªç”±è½¯ä»¶å †æ ˆï¼Œå¹¶ä¸Linuxå†…æ ¸ç»“åˆå½¢æˆäº†GNU/Linuxæ“ä½œç³»ç»Ÿã€‚GNUé¡¹ç›®å¼ºè°ƒç”¨æˆ·è‡ªç”±ã€å¼€æ”¾æºä»£ç å’Œå…±äº«ï¼Œå¯¹äºè‡ªç”±è½¯ä»¶çš„å‘å±•å’Œæ¨å¹¿åšå‡ºäº†é‡è¦è´¡çŒ®ã€‚</p><h2 id="OpenGL">OpenGL</h2><p>OpenGLï¼ˆOpen Graphics Libraryï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ¸²æŸ“2Då’Œ3Då›¾å½¢çš„è·¨å¹³å°ç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œç”±Khronos Groupç»´æŠ¤å’Œæ¨è¿›ã€‚OpenGLæä¾›äº†ä¸€ç³»åˆ—çš„å‡½æ•°ï¼Œç”¨äºæ“ä½œå›¾å½¢ç¡¬ä»¶å’Œæ‰§è¡Œå›¾å½¢è®¡ç®—ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºé«˜æ€§èƒ½çš„å›¾å½¢åº”ç”¨ç¨‹åºã€‚</p><p>OpenGLå¯ä»¥ç”¨äºå„ç§å¹³å°ï¼ŒåŒ…æ‹¬Windowsã€macOSã€Linuxä»¥åŠç§»åŠ¨å¹³å°å¦‚Androidå’ŒiOSã€‚å®ƒä¸ç¡¬ä»¶æ— å…³ï¼Œèƒ½å¤Ÿåˆ©ç”¨å›¾å½¢åŠ é€Ÿç¡¬ä»¶ï¼ˆå¦‚å›¾å½¢å¤„ç†å™¨ï¼‰æ¥å®ç°å¿«é€Ÿè€Œé€¼çœŸçš„å›¾å½¢æ¸²æŸ“ã€‚</p><p>OpenGLæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å’Œæ“ä½œï¼ŒåŒ…æ‹¬å‡ ä½•å›¾å…ƒç»˜åˆ¶ã€çº¹ç†æ˜ å°„ã€å…‰ç…§ã€æ·±åº¦æµ‹è¯•ã€ç€è‰²å™¨ç¼–ç¨‹ç­‰ã€‚å®ƒä½¿ç”¨ä¸€ç§çŠ¶æ€æœºæ¨¡å‹ï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„çŠ¶æ€æ¥å®šä¹‰ç»˜å›¾æ“ä½œå’Œæ¸²æŸ“æ•ˆæœã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨OpenGLæ¥åˆ›å»ºå„ç§ç±»å‹çš„å›¾å½¢åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¸¸æˆã€å¯è§†åŒ–å·¥å…·ã€æ¨¡æ‹Ÿå™¨ã€CADè½¯ä»¶ç­‰ã€‚</p><p>OpenGLçš„ä¸»è¦ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>è·¨å¹³å°ï¼šOpenGLå¯åœ¨å¤šä¸ªå¹³å°ä¸Šä½¿ç”¨ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™ä¸€æ¬¡ä»£ç å¹¶åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šè¿è¡Œã€‚</p></li><li><p>é«˜æ€§èƒ½ï¼šOpenGLèƒ½å¤Ÿåˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿæ¥å®ç°é«˜æ•ˆçš„å›¾å½¢æ¸²æŸ“ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p></li><li><p>å¯æ‰©å±•æ€§ï¼šOpenGLæ”¯æŒæ‰©å±•ï¼Œå¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨é¢å¤–çš„åŠŸèƒ½å’Œç‰¹æ€§æ¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚</p></li><li><p>å¼€æ”¾æ ‡å‡†ï¼šOpenGLæ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ ‡å‡†ï¼Œå„ä¸ªç¡¬ä»¶å’Œè½¯ä»¶ä¾›åº”å•†å¯ä»¥å®ç°å’Œæ”¯æŒå®ƒï¼Œç¡®ä¿äº†å¹¿æ³›çš„å…¼å®¹æ€§å’Œå¯ç§»æ¤æ€§ã€‚</p></li></ol><p>æ€»è€Œè¨€ä¹‹ï¼ŒOpenGLæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å›¾å½¢æ¸²æŸ“APIï¼Œç”¨äºåˆ›å»ºé«˜æ€§èƒ½çš„2Då’Œ3Då›¾å½¢åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œæ“ä½œï¼Œå¯ç”¨äºç»˜åˆ¶å‡ ä½•å›¾å…ƒã€åº”ç”¨çº¹ç†ã€æ‰§è¡Œå…‰ç…§å’Œç€è‰²å™¨ç¼–ç¨‹ç­‰ã€‚é€šè¿‡åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ŒOpenGLèƒ½å¤Ÿå®ç°å¿«é€Ÿè€Œé€¼çœŸçš„å›¾å½¢æ¸²æŸ“ï¼Œå¹¿æ³›åº”ç”¨äºæ¸¸æˆå¼€å‘ã€å¯è§†åŒ–å·¥å…·ã€CADè½¯ä»¶ç­‰é¢†åŸŸã€‚</p><h2 id="Iceberg">Iceberg</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œâ€œIcebergâ€ï¼ˆå†°å±±ï¼‰æŠ€æœ¯é€šå¸¸æŒ‡çš„æ˜¯ä¸€ç§æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ä¸­çš„ç¨€ç–æ•°æ®ã€‚</p><p>IcebergæŠ€æœ¯çš„ç›®æ ‡æ˜¯æé«˜å¤„ç†å¤§å‹æ•°æ®é›†ä¸­ç¨€ç–æ•°æ®çš„æ•ˆç‡ã€‚åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œæ•°æ®é›†ä¸­åªæœ‰å°‘éƒ¨åˆ†æ•°æ®æ˜¯é¢‘ç¹è®¿é—®çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ•°æ®åˆ™å¾ˆå°‘è¢«ä½¿ç”¨ã€‚ä¼ ç»Ÿçš„æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢æ–¹æ³•ä¼šå¯¹æ•´ä¸ªæ•°æ®é›†è¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬é‚£äº›å¾ˆå°‘è¢«ä½¿ç”¨çš„æ•°æ®ï¼Œä»è€Œæµªè´¹äº†è®¡ç®—èµ„æºå’Œå­˜å‚¨ç©ºé—´ã€‚</p><p>IcebergæŠ€æœ¯é€šè¿‡å°†æ•°æ®åˆ†æˆçƒ­æ•°æ®ï¼ˆé¢‘ç¹è®¿é—®çš„æ•°æ®ï¼‰å’Œå†·æ•°æ®ï¼ˆå¾ˆå°‘è®¿é—®çš„æ•°æ®ï¼‰ä¸¤ä¸ªéƒ¨åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚çƒ­æ•°æ®é€šå¸¸è¢«ä¿ç•™åœ¨é«˜æ€§èƒ½çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œè€Œå†·æ•°æ®åˆ™è¢«ç§»åŠ¨åˆ°ä½æˆæœ¬çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œå¦‚åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæˆ–å¯¹è±¡å­˜å‚¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰çƒ­æ•°æ®éœ€è¦é¢‘ç¹è®¿é—®ï¼Œè€Œå†·æ•°æ®å¯ä»¥ä»¥æ›´ä½çš„æˆæœ¬å­˜å‚¨å’Œç®¡ç†ã€‚</p><p>IcebergæŠ€æœ¯è¿˜å¯ä»¥é’ˆå¯¹çƒ­æ•°æ®åº”ç”¨å„ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¾‹å¦‚æ•°æ®å‹ç¼©ã€ç´¢å¼•å’Œåˆ†åŒºï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†æ•°æ®ç‰ˆæœ¬æ§åˆ¶å’Œäº‹åŠ¡æ”¯æŒï¼Œä½¿å¾—æ•°æ®çš„æ›´æ–°å’Œå˜æ›´èƒ½å¤Ÿè¢«æœ‰æ•ˆåœ°ç®¡ç†å’Œè¿½è¸ªã€‚</p><p>IcebergæŠ€æœ¯åœ¨å¤§æ•°æ®å¤„ç†é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®æ¹–å’Œæ•°æ®ä»“åº“çš„æ„å»ºå’Œç®¡ç†ä¸­ã€‚å®ƒæä¾›äº†ä¸€ç§çµæ´»è€Œé«˜æ•ˆçš„æ–¹å¼æ¥å¤„ç†å’ŒæŸ¥è¯¢å¤§è§„æ¨¡æ•°æ®é›†ï¼ŒåŒæ—¶å‡å°‘äº†å­˜å‚¨æˆæœ¬å’ŒæŸ¥è¯¢æ—¶é—´ã€‚</p><h2 id="HDFS">HDFS</h2><p>HDFSï¼ˆHadoop Distributed File Systemï¼‰æ˜¯Apache Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€é¡¹å…³é”®æŠ€æœ¯ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>HDFSçš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸Šæä¾›é«˜å®¹é”™æ€§ã€é«˜ååé‡å’Œå¯ä¼¸ç¼©æ€§çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚å®ƒåŸºäºä¸»ä»æ¶æ„ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆNameNodeï¼‰å’Œå¤šä¸ªä»èŠ‚ç‚¹ï¼ˆDataNodeï¼‰ç»„æˆã€‚HDFSå°†æ•°æ®åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„æ•°æ®å—ï¼Œå¹¶å°†è¿™äº›æ•°æ®å—å­˜å‚¨åœ¨ä»èŠ‚ç‚¹ä¸Šã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶çš„åç§°ã€ä½ç½®å’Œæƒé™ç­‰ã€‚</p><p>HDFSçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p>åˆ†å¸ƒå¼å­˜å‚¨ï¼šæ•°æ®è¢«åˆ†æ•£å­˜å‚¨åœ¨å¤šä¸ªä»èŠ‚ç‚¹ä¸Šï¼Œå¯ä»¥æ¨ªå‘æ‰©å±•ä»¥é€‚åº”å¤§è§„æ¨¡æ•°æ®é›†çš„å­˜å‚¨éœ€æ±‚ã€‚</p></li><li><p>å†—ä½™å¤‡ä»½ï¼šHDFSä¼šå°†æ•°æ®å—å¤åˆ¶åˆ°å¤šä¸ªä»èŠ‚ç‚¹ä¸Šï¼Œä»¥æä¾›æ•°æ®çš„å†—ä½™å¤‡ä»½å’Œå®¹é”™æ€§ã€‚é€šå¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ•°æ®å—ä¼šæœ‰ä¸‰ä¸ªå‰¯æœ¬å­˜å‚¨åœ¨ä¸åŒçš„ä»èŠ‚ç‚¹ä¸Šã€‚</p></li><li><p>é«˜å®¹é”™æ€§ï¼šå½“ä»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæˆ–æ•°æ®æŸåæ—¶ï¼ŒHDFSèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤æ•°æ®ï¼Œç¡®ä¿æ•°æ®çš„å¯é æ€§ã€‚</p></li><li><p>é€‚åˆå¤§æ•°æ®å¤„ç†ï¼šHDFSçš„è®¾è®¡ä½¿å…¶é€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„å·¥ä½œè´Ÿè½½ã€‚å®ƒé€šè¿‡æ•°æ®æœ¬åœ°æ€§å’Œå¹¶è¡Œè®¡ç®—æ¥æé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡ã€‚</p></li></ol><p>HDFSè¢«å¹¿æ³›åº”ç”¨äºå¤§æ•°æ®å¤„ç†å’Œåˆ†æé¢†åŸŸã€‚å®ƒä¸ºè®¸å¤šåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼ˆå¦‚MapReduceï¼‰æä¾›äº†æ•°æ®å­˜å‚¨å’Œè®¿é—®çš„åŸºç¡€ï¼Œå¹¶æ”¯æŒå¯¹å¤§è§„æ¨¡æ•°æ®é›†çš„é«˜æ•ˆå¤„ç†å’Œåˆ†æã€‚</p><h2 id="Opencv">Opencv</h2><p>OpenCVï¼ˆOpen Source Computer Visionï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„è®¡ç®—æœºè§†è§‰åº“ï¼Œæ—¨åœ¨æä¾›ä¸€ç³»åˆ—ç”¨äºå›¾åƒå¤„ç†ã€è®¡ç®—æœºè§†è§‰å’Œæœºå™¨å­¦ä¹ çš„å‡½æ•°å’Œå·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„åº“ï¼Œå¯ç”¨äºå¼€å‘å„ç§è§†è§‰åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å›¾åƒå’Œè§†é¢‘å¤„ç†ã€ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªã€äººè„¸è¯†åˆ«ã€æœºå™¨å­¦ä¹ ç­‰ã€‚</p><p>OpenCVæœ€åˆç”±è‹±ç‰¹å°”å…¬å¸äº1999å¹´å‘èµ·ï¼Œåæ¥æˆä¸ºä¸€ä¸ªè·¨å¹³å°çš„å¼€æºé¡¹ç›®ã€‚å®ƒä½¿ç”¨C++è¯­è¨€ç¼–å†™ï¼Œä½†ä¹Ÿæä¾›äº†è®¸å¤šå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„æ¥å£ï¼ŒåŒ…æ‹¬Pythonã€Javaå’ŒMATLABç­‰ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥æ–¹ä¾¿åœ°åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨OpenCVã€‚</p><p>OpenCVæä¾›äº†å¤§é‡çš„å‡½æ•°å’Œç®—æ³•ï¼Œç”¨äºå¤„ç†å›¾åƒå’Œè§†é¢‘æ•°æ®ã€‚å®ƒæ”¯æŒåŸºæœ¬çš„å›¾åƒæ“ä½œï¼ˆå¦‚è£å‰ªã€è°ƒæ•´å¤§å°ã€æ»¤æ³¢ç­‰ï¼‰ã€ç‰¹å¾æå–å’Œæè¿°ï¼ˆå¦‚è¾¹ç¼˜æ£€æµ‹ã€è§’ç‚¹æ£€æµ‹ã€ç›´çº¿æ£€æµ‹ç­‰ï¼‰ã€å›¾åƒåŒ¹é…å’Œé…å‡†ã€è¿åŠ¨ä¼°è®¡ã€ä¸‰ç»´é‡å»ºç­‰ã€‚æ­¤å¤–ï¼ŒOpenCVè¿˜åŒ…å«äº†è®¸å¤šæœºå™¨å­¦ä¹ ç®—æ³•çš„å®ç°ï¼Œå¦‚æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ã€éšæœºæ£®æ—ï¼ˆRandom Forestsï¼‰ã€ç¥ç»ç½‘ç»œç­‰ï¼Œç”¨äºç›®æ ‡åˆ†ç±»å’Œè¯†åˆ«ã€‚</p><p>OpenCVè¢«å¹¿æ³›åº”ç”¨äºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ç ”ç©¶å’Œå¼€å‘ä¸­ï¼Œå®ƒåœ¨å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œéƒ½æœ‰å¾ˆé«˜çš„å£°èª‰å’Œåº”ç”¨ä»·å€¼ã€‚æ— è®ºæ˜¯è¿›è¡ŒåŸºç¡€çš„å›¾åƒå¤„ç†è¿˜æ˜¯å¤æ‚çš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼ŒOpenCVéƒ½æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œå·¥å…·ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿå®ç°ä»–ä»¬çš„è§†è§‰åº”ç”¨ã€‚</p><h2 id="å‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä½œç”¨">å‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­çš„ä½œç”¨</h2><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå‘½åç©ºé—´å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„ä½œç”¨ï¼š</p><ol><li><p>é¿å…å‘½åå†²çªï¼šå‘½åç©ºé—´å¯ä»¥å°†ä»£ç æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰åˆ†ç»„å’Œéš”ç¦»ï¼Œé¿å…ä¸åŒéƒ¨åˆ†çš„ä»£ç ä¹‹é—´çš„å‘½åå†²çªã€‚ä¸åŒçš„å‘½åç©ºé—´ä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼Œå› ä¸ºå®ƒä»¬çš„ä½œç”¨åŸŸè¢«é™å®šåœ¨å„è‡ªçš„å‘½åç©ºé—´å†…ã€‚</p></li><li><p>æä¾›ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–ï¼šé€šè¿‡å°†ç›¸å…³çš„ä»£ç æ”¾ç½®åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œå¯ä»¥æä¾›é€»è¾‘ä¸Šçš„åˆ†ç»„å’Œç»„ç»‡ï¼Œä½¿å¾—ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤ã€‚å‘½åç©ºé—´å¯ä»¥æŒ‰ç…§åŠŸèƒ½ã€æ¨¡å—æˆ–å±‚æ¬¡ç»“æ„è¿›è¡Œç»„ç»‡ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°ç†è§£å’Œç»´æŠ¤ä»£ç ã€‚</p></li><li><p>å¢åŠ å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ï¼šé€šè¿‡åœ¨ä»£ç ä¸­ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç†è§£æ€§ã€‚å‘½åç©ºé—´å¯ä»¥ä¸ºä»£ç æ·»åŠ ä¸Šä¸‹æ–‡å’Œè¯­ä¹‰ï¼Œä½¿å¾—ä»£ç çš„æ„å›¾æ›´åŠ æ¸…æ™°ã€‚æ­¤å¤–ï¼Œå‘½åç©ºé—´ä¹Ÿä¸ºé¡¹ç›®çš„æ‰©å±•æ€§æä¾›äº†æ”¯æŒï¼Œå› ä¸ºæ–°çš„ä»£ç å¯ä»¥æ·»åŠ åˆ°ç°æœ‰çš„å‘½åç©ºé—´ä¸­ï¼Œè€Œæ— éœ€ä¿®æ”¹æˆ–é‡æ„ç°æœ‰ä»£ç ã€‚</p></li><li><p>å…è®¸ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼šä¸åŒçš„å‘½åç©ºé—´ä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒåç§°çš„æ ‡è¯†ç¬¦ï¼Œè€Œä¸ä¼šå‘ç”Ÿå†²çªã€‚è¿™å¯¹äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–å…¶ä»–æ¨¡å—é›†æˆæ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥é¿å…ä¸åŒæ¨¡å—ä¹‹é—´çš„åç§°å†²çªï¼Œå¹¶æ”¯æŒæ›´å¥½çš„ä»£ç é‡ç”¨å’Œç»„åˆã€‚</p></li><li><p>é™å®šæ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸï¼šå‘½åç©ºé—´é€šè¿‡å‘½åç©ºé—´é™å®šç¬¦ï¼ˆ<code>::</code>ï¼‰æ¥é™å®šæ ‡è¯†ç¬¦çš„ä½œç”¨åŸŸã€‚è¿™å¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ æ˜ç¡®å’Œå¯æ§ï¼Œé¿å…å…¨å±€ä½œç”¨åŸŸçš„æ»¥ç”¨ã€‚åªæœ‰åœ¨éœ€è¦ä½¿ç”¨ç‰¹å®šå‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦æ—¶ï¼Œæ‰éœ€è¦æ˜¾å¼åœ°å¼•ç”¨å®ƒä»¬ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œå‘½åç©ºé—´åœ¨é¡¹ç›®å¼€å‘ä¸­èµ·åˆ°äº†éš”ç¦»ã€ç»„ç»‡å’Œç®¡ç†ä»£ç çš„ä½œç”¨ã€‚å®ƒä»¬æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥å¤„ç†å‘½åå†²çªï¼Œå¹¶æé«˜äº†ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚é€šè¿‡åˆç†åœ°ä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥æ›´å¥½åœ°ç»„ç»‡é¡¹ç›®ä»£ç ï¼Œå‡å°‘æ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶æé«˜å›¢é˜Ÿåä½œçš„æ•ˆç‡ã€‚</p><h2 id="explicit">explicit</h2><p>åœ¨C++ä¸­ï¼Œ<code>explicit</code>æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºä¿®é¥°ç±»çš„å•å‚æ•°æ„é€ å‡½æ•°ï¼ˆæˆ–é™¤é»˜è®¤å‚æ•°å¤–çš„å¤šå‚æ•°æ„é€ å‡½æ•°ï¼‰ã€‚ä½¿ç”¨<code>explicit</code>å…³é”®å­—å¯ä»¥é˜²æ­¢éšå¼çš„ç±»å‹è½¬æ¢å‘ç”Ÿã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¯¥æ„é€ å‡½æ•°ç”¨äºéšå¼ç±»å‹è½¬æ¢ã€‚è¿™æ„å‘³ç€ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¯¥ç±»çš„å¯¹è±¡è¿›è¡Œèµ‹å€¼ã€åˆå§‹åŒ–æˆ–ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†æ²¡æœ‰ä½¿ç”¨<code>explicit</code>å…³é”®å­—æ—¶ï¼Œæ„é€ å‡½æ•°çš„éšå¼ç±»å‹è½¬æ¢ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Do something with MyClass object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj = <span class="number">5</span>;   <span class="comment">// éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="built_in">doSomething</span>(<span class="number">10</span>);   <span class="comment">// éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»å®šä¹‰äº†ä¸€ä¸ªå•å‚æ•°æ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ª<code>int</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•°å€¼è¿›è¡Œèµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œéšå¼ç±»å‹è½¬æ¢æ¥åˆ›å»º<code>MyClass</code>å¯¹è±¡ã€‚</p><p>ç„¶è€Œï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›æ˜ç¡®åœ°æ§åˆ¶ç±»å‹è½¬æ¢ï¼Œé¿å…å‡ºç°æ„å¤–çš„è½¬æ¢è¡Œä¸ºã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨<code>explicit</code>å…³é”®å­—æ¥å£°æ˜æ„é€ å‡½æ•°ï¼Œå¹¶ç¦æ­¢éšå¼ç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨<code>explicit</code>å…³é”®å­—ä¿®é¥°æ„é€ å‡½æ•°çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MyClass</span><span class="params">(<span class="type">int</span> value)</span> : m_value(value) &#123;</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomething</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Do something with MyClass object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj = <span class="number">5</span>;    <span class="comment">// é”™è¯¯ï¼Œç¦æ­¢éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="built_in">doSomething</span>(<span class="number">10</span>);    <span class="comment">// é”™è¯¯ï¼Œç¦æ­¢éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°å‰é¢åŠ ä¸Šäº†<code>explicit</code>å…³é”®å­—ã€‚è¿™æ„å‘³ç€æ„é€ å‡½æ•°åªèƒ½è¢«æ˜¾å¼è°ƒç”¨ï¼Œè€Œç¦æ­¢äº†éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­çš„èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨å°†ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><p>é€šè¿‡ä½¿ç”¨<code>explicit</code>å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ˜ç¡®åœ°æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºå’Œç±»å‹è½¬æ¢ï¼Œé¿å…ä¸€äº›æ½œåœ¨çš„é”™è¯¯å’Œæ„å¤–è¡Œä¸ºã€‚ä½†éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨<code>explicit</code>å…³é”®å­—å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä»£ç çš„å†—é•¿æ€§å’Œä¸ä¾¿åˆ©æ€§ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€æ±‚å’Œè®¾è®¡è€ƒè™‘æ˜¯å¦ä½¿ç”¨ã€‚</p><h2 id="æ„é€ å‡½æ•°çš„-åé¢åŠ ä¸Š-æ˜¯ä»€ä¹ˆæ„æ€">æ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;æ˜¯ä»€ä¹ˆæ„æ€</h2><p>åœ¨C++ä¸­ï¼Œæ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;æ˜¯è¡¨ç¤ºä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼ˆmember initializer listï¼‰çš„å¼€å§‹ã€‚</p><p>æ„é€ å‡½æ•°åœ¨åˆ›å»ºå¯¹è±¡æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„æˆå‘˜å˜é‡ã€‚æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨æä¾›äº†ä¸€ç§åœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰åˆå§‹åŒ–æˆå‘˜å˜é‡çš„æ–¹å¼ã€‚é€šè¿‡åœ¨æ„é€ å‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ä¸ºæˆå‘˜å˜é‡èµ‹å€¼æˆ–è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123;</span><br><span class="line">        <span class="comment">// æ„é€ å‡½æ•°ä½“</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ„é€ å‡½æ•°çš„å®šä¹‰æ˜¯ <code>MyClass(int value) : m_value(value) &#123;&#125;</code>ã€‚åœ¨<code>:</code>ä¹‹åæ˜¯æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå…¶ä¸­çš„<code>m_value(value)</code>è¡¨ç¤ºå°†å‚æ•°<code>value</code>çš„å€¼èµ‹ç»™æˆå‘˜å˜é‡<code>m_value</code>ã€‚è¿™æ ·ï¼Œåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰ï¼Œæˆå‘˜å˜é‡<code>m_value</code>å°±å·²ç»è¢«åˆå§‹åŒ–ã€‚</p><p>é€šè¿‡ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œé¿å…åœ¨æ„é€ å‡½æ•°ä½“ä¸­è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œæé«˜ä»£ç çš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚æ­¤å¤–ï¼Œå¯¹äºä¸€äº›ç±»ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¿˜å¯ä»¥è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨åªèƒ½ç”¨äºæ„é€ å‡½æ•°ä¸­ï¼Œç”¨äºåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œä¸èƒ½ç”¨äºå…¶ä»–æˆå‘˜å‡½æ•°ã€‚å¹¶ä¸”ï¼Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºåº”è¯¥ä¸æˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºä¸€è‡´ï¼Œä»¥é¿å…å‡ºç°æ½œåœ¨çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œæ„é€ å‡½æ•°çš„()åé¢åŠ ä¸Š;è¡¨ç¤ºä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨çš„å¼€å§‹ã€‚æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ç”¨äºåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæä¾›äº†ä¸€ç§æ•ˆç‡é«˜ä¸”å¯è¯»æ€§å¥½çš„åˆå§‹åŒ–æ–¹å¼ã€‚é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ï¼Œå¯ä»¥ç›´æ¥ä¸ºæˆå‘˜å˜é‡èµ‹å€¼æˆ–è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚</p><h2 id="NDK">NDK</h2><p>C++çš„NDKï¼ˆNative Development Kitï¼‰æ˜¯ä¸€ç»„å·¥å…·å’Œåº“ï¼Œç”¨äºå¼€å‘ä½¿ç”¨C++ç¼–å†™çš„Androidåº”ç”¨ç¨‹åºã€‚NDKå…è®¸å¼€å‘äººå‘˜åœ¨Androidå¹³å°ä¸Šç¼–å†™é«˜æ€§èƒ½çš„åŸç”Ÿä»£ç ï¼Œé€šå¸¸ç”¨äºå¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€è®¿é—®ç³»ç»Ÿç¡¬ä»¶å’Œä¼˜åŒ–æ€§èƒ½ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äºC++çš„NDKçš„ä¸€äº›å…³é”®æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li><p>NDKçš„ç›®çš„ï¼šNDKçš„ä¸»è¦ç›®çš„æ˜¯æä¾›ä¸€ç§åœ¨Androidåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨C++ç¼–å†™çš„åŸç”Ÿä»£ç çš„æ–¹æ³•ã€‚ä½¿ç”¨C++å¯ä»¥åœ¨æ€§èƒ½ä¸Šä¼˜åŒ–åº”ç”¨ç¨‹åºï¼Œå¤„ç†å¤æ‚çš„è®¡ç®—ä»»åŠ¡ï¼Œè®¿é—®ç³»ç»Ÿçº§åˆ«çš„APIå’Œè®¾å¤‡åŠŸèƒ½ï¼Œæˆ–é‡ç”¨ç°æœ‰çš„C/C++åº“ã€‚</p></li><li><p>NDKå·¥å…·é“¾ï¼šNDKæä¾›äº†ä¸€å¥—å·¥å…·é“¾ï¼ŒåŒ…æ‹¬äº¤å‰ç¼–è¯‘å™¨ã€è°ƒè¯•å™¨å’Œæ„å»ºå·¥å…·ã€‚è¿™äº›å·¥å…·é“¾å…è®¸å°†C++ä»£ç ç¼–è¯‘ä¸ºé€‚ç”¨äºAndroidå¹³å°çš„æœ¬æœºæœºå™¨ç ã€‚</p></li><li><p>CMakeæ„å»ºç³»ç»Ÿï¼šNDKæ¨èä½¿ç”¨CMakeä½œä¸ºæ„å»ºç³»ç»Ÿï¼Œç”¨äºç”ŸæˆAndroidåº”ç”¨ç¨‹åºçš„æœ¬æœºä»£ç ã€‚CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨å®šä¹‰æ„å»ºè¿‡ç¨‹å’Œä¾èµ–å…³ç³»ï¼Œå¹¶ç”Ÿæˆé€‚ç”¨äºAndroidçš„Makefileã€‚</p></li><li><p>JNIæ¥å£ï¼šåœ¨ä½¿ç”¨NDKå¼€å‘æ—¶ï¼ŒC++ä»£ç ä¸Javaä»£ç ä¹‹é—´çš„äº¤äº’é€šè¿‡JNIï¼ˆJava Native Interfaceï¼‰å®ç°ã€‚JNIå…è®¸åœ¨Javaå’ŒC++ä¹‹é—´è¿›è¡Œå‡½æ•°è°ƒç”¨å’Œæ•°æ®ä¼ é€’ã€‚</p></li><li><p>æ”¯æŒçš„ABIï¼šABIï¼ˆApplication Binary Interfaceï¼‰æ˜¯æŒ‡åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„äºŒè¿›åˆ¶æ¥å£è§„èŒƒã€‚NDKæ”¯æŒå¤šä¸ªABIï¼ŒåŒ…æ‹¬armeabiã€armeabi-v7aã€arm64-v8aã€x86å’Œx86_64ã€‚å¼€å‘äººå‘˜å¯ä»¥é€‰æ‹©é€‚åˆå…¶åº”ç”¨ç¨‹åºçš„ABIï¼Œä»¥å®ç°æœ€ä½³çš„æ€§èƒ½å’Œå…¼å®¹æ€§ã€‚</p></li><li><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šNDKè¿˜å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨ç°æœ‰çš„C/C++åº“ï¼Œå¦‚OpenCVã€Boostç­‰ã€‚é€šè¿‡åœ¨NDKæ„å»ºè„šæœ¬ä¸­é…ç½®å’Œé“¾æ¥è¿™äº›åº“ï¼Œå¯ä»¥è½»æ¾åœ°å°†å®ƒä»¬ä¸Androidåº”ç”¨ç¨‹åºé›†æˆåœ¨ä¸€èµ·ã€‚</p></li><li><p>è°ƒè¯•å’Œæ€§èƒ½åˆ†æï¼šNDKæä¾›äº†è°ƒè¯•å·¥å…·å’Œæ€§èƒ½åˆ†æå·¥å…·ï¼Œä»¥å¸®åŠ©å¼€å‘äººå‘˜è°ƒè¯•å’Œä¼˜åŒ–å…¶åŸç”Ÿä»£ç ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ndk-gdbå‘½ä»¤è¡Œå·¥å…·è¿›è¡Œè°ƒè¯•ï¼Œä½¿ç”¨perfå·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨NDKç¼–å†™åŸç”Ÿä»£ç éœ€è¦ä¸€å®šçš„C++ç¼–ç¨‹çŸ¥è¯†å’ŒAndroidå¼€å‘ç»éªŒã€‚å®ƒä¸»è¦é€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½è®¡ç®—ã€åº•å±‚ç¡¬ä»¶è®¿é—®æˆ–ä¸ç°æœ‰C/C++åº“é›†æˆçš„æƒ…å†µã€‚å¯¹äºä¸€èˆ¬çš„Androidåº”ç”¨ç¨‹åºå¼€å‘ï¼Œé€šå¸¸å»ºè®®ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Javaæˆ–Kotlinç¼–å†™ä»£ç ã€‚</p><h1>æ•°æ®ç±»å‹</h1><h2 id="åŸºæœ¬æ•°æ®ç±»å‹">åŸºæœ¬æ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083744623.png" alt="image-20230613083744623"></p><h2 id="å¤åˆæ•°æ®ç±»å‹">å¤åˆæ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083845493.png" alt="image-20230613083845493"></p><h2 id="æŒ‡é’ˆç±»å‹">æŒ‡é’ˆç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083858532.png" alt="image-20230613083858532"></p><h2 id="æšä¸¾ç±»å‹">æšä¸¾ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083909897.png" alt="image-20230613083909897"></p><h2 id="å…¶ä»–æ•°æ®ç±»å‹">å…¶ä»–æ•°æ®ç±»å‹</h2><p><img src="../assets/image/C++%E5%9F%BA%E7%A1%80_Image/image-20230613083920385.png" alt="image-20230613083920385"></p><h1>ç±»</h1><h2 id="ä¾‹å­">ä¾‹å­</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> studentId, <span class="type">const</span> std::string&amp; studentName, <span class="type">int</span> studentAge) &#123;</span><br><span class="line">        id = studentId;</span><br><span class="line">        name = studentName;</span><br><span class="line">        age = studentAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆå‘˜å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayInformation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student ID: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; name &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; age &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å­¦ç”Ÿå§“å</span></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å­¦ç”Ÿå§“å</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(<span class="type">const</span> std::string&amp; studentName)</span> </span>&#123;</span><br><span class="line">        name = studentName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="this">this</h2><p>åœ¨C++ä¸­ï¼Œå…³é”®å­—<code>this</code>è¡¨ç¤ºå½“å‰å¯¹è±¡çš„æŒ‡é’ˆã€‚å®ƒæ˜¯ä¸€ä¸ªéšå¼çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨æˆå‘˜å‡½æ•°çš„å¯¹è±¡æœ¬èº«ã€‚é€šè¿‡<code>this</code>æŒ‡é’ˆï¼Œå¯ä»¥åœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†<code>this</code>å…³é”®å­—çš„ç”¨é€”ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> value) : <span class="built_in">m_value</span>(value) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value: &quot;</span> &lt;&lt; m_value &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setValue</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_value = value;  <span class="comment">// ä½¿ç”¨thisæŒ‡é’ˆè®¿é—®æˆå‘˜å˜é‡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Address: &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; std::endl;  <span class="comment">// æ‰“å°thisæŒ‡é’ˆçš„åœ°å€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyClass <span class="title">obj</span><span class="params">(<span class="number">42</span>)</span></span>;</span><br><span class="line">    obj.<span class="built_in">printValue</span>();     <span class="comment">// è¾“å‡º: Value: 42</span></span><br><span class="line">    obj.<span class="built_in">setValue</span>(<span class="number">24</span>);     <span class="comment">// ä½¿ç”¨æˆå‘˜å‡½æ•°è®¾ç½®æ–°çš„å€¼</span></span><br><span class="line">    obj.<span class="built_in">printValue</span>();     <span class="comment">// è¾“å‡º: Value: 24</span></span><br><span class="line">    obj.<span class="built_in">printAddress</span>();   <span class="comment">// æ‰“å°å¯¹è±¡çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>MyClass</code>ç±»åŒ…å«ä¸€ä¸ªæ•´å‹æˆå‘˜å˜é‡<code>m_value</code>å’Œå‡ ä¸ªæˆå‘˜å‡½æ•°ã€‚åœ¨<code>setValue()</code>å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code>this</code>æŒ‡é’ˆè®¿é—®å¹¶ä¿®æ”¹äº†å½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡<code>m_value</code>ã€‚<code>printAddress()</code>å‡½æ•°ä½¿ç”¨<code>this</code>æŒ‡é’ˆæ‰“å°äº†å½“å‰å¯¹è±¡çš„åœ°å€ã€‚</p><p>åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>MyClass</code>å¯¹è±¡<code>obj</code>å¹¶è°ƒç”¨äº†ä¸€ç³»åˆ—æˆå‘˜å‡½æ•°ã€‚é€šè¿‡ä½¿ç”¨<code>this</code>æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œç¡®ä¿äº†å¯¹å½“å‰å¯¹è±¡çš„æ­£ç¡®å¼•ç”¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>this</code>æŒ‡é’ˆåœ¨æˆå‘˜å‡½æ•°å†…éƒ¨æ˜¯ä¸€ä¸ªè‡ªåŠ¨æä¾›çš„æŒ‡é’ˆï¼Œæ— éœ€æ˜¾å¼å£°æ˜æˆ–åˆå§‹åŒ–ã€‚å®ƒæ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆï¼Œä¸å…è®¸ä¿®æ”¹å®ƒæŒ‡å‘çš„å¯¹è±¡ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>this</code>å…³é”®å­—åœ¨C++ä¸­è¡¨ç¤ºå½“å‰å¯¹è±¡çš„æŒ‡é’ˆï¼Œç”¨äºåœ¨ç±»çš„æˆå‘˜å‡½æ•°ä¸­è®¿é—®å’Œæ“ä½œå½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ã€‚é€šè¿‡ä½¿ç”¨<code>this</code>æŒ‡é’ˆï¼Œå¯ä»¥ç¡®ä¿æ­£ç¡®å¼•ç”¨å½“å‰å¯¹è±¡ï¼Œå¹¶è¿›è¡Œå¯¹è±¡å†…éƒ¨çš„æ“ä½œå’Œäº¤äº’ã€‚</p><h2 id="ç»§æ‰¿">ç»§æ‰¿</h2><p>åœ¨C++ä¸­ï¼Œç»§æ‰¿æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é‡è¦æ¦‚å¿µï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ˆç§°ä¸ºå­ç±»æˆ–æ´¾ç”Ÿç±»ï¼‰ï¼Œè¯¥ç±»ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºåŸºç±»æˆ–çˆ¶ç±»ï¼‰çš„å±æ€§å’Œè¡Œä¸ºã€‚å­ç±»å¯ä»¥ç»§æ‰¿åŸºç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥æ‰©å±•æˆ–ä¿®æ”¹å®ƒä»¬ã€‚ä»¥ä¸‹æ˜¯å…³äºç»§æ‰¿çš„ä¸€äº›è¦ç‚¹ï¼š</p><ol><li><p>åŸºç±»å’Œæ´¾ç”Ÿç±»ï¼š</p><ul><li>åŸºç±»æ˜¯å·²ç»å­˜åœ¨çš„ç±»ï¼Œå®ƒæä¾›äº†ä¸€ç»„é€šç”¨çš„å±æ€§å’Œè¡Œä¸ºã€‚</li><li>æ´¾ç”Ÿç±»æ˜¯ä»åŸºç±»æ´¾ç”Ÿè€Œæ¥çš„æ–°ç±»ï¼Œå®ƒç»§æ‰¿äº†åŸºç±»çš„å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§å’Œè¡Œä¸ºã€‚</li></ul></li><li><p>è¯­æ³•ï¼š</p><ul><li>åœ¨C++ä¸­ï¼Œä½¿ç”¨å†’å· <code>:</code> æ¥æŒ‡å®šæ´¾ç”Ÿç±»ç»§æ‰¿åŸºç±»ã€‚ä¾‹å¦‚ï¼š<code>class Derived : public Base</code> è¡¨ç¤ºæ´¾ç”Ÿç±» <code>Derived</code> ç»§æ‰¿äº†åŸºç±» <code>Base</code>ã€‚</li><li>ç»§æ‰¿å…³ç³»å¯ä»¥æ˜¯å…¬æœ‰ï¼ˆpublicï¼‰ã€ç§æœ‰ï¼ˆprivateï¼‰æˆ–ä¿æŠ¤ï¼ˆprotectedï¼‰ã€‚å…¬æœ‰ç»§æ‰¿æ„å‘³ç€åŸºç±»çš„å…¬æœ‰æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶æ˜¯å…¬æœ‰çš„ï¼Œç§æœ‰ç»§æ‰¿å’Œä¿æŠ¤ç»§æ‰¿ä¼šæœ‰ç›¸åº”çš„è®¿é—®é™åˆ¶ã€‚</li></ul></li><li><p>ç»§æ‰¿ç±»å‹ï¼š</p><ul><li>å…¬æœ‰ç»§æ‰¿ï¼ˆpublic inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜ï¼Œä½†ç§æœ‰æˆå‘˜ä¸å¯ç›´æ¥è®¿é—®ã€‚</li><li>ç§æœ‰ç»§æ‰¿ï¼ˆprivate inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„æ‰€æœ‰æˆå‘˜ï¼Œä½†å®ƒä»¬éƒ½å˜æˆäº†ç§æœ‰æˆå‘˜ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨è®¿é—®ã€‚</li><li>ä¿æŠ¤ç»§æ‰¿ï¼ˆprotected inheritanceï¼‰ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„ä¿æŠ¤æˆå‘˜å’Œå…¬æœ‰æˆå‘˜ï¼Œä½†å®ƒä»¬éƒ½å˜æˆäº†ä¿æŠ¤æˆå‘˜ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»å†…éƒ¨å’Œæ´¾ç”Ÿç±»çš„å­ç±»ä¸­è®¿é—®ã€‚</li></ul></li><li><p>æˆå‘˜è®¿é—®æƒé™ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ <code>::</code> æ¥å¼•ç”¨åŸºç±»çš„æˆå‘˜ã€‚</li></ul></li><li><p>é‡å†™å’Œæ‰©å±•ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥é‡å†™ï¼ˆoverrideï¼‰åŸºç±»çš„æˆå‘˜å‡½æ•°ï¼Œå³åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®ç°åŸºç±»ä¸­å·²æœ‰çš„å‡½æ•°ã€‚è¿™å…è®¸æ´¾ç”Ÿç±»æä¾›è‡ªå·±çš„å®ç°ã€‚</li><li>æ´¾ç”Ÿç±»è¿˜å¯ä»¥æ·»åŠ æ–°çš„æˆå‘˜å‡½æ•°å’Œæ•°æ®æˆå‘˜ï¼Œä»è€Œæ‰©å±•åŸºç±»çš„åŠŸèƒ½ã€‚</li></ul></li></ol><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†ç»§æ‰¿ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> width;</span><br><span class="line">    <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Shape</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">width</span>(w), <span class="built_in">height</span>(h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Area: &quot;</span> &lt;&lt; <span class="built_in">getArea</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Rectangle</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">Shape</span>(w, h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width * height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Triangle</span>(<span class="type">int</span> w, <span class="type">int</span> h) : <span class="built_in">Shape</span>(w, h) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">getArea</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.5</span> * width * height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿å’Œè®¿é—®å…³ç³»">ç»§æ‰¿å’Œè®¿é—®å…³ç³»</h2><table><thead><tr><th></th><th>åŸºç±»çš„å…¬æœ‰æˆå‘˜</th><th>åŸºç±»çš„ä¿æŠ¤æˆå‘˜</th><th>åŸºç±»çš„ç§æœ‰æˆå‘˜</th></tr></thead><tbody><tr><td>å…¬æœ‰ç»§æ‰¿</td><td>å¯è®¿é—®</td><td>å¯è®¿é—®</td><td>ä¸å¯è®¿é—®</td></tr><tr><td>ä¿æŠ¤ç»§æ‰¿</td><td>ä¿æŠ¤</td><td>ä¿æŠ¤</td><td>ä¸å¯è®¿é—®</td></tr><tr><td>ç§æœ‰ç»§æ‰¿</td><td>ç§æœ‰</td><td>ç§æœ‰</td><td>ä¸å¯è®¿é—®</td></tr></tbody></table><h2 id="æ´¾ç”Ÿç±»è®¿é—®åŸºç±»ç§æœ‰æˆå‘˜">æ´¾ç”Ÿç±»è®¿é—®åŸºç±»ç§æœ‰æˆå‘˜</h2><p>åœ¨C++ä¸­ï¼Œæ´¾ç”Ÿç±»æ˜¯åŸºç±»çš„æ‰©å±•ï¼Œå¯ä»¥ç»§æ‰¿åŸºç±»çš„æˆå‘˜ï¼ˆå…¬æœ‰ã€å—ä¿æŠ¤å’Œç§æœ‰ï¼‰ã€‚ç§æœ‰æˆå‘˜æ˜¯åŸºç±»ä¸­å…·æœ‰æœ€é«˜è®¿é—®æƒé™çš„æˆå‘˜ï¼Œåªèƒ½åœ¨åŸºç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°ä¸­ç›´æ¥è®¿é—®ã€‚ç„¶è€Œï¼Œæ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼š</p><ol><li><p>æˆå‘˜å‡½æ•°ï¼š</p><ul><li>æ´¾ç”Ÿç±»å¯ä»¥é€šè¿‡ç»§æ‰¿åŸºç±»çš„å…¬æœ‰å’Œå—ä¿æŠ¤æˆå‘˜å‡½æ•°ï¼Œé—´æ¥åœ°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>ç”±äºæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„æˆå‘˜å‡½æ•°ï¼Œè¿™äº›æˆå‘˜å‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li></ul></li><li><p>å‹å…ƒå‡½æ•°ï¼š</p><ul><li>å¦‚æœåŸºç±»å°†æ´¾ç”Ÿç±»å£°æ˜ä¸ºå‹å…ƒç±»ï¼Œé‚£ä¹ˆæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li><li>å‹å…ƒå‡½æ•°æ˜¯åœ¨ç±»å¤–éƒ¨å£°æ˜çš„å‡½æ•°ï¼Œå¯ä»¥è®¿é—®è¯¥ç±»çš„ç§æœ‰æˆå‘˜ï¼Œå› æ­¤é€šè¿‡å°†æ´¾ç”Ÿç±»å£°æ˜ä¸ºåŸºç±»çš„å‹å…ƒç±»ï¼Œå¯ä»¥ä½¿æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™ä¸¤ç§æ–¹å¼ï¼Œæ´¾ç”Ÿç±»å¯ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ´¾ç”Ÿç±»åº”è¯¥å°½é‡éµå¾ªå°è£…åŸåˆ™ï¼Œå°½é‡ä¸ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼Œä»¥ä¿æŒç±»çš„å°è£…æ€§å’Œæ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†æ´¾ç”Ÿç±»é€šè¿‡æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateVar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Base</span>(<span class="type">int</span> val) : <span class="built_in">privateVar</span>(val) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">Derived</span>;  <span class="comment">// å°†Derivedå£°æ˜ä¸ºBaseçš„å‹å…ƒç±»</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">accessBasePrivateMember</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> val = privateVar;  <span class="comment">// å¯ä»¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Base&#x27;s privateVar through Derived: &quot;</span> &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Derived derived;</span><br><span class="line">    derived.<span class="built_in">accessBasePrivateMember</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Base</code> ç±»å…·æœ‰ä¸€ä¸ªç§æœ‰æˆå‘˜å˜é‡ <code>privateVar</code>ï¼Œè€Œ <code>Derived</code> ç±»é€šè¿‡å…¬æœ‰ç»§æ‰¿ç»§æ‰¿äº† <code>Base</code> ç±»ï¼Œå¹¶ä¸”å°† <code>Derived</code> å£°æ˜ä¸º <code>Base</code> çš„å‹å…ƒç±»ã€‚å› æ­¤ï¼Œ<code>Derived</code> ç±»çš„æˆå‘˜å‡½æ•° <code>accessBasePrivateMember()</code> å¯ä»¥ç›´æ¥è®¿é—®åŸºç±» <code>Base</code> çš„ç§æœ‰æˆå‘˜å˜é‡ <code>privateVar</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œå³åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>Derived</code> ç±»å¯ä»¥è®¿é—® <code>Base</code> ç±»çš„ç§æœ‰æˆå‘˜ï¼Œä½† <code>Base</code> ç±»ä¸èƒ½è®¿é—® <code>Derived</code> ç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå…³ç³»åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œä»¥ç¡®ä¿è®¿é—®æƒé™çš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚</p><h2 id="override">override</h2><p>åœ¨C++ä¸­ï¼Œ<code>override</code> å…³é”®å­—ç”¨äºæ˜¾å¼åœ°æ ‡è¯†æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ˜¯å¯¹åŸºç±»ä¸­çš„è™šå‡½æ•°è¿›è¡Œé‡å†™ã€‚<code>override</code> å…³é”®å­—æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ã€‚</p><p>ä½¿ç”¨ <code>override</code> çš„ä¸€èˆ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">return_type <span class="title">Derived::function_name</span><span class="params">(parameters)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»çš„è™šå‡½æ•°æ—¶ï¼Œä½¿ç”¨ <code>override</code> å…³é”®å­—å°†å…¶æ”¾ç½®åœ¨å‡½æ•°å£°æ˜çš„æœ«å°¾ã€‚ç¼–è¯‘å™¨ä¼šéªŒè¯è¯¥å‡½æ•°æ˜¯å¦æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„åŸºç±»è™šå‡½æ•°ï¼Œæˆ–è€…å‡½æ•°ç­¾åä¸åŒ¹é…ï¼Œåˆ™ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>override</code> å…³é”®å­—ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;This is the base class.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;This is the derived class.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Base* basePtr = <span class="keyword">new</span> <span class="built_in">Derived</span>();</span><br><span class="line">    basePtr-&gt;<span class="built_in">printMessage</span>();  <span class="comment">// è¾“å‡º: &quot;This is the derived class.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> basePtr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Base</code> ç±»å®šä¹‰äº†ä¸€ä¸ªè™šå‡½æ•° <code>printMessage()</code>ï¼Œè€Œ <code>Derived</code> ç±»é€šè¿‡å…¬æœ‰ç»§æ‰¿é‡å†™äº†è¯¥å‡½æ•°ã€‚åœ¨ <code>Derived</code> ç±»ä¸­ï¼Œä½¿ç”¨ <code>override</code> å…³é”®å­—æ ‡è¯†äº†å¯¹åŸºç±»å‡½æ•°çš„é‡å†™ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ <code>Derived</code> ç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆ <code>basePtr</code>ï¼Œå¹¶è°ƒç”¨äº† <code>printMessage()</code> å‡½æ•°ã€‚ç”±äºåŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»ä¸­é‡å†™çš„å‡½æ•°ã€‚è¾“å‡ºç»“æœä¸º â€œThis is the derived class.â€ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>override</code> å…³é”®å­—ï¼Œå¯ä»¥ç¡®ä¿åœ¨æ´¾ç”Ÿç±»ä¸­æ­£ç¡®åœ°é‡å†™äº†åŸºç±»çš„è™šå‡½æ•°ï¼Œä»¥å®ç°å¤šæ€è¡Œä¸ºã€‚å¦‚æœæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ç­¾åä¸åŸºç±»è™šå‡½æ•°ä¸åŒ¹é…ï¼Œç¼–è¯‘å™¨å°†å‘å‡ºé”™è¯¯æç¤ºï¼Œå¸®åŠ©æˆ‘ä»¬æ£€æµ‹æ½œåœ¨çš„é”™è¯¯ã€‚</p><h2 id="è™šå‡½æ•°">è™šå‡½æ•°</h2><p>è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜ä¸ºè™šå‡½æ•°çš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºå®ç°å¤šæ€æ€§ï¼ˆpolymorphismï¼‰ã€‚å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥è°ƒç”¨æ´¾ç”Ÿç±»çš„ç‰¹å®šå®ç°ã€‚</p><p>è™šå‡½æ•°çš„ä½œç”¨åŒ…æ‹¬ï¼š</p><ol><li><p>å®ç°è¿è¡Œæ—¶å¤šæ€ï¼šé€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œæ ¹æ®å®é™…å¯¹è±¡çš„ç±»å‹ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ã€‚è¿™æ ·å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨å“ªä¸ªæ´¾ç”Ÿç±»çš„å‡½æ•°å®ç°ï¼Œå®ç°äº†å¤šæ€æ€§ã€‚</p></li><li><p>æä¾›æ¥å£çš„æ‰©å±•æ€§ï¼šé€šè¿‡åœ¨åŸºç±»ä¸­å£°æ˜è™šå‡½æ•°ï¼Œå¯ä»¥è®©æ´¾ç”Ÿç±»æ ¹æ®éœ€è¦è¿›è¡Œå‡½æ•°çš„é‡å†™ï¼Œä»è€Œå®ç°æ¥å£çš„æ‰©å±•ã€‚è¿™æ ·ï¼ŒåŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨å¯ä»¥çµæ´»åœ°è°ƒç”¨ä¸åŒæ´¾ç”Ÿç±»çš„ä¸åŒå®ç°ã€‚</p></li></ol><p>è¦å°†å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œéœ€è¦åœ¨åŸºç±»ä¸­ä½¿ç”¨ <code>virtual</code> å…³é”®å­—è¿›è¡Œå£°æ˜ã€‚æ´¾ç”Ÿç±»ä¸­é‡å†™è™šå‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>override</code> å…³é”®å­—æ˜¾å¼æ ‡è¯†ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†è™šå‡½æ•°çš„ä½¿ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a shape.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a circle.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> : <span class="keyword">public</span> Shape &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="type">const</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Drawing a rectangle.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Shape* shapePtr = <span class="keyword">new</span> <span class="built_in">Circle</span>();</span><br><span class="line">    shapePtr-&gt;<span class="built_in">draw</span>();  <span class="comment">// è¾“å‡º: &quot;Drawing a circle.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> shapePtr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Shape</code> ç±»æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œå…¶ä¸­çš„ <code>draw()</code> å‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°ã€‚<code>Circle</code> å’Œ <code>Rectangle</code> ç±»åˆ†åˆ«æ˜¯ <code>Shape</code> ç±»çš„æ´¾ç”Ÿç±»ï¼Œå¹¶åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™äº† <code>draw()</code> å‡½æ•°ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºç±»æŒ‡é’ˆ <code>shapePtr</code>ï¼Œå¹¶å°†å…¶æŒ‡å‘ <code>Circle</code> ç±»çš„å¯¹è±¡ã€‚é€šè¿‡è¯¥æŒ‡é’ˆè°ƒç”¨ <code>draw()</code> å‡½æ•°æ—¶ï¼Œç”±äºå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯ <code>Circle</code> ç±»ä¸­é‡å†™çš„å‡½æ•°ã€‚è¾“å‡ºç»“æœä¸º â€œDrawing a circle.â€ã€‚</p><p>é€šè¿‡ä½¿ç”¨è™šå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…å¯¹è±¡çš„ç±»å‹æ¥åŠ¨æ€é€‰æ‹©è¦è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå®ç°äº†å¤šæ€æ€§å’Œæ¥å£çš„æ‰©å±•æ€§ã€‚è¿™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œæœ‰åŠ©äºç¼–å†™çµæ´»ã€å¯æ‰©å±•çš„ä»£ç ã€‚</p><h1>const</h1><p>åœ¨C++ä¸­ï¼Œ<code>const</code>æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå£°æ˜å¸¸é‡æˆ–æŒ‡ç¤ºå¯¹è±¡ä¸ºåªè¯»ã€‚<code>const</code>å…³é”®å­—å¯ä»¥åº”ç”¨äºå˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹å’Œæˆå‘˜å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯<code>const</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å£°æ˜å¸¸é‡ï¼š<code>const</code>å…³é”®å­—å¯ä»¥ç”¨äºå£°æ˜å¸¸é‡ï¼Œå³æ•°å€¼åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸å¯ä¿®æ”¹çš„å€¼ã€‚å¸¸é‡åœ¨å£°æ˜æ—¶å¿…é¡»è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨åç»­çš„ä»£ç ä¸­ä¸èƒ½è¢«ä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_VALUE = <span class="number">100</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14159</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>å£°æ˜åªè¯»å˜é‡ï¼šå°†<code>const</code>å…³é”®å­—åº”ç”¨äºå˜é‡æ—¶ï¼Œè¡¨ç¤ºè¯¥å˜é‡çš„å€¼ä¸å¯è¢«ä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* constPtr = &amp;x;  <span class="comment">// æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œä¸å¯é€šè¿‡æŒ‡é’ˆä¿®æ”¹å˜é‡çš„å€¼</span></span><br><span class="line"><span class="comment">// *constPtr = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> y = <span class="number">10</span>;  <span class="comment">// å£°æ˜åªè¯»å˜é‡ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">// y = 20;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å‡½æ•°å‚æ•°ï¼šå°†å‚æ•°å£°æ˜ä¸º<code>const</code>å¯ä»¥ç¡®ä¿åœ¨å‡½æ•°å†…éƒ¨ä¸ä¼šä¿®æ”¹å‚æ•°çš„å€¼ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">processValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// value = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹</span></span><br><span class="line">    <span class="comment">// å…¶ä»–æ“ä½œ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>å‡½æ•°è¿”å›ç±»å‹ï¼šå°†å‡½æ•°è¿”å›ç±»å‹å£°æ˜ä¸º<code>const</code>è¡¨ç¤ºè¿”å›çš„å¯¹è±¡æ˜¯åªè¯»çš„ï¼Œä¸å¯åœ¨è°ƒç”¨ç«¯è¿›è¡Œä¿®æ”¹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x = <span class="built_in">getValue</span>();</span><br><span class="line"><span class="comment">// getValue() = 10;  // é”™è¯¯ï¼Œä¸å¯ä¿®æ”¹è¿”å›å€¼</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å£°æ˜ä¸º<code>const</code>çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨åç»­çš„ä»£ç ä¸­ä¿®æ”¹ã€‚</li><li>å£°æ˜ä¸º<code>const</code>çš„å¯¹è±¡åªèƒ½è°ƒç”¨å…¶æˆå‘˜å‡½æ•°ä¸­è¢«å£°æ˜ä¸º<code>const</code>çš„å‡½æ•°ã€‚</li><li><code>const</code>ä¿®é¥°ç¬¦åœ¨æŒ‡é’ˆç±»å‹ä¸­å…·æœ‰ä¸¤ä¸ªä½œç”¨ï¼š<code>const int*</code>è¡¨ç¤ºæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œ<code>int* const</code>è¡¨ç¤ºå¸¸é‡æŒ‡é’ˆï¼ˆæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼‰ã€‚</li><li>å½“å°†<code>const</code>ä¿®é¥°ç¬¦åº”ç”¨äºç±»çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹ç±»çš„æˆå‘˜å˜é‡ã€‚</li></ul><p>ä½¿ç”¨<code>const</code>å…³é”®å­—å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ä¸å¿…è¦çš„å˜é‡ä¿®æ”¹å’Œæ„å¤–çš„å‰¯ä½œç”¨ã€‚åˆç†ä½¿ç”¨<code>const</code>å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶æä¾›æ›´å¥½çš„ä»£ç ç»´æŠ¤æ€§ã€‚åŒæ—¶ï¼Œéœ€è¦æ³¨æ„åœ¨ä½¿ç”¨<code>const</code>ä¿®é¥°æ—¶ï¼Œç¡®ä¿éµå®ˆ<code>const</code>ä¿®é¥°ç¬¦çš„è§„åˆ™ï¼Œé¿å…å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚</p><h1>final</h1><p><code>final</code>æ˜¯C++11å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºé™åˆ¶ç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»çš„æ‰©å±•æ€§ã€‚ä»¥ä¸‹æ˜¯<code>final</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•å’Œä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>ç±»çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨ç±»å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å…¶ä»–ç±»ä»è¯¥ç±»æ´¾ç”Ÿï¼Œå¹¶è¦†ç›–æˆ–æ‰©å±•å…¶åŠŸèƒ½ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> <span class="keyword">final</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;  <span class="comment">// é”™è¯¯ï¼Œæ— æ³•ä»finalç±»Derivedç»§æ‰¿</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>å‡½æ•°çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨è™šå‡½æ•°å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­è¢«é‡å†™ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ´¾ç”Ÿç±»æ— æ³•ä¿®æ”¹åŸºç±»çš„ç‰¹å®šè¡Œä¸ºã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">foo</span><span class="params">()</span> <span class="keyword">final</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// é”™è¯¯ï¼Œæ— æ³•é‡å†™è¢«å£°æ˜ä¸ºfinalçš„è™šå‡½æ•°foo()</span></span><br><span class="line">    <span class="comment">// void foo() override &#123;</span></span><br><span class="line">    <span class="comment">//     // ...</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»§æ‰¿å…³ç³»ä¸­çš„<code>final</code>ä¿®é¥°ï¼šå°†<code>final</code>å…³é”®å­—æ”¾åœ¨æ´¾ç”Ÿç±»å£°æ˜çš„æœ«å°¾ï¼Œè¡¨ç¤ºè¯¥æ´¾ç”Ÿç±»ä¸èƒ½æœ‰åç»­çš„æ´¾ç”Ÿç±»ã€‚è¿™æ ·å¯ä»¥åœ¨ç»§æ‰¿é“¾ä¸ŠæŒ‡å®šæœ€åä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œé˜²æ­¢è¿›ä¸€æ­¥çš„æ‰©å±•ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived1</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived2</span> <span class="keyword">final</span> : <span class="keyword">public</span> Derived1 &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived3</span> : <span class="keyword">public</span> Derived2 &#123;  <span class="comment">// é”™è¯¯ï¼Œæ— æ³•ä»finalç±»Derived2ç»§æ‰¿</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>final</code>å…³é”®å­—çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><code>final</code>å…³é”®å­—ç”¨äºé™åˆ¶æ‰©å±•æ€§ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚åœ¨è®¾è®¡ç±»å’Œç»§æ‰¿å…³ç³»æ—¶ï¼Œåº”ä»”ç»†è€ƒè™‘æ˜¯å¦çœŸæ­£éœ€è¦é™åˆ¶ç»§æ‰¿å’Œå‡½æ•°é‡å†™ã€‚</li><li>ä½¿ç”¨<code>final</code>å…³é”®å­—å¯ä»¥å¢å¼ºç±»çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œç‰¹åˆ«æ˜¯ç”¨äºåŸºç±»æˆ–æ ¸å¿ƒå‡½æ•°ï¼Œä»¥é˜²æ­¢å®ƒä»¬è¢«ä¿®æ”¹ã€‚</li><li>é¿å…æ»¥ç”¨<code>final</code>å…³é”®å­—ï¼Œè¿‡å¤šåœ°ä½¿ç”¨å¯èƒ½å¯¼è‡´ç»§æ‰¿å±‚æ¬¡ç»“æ„å˜å¾—è¿‡äºåƒµç¡¬å’Œä¸çµæ´»ã€‚</li><li>åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œä½¿ç”¨<code>final</code>å…³é”®å­—å¯ä»¥æ˜ç¡®åœ°æŒ‡å®šæœ€åä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œä»¥ç¡®ä¿ç»§æ‰¿é“¾çš„ç»ˆç»“ã€‚</li><li><code>final</code>å…³é”®å­—é€‚ç”¨äºç±»ã€è™šå‡½æ•°å’Œç»§æ‰¿å…³ç³»ï¼Œä½†ä¸é€‚ç”¨äºéè™šæ™®é€šå‡½æ•°ã€‚</li><li>åœ¨ä½¿ç”¨<code>final</code>å…³é”®å­—æ—¶ï¼Œåº”ä¿æŒä»£ç æ¸…æ™°ï¼Œä»¥ä¾¿å…¶ä»–å¼€å‘äººå‘˜èƒ½å¤Ÿç†è§£å’Œç»´æŠ¤ä»£ç ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œ<code>final</code>å…³é”®å­—æä¾›äº†ä¸€ç§åœ¨ç±»ã€å‡½æ•°å’Œç»§æ‰¿å…³ç³»ä¸­é™åˆ¶æ‰©å±•æ€§çš„</p><p>æœºåˆ¶ã€‚é€‚å½“åœ°ä½¿ç”¨<code>final</code>å¯ä»¥å¢å¼ºä»£ç çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œä½†éœ€è¦æ³¨æ„ä¸è¦æ»¥ç”¨å®ƒï¼Œä»¥å…é€ æˆä»£ç çš„åƒµåŒ–å’Œä¸çµæ´»ã€‚</p><h1>æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«</h1><p>æŒ‡é’ˆå’Œå¼•ç”¨æ˜¯C++ä¸­ç”¨äºå¤„ç†å†…å­˜å’Œå¯¹è±¡çš„é‡è¦æ¦‚å¿µï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p><ol><li><p>æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼Œè€Œå¼•ç”¨ä¸€æ—¦ç»‘å®šåˆ°å¯¹è±¡ï¼Œå°±ä¸èƒ½æ›´æ”¹ç»‘å®šçš„å¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥æ˜¯ç©ºå€¼ï¼ˆnullptrï¼‰ï¼Œå³æŒ‡å‘ç©ºåœ°å€ï¼Œè€Œå¼•ç”¨å¿…é¡»åœ¨å£°æ˜æ—¶ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥æŒ‡å‘å¤šä¸ªä¸åŒçš„å¯¹è±¡ï¼Œè€Œå¼•ç”¨åªèƒ½ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä¸èƒ½æ›´æ”¹ä¸ºå¼•ç”¨å…¶ä»–å¯¹è±¡ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥è¿›è¡ŒæŒ‡é’ˆè¿ç®—ï¼ˆå¦‚æŒ‡é’ˆåŠ æ³•ã€æŒ‡é’ˆå‡æ³•ç­‰ï¼‰ï¼Œè€Œå¼•ç”¨æ²¡æœ‰æŒ‡é’ˆè¿ç®—ã€‚</p></li><li><p>æŒ‡é’ˆå¯ä»¥è¢«é‡æ–°åˆ†é…å†…å­˜ï¼Œè€Œå¼•ç”¨ä¸èƒ½ã€‚</p></li><li><p>å¼•ç”¨é€šå¸¸ç”¨ä½œå‡½æ•°çš„å‚æ•°æˆ–è¿”å›ç±»å‹ï¼Œä»¥å®ç°ä¼ é€’å‚æ•°æˆ–è¿”å›å€¼çš„æ•ˆæœã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥ç”¨äºç›¸åŒçš„ç›®çš„ï¼Œä½†å¼•ç”¨é€šå¸¸æ›´ç›´è§‚å’Œå®‰å…¨ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ä»£ç æ¥è¯´æ˜æŒ‡é’ˆå’Œå¼•ç”¨ä¹‹é—´çš„åŒºåˆ«ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyPointer</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    *ptr = <span class="number">100</span>;  <span class="comment">// ä¿®æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyReference</span><span class="params">(<span class="type">int</span>&amp; ref)</span> </span>&#123;</span><br><span class="line">    ref = <span class="number">200</span>;  <span class="comment">// ä¿®æ”¹å¼•ç”¨æ‰€ç»‘å®šçš„å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>* ptr = &amp;num;  <span class="comment">// æŒ‡é’ˆæŒ‡å‘num</span></span><br><span class="line">    <span class="type">int</span>&amp; ref = num;  <span class="comment">// å¼•ç”¨ç»‘å®šåˆ°num</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">modifyPointer</span>(ptr);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Value after modifying pointer: &quot;</span> &lt;&lt; num &lt;&lt; std::endl;  <span class="comment">// è¾“å‡º: 100</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">modifyReference</span>(ref);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Value after modifying reference: &quot;</span> &lt;&lt; num &lt;&lt; std::endl;  <span class="comment">// è¾“å‡º: 200</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•´æ•°å˜é‡ <code>num</code>ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘è¯¥å˜é‡çš„æŒ‡é’ˆ <code>ptr</code> å’Œä¸€ä¸ªå¼•ç”¨ <code>ref</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸¤ä¸ªå‡½æ•° <code>modifyPointer()</code> å’Œ <code>modifyReference()</code>ï¼Œåˆ†åˆ«ç”¨äºä¿®æ”¹æŒ‡é’ˆå’Œå¼•ç”¨æ‰€æŒ‡å‘çš„å€¼ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡æŒ‡é’ˆè°ƒç”¨ <code>modifyPointer()</code> å‡½æ•°æ¥ä¿®æ”¹æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œå¹¶è¾“å‡ºä¿®æ”¹åçš„å€¼ã€‚ç„¶åï¼Œé€šè¿‡å¼•ç”¨è°ƒç”¨ <code>modifyReference()</code> å‡½æ•°æ¥ä¿®æ”¹å¼•ç”¨æ‰€ç»‘å®šçš„å€¼ï¼Œå¹¶å†æ¬¡è¾“å‡ºä¿®æ”¹åçš„å€¼ã€‚åœ¨ä¸¤æ¬¡è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å˜é‡ <code>num</code> çš„å€¼è¢«æˆåŠŸä¿®æ”¹ã€‚</p><p>é€šè¿‡æ¯”è¾ƒæŒ‡é’ˆå’Œå¼•ç”¨çš„ä½¿ç”¨æ–¹å¼å’ŒåŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©é€‚åˆç‰¹å®šæƒ…å†µçš„æ–¹æ³•ã€‚æŒ‡é’ˆæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥ç”¨äºåŠ¨æ€åˆ†é…å†…å­˜å’Œå¤„ç†æ•°æ®ç»“æ„ï¼Œè€Œå¼•ç”¨æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•å’Œæ›´å®‰å…¨çš„æ“ä½œï¼Œå¸¸ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’å’Œè¿”å›å€¼ã€‚</p><h1>å®å®šä¹‰</h1><p>åœ¨C++ä¸­ï¼Œå®å®šä¹‰ï¼ˆMacro Definitionï¼‰æ˜¯ä¸€ç§é¢„å¤„ç†æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ä¹‹å‰å°†ä»£ç ä¸­çš„æ ‡è¯†ç¬¦æ›¿æ¢ä¸ºæŒ‡å®šçš„æ–‡æœ¬ã€‚å®ƒä»¬æ˜¯é€šè¿‡é¢„å¤„ç†å™¨ï¼ˆPreprocessorï¼‰åœ¨ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚</p><p>å®å®šä¹‰ä½¿ç”¨<code>#define</code>æŒ‡ä»¤æ¥åˆ›å»ºï¼Œè¯­æ³•å½¢å¼ä¸ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> å®åç§° æ›¿æ¢æ–‡æœ¬</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå®åç§°æ˜¯ä½ è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ï¼Œæ›¿æ¢æ–‡æœ¬æ˜¯è¦æ›¿æ¢æˆçš„ä»£ç ç‰‡æ®µæˆ–å€¼ã€‚å®åç§°é€šå¸¸ä½¿ç”¨å¤§å†™å­—æ¯å‘½åï¼Œä»¥ä¾¿ä¸å…¶ä»–æ ‡è¯†ç¬¦åŒºåˆ†å¼€æ¥ã€‚</p><p>å®å®šä¹‰å¯ä»¥ç”¨äºæ›¿æ¢ä»»æ„ä»£ç ç‰‡æ®µï¼ŒåŒ…æ‹¬è¡¨è¾¾å¼ã€è¯­å¥ã€å‡½æ•°è°ƒç”¨ç­‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å®å®šä¹‰ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14159</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> radius = <span class="number">5.0</span>;</span><br><span class="line">    <span class="type">double</span> area = PI * radius * radius;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå®å®šä¹‰<code>#define PI 3.14159</code>å°†æ ‡è¯†ç¬¦<code>PI</code>æ›¿æ¢ä¸ºå€¼<code>3.14159</code>ã€‚åœ¨<code>main()</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>PI</code>å®æ¥è®¡ç®—åœ†çš„é¢ç§¯ã€‚</p><p>å®å®šä¹‰è¿˜å¯ä»¥å¸¦æœ‰å‚æ•°ï¼Œç§°ä¸ºå®å‡½æ•°ï¼ˆMacro Functionï¼‰ã€‚å®å‡½æ•°çš„è¯­æ³•ä¸å‡½æ•°ç±»ä¼¼ï¼Œå¯ä»¥æ¥å—å‚æ•°å¹¶åœ¨æ›¿æ¢æ–‡æœ¬ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> SQUARE(x) ((x) * (x))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">SQUARE</span>(<span class="number">5</span>);   <span class="comment">// å±•å¼€ä¸º ((5) * (5))</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå®å‡½æ•°<code>#define SQUARE(x) ((x) * (x))</code>å°†ä¼ å…¥çš„å‚æ•°<code>x</code>å¹³æ–¹å¹¶è¿”å›ç»“æœã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®å®šä¹‰æ˜¯ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸé™åˆ¶ã€‚å®ƒä»¬åœ¨é¢„å¤„ç†é˜¶æ®µç›´æ¥æ›¿æ¢ä»£ç ï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨å®å®šä¹‰æ—¶éœ€è¦è°¨æ…ï¼Œé¿å…å¼•å…¥ä¸å¯é¢„æµ‹çš„é—®é¢˜ã€‚</p><p>æ­¤å¤–ï¼ŒC++ä¸­è¿˜æœ‰ä¸€äº›é¢„å®šä¹‰çš„å®ï¼Œå¦‚<code>__FILE__</code>ï¼ˆå½“å‰æºæ–‡ä»¶åï¼‰ã€<code>__LINE__</code>ï¼ˆå½“å‰è¡Œå·ï¼‰å’Œ<code>__cplusplus</code>ï¼ˆç”¨äºæ£€æŸ¥C++ç¼–è¯‘ç¯å¢ƒï¼‰ç­‰ã€‚è¿™äº›é¢„å®šä¹‰çš„å®åœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸­å¯èƒ½æœ‰æ‰€å·®å¼‚ï¼Œå¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨å®ƒä»¬æ¥è·å–ä¸€äº›ç¼–è¯‘æ—¶çš„ä¿¡æ¯ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œå®å®šä¹‰æ˜¯C++ä¸­çš„é¢„å¤„ç†æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ä¹‹å‰å°†æ ‡è¯†ç¬¦æ›¿æ¢ä¸ºæŒ‡å®šçš„æ–‡æœ¬ã€‚å®ƒä»¬å¯ä»¥ç”¨äºå®šä¹‰å¸¸é‡ã€ç®€å•çš„ä»£ç æ›¿æ¢å’Œå®å‡½æ•°ç­‰ã€‚ä½†éœ€è¦æ³¨æ„å®å®šä¹‰çš„æ½œåœ¨é—®é¢˜ï¼Œå¦‚ç¼ºä¹ç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸé™åˆ¶ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåº”è¯¥æ…é‡è€ƒè™‘å®</p><h1>å‹å…ƒ</h1><p>åœ¨C++ä¸­ï¼Œå‹å…ƒï¼ˆfriendï¼‰æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸æŸä¸ªç±»æˆ–å‡½æ•°è®¿é—®å…¶ä»–ç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå…³ç³»å¯ä»¥ç”¨äºå¢å¼ºç±»ä¹‹é—´çš„åä½œå’Œå°è£…æ€§ã€‚å½“ä¸€ä¸ªç±»å°†å¦ä¸€ä¸ªç±»å£°æ˜ä¸ºå‹å…ƒæ—¶ï¼Œè¢«å£°æ˜çš„ç±»å°±å¯ä»¥è®¿é—®è¯¥ç±»çš„ç§æœ‰æˆå‘˜ã€‚</p><p>å‹å…ƒå…³ç³»æœ‰ä¸¤ç§å½¢å¼ï¼šç±»å‹å…ƒå’Œå‡½æ•°å‹å…ƒã€‚</p><ol><li>ç±»å‹å…ƒï¼š<br>ç±»å‹å…ƒå…è®¸å¦ä¸€ä¸ªç±»è®¿é—®å½“å‰ç±»çš„ç§æœ‰æˆå‘˜ã€‚åœ¨ç±»å®šä¹‰ä¸­å£°æ˜å¦ä¸€ä¸ªç±»ä¸ºå‹å…ƒæ—¶ï¼Œå‹å…ƒç±»å¯ä»¥è®¿é—®å½“å‰ç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚è¿™ç§å…³ç³»æ˜¯åŒå‘çš„ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†ç±»å‹å…ƒçš„åº”ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>;  <span class="comment">// å‰ç½®å£°æ˜ç±»B</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>() : <span class="built_in">privateData</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;  <span class="comment">// ç±»Bæ˜¯ç±»Açš„å‹å…ƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Private data in class A: &quot;</span> &lt;&lt; privateData &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">modifyPrivateData</span><span class="params">(A&amp; obj, <span class="type">int</span> data)</span> </span>&#123;</span><br><span class="line">        obj.privateData = data;  <span class="comment">// å¯ä»¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œç±»Aå°†ç±»Bå£°æ˜ä¸ºå‹å…ƒã€‚ç±»Bçš„æˆå‘˜å‡½æ•°<code>modifyPrivateData()</code>å¯ä»¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜<code>privateData</code>ã€‚è¿™å…è®¸ç±»Bä¿®æ”¹ç±»Açš„ç§æœ‰æ•°æ®ã€‚</p><ol start="2"><li><p>å‡½æ•°å‹å…ƒï¼š<br>å‡½æ•°å‹å…ƒå…è®¸ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°è®¿é—®æŸä¸ªç±»çš„ç§æœ‰æˆå‘˜ã€‚å‡½æ•°å‹å…ƒä¸å±äºä»»ä½•ç±»ï¼Œä½†å¯ä»¥è®¿é—®è¢«å£°æ˜ä¸ºå‹å…ƒçš„ç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚</p><p><strong>è¿™ä¸ªå‡½æ•°çš„å£°æ˜éœ€è¦åœ¨ç±»ä¸­ï¼Œå¹¶åœ¨å£°æ˜å‰åŠ ä¸Šfriendå…³é”®å­—ï¼Œå®šä¹‰å¯ä»¥åœ¨ç±»ä¸­æˆ–ç±»å¤–ï¼Œå› ä¸ºå‹å…ƒå‡½æ•°ä¸å±äºç±»çš„æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨å‹å…ƒå‡½æ•°æ—¶ä¸éœ€è¦å£°æ˜ä½œç”¨åŸŸ</strong></p></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å‡½æ•°å‹å…ƒçš„åº”ç”¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> privateData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>() : <span class="built_in">privateData</span>(<span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">(A&amp; obj)</span></span>;  <span class="comment">// displayPrivateDataå‡½æ•°æ˜¯ç±»Açš„å‹å…ƒ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">displayPrivateData</span><span class="params">(A&amp; obj)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Private data in class A: &quot;</span> &lt;&lt; obj.privateData &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå‡½æ•°<code>displayPrivateData()</code>è¢«å£°æ˜ä¸ºç±»Açš„å‹å…ƒã€‚è¯¥å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®ç±»Açš„ç§æœ‰æˆå‘˜<code>privateData</code>ã€‚</p><p>å‹å…ƒå…³ç³»çš„åº”ç”¨æ–¹å¼å¯ä»¥æœ‰å¤šç§ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å¯ä»¥å°†å…¶ä»–ç±»å£°æ˜ä¸ºå‹å…ƒï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è®¿é—®ç§æœ‰æˆå‘˜ï¼Œä»è€Œå®ç°ç±»ä¹‹é—´çš„æ•°æ®å…±äº«æˆ–åä½œã€‚</li><li>å¯ä»¥å£°æ˜ä¸€äº›ç‹¬ç«‹å‡½æ•°ä½œä¸ºå‹å…ƒï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æˆ–å®ç°ç‰¹å®šçš„æ“ä½œã€‚</li></ul><p>è¯·æ³¨æ„ï¼Œå‹å…ƒå…³ç³»ä¼šç ´åå°è£…æ€§ï¼Œå› æ­¤åº”è°¨æ…ä½¿ç”¨ã€‚åªæœ‰åœ¨ç¡®å®éœ€è¦è®¿é—®ç§æœ‰æˆå‘˜å¹¶ä¸”ä¿¡ä»»å‹å…ƒç±»æˆ–å‡½æ•°æ—¶ï¼Œæ‰åº”ä½¿ç”¨å‹å…ƒå…³ç³»ã€‚</p><h1>æšä¸¾</h1><p>åœ¨C++ä¸­ï¼Œæšä¸¾ï¼ˆenumerationï¼‰æ˜¯ä¸€ç§ç”¨äºå®šä¹‰å‘½åå¸¸é‡é›†åˆçš„æ•°æ®ç±»å‹ã€‚æšä¸¾æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºä¸€ç»„ç›¸å…³çš„ç¦»æ•£å€¼ï¼Œå¹¶å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨æšä¸¾çš„åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">EnumName</span> &#123;</span><br><span class="line">    Value1,</span><br><span class="line">    Value2,</span><br><span class="line">    Value3 = <span class="number">10</span>,</span><br><span class="line">    Value4</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>EnumName</code> æ˜¯æšä¸¾ç±»å‹çš„åç§°ã€‚<code>Value1</code>ã€<code>Value2</code>ã€<code>Value3</code> å’Œ <code>Value4</code> æ˜¯æšä¸¾å¸¸é‡ï¼Œå®ƒä»¬ä»£è¡¨äº†æšä¸¾ç±»å‹çš„ä¸åŒå–å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å¸¸é‡çš„å€¼ä¸º 0ï¼Œåç»­çš„æšä¸¾å¸¸é‡çš„å€¼é€’å¢ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ºæšä¸¾å¸¸é‡æŒ‡å®šç‰¹å®šçš„å€¼ï¼ˆå¦‚ <code>Value3 = 10</code>ï¼‰ï¼Œåç»­çš„æšä¸¾å¸¸é‡å°†æŒ‰ç…§å‰ä¸€ä¸ªå¸¸é‡çš„å€¼é€’å¢ã€‚</p><p>æšä¸¾çš„å¸¸é‡å¯ä»¥åœ¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ï¼Œå°±åƒå…¶ä»–å¸¸é‡ä¸€æ ·ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨æšä¸¾çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Day</span> &#123;</span><br><span class="line">    Monday,</span><br><span class="line">    Tuesday,</span><br><span class="line">    Wednesday,</span><br><span class="line">    Thursday,</span><br><span class="line">    Friday,</span><br><span class="line">    Saturday,</span><br><span class="line">    Sunday</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Day today = Wednesday;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (today == Wednesday) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Today is Wednesday.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Today is not Wednesday.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè¡¨ç¤ºæ˜ŸæœŸå‡ çš„æšä¸¾ç±»å‹ <code>Day</code>ï¼Œç„¶åä½¿ç”¨æšä¸¾ç±»å‹åˆ›å»ºäº†ä¸€ä¸ªå˜é‡ <code>today</code>ï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸º <code>Wednesday</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡ä»¶è¯­å¥æ¥æ£€æŸ¥ <code>today</code> æ˜¯å¦ç­‰äº <code>Wednesday</code>ï¼Œå¹¶è¾“å‡ºç›¸åº”çš„æ¶ˆæ¯ã€‚</p><p>æšä¸¾å¯ä»¥ä¸æ•´æ•°ç±»å‹è¿›è¡Œéšå¼è½¬æ¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†æ•´æ•°å€¼è½¬æ¢ä¸ºæšä¸¾ç±»å‹ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Day day = <span class="built_in">static_cast</span>&lt;Day&gt;(<span class="number">2</span>);  <span class="comment">// å°†æ•´æ•°å€¼ 2 è½¬æ¢ä¸º Day æšä¸¾ç±»å‹</span></span><br></pre></td></tr></table></figure><p>æšä¸¾ç±»å‹å¯ä»¥ç”¨ä½œå‡½æ•°çš„å‚æ•°ç±»å‹æˆ–è¿”å›ç±»å‹ï¼Œä»¥æä¾›æ›´å…·å¯è¯»æ€§çš„ä»£ç ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Day <span class="title">getNextDay</span><span class="params">(Day currentDay)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;Day&gt;((currentDay + <span class="number">1</span>) % <span class="number">7</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‡½æ•°æ¥å—ä¸€ä¸ª <code>Day</code> ç±»å‹çš„å‚æ•° <code>currentDay</code>ï¼Œå¹¶è¿”å›ä¸‹ä¸€å¤©çš„æšä¸¾å€¼ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæšä¸¾ä¸­çš„å¸¸é‡åç§°åœ¨åŒä¸€ä½œç”¨åŸŸä¸­æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½é‡å¤å®šä¹‰ç›¸åŒåç§°çš„æšä¸¾å¸¸é‡ã€‚</p><p>é€šè¿‡ä½¿ç”¨æšä¸¾ï¼Œæ‚¨å¯ä»¥æ›´æ¸…æ™°åœ°è¡¨ç¤ºä¸€ç»„ç›¸å…³çš„å¸¸é‡ï¼Œå¹¶ä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><h1>ç»“æ„ä½“</h1><p>åœ¨C++ä¸­ï¼Œç»“æ„ä½“ï¼ˆstructï¼‰æ˜¯ä¸€ç§ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œç”¨äºç»„åˆä¸åŒç±»å‹çš„æ•°æ®æˆå‘˜ã€‚å®ƒç±»ä¼¼äºç±»ï¼ˆclassï¼‰ï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚ä¸‹é¢æ˜¯å…³äºC++ç»“æ„ä½“çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li>å®šä¹‰ç»“æ„ä½“ï¼šç»“æ„ä½“å®šä¹‰ä½¿ç”¨<code>struct</code>å…³é”®å­—ï¼Œåé¢ç´§è·Ÿç»“æ„ä½“çš„åç§°å’Œä¸€å¯¹èŠ±æ‹¬å·ã€‚åœ¨èŠ±æ‹¬å·ä¸­ï¼Œæ‚¨å¯ä»¥å£°æ˜ç»“æ„ä½“çš„æ•°æ®æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">float</span> height;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>Person</code>çš„ç»“æ„ä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªæ•°æ®æˆå‘˜ï¼š<code>age</code>ï¼ˆæ•´æ•°ç±»å‹ï¼‰ï¼Œ<code>name</code>ï¼ˆå­—ç¬¦æ•°ç»„ç±»å‹ï¼‰ï¼Œå’Œ<code>height</code>ï¼ˆæµ®ç‚¹æ•°ç±»å‹ï¼‰ã€‚</p><ol start="2"><li>åˆ›å»ºç»“æ„ä½“å˜é‡ï¼šè¦ä½¿ç”¨ç»“æ„ä½“ï¼Œæ‚¨éœ€è¦åˆ›å»ºç»“æ„ä½“çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä¾‹ï¼ˆå˜é‡ï¼‰ã€‚åˆ›å»ºç»“æ„ä½“å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç»“æ„ä½“åç§°åè·Ÿå˜é‡åç§°ï¼Œå¹¶ç”¨ç»“æ„ä½“çš„æ•°æ®æˆå‘˜åˆå§‹åŒ–å®ƒä»¬ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Person person1;</span><br><span class="line">person1.age = <span class="number">25</span>;</span><br><span class="line"><span class="built_in">strcpy</span>(person1.name, <span class="string">&quot;John&quot;</span>);</span><br><span class="line">person1.height = <span class="number">175.5</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>person1</code>çš„<code>Person</code>ç»“æ„ä½“å˜é‡ï¼Œå¹¶è®¾ç½®äº†å…¶æˆå‘˜çš„å€¼ã€‚</p><ol start="3"><li>è®¿é—®ç»“æ„ä½“æˆå‘˜ï¼šå¯ä»¥ä½¿ç”¨ç‚¹ï¼ˆ<code>.</code>ï¼‰è¿ç®—ç¬¦æ¥è®¿é—®ç»“æ„ä½“å˜é‡çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; person1.name &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; person1.age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Height: &quot;</span> &lt;&lt; person1.height &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ¼”ç¤ºäº†å¦‚ä½•è®¿é—®<code>person1</code>ç»“æ„ä½“å˜é‡çš„æˆå‘˜å¹¶å°†å…¶è¾“å‡ºã€‚</p><ol start="4"><li>ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°ï¼šç»“æ„ä½“å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPersonInfo</span><span class="params">(Person p)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; p.name &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Age: &quot;</span> &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Height: &quot;</span> &lt;&lt; p.height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°å¹¶ä¼ é€’ç»“æ„ä½“å˜é‡</span></span><br><span class="line"><span class="built_in">printPersonInfo</span>(person1);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>printPersonInfo</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª<code>Person</code>ç»“æ„ä½“å‚æ•°ï¼Œå¹¶æ‰“å°è¯¥ç»“æ„ä½“çš„æˆå‘˜ä¿¡æ¯ã€‚</p><p>è¿™äº›æ˜¯å…³äºC++ç»“æ„ä½“çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ã€‚ç»“æ„ä½“å…è®¸æ‚¨åœ¨ä¸€ä¸ªæ•°æ®ç±»å‹ä¸­ç»„åˆå¤šä¸ªç›¸å…³æ•°æ®æˆå‘˜ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°æ“ä½œå’Œç®¡ç†æ•°æ®ã€‚</p><h1>å…±åŒä½“</h1><p>åœ¨C++ä¸­ï¼Œå…±åŒä½“ï¼ˆunionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå…è®¸åœ¨åŒä¸€å†…å­˜ç©ºé—´ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¸ç»“æ„ä½“ä¸åŒï¼Œå…±åŒä½“çš„æ‰€æœ‰æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜ã€‚å…±åŒä½“çš„å¤§å°ç­‰äºå…¶æœ€å¤§æˆå‘˜çš„å¤§å°ã€‚</p><p>ä¸‹é¢æ˜¯æœ‰å…³C++å…±åŒä½“çš„ä¸€äº›é‡è¦ä¿¡æ¯ï¼š</p><ol><li>å®šä¹‰å…±åŒä½“ï¼šä½¿ç”¨<code>union</code>å…³é”®å­—å®šä¹‰å…±åŒä½“ï¼Œåè·Ÿå…±åŒä½“çš„åç§°å’Œä¸€å¯¹èŠ±æ‹¬å·ã€‚åœ¨èŠ±æ‹¬å·ä¸­ï¼Œæ‚¨å¯ä»¥å£°æ˜å…±åŒä½“çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">    <span class="type">int</span> intValue;</span><br><span class="line">    <span class="type">float</span> floatValue;</span><br><span class="line">    <span class="type">char</span> stringValue[<span class="number">20</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>Data</code>çš„å…±åŒä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªæˆå‘˜ï¼š<code>intValue</code>ï¼ˆæ•´æ•°ç±»å‹ï¼‰ï¼Œ<code>floatValue</code>ï¼ˆæµ®ç‚¹æ•°ç±»å‹ï¼‰ï¼Œå’Œ<code>stringValue</code>ï¼ˆå­—ç¬¦æ•°ç»„ç±»å‹ï¼‰ã€‚</p><ol start="2"><li>ä½¿ç”¨å…±åŒä½“ï¼šå¯ä»¥åˆ›å»ºå…±åŒä½“çš„å®ä¾‹ï¼Œå¹¶å¯¹å…¶æˆå‘˜è¿›è¡Œèµ‹å€¼ã€‚å…±åŒä½“çš„æ‰€æœ‰æˆå‘˜å°†å…±äº«åŒä¸€å—å†…å­˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Data data;</span><br><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line">data.floatValue = <span class="number">3.14</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br><span class="line"><span class="built_in">strcpy</span>(data.stringValue, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;String value: &quot;</span> &lt;&lt; data.stringValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>data</code>çš„<code>Data</code>å…±åŒä½“å®ä¾‹ï¼Œå¹¶å¯¹å…¶ä¸åŒçš„æˆå‘˜èµ‹å€¼ã€‚æ³¨æ„ï¼Œå¯¹ä¸€ä¸ªæˆå‘˜çš„èµ‹å€¼å°†ä¼šå½±å“å…¶ä»–æˆå‘˜çš„å€¼ï¼Œå› ä¸ºå®ƒä»¬å…±äº«åŒä¸€å—å†…å­˜ã€‚</p><ol start="3"><li>è®¿é—®å…±åŒä½“æˆå‘˜ï¼šç”±äºå…±åŒä½“çš„æˆå‘˜å…±äº«åŒä¸€å—å†…å­˜ï¼Œåªèƒ½åŒæ—¶è®¿é—®ä¸€ä¸ªæˆå‘˜ã€‚å¯ä»¥ä½¿ç”¨ç‚¹ï¼ˆ<code>.</code>ï¼‰è¿ç®—ç¬¦æ¥è®¿é—®å…±åŒä½“çš„æˆå‘˜ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">data.floatValue = <span class="number">3.14</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">strcpy</span>(data.stringValue, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;String value: &quot;</span> &lt;&lt; data.stringValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ¯æ¬¡è®¿é—®å…±åŒä½“çš„ä¸åŒæˆå‘˜ä¹‹å‰ï¼Œå…ˆä¸ºè¯¥æˆå‘˜èµ‹å€¼ï¼Œä»¥ç¡®ä¿æ­£ç¡®è®¿é—®å’Œè§£é‡Šå…±åŒä½“çš„å†…å®¹ã€‚</p><ol start="4"><li>å…±åŒä½“çš„åº”ç”¨ï¼šå…±åŒä½“å¸¸ç”¨äºåœ¨ä¸åŒç±»å‹ä¹‹é—´è¿›è¡Œç±»å‹è½¬æ¢æˆ–èŠ‚çœå†…å­˜ã€‚é€šè¿‡ä¸ºå…±åŒä½“çš„ä¸åŒæˆå‘˜èµ‹å€¼ï¼Œå¯ä»¥å°†æ•°æ®ä»¥ä¸åŒç±»å‹è¿›è¡Œè§£é‡Šå’Œæ“ä½œã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Data data;</span><br><span class="line">data.intValue = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Int value: &quot;</span> &lt;&lt; data.intValue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">data.floatValue = <span class="built_in">static_cast</span>&lt;<span class="type">float</span>&gt;(data.intValue);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Float value: &quot;</span> &lt;&lt; data.floatValue &lt;&lt; endl;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡å°†æ•´æ•°å€¼èµ‹ç»™å…±åŒä½“çš„<code>intValue</code>æˆå‘˜ï¼Œç„¶åå°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°ç±»å‹ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜å†…å­˜ä¸­çš„å€¼çš„æƒ…å†µä¸‹ä»¥ä¸åŒç±»å‹è§£é‡Šè¯¥å€¼ã€‚</p><p>è¿™äº›æ˜¯å…³äºC++</p><p>å…±åŒä½“çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ã€‚å…±åŒä½“æä¾›äº†ä¸€ç§åœ¨ç›¸åŒå†…å­˜ç©ºé—´ä¸­å­˜å‚¨ä¸åŒç±»å‹æ•°æ®çš„æ–¹æ³•ï¼Œä½†éœ€è¦å°å¿ƒä½¿ç”¨ï¼Œç¡®ä¿æ­£ç¡®è§£é‡Šå’Œè®¿é—®å…±åŒä½“çš„æˆå‘˜ã€‚</p><h1>[=]</h1><p>åœ¨C++ä¸­ï¼Œ<code>[=]</code>æ˜¯ä¸€ç§lambdaè¡¨è¾¾å¼çš„æ•è·åˆ—è¡¨ï¼ˆCapture Listï¼‰å½¢å¼ï¼Œç”¨äºæŒ‡å®šlambdaè¡¨è¾¾å¼ä¸­çš„å¤–éƒ¨å˜é‡çš„è®¿é—®æ–¹å¼ã€‚</p><p>Lambdaè¡¨è¾¾å¼æ˜¯C++11å¼•å…¥çš„ä¸€ç§åŒ¿åå‡½æ•°å½¢å¼ï¼Œå®ƒå¯ä»¥ç”¨äºå®šä¹‰ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°å¯¹è±¡ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥æ•è·å±€éƒ¨å˜é‡ï¼Œå³åœ¨å®šä¹‰lambdaè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥è®¿é—®å…¶æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚</p><p>æ•è·åˆ—è¡¨<code>[=]</code>è¡¨ç¤ºé€šè¿‡å€¼æ•è·æ–¹å¼æ¥è®¿é—®å¤–éƒ¨å˜é‡ã€‚å…·ä½“è€Œè¨€ï¼Œä½¿ç”¨<code>[=]</code>æ•è·åˆ—è¡¨ä¼šå¯¼è‡´lambdaè¡¨è¾¾å¼å†…éƒ¨å¯¹å¤–éƒ¨å˜é‡è¿›è¡Œå€¼æ‹·è´ï¼Œä»¥ä¾¿åœ¨lambdaè¡¨è¾¾å¼æ‰§è¡Œæ—¶ä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨<code>[=]</code>æ•è·åˆ—è¡¨çš„lambdaè¡¨è¾¾å¼ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> lambda = [=]() &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;x + y = &quot;</span> &lt;&lt; x + y &lt;&lt; std::endl;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">lambda</span>();  <span class="comment">// è¾“å‡ºç»“æœï¼šx + y = 30</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œlambdaè¡¨è¾¾å¼ä½¿ç”¨äº†<code>[=]</code>æ•è·åˆ—è¡¨æ¥æ•è·å¤–éƒ¨å˜é‡<code>x</code>å’Œ<code>y</code>ã€‚è¿™æ„å‘³ç€lambdaè¡¨è¾¾å¼å†…éƒ¨å¯ä»¥è®¿é—®å¹¶ä½¿ç”¨è¿™äº›å˜é‡çš„å€¼ã€‚</p><p>å½“æ‰§è¡Œlambdaè¡¨è¾¾å¼æ—¶ï¼Œä¼šè¾“å‡ºå˜é‡<code>x</code>å’Œ<code>y</code>çš„å’Œï¼Œå³30ã€‚è¿™æ˜¯å› ä¸ºåœ¨lambdaè¡¨è¾¾å¼å®šä¹‰æ—¶ï¼Œé€šè¿‡å€¼æ•è·æ–¹å¼å°†<code>x</code>å’Œ<code>y</code>çš„å€¼æ‹·è´åˆ°lambdaå¯¹è±¡ä¸­ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡å€¼æ•è·æ–¹å¼æ•è·çš„å¤–éƒ¨å˜é‡æ˜¯åªè¯»çš„ï¼Œå³æ— æ³•åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä¿®æ”¹è¿™äº›å˜é‡çš„å€¼ã€‚å¦‚æœå¸Œæœ›èƒ½å¤Ÿä¿®æ”¹å¤–éƒ¨å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨æ•è·æ–¹å¼ï¼ˆ<code>[&amp;]</code>ï¼‰æ¥æ•è·å¤–éƒ¨å˜é‡ã€‚</p><h1>static_cast</h1><p><code>static_cast</code>æ˜¯C++ä¸­çš„ä¸€ç§ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºè¿›è¡Œé™æ€ç±»å‹è½¬æ¢ã€‚å®ƒç”¨äºåœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹è½¬æ¢ï¼Œç¼–è¯‘å™¨åœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚<code>static_cast</code>å¯ä»¥ç”¨äºä»¥ä¸‹å‡ ç§è½¬æ¢ï¼š</p><ol><li>ç›¸å…³ç±»å‹çš„è½¬æ¢ï¼š<code>static_cast</code>å¯ç”¨äºç›¸äº’å…³è”çš„ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä¾‹å¦‚æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼ˆä¾‹å¦‚ï¼Œæ•´æ•°åˆ°æµ®ç‚¹æ•°ï¼Œæµ®ç‚¹æ•°åˆ°æ•´æ•°ï¼‰ï¼Œä»¥åŠæŒ‡é’ˆå’Œå¼•ç”¨ä¹‹é—´çš„è½¬æ¢ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> intValue = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> doubleValue = <span class="built_in">static_cast</span>&lt;<span class="type">double</span>&gt;(intValue);</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> floatValue = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">int</span> intFromFloat = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(floatValue);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;number;</span><br><span class="line"><span class="type">void</span>* voidPtr = <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(ptr);</span><br></pre></td></tr></table></figure><ol start="2"><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„è½¬æ¢ï¼š<code>static_cast</code>å¯ç”¨äºåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ä¸æ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ä¹‹é—´çš„è½¬æ¢ã€‚ä½†æ˜¯ï¼Œè¿™ç§è½¬æ¢åªæœ‰åœ¨ç¡®ä¿æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡å®é™…ä¸Šæ˜¯æ´¾ç”Ÿç±»å¯¹è±¡æ—¶æ‰æ˜¯å®‰å…¨çš„ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123; ... &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123; ... &#125;;</span><br><span class="line"></span><br><span class="line">Base* basePtr = <span class="keyword">new</span> <span class="built_in">Derived</span>();</span><br><span class="line">Derived* derivedPtr = <span class="built_in">static_cast</span>&lt;Derived*&gt;(basePtr);</span><br></pre></td></tr></table></figure><ol start="3"><li>éšå¼ç±»å‹è½¬æ¢çš„æ˜¾å¼åŒ–ï¼š<code>static_cast</code>å¯ä»¥å°†ç¼–è¯‘å™¨éšå¼æ‰§è¡Œçš„ç±»å‹è½¬æ¢æ˜¾å¼åŒ–ã€‚è¿™å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œæ˜ç¡®æ€§ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> y = <span class="built_in">static_cast</span>&lt;<span class="type">double</span>&gt;(x);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> ch = <span class="built_in">static_cast</span>&lt;<span class="type">char</span>&gt;(x);</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>static_cast</code>å¹¶ä¸ä¼šæ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥ï¼Œå› æ­¤åœ¨è¿›è¡Œè½¬æ¢æ—¶è¦ç¡®ä¿è½¬æ¢æ˜¯å®‰å…¨çš„ã€‚å¦‚æœå­˜åœ¨ä¸å®‰å…¨çš„è½¬æ¢ï¼Œåº”è¯¥ä½¿ç”¨æ›´ä¸¥æ ¼çš„è½¬æ¢æ“ä½œç¬¦ï¼ˆå¦‚<code>dynamic_cast</code>ï¼‰æ¥è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p><p>å¦å¤–ï¼Œ<code>static_cast</code>ä¹Ÿä¸èƒ½ç”¨äºå°†åº•å±‚constè½¬æ¢ä¸ºéåº•å±‚constï¼Œæˆ–è€…æ‰§è¡Œä¸åº•å±‚constæ— å…³çš„å…¶ä»–è½¬æ¢ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨<code>const_cast</code>å’Œ<code>reinterpret_cast</code>è¿›è¡Œè½¬æ¢ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>static_cast</code>æ˜¯ä¸€ç§ç”¨äºé™æ€ç±»å‹è½¬æ¢çš„æ“ä½œç¬¦ï¼Œé€‚ç”¨äºç›¸å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„è½¬æ¢ï¼Œä»¥åŠæ˜¾å¼åŒ–éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨ä½¿ç”¨<code>static_cast</code>æ—¶ï¼Œè¦ç¡®ä¿è½¬æ¢æ˜¯å®‰å…¨çš„å¹¶éµå¾ªC++çš„ç±»å‹ç³»ç»Ÿè§„åˆ™ã€‚</p><h1>goto</h1><p><code>goto</code>æ˜¯C++ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå®ç°æ— æ¡ä»¶çš„è·³è½¬è¯­å¥ã€‚å®ƒå¯ä»¥å°†ç¨‹åºçš„æ§åˆ¶æµç›´æ¥è·³è½¬åˆ°æŒ‡å®šçš„æ ‡ç­¾å¤„ã€‚<code>goto</code>è¯­å¥çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">label_name:</span><br><span class="line">    <span class="comment">// ä»£ç å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·³è½¬åˆ°æŒ‡å®šçš„æ ‡ç­¾å¤„</span></span><br><span class="line"><span class="keyword">goto</span> label_name;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›å…³äº<code>goto</code>ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹çš„è¯´æ˜ï¼š</p><ol><li><code>goto</code>çš„ä½¿ç”¨æ–¹æ³•ï¼šé¦–å…ˆï¼Œåœ¨ä»£ç ä¸­å®šä¹‰ä¸€ä¸ªæ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œå¹¶åœ¨æ ‡ç­¾åé¢è·Ÿç€ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰ã€‚ç„¶åï¼Œé€šè¿‡ä½¿ç”¨<code>goto</code>å…³é”®å­—ï¼Œå°†ç¨‹åºçš„æ§åˆ¶æµæ— æ¡ä»¶åœ°è·³è½¬åˆ°æ ‡ç­¾æ‰€åœ¨çš„ä½ç½®ã€‚è¿™ç§è·³è½¬å¯ä»¥åœ¨åŒä¸€ä¸ªå‡½æ•°å†…éƒ¨ã€è·¨è¶Šå¤šä¸ªä»£ç å—æˆ–å‡½æ•°ä¹‹é—´è¿›è¡Œã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">myFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€äº›ä»£ç ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">goto</span> jump;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™éƒ¨åˆ†ä»£ç å°†è¢«è·³è¿‡</span></span><br><span class="line"></span><br><span class="line">    jump:</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°è¿™é‡Œç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p><code>goto</code>çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>é¿å…æ»¥ç”¨ï¼š<code>goto</code>è¯­å¥çš„æ»¥ç”¨ä¼šå¯¼è‡´ç¨‹åºçš„é€»è¾‘å˜å¾—æ··ä¹±å’Œéš¾ä»¥ç†è§£ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨ç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥ï¼ˆå¦‚<code>if</code>ã€<code>while</code>ã€<code>for</code>ç­‰ï¼‰æ¥å®ç°ä»£ç é€»è¾‘ã€‚</p></li><li><p>é˜²æ­¢è·¨è¿‡å˜é‡åˆå§‹åŒ–ï¼šä½¿ç”¨<code>goto</code>è¯­å¥æ—¶è¦å°å¿ƒï¼Œä»¥é˜²æ­¢è·³è¿‡å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚å¦‚æœåœ¨è·³è½¬å‰éœ€è¦å¯¹æŸä¸ªå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç¡®ä¿å˜é‡çš„åˆå§‹åŒ–æ“ä½œä½äºæ ‡ç­¾ä¹‹å‰ã€‚</p></li><li><p>é¿å…è·¨å‡½æ•°è·³è½¬ï¼šåº”é¿å…åœ¨ä¸åŒå‡½æ•°ä¹‹é—´ä½¿ç”¨<code>goto</code>è¯­å¥è¿›è¡Œè·³è½¬ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§å’Œå¯è¯»æ€§ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚</p></li><li><p>ä¿æŒä»£ç æ¸…æ™°å’Œå¯è¯»æ€§ï¼šä½¿ç”¨<code>goto</code>è¯­å¥æ—¶ï¼Œåº”è¯¥æ³¨é‡ä»£ç çš„æ¸…æ™°æ€§å’Œå¯è¯»æ€§ã€‚ç»™æ ‡ç­¾å’Œè·³è½¬è¯­å¥èµ·å…·æœ‰æè¿°æ€§çš„åç§°ï¼Œä»¥ä¾¿äºä»–äººç†è§£ä»£ç çš„é€»è¾‘ã€‚</p></li><li><p>å°½é‡é¿å…ä½¿ç”¨ï¼šç”±äº<code>goto</code>è¯­å¥å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ï¼Œä»¥åŠæ½œåœ¨çš„é”™è¯¯å’Œæ··ä¹±ï¼Œå»ºè®®å°½é‡é¿å…ä½¿ç”¨<code>goto</code>è¯­å¥ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥å¯ä»¥æ›´å¥½åœ°è¡¨è¾¾ä»£ç çš„é€»è¾‘ã€‚</p></li></ul></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡<code>goto</code>è¯­å¥åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æä¾›æ–¹ä¾¿ï¼Œä½†å®ƒå¾€å¾€è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸è‰¯çš„ç¼–ç¨‹å®è·µï¼Œåº”è¯¥è°¨æ…ä½¿ç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»“æ„åŒ–çš„æ§åˆ¶æµè¯­å¥æ¥ç»„</p><p>ç»‡ä»£ç å¹¶ä¿æŒä»£ç çš„æ¸…æ™°æ€§å’Œå¯è¯»æ€§ã€‚</p><h1>auto</h1><p>åœ¨C++ä¸­ï¼Œ<code>auto</code>å…³é”®å­—ç”¨äºè‡ªåŠ¨æ¨æ–­å˜é‡çš„ç±»å‹ã€‚é€šè¿‡ä½¿ç”¨<code>auto</code>å…³é”®å­—ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å˜é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼æ¥æ¨æ–­å˜é‡çš„ç±»å‹ï¼Œæ— éœ€æ˜¾å¼æŒ‡å®šç±»å‹ã€‚</p><p><code>auto</code>å…³é”®å­—çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> variable = value;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>variable</code>æ˜¯å˜é‡åï¼Œ<code>value</code>æ˜¯å˜é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> x = <span class="number">10</span>;  <span class="comment">// æ¨æ–­xçš„ç±»å‹ä¸ºintï¼Œåˆå§‹åŒ–ä¸º10</span></span><br><span class="line"><span class="keyword">auto</span> y = <span class="number">3.14</span>;  <span class="comment">// æ¨æ–­yçš„ç±»å‹ä¸ºdoubleï¼Œåˆå§‹åŒ–ä¸º3.14</span></span><br><span class="line"><span class="keyword">auto</span> name = <span class="string">&quot;John&quot;</span>;  <span class="comment">// æ¨æ–­nameçš„ç±»å‹ä¸ºconst char*ï¼Œåˆå§‹åŒ–ä¸ºæŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="keyword">auto</span> result = <span class="built_in">add</span>(<span class="number">5</span>, <span class="number">7</span>);  <span class="comment">// æ¨æ–­resultçš„ç±»å‹ä¸ºå‡½æ•°addçš„è¿”å›ç±»å‹ï¼Œæ ¹æ®å‡½æ•°å®šä¹‰æ¥æ¨æ–­</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨<code>auto</code>å…³é”®å­—ï¼Œå¯ä»¥ç®€åŒ–å˜é‡å£°æ˜çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯å½“å˜é‡çš„ç±»å‹è¾ƒä¸ºå¤æ‚æˆ–éš¾ä»¥ç¡®å®šæ—¶ã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼çš„ç±»å‹æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>auto</code>å…³é”®å­—åœ¨å˜é‡å£°æ˜æ—¶ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºå‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹ã€ç±»çš„æˆå‘˜å˜é‡ç­‰åœºæ™¯ã€‚æ­¤å¤–ï¼Œç”±äºç±»å‹æ˜¯åœ¨ç¼–è¯‘æ—¶æ¨æ–­çš„ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä»£ç å¯è¯»æ€§é™ä½ï¼Œç‰¹åˆ«æ˜¯å½“åˆå§‹åŒ–è¡¨è¾¾å¼è¾ƒä¸ºå¤æ‚æˆ–ç±»å‹ä¸æ˜æ˜¾æ—¶ã€‚</p><p>åœ¨C++11ä¹‹åï¼Œå¼•å…¥äº†æ›´åŠ å¼ºå¤§çš„ç±»å‹æ¨æ–­åŠŸèƒ½ï¼Œä¾‹å¦‚<code>decltype</code>å’Œ<code>auto</code>ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥æ›´çµæ´»åœ°æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ã€‚åœ¨C++14ä¸­ï¼Œè¿˜å¼•å…¥äº†<code>decltype(auto)</code>æ¥è¿›è¡Œæ›´ç²¾ç¡®çš„ç±»å‹æ¨æ–­ã€‚è¿™äº›åŠŸèƒ½åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹å¯ä»¥æä¾›æ›´çµæ´»å’Œå‡†ç¡®çš„ç±»å‹æ¨æ–­ã€‚</p><h1>typeid</h1><p>åœ¨C++ä¸­ï¼Œ<code>typeid</code>æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œç”¨äºè·å–è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒè¿”å›ä¸€ä¸ª<code>type_info</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æœ‰å…³è¡¨è¾¾å¼ç±»å‹çš„ä¿¡æ¯ã€‚<code>typeid</code>å¯ä»¥ç”¨äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><ol><li>è·å–ç±»å‹ä¿¡æ¯ï¼šä½¿ç”¨<code>typeid</code>å¯ä»¥è·å–è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒå¯ä»¥ç”¨äºå˜é‡ã€å¯¹è±¡ã€æŒ‡é’ˆã€å¼•ç”¨ä»¥åŠç±»çš„å®ä¾‹ç­‰ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(num);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">MyClass obj;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; objType = <span class="built_in">typeid</span>(obj);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; objType.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç±»å‹æ¯”è¾ƒï¼šå¯ä»¥ä½¿ç”¨<code>typeid</code>æ¥æ¯”è¾ƒä¸¤ä¸ªè¡¨è¾¾å¼çš„ç±»å‹æ˜¯å¦ç›¸åŒã€‚å¦‚æœç±»å‹ç›¸åŒï¼Œæ¯”è¾ƒç»“æœä¸º<code>true</code>ï¼›å¦åˆ™ä¸º<code>false</code>ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">typeid</span>(a) == <span class="built_in">typeid</span>(b)) &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ç›¸åŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ä¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>éœ€è¦åŒ…å« <code>&lt;typeinfo&gt;</code> å¤´æ–‡ä»¶ä»¥ä½¿ç”¨ <code>typeid</code>ã€‚</li><li><code>type_info</code> ç±»å‹çš„å¯¹è±¡åœ¨ä¸åŒçš„ç¼–è¯‘å•å…ƒä¸­å¯èƒ½å…·æœ‰ä¸åŒçš„åœ°å€ï¼Œå› æ­¤ä¸èƒ½å°†å…¶åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚</li><li><code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>const char*</code> æŒ‡é’ˆï¼Œè¡¨ç¤ºç±»å‹çš„åç§°ã€‚è¯¥åç§°çš„å…·ä½“æ ¼å¼å¯èƒ½å› ç¼–è¯‘å™¨è€Œå¼‚ã€‚</li><li>ç”±äºç±»å‹åç§°çš„å…·ä½“æ ¼å¼æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„ï¼Œå› æ­¤ä¸åº”ä¾èµ–äº <code>name()</code> è¿”å›çš„å­—ç¬¦ä¸²è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>typeid</code>ä¸»è¦ç”¨äºè¿è¡Œæ—¶çš„ç±»å‹ä¿¡æ¯ï¼Œå› æ­¤å®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¤šæ€ç±»çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œ<code>typeid</code>å°†è¿”å›æŒ‡å‘å®é™…å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŒ‡å‘åŸºç±»çš„ç±»å‹ä¿¡æ¯ã€‚ä¸ºäº†æ­£ç¡®ä½¿ç”¨<code>typeid</code>ï¼Œè¯·ç¡®ä¿åœ¨ä½¿ç”¨å‰å·²ç»äº†è§£äº†ç›¸å…³ç±»å‹çš„ç‰¹æ€§å’Œä½¿ç”¨çº¦æŸã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<code>typeid</code>è¿ç®—ç¬¦å¯ç”¨äºè·å–å’Œæ¯”è¾ƒè¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯ï¼Œå¯¹äºè°ƒè¯•ã€ç±»å‹æ£€æŸ¥å’Œè¿è¡Œæ—¶å¤šæ€ç­‰æ–¹é¢æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h1>type_info</h1><p><code>type_info</code> æ˜¯ C++ æ ‡å‡†åº“ <code>&lt;typeinfo&gt;</code> ä¸­å®šä¹‰çš„ç±»ï¼Œå®ƒç”¨äºæä¾›æœ‰å…³ç±»å‹çš„è¿è¡Œæ—¶ä¿¡æ¯ã€‚<code>type_info</code> ç±»ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>è·å–ç±»å‹ä¿¡æ¯ï¼šé€šè¿‡ä½¿ç”¨ <code>typeid</code> è¿ç®—ç¬¦ï¼Œå¯ä»¥è·å¾—è¡¨è¾¾å¼çš„ <code>type_info</code> å¯¹è±¡ï¼Œä»è€Œè·å–æœ‰å…³ç±»å‹çš„ä¿¡æ¯ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(num);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç±»å‹æ¯”è¾ƒï¼š<code>type_info</code> å¯¹è±¡å¯ä»¥è¿›è¡Œç±»å‹æ¯”è¾ƒï¼Œä»¥æ£€æŸ¥ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">typeid</span>(a) == <span class="built_in">typeid</span>(b)) &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ç›¸åŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ç±»å‹ä¸åŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>è·å–ç±»å‹åç§°ï¼š<code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>const char*</code> æŒ‡é’ˆï¼Œè¡¨ç¤ºç±»å‹çš„åç§°ã€‚è¯·æ³¨æ„ï¼Œè¿”å›çš„åç§°å¯èƒ½å…·æœ‰å¹³å°å’Œç¼–è¯‘å™¨ç‰¹å®šçš„æ ¼å¼ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> std::type_info&amp; type = <span class="built_in">typeid</span>(<span class="type">int</span>);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Type name: &quot;</span> &lt;&lt; type.<span class="built_in">name</span>() &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><code>type_info</code> ç±»åœ¨å¤´æ–‡ä»¶ <code>&lt;typeinfo&gt;</code> ä¸­å®šä¹‰ï¼Œå› æ­¤éœ€è¦åŒ…å«è¯¥å¤´æ–‡ä»¶æ‰èƒ½ä½¿ç”¨å®ƒã€‚</li><li><code>type_info</code> å¯¹è±¡çš„ <code>name()</code> æ–¹æ³•è¿”å›çš„ç±»å‹åç§°ä¸ä¸€å®šæ˜¯äººç±»å¯è¯»çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ç¼–è¯‘å™¨ç‰¹å®šçš„æ ‡è¯†ç¬¦ã€‚</li><li><code>type_info</code> çš„ <code>==</code> æ“ä½œç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ª <code>type_info</code> å¯¹è±¡æ˜¯å¦ä»£è¡¨ç›¸åŒçš„ç±»å‹ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç±»å‹åç§°ã€‚</li></ul><p>ç”±äº <code>type_info</code> ç±»æä¾›çš„ä¿¡æ¯æ˜¯åœ¨è¿è¡Œæ—¶è·å¾—çš„ï¼Œå› æ­¤å®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å…·æœ‰ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¤šæ€ç±»çš„åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œ<code>type_info</code> è¿”å›çš„ç±»å‹ä¿¡æ¯å°†æ˜¯æŒ‡å‘å®é™…å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æŒ‡å‘åŸºç±»çš„ç±»å‹ä¿¡æ¯ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>type_info</code> ç±»æä¾›äº†è·å–è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯çš„åŠŸèƒ½ï¼Œå¹¶æ”¯æŒç±»å‹æ¯”è¾ƒã€‚å®ƒå¯¹äºå®ç°è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€å¤šæ€å’Œå…¶ä»–éœ€è¦ç±»å‹ä¿¡æ¯çš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œç”±äºç±»å‹åç§°çš„å…·ä½“æ ¼å¼æ˜¯ç”±ç¼–è¯‘å™¨å†³å®šçš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨ <code>type_info</code> è¿”å›çš„åç§°æ—¶åº”è°¨æ…å¯¹å¾…ã€‚</p><h1>nullptr</h1><p><code>nullptr</code> æ˜¯ C++11 å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆå¸¸é‡ã€‚å®ƒæ˜¯ç”¨æ¥æ˜ç¡®è¡¨ç¤ºä¸€ä¸ªæŒ‡é’ˆä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆå¯¹è±¡æˆ–å‡½æ•°çš„ç‰¹æ®Šå€¼ã€‚åœ¨ä¹‹å‰çš„ C++ æ ‡å‡†ä¸­ï¼Œé€šå¸¸ä½¿ç”¨å®å®šä¹‰ <code>NULL</code> æˆ–æ•´æ•°å¸¸é‡ <code>0</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚</p><p>ä½¿ç”¨ <code>nullptr</code> çš„å¥½å¤„åŒ…æ‹¬ï¼š</p><ol><li>æ¸…æ™°æ˜ç¡®ï¼š<code>nullptr</code> æ˜¾å¼åœ°è¡¨è¾¾äº†æŒ‡é’ˆä¸ºç©ºçš„å«ä¹‰ï¼Œé¿å…äº†ä¸æ•´æ•°é›¶çš„æ··æ·†ã€‚</li><li>ç±»å‹å®‰å…¨ï¼š<code>nullptr</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç©ºæŒ‡é’ˆç±»å‹ï¼Œå®ƒä¸èƒ½éšå¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œä»è€Œé¿å…äº†ç±»å‹é”™è¯¯ã€‚</li><li>å‡å°‘é‡è½½æ­§ä¹‰ï¼šå½“å­˜åœ¨å¤šä¸ªå‡½æ•°é‡è½½æ—¶ï¼Œä¼ é€’ <code>nullptr</code> å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨æ­£ç¡®åœ°é€‰æ‹©å‡½æ•°é‡è½½ç‰ˆæœ¬ã€‚</li></ol><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ <code>nullptr</code> çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">char</span>* ptr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">foo</span>(<span class="literal">nullptr</span>);  <span class="comment">// è°ƒç”¨ foo(char*) å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>* ptr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="comment">// æŒ‡é’ˆä¸ºç©º</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªé‡è½½çš„ <code>foo</code> å‡½æ•°ï¼Œä¸€ä¸ªæ¥å— <code>char*</code> ç±»å‹çš„æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªæ¥å— <code>int*</code> ç±»å‹çš„æŒ‡é’ˆã€‚å½“æˆ‘ä»¬ä¼ é€’ <code>nullptr</code> ç»™ <code>foo</code> å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šé€‰æ‹©æ¥å— <code>char*</code> ç±»å‹çš„ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨ <code>==</code> è¿ç®—ç¬¦å°†æŒ‡é’ˆ <code>ptr</code> ä¸ <code>nullptr</code> è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºã€‚</p><p>æ€»ç»“è€Œè¨€ï¼Œ<code>nullptr</code> æ˜¯ C++11 å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºè¡¨ç¤ºç©ºæŒ‡é’ˆå¸¸é‡ã€‚å®ƒæä¾›äº†æ›´æ˜ç¡®çš„è¯­ä¹‰ã€ç±»å‹å®‰å…¨å’Œå‡å°‘é‡è½½æ­§ä¹‰çš„ä¼˜ç‚¹ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œå¥å£®ã€‚åœ¨ç¼–å†™æ–°çš„ C++ ä»£ç æ—¶ï¼Œæ¨èä½¿ç”¨ <code>nullptr</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚</p><h1>ç®€æ˜“å­¦ç”Ÿç®¡ç†ç³»ç»Ÿæ¨¡æ¿</h1><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€æ˜“çš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿçš„ç¤ºä¾‹ä»£ç ï¼Œå®ƒåŒ…æ‹¬äº†å­¦ç”Ÿç±»å’Œä¸€ä¸ªç®¡ç†ç³»ç»Ÿç±»ï¼Œå¯ä»¥æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿç­‰åŠŸèƒ½ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age, <span class="type">const</span> std::string&amp; id)</span><br><span class="line">        : <span class="built_in">name</span>(name), <span class="built_in">age</span>(age), <span class="built_in">id</span>(id) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getName</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::string <span class="title">getID</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayInfo</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Name: &quot;</span> &lt;&lt; name &lt;&lt; <span class="string">&quot;, Age: &quot;</span> &lt;&lt; age &lt;&lt; <span class="string">&quot;, ID: &quot;</span> &lt;&lt; id &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    std::string id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentManagementSystem</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addStudent</span><span class="params">(<span class="type">const</span> std::string&amp; name, <span class="type">int</span> age, <span class="type">const</span> std::string&amp; id)</span> </span>&#123;</span><br><span class="line">        <span class="function">Student <span class="title">student</span><span class="params">(name, age, id)</span></span>;</span><br><span class="line">        students.<span class="built_in">push_back</span>(student);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Student added successfully.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">displayAllStudents</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (students.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;No students found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;All students:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">                student.<span class="built_in">displayInfo</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">searchStudent</span><span class="params">(<span class="type">const</span> std::string&amp; id)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="type">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; student : students) &#123;</span><br><span class="line">            <span class="keyword">if</span> (student.<span class="built_in">getID</span>() == id) &#123;</span><br><span class="line">                found = <span class="literal">true</span>;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;Student found:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                student.<span class="built_in">displayInfo</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!found) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Student not found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::vector&lt;Student&gt; students;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentManagementSystem system;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">20</span>, <span class="string">&quot;1001&quot;</span>);</span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">19</span>, <span class="string">&quot;1002&quot;</span>);</span><br><span class="line">    system.<span class="built_in">addStudent</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">21</span>, <span class="string">&quot;1003&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">displayAllStudents</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾å­¦ç”Ÿ</span></span><br><span class="line">    system.<span class="built_in">searchStudent</span>(<span class="string">&quot;1002&quot;</span>);</span><br><span class="line">    system.<span class="built_in">searchStudent</span>(<span class="string">&quot;1004&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>Student</code> ç±»è¡¨ç¤ºå­¦ç”Ÿï¼Œå…·æœ‰å§“åã€å¹´é¾„å’Œå­¦å·ç­‰å±æ€§ï¼Œå¹¶æä¾›äº†è·å–å’Œæ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯çš„æˆå‘˜å‡½æ•°ã€‚</p><p><code>StudentManagementSystem</code> ç±»è¡¨ç¤ºå­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼Œå®ƒåŒ…å«ä¸€ä¸ªå­¦ç”Ÿåˆ—è¡¨ï¼ˆä½¿ç”¨ <code>std::vector&lt;Student&gt;</code> å­˜å‚¨å­¦ç”Ÿï¼‰ï¼Œæä¾›äº†æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿçš„æˆå‘˜å‡½æ•°ã€‚</p><p>åœ¨ <code>main()</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>StudentManagementSystem</code> å¯¹è±¡ <code>system</code>ï¼Œå¹¶ä½¿ç”¨å…¶æˆå‘˜å‡½æ•°æ¥æ·»åŠ å­¦ç”Ÿã€æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿå’ŒæŸ¥æ‰¾å­¦ç”Ÿã€‚è¾“å‡ºç»“æœä¸ºæ·»åŠ çš„å­¦ç”Ÿä¿¡æ¯ã€æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ä»¥åŠæŸ¥æ‰¾åˆ°çš„å­¦ç”Ÿä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</p><p>è¯·æ³¨æ„ï¼Œä¸Šè¿°ä»£ç æ˜¯ä¸€ä¸ªç®€æ˜“çš„ç¤ºä¾‹ï¼Œæ²¡æœ‰åŒ…æ‹¬é”™è¯¯å¤„ç†å’ŒæŒä¹…åŒ–å­˜å‚¨ç­‰å®Œæ•´çš„åŠŸèƒ½ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„åŠŸèƒ½å’Œæ›´å¤æ‚çš„è®¾è®¡æ¥æ»¡</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»C++çš„æ•°æ®ç±»å‹ã€ç±»ã€ç»“æ„ä½“ç­‰åŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>CentOS</title>
    <link href="https://momoao.github.io/posts/202308241933.html"/>
    <id>https://momoao.github.io/posts/202308241933.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-30T02:05:24.637Z</updated>
    
    <content type="html"><![CDATA[<h1>CentOS</h1><h1>ç³»ç»Ÿçš„å®‰è£…</h1><h2 id="Minimalç‰ˆæœ¬çš„é…ç½®">Minimalç‰ˆæœ¬çš„é…ç½®</h2><p>ç£ç›˜åˆ†åŒºä¼šæœ‰æ„Ÿå¹å·æé†’ï¼Œç‚¹è¿›å»åç‚¹å‡»å·¦ä¸Šè§’çš„Doneé€€å‡ºå³å¯</p><p>å®‰è£…ä¸­è®¾ç½®rootå¯†ç å¤–ä¸ç”¨è®¾ç½®åˆ«çš„</p><p>é…ç½®ç½‘ç»œæ–‡ä»¶</p><p>å°†æœ€åçš„ONBOOTæ”¹ä¸ºyes</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-scripts/i</span>fcfg-ens33 </span><br></pre></td></tr></table></figure><p>ä¹‹åé‡å¯ç½‘ç»œæœåŠ¡</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl restart network</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æŒ‡ä»¤å°±å¯ä»¥æŸ¥è¯¢åˆ°ens33ç½‘å¡çš„åœ°å€äº†</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ip addr</span></span><br></pre></td></tr></table></figure><p>å¦‚æœpingä¸é€šï¼Œå¯ä»¥æŸ¥çœ‹è™šæ‹Ÿæœºçš„ç½‘å¡é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼Œæˆ–è€…æœ¬æœºçš„ç½‘ç»œé€‚é…å™¨æ˜¯å¦å¼€å¯</p><p>å¦‚æœæ€•æ”¹é”™äº†ï¼Œå¯ä»¥æå‰å¤‡ä»½</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/etc/yum</span>.repos.d<span class="regexp">/CentOS-Base.repo /</span>etc<span class="regexp">/yum.repos.d/</span>CentOS-Base.repo.bak</span><br></pre></td></tr></table></figure><h3 id="æ›´æ”¹ä¸‹è½½çš„é•œåƒ">æ›´æ”¹ä¸‹è½½çš„é•œåƒ</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/yum</span>.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure><p>æ›´æ”¹[base]ä¸‹çš„mirrorlistï¼Œæ”¹ä¸ºé˜¿é‡Œçš„é•œåƒæº</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=http:<span class="regexp">//mi</span>rrors.aliyun.com<span class="regexp">/centos/</span><span class="variable">$releasever</span><span class="regexp">/os/</span><span class="variable">$basearch</span>/</span><br><span class="line">        http:<span class="regexp">//mi</span>rrors.aliyuncs.com<span class="regexp">/centos/</span><span class="variable">$releasever</span><span class="regexp">/os/</span><span class="variable">$basearch</span>/</span><br><span class="line">        http:<span class="regexp">//mi</span>rrors.cloud.aliyuncs.com<span class="regexp">/centos/</span><span class="variable">$releasever</span><span class="regexp">/os/</span><span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=http:<span class="regexp">//mi</span>rrors.aliyun.com<span class="regexp">/centos/</span>RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šé˜¿é‡Œé•œåƒæŸ¥çœ‹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//mi</span>rrors.aliyun.com/</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºï¼Œæ‰§è¡ŒæŒ‡ä»¤</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum makecache</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥æµç¨‹ä¸‹è½½æ’ä»¶äº†</p><h3 id="CentOS-Base-repoä¸­ä¸åŒçš„ä»“åº“">CentOS-Base.repoä¸­ä¸åŒçš„ä»“åº“</h3><p>åœ¨ CentOS ç³»ç»Ÿä¸­ï¼Œé•œåƒæºé…ç½®é€šå¸¸åŒ…æ‹¬å‡ ä¸ªä¸åŒçš„ä»“åº“ï¼Œå¦‚ baseã€updatesã€extras å’Œ centosplusã€‚æ¯ä¸ªä»“åº“éƒ½æä¾›äº†ä¸åŒç±»å‹çš„è½¯ä»¶åŒ…ï¼Œä»¥æ»¡è¶³ç³»ç»Ÿæ›´æ–°ã€å®‰è£…è½¯ä»¶ç­‰éœ€æ±‚ã€‚</p><ol><li><p><strong>Base</strong>ï¼š<br><code>base</code> ä»“åº“åŒ…å«äº† CentOS ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶å’ŒåŸºæœ¬è½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…æ˜¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ‰€å¿…éœ€çš„ã€‚å®ƒåŒ…å«äº†æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä»¥åŠä¸€äº›åŸºæœ¬çš„å®ç”¨å·¥å…·ã€‚åœ¨å®‰è£… CentOS æ—¶ï¼Œ<code>base</code> ä»“åº“ä¸­çš„è½¯ä»¶åŒ…ä¼šé»˜è®¤è¢«å®‰è£…ã€‚</p></li><li><p><strong>Updates</strong>ï¼š<br><code>updates</code> ä»“åº“åŒ…å«äº†æ“ä½œç³»ç»Ÿçš„å®‰å…¨è¡¥ä¸ã€é”™è¯¯ä¿®å¤ä»¥åŠä¸€äº›æ›´æ–°çš„è½¯ä»¶åŒ…ã€‚é€šè¿‡æ›´æ–°ä»“åº“ï¼Œæ‚¨å¯ä»¥ä¿æŒç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Œè·å–æœ€æ–°çš„ä¿®å¤å’Œæ”¹è¿›ã€‚</p></li><li><p><strong>Extras</strong>ï¼š<br><code>extras</code> ä»“åº“åŒ…å«ä¸€äº›ä¸æ“ä½œç³»ç»Ÿç›´æ¥ç›¸å…³çš„é¢å¤–è½¯ä»¶åŒ…ï¼Œä½†ä¸æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚è¿™äº›è½¯ä»¶åŒ…é€šå¸¸æä¾›äº†ä¸€äº›å®ç”¨çš„å·¥å…·ã€é©±åŠ¨ç¨‹åºã€é™„åŠ çš„åº“ç­‰ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚</p></li><li><p><strong>CentOSPlus</strong>ï¼š<br><code>centosplus</code> ä»“åº“æ˜¯ä¸€ä¸ªé¢å¤–çš„ä»“åº“ï¼Œå®ƒæä¾›äº†ä¸€äº›é¢å¤–çš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬ä¸€äº›æ–°åŠŸèƒ½ã€æ”¹è¿›å’Œæµ‹è¯•è½¯ä»¶ã€‚è¿™äº›è½¯ä»¶åŒ…å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ã€‚<code>centosplus</code> ä»“åº“å¯èƒ½åŒ…å«ä¸€äº›æ–°ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œä»¥åŠä¸€äº›ç¤¾åŒºè´¡çŒ®çš„è½¯ä»¶ã€‚</p></li></ol><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>base</code>ã€<code>updates</code> å’Œ <code>extras</code> æ˜¯å¤§å¤šæ•°ç”¨æˆ·æ‰€éœ€çš„æ ¸å¿ƒä»“åº“ï¼Œå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„ç³»ç»Ÿæ›´æ–°å’Œå®‰è£…è½¯ä»¶çš„éœ€æ±‚ã€‚<code>centosplus</code> åˆ™æ›´é€‚åˆä¸€äº›ç‰¹å®šéœ€æ±‚ï¼Œæ¯”å¦‚æµ‹è¯•æ–°åŠŸèƒ½æˆ–ä½¿ç”¨ç¤¾åŒºè´¡çŒ®çš„è½¯ä»¶ã€‚</p><p>åœ¨é…ç½®é•œåƒæºæ—¶ï¼Œç¡®ä¿æ‚¨çš„ç³»ç»Ÿå¯ä»¥è®¿é—®è¿™äº›ä¸åŒçš„ä»“åº“ï¼Œä»¥è·å–æ‰€éœ€çš„è½¯ä»¶åŒ…å’Œæ›´æ–°ã€‚</p><h3 id="å¸¸ç”¨å·¥å…·åˆ—è¡¨">å¸¸ç”¨å·¥å…·åˆ—è¡¨</h3><p>â€œCentOS Minimalâ€ ç‰ˆæœ¬æ˜¯ CentOS å‘è¡Œç‰ˆçš„ä¸€ä¸ªç²¾ç®€ç‰ˆæœ¬ï¼Œå®ƒé€šå¸¸åªåŒ…å«æœ€åŸºæœ¬çš„è½¯ä»¶åŒ…ï¼Œä»¥å‡å°ç³»ç»Ÿçš„å¤§å°å’Œæ½œåœ¨çš„æ”»å‡»é¢ã€‚å› æ­¤ï¼Œåœ¨å®‰è£… CentOS Minimal ç‰ˆæœ¬åï¼Œæ‚¨å¯èƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€äº›å¸¸ç”¨çš„å·¥å…·ï¼Œä»¥æ»¡è¶³ç³»ç»Ÿç®¡ç†å’Œæ—¥å¸¸æ“ä½œçš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨å·¥å…·çš„ç¤ºä¾‹ï¼š</p><ol><li><p><strong>ç½‘ç»œå·¥å…·</strong>ï¼š</p><ul><li><code>wget</code>ï¼šç”¨äºä»ç½‘ç»œä¸‹è½½æ–‡ä»¶ã€‚</li><li><code>curl</code>ï¼šç”¨äºå‘é€ HTTP è¯·æ±‚å¹¶è·å–å“åº”ï¼Œæ”¯æŒå¤šç§åè®®ã€‚</li></ul></li><li><p><strong>æ–‡æœ¬ç¼–è¾‘å™¨</strong>ï¼š</p><ul><li><code>vim</code> æˆ– <code>nano</code>ï¼šå¸¸ç”¨çš„å‘½ä»¤è¡Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</li></ul></li><li><p><strong>åŒ…ç®¡ç†å·¥å…·</strong>ï¼š</p><ul><li><code>yum</code>ï¼šè™½ç„¶ CentOS Minimal ç‰ˆæœ¬å·²ç»é¢„è£…äº† YUMï¼Œä½†æ‚¨å¯èƒ½éœ€è¦ç¡®ä¿å…¶æ›´æ–°å¹¶é…ç½®å¥½è½¯ä»¶æºï¼Œä»¥ä¾¿åç»­å®‰è£…è½¯ä»¶åŒ…ã€‚</li></ul></li><li><p><strong>ç³»ç»Ÿå·¥å…·</strong>ï¼š</p><ul><li><code>ssh</code>ï¼šç”¨äºè¿œç¨‹ç™»å½•å’Œç®¡ç†æœåŠ¡å™¨ã€‚</li><li><code>htop</code> æˆ– <code>top</code>ï¼šç”¨äºæŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹ä¿¡æ¯ã€‚</li><li><code>iftop</code>ï¼šç”¨äºç›‘æ§ç½‘ç»œæµé‡ã€‚</li><li><code>iostat</code>ï¼šç”¨äºç›‘æ§ç£ç›˜ I/O æ€§èƒ½ã€‚</li></ul></li><li><p><strong>æ–‡ä»¶ç®¡ç†å·¥å…·</strong>ï¼š</p><ul><li><code>ls</code>ã€<code>cp</code>ã€<code>mv</code>ã€<code>rm</code> ç­‰ï¼šåŸºæœ¬çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œå‘½ä»¤ã€‚</li><li><code>tree</code>ï¼šä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºç›®å½•å†…å®¹ã€‚</li></ul></li><li><p><strong>ç”¨æˆ·å’Œæƒé™ç®¡ç†</strong>ï¼š</p><ul><li><code>useradd</code>ã€<code>usermod</code>ã€<code>passwd</code>ï¼šç”¨äºç®¡ç†ç”¨æˆ·è´¦æˆ·å’Œå¯†ç ã€‚</li><li><code>sudo</code>ï¼šç”¨äºæˆæƒæ™®é€šç”¨æˆ·æ‰§è¡Œç‰¹å®šå‘½ä»¤çš„æƒé™ã€‚</li></ul></li><li><p><strong>å®‰å…¨å·¥å…·</strong>ï¼š</p><ul><li><code>firewalld</code>ï¼šç”¨äºç®¡ç†é˜²ç«å¢™è§„åˆ™ã€‚</li><li><code>fail2ban</code>ï¼šç”¨äºé˜²èŒƒæš´åŠ›ç ´è§£ç­‰æ”»å‡»ã€‚</li></ul></li><li><p><strong>æ—¶é—´å’Œæ—¥æœŸå·¥å…·</strong>ï¼š</p><ul><li><code>date</code>ï¼šç”¨äºæŸ¥çœ‹å’Œè®¾ç½®ç³»ç»Ÿæ—¶é—´å’Œæ—¥æœŸã€‚</li><li><code>timedatectl</code>ï¼šç”¨äºç³»ç»Ÿæ—¶é—´å’Œæ—¥æœŸçš„ç®¡ç†ã€‚</li></ul></li><li><p><strong>æ—¥å¿—æŸ¥çœ‹å·¥å…·</strong>ï¼š</p><ul><li><code>journalctl</code>ï¼šç”¨äºæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ã€‚</li></ul></li></ol><p>è¿™åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç¤ºä¾‹åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚å’Œç”¨é€”æ¥å†³å®šéœ€è¦å®‰è£…å“ªäº›å·¥å…·ã€‚è®°å¾—åœ¨å®‰è£…æ–°å·¥å…·ä¹‹å‰ï¼Œä½¿ç”¨ <code>yum</code> ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²ç»æ›´æ–°å¹¶ä¸”è½¯ä»¶æºå·²ç»é…ç½®å¥½ã€‚</p><h1>åŸºç¡€æ“ä½œ</h1><h2 id="ç”¨æˆ·å’Œç»„çš„æ“ä½œ">ç”¨æˆ·å’Œç»„çš„æ“ä½œ</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>1ã€åˆ›å»ºç»„çš„ç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>2ã€åˆ›å»ºç»„</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>3ã€å°†ç»„æ”¾åˆ°å¯¹åº”ç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>4ã€åˆ›å»ºç”¨æˆ·ï¼Œæ”¾åœ¨å¯¹åº”çš„ç»„ä¸‹</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>5ã€æ›´æ”¹ç»„æ‰€åœ¨ç›®å½•çš„æƒé™</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>6ã€ä½¿ç”¨  ls  -l  æŸ¥çœ‹åŒ…å«æ‰€æœ‰ç»„æ‰€åœ¨ç›®å½•çš„å†…å®¹ï¼Œå¯ä»¥çœ‹è§æƒé™æ˜¯å¦è®¾ç½®æˆåŠŸ</span><br></pre></td></tr></table></figure><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@CTA2102</span> ~]<span class="meta"># cd /</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> /]<span class="meta"># cd home</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> home]<span class="meta"># mkdir DemoCompany</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> home]<span class="meta"># cd DemoCompany/</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># mkdir PublicResource</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># mkdir market</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># mkdir manage</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># mkdir training</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># groupadd -g 3000 D_PublicResource</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> DemoCompany]<span class="meta"># chown :D_PublicResource /home/DemoCompany/PublicResource/</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> home]<span class="meta"># chmod -R 777 /home/DemoCompany/PublicResource/</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> home]<span class="meta"># useradd -g D_PublicResource -d /home/DemoCompany/PublicResource/p1 p1</span></span><br><span class="line">   [root<span class="symbol">@CTA2102</span> home]<span class="meta"># ls -l DemoCompany/</span></span><br><span class="line">   æ€»ç”¨é‡ <span class="number">0</span></span><br><span class="line">   drwxr-x---. <span class="number">2</span> root D_Manage          <span class="number">6</span> <span class="number">4</span>æœˆ   <span class="number">6</span> <span class="number">10</span>:<span class="number">05</span> DemoManage</span><br><span class="line">   drwxr-x---. <span class="number">2</span> root D_Market          <span class="number">6</span> <span class="number">4</span>æœˆ   <span class="number">6</span> <span class="number">10</span>:<span class="number">05</span> DemoMarket</span><br><span class="line">   drwxr-x---. <span class="number">2</span> root D_Training        <span class="number">6</span> <span class="number">4</span>æœˆ   <span class="number">6</span> <span class="number">10</span>:<span class="number">05</span> DemoTraining</span><br><span class="line">   drwxrwxrwx. <span class="number">3</span> root D_PublicResource <span class="number">16</span> <span class="number">4</span>æœˆ   <span class="number">6</span> <span class="number">10</span>:<span class="number">14</span> PublicResource</span><br></pre></td></tr></table></figure><h3 id="æ‰¹é‡æ·»åŠ ç”¨æˆ·">æ‰¹é‡æ·»åŠ ç”¨æˆ·</h3><h4 id="ç®€æ˜“æ–¹æ³•">ç®€æ˜“æ–¹æ³•</h4><p><img src="../assets/image/CentOS_Image/image-20230828103723768.png" alt="image-20230828103723768"></p><ul><li><p>åˆ‡æ¢ç”¨æˆ·å‡ºç°-bash-4.1$</p><ul><li><p>å› ä¸ºç”¨æˆ·å®¶ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ä¸è¶³</p></li><li><p>ä½¿ç”¨cp  -a  /etc/skel/.  /home/net2103</p><ul><li>.æ˜¯ä¸ºäº†æŠŠéšè—æ–‡ä»¶ä¹Ÿéƒ½å¤åˆ¶è¿‡å»</li></ul></li></ul></li></ul><h2 id="æŸ¥çœ‹ç›®å½•æ“ä½œ">æŸ¥çœ‹ç›®å½•æ“ä½œ</h2><p>æŸ¥çœ‹ç›®å½•çš„æ“ä½œé€šå¸¸æ˜¯é€šè¿‡ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰æ¥å®Œæˆçš„ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰è®¸å¤šå‘½ä»¤å¯ç”¨äºæŸ¥çœ‹ç›®å½•å†…å®¹ã€æ–‡ä»¶åˆ—è¡¨å’Œæ–‡ä»¶å±æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼š</p><ol><li><p><strong>åˆ—å‡ºç›®å½•å†…å®¹</strong>ï¼šä½¿ç”¨ <code>ls</code> å‘½ä»¤æ¥åˆ—å‡ºæŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚</p><ul><li><p>åˆ—å‡ºå½“å‰ç›®å½•å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºæŒ‡å®šç›®å½•å†…å®¹ï¼ˆä¾‹å¦‚ <code>/path/to/directory</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /path/to/directory</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ç­‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºæ‰€æœ‰ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆä»¥<code>.</code>å¼€å¤´çš„æ–‡ä»¶ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºè¯¦ç»†ä¿¡æ¯å¹¶åŒ…æ‹¬éšè—æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -la</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æŸ¥çœ‹æ–‡ä»¶å’Œç›®å½•å±æ€§</strong>ï¼šä½¿ç”¨ <code>stat</code> å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•çš„è¯¦ç»†å±æ€§ã€‚</p><ul><li><p>æŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•å±æ€§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> filename_or_directory</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æŸ¥æ‰¾æ–‡ä»¶å’Œç›®å½•</strong>ï¼šä½¿ç”¨ <code>find</code> å‘½ä»¤æ¥æŸ¥æ‰¾æ–‡ä»¶å’Œç›®å½•ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶è¿›è¡Œæœç´¢ã€‚</p><ul><li><p>åœ¨å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸­æŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;filename&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨æŒ‡å®šè·¯å¾„ä¸‹æŸ¥æ‰¾æ‰€æœ‰æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> f</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æŒ‡å®šè·¯å¾„ä¸‹æŸ¥æ‰¾æ‰€æœ‰ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> d</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•</strong>ï¼šä½¿ç”¨ <code>pwd</code> å‘½ä»¤æŸ¥çœ‹å½“å‰æ‰€åœ¨çš„å·¥ä½œç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ‡æ¢å·¥ä½œç›®å½•</strong>ï¼šä½¿ç”¨ <code>cd</code> å‘½ä»¤åˆ‡æ¢å½“å‰å·¥ä½œç›®å½•åˆ°æŒ‡å®šè·¯å¾„ã€‚</p><ul><li><p>è¿›å…¥æŒ‡å®šç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/directory</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›ä¸Šçº§ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›ç”¨æˆ·ä¸»ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br></pre></td></tr></table></figure></li><li><p>è¿”å›ä¹‹å‰çš„å·¥ä½œç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure></li></ul></li></ol><p>è¿™äº›å‘½ä»¤å¯ä»¥å¸®åŠ©æ‚¨åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹å’Œæ“ä½œç›®å½•å†…å®¹ã€‚æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸åŒçš„é€‰é¡¹å’Œå‚æ•°æ¥è°ƒæ•´è¿™äº›å‘½ä»¤çš„è¡Œä¸ºã€‚è¦äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…ç›¸å…³å‘½ä»¤çš„æ‰‹å†Œé¡µï¼ˆä½¿ç”¨ <code>man</code> å‘½ä»¤ï¼Œä¾‹å¦‚ <code>man ls</code>ã€<code>man find</code>ï¼‰ã€‚</p><h2 id="rpm">rpm</h2><p><code>rpm</code>ï¼ˆRed Hat Package Managerï¼‰æ˜¯ç”¨äºåœ¨åŸºäº RPMï¼ˆRed Hat Package Managerï¼‰è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿçš„ Linux å‘è¡Œç‰ˆä¸­ç®¡ç†è½¯ä»¶åŒ…çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒå…è®¸ç”¨æˆ·å®‰è£…ã€å¸è½½ã€æŸ¥è¯¢ã€éªŒè¯å’Œç®¡ç†è½¯ä»¶åŒ…ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ <code>rpm</code> å‘½ä»¤åŠå…¶ç”¨æ³•ï¼š</p><ol><li><p><strong>å®‰è£…è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -i package.rpm</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¦å®‰è£…åä¸º <code>package.rpm</code> çš„è½¯ä»¶åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> <code>rpm</code> å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæç¤ºä¾èµ–å…³ç³»é—®é¢˜ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨è§£å†³è¿™äº›é—®é¢˜æˆ–è€…è€ƒè™‘ä½¿ç”¨ <code>yum</code> æˆ– <code>dnf</code> æ¥å¤„ç†ä¾èµ–å…³ç³»ã€‚</p></li><li><p><strong>å¸è½½è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e package_name</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥å¸è½½æŒ‡å®šçš„è½¯ä»¶åŒ…ã€‚</p></li><li><p><strong>æŸ¥è¯¢å·²å®‰è£…çš„è½¯ä»¶åŒ…</strong>ï¼š</p><ul><li><p>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ç‰¹å®šè½¯ä»¶åŒ…æ˜¯å¦å·²å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -q package_name</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æ˜¾ç¤ºè½¯ä»¶åŒ…ä¿¡æ¯</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi package_name</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥æ˜¾ç¤ºæœ‰å…³ç‰¹å®šè½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ç‰ˆæœ¬ã€ä½œè€…ã€æè¿°ç­‰ã€‚</p></li><li><p><strong>æ˜¾ç¤ºè½¯ä»¶åŒ…æ–‡ä»¶åˆ—è¡¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql package_name</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥æ˜¾ç¤ºç‰¹å®šè½¯ä»¶åŒ…å®‰è£…åçš„æ–‡ä»¶åˆ—è¡¨ã€‚</p></li><li><p><strong>éªŒè¯è½¯ä»¶åŒ…å®Œæ•´æ€§</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -V package_name</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥éªŒè¯ç‰¹å®šè½¯ä»¶åŒ…çš„æ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹ã€‚</p></li><li><p><strong>å¯»æ‰¾æ‹¥æœ‰ç‰¹å®šæ–‡ä»¶çš„è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qf /path/to/file</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥æ‰¾å‡ºæ‹¥æœ‰æŒ‡å®šæ–‡ä»¶çš„è½¯ä»¶åŒ…ã€‚</p></li><li><p><strong>å®‰è£…å·²ä¸‹è½½çš„è½¯ä»¶åŒ…åŠå…¶ä¾èµ–</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh package.rpm</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤æ¥å®‰è£…è½¯ä»¶åŒ…å¹¶è‡ªåŠ¨è§£å†³ä¾èµ–å…³ç³»ã€‚</p></li><li><p><strong>ä»è½¯ä»¶åŒ…ä¸­æå–æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio package.rpm | cpio -idmv</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤å¯ä»¥ä»è½¯ä»¶åŒ…ä¸­æå–æ–‡ä»¶ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¾ˆæœ‰ç”¨ã€‚</p></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§çš„ <code>rpm</code> å‘½ä»¤åŠå…¶ç”¨æ³•ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨ <code>rpm</code> å‘½ä»¤éœ€è¦å°å¿ƒï¼Œå°¤å…¶æ˜¯åœ¨è§£å†³ä¾èµ–å…³ç³»æ—¶ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨æ›´é«˜çº§çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œå¦‚ <code>yum</code>ï¼ˆé€‚ç”¨äº CentOS 6 åŠæ›´æ—©ç‰ˆæœ¬ï¼‰æˆ– <code>dnf</code>ï¼ˆé€‚ç”¨äºCentOS 7åŠä»¥åç‰ˆæœ¬ï¼‰ï¼Œä»¥ä¾¿æ›´å¥½åœ°å¤„ç†è½¯ä»¶åŒ…ä¹‹é—´çš„ä¾èµ–æ€§ã€‚</p><h3 id="ä¸‹è½½é•œåƒæ›´æ”¹">ä¸‹è½½é•œåƒæ›´æ”¹</h3><p>è¦æ›´æ”¹ RPM è½¯ä»¶åŒ…çš„ä¸‹è½½é•œåƒï¼Œä½ éœ€è¦ç¼–è¾‘ç›¸åº”çš„é…ç½®æ–‡ä»¶ã€‚åœ¨å¤§å¤šæ•°åŸºäº Red Hat çš„ Linux å‘è¡Œç‰ˆä¸­ï¼ŒRPM ä½¿ç”¨ <code>yum</code> æˆ– <code>dnf</code> ä½œä¸ºå‰ç«¯å·¥å…·ï¼Œè¿™äº›å·¥å…·ä¼šä½¿ç”¨é…ç½®æ–‡ä»¶æ¥æŒ‡å®šè½¯ä»¶åŒ…ä¸‹è½½çš„é•œåƒæºã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„æ­¥éª¤æ¥æ›´æ”¹ RPM ä¸‹è½½é•œåƒï¼š</p><ol><li><p>æ‰“å¼€ç»ˆç«¯å¹¶ä»¥ç®¡ç†å‘˜æƒé™ç™»å½•ï¼Œæˆ–è€…ä½¿ç”¨ <code>sudo</code> æƒé™æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ã€‚</p></li><li><p><strong>å¤‡ä»½åŸæœ‰é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</strong>ï¼š<br>åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œæœ€å¥½å…ˆå¤‡ä»½åŸæœ‰çš„é…ç½®æ–‡ä»¶ï¼Œä»¥é˜²æ„å¤–é—®é¢˜ã€‚</p></li><li><p><strong>ç¼–è¾‘é•œåƒæºé…ç½®æ–‡ä»¶</strong>ï¼š<br>æ‰“å¼€ <code>/etc/yum.repos.d</code> ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ä¸­åŒ…å«äº†ç³»ç»Ÿä¸­å·²é…ç½®çš„ä¸åŒè½¯ä»¶æºçš„ <code>.repo</code> é…ç½®æ–‡ä»¶ã€‚ä½ å¯ä»¥é€‰æ‹©ç¼–è¾‘ç°æœ‰çš„ <code>.repo</code> æ–‡ä»¶ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ç¼–è¾‘ CentOS çš„å®˜æ–¹é•œåƒæºï¼Œä½ å¯ä»¥ç¼–è¾‘ <code>CentOS-Base.repo</code> æ–‡ä»¶ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi <span class="regexp">/etc/yum</span>.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹é•œåƒæºåœ°å€</strong>ï¼š<br>åœ¨ <code>.repo</code> æ–‡ä»¶ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„é…ç½®æ®µè½ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[base]</span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base</span><br><span class="line">baseurl=http:<span class="regexp">//mi</span>rror.centos.org<span class="regexp">/centos/</span><span class="variable">$releasever</span><span class="regexp">/os/</span><span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line">gpgkey=file:<span class="regexp">//</span><span class="regexp">/etc/</span>pki<span class="regexp">/rpm-gpg/</span>RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>baseurl</code> è¡Œä¸­çš„åœ°å€ï¼Œå°†å…¶æŒ‡å‘ä½ æƒ³è¦çš„é•œåƒæºã€‚å¯ä»¥åœ¨ CentOS å®˜ç½‘æˆ–å…¶ä»–å¯é çš„æºç½‘ç«™ä¸Šæ‰¾åˆ°å¯ç”¨çš„é•œåƒæºåœ°å€ã€‚å¦‚æœä½ åœ¨å›½å†…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å›½å†…çš„é•œåƒæºåœ°å€ã€‚</p></li><li><p><strong>ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨</strong>ï¼š<br>åœ¨ vi ç¼–è¾‘å™¨ä¸­ï¼Œä½ å¯ä»¥æŒ‰ä¸‹ <code>Esc</code> é”®ï¼Œç„¶åè¾“å…¥ <code>:wq</code> å¹¶æŒ‰ä¸‹å›è½¦ï¼Œä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚</p></li><li><p><strong>æ¸…é™¤ç¼“å­˜å¹¶æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</strong>ï¼š<br>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ¸…é™¤ç¼“å­˜å¹¶è·å–æ›´æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf clean <span class="keyword">all</span>   # æˆ–è€…ä½¿ç”¨ yum clean <span class="keyword">all</span>ï¼ˆæ ¹æ®å‘è¡Œç‰ˆé€‰æ‹©ï¼‰</span><br><span class="line">sudo dnf <span class="keyword">update</span>      # æˆ–è€…ä½¿ç”¨ yum <span class="keyword">update</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨æ–°é•œåƒæºä¸‹è½½è½¯ä»¶åŒ…</strong>ï¼š<br>ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>dnf</code>ï¼ˆæˆ– <code>yum</code>ï¼‰å‘½ä»¤æ¥å®‰è£…ã€æ›´æ–°ã€å¸è½½è½¯ä»¶åŒ…ï¼Œå®ƒä»¬ä¼šä½¿ç”¨ä½ æ‰€é…ç½®çš„æ–°é•œåƒæºåœ°å€ã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼Œæ ¹æ®ä½ ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆä»¥åŠå‘è¡Œç‰ˆçš„ç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶çš„ä½ç½®ã€æ ¼å¼å’Œç»†èŠ‚å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚åŠ¡å¿…åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰åšå¥½å¤‡ä»½ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨å¯é çš„é•œåƒæºåœ°å€ã€‚</p><h4 id="å›½å†…å¸¸ç”¨é•œåƒ">å›½å†…å¸¸ç”¨é•œåƒ</h4><p>åœ¨ä¸­å›½ï¼Œç”±äºå›½é™…ç½‘ç»œè®¿é—®å—åˆ°é™åˆ¶ï¼Œè®¸å¤šå¼€å‘è€…å’Œç”¨æˆ·é€‰æ‹©ä½¿ç”¨å›½å†…çš„è½¯ä»¶é•œåƒæ¥åŠ é€Ÿè½¯ä»¶åŒ…çš„ä¸‹è½½å’Œæ›´æ–°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ä¸­å›½å¢ƒå†…çš„è½¯ä»¶é•œåƒï¼š</p><ol><li><p><strong>æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</strong>ï¼š</p><ul><li>é•œåƒåœ°å€ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn/</a></li><li>æ¸…åå¤§å­¦é•œåƒç«™æ˜¯ä¸­å›½æœ€å¤§çš„å¼€æºè½¯ä»¶é•œåƒç«™ä¹‹ä¸€ï¼Œæä¾›äº†å„ç§å¸¸è§çš„å¼€æºè½¯ä»¶çš„é•œåƒï¼ŒåŒ…æ‹¬ Linux å‘è¡Œç‰ˆã€å¼€å‘å·¥å…·ç­‰ã€‚</li></ul></li><li><p><strong>é˜¿é‡Œäº‘å¼€æºé•œåƒç«™</strong>ï¼š</p><ul><li>é•œåƒåœ°å€ï¼š<a href="https://mirrors.aliyun.com/">https://mirrors.aliyun.com/</a></li><li>é˜¿é‡Œäº‘æä¾›äº†å¹¿æ³›çš„å¼€æºè½¯ä»¶çš„é•œåƒï¼Œé€Ÿåº¦ä¸€èˆ¬è¾ƒå¿«ï¼Œä¹ŸåŒ…å«äº†è®¸å¤šå›½é™…è½¯ä»¶æºã€‚</li></ul></li><li><p><strong>åä¸ºå¼€æºé•œåƒç«™</strong>ï¼š</p><ul><li>é•œåƒåœ°å€ï¼š<a href="https://mirrors.huaweicloud.com/">https://mirrors.huaweicloud.com/</a></li><li>åä¸ºäº‘æä¾›äº†å¼€æºè½¯ä»¶çš„é•œåƒï¼Œé€Ÿåº¦ä¹Ÿç›¸å¯¹è¾ƒå¿«ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä¸€äº›äº‘æœåŠ¡ã€‚</li></ul></li><li><p><strong>ä¸­ç§‘å¤§å¼€æºé•œåƒç«™</strong>ï¼š</p><ul><li>é•œåƒåœ°å€ï¼š<a href="https://mirrors.ustc.edu.cn/">https://mirrors.ustc.edu.cn/</a></li><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦é•œåƒç«™æä¾›äº†å„ç§å¼€æºè½¯ä»¶çš„é•œåƒï¼Œé€‚åˆç§‘æŠ€æ•™è‚²ç•Œçš„éœ€æ±‚ã€‚</li></ul></li><li><p><strong>ç½‘æ˜“å¼€æºé•œåƒç«™</strong>ï¼š</p><ul><li>é•œåƒåœ°å€ï¼š<a href="http://mirrors.163.com/">http://mirrors.163.com/</a></li><li>ç½‘æ˜“æä¾›äº†å¼€æºè½¯ä»¶çš„é•œåƒï¼Œè¦†ç›–èŒƒå›´è¾ƒå¹¿ã€‚</li></ul></li></ol><p>è¿™äº›é•œåƒç«™éƒ½æä¾›äº†å„ç§å¼€æºè½¯ä»¶çš„ä¸‹è½½é•œåƒï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæ¥åŠ é€Ÿè½¯ä»¶åŒ…çš„ä¸‹è½½å’Œæ›´æ–°ã€‚åœ¨ä½¿ç”¨è¿™äº›é•œåƒç«™ä¹‹å‰ï¼Œæœ€å¥½å…ˆæŸ¥çœ‹å®ƒä»¬çš„ä½¿ç”¨è§„åˆ™å’Œè¯´æ˜ï¼Œä»¥ç¡®ä¿æ­£ç¡®ä½¿ç”¨ã€‚</p><h2 id="yum">yum</h2><p><code>yum</code> æ˜¯åœ¨åŸºäº Red Hat çš„ Linux å‘è¡Œç‰ˆä¸Šç”¨äºç®¡ç†è½¯ä»¶åŒ…çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒå¯ä»¥ç”¨äºå®‰è£…ã€å‡çº§ã€æŸ¥è¯¢å’Œå¸è½½è½¯ä»¶åŒ…ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç®¡ç†è½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ <code>yum</code> å‘½ä»¤åŠå…¶è¯´æ˜ï¼š</p><ol><li><p><strong>æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</strong>ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo yum update</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†æ£€æŸ¥å¯ç”¨çš„è½¯ä»¶åŒ…æ›´æ–°ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®è¿›è¡Œæ›´æ–°ã€‚</p></li><li><p><strong>å®‰è£…è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install &lt;<span class="keyword">package</span>-name&gt;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ­¤å‘½ä»¤å®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…åŠå…¶ä¾èµ–é¡¹ã€‚</p></li><li><p><strong>å‡çº§è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo yum upgrade</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ­¤å‘½ä»¤å‡çº§ç³»ç»Ÿä¸Šå·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬ä¾èµ–å…³ç³»ã€‚</p></li><li><p><strong>æŸ¥è¯¢è½¯ä»¶åŒ…ä¿¡æ¯</strong>ï¼š</p><ul><li>æŸ¥è¯¢è½¯ä»¶åŒ…æ˜¯å¦å·²å®‰è£…ï¼š<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum list installed &lt;<span class="keyword">package</span>-name&gt;</span><br></pre></td></tr></table></figure></li><li>æ˜¾ç¤ºè½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯ï¼š<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo</span> yum <span class="literal">info</span> &lt;package-name&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æœç´¢è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum <span class="built_in">search</span> <span class="symbol">&lt;keyword&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†æœç´¢åŒ…å«æŒ‡å®šå…³é”®å­—çš„è½¯ä»¶åŒ…ã€‚</p></li><li><p><strong>å¸è½½è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum <span class="built_in">remove</span> &lt;<span class="built_in">package</span>-name&gt;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ­¤å‘½ä»¤å¸è½½å·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚æ³¨æ„ï¼Œè¿™åªä¼šåˆ é™¤è½¯ä»¶åŒ…æœ¬èº«ï¼Œä¸ä¼šåˆ é™¤å…¶ä¾èµ–é¡¹ã€‚</p></li><li><p><strong>æ¸…ç†ç¼“å­˜</strong>ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum clean <span class="keyword">all</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†æ¸…é™¤ YUM ç¼“å­˜ï¼Œåˆ é™¤å·²ä¸‹è½½çš„è½¯ä»¶åŒ…æ–‡ä»¶ã€‚</p></li><li><p><strong>åˆ—å‡ºå·²å®‰è£…è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo yum list installed</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…ã€‚</p></li><li><p><strong>æ˜¾ç¤ºè½¯ä»¶åŒ…æä¾›çš„æ–‡ä»¶</strong>ï¼š</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum provides &lt;<span class="keyword">file</span>-<span class="keyword">name</span>&gt;</span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†æ˜¾ç¤ºæä¾›æŒ‡å®šæ–‡ä»¶çš„è½¯ä»¶åŒ…ã€‚</p></li><li><p><strong>å¯ç”¨/ç¦ç”¨è½¯ä»¶æº</strong>ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-<span class="built_in">config</span>-manager <span class="comment">--enable &lt;repository&gt;</span></span><br><span class="line">sudo yum-<span class="built_in">config</span>-manager <span class="comment">--disable &lt;repository&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™äº›å‘½ä»¤å¯ä»¥å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„è½¯ä»¶æºã€‚</p></li></ol><p>è¿™äº›æ˜¯ <code>yum</code> å‘½ä»¤çš„ä¸€äº›åŸºæœ¬ç¤ºä¾‹ã€‚è¯·æ³¨æ„ï¼Œå®é™…ä½¿ç”¨ä¸­å¯èƒ½éœ€è¦æ ¹æ®ä½ çš„éœ€æ±‚å’Œæƒ…å†µè¿›è¡Œé€‚å½“çš„è°ƒæ•´ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸Šè¾“å…¥ <code>yum --help</code> æˆ– <code>man yum</code> æ¥æŸ¥çœ‹å®Œæ•´çš„å¸®åŠ©æ–‡æ¡£ï¼Œäº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œé€‰é¡¹ã€‚</p><h2 id="vim">vim</h2><p>Vimï¼ˆVi IMprovedï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¸¸ç”¨äºç»ˆç«¯ç¯å¢ƒä¸‹ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ã€‚Vim æä¾›äº†è®¸å¤šå‘½ä»¤å’ŒåŠŸèƒ½ï¼Œä½¿å…¶æˆä¸ºç¨‹åºå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜çš„é¦–é€‰å·¥å…·ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ Vim æŒ‡ä»¤åŠå…¶ç”¨æ³•ï¼š</p><p><strong>æ³¨æ„ï¼šåœ¨ Vim ä¸­ï¼Œè®¸å¤šæŒ‡ä»¤éƒ½éœ€è¦åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚Vim æœ‰æ™®é€šæ¨¡å¼ã€æ’å…¥æ¨¡å¼å’Œå‘½ä»¤è¡Œæ¨¡å¼ã€‚è¯·ç¡®ä¿æ‚¨åœ¨æ­£ç¡®çš„æ¨¡å¼ä¸‹ä½¿ç”¨ç›¸åº”çš„æŒ‡ä»¤ã€‚</strong></p><ol><li><p><strong>æ‰“å¼€æ–‡ä»¶</strong>ï¼š</p><p>æ‰“å¼€æ–‡ä»¶ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim filename</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim</span> file1 file2</span><br></pre></td></tr></table></figure></li><li><p><strong>ä¿å­˜å’Œé€€å‡º</strong>ï¼š</p><ul><li><p>ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>:</code> è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åè¾“å…¥ <code>wq</code> å¹¶æŒ‰å›è½¦é”®ã€‚</p></li><li><p>ä¿å­˜æ–‡ä»¶ä½†ä¸é€€å‡ºï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>:</code> è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åè¾“å…¥ <code>w</code> å¹¶æŒ‰å›è½¦é”®ã€‚</p></li><li><p>ä¸ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>:</code> è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åè¾“å…¥ <code>q!</code> å¹¶æŒ‰å›è½¦é”®ã€‚</p></li></ul></li><li><p><strong>æ’å…¥æ–‡æœ¬</strong>ï¼š</p><ul><li><p>è¿›å…¥æ’å…¥æ¨¡å¼ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>i</code> è¿›å…¥æ’å…¥æ¨¡å¼ã€‚åœ¨å…‰æ ‡å‰æ’å…¥æ–‡æœ¬ã€‚</p></li><li><p>åœ¨è¡Œé¦–æ’å…¥ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>I</code> è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨è¡Œé¦–æ’å…¥æ–‡æœ¬ã€‚</p></li><li><p>åœ¨è¡Œå°¾æ’å…¥ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>A</code> è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨è¡Œå°¾æ’å…¥æ–‡æœ¬ã€‚</p></li><li><p>åœ¨ä¸‹ä¸€è¡Œæ’å…¥ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>o</code> è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œæ’å…¥æ–°è¡Œã€‚</p></li><li><p>åœ¨ä¸Šä¸€è¡Œæ’å…¥ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>O</code> è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨å½“å‰è¡Œçš„ä¸Šä¸€è¡Œæ’å…¥æ–°è¡Œã€‚</p></li></ul></li><li><p><strong>æ™®é€šæ¨¡å¼æ“ä½œ</strong>ï¼š</p><ul><li><p>åˆ é™¤å½“å‰å­—ç¬¦ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>x</code> åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦ã€‚</p></li><li><p>åˆ é™¤æ•´è¡Œï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>dd</code> åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œã€‚</p></li><li><p>å¤åˆ¶å½“å‰è¡Œï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>yy</code> å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œã€‚</p></li><li><p>ç²˜è´´å¤åˆ¶çš„å†…å®¹ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>p</code> å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡åã€‚</p></li><li><p>æ’¤é”€ä¸Šä¸€æ­¥æ“ä½œï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>u</code> è¿›è¡Œæ’¤é”€ã€‚</p></li></ul></li><li><p><strong>ç§»åŠ¨å…‰æ ‡</strong>ï¼š</p><ul><li><p>å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>h</code>ã€‚</p></li><li><p>å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>l</code>ã€‚</p></li><li><p>å‘ä¸Šç§»åŠ¨ä¸€è¡Œï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>k</code>ã€‚</p></li><li><p>å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>j</code>ã€‚</p></li><li><p>ç§»åŠ¨åˆ°è¡Œé¦–ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>0</code>ã€‚</p></li><li><p>ç§»åŠ¨åˆ°è¡Œå°¾ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>$</code>ã€‚</p></li></ul></li><li><p><strong>æœç´¢å’Œæ›¿æ¢</strong>ï¼š</p><ul><li><p>æœç´¢å…³é”®è¯ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>/</code>ï¼Œç„¶åè¾“å…¥è¦æœç´¢çš„å…³é”®è¯å¹¶æŒ‰å›è½¦ã€‚</p></li><li><p>å‘å‰æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>n</code>ã€‚</p></li><li><p>å‘åæœç´¢ä¸Šä¸€ä¸ªåŒ¹é…ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>N</code>ã€‚</p></li><li><p>æ›¿æ¢å­—ç¬¦ä¸²ï¼š</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ <code>:</code> è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åè¾“å…¥ <code>s/old/new/g</code>ï¼Œå°†æ¯ä¸ªåŒ¹é…çš„ â€œoldâ€ æ›¿æ¢ä¸º â€œnewâ€ã€‚</p></li></ul></li></ol><p>è¿™åªæ˜¯ Vim åŠŸèƒ½çš„å†°å±±ä¸€è§’ã€‚Vim å…·æœ‰è®¸å¤šé«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚å®å½•åˆ¶ã€åˆ†å‰²çª—å£ã€æ’ä»¶æ”¯æŒç­‰ã€‚å¦‚æœæ‚¨æƒ³æ·±å…¥å­¦ä¹  Vimï¼Œå»ºè®®æŸ¥é˜…ç›¸å…³çš„æ•™ç¨‹å’Œæ–‡æ¡£ã€‚åœ¨ Vim ä¸­ï¼Œæ‚¨å¯ä»¥éšæ—¶æŒ‰ä¸‹ <code>Esc</code> é”®è¿”å›æ™®é€šæ¨¡å¼ï¼Œå¹¶åœ¨è¯¥æ¨¡å¼ä¸‹è¾“å…¥ <code>:help</code> æ¥æŸ¥é˜… Vim çš„å†…ç½®å¸®åŠ©ã€‚</p><h2 id="who">who</h2><p><code>who</code> æ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤ºå½“å‰ç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯çš„å‘½ä»¤ã€‚å½“æ‚¨åœ¨ç»ˆç«¯ä¸­è¿è¡Œ <code>who</code> å‘½ä»¤æ—¶ï¼Œå®ƒå°†æ˜¾ç¤ºç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨ä»¥åŠä¸€äº›ç›¸å…³çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å…³äº <code>who</code> å‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><ol><li><p><strong>åŸºæœ¬ç”¨æ³•</strong>ï¼š</p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨ <code>who -u</code> å‘½ä»¤ä»¥è¯¦ç»†æ¨¡å¼æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç™»å½•ç»ˆç«¯ã€ç™»å½•æ—¶é—´ã€ç”¨æˆ· ID ç­‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -u</span><br></pre></td></tr></table></figure></li><li><p><strong>è¾“å‡ºæ ¼å¼</strong>ï¼š</p><p><code>who</code> å‘½ä»¤çš„è¾“å‡ºé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ç™»å½•ç”¨æˆ·å</li><li>ç™»å½•ç»ˆç«¯</li><li>ç™»å½•æ—¶é—´</li><li>ç™»å½• IP åœ°å€ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</li></ul><p>ç¤ºä¾‹è¾“å‡ºå¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">username terminal_name login_time ip_address</span></span><br></pre></td></tr></table></figure></li><li><p><strong>é€‰é¡¹å’Œå‚æ•°</strong>ï¼š</p><ul><li><p><code>-q</code>ï¼šä»…æ˜¾ç¤ºç™»å½•ç”¨æˆ·æ•°é‡ï¼Œä¸æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -q</span><br></pre></td></tr></table></figure></li><li><p><code>-H</code>ï¼šä»¥è¡¨æ ¼æ ¼å¼æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -H</span><br></pre></td></tr></table></figure></li><li><p><code>-b</code>ï¼šæ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨æ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -b</span><br></pre></td></tr></table></figure></li><li><p><code>-r</code>ï¼šæ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -r</span><br></pre></td></tr></table></figure></li><li><p><code>-T</code>ï¼šæ˜¾ç¤ºæœ€åä¸€æ¬¡è¾“å…¥äº‹ä»¶ï¼ˆactivityï¼‰çš„æ—¶é—´ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -T</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><ul><li><p>æ˜¾ç¤ºç™»å½•ç”¨æˆ·åˆ—è¡¨å’Œç»ˆç«¯ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span></span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºç™»å½•ç”¨æˆ·æ•°é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -q</span><br></pre></td></tr></table></figure></li><li><p>ä»¥è¡¨æ ¼æ ¼å¼æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -H</span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨æ—¶é—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -b</span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -r</span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºæœ€åä¸€æ¬¡è¾“å…¥äº‹ä»¶çš„æ—¶é—´ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> -T</span><br></pre></td></tr></table></figure></li></ul></li></ol><p><code>who</code> å‘½ä»¤é€šå¸¸ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠç³»ç»Ÿçš„è¿è¡Œå’Œæ´»åŠ¨çŠ¶æ€ã€‚è¦äº†è§£æ›´å¤šå…³äº <code>who</code> å‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å‘½ä»¤çš„æ‰‹å†Œé¡µï¼ˆä½¿ç”¨ <code>man</code> å‘½ä»¤ï¼Œä¾‹å¦‚ <code>man who</code>ï¼‰ã€‚</p><h2 id="mount">mount</h2><p><code>mount</code> æ˜¯ä¸€ä¸ªç”¨äºæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„å‘½ä»¤ï¼Œåœ¨ Linux ç³»ç»Ÿä¸­éå¸¸å¸¸ç”¨ã€‚é€šè¿‡ <code>mount</code> å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å°†å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜ã€åˆ†åŒºã€USB è®¾å¤‡ï¼‰ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿè¿æ¥åˆ°æŒ‡å®šçš„æŒ‚è½½ç‚¹ï¼Œä½¿å¾—æ–‡ä»¶ç³»ç»Ÿä¸­çš„å†…å®¹åœ¨æŒ‚è½½ç‚¹ä¸‹å¯è®¿é—®ã€‚ä»¥ä¸‹æ˜¯å…³äº <code>mount</code> å‘½ä»¤çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼š</p><p><strong>åŸºæœ¬è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount <span class="selector-attr">[-t æ–‡ä»¶ç³»ç»Ÿç±»å‹]</span> <span class="selector-attr">[-o é€‰é¡¹]</span> è®¾å¤‡æ–‡ä»¶ æŒ‚è½½ç‚¹</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹ï¼š</strong></p><ul><li><code>-t æ–‡ä»¶ç³»ç»Ÿç±»å‹</code>ï¼šæŒ‡å®šè¦æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹ï¼Œå¦‚ ext4ã€ntfsã€vfat ç­‰ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ç³»ç»Ÿä¼šå°è¯•è‡ªåŠ¨æ£€æµ‹ã€‚</li><li><code>-o é€‰é¡¹</code>ï¼šæŒ‡å®šæŒ‚è½½é€‰é¡¹ï¼Œå¦‚è¯»å†™æƒé™ã€æƒé™è®¾ç½®ç­‰ã€‚</li></ul><p><strong>å¸¸è§ç”¨æ³•ç¤ºä¾‹ï¼š</strong></p><ol><li><p><strong>æŒ‚è½½è®¾å¤‡</strong>ï¼š<br>è¦æŒ‚è½½ä¸€ä¸ªè®¾å¤‡ï¼Œæ‚¨éœ€è¦çŸ¥é“è®¾å¤‡çš„åç§°å’ŒæŒ‚è½½ç‚¹ã€‚ä¾‹å¦‚ï¼Œå°† <code>/dev/sdb1</code> è®¾å¤‡ï¼ˆç¬¬äºŒä¸ªç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼‰æŒ‚è½½åˆ° <code>/mnt/usb</code> æŒ‚è½½ç‚¹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount <span class="regexp">/dev/</span>sdb1 <span class="regexp">/mnt/u</span>sb</span><br></pre></td></tr></table></figure></li><li><p><strong>æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹å’ŒæŒ‚è½½é€‰é¡¹</strong>ï¼š<br>å¦‚æœæ‚¨éœ€è¦æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹å’ŒæŒ‚è½½é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>-t</code> å’Œ <code>-o</code> é€‰é¡¹ã€‚ä¾‹å¦‚ï¼ŒæŒ‚è½½ä¸€ä¸ª NTFS åˆ†åŒºå¹¶è®¾ç½®ä¸ºåªè¯»ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t ntfs -o ro <span class="regexp">/dev/</span>sdb2 <span class="regexp">/mnt/</span>ntfs</span><br></pre></td></tr></table></figure></li><li><p><strong>æŒ‚è½½ CD/DVD</strong>ï¼š<br>æŒ‚è½½å…‰ç›˜è®¾å¤‡ï¼ˆå¦‚ CD/DVDï¼‰é€šå¸¸ä¸ ISO æ–‡ä»¶ä¸€èµ·ä½¿ç”¨ã€‚å°† <code>/dev/cdrom</code> è®¾å¤‡æŒ‚è½½åˆ° <code>/mnt/cdrom</code>ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount <span class="regexp">/dev/</span>cdrom <span class="regexp">/mnt/</span>cdrom</span><br></pre></td></tr></table></figure></li><li><p><strong>å¸è½½æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼š<br>ä½¿ç”¨ <code>umount</code> å‘½ä»¤æ¥å¸è½½æ–‡ä»¶ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œå¸è½½ä¹‹å‰æŒ‚è½½çš„ <code>/mnt/usb</code> è®¾å¤‡ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umount <span class="regexp">/mnt/u</span>sb</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºå·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼š<br>ä½¿ç”¨ <code>mount</code> å‘½ä»¤è€Œä¸å¸¦å‚æ•°ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mount</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ°¸ä¹…æŒ‚è½½</strong>ï¼š<br>è‹¥è¦å®ç°å¼€æœºæ—¶è‡ªåŠ¨æŒ‚è½½è®¾å¤‡ï¼Œéœ€è¦å°†æŒ‚è½½ä¿¡æ¯æ·»åŠ åˆ° <code>/etc/fstab</code> æ–‡ä»¶ä¸­ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡ŒæŒ‚è½½æ“ä½œã€‚è¯·åŠ¡å¿…å°å¿ƒä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œä»¥å…å‡ºç°é—®é¢˜ã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼ŒæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿéœ€è¦è¶…çº§ç”¨æˆ·æƒé™ï¼Œå› æ­¤åœ¨ä½¿ç”¨ <code>mount</code> å‘½ä»¤æ—¶éœ€è¦ä½¿ç”¨ <code>sudo</code> æˆ–è€…ä»¥è¶…çº§ç”¨æˆ·èº«ä»½ç™»å½•ã€‚</p><p><code>mount</code> å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­ç®¡ç†æ–‡ä»¶ç³»ç»ŸæŒ‚è½½çš„é‡è¦å·¥å…·ã€‚åœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œå’Œå­˜å‚¨ç®¡ç†æ—¶ï¼Œå®ƒæ˜¯å¿…ä¸å¯å°‘çš„å‘½ä»¤ä¹‹ä¸€ã€‚</p><h2 id="df">df</h2><p><code>df</code>ï¼ˆDisk Freeï¼‰æ˜¯ä¸€ä¸ªåœ¨ Linux å’Œ Unix æ“ä½œç³»ç»Ÿä¸­ç”¨äºæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µçš„å‘½ä»¤ã€‚å®ƒå¯ä»¥å‘Šè¯‰æ‚¨æœ‰å…³å·²æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨ã€å¯ç”¨ç©ºé—´ã€å·²ä½¿ç”¨ç©ºé—´ç­‰ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å…³äº <code>df</code> å‘½ä»¤çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼š</p><p><strong>åŸºæœ¬è¯­æ³•ï¼š</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df <span class="selector-attr">[é€‰é¡¹]</span> <span class="selector-attr">[æ–‡ä»¶æˆ–ç›®å½•]</span></span><br></pre></td></tr></table></figure><p><strong>å¸¸è§é€‰é¡¹ï¼š</strong></p><ul><li><code>-h</code>ï¼šä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºç£ç›˜ç©ºé—´ï¼Œä½¿ç”¨ KBã€MBã€GB ç­‰å•ä½ã€‚</li><li><code>-T</code>ï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚</li><li><code>-i</code>ï¼šæ˜¾ç¤ºinodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚</li><li><code>-a</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ <code>/proc</code>ã€<code>/sys</code>ï¼‰ã€‚</li><li><code>-x</code> æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼šæ’é™¤æŒ‡å®šç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚</li></ul><p><strong>å¸¸è§ç”¨æ³•ç¤ºä¾‹ï¼š</strong></p><ol><li><p><strong>æ˜¾ç¤ºæ‰€æœ‰å·²æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</strong>ï¼š<br>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œä»¥ KBã€MBã€GB ä¸ºå•ä½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºæŒ‡å®šç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</strong>ï¼š<br>å¦‚æœæ‚¨åªå…³å¿ƒæŸä¸ªç‰¹å®šç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥åœ¨å‘½ä»¤åé¢æŒ‡å®šç›®å½•çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼ŒæŸ¥çœ‹ <code>/home</code> ç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h /home</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹</strong>ï¼š<br>ä½¿ç”¨ <code>-T</code> é€‰é¡¹å¯ä»¥åŒæ—¶æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -Th</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºinode ä½¿ç”¨æƒ…å†µ</strong>ï¼š<br>ä½¿ç”¨ <code>-i</code> é€‰é¡¹å¯ä»¥æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿçš„inode ä½¿ç”¨æƒ…å†µï¼Œè¿™å¯¹äºä¸€äº›ç‰¹æ®Šæƒ…å†µå¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -i</span><br></pre></td></tr></table></figure></li><li><p><strong>æ’é™¤æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹</strong>ï¼š<br>ä½¿ç”¨ <code>-x</code> é€‰é¡¹å¯ä»¥æ’é™¤ç‰¹å®šç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œè¦æ’é™¤è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -hx tmpfs</span><br></pre></td></tr></table></figure></li></ol><p><code>df</code> å‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µçš„å®ç”¨å·¥å…·ã€‚å®ƒå¯ä»¥å¸®åŠ©æ‚¨äº†è§£ç³»ç»Ÿä¸­æ–‡ä»¶ç³»ç»Ÿçš„å®¹é‡å’Œå¯ç”¨ç©ºé—´ï¼Œä»è€Œæ›´å¥½åœ°è¿›è¡Œå­˜å‚¨ç®¡ç†å’Œç›‘æ§ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„é€‰é¡¹å’Œå‚æ•°ã€‚</p><h2 id="lsblk">lsblk</h2><p>sr0æ˜¯ç³»ç»Ÿé•œåƒçš„å ç”¨ç©ºé—´ï¼Œä¸å ç”¨ç£ç›˜ç©ºé—´</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0   <span class="number"> 0 </span>  20G <span class="number"> 0 </span>disk </span><br><span class="line">â”œâ”€sda1            8:1   <span class="number"> 0 </span>   1G <span class="number"> 0 </span>part /boot</span><br><span class="line">â””â”€sda2            8:2   <span class="number"> 0 </span>  19G <span class="number"> 0 </span>part </span><br><span class="line">  â”œâ”€centos-root 253:0   <span class="number"> 0 </span>  17G <span class="number"> 0 </span>lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1   <span class="number"> 0 </span>   2G <span class="number"> 0 </span>lvm  [SWAP]</span><br><span class="line">sr0              11:0   <span class="number"> 1 </span>1024M <span class="number"> 0 </span>rom  </span><br></pre></td></tr></table></figure><p><code>lsblk</code> æ˜¯ä¸€ä¸ªåœ¨ CentOSï¼ˆä»¥åŠå…¶ä»–åŸºäº Linux çš„æ“ä½œç³»ç»Ÿï¼‰ä¸­ç”¨äºåˆ—å‡ºå—è®¾å¤‡ä¿¡æ¯çš„å‘½ä»¤ã€‚å—è®¾å¤‡é€šå¸¸æ˜¯ç¡¬ç›˜ã€å›ºæ€ç¡¬ç›˜ï¼ˆSSDï¼‰ã€USB è®¾å¤‡ç­‰ï¼Œå®ƒä»¬ä»¥å—ï¼ˆæ•°æ®å—ï¼‰ä¸ºå•ä½è¿›è¡Œæ•°æ®çš„è¯»å†™ã€‚ä»¥ä¸‹æ˜¯å…³äº <code>lsblk</code> å‘½ä»¤çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼š</p><ol><li><p><strong>åŸºæœ¬ç”¨æ³•</strong>ï¼š<br>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œ <code>lsblk</code>ï¼Œå®ƒå°†åˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰çš„å—è®¾å¤‡åŠå…¶ç›¸å…³ä¿¡æ¯ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lsblk</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ—å‡ºå—è®¾å¤‡ä¿¡æ¯</strong>ï¼š<br><code>lsblk</code> åˆ—å‡ºçš„ä¿¡æ¯åŒ…æ‹¬æ¯ä¸ªå—è®¾å¤‡çš„åç§°ã€å¤§å°ã€ç±»å‹ã€æŒ‚è½½ç‚¹ï¼ˆå¦‚æœå·²æŒ‚è½½ï¼‰ã€åˆ†åŒºä¿¡æ¯ç­‰ã€‚</p></li><li><p><strong>æ˜¾ç¤ºåˆ†åŒºä¿¡æ¯</strong>ï¼š<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>lsblk</code> åªæ˜¾ç¤ºè®¾å¤‡çº§åˆ«çš„ä¿¡æ¯ï¼Œå¦‚æœæ‚¨æƒ³è¦æŸ¥çœ‹æ¯ä¸ªè®¾å¤‡çš„åˆ†åŒºä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>-p</code> æˆ– <code>--part</code> é€‰é¡¹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -<span class="selector-tag">p</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ ‘çŠ¶è§†å›¾</strong>ï¼š<br>ä½¿ç”¨ <code>-t</code> æˆ– <code>--tree</code> é€‰é¡¹ï¼Œå¯ä»¥ä»¥æ ‘çŠ¶è§†å›¾çš„å½¢å¼æ˜¾ç¤ºå—è®¾å¤‡å’Œåˆ†åŒºçš„å±‚æ¬¡ç»“æ„ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lsblk -t</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åªæ˜¾ç¤ºç‰¹å®šè®¾å¤‡ç±»å‹</strong>ï¼š<br>ä½¿ç”¨ <code>-d</code> æˆ– <code>--nodeps</code> é€‰é¡¹ï¼Œå¯ä»¥åªæ˜¾ç¤ºå—è®¾å¤‡è€Œä¸åŒ…æ‹¬åˆ†åŒºã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lsblk -d</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä»¥ JSON æ ¼å¼è¾“å‡º</strong>ï¼š<br>ä½¿ç”¨ <code>-J</code> æˆ– <code>--json</code> é€‰é¡¹ï¼Œå¯ä»¥å°†å—è®¾å¤‡ä¿¡æ¯ä»¥ JSON æ ¼å¼è¾“å‡ºï¼Œä¾¿äºåç»­å¤„ç†ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lsblk -J</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åªæ˜¾ç¤ºç‰¹å®šåˆ—</strong>ï¼š<br>ä½¿ç”¨ <code>-o</code> æˆ– <code>--output</code> é€‰é¡¹ï¼Œå¯ä»¥æŒ‡å®šè¦æ˜¾ç¤ºçš„åˆ—ã€‚ä¾‹å¦‚ï¼Œè¦åªæ˜¾ç¤ºè®¾å¤‡åç§°å’ŒæŒ‚è½½ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -o <span class="keyword">NAME</span>,MOUNTPOINT</span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºè™šæ‹Ÿè®¾å¤‡</strong>ï¼š<br>æœ‰äº›è®¾å¤‡å¯èƒ½æ˜¯è™šæ‹Ÿè®¾å¤‡ï¼Œå¦‚ LVM é€»è¾‘å·ã€RAID è®¾å¤‡ç­‰ã€‚ä½¿ç”¨ <code>-i</code> æˆ– <code>--inverse</code> é€‰é¡¹ï¼Œå¯ä»¥æ˜¾ç¤ºè™šæ‹Ÿè®¾å¤‡è€Œéšè—ç‰©ç†è®¾å¤‡ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk -<span class="selector-tag">i</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºè®¾å¤‡å¤§å°å•ä½</strong>ï¼š<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¾å¤‡å¤§å°ä»¥å­—èŠ‚æ˜¾ç¤ºã€‚ä½¿ç”¨ <code>-b</code>ã€<code>-k</code>ã€<code>-m</code> æˆ– <code>-h</code> é€‰é¡¹ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸åŒå•ä½ï¼ˆå­—èŠ‚ã€KBã€MBã€GBã€TB ç­‰ï¼‰æ˜¾ç¤ºå¤§å°ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lsblk -h</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºæ›´å¤šå¸®åŠ©ä¿¡æ¯</strong>ï¼š<br>å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šé€‰é¡¹å’Œç”¨æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ <code>lsblk</code> çš„å¸®åŠ©æ–‡æ¡£ã€‚</p></li></ol>   <figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">man lsblk</span></span><br></pre></td></tr></table></figure><p><code>lsblk</code> å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£ç³»ç»Ÿä¸­çš„å—è®¾å¤‡å’Œåˆ†åŒºä¿¡æ¯ï¼Œä»è€Œæ›´å¥½åœ°è¿›è¡Œå­˜å‚¨ç®¡ç†å’Œç³»ç»Ÿç»´æŠ¤ã€‚</p><h1>æŒ‡ä»¤å›¾è¡¨</h1><h2 id="è¿›ç¨‹ç®¡ç†">è¿›ç¨‹ç®¡ç†</h2><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è¿›ç¨‹ç®¡ç†å‘½ä»¤å’Œå®ƒä»¬çš„åŠŸèƒ½ï¼Œä»¥è¡¨æ ¼å½¢å¼åˆ—å‡ºï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>ps</code></td><td>æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åˆ—è¡¨</td></tr><tr><td><code>top</code></td><td>å®æ—¶æ˜¾ç¤ºç³»ç»Ÿä¸­çš„è¿›ç¨‹å’Œç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ</td></tr><tr><td><code>htop</code></td><td>äº¤äº’å¼çš„è¿›ç¨‹æŸ¥çœ‹å™¨ï¼Œæ˜¾ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹ä¿¡æ¯</td></tr><tr><td><code>pgrep</code></td><td>æ ¹æ®è¿›ç¨‹åç§°æŸ¥æ‰¾åŒ¹é…çš„è¿›ç¨‹ ID</td></tr><tr><td><code>kill</code></td><td>ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹</td></tr><tr><td><code>killall</code></td><td>ç»ˆæ­¢æ‰€æœ‰åŒ¹é…è¿›ç¨‹</td></tr><tr><td><code>pkill</code></td><td>æ ¹æ®è¿›ç¨‹åç§°ç»ˆæ­¢åŒ¹é…çš„è¿›ç¨‹</td></tr><tr><td><code>nohup</code></td><td>å¯åŠ¨ä¸€ä¸ªå‘½ä»¤ï¼Œä½¿å…¶åœ¨åå°è¿è¡Œå¹¶å¿½ç•¥æŒ‚æ–­ä¿¡å·ï¼ˆSIGHUPï¼‰</td></tr><tr><td><code>jobs</code></td><td>æ˜¾ç¤ºå½“å‰ä¼šè¯çš„ä½œä¸šåˆ—è¡¨</td></tr><tr><td><code>bg</code></td><td>å°†ä¸€ä¸ªä½œä¸šæ”¾åˆ°åå°è¿è¡Œ</td></tr><tr><td><code>fg</code></td><td>å°†ä¸€ä¸ªä½œä¸šæ”¾åˆ°å‰å°è¿è¡Œ</td></tr><tr><td><code>nice</code></td><td>åœ¨è¿è¡Œå‘½ä»¤æ—¶è®¾ç½®è¾ƒä½çš„ä¼˜å…ˆçº§</td></tr><tr><td><code>renice</code></td><td>æ›´æ”¹æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td><code>systemctl</code></td><td>ç³»ç»ŸæœåŠ¡ç®¡ç†å·¥å…·ï¼Œç”¨äºå¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œç®¡ç†ç³»ç»ŸæœåŠ¡</td></tr><tr><td><code>service</code></td><td>å¯åŠ¨ã€åœæ­¢ã€é‡å¯å’Œç®¡ç†ç³»ç»ŸæœåŠ¡ï¼ˆåœ¨ CentOS 7 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼‰</td></tr></tbody></table><p>è¿™äº›å‘½ä»¤å¯ä»¥å¸®åŠ©ä½ ç®¡ç†å’Œæ§åˆ¶ CentOS ä¸­çš„è¿›ç¨‹ã€‚è¯·æ³¨æ„ï¼ŒæŸäº›å‘½ä»¤å¯èƒ½éœ€è¦ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™ï¼ˆé€šè¿‡ <code>sudo</code> å‰ç¼€ï¼‰æ¥æ‰§è¡Œç‰¹å®šæ“ä½œã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤çš„å¸®åŠ©é€‰é¡¹ï¼ˆå¦‚ <code>man &lt;command&gt;</code>ï¼‰æ¥è·å–æ›´å¤šå…³äºæ¯ä¸ªå‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯å’Œç”¨æ³•ç¤ºä¾‹ã€‚</p><h2 id="æ–‡ä»¶ç®¡ç†">æ–‡ä»¶ç®¡ç†</h2><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ–‡ä»¶ç®¡ç†å‘½ä»¤ä»¥åŠå®ƒä»¬çš„åŠŸèƒ½ï¼Œæ•´ç†æˆè¡¨æ ¼å½¢å¼ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>ls</code></td><td>åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•</td></tr><tr><td><code>pwd</code></td><td>æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„</td></tr><tr><td><code>cd</code></td><td>åˆ‡æ¢å½“å‰å·¥ä½œç›®å½•</td></tr><tr><td><code>mkdir</code></td><td>åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</td></tr><tr><td><code>rm</code></td><td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td><code>cp</code></td><td>å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td><code>mv</code></td><td>ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td><code>touch</code></td><td>åˆ›å»ºæ–°æ–‡ä»¶æˆ–æ›´æ–°æ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹æ—¶é—´æˆ³</td></tr><tr><td><code>cat</code></td><td>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td></tr><tr><td><code>less</code></td><td>åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹</td></tr><tr><td><code>head</code></td><td>æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´å‡ è¡Œ</td></tr><tr><td><code>tail</code></td><td>æ˜¾ç¤ºæ–‡ä»¶çš„æœ«å°¾å‡ è¡Œ</td></tr><tr><td><code>grep</code></td><td>åœ¨æ–‡ä»¶ä¸­æœç´¢æŒ‡å®šçš„å­—ç¬¦ä¸²</td></tr><tr><td><code>find</code></td><td>æ ¹æ®æ¡ä»¶æœç´¢æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td><code>chmod</code></td><td>ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</td></tr><tr><td><code>chown</code></td><td>æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…</td></tr><tr><td><code>chgrp</code></td><td>æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç»„</td></tr><tr><td><code>ln</code></td><td>åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•çš„ç¡¬é“¾æ¥æˆ–ç¬¦å·é“¾æ¥</td></tr><tr><td><code>stat</code></td><td>æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚å¤§å°ã€æƒé™å’Œä¿®æ”¹æ—¶é—´ç­‰</td></tr><tr><td><code>du</code></td><td>ä¼°ç®—æ–‡ä»¶æˆ–ç›®å½•çš„ç£ç›˜ä½¿ç”¨é‡</td></tr><tr><td><code>df</code></td><td>æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</td></tr><tr><td><code>tar</code></td><td>åˆ›å»ºã€æŸ¥çœ‹æˆ–æå– tar å‹ç¼©æ–‡ä»¶</td></tr><tr><td><code>zip</code></td><td>åˆ›å»ºã€è§£å‹æˆ–åˆ—å‡º zip å‹ç¼©æ–‡ä»¶</td></tr><tr><td><code>unzip</code></td><td>è§£å‹ zip å‹ç¼©æ–‡ä»¶</td></tr></tbody></table><p>è¿™äº›æ˜¯ä¸€äº›å¸¸ç”¨çš„æ–‡ä»¶ç®¡ç†å‘½ä»¤ã€‚ä½¿ç”¨è¿™äº›å‘½ä»¤ï¼Œä½ å¯ä»¥æµè§ˆç›®å½•ã€åˆ›å»ºã€å¤åˆ¶ã€ç§»åŠ¨å’Œåˆ é™¤æ–‡ä»¶ï¼Œä»¥åŠä¿®æ”¹æ–‡ä»¶çš„æƒé™å’Œå±æ€§ç­‰ã€‚æ¯ä¸ªå‘½ä»¤éƒ½æœ‰ä¸€äº›é€‰é¡¹å’Œå‚æ•°ï¼Œå¯æ ¹æ®éœ€è¦è¿›è¡Œè¿›ä¸€æ­¥çš„è‡ªå®šä¹‰å’Œé…ç½®ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤çš„å¸®åŠ©é€‰é¡¹ï¼ˆå¦‚ <code>man &lt;command&gt;</code>ï¼‰æ¥æŸ¥é˜…è¯¦ç»†çš„å‘½ä»¤ç”¨æ³•å’Œç¤ºä¾‹ã€‚</p><h1>æœåŠ¡æ­å»º</h1><h2 id="å®‰è£…MySQL8-0">å®‰è£…MySQL8.0</h2><p>å…ˆæ›´æ–°å¯†é’¥</p><p>å¯†é’¥æ›´æ–°çš„ä¸»è¦ç›®çš„æ˜¯ç¡®ä¿è½¯ä»¶åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹æˆ–æ¤å…¥æ¶æ„ä»£ç ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºæ¶æ„è½¯ä»¶å¯èƒ½ä¼šä¼ªè£…æˆåˆæ³•è½¯ä»¶å¹¶è¢«å®‰è£…åœ¨ä½ çš„ç³»ç»Ÿä¸Šï¼Œä»è€Œå±å®³ç³»ç»Ÿçš„å®‰å…¨å’Œç¨³å®šæ€§ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --<span class="keyword">import</span> https:<span class="comment">//repo.mysql.com/RPM-GPG-KEY-mysql-2022</span></span><br></pre></td></tr></table></figure><p>å®‰è£…mysql8.xç‰ˆæœ¬  yumåº“</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">CTA2102</span> ~]<span class="meta"># rpm -Uvh https:<span class="comment">//dev.mysql.com/get/mysql80-community-release-el7-2.noarch.rpm</span></span></span><br></pre></td></tr></table></figure><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è·å–https:<span class="comment">//dev.mysql.com/get/mysql80-community-release-el7-2.noarch.rpm</span></span><br><span class="line">è­¦å‘Šï¼š/var/tmp/rpm-tmp<span class="number">.9</span>ZxUTu: å¤´V3 DSA/SHA1 Signature, å¯†é’¥ ID <span class="number">5072e1</span>f5: NOKEY</span><br><span class="line">å‡†å¤‡ä¸­...                          ################################# [<span class="number">100</span>%]</span><br><span class="line">æ­£åœ¨å‡çº§/å®‰è£…...</span><br><span class="line">   <span class="number">1</span>:mysql80-community-release-el7<span class="number">-2</span>  ################################# [<span class="number">100</span>%]</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨yumå®‰è£…mysql</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql-community-<span class="keyword">server</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€mysqlæœåŠ¡</p><p>è®¾ç½®è‡ªå¯åŠ¨</p><p>æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@CTA2102</span> ~]<span class="meta"># systemctl start mysqld</span></span><br><span class="line">[root<span class="symbol">@CTA2102</span> ~]<span class="meta"># systemctl enable mysqld</span></span><br><span class="line">[root<span class="symbol">@CTA2102</span> ~]<span class="meta"># systemctl status mysqld</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹rootç”¨æˆ·çš„åˆå§‹å¯†ç </p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&#x27;temporary password&#x27;</span> /<span class="keyword">var</span>/<span class="built_in">log</span>/mysqld.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åˆè¯•å¯†ç ç™»å½•mysqlçš„rootç”¨æˆ·</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -<span class="selector-tag">p</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¯†ç </p><p>å¯†ç éœ€è¦åŒ…å«å¤§ã€å°å†™å’Œå­—ç¬¦</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœè§‰å¾—å¯†ç å¤æ‚å¯ä»¥é™ä½å®‰å…¨æ£€æµ‹ç­‰çº§</p><p>å°†å¯†ç æœ€çŸ­å­—ç¬¦è°ƒæ•´ä¸º4</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global validate_password.<span class="attribute">policy</span>=0;</span><br><span class="line"><span class="built_in">set</span> global validate_password.<span class="attribute">length</span>=4;</span><br></pre></td></tr></table></figure><p>å¼€å¯rootè¿œç¨‹ç™»å½•æƒé™</p><p>æ³¨æ„ï¼šè¿™é‡Œå¯†ç å¯ä»¥å’Œlocalhostçš„ä¸ä¸€æ ·</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;å¯†ç &#x27;</span>;</span><br><span class="line">æ›´æ”¹å¯†ç </span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹3306ç«¯å£ï¼Œæ˜¯å¦æœ‰mysqlåœ¨è¿è¡Œ</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@CTA2102</span> ~]<span class="comment"># netstat -anp | grep 3306</span></span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> ::<span class="symbol">:</span><span class="number">3306</span>                 ::<span class="symbol">:*</span>                    <span class="title class_">LISTEN</span>      <span class="number">6285</span>/mysqld         </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> ::<span class="symbol">:</span><span class="number">33060</span>                ::<span class="symbol">:*</span>                    <span class="title class_">LISTEN</span>      <span class="number">6285</span>/mysqld    </span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Tomcat">å®‰è£…Tomcat</h2><h3 id="å®‰è£…JDK">å®‰è£…JDK</h3><p>åœ¨ä¸‹é¢ä¼šæœ‰æœ€å¸¸ç”¨çš„ç‰ˆæœ¬ï¼Œé€‰æ‹©ä¸‹è½½</p><p><a href="https://www.oracle.com/java/technologies/downloads/">https://www.oracle.com/java/technologies/downloads/</a></p><p><img src="image/CentOS_Image/image-20230716094359495.png" alt="image-20230716094359495"></p><p>é€šè¿‡windtermä¸­çš„ä¸Šä¼ å½“å‰æ–‡ä»¶å¤¹ï¼Œä¸Šä¼ .tar.gzæ–‡ä»¶åˆ°linuxçš„rootç›®å½•ä¸­</p><p><img src="image/CentOS_Image/image-20230716094442030.png" alt="image-20230716094442030"></p><p>åˆ›å»ºä¸€ä¸ªç›®å½•</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /<span class="keyword">export</span>/server</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨taræŒ‡ä»¤è§£å‹æ–‡ä»¶åˆ°åˆšæ‰åˆ›å»ºçš„ç›®å½•ä¸­</p><p><code>tar</code> æ˜¯ä¸€ä¸ªåœ¨ Unix å’Œç±» Unix æ“ä½œç³»ç»Ÿä¸­å¹¿æ³›ä½¿ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†å½’æ¡£æ–‡ä»¶ï¼Œé€šå¸¸ç§°ä¸º â€œtarballâ€ã€‚å®ƒå…è®¸å°†å¤šä¸ªæ–‡ä»¶å’Œç›®å½•ç»„åˆæˆå•ä¸ªå½’æ¡£æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‹ç¼©ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚</p><ul><li><code>-z</code>: ä½¿ç”¨ gzip ç®—æ³•è§£å‹ç¼©å½’æ¡£æ–‡ä»¶ã€‚é€šå¸¸ï¼Œå‹ç¼©åçš„å½’æ¡£æ–‡ä»¶çš„æ‰©å±•åä¸º <code>.tar.gz</code> æˆ– <code>.tgz</code>ï¼Œè¡¨ç¤ºä½¿ç”¨ gzip å‹ç¼©çš„ tar å½’æ¡£æ–‡ä»¶ã€‚</li><li><code>-x</code>: è§£å‹ç¼©å½’æ¡£æ–‡ä»¶ã€‚å®ƒä¼šä»å½’æ¡£æ–‡ä»¶ä¸­æå–å‡ºæ–‡ä»¶å’Œç›®å½•ã€‚</li><li><code>-v</code>: æ˜¾ç¤ºè§£å‹ç¼©è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰ã€‚å°†è¾“å‡ºæ¯ä¸ªè¢«è§£å‹ç¼©çš„æ–‡ä»¶åã€‚</li><li><code>-f</code> é€‰é¡¹ç”¨äºæŒ‡å®šå½’æ¡£æ–‡ä»¶çš„åç§°ï¼Œå®ƒå¿…é¡»ç´§éšå…¶åï¼Œå¹¶ä¸”å½’æ¡£æ–‡ä»¶ååº”è¯¥ä½äºè¯¥é€‰é¡¹ä¹‹åã€‚</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-<span class="number">8</span>u371-linux-x64.tar.gz -C <span class="regexp">/export/</span>server</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè½¯é“¾æ¥</p><p>è½¯é“¾æ¥ç±»ä¼¼windowsä¸­çš„å¿«æ·æ–¹å¼ï¼Œè®¿é—® /export/server/jdkçš„æ—¶å€™å¯ä»¥è·³è½¬åˆ°/export/server/jdk1.8.0_371</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/export/</span>server<span class="regexp">/jdk1.8.0_371 /</span>export<span class="regexp">/server/</span>jdk</span><br></pre></td></tr></table></figure><p><img src="image/CentOS_Image/image-20230716095618436.png" alt="image-20230716095618436"></p><p>ç¼–å†™ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc<span class="built_in">/profile</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line">æ–‡ä»¶æœ€åæ·»åŠ ä¸¤è¡Œ</span><br><span class="line"><span class="built_in">export</span> <span class="attribute">JAVA_HOME</span>=/export/server/jdk</span><br><span class="line"><span class="built_in">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><p>åŠ è½½é…ç½®æ–‡ä»¶</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è·¯å¾„æ˜¯å¦åŠ å…¥æˆåŠŸ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@CTA2102 bin]<span class="comment"># echo $PATH</span></span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/sbin:/u</span>sr<span class="regexp">/local/</span>bin:<span class="regexp">/usr/</span>sbin:<span class="regexp">/usr/</span>bin:<span class="regexp">/root/</span>.local<span class="regexp">/bin:/</span>root<span class="regexp">/bin:/</span>export<span class="regexp">/server/</span>jdk/bin</span><br></pre></td></tr></table></figure><p>è¿è¡Œjava -versionå‘ç°ï¼Œç‰ˆæœ¬å’Œè‡ªå·±è£…çš„ä¸ä¸€æ ·</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@CTA2102 <span class="keyword">bin]# </span><span class="keyword">java </span>-version</span><br><span class="line">openjdk version <span class="string">&quot;1.8.0_242&quot;</span></span><br><span class="line">OpenJDK Runtime Environment (<span class="keyword">build </span><span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_242-<span class="keyword">b08)</span></span><br><span class="line"><span class="keyword"></span>OpenJDK <span class="number">64</span>-<span class="keyword">Bit </span>Server VM (<span class="keyword">build </span><span class="number">25</span>.<span class="number">242</span>-<span class="keyword">b08, </span>mixed mode)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨whichæŸ¥çœ‹javaå‘½ä»¤æœ¬ä½“</p><p>å‘ç°å¹¶ä¸æ˜¯è‡ªå·±è£…çš„</p><p>å› ä¸ºåœ¨echo $PATHæ—¶ï¼Œ/usr/binè·¯å¾„åœ¨è‡ªå·±æ·»åŠ çš„è·¯å¾„å‰é¢ï¼Œæ‰€ä»¥å…ˆä½¿ç”¨äº†/usr/binè·¯å¾„ä¸‹çš„java</p><p>è§£å†³æ–¹æ³•ä¸¤ä¸ªï¼š</p><ul><li>å°†è‡ªå·±çš„javaè·¯å¾„æ”¾åœ¨å‰é¢</li><li>ç”¨è‡ªå·±çš„javaæ›¿ä»£ç³»ç»Ÿè‡ªå¸¦çš„</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@CTA2102 bin]<span class="comment"># which java</span></span><br><span class="line"><span class="regexp">/usr/</span>bin/java</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸€ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -f <span class="regexp">/usr/</span>bin/java</span><br><span class="line">è½¯é“¾æ¥</span><br><span class="line">ln -s <span class="regexp">/export/</span>bin<span class="regexp">/jdk/</span>bin<span class="regexp">/java /u</span>sr<span class="regexp">/bin/</span>java</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Tomcat-2">å®‰è£…Tomcat</h3><p>æ³¨æ„ï¼šå°†ä»¥ä¸‹tomcatç‰ˆæœ¬éƒ½æ¢æˆapache-tomcat-9.0.78.tar.gzã€‚å› ä¸ºjava8å’Œtomcat10ä¸å…¼å®¹</p><p>å®‰è£…tomcatæ—¶è¦ç”¨érootç”¨æˆ·ï¼Œå› ä¸ºå¦‚æœtomcatè¢«é»‘äº†ï¼Œè¿˜æ˜¯ç”¨rootç”¨æˆ·åˆ›å»ºtomcatçš„è¯ï¼Œé‚£ä¹ˆæ•´ä¸ªæœºå™¨éƒ½è¢«é»‘äº†</p><p>å¯ä»¥ç”¨linuxä¸‹è½½å‹ç¼©åŒ…ï¼Œä¹Ÿå¯ä»¥åœ¨Windowsä¸­ä¸‹è½½åä¼ è¾“</p><p>è¿™é‡Œä½¿ç”¨â€“no-check-certificateï¼Œæ˜¯ä¸æ£€æµ‹ç½‘ç»œå®‰å…¨è¯ä¹¦ï¼Œå¦‚æœä¸æ·»åŠ ä¼šæœ‰ä»¥ä¸‹æç¤º</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">wget</span> --no-check-certificate https://dlcdn.apache.org/tomcat/tomcat-<span class="number">10</span>/v10.<span class="number">1</span>.<span class="number">10</span>/bin/apache-tomcat-<span class="number">10</span>.<span class="number">1</span>.<span class="number">10</span>.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">--2023-07-16</span> 14<span class="function">:54</span><span class="function">:51--</span>  https:<span class="string">//dlcdn.apache.org/tomcat/tomcat-10/v10.0.27/bin/apache-tomcat-10.0.27.tar.gz</span></span><br><span class="line">æ­£åœ¨è§£æä¸»æœº dlcdn.apache.org <span class="params">(dlcdn.apache.org)</span><span class="string">...</span> 2a04<span class="function">:4e42</span>:<span class="function">:644</span>, 151.101.2.132</span><br><span class="line">æ­£åœ¨è¿æ¥ dlcdn.apache.org <span class="params">(dlcdn.apache.org)</span>|2a04<span class="function">:4e42</span>:<span class="function">:644</span>|<span class="function">:443...</span> å·²è¿æ¥ã€‚</span><br><span class="line">é”™è¯¯: æ— æ³•éªŒè¯ dlcdn.apache.org çš„ç”± â€œ<span class="string">/C=US/O=Let</span>&#x27;s Encrypt/CN=R3â€ é¢å‘çš„è¯ä¹¦:</span><br><span class="line">  é¢å‘çš„è¯ä¹¦å·²ç»è¿‡æœŸã€‚</span><br><span class="line">è¦ä»¥ä¸å®‰å…¨çš„æ–¹å¼è¿æ¥è‡³ dlcdn.apache.orgï¼Œä½¿ç”¨â€œ<span class="params">--no-check-certificate</span>â€ã€‚</span><br></pre></td></tr></table></figure><p>å°†æ”¾åœ¨pythonçš„å®¶ç›®å½•ä¸‹çš„tgzæ–‡ä»¶è§£å‹åˆ°/export/serverä¸‹</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tar</span> -zxvf apache-tomcat-<span class="number">10</span>.<span class="number">1</span>.<span class="number">10</span>.tar.gz -C /export/server/</span><br></pre></td></tr></table></figure><p>è½¯é“¾æ¥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/export/</span>server<span class="regexp">/apache-tomcat-10.1.10/</span> <span class="regexp">/export/</span>server/tomcat</span><br></pre></td></tr></table></figure><p>å¯åŠ¨tomcat</p><p>åœ¨ç›®å½•/export/server/tomcat/binä¸‹</p><p>å¯åŠ¨startup.shæ–‡ä»¶</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[python@CTA2102 bin]$ startup.sh</span><br><span class="line">bash: startup.sh: æœªæ‰¾åˆ°å‘½ä»¤...</span><br><span class="line">[python@CTA2102 bin]$ ./startup.sh </span><br><span class="line">Using CATALINA_BASE:   <span class="regexp">/export/</span>server/tomcat</span><br><span class="line">Using CATALINA_HOME:   <span class="regexp">/export/</span>server/tomcat</span><br><span class="line">Using CATALINA_TMPDIR: <span class="regexp">/export/</span>server<span class="regexp">/tomcat/</span>temp</span><br><span class="line">Using JRE_HOME:        <span class="regexp">/export/</span>server/jdk</span><br><span class="line">Using <span class="keyword">CLASSPATH</span>:       <span class="regexp">/export/</span>server<span class="regexp">/tomcat/</span>bin<span class="regexp">/bootstrap.jar:/</span>export<span class="regexp">/server/</span>tomcat<span class="regexp">/bin/</span>tomcat-juli.jar</span><br><span class="line">Using CATALINA_OPTS:   </span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯åŠ¨æˆåŠŸï¼Œä½†æ˜¯æ£€æµ‹ç«¯å£ä¾æ®çœ‹ä¸è§tomcatï¼Œå¯èƒ½å› ä¸ºjavaç¯å¢ƒå’Œtomcatç‰ˆæœ¬ä¸åŒ¹é…</p><p>é˜²ç«å¢™é—®é¢˜</p><p>è¿™å°†å…è®¸TCPæµé‡é€šè¿‡ 8080 ç«¯å£ï¼Œå¹¶ä¸” <code>--permanent</code> é€‰é¡¹ä¼šå°†è¯¥è§„åˆ™ä¿å­˜åˆ°æ°¸ä¹…è§„åˆ™é›†ä¸­ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿé‡å¯åä»ç„¶ç”Ÿæ•ˆã€‚</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">firewall</span><span class="literal">-</span><span class="comment">cmd</span> <span class="literal">--</span><span class="comment">add</span><span class="literal">-</span><span class="comment">port=8080/tcp</span> <span class="literal">--</span><span class="comment">permanent</span></span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½é˜²ç«å¢™</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd <span class="comment">--reload</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Nginx">å®‰è£…Nginx</h2><p>å®‰è£…yumçš„æ‹“å±•å·¥å…·</p><p><code>yum-utils</code> æ˜¯ä¸€ä¸ªåœ¨ CentOS å’Œ Red Hat Enterprise Linux (RHEL) ç­‰ç³»ç»Ÿä¸Šéå¸¸æœ‰ç”¨çš„è½¯ä»¶åŒ…ï¼Œæä¾›äº†ä¸€ç³»åˆ—æ–¹ä¾¿çš„ YUM åŒ…ç®¡ç†å·¥å…·ã€‚<code>yum-utils</code> åŒ…å«äº†è®¸å¤šå®ç”¨ç¨‹åºï¼Œå¯å¸®åŠ©æ‚¨ç®¡ç†è½¯ä»¶åŒ…ã€æŸ¥æ‰¾é—®é¢˜ã€æ¸…ç†ç¼“å­˜ã€è°ƒè¯•ç­‰æ“ä½œã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y yum-utils</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹é¢æ˜¯ yum-utils åŒ…å«çš„ä¸€äº›å¸¸ç”¨å·¥å…·ï¼š</span><br><span class="line"></span><br><span class="line"><span class="built_in">package</span>-cleanupï¼šæ¸…ç†æ—§ç‰ˆæœ¬çš„è½¯ä»¶åŒ…å’Œæ— ç”¨çš„ä¾èµ–å…³ç³»ã€‚</span><br><span class="line"><span class="built_in">package</span>-cleanup <span class="comment">--dupesï¼šæŸ¥æ‰¾å¹¶åˆ é™¤ç³»ç»Ÿä¸­çš„é‡å¤è½¯ä»¶åŒ…ã€‚</span></span><br><span class="line"><span class="built_in">package</span>-cleanup <span class="comment">--cleandupesï¼šåˆ é™¤ç³»ç»Ÿä¸­çš„é‡å¤è½¯ä»¶åŒ…ã€‚</span></span><br><span class="line">yum-<span class="built_in">config</span>-managerï¼šç®¡ç† YUM è½¯ä»¶ä»“åº“çš„é…ç½®ã€‚</span><br><span class="line">yum-builddepï¼šå®‰è£…æ„å»ºç‰¹å®šè½¯ä»¶åŒ…æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚</span><br><span class="line">debuginfo-installï¼šå®‰è£…è°ƒè¯•ä¿¡æ¯çš„è½¯ä»¶åŒ…ï¼Œç”¨äºè°ƒè¯•åº”ç”¨ç¨‹åºã€‚</span><br><span class="line">yumdownloaderï¼šä¸‹è½½è½¯ä»¶åŒ…è€Œä¸å®‰è£…å®ƒä»¬ã€‚</span><br><span class="line">needs-restartingï¼šæ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦æœ‰éœ€è¦é‡æ–°å¯åŠ¨çš„è¿›ç¨‹ï¼Œé€šå¸¸åœ¨å‡çº§å†…æ ¸åä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure><p><code>repo</code> æ–‡ä»¶æ˜¯ç”¨äºé…ç½® YUM è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿä¸­è½¯ä»¶ä»“åº“ï¼ˆrepositoryï¼‰çš„é…ç½®æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸ä½äº <code>/etc/yum.repos.d/</code> ç›®å½•ä¸‹ï¼Œæ¯ä¸ªä»“åº“éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ <code>.repo</code> æ–‡ä»¶ã€‚</p><p>åœ¨etcç›®å½•ä¸‹åˆ›å»ºæ–°çš„repoæ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[nginx-stable]</span></span><br><span class="line"><span class="attr">name</span>=nqinx stable repo</span><br><span class="line"><span class="attr">baseurl</span>=http://nginx.org/packages/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">qpqkey</span>=https://nginx.org/keys/nginx_signing.key</span><br><span class="line"><span class="attr">module_hotfixes</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Inqinx-mainline]</span></span><br><span class="line"><span class="attr">name</span>=nginx mainline repo</span><br><span class="line"><span class="attr">baseurl</span>=http://nginx.org/packages/mainline/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">gpgkey</span>=https://nginx.org/keys/nginx_signing.key</span><br><span class="line"><span class="attr">module_hotfixes</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å¼€å¯Nginx</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> nginx</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ç«¯å£</p><p>å‘ç°Nginxå·²ç»åœ¨80ç«¯å£è¿è¡Œé€šè¿‡æµè§ˆå™¨å¯ä»¥è®¿é—®åˆ°</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp <span class="string">| grep 80</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…RabbitMQ">å®‰è£…RabbitMQ</h2><p>å‡†å¤‡gpgkeyå¯†é’¥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:<span class="regexp">//</span>packagecloud.io<span class="regexp">/rabbitmq/</span>erlang/gpgkey</span><br><span class="line">rpm --import https:<span class="regexp">//gi</span>thub.com<span class="regexp">/rabbitmq/</span>signing-keys<span class="regexp">/releases/</span>download<span class="regexp">/2.0/</span>rabbitmq-release-signing-key.asc</span><br><span class="line">rpm --import https:<span class="regexp">//</span>packagecloud.io<span class="regexp">/rabbitmq/</span>rabbitmq-server/gpgkey</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘æ–‡ä»¶/etc/yum.repos.d/rabbitmq.repo</p><p>é…ç½®ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¡«å…¥å¦‚ä¸‹å†…å®¹</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Zero dependency Erlang</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#</span></span></span><br><span class="line"></span><br><span class="line">[rabbitmq_erlang]</span><br><span class="line">name=rabbitmq_erlang</span><br><span class="line">baseurl=https://packagecloud.io/rabbitmq/erlang/el/7/$basearch</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PackageCloud<span class="string">&#x27;s repository key and RabbitMQ package signing key</span></span></span><br><span class="line">gpgkey=https://packagecloud.io/rabbitmq/erlang/gpgkey</span><br><span class="line">       https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc</span><br><span class="line">sslverify=1</span><br><span class="line">sslcacert=/etc/pki/tls/certs/ca-bundle.crt</span><br><span class="line">metadata_expire=300</span><br><span class="line"></span><br><span class="line">[rabbitmq_erlang-source]</span><br><span class="line">name=rabbitmq_erlang-source</span><br><span class="line">baseurl=https://packagecloud.io/rabbitmq/erlang/el/7/SRPMS</span><br><span class="line">repo_gpgcheck=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">PackageCloud&#x27;</span>s repository key and RabbitMQ package signing key</span></span><br><span class="line">gpgkey=https://packagecloud.io/rabbitmq/erlang/gpgkey</span><br><span class="line">       https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc</span><br><span class="line">sslverify=1</span><br><span class="line">sslcacert=/etc/pki/tls/certs/ca-bundle.crt</span><br><span class="line">metadata_expire=300</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Redis">å®‰è£…Redis</h2><p>redisæ˜¯ä¸€ä¸ªå¼€æºçš„ã€ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€æ”¯æŒç½‘ç»œäº¤äº’çš„ã€å¯åŸºäºå†…å­˜ä¹Ÿå¯æŒä¹…åŒ–çš„Key-Valueæ•°æ®åº“ã€‚</p><p>redisçš„ç‰¹ç‚¹å°±æ˜¯ï¼š<code>å¿«</code>ï¼Œå¯ä»¥åŸºäºå†…å­˜å­˜å‚¨æ•°æ®å¹¶æä¾›è¶…ä½å»¶è¿Ÿã€è¶…å¿«çš„æ£€ç´¢é€Ÿåº¦</p><p>ä¸€èˆ¬ç”¨äºåœ¨ç³»ç»Ÿä¸­æä¾›å¿«é€Ÿç¼“å­˜çš„èƒ½åŠ›ã€‚</p><p>å®‰è£…EPELä»“åº“</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release</span><br></pre></td></tr></table></figure><p>å®‰è£…Redis</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y redis</span><br></pre></td></tr></table></figure><p>å¯åŠ¨Redis</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl status redis</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç«¯å£ä½¿ç”¨</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp <span class="string">| grep 6379</span></span><br></pre></td></tr></table></figure><p>é˜²ç«å¢™å¼€æ”¾6379ç«¯å£çš„TCPæµé‡</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@CTA2102 yum.repos.d]# firewall-cmd --add-port=6379/tcp --permanent</span><br><span class="line"><span class="keyword">success</span></span><br><span class="line"><span class="keyword"></span>[root@CTA2102 yum.repos.d]# firewall-cmd --reload</span><br><span class="line">success</span><br></pre></td></tr></table></figure><p>è¿›å…¥redis</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨redis</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[root@CTA2102 yum.repos.d]</span># redis-cli</span><br><span class="line"><span class="number">127.0.0.1:6379</span>&gt; set mykey hello</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0.0.1:6379</span>&gt; get mykey</span><br><span class="line"><span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æ­å»ºSamba">æ­å»ºSamba</h2><p>å®‰è£…samba</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> samba</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªç»„ï¼Œç”¨äºå½’ç±»sambaç”¨æˆ·çš„ç»„</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@localhost</span> /]<span class="meta"># cd home</span></span><br><span class="line">[root<span class="symbol">@localhost</span> home]<span class="meta"># mkdir momoteam</span></span><br><span class="line">[root<span class="symbol">@localhost</span> home]<span class="meta"># groupadd -g 3000 momoteam</span></span><br><span class="line">[root<span class="symbol">@localhost</span> home]<span class="meta"># chown :momoteam /home/momoteam/</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºsambaç”¨æˆ·ï¼Œå¹¶ä¸ºä»–åˆ›å»ºä¸€ä¸ªsambaå¯†ç </p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost home]<span class="meta"># useradd -g momoteam -d /home/momoteam/sambauser01 sambauser01</span></span><br><span class="line">[root@localhost home]<span class="meta"># smbpasswd -a sambauser01</span></span><br><span class="line">New SMB password:</span><br><span class="line">Retype <span class="keyword">new</span> SMB password:</span><br><span class="line">Added user sambauser01.</span><br></pre></td></tr></table></figure><p>é…ç½®é˜²ç«å¢™</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">sudo firewall</span><span class="literal">-</span><span class="comment">cmd</span> <span class="literal">--</span><span class="comment">add</span><span class="literal">-</span><span class="comment">service=samba</span> <span class="literal">--</span><span class="comment">permanent</span></span><br><span class="line"><span class="comment">sudo firewall</span><span class="literal">-</span><span class="comment">cmd</span> <span class="literal">--</span><span class="comment">reload</span></span><br></pre></td></tr></table></figure><p>é…ç½®sambaçš„é…ç½®æ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>samba/smb.conf</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ä»¥ä¸‹é…ç½®</p><p>valid usersè¡¨ç¤ºå…è®¸å“ªäº›ç”¨æˆ·è®¿é—®</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[share01]</span><br><span class="line">        <span class="keyword">comment</span> = <span class="keyword">share</span> <span class="keyword">of</span> sambauser01</span><br><span class="line">        <span class="type">path</span> = /home/momoteam/sambauser01</span><br><span class="line">        <span class="keyword">valid</span> users = sambauser01</span><br><span class="line">        browseable = yes</span><br><span class="line">        <span class="keyword">read</span> <span class="keyword">only</span> = <span class="keyword">no</span></span><br><span class="line">        <span class="built_in">public</span> = yes</span><br></pre></td></tr></table></figure><p>å…³é—­SELinux</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">setenforce</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å…±äº«æ–‡ä»¶çš„æƒé™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R <span class="number">766</span> <span class="regexp">/home/m</span>omoteam<span class="regexp">/sambauser01/</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨sambaæœåŠ¡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start<span class="built_in"> smb</span></span><br><span class="line"><span class="built_in"></span>systemctl <span class="built_in">enable</span> smb</span><br></pre></td></tr></table></figure><p>åœ¨ä¸»æœºå°±å¯ä»¥é€šè¿‡æ–‡ä»¶ç®¡ç†å™¨è®¿é—®</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\<span class="number">192.168.99.135</span>\share01</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡å¯åè®¿é—®è¢«æ‹’ç»ï¼Œå¯ä»¥åœ¨æ‰‹åŠ¨å…³é—­ä¸€æ¬¡SELinux</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">setenforce</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ°¸ä¹…å…³é—­SELinux</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>selinux/config</span><br></pre></td></tr></table></figure><p>å°†å…¶ä¸­çš„ä¸€ä¸ªå€¼æ”¹ä¸ºä»¥ä¸‹</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">SELINUX</span><span class="operator">=</span>disabled</span><br></pre></td></tr></table></figure><p>é‡å¯ç³»ç»Ÿç”Ÿæ•ˆ</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">reboot</span></span><br></pre></td></tr></table></figure><h3 id="æœ¬åœ°æµ‹è¯•SambaæœåŠ¡">æœ¬åœ°æµ‹è¯•SambaæœåŠ¡</h3><p>å®‰è£…sambaå®¢æˆ·ç«¯</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install samba-<span class="keyword">client</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æŒ‡ä»¤åœ¨æœ¬æœºè®¿é—®sambaæœåŠ¡</p><p>ä½¿ç”¨qé€€å‡º</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># smbclient //127.0.0.1/share01 -U sambauser01</span></span><br><span class="line">Enter SAMBA<span class="string">\sambauser01&#x27;s</span> password: </span><br><span class="line">Try <span class="string">&quot;help&quot;</span> <span class="keyword">to</span> get a <span class="keyword">list</span> <span class="keyword">of</span> possible commands.</span><br><span class="line">smb: <span class="string">\&gt;</span> q</span><br></pre></td></tr></table></figure><h3 id="smb-confè¯¦è§£">smb.confè¯¦è§£</h3><p><code>smb.conf</code> æ˜¯ Samba æœåŠ¡å™¨é…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½® Samba æœåŠ¡å™¨ï¼Œä½¿å…¶èƒ½å¤Ÿæä¾›æ–‡ä»¶å’Œæ‰“å°æœåŠ¡ï¼Œä¸ Windows å®¢æˆ·ç«¯å…±äº«æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ <code>smb.conf</code> é…ç½®æ–‡ä»¶ä¸­ä¸€äº›å¸¸è§é€‰é¡¹çš„è¯¦ç»†è§£é‡Šï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[global]</span></span><br><span class="line">   <span class="attr">workgroup</span> = WORKGROUP           <span class="comment">; å·¥ä½œç»„æˆ–åŸŸå</span></span><br><span class="line">   server <span class="attr">string</span> = Samba Server    <span class="comment">; æœåŠ¡å™¨æè¿°</span></span><br><span class="line">   <span class="attr">security</span> = user                <span class="comment">; å®‰å…¨è®¾ç½®ï¼ˆuserã€shareã€domainã€ads ç­‰ï¼‰</span></span><br><span class="line">   map to <span class="attr">guest</span> = bad user        <span class="comment">; å®šä¹‰è®¿å®¢çš„æ˜ å°„è¡Œä¸º</span></span><br><span class="line">   guest <span class="attr">account</span> = nobody         <span class="comment">; è®¿å®¢ç”¨æˆ·</span></span><br><span class="line">   log <span class="attr">file</span> = /var/log/samba/log.%m <span class="comment">; æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="section">[share]</span></span><br><span class="line">   <span class="attr">comment</span> = Shared Directory     <span class="comment">; å…±äº«æè¿°</span></span><br><span class="line">   <span class="attr">path</span> = /path/to/shared/directory <span class="comment">; å…±äº«è·¯å¾„</span></span><br><span class="line">   valid <span class="attr">users</span> = user1 user2      <span class="comment">; å…è®¸è®¿é—®å…±äº«çš„ç”¨æˆ·</span></span><br><span class="line">   read <span class="attr">only</span> = <span class="literal">no</span>                 <span class="comment">; æ˜¯å¦åªè¯»</span></span><br><span class="line">   <span class="attr">browseable</span> = <span class="literal">yes</span>               <span class="comment">; æ˜¯å¦å¯æµè§ˆ</span></span><br><span class="line">   <span class="attr">public</span> = <span class="literal">yes</span>                   <span class="comment">; æ˜¯å¦å…¬å¼€è®¿é—®</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç¤ºä¾‹ <code>smb.conf</code> æ–‡ä»¶ä¸­åŒ…å«äº†å…¨å±€è®¾ç½®å’Œä¸€ä¸ªå…±äº«çš„é…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®é€‰é¡¹çš„è¯¦ç»†è§£é‡Šï¼š</p><ul><li><p><strong><code>workgroup</code>ï¼š</strong> å®šä¹‰å·¥ä½œç»„æˆ–åŸŸåã€‚è¿™æ˜¯ Samba æœåŠ¡å™¨åœ¨ç½‘ç»œä¸Šæ ‡è¯†è‡ªå·±çš„åç§°ã€‚</p></li><li><p><strong><code>server string</code>ï¼š</strong> è¿™æ˜¯ Samba æœåŠ¡å™¨çš„æè¿°ï¼Œå°†åœ¨ç½‘ç»œä¸­æ˜¾ç¤ºã€‚</p></li><li><p><strong><code>security</code>ï¼š</strong> å®šä¹‰è®¿é—®æ§åˆ¶çš„å®‰å…¨çº§åˆ«ã€‚<code>user</code> è¡¨ç¤ºåŸºäºç”¨æˆ·èº«ä»½éªŒè¯çš„å®‰å…¨è®¾ç½®ã€‚å…¶ä»–é€‰é¡¹åŒ…æ‹¬ <code>share</code>ã€<code>domain</code> å’Œ <code>ads</code>ã€‚</p></li><li><p><strong><code>map to guest</code>ï¼š</strong> å®šä¹‰å½“è®¿é—®å…±äº«å¤±è´¥æ—¶å¦‚ä½•æ˜ å°„åˆ°è®¿å®¢ã€‚<code>bad user</code> è¡¨ç¤ºæ˜ å°„åˆ°è®¿å®¢ï¼Œå…¶ä»–é€‰é¡¹åŒ…æ‹¬ <code>never</code>ã€<code>bad password</code> ç­‰ã€‚</p></li><li><p><strong><code>guest account</code>ï¼š</strong> å®šä¹‰è®¿å®¢ç”¨æˆ·çš„è´¦æˆ·ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒSamba ä¼šä½¿ç”¨ â€œnobodyâ€ ç”¨æˆ·ã€‚</p></li><li><p><strong><code>log file</code>ï¼š</strong> å®šä¹‰ Samba æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ã€‚<code>%m</code> ä¼šè¢«å®¢æˆ·ç«¯çš„ NetBIOS åç§°æ›¿æ¢ã€‚</p></li><li><p><strong><code>comment</code>ï¼š</strong> å…±äº«çš„æè¿°æˆ–æ³¨é‡Šï¼Œå°†åœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºã€‚</p></li><li><p><strong><code>path</code>ï¼š</strong> å…±äº«ç›®å½•çš„è·¯å¾„ã€‚</p></li><li><p><strong><code>valid users</code>ï¼š</strong> å…è®¸è®¿é—®å…±äº«çš„ç”¨æˆ·åˆ—è¡¨ã€‚</p></li><li><p><strong><code>read only</code>ï¼š</strong> æŒ‡å®šå…±äº«æ˜¯å¦åªè¯»ã€‚</p></li><li><p><strong><code>browseable</code>ï¼š</strong> æŒ‡å®šå…±äº«æ˜¯å¦å¯æµè§ˆï¼Œå¦‚æœè®¾ç½®ä¸º <code>no</code>ï¼Œåˆ™æ— æ³•åœ¨ç½‘ç»œä¸Šçœ‹åˆ°è¿™ä¸ªå…±äº«ã€‚</p></li><li><p><strong><code>public</code>ï¼š</strong> æŒ‡å®šå…±äº«æ˜¯å¦å¯¹å…¬å…±ç”¨æˆ·å¼€æ”¾ã€‚</p></li></ul><p>è¿™åªæ˜¯ <code>smb.conf</code> æ–‡ä»¶ä¸­ä¸€äº›å¸¸è§é€‰é¡¹çš„ç¤ºä¾‹ã€‚<code>smb.conf</code> æ–‡ä»¶æ”¯æŒè®¸å¤šå…¶ä»–é€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œé…ç½®ã€‚æ›´å¤æ‚çš„é…ç½®å¯èƒ½æ¶‰åŠåˆ°ç”¨æˆ·èº«ä»½éªŒè¯ã€è®¿é—®æƒé™ã€æ‰“å°æœåŠ¡ç­‰æ–¹é¢çš„è®¾ç½®ã€‚åœ¨è¿›è¡Œé…ç½®æ—¶ï¼Œå»ºè®®æŸ¥é˜… Samba å®˜æ–¹æ–‡æ¡£ä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯å’Œè¯´æ˜ã€‚</p><h1>é›¶ç¢é—®é¢˜</h1><h2 id="æŒ‡ä»¤">æŒ‡ä»¤</h2><h3 id="lnæŒ‡ä»¤çš„è½¯é“¾æ¥å’Œç¡¬é“¾æ¥åŒºåˆ«">lnæŒ‡ä»¤çš„è½¯é“¾æ¥å’Œç¡¬é“¾æ¥åŒºåˆ«</h3><p>ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰å’Œè½¯é“¾æ¥ï¼ˆSymbolic Linkï¼‰æ˜¯ä¸¤ç§ä¸åŒç±»å‹çš„æ–‡ä»¶é“¾æ¥æ–¹å¼ï¼Œå®ƒä»¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ï¼š</p><ol><li><p>æ•°æ®å—å…³è”ï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥æ˜¯åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºçš„é¢å¤–é“¾æ¥ï¼Œä½¿å¾—å¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ•°æ®å—ã€‚ç¡¬é“¾æ¥çš„æ‰€æœ‰é“¾æ¥éƒ½å…±äº«ç›¸åŒçš„æ•°æ®å—å’Œ inodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰ï¼Œå› æ­¤å®ƒä»¬åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ˜¯ç­‰ä»·çš„ã€‚åˆ é™¤ä»»ä½•ä¸€ä¸ªç¡¬é“¾æ¥ä¸ä¼šå½±å“å…¶ä»–é“¾æ¥ï¼Œåªæœ‰å½“æ‰€æœ‰é“¾æ¥éƒ½è¢«åˆ é™¤æ—¶ï¼Œæ•°æ®å—æ‰ä¼šè¢«é‡Šæ”¾ã€‚</li><li>è½¯é“¾æ¥ï¼šè½¯é“¾æ¥æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒåŒ…å«æŒ‡å‘ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ã€‚è½¯é“¾æ¥æœ¬èº«æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ‹¥æœ‰è‡ªå·±çš„ inode å’Œæ•°æ®å—ï¼Œå®ƒæŒ‡å‘ç›®æ ‡çš„è·¯å¾„ã€‚å› æ­¤ï¼Œè½¯é“¾æ¥ä¸ç›®æ ‡ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œåˆ é™¤è½¯é“¾æ¥ä¸ä¼šå½±å“ç›®æ ‡ï¼Œä¹Ÿå¯ä»¥é“¾æ¥åˆ°ä¸å­˜åœ¨çš„ç›®æ ‡ã€‚</li></ul></li><li><p>è·¨æ–‡ä»¶ç³»ç»Ÿï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥åªèƒ½é“¾æ¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ï¼Œä¸èƒ½é“¾æ¥åˆ°ä¸åŒæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</li><li>è½¯é“¾æ¥ï¼šè½¯é“¾æ¥å¯ä»¥é“¾æ¥è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿå’Œç›®å½•ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯ä¸€ä¸ªæŒ‡å‘ç›®æ ‡çš„è·¯å¾„å¼•ç”¨ã€‚</li></ul></li><li><p>å¯¹ç›®å½•çš„é“¾æ¥ï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥ä¸èƒ½é“¾æ¥åˆ°ç›®å½•ï¼Œåªèƒ½é“¾æ¥åˆ°æ–‡ä»¶ã€‚</li><li>è½¯é“¾æ¥ï¼šè½¯é“¾æ¥å¯ä»¥é“¾æ¥åˆ°ç›®å½•ï¼Œå…è®¸ä½ åˆ›å»ºé“¾æ¥åˆ°æ•´ä¸ªç›®å½•çš„å¿«æ·æ–¹å¼ã€‚</li></ul></li><li><p>å¤§å°ï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥ä¸ä¼šå ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ï¼Œå› ä¸ºå®ƒä»¬å…±äº«ç›¸åŒçš„æ•°æ®å—å’Œ inodeã€‚</li><li>è½¯é“¾æ¥ï¼šè½¯é“¾æ¥æœ¬èº«å ç”¨å°‘é‡ç£ç›˜ç©ºé—´ï¼Œä½†æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ä¼šå ç”¨ç£ç›˜ç©ºé—´ã€‚</li></ul></li><li><p>ä¿®æ”¹ç›®æ ‡å’Œé“¾æ¥ï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šä¿®æ”¹ç›®æ ‡æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶çš„å†…å®¹ä¼šå½±å“æ‰€æœ‰ç¡¬é“¾æ¥ï¼Œå› ä¸ºå®ƒä»¬å…±äº«ç›¸åŒçš„æ•°æ®å—ã€‚</li><li>è½¯é“¾æ¥ï¼šä¿®æ”¹ç›®æ ‡æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶çš„å†…å®¹åªä¼šå½±å“è¢«ä¿®æ”¹çš„å¯¹è±¡ï¼Œè½¯é“¾æ¥å’Œç›®æ ‡ä¹‹é—´æ²¡æœ‰æ•°æ®å…³è”ã€‚</li></ul></li></ol><p>æ€»ç»“ï¼š</p><ul><li>ç¡¬é“¾æ¥æ˜¯æ–‡ä»¶ç³»ç»Ÿçº§åˆ«çš„é“¾æ¥ï¼Œå…±äº«ç›¸åŒçš„æ•°æ®å—å’Œ inodeï¼Œä¸èƒ½é“¾æ¥åˆ°ç›®å½•ï¼Œä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿé“¾æ¥ã€‚</li><li>è½¯é“¾æ¥æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼ŒåŒ…å«æŒ‡å‘ç›®æ ‡çš„è·¯å¾„å¼•ç”¨ï¼Œå¯ä»¥é“¾æ¥è·¨æ–‡ä»¶ç³»ç»Ÿå’Œç›®å½•ï¼Œä¹Ÿå¯ä»¥é“¾æ¥åˆ°ä¸å­˜åœ¨çš„ç›®æ ‡ï¼Œå…è®¸é“¾æ¥åˆ°ç›®å½•ã€‚</li></ul><h3 id="taræŒ‡ä»¤">taræŒ‡ä»¤</h3><p>å½“å‰å·²ç»ä»‹ç»äº† <code>tar</code> å‘½ä»¤ï¼Œä½†æˆ‘å¯ä»¥æä¾›æ›´å¤šå…³äº <code>tar</code> æŒ‡ä»¤çš„ä¿¡æ¯ã€‚</p><p><code>tar</code> æ˜¯ä¸€ä¸ªåœ¨ Unix å’Œç±» Unix æ“ä½œç³»ç»Ÿä¸­å¹¿æ³›ä½¿ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†å½’æ¡£æ–‡ä»¶ï¼Œé€šå¸¸ç§°ä¸º â€œtarballâ€ã€‚å®ƒå…è®¸å°†å¤šä¸ªæ–‡ä»¶å’Œç›®å½•ç»„åˆæˆå•ä¸ªå½’æ¡£æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‹ç¼©ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚</p><p><code>tar</code> çš„åç§°æ¥æºäº â€œtape archiveâ€ï¼ˆç£å¸¦å½’æ¡£ï¼‰ï¼Œæœ€åˆè®¾è®¡ç”¨äºå°†æ–‡ä»¶å’Œç›®å½•ä¿å­˜åˆ°ç£å¸¦å¤‡ä»½ä¸­ã€‚ç°åœ¨ï¼Œå®ƒè¢«å¹¿æ³›ç”¨äºå°†æ–‡ä»¶å’Œç›®å½•ç»„åˆæˆä¸€ä¸ªå½’æ¡£æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œå‹ç¼©ä»¥ä¾¿äºä¼ è¾“æˆ–å¤‡ä»½ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>tar</code> å‘½ä»¤çš„ä¸€äº›å¸¸ç”¨é€‰é¡¹å’Œç”¨æ³•ï¼š</p><ol><li>åˆ›å»ºå½’æ¡£æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -cvf archive.tar file1 file2 dir1 dir2</span><br></pre></td></tr></table></figure><ul><li><code>-c</code>: åˆ›å»ºå½’æ¡£æ–‡ä»¶</li><li><code>-v</code>: æ˜¾ç¤ºå½’æ¡£è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰</li><li><code>-f</code>: æŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼Œå¿…é¡»ç´§éšå…¶åï¼Œå¦åˆ™å¯èƒ½ä¼šå°†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯ã€‚</li></ul><ol start="2"><li>è§£å‹å½’æ¡£æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf archive.tar</span><br></pre></td></tr></table></figure><ul><li><code>-x</code>: è§£å‹ç¼©å½’æ¡£æ–‡ä»¶</li><li><code>-v</code>: æ˜¾ç¤ºè§£å‹ç¼©è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰</li><li><code>-f</code>: æŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼Œå¿…é¡»ç´§éšå…¶åï¼Œå¦åˆ™å¯èƒ½ä¼šä»ç»ˆç«¯è¯»å–è¾“å…¥ã€‚</li></ul><ol start="3"><li>å‹ç¼©å½’æ¡£æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -czvf archive.tar.gz file1 file2 dir1 dir2</span><br></pre></td></tr></table></figure><ul><li><code>-c</code>: åˆ›å»ºå½’æ¡£æ–‡ä»¶</li><li><code>-z</code>: ä½¿ç”¨ gzip ç®—æ³•å‹ç¼©å½’æ¡£æ–‡ä»¶</li><li><code>-v</code>: æ˜¾ç¤ºå‹ç¼©è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰</li><li><code>-f</code>: æŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼Œå¿…é¡»ç´§éšå…¶åï¼Œå¦åˆ™å¯èƒ½ä¼šå°†æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯ã€‚</li></ul><ol start="4"><li>è§£å‹ç¼©å‹ç¼©çš„å½’æ¡£æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf archive.tar.gz</span><br></pre></td></tr></table></figure><ul><li><code>-x</code>: è§£å‹ç¼©å½’æ¡£æ–‡ä»¶</li><li><code>-z</code>: ä½¿ç”¨ gzip ç®—æ³•è§£å‹ç¼©å½’æ¡£æ–‡ä»¶</li><li><code>-v</code>: æ˜¾ç¤ºè§£å‹ç¼©è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼ˆverboseï¼‰</li><li><code>-f</code>: æŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼Œå¿…é¡»ç´§éšå…¶åï¼Œå¦åˆ™å¯èƒ½ä¼šä»ç»ˆç«¯è¯»å–è¾“å…¥ã€‚</li></ul><ol start="5"><li>æŸ¥çœ‹å½’æ¡£æ–‡ä»¶å†…å®¹ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -tvf archive.tar</span><br></pre></td></tr></table></figure><ul><li><code>-t</code>: åˆ—å‡ºå½’æ¡£æ–‡ä»¶ä¸­çš„å†…å®¹</li><li><code>-v</code>: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</li><li><code>-f</code>: æŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼Œå¿…é¡»ç´§éšå…¶åã€‚</li></ul><p>ä»¥ä¸Šåªæ˜¯ <code>tar</code> å‘½ä»¤çš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼Œ<code>tar</code> è¿˜æœ‰å…¶ä»–æ›´å¤šçš„é€‰é¡¹å’Œç”¨æ³•ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥é˜… <code>tar</code> å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ï¼ˆ<code>man tar</code>ï¼‰æ¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h3 id="netstatæŒ‡ä»¤">netstatæŒ‡ä»¤</h3><p><code>netstat</code>ï¼ˆç½‘ç»œç»Ÿè®¡ï¼‰æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹ç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨å’Œç½‘ç»œæ¥å£ç­‰ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¸¸ç”¨äºè¯Šæ–­ç½‘ç»œé—®é¢˜å’Œç›‘æ§ç½‘ç»œæ´»åŠ¨ã€‚å®ƒåœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸­éƒ½å¯ç”¨ï¼ŒåŒ…æ‹¬ Linuxã€macOSã€Windows ç­‰ã€‚</p><p>åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [é€‰é¡¹]</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹ï¼š</strong></p><ul><li><code>-a</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰è¿æ¥å’Œç›‘å¬ä¸­çš„å¥—æ¥å­—ã€‚</li><li><code>-t</code>ï¼šæ˜¾ç¤º TCP è¿æ¥ã€‚</li><li><code>-u</code>ï¼šæ˜¾ç¤º UDP è¿æ¥ã€‚</li><li><code>-n</code>ï¼šä»¥æ•°å­—æ ¼å¼æ˜¾ç¤ºåœ°å€å’Œç«¯å£å·ï¼Œè€Œä¸è¿›è¡Œä¸»æœºå’Œç«¯å£çš„åå‘è§£æã€‚</li><li><code>-p</code>ï¼šæ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹çš„ PID å’Œè¿›ç¨‹åã€‚</li><li><code>-r</code>ï¼šæ˜¾ç¤ºè·¯ç”±è¡¨ä¿¡æ¯ã€‚</li><li><code>-s</code>ï¼šæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚ç½‘ç»œæ¥å£ç»Ÿè®¡å’Œ TCP/UDP åè®®ç»Ÿè®¡ã€‚</li><li><code>-l</code>ï¼šä»…æ˜¾ç¤ºç›‘å¬ä¸­çš„å¥—æ¥å­—ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><ol><li>æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨çš„ TCP å’Œ UDP è¿æ¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -a</span><br></pre></td></tr></table></figure><ol start="2"><li>æ˜¾ç¤ºæ‰€æœ‰ TCP è¿æ¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -t</span><br></pre></td></tr></table></figure><ol start="3"><li>æ˜¾ç¤ºæ‰€æœ‰ UDP è¿æ¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -u</span><br></pre></td></tr></table></figure><ol start="4"><li>æ˜¾ç¤ºç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -s</span><br></pre></td></tr></table></figure><ol start="5"><li>æ˜¾ç¤ºç›‘å¬ä¸­çš„å¥—æ¥å­—ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -l</span><br></pre></td></tr></table></figure><ol start="6"><li>æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹çš„ PID å’Œè¿›ç¨‹åï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -p</span><br></pre></td></tr></table></figure><ol start="7"><li>ä»¥æ•°å­—æ ¼å¼æ˜¾ç¤ºæ‰€æœ‰è¿æ¥å’Œç›‘å¬ä¸­çš„å¥—æ¥å­—ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an</span><br></pre></td></tr></table></figure><p><code>netstat</code> å‘½ä»¤å¯¹äºæŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç½‘ç»œè¿æ¥æƒ…å†µã€ç¡®è®¤ç«¯å£æ˜¯å¦å¤„äºç›‘å¬çŠ¶æ€ã€æ£€æŸ¥ç½‘ç»œæ¥å£çš„ä¼ è¾“ç»Ÿè®¡ç­‰éå¸¸æœ‰ç”¨ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œéœ€è¦ä»¥è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰æƒé™è¿è¡Œ <code>netstat</code> å‘½ä»¤ï¼Œä»¥æŸ¥çœ‹å®Œæ•´çš„è¿æ¥å’Œè¿›ç¨‹ä¿¡æ¯ã€‚åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œå¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ç›´æ¥è¿è¡Œ <code>netstat</code> å‘½ä»¤ã€‚</p><h3 id="findæŒ‡ä»¤">findæŒ‡ä»¤</h3><p><code>find</code> æ˜¯ä¸€ä¸ªåœ¨ Linux å’Œç±»Unixç³»ç»Ÿä¸­éå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œç”¨äºåœ¨æŒ‡å®šç›®å½•ä¸‹é€’å½’åœ°æœç´¢æ–‡ä»¶å’Œç›®å½•ã€‚å®ƒå¯ä»¥é€šè¿‡å¤šç§æ¡ä»¶æ¥æŸ¥æ‰¾æ–‡ä»¶ï¼Œä¾‹å¦‚æ–‡ä»¶åã€æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶å¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰ã€‚<code>find</code> å‘½ä»¤éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½æ‰€éœ€çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find &lt;æœç´¢è·¯å¾„&gt; &lt;é€‰é¡¹&gt; &lt;åŒ¹é…æ¡ä»¶&gt;</span><br></pre></td></tr></table></figure><p><strong>æœç´¢è·¯å¾„ï¼š</strong><br>æŒ‡å®šè¦æœç´¢çš„ç›®å½•è·¯å¾„ã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„æŒ‡å®šå•ä¸ªç›®å½•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦æ¥æŒ‡å®šå¤šä¸ªç›®å½•ã€‚</p><p><strong>é€‰é¡¹ï¼š</strong></p><ul><li><code>-name</code>ï¼šæŒ‰æ–‡ä»¶åè¿›è¡ŒåŒ¹é…æœç´¢ã€‚å¯ä»¥ä½¿ç”¨é€šé…ç¬¦è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚</li><li><code>-type</code>ï¼šæŒ‰æ–‡ä»¶ç±»å‹è¿›è¡ŒåŒ¹é…æœç´¢ã€‚ä¾‹å¦‚ï¼Œ<code>f</code> è¡¨ç¤ºæ™®é€šæ–‡ä»¶ï¼Œ<code>d</code> è¡¨ç¤ºç›®å½•ã€‚</li><li><code>-size</code>ï¼šæŒ‰æ–‡ä»¶å¤§å°è¿›è¡ŒåŒ¹é…æœç´¢ã€‚å¯ä»¥ä½¿ç”¨ <code>+</code> æˆ– <code>-</code> è¡¨ç¤ºå¤§äºæˆ–å°äºæŒ‡å®šå¤§å°ï¼Œä¾‹å¦‚ <code>+10M</code> è¡¨ç¤ºå¤§äº 10MBã€‚</li><li><code>-mtime</code>ï¼šæŒ‰æ–‡ä»¶ä¿®æ”¹æ—¶é—´è¿›è¡ŒåŒ¹é…æœç´¢ã€‚å¯ä»¥ä½¿ç”¨ <code>+</code> æˆ– <code>-</code> è¡¨ç¤ºåœ¨æŒ‡å®šå¤©æ•°å‰æˆ–åï¼Œä¾‹å¦‚ <code>-7</code> è¡¨ç¤ºä¸ƒå¤©å‰çš„æ–‡ä»¶ã€‚</li><li><code>-user</code>ï¼šæŒ‰æ–‡ä»¶æ‰€æœ‰è€…è¿›è¡ŒåŒ¹é…æœç´¢ã€‚</li></ul><p><strong>åŒ¹é…æ¡ä»¶ï¼š</strong><br>æŒ‡å®šè¦åŒ¹é…çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><ol><li>æŒ‰æ–‡ä»¶åæŸ¥æ‰¾æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -name <span class="string">&quot;filename.txt&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>/path/to/search</code> ç›®å½•ä¸‹æŸ¥æ‰¾åä¸º <code>filename.txt</code> çš„æ–‡ä»¶ã€‚</p><ol start="2"><li>æŒ‰æ–‡ä»¶ç±»å‹æŸ¥æ‰¾ç›®å½•ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -<span class="built_in">type</span> d</span><br></pre></td></tr></table></figure><p>åœ¨ <code>/path/to/search</code> ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ç›®å½•ã€‚</p><ol start="3"><li>æŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -size +1M</span><br></pre></td></tr></table></figure><p>åœ¨ <code>/path/to/search</code> ç›®å½•ä¸‹æŸ¥æ‰¾å¤§äº 1MB çš„æ–‡ä»¶ã€‚</p><ol start="4"><li>æŒ‰ä¿®æ”¹æ—¶é—´æŸ¥æ‰¾æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -mtime -7</span><br></pre></td></tr></table></figure><p>åœ¨ <code>/path/to/search</code> ç›®å½•ä¸‹æŸ¥æ‰¾æœ€è¿‘ 7 å¤©å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚</p><ol start="5"><li>æŒ‰æ–‡ä»¶æ‰€æœ‰è€…æŸ¥æ‰¾æ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/search -user alice</span><br></pre></td></tr></table></figure><p>åœ¨ <code>/path/to/search</code> ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰å±äº <code>alice</code> ç”¨æˆ·çš„æ–‡ä»¶ã€‚</p><p><code>find</code> å‘½ä»¤è¿˜æœ‰æ›´å¤šé€‰é¡¹å’Œç”¨æ³•ï¼Œæ‚¨å¯ä»¥é€šè¿‡ <code>man find</code> å‘½ä»¤æŸ¥çœ‹æ›´è¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£ã€‚ç”±äº <code>find</code> å‘½ä»¤å¯ä»¥é€’å½’æœç´¢æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨æ—¶è¯·è°¨æ…å¹¶ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„é€‰é¡¹å’Œè·¯å¾„æ¥é¿å…æ„å¤–æ“ä½œã€‚</p><h3 id="psæŒ‡ä»¤">psæŒ‡ä»¤</h3><p><code>ps</code> æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯çš„å‘½ä»¤ã€‚å®ƒç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­è¿è¡Œçš„è¿›ç¨‹çš„çŠ¶æ€ã€èµ„æºä½¿ç”¨æƒ…å†µå’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚<code>ps</code> å‘½ä»¤åœ¨ Linux/Unix ç³»ç»Ÿä¸­éå¸¸å¸¸ç”¨ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†ç³»ç»Ÿè¿›ç¨‹ã€‚</p><p><code>ps</code> å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [options]</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ps</code> å‘½ä»¤ä¼šæ˜¾ç¤ºå½“å‰ç»ˆç«¯ä¼šè¯ä¸‹æ­£åœ¨è¿è¡Œçš„å±äºå½“å‰ç”¨æˆ·çš„è¿›ç¨‹ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ <code>ps</code> å‘½ä»¤é€‰é¡¹ï¼š</p><ul><li><strong><code>-e</code> æˆ– <code>--everyone</code></strong>ï¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ï¼Œä¸ä»…é™äºå½“å‰ç”¨æˆ·ã€‚</li><li><strong><code>-f</code> æˆ– <code>--full</code></strong>ï¼šæ˜¾ç¤ºå®Œæ•´æ ¼å¼çš„è¿›ç¨‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</li><li><strong><code>-l</code> æˆ– <code>--long</code></strong>ï¼šæ˜¾ç¤ºè¯¦ç»†æ ¼å¼çš„è¿›ç¨‹ä¿¡æ¯ï¼Œä¸ <code>-f</code> ç±»ä¼¼ã€‚</li><li><strong><code>-u</code> æˆ– <code>--user</code></strong>ï¼šæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹ä¿¡æ¯ã€‚</li><li><strong><code>-p</code> æˆ– <code>--pid</code></strong>ï¼šæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹å·ï¼ˆPIDï¼‰çš„è¿›ç¨‹ä¿¡æ¯ã€‚</li><li><strong><code>-g</code> æˆ– <code>--group</code></strong>ï¼šæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹ç»„çš„è¿›ç¨‹ä¿¡æ¯ã€‚</li><li><strong><code>-t</code> æˆ– <code>--terminal</code></strong>ï¼šæ˜¾ç¤ºæŒ‡å®šç»ˆç«¯ä¼šè¯çš„è¿›ç¨‹ä¿¡æ¯ã€‚</li><li><strong><code>-H</code> æˆ– <code>--forest</code></strong>ï¼šä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ï¼Œæ˜¾ç¤ºè¿›ç¨‹ä¹‹é—´çš„çˆ¶å­å…³ç³»ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¦æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e</span><br></pre></td></tr></table></figure><p>è¦æŸ¥çœ‹å®Œæ•´æ ¼å¼çš„è¿›ç¨‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œå‚æ•°ç­‰ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -f</span><br></pre></td></tr></table></figure><p><code>ps</code> å‘½ä»¤è¿˜å¯ä»¥å’Œå…¶ä»–å‘½ä»¤ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚ <code>grep</code> å‘½ä»¤ï¼Œä»¥è¿‡æ»¤æ˜¾ç¤ºç‰¹å®šè¿›ç¨‹ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼ŒæŸ¥æ‰¾æ‰€æœ‰åŒ…å« â€œchromeâ€ çš„è¿›ç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep chrome</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>ps</code> å‘½ä»¤æ˜¾ç¤ºçš„è¿›ç¨‹ä¿¡æ¯å¯èƒ½å› ç³»ç»Ÿè€Œå¼‚ï¼Œä¸åŒçš„ç³»ç»Ÿå¯èƒ½æœ‰ä¸åŒçš„é€‰é¡¹å’Œè¾“å‡ºæ ¼å¼ã€‚ä½ å¯ä»¥æŸ¥é˜…ç³»ç»Ÿæ–‡æ¡£æˆ– <code>ps</code> å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ï¼ˆä½¿ç”¨ <code>man ps</code>ï¼‰æ¥äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>ps</code> å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ç›‘æ§å’Œç®¡ç†ç³»ç»Ÿè¿›ç¨‹ã€‚</p><h2 id="å·¥å…·ä»‹ç»">å·¥å…·ä»‹ç»</h2><h3 id="Tomcat">Tomcat</h3><p>Tomcatæ˜¯ä¸€ç§å¼€æºçš„WebæœåŠ¡å™¨å’ŒServletå®¹å™¨ï¼Œç”±Apacheè½¯ä»¶åŸºé‡‘ä¼šå¼€å‘å’Œç»´æŠ¤ã€‚å®ƒæ˜¯Java Servletå’ŒJavaServer Pagesï¼ˆJSPï¼‰çš„å®ç°ï¼Œå…è®¸Javaä»£ç åœ¨WebæœåŠ¡å™¨ä¸Šè¿è¡Œã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒTomcatæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†HTTPè¯·æ±‚çš„WebæœåŠ¡å™¨ï¼Œå®ƒæ”¯æŒJava Servletå’ŒJSPæŠ€æœ¯ï¼Œè¿™ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ›å»ºåŠ¨æ€çš„ã€åŸºäºJavaçš„Webåº”ç”¨ç¨‹åºã€‚å½“ç”¨æˆ·è®¿é—®Webåº”ç”¨ç¨‹åºæ—¶ï¼ŒTomcatä¼šå¤„ç†HTTPè¯·æ±‚å¹¶å°†å…¶äº¤ç»™é€‚å½“çš„Servletæˆ–JSPè¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ç›¸åº”çš„HTMLå†…å®¹ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚</p><p>Tomcatéå¸¸æµè¡Œï¼Œå¹¿æ³›ç”¨äºJava Webåº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€‚å®ƒå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„WebæœåŠ¡å™¨ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å…¶ä»–HTTPæœåŠ¡å™¨ï¼ˆå¦‚Apache HTTP Serverï¼‰ç»“åˆä½¿ç”¨ï¼Œé€šè¿‡è°ƒç”¨é€‚å½“çš„è¿æ¥å™¨å®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p><p>æ€»ç»“è€Œè¨€ï¼ŒTomcatæ˜¯ä¸€ä¸ªç”¨äºè¿è¡ŒJava Servletå’ŒJSPçš„Webå®¹å™¨ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ‰§è¡ŒJava Webåº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p><h3 id="Nginx">Nginx</h3><p>å½“è°ˆåˆ°Nginxæ—¶ï¼Œé€šå¸¸æ˜¯æŒ‡Nginxï¼ˆå‘éŸ³ä¸º&quot;engine-x&quot;ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºWebæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ã€‚Nginxæœ€åˆç”±ä¿„ç½—æ–¯çš„ç¨‹åºå‘˜Igor Sysoevå¼€å‘ï¼Œç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬å‘å¸ƒäº2004å¹´ã€‚Nginxçš„ç›®æ ‡æ˜¯æä¾›å‡ºè‰²çš„æ€§èƒ½ã€ç¨³å®šæ€§å’Œä½ç³»ç»Ÿèµ„æºæ¶ˆè€—ï¼Œç‰¹åˆ«é€‚ç”¨äºé«˜å¹¶å‘çš„WebæœåŠ¡å’Œè´Ÿè½½å‡è¡¡ã€‚</p><p>ä¸»è¦ç‰¹ç‚¹ï¼š</p><ol><li><p>é«˜æ€§èƒ½ï¼šNginxä»¥å…¶ä¼˜ç§€çš„æ€§èƒ½è€Œé—»åï¼Œå®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡å¹¶å‘è¿æ¥ï¼Œé«˜æ•ˆåœ°å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p></li><li><p>è½»é‡çº§ï¼šç›¸å¯¹äºå…¶ä»–WebæœåŠ¡å™¨ï¼ŒNginxçš„å†…å­˜å ç”¨å’Œèµ„æºæ¶ˆè€—è¾ƒä½ï¼Œè¿™ä½¿å…¶é€‚åˆéƒ¨ç½²åœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸­ã€‚</p></li><li><p>åå‘ä»£ç†ï¼šNginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚è½¬å‘ç»™åç«¯åº”ç”¨æœåŠ¡å™¨ï¼Œå¹¶å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä»è€Œéšè—åç«¯æœåŠ¡å™¨çš„ç»†èŠ‚ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</p></li><li><p>è´Ÿè½½å‡è¡¡ï¼šNginxæ”¯æŒè´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥å°†å®¢æˆ·ç«¯è¯·æ±‚å‡åŒ€åœ°åˆ†å‘ç»™å¤šä¸ªåç«¯æœåŠ¡å™¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p></li><li><p>é™æ€æ–‡ä»¶æœåŠ¡ï¼šNginxèƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†é™æ€æ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€CSSå’ŒJavaScriptæ–‡ä»¶ç­‰ï¼Œå¯ä»¥æä¾›å¿«é€Ÿçš„é™æ€å†…å®¹è®¿é—®ã€‚</p></li><li><p>é«˜åº¦å¯æ‰©å±•ï¼šç”±äºå…¶è½»é‡çº§å’Œé«˜æ€§èƒ½çš„ç‰¹æ€§ï¼ŒNginxéå¸¸é€‚åˆç”¨äºæ„å»ºå¤§è§„æ¨¡ã€é«˜å¹¶å‘çš„Webåº”ç”¨å’ŒæœåŠ¡ã€‚</p></li><li><p>å¯ä»¥ä½œä¸ºHTTPç¼“å­˜ï¼šNginxèƒ½å¤Ÿç¼“å­˜é™æ€å†…å®¹å’Œåå‘ä»£ç†çš„å“åº”ï¼Œå‡è½»åç«¯æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p></li></ol><p>Nginxé€šå¸¸ç”¨äºæ­å»ºé™æ€å†…å®¹æœåŠ¡ã€åå‘ä»£ç†æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ä»¥åŠç¼“å­˜æœåŠ¡å™¨ç­‰ã€‚å®ƒåœ¨äº’è”ç½‘ä¸Šå¹¿æ³›ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä¸€äº›å¤§å‹çš„ç½‘ç«™å’ŒæœåŠ¡éƒ½åœ¨ä½¿ç”¨Nginxæ¥å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡Nginxèƒ½å¤Ÿå¤„ç†é™æ€å†…å®¹ï¼Œä½†å®ƒä¸èƒ½åƒä¼ ç»Ÿçš„WebæœåŠ¡å™¨ï¼ˆå¦‚Apacheï¼‰é‚£æ ·ç›´æ¥è§£æåŠ¨æ€å†…å®¹ï¼Œå› æ­¤é€šå¸¸éœ€è¦ä¸åç«¯åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚Node.jsã€PHP-FPMæˆ–uWSGIç­‰ï¼‰é…åˆä½¿ç”¨ï¼Œä»¥å¤„ç†åŠ¨æ€å†…å®¹å¹¶å°†ç»“æœè¿”å›ç»™Nginxã€‚è¿™ç§ç»„åˆæ¶æ„é€šå¸¸è¢«ç§°ä¸ºLAMPï¼ˆLinux + Apache + MySQL + PHPï¼‰æˆ–LEMPï¼ˆLinux + Nginx + MySQL + PHPï¼‰ç­‰ã€‚</p><h3 id="RabbitMQ">RabbitMQ</h3><p>RabbitMQæ˜¯ä¸€ç§å¼€æºçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œå®ƒå®ç°äº†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼ˆAMQPï¼šAdvanced Message Queuing Protocolï¼‰ã€‚ç”±Pivotal Softwareï¼ˆç°å·²è¢«VMwareæ”¶è´­ï¼‰å¼€å‘å’Œç»´æŠ¤ï¼ŒRabbitMQæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼Œç”¨äºåœ¨åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚</p><p>åœ¨ç°ä»£çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¸­ï¼Œä¸åŒçš„ç»„ä»¶æˆ–æœåŠ¡å¯èƒ½è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨æˆ–å®¹å™¨ä¸­ï¼Œå¹¶ä¸”å®ƒä»¬éœ€è¦è¿›è¡Œé€šä¿¡å’Œåè°ƒã€‚è¿™æ—¶å€™ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æˆä¸ºä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚æ¶ˆæ¯é˜Ÿåˆ—å……å½“äº†ä¸­é—´äººçš„è§’è‰²ï¼Œå®ƒæ¥æ”¶æ¥è‡ªä¸€ä¸ªç»„ä»¶çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å¦ä¸€ä¸ªç»„ä»¶ï¼Œä»è€Œå®ç°äº†å¼‚æ­¥é€šä¿¡ï¼Œé™ä½äº†ç³»ç»Ÿä¹‹é—´çš„è€¦åˆæ€§ï¼Œå¹¶æé«˜äº†å¯ä¼¸ç¼©æ€§å’Œå¯é æ€§ã€‚</p><p>RabbitMQçš„åŸºæœ¬å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>ç”Ÿäº§è€…ï¼ˆProducerï¼‰ï¼šå‘é€æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºç§°ä¸ºç”Ÿäº§è€…ï¼Œå®ƒå°†æ¶ˆæ¯å‘é€åˆ°RabbitMQçš„äº¤æ¢æœºï¼ˆExchangeï¼‰ã€‚</li><li>äº¤æ¢æœºï¼ˆExchangeï¼‰ï¼šäº¤æ¢æœºæ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œå¹¶æ ¹æ®ä¸€å®šçš„è·¯ç”±è§„åˆ™å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</li><li>é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼šé˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„å®¹å™¨ï¼Œåœ¨æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºåï¼Œæ ¹æ®äº¤æ¢æœºçš„è·¯ç”±è§„åˆ™ï¼Œè¢«è·¯ç”±åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—ä¸­ç­‰å¾…æ¶ˆè´¹ã€‚</li><li>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ï¼šæ¶ˆè´¹è€…æ˜¯æ¥æ”¶æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºï¼Œå®ƒä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†ã€‚</li></ol><p>RabbitMQæ”¯æŒå¤šç§æ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼Œå¦‚ç‚¹å¯¹ç‚¹ï¼ˆP2Pï¼‰å’Œå‘å¸ƒ-è®¢é˜…ï¼ˆPub-Subï¼‰æ¨¡å¼ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚çµæ´»åœ°é…ç½®ã€‚</p><p>ç”±äºRabbitMQæ˜¯ä¸€ä¸ªå¥å£®ã€å¯é ä¸”é«˜æ€§èƒ½çš„æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿï¼Œå®ƒåœ¨å¾ˆå¤šåœºæ™¯ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼ŒåŒ…æ‹¬å¾®æœåŠ¡æ¶æ„ã€ä»»åŠ¡é˜Ÿåˆ—ã€äº‹ä»¶å¤„ç†ã€æ—¥å¿—èšåˆç­‰ã€‚</p><h3 id="EPELä»“åº“">EPELä»“åº“</h3><p>EPELï¼ˆExtra Packages for Enterprise Linuxï¼‰æ˜¯ä¸ºä¼ä¸šçº§Linuxå‘è¡Œç‰ˆæä¾›é¢å¤–è½¯ä»¶åŒ…çš„ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ã€‚å®ƒä¸ºRed Hat Enterprise Linux (RHEL)ã€CentOSå’Œå…¶ä»–RHELå…¼å®¹çš„Linuxå‘è¡Œç‰ˆæä¾›äº†å¤§é‡çš„é«˜è´¨é‡ã€å¯é çš„é¢å¤–è½¯ä»¶åŒ…ã€‚è¿™äº›è½¯ä»¶åŒ…é€šå¸¸ä¸åŒ…å«åœ¨å®˜æ–¹å‘è¡Œç‰ˆçš„è½¯ä»¶ä»“åº“ä¸­ï¼Œä½†å®ƒä»¬æ˜¯å¾ˆå¤šç”¨æˆ·éœ€è¦çš„å¸¸ç”¨å’Œæµè¡Œè½¯ä»¶çš„è¡¥å……ã€‚</p><p>EPELé¡¹ç›®ç”±Fedoraç¤¾åŒºç»´æŠ¤ï¼ŒFedoraæ˜¯Red Hatæ”¯æŒçš„ä¸€ä¸ªå¼€æºLinuxå‘è¡Œç‰ˆã€‚EPELæ—¨åœ¨ä¸ºä¼ä¸šçº§Linuxç”¨æˆ·æä¾›æ›´å¤šçš„è½¯ä»¶é€‰æ‹©ï¼Œä»¥æ»¡è¶³ä¸åŒéœ€æ±‚ã€‚å®ƒæä¾›äº†è®¸å¤šç¤¾åŒºè´¡çŒ®çš„è½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…ç»è¿‡æµ‹è¯•ï¼Œå¹¶ä¸”ä¸å®˜æ–¹å‘è¡Œç‰ˆä¿æŒå…¼å®¹æ€§ã€‚</p><p>EPELä»“åº“çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ol><li><p><strong>é¢å¤–è½¯ä»¶åŒ…</strong>ï¼šEPELæä¾›äº†å¾ˆå¤šé¢å¤–çš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬å„ç§å¼€å‘å·¥å…·ã€ç½‘ç»œæœåŠ¡ã€ç³»ç»Ÿå·¥å…·ã€æ•°æ®åº“ã€ç¼–ç¨‹è¯­è¨€çš„è§£é‡Šå™¨å’Œåº“ç­‰ã€‚</p></li><li><p><strong>é«˜è´¨é‡å’Œå®‰å…¨æ€§</strong>ï¼šEPELä¸­çš„è½¯ä»¶åŒ…ç»è¿‡å®¡æ ¸å’Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿å…¶è´¨é‡å’Œå®‰å…¨æ€§ã€‚è¿™æœ‰åŠ©äºé™ä½ç”¨æˆ·åœ¨ä½¿ç”¨è¿™äº›è½¯ä»¶åŒ…æ—¶çš„é£é™©ã€‚</p></li><li><p><strong>é•¿æœŸæ”¯æŒ</strong>ï¼šEPELæ”¯æŒé•¿æœŸå‘è¡Œç‰ˆï¼ˆå¦‚RHELï¼‰çš„ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å³ä½¿å‘è¡Œç‰ˆæ›´æ–°ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„EPELä»“åº“ã€‚</p></li></ol><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¦åœ¨Linuxç³»ç»Ÿä¸­å¯ç”¨EPELä»“åº“ï¼Œåªéœ€å®‰è£…EPELçš„è½¯ä»¶åŒ…å³å¯ã€‚å¯¹äºRHELå’ŒCentOSç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…EPELä»“åº“ï¼š</p><p>å¯¹äºRHEL 7å’ŒCentOS 7ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure><p>å¯¹äºRHEL 8å’ŒCentOS 8ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf install epel-release</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œä½ å°±å¯ä»¥ä½¿ç”¨EPELä»“åº“ä¸­çš„è½¯ä»¶åŒ…äº†ã€‚ä¾‹å¦‚ï¼Œè¦å®‰è£…EPELä»“åº“ä¸­çš„è½¯ä»¶åŒ…ï¼Œå¯ä»¥ä½¿ç”¨<code>yum</code>æˆ–<code>dnf</code>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install package_name</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">sudo dnf install package_name</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼ŒEPELä»“åº“è™½ç„¶æä¾›äº†å¾ˆå¤šé¢å¤–çš„è½¯ä»¶åŒ…ï¼Œä½†åœ¨å®‰è£…æ—¶ä»è¦æ³¨æ„è½¯ä»¶åŒ…çš„æ¥æºå’Œä¿¡ä»»åº¦ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚å°½é‡é€‰æ‹©å®˜æ–¹æ”¯æŒçš„è½¯ä»¶åŒ…ï¼Œå¹¶å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶åŒ…ï¼Œä»¥è·å–æœ€æ–°çš„å®‰å…¨è¡¥ä¸å’ŒåŠŸèƒ½æ›´æ–°ã€‚</p><h3 id="iptableså’Œfirewall">iptableså’Œfirewall</h3><p>iptableså’Œfirewalldéƒ½æ˜¯ç”¨äºé…ç½®Linuxé˜²ç«å¢™çš„å·¥å…·ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡å’Œä½¿ç”¨ä¸Šæœ‰ä¸€äº›åŒºåˆ«ï¼š</p><ol><li><p><strong>iptables</strong>:</p><ul><li>iptablesæ˜¯Linuxä¸Šä¼ ç»Ÿçš„é˜²ç«å¢™å·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªå†…æ ¸ç©ºé—´çš„å·¥å…·ï¼Œç›´æ¥ä¸Linuxå†…æ ¸äº¤äº’ã€‚</li><li>iptablesä½¿ç”¨è§„åˆ™é“¾ï¼ˆRules Chainsï¼‰å’Œè¡¨ï¼ˆTablesï¼‰æ¥ç®¡ç†é˜²ç«å¢™è§„åˆ™ã€‚ä¸»è¦æœ‰ä¸‰ä¸ªè¡¨ï¼š<code>filter</code>è¡¨ï¼ˆç”¨äºè¿‡æ»¤æ•°æ®åŒ…ï¼‰ã€<code>nat</code>è¡¨ï¼ˆç”¨äºç½‘ç»œåœ°å€è½¬æ¢ï¼‰ã€<code>mangle</code>è¡¨ï¼ˆç”¨äºç‰¹æ®Šä¿®æ”¹æ•°æ®åŒ…ï¼‰ã€‚</li><li>iptablesè§„åˆ™æ˜¯é™æ€çš„ï¼Œä¸€æ—¦è®¾ç½®åï¼Œé™¤éé‡æ–°å¯åŠ¨é˜²ç«å¢™æˆ–æ‰‹åŠ¨æ›´æ”¹è§„åˆ™ï¼Œå¦åˆ™è§„åˆ™ä¸ä¼šåŠ¨æ€æ”¹å˜ã€‚</li><li>iptablesé…ç½®è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™è§„åˆ™ï¼Œå¯¹äºå¤æ‚çš„é˜²ç«å¢™ç­–ç•¥ï¼Œç®¡ç†å’Œç»´æŠ¤ç›¸å¯¹ç¹çã€‚</li></ul></li><li><p><strong>firewalld</strong>:</p><ul><li>firewalldæ˜¯ä¸€ä¸ªåŠ¨æ€é˜²ç«å¢™ç®¡ç†å™¨ï¼Œå®ƒæ˜¯iptablesçš„é«˜çº§æ¥å£ï¼Œæ—¨åœ¨ç®€åŒ–é˜²ç«å¢™é…ç½®å’Œç®¡ç†ã€‚</li><li>firewalldä½¿ç”¨åŸºäºZoneçš„æ¦‚å¿µï¼Œå°†ç½‘ç»œæ¥å£å½’ç±»åˆ°ä¸åŒçš„Zoneä¸­ï¼Œå¹¶ä¸ºæ¯ä¸ªZoneè®¾ç½®é˜²ç«å¢™è§„åˆ™ã€‚Zoneå¯ä»¥æ ¹æ®ç½‘ç»œç¯å¢ƒçš„ä¸åŒï¼Œè‡ªåŠ¨è°ƒæ•´é˜²ç«å¢™è§„åˆ™ã€‚</li><li>firewalldæ”¯æŒè¿è¡Œæ—¶çš„è§„åˆ™åŠ¨æ€æ›´æ–°ï¼Œå³ä½¿åœ¨é…ç½®é˜²ç«å¢™æ—¶ä¹Ÿå¯ä»¥å®æ—¶ç”Ÿæ•ˆï¼Œä¸éœ€è¦é‡æ–°å¯åŠ¨é˜²ç«å¢™ã€‚</li><li>firewalldè¿˜æ”¯æŒD-Buså’ŒNetworkManageré›†æˆï¼Œæ–¹ä¾¿åœ¨å›¾å½¢ç•Œé¢ä¸­é…ç½®å’Œç®¡ç†é˜²ç«å¢™ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼Œiptablesæ˜¯ä¼ ç»Ÿçš„ã€é™æ€çš„é˜²ç«å¢™å·¥å…·ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™è§„åˆ™ï¼Œå¹¶ä¸”ä¸€æ—¦è®¾ç½®åï¼Œè§„åˆ™ä¸ä¼šè‡ªåŠ¨è°ƒæ•´ã€‚è€Œfirewalldæ˜¯ä¸€ä¸ªåŠ¨æ€çš„é˜²ç«å¢™ç®¡ç†å™¨ï¼Œä½¿ç”¨Zoneå’Œè¿è¡Œæ—¶åŠ¨æ€æ›´æ–°çš„ç‰¹æ€§ï¼Œä½¿å¾—é…ç½®å’Œç®¡ç†é˜²ç«å¢™å˜å¾—æ›´åŠ ç®€å•å’Œçµæ´»ã€‚å¯¹äºæ–°çš„Linuxå‘è¡Œç‰ˆï¼Œæ¨èä½¿ç”¨firewalldæ¥ç®¡ç†é˜²ç«å¢™ï¼Œè€Œåœ¨ä¸€äº›æ—§çš„ç³»ç»Ÿä¸Šï¼Œiptableså¯èƒ½ä»ç„¶æ˜¯å¸¸è§çš„å·¥å…·ã€‚</p><h2 id="æ–‡ä»¶æˆ–ç›®å½•ä¸€å…±æœ‰å“ªäº›ç±»å‹">æ–‡ä»¶æˆ–ç›®å½•ä¸€å…±æœ‰å“ªäº›ç±»å‹</h2><p>å¯¹çš„ï¼Œæˆ‘ä¹‹å‰çš„å›ç­”æœ‰è¯¯ã€‚æ–‡ä»¶æˆ–ç›®å½•æƒé™è¡¨ç¤ºçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç¡®å®å¯èƒ½æ˜¯å…¶ä»–å€¼ï¼Œä¸ä»…ä»…é™äº <code>-</code> å’Œ <code>d</code>ã€‚</p><p>åœ¨æ–‡ä»¶æˆ–ç›®å½•æƒé™è¡¨ç¤ºä¸­ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨äº†æ–‡ä»¶ç±»å‹å’Œæƒé™çš„ä¿¡æ¯ã€‚é™¤äº†æ™®é€šæ–‡ä»¶å’Œç›®å½•ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å¯èƒ½çš„ç±»å‹ï¼š</p><ol><li><code>-</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚</li><li><code>d</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç›®å½•ã€‚</li><li><code>l</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰ã€‚</li><li><code>b</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå—è®¾å¤‡æ–‡ä»¶ã€‚</li><li><code>c</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶ã€‚</li><li><code>s</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¥—æ¥å­—æ–‡ä»¶ã€‚</li><li><code>p</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå‘½åç®¡é“ï¼ˆFIFOï¼‰ã€‚</li></ol><p>è¿™äº›å­—ç¬¦æè¿°äº†æ–‡ä»¶ç±»å‹ï¼Œå¹¶ä¸”åé¢çš„ä¹ä¸ªå­—ç¬¦ä»ç„¶ä»£è¡¨æ–‡ä»¶çš„æƒé™ä¿¡æ¯ï¼Œåˆ†ä¸ºæ‰€æœ‰è€…ã€åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚</p><p>æ‰€ä»¥ï¼Œå®Œæ•´çš„æ–‡ä»¶æˆ–ç›®å½•æƒé™è¡¨ç¤ºç”±åä¸ªå­—ç¬¦ç»„æˆï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼Œæ¥ä¸‹æ¥çš„ä¹ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶çš„è®¿é—®æƒé™ã€‚ä¾‹å¦‚ï¼Œ<code>-rw-r--r--</code> è¡¨ç¤ºä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œæ‰€æœ‰è€…æœ‰è¯»å†™æƒé™ï¼ŒåŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·åªæœ‰è¯»å–æƒé™ã€‚</p><p>å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘æˆ‘è¯¢é—®ã€‚</p><h2 id="SELinuxæ˜¯ä»€ä¹ˆ">SELinuxæ˜¯ä»€ä¹ˆ</h2><p>SELinuxï¼ˆSecurity-Enhanced Linuxï¼‰æ˜¯ä¸€ä¸ªåœ¨ Linux æ“ä½œç³»ç»Ÿä¸Šå®æ–½å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰çš„å®‰å…¨å­ç³»ç»Ÿã€‚å®ƒåœ¨å†…æ ¸çº§åˆ«æä¾›äº†ä¸€å¥—å¼ºå¤§çš„å®‰å…¨ç­–ç•¥æœºåˆ¶ï¼Œç”¨äºé™åˆ¶è¿›ç¨‹ã€ç”¨æˆ·å’Œç³»ç»ŸæœåŠ¡ä¹‹é—´çš„è®¿é—®æƒé™ã€‚SELinux çš„è®¾è®¡ç›®æ ‡æ˜¯åŠ å¼ºæ“ä½œç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œé€šè¿‡ç»†ç²’åº¦çš„æƒé™æ§åˆ¶æ¥é˜²æ­¢æ¶æ„æ´»åŠ¨å’Œæ”»å‡»ã€‚</p><p>ä¸ä¼ ç»Ÿçš„è‡ªç”±è®¿é—®æ§åˆ¶ï¼ˆDACï¼‰ç³»ç»Ÿä¸åŒï¼ŒSELinux å¼ºè°ƒåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çº§åˆ«å®æ–½å®‰å…¨ç­–ç•¥ï¼Œä¸ä»…ä¾èµ–äºç”¨æˆ·å’Œæ–‡ä»¶çš„æƒé™è®¾ç½®ã€‚å®ƒä½¿ç”¨äº†æ ‡ç­¾ï¼ˆLabelï¼‰æ¥æ ‡è¯†å¯¹è±¡ï¼ˆå¦‚æ–‡ä»¶ã€è¿›ç¨‹ã€ç«¯å£ç­‰ï¼‰ï¼Œå¹¶åŸºäºè¿™äº›æ ‡ç­¾æ¥å¼ºåˆ¶æ‰§è¡Œè®¿é—®æ§åˆ¶ã€‚è¿™ç§æ–¹å¼å¯ä»¥é™åˆ¶åº”ç”¨ç¨‹åºå’Œç”¨æˆ·åªèƒ½è¿›è¡Œç‰¹å®šçš„æ“ä½œï¼Œä»è€Œé™ä½äº†æ”»å‡»çš„æ½œåœ¨é£é™©ã€‚</p><p>SELinux æä¾›äº†ä»¥ä¸‹å‡ ç§å®‰å…¨ä¸Šä¸‹æ–‡ï¼š</p><ol><li><p><strong>ç”¨æˆ·å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆUser Contextï¼‰ï¼š</strong> æ ‡è¯†ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚ç±»ä¼¼äº Linux ä¸­çš„ç”¨æˆ·å’Œç»„æ ‡è¯†ã€‚</p></li><li><p><strong>å¯¹è±¡å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆObject Contextï¼‰ï¼š</strong> æ ‡è¯†æ–‡ä»¶ã€è¿›ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºã€‚å¯¹è±¡çš„å®‰å…¨ä¸Šä¸‹æ–‡å¯ä»¥æ ¹æ®æ ‡ç­¾æŒ‡å®šçš„å®‰å…¨ç­–ç•¥æ¥é™åˆ¶å¯¹å®ƒä»¬çš„è®¿é—®ã€‚</p></li><li><p><strong>è§’è‰²å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆRole Contextï¼‰ï¼š</strong> æ ‡è¯†ç”¨æˆ·çš„è§’è‰²ã€‚è§’è‰²å¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ç»„å…è®¸çš„æ“ä½œå’Œæƒé™ã€‚</p></li><li><p><strong>ç±»å‹å®‰å…¨ä¸Šä¸‹æ–‡ï¼ˆType Contextï¼‰ï¼š</strong> æ ‡è¯†å¯¹è±¡çš„ç±»å‹ã€‚ç±»å‹å®šä¹‰äº†å¯¹è±¡å¯ä»¥æ‰§è¡Œçš„æ“ä½œå’Œè¢«è®¿é—®çš„èµ„æºã€‚</p></li></ol><p>SELinux çš„å·¥ä½œåŸç†æ˜¯åŸºäºç­–ç•¥è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å®šä¹‰äº†å“ªäº›å®‰å…¨ä¸Šä¸‹æ–‡å¯ä»¥è®¿é—®ç‰¹å®šç±»å‹çš„èµ„æºï¼Œä»¥åŠå¯ä»¥æ‰§è¡Œå“ªäº›æ“ä½œã€‚SELinux æä¾›äº†ä¸åŒçš„ç­–ç•¥ï¼Œå¦‚&quot;targeted&quot;ï¼ˆé’ˆå¯¹æ€§ç­–ç•¥ï¼‰å’Œ&quot;strict&quot;ï¼ˆä¸¥æ ¼ç­–ç•¥ï¼‰ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©é€‚å½“çš„ç­–ç•¥ã€‚</p><p>æ€»ä¹‹ï¼ŒSELinux å¢å¼ºäº† Linux ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œé€šè¿‡å¼ºåˆ¶æ€§çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œæœ‰åŠ©äºé˜²æ­¢æ½œåœ¨çš„æ¶æ„æ´»åŠ¨å’Œæé«˜ç³»ç»Ÿçš„æŠµæŠ—åŠ›ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»CentOSçš„å®‰è£…ã€å¸¸ç”¨æŒ‡ä»¤ã€å¸¸ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶</summary>
    
    
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://momoao.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="Linux" scheme="https://momoao.github.io/tags/Linux/"/>
    
    <category term="CentOS" scheme="https://momoao.github.io/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>Git</title>
    <link href="https://momoao.github.io/posts/202308241935.html"/>
    <id>https://momoao.github.io/posts/202308241935.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:33:31.527Z</updated>
    
    <content type="html"><![CDATA[<h1>Git</h1><h2 id="Gitæ•™ç¨‹">Gitæ•™ç¨‹</h2><h3 id="é…ç½®">é…ç½®</h3><p>æŸ¥çœ‹æ‰€æœ‰é…ç½®</p><p>-lä»£è¡¨list</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config -l</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç³»ç»Ÿè‡ªå¸¦çš„é…ç½®</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">$ git config</span> <span class="literal">--</span><span class="comment">system</span> <span class="literal">--</span><span class="comment">list</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å…¨å±€é…ç½®çš„å†…å®¹</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">$ git config</span> <span class="literal">--</span><span class="comment">global</span> <span class="literal">--</span><span class="comment">list</span></span><br></pre></td></tr></table></figure><p>åœ¨Cç›˜çš„ç”¨æˆ·/ç”¨æˆ·åä¸‹ï¼Œæœ‰ä¸ª.gitconfigæ–‡ä»¶ï¼Œé‡Œé¢æœ‰ç”¨æˆ·æ·»åŠ çš„é…ç½®</p><p>æ–‡ä»¶æ¸…ç©ºä»¥åï¼Œä½¿ç”¨git config --global --listå°†çœ‹ä¸è§ç”¨æˆ·çš„é…ç½®</p><p><img src="../assets/image/Github_Image/image-20230819160412047.png" alt="image-20230819160412047"></p><p>åœ¨GitBashä¸­é…ç½®ç”¨æˆ·æ•°æ®</p><p><img src="../assets/image/Github_Image/image-20230819160734211.png" alt="image-20230819160734211"></p><h3 id="Gitå·¥ä½œåŸç†">Gitå·¥ä½œåŸç†</h3><p><img src="../assets/image/Github_Image/640.png" alt="å›¾ç‰‡"></p><p>åˆå§‹åŒ–ä»“åº“</p><p>åˆå§‹åŒ–ä¹‹åGitDataæ–‡ä»¶å¤¹ä¸‹ä¼šå‡ºç°ä¸€ä¸ª.gitæ–‡ä»¶å¤¹</p><p>è¿™ä»£è¡¨GitDataå°±æ˜¯ä¸€ä¸ªæ–°çš„ä»£ç åº“äº†</p><p><img src="../assets/image/Github_Image/image-20230819175906398.png" alt="image-20230819175906398"></p><p><img src="../assets/image/Github_Image/image-20230819175943115.png" alt="image-20230819175943115"></p><p><img src="../assets/image/Github_Image/image-20230819181112261.png" alt="image-20230819181112261"></p><h3 id="Gitæ–‡ä»¶æ“ä½œ">Gitæ–‡ä»¶æ“ä½œ</h3><h4 id="æ–‡ä»¶çš„å››ç§çŠ¶æ€">æ–‡ä»¶çš„å››ç§çŠ¶æ€</h4><p>ç‰ˆæœ¬æ§åˆ¶å°±æ˜¯å¯¹æ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œè¦å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€æäº¤ç­‰æ“ä½œï¼Œé¦–å…ˆè¦çŸ¥é“æ–‡ä»¶å½“å‰åœ¨ä»€ä¹ˆçŠ¶æ€ï¼Œä¸ç„¶å¯èƒ½ä¼šæäº¤äº†ç°åœ¨è¿˜ä¸æƒ³æäº¤çš„æ–‡ä»¶ï¼Œæˆ–è€…è¦æäº¤çš„æ–‡ä»¶æ²¡æäº¤ä¸Šã€‚</p><ul><li>Untracked: æœªè·Ÿè¸ª, æ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­, ä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ°gitåº“, ä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶. é€šè¿‡git add çŠ¶æ€å˜ä¸ºStaged.</li><li>Unmodify: æ–‡ä»¶å·²ç»å…¥åº“, æœªä¿®æ”¹, å³ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§å†…å®¹ä¸æ–‡ä»¶å¤¹ä¸­å®Œå…¨ä¸€è‡´. è¿™ç§ç±»å‹çš„æ–‡ä»¶æœ‰ä¸¤ç§å»å¤„, å¦‚æœå®ƒè¢«ä¿®æ”¹, è€Œå˜ä¸ºModified. å¦‚æœä½¿ç”¨git rmç§»å‡ºç‰ˆæœ¬åº“, åˆ™æˆä¸ºUntrackedæ–‡ä»¶</li><li>Modified: æ–‡ä»¶å·²ä¿®æ”¹, ä»…ä»…æ˜¯ä¿®æ”¹, å¹¶æ²¡æœ‰è¿›è¡Œå…¶ä»–çš„æ“ä½œ. è¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ä¸¤ä¸ªå»å¤„, é€šè¿‡git addå¯è¿›å…¥æš‚å­˜stagedçŠ¶æ€, ä½¿ç”¨git checkout åˆ™ä¸¢å¼ƒä¿®æ”¹è¿‡, è¿”å›åˆ°unmodifyçŠ¶æ€, è¿™ä¸ªgit checkoutå³ä»åº“ä¸­å–å‡ºæ–‡ä»¶, è¦†ç›–å½“å‰ä¿®æ”¹ !</li><li>Staged: æš‚å­˜çŠ¶æ€. æ‰§è¡Œgit commitåˆ™å°†ä¿®æ”¹åŒæ­¥åˆ°åº“ä¸­, è¿™æ—¶åº“ä¸­çš„æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶åˆå˜ä¸ºä¸€è‡´, æ–‡ä»¶ä¸ºUnmodifyçŠ¶æ€. æ‰§è¡Œgit reset HEAD filenameå–æ¶ˆæš‚å­˜, æ–‡ä»¶çŠ¶æ€ä¸ºModified</li></ul><p>æ·»åŠ æ–°æ–‡ä»¶åï¼ŒæŸ¥çœ‹åº“çš„çŠ¶æ€ï¼Œå‘ç°éƒ½æ˜¯Untractedï¼ˆæœªè·Ÿè¸ªï¼‰çš„çŠ¶æ€</p><p><img src="../assets/image/Github_Image/image-20230819181917008.png" alt="image-20230819181917008"></p><p>éœ€è¦ä½¿ç”¨git addå°†éœ€è¦çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œè¿™äº›æ–‡ä»¶åˆ°æš‚å­˜åŒºåå°±æ˜¯è·Ÿè¸ªçŠ¶æ€äº†</p><p><img src="../assets/image/Github_Image/image-20230819182046827.png" alt="image-20230819182046827"></p><p>ç„¶åä½¿ç”¨git commitæäº¤æ‰€æœ‰æš‚å­˜åŒºçš„å†…å®¹åˆ°æœ¬åœ°åº“ï¼Œå¯ä»¥é™„åŠ ä¸Šå‚æ•°-mï¼Œåé¢é™„åŠ ä¸Šè¿™æ¬¡æäº¤çš„æè¿°ä¿¡æ¯</p><p><img src="../assets/image/Github_Image/image-20230819182111119.png" alt="image-20230819182111119"></p><h3 id="è®¾ç½®ä»“åº“">è®¾ç½®ä»“åº“</h3><p>åœ¨C:\Users\25463.sshç›®å½•ä¸‹</p><p>ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥ï¼Œä½¿ç”¨RSAåŠ å¯†ç®—æ³•ç”Ÿæˆå…¬é’¥å’Œå¯†é’¥</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh-keygen -t rsa</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå¤åˆ¶.pubæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œè¿›å…¥Giteeæ·»åŠ å…¬é’¥</p><p><img src="../assets/image/Github_Image/image-20230820140730192.png" alt="image-20230820140730192"></p><h4 id="ä½¿ç”¨HTTPSé“¾æ¥">ä½¿ç”¨HTTPSé“¾æ¥</h4><p><strong>éœ€è¦Giteeè´¦å·å’Œå¯†ç </strong></p><p>åˆ›å»ºä»“åº“ï¼Œå¤åˆ¶ä»“åº“çš„HTTPSåœ°å€ï¼Œ</p><p>ä½¿ç”¨æŒ‡ä»¤æ·»åŠ è¿œç¨‹ä»“åº“</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add <span class="tag">&lt;<span class="name">çŸ­å</span>&gt;</span> <span class="tag">&lt;<span class="name">è¿œç¨‹ä»“åº“URL</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹è¿œç¨‹ä»“åº“çš„å‡ ä¸ªæ“ä½œå‘½ä»¤:</p><ul><li>git remote add: æ·»åŠ è¿œç¨‹ä»“åº“</li><li>git remote rm: åˆ é™¤è¿œç¨‹ä»“åº“</li><li>git remote set-url: ä¿®æ”¹è¿œç¨‹ä»“åº“URL</li><li>git remote -v: æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€</li></ul><p>æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„é…ç½®<br><img src="../assets/image/Github_Image/image-20230820142752821.png" alt="image-20230820142752821"></p><p>è¦è®¾ç½® fetch å’Œ push ä½¿ç”¨ä¸åŒçš„ URL,å¯ä»¥è¿™æ ·æ“ä½œ:</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® fetch åœ°å€</span></span><br><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="built_in">set-url</span> <span class="built_in">--push</span> <span class="string">origin</span> <span class="string">https</span>://<span class="string">github</span>.<span class="string">com</span>/<span class="string">user</span>/<span class="string">repo</span>.<span class="string">git</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® push åœ°å€</span></span><br><span class="line"><span class="string">git</span> <span class="string">remote</span> <span class="built_in">set-url</span> <span class="built_in">--push</span> <span class="string">origin</span> <span class="string">https</span>://<span class="string">github</span>.<span class="string">com</span>/<span class="string">user</span>/<span class="string">repo_push</span>.<span class="string">git</span></span><br></pre></td></tr></table></figure><p>ä¹‹åcommitä¹‹åçš„å†…å®¹å°±å¯ä»¥ä½¿ç”¨git pushè¿›è¡Œæäº¤</p><p>ç¬¬ä¸€æ¬¡æäº¤ä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·åï¼ˆä¸æ˜¯æ˜µç§°ï¼‰å’Œå¯†ç ï¼Œè¾“å…¥ä¹‹åå°±å¯ä»¥æäº¤åˆ°è¿œç¨‹ä»“åº“äº†</p><h4 id="ä½¿ç”¨SSHé“¾æ¥">ä½¿ç”¨SSHé“¾æ¥</h4><p>ä¸Šé¢åœ¨Giteeä¸­æ·»åŠ äº†æˆ‘ä»¬æ”¾åœ¨C:\Users\25463\.sshç›®å½•ä¸‹çš„å…¬é’¥ï¼Œæˆ‘ä»¬åœ¨ä»“åº“ä¸­å¤åˆ¶SSHé“¾æ¥git@gitee.com:Chentianao/gitstudy.git</p><p>ä¹‹åæ·»åŠ è¿œç¨‹ä»“åº“</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="keyword">add</span><span class="language-bash"> gitstudy git@gitee.com:Chentianao/gitstudy.git</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè®¾ç½®äº†passphraseï¼Œæ¯æ¬¡pushéƒ½éœ€è¦è¾“å…¥</p><h2 id="Gitåˆ†æ”¯">Gitåˆ†æ”¯</h2><p>å¸¸ç”¨æŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch -r</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch [branch-name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span></span><br><span class="line">git checkout -b [branch]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge [branch]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -d [branch-name]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin --delete [branch-name]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -dr [remote/branch]</span></span><br></pre></td></tr></table></figure><h2 id="git-tag">git tag</h2><p>åœ¨ Git ä¸­ï¼Œæ¯ä¸ªæäº¤éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œå€¼ä½œä¸ºæ ‡è¯†ï¼Œè¿™ä¸ªå“ˆå¸Œå€¼æ˜¯æ ¹æ®æäº¤å†…å®¹å’Œå…ƒæ•°æ®è®¡ç®—å‡ºæ¥çš„ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥æ‰‹åŠ¨æŒ‡å®šã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡æ ‡ç­¾ï¼ˆTagsï¼‰æ¥ä¸ºç‰¹å®šçš„æäº¤æ·»åŠ ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ ‡è¯†ï¼Œç±»ä¼¼äºç‰ˆæœ¬å·ã€‚æ ‡ç­¾å¯ä»¥ç”¨æ¥æ ‡è®°é‡è¦çš„é‡Œç¨‹ç¢‘ã€å‘å¸ƒç‰ˆæœ¬ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨æäº¤æ—¶åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼š</p><ol><li><p><strong>åˆ›å»ºè½»é‡æ ‡ç­¾ï¼ˆLightweight Tagï¼‰ï¼š</strong><br>è½»é‡æ ‡ç­¾åªæ˜¯ä¸€ä¸ªæŒ‡å‘ç‰¹å®šæäº¤çš„å¼•ç”¨ï¼Œå®ƒä¸åŒ…å«é¢å¤–çš„ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;tag_name&gt; &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag v1.0.0 abc123</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>v1.0.0</code> çš„è½»é‡æ ‡ç­¾ï¼ŒæŒ‡å‘å“ˆå¸Œå€¼ä¸º <code>abc123</code> çš„æäº¤ã€‚</p></li><li><p><strong>åˆ›å»ºé™„æ³¨æ ‡ç­¾ï¼ˆAnnotated Tagï¼‰ï¼š</strong><br>é™„æ³¨æ ‡ç­¾æ˜¯ä¸€ä¸ªåŒ…å«é¢å¤–ä¿¡æ¯çš„æ ‡ç­¾ï¼Œæ¯”å¦‚æ ‡ç­¾çš„åˆ›å»ºè€…ã€åˆ›å»ºæ—¶é—´ã€æ ‡ç­¾æ¶ˆæ¯ç­‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;tag_name&gt; -m <span class="string">&quot;&lt;tag_message&gt;&quot;</span> &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0 -m <span class="string">&quot;Release version 1.0.0&quot;</span> abc123</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>v1.0.0</code> çš„é™„æ³¨æ ‡ç­¾ï¼ŒåŒ…å«äº†æ ‡ç­¾æ¶ˆæ¯å’ŒæŒ‡å‘å“ˆå¸Œå€¼ä¸º <code>abc123</code> çš„æäº¤ã€‚</p></li><li><p><strong>æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ï¼š</strong><br>åˆ›å»ºæ ‡ç­¾åï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä»¬åªä¼šå­˜åœ¨äºæœ¬åœ°ä»“åº“ã€‚å¦‚æœæƒ³å°†æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œéœ€è¦ä½¿ç”¨ <code>git push</code> å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;tag_name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin v1.0.0</span><br></pre></td></tr></table></figure><p>è¿™å°†æŠŠåä¸º <code>v1.0.0</code> çš„æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</p></li></ol><p>æ ‡ç­¾å¯ä»¥è®©ä½ æ›´å¥½åœ°æ ‡è¯†å’Œè·Ÿè¸ªç‰¹å®šçš„æäº¤ï¼Œç”¨äºç‰ˆæœ¬å‘å¸ƒæˆ–å…¶ä»–é‡è¦çš„é‡Œç¨‹ç¢‘ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œæ ‡ç­¾æ˜¯æŒ‡å‘ç‰¹å®šæäº¤çš„æŒ‡é’ˆï¼Œå®ƒä»¬å¹¶ä¸ä¼šåƒæäº¤ä¸€æ ·éšç€æ–°çš„æ›´æ”¹è€Œç§»åŠ¨ã€‚</p><h2 id="git-diff">git diff</h2><p><code>git diff</code> æ˜¯ä¸€ä¸ªç”¨äºæ¯”è¾ƒ Git ä»“åº“ä¸­ä¸åŒä»£ç ç‰ˆæœ¬ä¹‹é—´å·®å¼‚çš„å‘½ä»¤ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ æŸ¥çœ‹æ–‡ä»¶ã€æäº¤æˆ–åˆ†æ”¯ä¹‹é—´çš„å˜åŒ–ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£ä»£ç çš„æ¼”å˜å’Œä¿®æ”¹ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³äº <code>git diff</code> å‘½ä»¤çš„è¯¦ç»†è®²è§£ï¼š</p><ol><li><p><strong>æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹é—´çš„å·®å¼‚ï¼š</strong></p><p>å¦‚æœä½ åœ¨å·¥ä½œåŒºå¯¹æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†å°šæœªæ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹é—´çš„å·®å¼‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure><p>è¿™å°†æ˜¾ç¤ºå°šæœªæš‚å­˜çš„æ›´æ”¹ï¼Œè®©ä½ äº†è§£å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹é—´çš„ä¸åŒã€‚</p></li><li><p><strong>æ¯”è¾ƒæš‚å­˜åŒºå’Œæœ€æ–°æäº¤ä¹‹é—´çš„å·®å¼‚ï¼š</strong></p><p>å¦‚æœä½ å·²ç»å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå¹¶æƒ³è¦æŸ¥çœ‹æš‚å­˜åŒºå’Œæœ€æ–°æäº¤ä¹‹é—´çš„å·®å¼‚ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ç®€å†™å½¢å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --staged</span><br></pre></td></tr></table></figure><p>è¿™å°†æ˜¾ç¤ºå·²æš‚å­˜ä½†å°šæœªæäº¤çš„æ›´æ”¹ã€‚</p></li><li><p><strong>æ¯”è¾ƒä¸¤ä¸ªæäº¤ä¹‹é—´çš„å·®å¼‚ï¼š</strong></p><p>å¦‚æœä½ æƒ³è¦æ¯”è¾ƒä¸¤ä¸ªä¸åŒçš„æäº¤ä¹‹é—´çš„å·®å¼‚ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå…¶ä¸­ <code>&lt;commit1&gt;</code> å’Œ <code>&lt;commit2&gt;</code> æ˜¯æäº¤çš„å“ˆå¸Œå€¼æˆ–å¼•ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;commit1&gt; &lt;commit2&gt;</span><br></pre></td></tr></table></figure><p>è¿™å°†æ˜¾ç¤ºä¸¤ä¸ªæäº¤ä¹‹é—´çš„ä»£ç å˜åŒ–ã€‚</p></li><li><p><strong>æ¯”è¾ƒä¸åŒåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ï¼š</strong></p><p>è¦æ¯”è¾ƒä¸¤ä¸ªä¸åŒåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;branch1&gt; &lt;branch2&gt;</span><br></pre></td></tr></table></figure><p>è¿™å°†æ˜¾ç¤ºä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚ï¼ŒåŒ…æ‹¬æ–‡ä»¶çš„å¢åˆ å’Œä¿®æ”¹ã€‚</p></li><li><p><strong>å…¶ä»–é€‰é¡¹ï¼š</strong></p><ul><li><p><code>git diff --stat</code>ï¼šæ˜¾ç¤ºç®€è¦çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¾‹å¦‚å“ªäº›æ–‡ä»¶è¢«ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤äº†ã€‚</p></li><li><p><code>git diff --color-words</code>ï¼šä»¥å•è¯ä¸ºå•ä½æ˜¾ç¤ºå·®å¼‚ï¼Œä½¿ç”¨é¢œè‰²æ ‡è¯†ã€‚</p></li><li><p><code>git diff --name-only</code>ï¼šä»…æ˜¾ç¤ºæœ‰å·®å¼‚çš„æ–‡ä»¶åï¼Œè€Œä¸æ˜¾ç¤ºå…·ä½“çš„å·®å¼‚å†…å®¹ã€‚</p></li><li><p><code>git diff --check</code>ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ç©ºç™½é”™è¯¯ï¼Œä¾‹å¦‚è¡Œå°¾ç©ºæ ¼ç­‰ã€‚</p></li></ul></li></ol><p>æ€»ä¹‹ï¼Œ<code>git diff</code> å‘½ä»¤æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æŸ¥çœ‹ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„ä»£ç å·®å¼‚ã€‚æ ¹æ®éœ€è¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„é€‰é¡¹æ¥æŸ¥çœ‹è¯¦ç»†çš„ä»£ç æ›´æ”¹ã€ç»Ÿè®¡ä¿¡æ¯æˆ–å…¶ä»–ç±»å‹çš„å·®å¼‚ã€‚</p><h2 id="Gitä¸­çš„å›é€€æ“ä½œ">Gitä¸­çš„å›é€€æ“ä½œ</h2><p>è¦å›é€€åˆ°ä¹‹å‰çš„æäº¤ç‰ˆæœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>git reset</code> å‘½ä»¤ã€‚ä¸‹é¢æ˜¯å›é€€çš„æ­¥éª¤ï¼š</p><ol><li><p><strong>æ‰¾åˆ°è¦å›é€€çš„æäº¤çš„å“ˆå¸Œå€¼ï¼š</strong> é¦–å…ˆï¼Œä½¿ç”¨ <code>git log</code> å‘½ä»¤æ‰¾åˆ°ä½ æƒ³è¦å›é€€åˆ°çš„æäº¤çš„å“ˆå¸Œå€¼ã€‚å¤åˆ¶è¯¥å“ˆå¸Œå€¼ï¼Œå®ƒå°†ç”¨äºåç»­çš„æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œå›é€€æ“ä½œï¼š</strong> ä½¿ç”¨ <code>git reset</code> å‘½ä»¤å›é€€åˆ°æŒ‡å®šçš„æäº¤ã€‚æœ‰ä¸åŒçš„é‡ç½®æ¨¡å¼ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§å¸¸ç”¨çš„æ¨¡å¼ï¼š</p><ul><li><p><strong>è½¯é‡ç½® (<code>--soft</code>)ï¼š</strong> è¿™ä¼šå°† HEAD æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šæäº¤ï¼Œä½†ä¿ç•™ä¹‹åçš„æ›´æ”¹åœ¨æš‚å­˜åŒºã€‚è¿™æ ·ï¼Œä½ å¯ä»¥é‡æ–°æäº¤è¿™äº›æ›´æ”¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ··åˆé‡ç½® (<code>--mixed</code>)ï¼š</strong> è¿™æ˜¯é»˜è®¤çš„é‡ç½®æ¨¡å¼ã€‚å®ƒä¼šå°† HEAD æŒ‡é’ˆå’Œæš‚å­˜åŒºéƒ½ç§»åŠ¨åˆ°æŒ‡å®šæäº¤ï¼Œè¿™æ„å‘³ç€æš‚å­˜åŒºä¸­çš„æ›´æ”¹ä¼šè¢«å–æ¶ˆã€‚ä½†ä½ çš„å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ä¸ä¼šå—åˆ°å½±å“ï¼Œä½ å¯ä»¥é€‰æ‹©é‡æ–°æ·»åŠ éœ€è¦çš„æ›´æ”¹å¹¶æäº¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --mixed &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¡¬é‡ç½® (<code>--hard</code>)ï¼š</strong> è¿™æ˜¯æœ€å½»åº•çš„é‡ç½®æ¨¡å¼ã€‚å®ƒä¼šå°† HEAD æŒ‡é’ˆã€æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•éƒ½ç§»åŠ¨åˆ°æŒ‡å®šæäº¤ï¼Œæ‰€æœ‰æœªæäº¤çš„æ›´æ”¹éƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œæ…ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æ³¨æ„å®‰å…¨æ€§ï¼š</strong> è¯·æ³¨æ„ï¼Œé‡ç½®æ“ä½œæ˜¯ä¸å¯é€†çš„ï¼Œä¼šä¸¢å¤±æœªæäº¤çš„æ›´æ”¹ã€‚åœ¨æ‰§è¡Œé‡ç½®ä¹‹å‰ï¼ŒåŠ¡å¿…ç¡®è®¤ä½ äº†è§£æ“ä½œçš„å½±å“ï¼Œæœ€å¥½åœ¨æ“ä½œå‰å¤‡ä»½ä½ çš„é‡è¦æ•°æ®ã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œé€šè¿‡ä½¿ç”¨ <code>git reset</code> å‘½ä»¤ï¼Œä½ å¯ä»¥å›é€€åˆ°ä¹‹å‰çš„æäº¤ç‰ˆæœ¬ã€‚é€‰æ‹©é€‚å½“çš„é‡ç½®æ¨¡å¼å–å†³äºä½ å¸Œæœ›å¦‚ä½•å¤„ç†æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•ä¸­çš„æ›´æ”¹ã€‚</p><h3 id="ä¸‰ç§é‡ç½®çš„åŒºåˆ«">ä¸‰ç§é‡ç½®çš„åŒºåˆ«</h3><p>è½¯é‡ç½®ã€æ··åˆé‡ç½®å’Œç¡¬é‡ç½®æ˜¯ Git ä¸­ç”¨äºç§»åŠ¨ HEAD æŒ‡é’ˆä»¥åŠè°ƒæ•´æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•çŠ¶æ€çš„é‡ç½®æ“ä½œã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬å¦‚ä½•å¤„ç†æäº¤å’Œæ›´æ”¹ã€‚ä¸‹é¢æˆ‘ä¼šè¯¦ç»†è§£é‡Šæ¯ç§é‡ç½®çš„åŒºåˆ«ï¼š</p><ol><li><p><strong>è½¯é‡ç½® (<code>--soft</code>)ï¼š</strong></p><p>åœ¨è½¯é‡ç½®ä¸­ï¼ŒHEAD æŒ‡é’ˆä¼šè¢«ç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼Œä½†æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•ä¸ä¼šå—åˆ°å½±å“ã€‚è¿™æ„å‘³ç€ä¹‹åä½ å¯ä»¥é‡æ–°æäº¤ä¹‹å‰æäº¤çš„æ›´æ”¹ï¼Œæˆ–è€…åœ¨åŸæ¥çš„åŸºç¡€ä¸Šç»§ç»­å·¥ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure><ul><li>æš‚å­˜åŒºï¼šä¸å—å½±å“ï¼Œä¿ç•™åŸæ¥çš„æš‚å­˜å†…å®¹ã€‚</li><li>å·¥ä½œç›®å½•ï¼šä¸å—å½±å“ï¼Œä¿ç•™åŸæ¥çš„æ›´æ”¹ã€‚</li><li>HEAD æŒ‡é’ˆï¼šç§»åŠ¨åˆ°æŒ‡å®šæäº¤ã€‚</li></ul></li><li><p><strong>æ··åˆé‡ç½® (<code>--mixed</code>ï¼Œé»˜è®¤æ¨¡å¼)ï¼š</strong></p><p>åœ¨æ··åˆé‡ç½®ä¸­ï¼ŒHEAD æŒ‡é’ˆä¼šè¢«ç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼ŒåŒæ—¶æš‚å­˜åŒºä¼šè¢«é‡ç½®ä¸ºæŒ‡å®šæäº¤çš„å†…å®¹ï¼Œä½†å·¥ä½œç›®å½•ä¸ä¼šå—å½±å“ã€‚è¿™æ„å‘³ç€ä¹‹å‰çš„æ›´æ”¹å°†è¢«å–æ¶ˆï¼Œä½†å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ä»ç„¶ä¿ç•™ï¼Œä½ å¯ä»¥é‡æ–°å°†éœ€è¦çš„æ›´æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºå¹¶æäº¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --mixed &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure><ul><li>æš‚å­˜åŒºï¼šé‡ç½®ä¸ºæŒ‡å®šæäº¤çš„å†…å®¹ã€‚</li><li>å·¥ä½œç›®å½•ï¼šä¸å—å½±å“ï¼Œä¿ç•™åŸæ¥çš„æ›´æ”¹ã€‚</li><li>HEAD æŒ‡é’ˆï¼šç§»åŠ¨åˆ°æŒ‡å®šæäº¤ã€‚</li></ul></li><li><p><strong>ç¡¬é‡ç½® (<code>--hard</code>)ï¼š</strong></p><p>åœ¨ç¡¬é‡ç½®ä¸­ï¼ŒHEAD æŒ‡é’ˆã€æš‚å­˜åŒºå’Œå·¥ä½œç›®å½•éƒ½ä¼šè¢«ç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ï¼Œæ‰€æœ‰æœªæäº¤çš„æ›´æ”¹éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚è¿™æ˜¯ä¸€ç§éå¸¸å½»åº•çš„æ“ä½œï¼Œä¼šå°†ä½ çš„ä»“åº“çŠ¶æ€æ¢å¤åˆ°æŒ‡å®šæäº¤çš„çŠ¶æ€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure><ul><li>æš‚å­˜åŒºï¼šé‡ç½®ä¸ºæŒ‡å®šæäº¤çš„å†…å®¹ã€‚</li><li>å·¥ä½œç›®å½•ï¼šé‡ç½®ä¸ºæŒ‡å®šæäº¤çš„å†…å®¹ã€‚</li><li>HEAD æŒ‡é’ˆï¼šç§»åŠ¨åˆ°æŒ‡å®šæäº¤ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œä¸åŒçš„é‡ç½®æ¨¡å¼é€‚ç”¨äºä¸åŒçš„æƒ…å†µã€‚è½¯é‡ç½®é€‚ç”¨äºä½ æƒ³è¦ä¿ç•™æ›´æ”¹å¹¶åœ¨ä¹‹å‰çš„æäº¤åŸºç¡€ä¸Šç»§ç»­å·¥ä½œçš„æƒ…å†µã€‚æ··åˆé‡ç½®é€‚ç”¨äºä½ æƒ³è¦å–æ¶ˆæš‚å­˜çš„æ›´æ”¹ï¼Œä½†ä»ç„¶ä¿ç•™åœ¨å·¥ä½œç›®å½•ä¸­çš„æƒ…å†µã€‚ç¡¬é‡ç½®ç”¨äºå®Œå…¨å–æ¶ˆæäº¤å’Œæ›´æ”¹ï¼Œè¿”å›åˆ°æŒ‡å®šæäº¤çš„çŠ¶æ€ã€‚åœ¨ä½¿ç”¨ä»»ä½•é‡ç½®æ¨¡å¼ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ äº†è§£å…¶å½±å“ï¼Œå¹¶åœ¨å¿…è¦æ—¶å¤‡ä»½é‡è¦çš„æ•°æ®ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Gitçš„ä½¿ç”¨æ–¹æ³•</summary>
    
    
    
    <category term="å·¥å…·" scheme="https://momoao.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Git" scheme="https://momoao.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Hexo</title>
    <link href="https://momoao.github.io/posts/202308241940.html"/>
    <id>https://momoao.github.io/posts/202308241940.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:42:54.738Z</updated>
    
    <content type="html"><![CDATA[<h1>Hexo</h1><p>å®‰è£…node.js</p><p>ä¹‹åå†å‘½ä»¤è¡Œå®‰è£…cnpm</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --<span class="keyword">register</span>=https:<span class="comment">//register.npm.taobao.org</span></span><br></pre></td></tr></table></figure><p>æ£€æµ‹ç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br><span class="line"><span class="keyword">node</span> <span class="title">-v</span></span><br><span class="line">cnpm -v</span><br></pre></td></tr></table></figure><p>å®‰è£…hexo</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure><p>æ£€æµ‹hexoå®‰è£…æƒ…å†µ</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo -v</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåšå®¢æ–‡ä»¶å¤¹</p><p>åœ¨æ–‡ä»¶å¤¹ä¸­åˆå§‹åŒ–hexo</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">init</span></span><br></pre></td></tr></table></figure><p>æœ¬åœ°å¯åŠ¨</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure><p>æƒ³è¦è¿æ¥è¿œç¨‹ä»“åº“ï¼Œé…ç½®_config.yml</p><p>åœ¨æ–‡ä»¶æœ€åæ·»åŠ </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  repo: https:<span class="regexp">//gi</span>thub.com<span class="regexp">/MoMoAo/</span>MoMoAo.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„ä»“åº“åœ°å€å¿…é¡»æ˜¯&quot;<a href="http://xn--eqr924avxo.github.io">ç”¨æˆ·å.github.io</a>&quot;</p><p>åˆ›å»ºæ–°çš„åšå®¢,æŒ‡å®šåšå®¢çš„ä¸»é¢˜</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="built_in">n</span> <span class="string">&quot;æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢&quot;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œåä¼šåœ¨source/_posts/ä¸‹ç”Ÿæˆå¯¹åº”çš„.mdæ–‡ä»¶</p><p>æ¸…ç†ç¼“å­˜</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®mdæ–‡ä»¶ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br></pre></td></tr></table></figure><p>åœ¨æœ¬ç›®å½•è£…ä¸€ä¸ªç”¨äºéƒ¨ç½²åˆ°gitçš„æ’ä»¶</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install <span class="comment">--save hexo-deployer-git</span></span><br></pre></td></tr></table></figure><p>æ¨é€åˆ°è¿œç¨‹åº“</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo d</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Hexoåšå®¢æ¡†æ¶çš„å®‰è£…å’Œä½¿ç”¨æ–¹æ³•</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Hexo" scheme="https://momoao.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>JavaåŸºç¡€</title>
    <link href="https://momoao.github.io/posts/202308310902.html"/>
    <id>https://momoao.github.io/posts/202308310902.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-31T01:05:06.940Z</updated>
    
    <content type="html"><![CDATA[<h1>JavaåŸºç¡€</h1><h1>AIæ•´ç†</h1><h2 id="Java8åŠä¹‹åç‰ˆæœ¬çš„æ›´æ–°å†…å®¹">Java8åŠä¹‹åç‰ˆæœ¬çš„æ›´æ–°å†…å®¹</h2><p>Java 8 ï¼š</p><p>Java 8äº2014å¹´å‘å¸ƒ,åŒ…å«äº†å¾ˆå¤šé‡è¦çš„æ–°ç‰¹æ€§:</p><ul><li><p>Lambdaè¡¨è¾¾å¼ - å…è®¸å°†å‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°(å‡½æ•°ä½œä¸ºç¬¬ä¸€ç±»å¯¹è±¡)ã€‚è®©ä»£ç æ›´åŠ ç®€æ´ã€‚</p></li><li><p>Stream API - æ–°æ·»åŠ çš„æµæ“ä½œ,å¯ä»¥å¯¹æ•°æ®è¿›è¡Œç®¡é“æ“ä½œã€‚</p></li><li><p>æ–¹æ³•å¼•ç”¨ - ç›´æ¥å¼•ç”¨å·²æœ‰Javaæ–¹æ³•æˆ–æ„é€ å™¨,æ¯”Lambdaè¡¨è¾¾å¼æ›´ç®€æ´ã€‚</p></li><li><p>Optionalç±» - ç”¨äºé¿å…NullPointerExceptionã€‚</p></li><li><p>Nashornå¼•æ“ - å…è®¸åœ¨JVMä¸Šè¿è¡ŒJSåº”ç”¨ã€‚</p></li><li><p>æ–°æ—¶é—´å’Œæ—¥æœŸAPI - åŠ å¼ºå¯¹æ—¶é—´ã€æ—¥æœŸã€æ—¶åŒºçš„å¤„ç†ã€‚</p></li><li><p>é»˜è®¤æ¥å£æ–¹æ³• - æ¥å£å¯ä»¥æœ‰é»˜è®¤å®ç°æ–¹æ³•ã€‚</p></li><li><p>é‡å¤æ³¨è§£ - æ”¯æŒåœ¨åŒä¸€ä¸ªåœ°æ–¹å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£ã€‚</p></li><li><p>Type Annotations - æ”¯æŒç¼–è¯‘æ—¶æ³¨è§£ã€‚</p></li><li><p>Nashornå¼•æ“ - JSè¿è¡Œç¯å¢ƒã€‚</p></li><li><p>æ–°çš„JVMæ‰§è¡Œå‚æ•° - PermGenç©ºé—´è¢«ç§»é™¤,æ–°çš„å…ƒç©ºé—´ã€‚</p></li><li><p>ParallelArraySort - å¤šæ ¸å¹¶è¡Œæ•°ç»„æ’åºã€‚</p></li><li><p>æ‰¹é‡æ•°æ®æ“ä½œ - æ¥å£å¦‚Collectionæ‰¹é‡æ“ä½œã€‚</p></li><li><p>Base64ç¼–ç  - java.util.Base64æ–°æ”¯æŒã€‚</p></li><li><p>å¹¶å‘æ€§èƒ½æ”¹è¿› - å¦‚ç›´åˆ°é•¿æ—¶é—´è®¡ç®—å®Œæˆæ‰å”¤é†’çº¿ç¨‹ã€‚</p></li></ul><p>Java 8è®©Javaè¯­è¨€è¡¨è¾¾èƒ½åŠ›å¤§å¤§å¢å¼º,ç¼–ç¨‹ä½“éªŒæ›´å¥½,å¯¹ç°ä»£å¤šæ ¸CPUæ¶æ„è¿›è¡Œäº†ä¼˜åŒ–,ä¹Ÿæ”¹è¿›äº†åœ¨Lambdaæ–¹é¢çš„ç¼ºé™·ã€‚</p><p>Java 9:</p><ul><li>å¼•å…¥æ¨¡å—ç³»ç»Ÿ(Jigsawé¡¹ç›®),Javaå¹³å°å†…éƒ¨å®ç°äº†æ¨¡å—åŒ–</li><li>JShell:äº¤äº’å¼Java shell</li><li>å¤šç‰ˆæœ¬å…¼å®¹JaråŒ…</li><li>Try-With-Resourceså¢å¼º</li><li>æ–°HTTP Client API</li></ul><p>Java 10:</p><ul><li>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­(varå…³é”®å­—)</li><li>G1æˆä¸ºé»˜è®¤åƒåœ¾æ”¶é›†å™¨</li><li>çº¿ç¨‹æœ¬åœ°æ¡æ‰‹API</li><li>Unmodifiableé›†åˆå¢åŠ å¤åˆ¶æ”¯æŒ</li></ul><p>Java 11:</p><ul><li>å¢å¼ºvarçš„ä½¿ç”¨èŒƒå›´</li><li>æ ‡å‡†HTTP Client API</li><li>æœ¬åœ°å˜é‡è¯­æ³•æ”¹è¿›</li><li>ZGCå®éªŒæ€§åƒåœ¾æ”¶é›†å™¨åŠ å…¥</li></ul><p>Java 12:</p><ul><li>Switchè¡¨è¾¾å¼</li><li>æ–‡æœ¬å— literals</li><li>å¢å¼ºåƒåœ¾æ”¶é›†å™¨G1</li><li>JVMå¸¸é‡API</li></ul><p>Java 13:</p><ul><li>Text Blocksç¬¬äºŒé¢„è§ˆ</li><li>Switchè¡¨è¾¾å¼å¢å¼º</li><li>Socket APIå¢å¼º</li></ul><p>Java 14:</p><ul><li>Switchè¡¨è¾¾å¼æ ‡å‡†åŒ–</li><li>æŸ¥çœ‹éšè—ç±»</li><li>records é¢„è§ˆ</li><li>NullPointerExceptionä¿¡æ¯å¢å¼º</li></ul><p>Java 15:</p><ul><li>Text Blocksæ­£å¼å‘å¸ƒ</li><li>Sealed Classeså¯†å°ç±»é¢„è§ˆ</li><li>Hidden Classesæ­£å¼å‘å¸ƒ</li><li>Removal of Nashorn JavaScript Engine</li></ul><p>Java 16:</p><ul><li>Recordsæ­£å¼å‘å¸ƒ</li><li>Pattern Matchingé¢„è§ˆ</li><li>Packaging Tool (jpackage)æ­£å¼å‘å¸ƒ</li></ul><p>Java 17:</p><ul><li>Pattern Matchingç¬¬äºŒé¢„è§ˆ</li><li>Foreign Memory Access API<br>-ç§»é™¤åƒåœ¾æ”¶é›†å™¨ZGCå’ŒShenandoah</li></ul><p>Java 18:</p><ul><li>Pattern Matching for switchæ­£å¼å‘å¸ƒ</li><li>Vector API (ç¬¬äºŒå­£åº¦)</li><li>æ•°æ®ç±»æ­£å¼å‘å¸ƒ</li></ul><p>Java 19:</p><ul><li>Vector API æ­£å¼å‘å¸ƒ</li><li>æ–‡æœ¬å—3.0</li><li>ç”±valå…³é”®å­—å¼•å…¥çš„æ›´è½»é‡çº§è®°å½•</li><li>å¢å¼ºå¼çš„pattern matching</li></ul><p>æ€»ä½“æ¥çœ‹,æ–°ç‰ˆæœ¬å¢åŠ äº†å¾ˆå¤šå¯¹ç¨‹åºå‘˜å‹å¥½çš„è¯­è¨€ç‰¹æ€§,ä»¥åŠæ¨¡å—åŒ–ã€å†…å­˜è®¿é—®ã€åƒåœ¾æ”¶é›†å™¨ã€æ–‡æœ¬å¤„ç†ç­‰æ–¹é¢çš„æ”¹è¿›ã€‚ä½¿Javaçš„ç¼–ç¨‹ä½“éªŒæ›´åŠ é«˜æ•ˆå’Œä¾¿æ·ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Javaçš„åŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>C++æ ¸å¿ƒç¼–ç¨‹</title>
    <link href="https://momoao.github.io/posts/202308241921.html"/>
    <id>https://momoao.github.io/posts/202308241921.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:42:27.557Z</updated>
    
    <content type="html"><![CDATA[<h1>C++æ ¸å¿ƒç¼–ç¨‹</h1><p>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++==é¢å‘å¯¹è±¡==ç¼–ç¨‹æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚</p><h2 id="1-å†…å­˜åˆ†åŒºæ¨¡å‹">1 å†…å­˜åˆ†åŒºæ¨¡å‹</h2><p>C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º<strong>4ä¸ªåŒºåŸŸ</strong></p><ul><li>ä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„</li><li>å…¨å±€åŒºï¼šå­˜æ”¾<strong>å…¨å±€å˜é‡</strong>å’Œ<strong>é™æ€å˜é‡</strong>ä»¥åŠ<strong>å¸¸é‡</strong>ï¼ˆå­—ç¬¦ä¸²å¸¸é‡ã€constä¿®é¥°çš„å¸¸é‡(constä¿®é¥°çš„å…¨å±€å¸¸é‡åœ¨å…¨å±€åŒºï¼Œä¿®é¥°çš„å±€éƒ¨å¸¸é‡ä¸åœ¨å…¨å±€åŒº)ï¼‰</li><li>æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</li><li>å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</li></ul><p><strong>å†…å­˜å››åŒºæ„ä¹‰ï¼š</strong></p><p>ä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹</p><h3 id="1-1-ç¨‹åºè¿è¡Œå‰">1.1 ç¨‹åºè¿è¡Œå‰</h3><p>â€‹åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº†exeå¯æ‰§è¡Œç¨‹åºï¼Œ<strong>æœªæ‰§è¡Œè¯¥ç¨‹åºå‰</strong>åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ</p><p>â€‹<strong>ä»£ç åŒºï¼š</strong></p><p>â€‹å­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤</p><p>â€‹ä»£ç åŒºæ˜¯<strong>å…±äº«</strong>çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯</p><p>â€‹ä»£ç åŒºæ˜¯<strong>åªè¯»</strong>çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤</p><p>â€‹<strong>å…¨å±€åŒºï¼š</strong></p><p>â€‹å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤.</p><p>â€‹å…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, <strong>å­—ç¬¦ä¸²å¸¸é‡</strong>å’Œ<strong>å…¶ä»–å¸¸é‡</strong>ä¹Ÿå­˜æ”¾åœ¨æ­¤.</p><p>â€‹==è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾==.</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="type">int</span> g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å¸¸é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€å˜é‡</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world1&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_b = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><p><img src="assets/1545017602518.png" alt="1545017602518"></p><p>æ€»ç»“ï¼š</p><ul><li>C++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº</li><li>ä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯»</li><li>å…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡</li><li>å¸¸é‡åŒºä¸­å­˜æ”¾ constä¿®é¥°çš„å…¨å±€å¸¸é‡  å’Œ å­—ç¬¦ä¸²å¸¸é‡</li></ul><h3 id="1-2-ç¨‹åºè¿è¡Œå">1.2 ç¨‹åºè¿è¡Œå</h3><p>â€‹<strong>æ ˆåŒºï¼š</strong></p><p>â€‹ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</p><p>â€‹æ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> * <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">return</span> &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<strong>å †åŒºï¼š</strong></p><p>â€‹ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</p><p>â€‹åœ¨C++ä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>å †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾</p><p>å †åŒºæ•°æ®åˆ©ç”¨newå…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜</p><h3 id="1-3-newæ“ä½œç¬¦">1.3 newæ“ä½œç¬¦</h3><p>â€‹C++ä¸­åˆ©ç”¨==new==æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ®</p><p>â€‹å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ ==delete==</p><p>â€‹è¯­æ³•ï¼š<code> new æ•°æ®ç±»å‹</code></p><p>â€‹åˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ</p><p><strong>ç¤ºä¾‹1ï¼š åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ®</span></span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; *p &lt;&lt; endl; //æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2ï¼šå¼€è¾Ÿæ•°ç»„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å †åŒºå¼€è¾Ÿæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">arr[i] = i + <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾æ•°ç»„ delete ååŠ  []</span></span><br><span class="line"><span class="keyword">delete</span>[] arr;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-å¼•ç”¨">2 å¼•ç”¨</h2><h3 id="2-1-å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨">2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨</h3><p>**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å</p><p><strong>è¯­æ³•ï¼š</strong> <code>æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;b = a;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">b = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å¼•ç”¨æ³¨æ„äº‹é¡¹">2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹</h3><ul><li>å¼•ç”¨å¿…é¡»åˆå§‹åŒ–</li><li>å¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜å¼•ç”¨</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//int &amp;c; //é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> &amp;c = a; <span class="comment">//ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹</span></span><br><span class="line">c = b; <span class="comment">//è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-å¼•ç”¨åšå‡½æ•°å‚æ•°">2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°</h3><p>**ä½œç”¨ï¼š**å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚</p><p>**ä¼˜ç‚¹ï¼š**å¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. å€¼ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap02</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = *a;</span><br><span class="line">*a = *b;</span><br><span class="line">*b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. å¼•ç”¨ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap03</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap01</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap02</span>(&amp;a, &amp;b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap03</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å•</p></blockquote><h3 id="2-4-å¼•ç”¨åšå‡½æ•°è¿”å›å€¼">2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼</h3><p>ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„</p><p>æ³¨æ„ï¼š<strong>ä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</strong></p><p>ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›é™æ€å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref = <span class="built_in">test01</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref2 = <span class="built_in">test02</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>() = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p><h3 id="2-5-å¼•ç”¨çš„æœ¬è´¨">2.5 å¼•ç”¨çš„æœ¬è´¨</h3><p>æœ¬è´¨ï¼š<strong>å¼•ç”¨çš„æœ¬è´¨åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡.</strong></p><p>è®²è§£ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref = &amp;a;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>&amp; ref)</span></span>&#123;</span><br><span class="line">ref = <span class="number">100</span>; <span class="comment">// refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref = 100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è‡ªåŠ¨è½¬æ¢ä¸º int* const ref = &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹</span></span><br><span class="line"><span class="type">int</span>&amp; ref = a; </span><br><span class="line">ref = <span class="number">20</span>; <span class="comment">//å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref = 20;</span></span><br><span class="line">    </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref:&quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">func</span>(a);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†</p><h3 id="2-6-å¸¸é‡å¼•ç”¨">2.6 å¸¸é‡å¼•ç”¨</h3><p>**ä½œç”¨ï¼š**å¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ</p><p>åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ ==constä¿®é¥°å½¢å‚==ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; v)</span> </span>&#123;</span><br><span class="line"><span class="comment">//v += 10;</span></span><br><span class="line">cout &lt;&lt; v &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int&amp; ref = 10;  å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯</span></span><br><span class="line"><span class="comment">//åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp = 10; const int&amp; ref = temp;</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; ref = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ref = 100;  //åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡</span></span><br><span class="line">cout &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">showValue</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å‡½æ•°æé«˜">3 å‡½æ•°æé«˜</h2><h3 id="3-1-å‡½æ•°é»˜è®¤å‚æ•°">3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><p>åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚</p><p>è¯­æ³•ï¼š<code> è¿”å›å€¼ç±»å‹  å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>, <span class="type">int</span> c = <span class="number">10</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">//2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a = <span class="number">10</span>, <span class="type">int</span> b = <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">20</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-å‡½æ•°å ä½å‚æ•°">3.2 å‡½æ•°å ä½å‚æ•°</h3><p>C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½®</p><p><strong>è¯­æ³•ï¼š</strong> <code>è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125;</code></p><p>åœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>)</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is func&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">10</span>); <span class="comment">//å ä½å‚æ•°å¿…é¡»å¡«è¡¥</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å‡½æ•°é‡è½½">3.3 å‡½æ•°é‡è½½</h3><h4 id="3-3-1-å‡½æ•°é‡è½½æ¦‚è¿°">3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°</h4><p>**ä½œç”¨ï¼š**å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><p><strong>å‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š</strong></p><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°<strong>ç±»å‹ä¸åŒ</strong>  æˆ–è€… <strong>ä¸ªæ•°ä¸åŒ</strong> æˆ–è€… <strong>é¡ºåºä¸åŒ</strong></li></ul><p><strong>æ³¨æ„:</strong>  å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a ,<span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a ,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶</span></span><br><span class="line"><span class="comment">//int func(double a, int b)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>();</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span> , <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹">3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><ul><li>å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="comment">//1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (const int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a, int b = 10) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">func</span>(a); <span class="comment">//è°ƒç”¨æ— const</span></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);<span class="comment">//è°ƒç”¨æœ‰const</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//func2(10); //ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å…</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ç±»å’Œå¯¹è±¡"><strong>4</strong> ç±»å’Œå¯¹è±¡</h2><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š==å°è£…ã€ç»§æ‰¿ã€å¤šæ€==</p><p>C++è®¤ä¸º==ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡==ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>â€‹äººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦</p><p>â€‹è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦</p><p>â€‹å…·æœ‰ç›¸åŒæ€§è´¨çš„==å¯¹è±¡==ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º==ç±»==ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±»</p><h3 id="4-1-å°è£…">4.1 å°è£…</h3><h4 id="4-1-1-å°è£…çš„æ„ä¹‰">4.1.1  å°è£…çš„æ„ä¹‰</h4><p>å°è£…æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</p><p>å°è£…çš„æ„ä¹‰ï¼š</p><ul><li>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</li><li>å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶</li></ul><p><strong>å°è£…æ„ä¹‰ä¸€ï¼š</strong></p><p>â€‹åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©</p><p><strong>è¯­æ³•ï¼š</strong> <code>class ç±»å&#123;   è®¿é—®æƒé™ï¼š å±æ€§  / è¡Œä¸º  &#125;;</code></p><p>**ç¤ºä¾‹1ï¼š**è®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ†å‘¨ç‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å°è£…çš„æ„ä¹‰</span></span><br><span class="line"><span class="comment">//å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="comment">//classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»å</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:  <span class="comment">//è®¿é—®æƒé™  å…¬å…±çš„æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å±æ€§</span></span><br><span class="line"><span class="type">int</span> m_r;<span class="comment">//åŠå¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡Œä¸º</span></span><br><span class="line"><span class="comment">//è·å–åˆ°åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">calculateZC</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//2 * pi  * r</span></span><br><span class="line"><span class="comment">//è·å–åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="keyword">return</span>  <span class="number">2</span> * PI * m_r;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ†</span></span><br><span class="line">Circle c1;</span><br><span class="line">c1.m_r = <span class="number">10</span>; <span class="comment">//ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2 * pi * 10 = = 62.8</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot;</span> &lt;&lt; c1.<span class="built_in">calculateZC</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**ç¤ºä¾‹2ï¼š**è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å·</p><p><strong>ç¤ºä¾‹2ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setID</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">m_id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name:&quot;</span> &lt;&lt; m_name &lt;&lt; <span class="string">&quot; ID:&quot;</span> &lt;&lt; m_id &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_name;</span><br><span class="line"><span class="type">int</span> m_id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Student stu;</span><br><span class="line">stu.<span class="built_in">setName</span>(<span class="string">&quot;å¾·ç›è¥¿äºš&quot;</span>);</span><br><span class="line">stu.<span class="built_in">setID</span>(<span class="number">250</span>);</span><br><span class="line">stu.<span class="built_in">showStudent</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å°è£…æ„ä¹‰äºŒï¼š</strong></p><p>ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶</p><p>è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š</p><ol><li>public        å…¬å…±æƒé™</li><li>protected ä¿æŠ¤æƒé™</li><li>private      ç§æœ‰æƒé™</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‰ç§æƒé™</span></span><br><span class="line"><span class="comment">//å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å§“å  å…¬å…±æƒé™</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦  ä¿æŠ¤æƒé™</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string m_Car;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Password;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_Name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">m_Car = <span class="string">&quot;æ‹–æ‹‰æœº&quot;</span>;</span><br><span class="line">m_Password = <span class="number">123456</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">p.m_Name = <span class="string">&quot;æå››&quot;</span>;</span><br><span class="line"><span class="comment">//p.m_Car = &quot;å¥”é©°&quot;;  //ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"><span class="comment">//p.m_Password = 123; //ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-2-structå’ŒclassåŒºåˆ«">4.1.2 structå’ŒclassåŒºåˆ«</h4><p>åœ¨C++ä¸­ structå’Œclasså”¯ä¸€çš„<strong>åŒºåˆ«</strong>å°±åœ¨äº <strong>é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ</strong></p><p>åŒºåˆ«ï¼š</p><ul><li>struct é»˜è®¤æƒé™ä¸ºå…¬å…±</li><li>class   é»˜è®¤æƒé™ä¸ºç§æœ‰</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span>  m_A; <span class="comment">//é»˜è®¤æ˜¯ç§æœ‰æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">C2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m_A;  <span class="comment">//é»˜è®¤æ˜¯å…¬å…±æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">C1 c1;</span><br><span class="line">c1.m_A = <span class="number">10</span>; <span class="comment">//é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰</span></span><br><span class="line"></span><br><span class="line">C2 c2;</span><br><span class="line">c2.m_A = <span class="number">10</span>; <span class="comment">//æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-3-æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰">4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</h4><p>**ä¼˜ç‚¹1ï¼š**å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p>**ä¼˜ç‚¹2ï¼š**å¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//å§“åè®¾ç½®å¯è¯»å¯å†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¹´é¾„ </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt; <span class="number">150</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä½ ä¸ªè€å¦–ç²¾!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®ä¸ºåªå†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setLover</span><span class="params">(string lover)</span> </span>&#123;</span><br><span class="line">m_Lover = lover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_Name; <span class="comment">//å¯è¯»å¯å†™  å§“å</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Age; <span class="comment">//åªè¯»  å¹´é¾„</span></span><br><span class="line"></span><br><span class="line">string m_Lover; <span class="comment">//åªå†™  æƒ…äºº</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line"><span class="comment">//å§“åè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setName</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getName</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„è®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setAge</span>(<span class="number">50</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getAge</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setLover</span>(<span class="string">&quot;è‹äº•&quot;</span>);</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹1ï¼šè®¾è®¡ç«‹æ–¹ä½“ç±»</strong></p><p>è®¾è®¡ç«‹æ–¹ä½“ç±»(Cube)</p><p>æ±‚å‡ºç«‹æ–¹ä½“çš„é¢ç§¯å’Œä½“ç§¯</p><p>åˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰ã€‚</p><p><img src="assets/1545533548532.png" alt="1545533548532"></p><p><strong>ç»ƒä¹ æ¡ˆä¾‹2ï¼šç‚¹å’Œåœ†çš„å…³ç³»</strong></p><p>è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»ï¼ˆCircleï¼‰ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆPointï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚</p><p><img src="assets/1545533829184.png" alt="1545533829184"></p><h3 id="4-2-å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†">4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h3><ul><li>ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨</li><li>C++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚</li></ul><h4 id="4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°">4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>å¯¹è±¡çš„<strong>åˆå§‹åŒ–å’Œæ¸…ç†</strong>ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜</p><p>â€‹ä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥</p><p>â€‹åŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜</p><p>c++åˆ©ç”¨äº†<strong>æ„é€ å‡½æ•°</strong>å’Œ<strong>ææ„å‡½æ•°</strong>è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚</p><p>å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœ<strong>æˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</strong></p><p><strong>ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚</strong></p><ul><li>æ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚</li><li>ææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡<strong>é”€æ¯å‰</strong>ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚</li></ul><p><strong>æ„é€ å‡½æ•°è¯­æ³•ï¼š</strong><code>ç±»å()&#123;&#125;</code></p><ol><li>æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ</li><li>æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><p><strong>ææ„å‡½æ•°è¯­æ³•ï¼š</strong> <code>~ç±»å()&#123;&#125;</code></p><ol><li>ææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å·  ~</li><li>ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨">4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</h4><p>ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š</p><p>â€‹æŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </p><p>â€‹æŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </p><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p><p>â€‹æ‹¬å·æ³•</p><p>â€‹æ˜¾ç¤ºæ³•</p><p>â€‹éšå¼è½¬æ¢æ³•</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€æ„é€ å‡½æ•°åˆ†ç±»</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€    æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨</span></span><br><span class="line"><span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.1  æ‹¬å·æ³•ï¼Œå¸¸ç”¨</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p2();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.2 æ˜¾å¼æ³•</span></span><br><span class="line">Person p2 = <span class="built_in">Person</span>(<span class="number">10</span>); </span><br><span class="line">Person p3 = <span class="built_in">Person</span>(p2);</span><br><span class="line"><span class="comment">//Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡  å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.3 éšå¼è½¬æ¢æ³•</span></span><br><span class="line">Person p4 = <span class="number">10</span>; <span class="comment">// Person p4 = Person(10); </span></span><br><span class="line">Person p5 = p4; <span class="comment">// Person p5 = Person(p4); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p5(p4);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº">4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><p>C++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = p.mAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">man</span><span class="params">(<span class="number">100</span>)</span></span>; <span class="comment">//på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯•</span></span><br><span class="line"><span class="function">Person <span class="title">newman</span><span class="params">(man)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">Person newman2 = man; <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person newman3;</span></span><br><span class="line"><span class="comment">//newman3 = man; //ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</span></span><br><span class="line"><span class="comment">//ç›¸å½“äºPerson p1 = p;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doWork</span><span class="params">(Person p1)</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">doWork</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span></span><br><span class="line"><span class="function">Person <span class="title">doWork2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p1;</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p1 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p = <span class="built_in">doWork2</span>();</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™">4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°</p><p>1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ </p></li><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="comment">//å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š &quot;</span> &lt;&lt; p2.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€ </span></span><br><span class="line">Person p1; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//ç”¨æˆ·æä¾›çš„æœ‰å‚</span></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(p2)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•°</span></span><br><span class="line">Person p4; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(p5)</span></span>; <span class="comment">//ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-5-æ·±æ‹·è´ä¸æµ…æ‹·è´">4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´</h4><p>æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘</p><p>æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ</p><p>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age ,<span class="type">int</span> height) &#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">m_age = age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°  </span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜</span></span><br><span class="line">m_age = p.m_age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (m_height != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_height;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_age;</span><br><span class="line"><span class="type">int</span>* m_height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>, <span class="number">180</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p1.m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p1.m_height &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p2.m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p2.m_height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜</p></blockquote><h4 id="4-2-6-åˆå§‹åŒ–åˆ—è¡¨">4.2.6 åˆå§‹åŒ–åˆ—è¡¨</h4><p><strong>ä½œç”¨ï¼š</strong></p><p>C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§</p><p><strong>è¯­æ³•ï¼š</strong><code>æ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">////ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//Person(int a, int b, int c) &#123;</span></span><br><span class="line"><span class="comment">//m_A = a;</span></span><br><span class="line"><span class="comment">//m_B = b;</span></span><br><span class="line"><span class="comment">//m_C = c;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c) :<span class="built_in">m_A</span>(a), <span class="built_in">m_B</span>(b), <span class="built_in">m_C</span>(c) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mB:&quot;</span> &lt;&lt; m_B &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mC:&quot;</span> &lt;&lt; m_C &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">PrintPerson</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-7-ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜">4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h4><p>C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    A aï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Bç±»ä¸­æœ‰å¯¹è±¡Aä½œä¸ºæˆå‘˜ï¼ŒAä¸ºå¯¹è±¡æˆå‘˜</p><p>é‚£ä¹ˆå½“åˆ›å»ºBå¯¹è±¡æ—¶ï¼ŒAä¸Bçš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Phone</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">m_PhoneName = name;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Phone</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_PhoneName;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(string name, string pName) :<span class="built_in">m_Name</span>(name), <span class="built_in">m_Phone</span>(pName)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; m_Name &lt;&lt; <span class="string">&quot; ä½¿ç”¨&quot;</span> &lt;&lt; m_Phone.m_PhoneName &lt;&lt; <span class="string">&quot; ç‰Œæ‰‹æœº! &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line">Phone m_Phone;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</span></span><br><span class="line"><span class="comment">//æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€ </span></span><br><span class="line"><span class="comment">//ææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;å¼ ä¸‰&quot;</span> , <span class="string">&quot;è‹¹æœX&quot;</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-8-é™æ€æˆå‘˜">4.2.8 é™æ€æˆå‘˜</h4><p>é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—staticï¼Œç§°ä¸ºé™æ€æˆå‘˜</p><p>é™æ€æˆå‘˜åˆ†ä¸ºï¼š</p><ul><li>é™æ€æˆå‘˜å˜é‡<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</li><li>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</li></ul></li><li>é™æ€æˆå‘˜å‡½æ•°<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</li><li>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</li></ul></li></ul><p>**ç¤ºä¾‹1 ï¼š**é™æ€æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</span></span><br><span class="line"><span class="comment">//2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_B; <span class="comment">//é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> Person::m_B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p1.m_A = <span class="number">100</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p1.m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">Person p2;</span><br><span class="line">p2.m_A = <span class="number">200</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p1.m_A &lt;&lt; endl; <span class="comment">//å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.m_A = &quot;</span> &lt;&lt; p2.m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_A = &quot;</span> &lt;&lt; Person::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;m_B = &quot; &lt;&lt; Person::m_B &lt;&lt; endl; //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**ç¤ºä¾‹2ï¼š**é™æ€æˆå‘˜å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">//2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//m_B = 100; //é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="type">int</span> m_B; <span class="comment">// </span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p1.<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">Person::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person::func2(); //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ">4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h3><h4 id="4-3-1-æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨">4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</h4><p>åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">mA = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">int</span> mA;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> mB; </span><br><span class="line"><span class="comment">//å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mA &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">sfunc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(Person) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ">4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ</h4><p>é€šè¿‡4.3.1æˆ‘ä»¬çŸ¥é“åœ¨C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„</p><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç </p><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ</p><p>c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼ŒthisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚<strong>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong></p><p>thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</span></span><br><span class="line"><span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Person&amp; <span class="title">PersonAddPerson</span><span class="params">(Person p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;age += p.age;</span><br><span class="line"><span class="comment">//è¿”å›å¯¹è±¡æœ¬èº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.age = &quot;</span> &lt;&lt; p1.age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">p2.<span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.age = &quot;</span> &lt;&lt; p2.age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°">4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æ˜¯Personç±»!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person * p = <span class="literal">NULL</span>;</span><br><span class="line">p-&gt;<span class="built_in">ShowClassName</span>(); <span class="comment">//ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°</span></span><br><span class="line">p-&gt;<span class="built_in">ShowPerson</span>();  <span class="comment">//ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°">4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°</h4><p><strong>å¸¸å‡½æ•°ï¼š</strong></p><ul><li>æˆå‘˜å‡½æ•°ååŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸º<strong>å¸¸å‡½æ•°</strong></li><li>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p><strong>å¸¸å¯¹è±¡ï¼š</strong></p><ul><li>å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">m_A = <span class="number">0</span>;</span><br><span class="line">m_B = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//const Type* const pointer;</span></span><br><span class="line"><span class="comment">//this = NULL; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this;</span></span><br><span class="line"><span class="comment">//this-&gt;mA = 100; //ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡</span></span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyFunc</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//mA = 10000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">mutable</span> <span class="type">int</span> m_B; <span class="comment">//å¯ä¿®æ”¹ å¯å˜çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°å¯¹è±¡  å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> Person person; <span class="comment">//å¸¸é‡å¯¹è±¡  </span></span><br><span class="line">cout &lt;&lt; person.m_A &lt;&lt; endl;</span><br><span class="line"><span class="comment">//person.mA = 100; //å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—®</span></span><br><span class="line">person.m_B = <span class="number">100</span>; <span class="comment">//ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line">person.<span class="built_in">MyFunc</span>(); <span class="comment">//å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-å‹å…ƒ">4.4 å‹å…ƒ</h3><p>ç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)</p><p>å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»</p><p>ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚</p><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸º  ==friend==</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒ</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><h4 id="4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ">4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom; <span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Building b;</span><br><span class="line"><span class="built_in">goodGay</span>(&amp;b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-2-ç±»åšå‹å…ƒ">4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">goodGay</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-3-æˆå‘˜å‡½æ•°åšå‹å…ƒ">4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>; <span class="comment">//åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit2</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨  goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay  gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-5-è¿ç®—ç¬¦é‡è½½">4.5 è¿ç®—ç¬¦é‡è½½</h3><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹</p><h4 id="4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½">4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125;;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = <span class="keyword">this</span>-&gt;m_A + p.m_A;</span><br><span class="line">temp.m_B = <span class="keyword">this</span>-&gt;m_B + p.m_B;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"><span class="comment">//Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;</span></span><br><span class="line"><span class="comment">//Person temp(0, 0);</span></span><br><span class="line"><span class="comment">//temp.m_A = p1.m_A + p2.m_A;</span></span><br><span class="line"><span class="comment">//temp.m_B = p1.m_B + p2.m_B;</span></span><br><span class="line"><span class="comment">//return temp;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½ </span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p2, <span class="type">int</span> val)  </span><br><span class="line">&#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = p2.m_A + val;</span><br><span class="line">temp.m_B = p2.m_B + val;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°æ–¹å¼</span></span><br><span class="line">Person p3 = p2 + p1;  <span class="comment">//ç›¸å½“äº p2.operaor+(p1)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p3.m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p3.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Person p4 = p3 + <span class="number">10</span>; <span class="comment">//ç›¸å½“äº operator+(p3,10)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p4.m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p4.m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„</p></blockquote><blockquote><p>æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</p></blockquote><h4 id="4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½">4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° å®ç°ä¸äº†  p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</span></span><br><span class="line"><span class="comment">//void operator&lt;&lt;(Person&amp; p)&#123;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½</span></span><br><span class="line"><span class="comment">//ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p) &#123;</span><br><span class="line">out &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; p.m_A &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; p.m_B;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; <span class="string">&quot;hello world&quot;</span> &lt;&lt; endl; <span class="comment">//é“¾å¼ç¼–ç¨‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p></blockquote><h4 id="4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½">4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyInteger</span>() &#123;</span><br><span class="line">m_Num = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‰ç½®++</span></span><br><span class="line">MyInteger&amp; <span class="keyword">operator</span>++() &#123;</span><br><span class="line"><span class="comment">//å…ˆ++</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="comment">//å†è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++</span></span><br><span class="line">MyInteger <span class="keyword">operator</span>++(<span class="type">int</span>) &#123;</span><br><span class="line"><span class="comment">//å…ˆè¿”å›</span></span><br><span class="line">MyInteger temp = *<span class="keyword">this</span>; <span class="comment">//è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼›</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint) &#123;</span><br><span class="line">out &lt;&lt; myint.m_Num;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰ç½®++ å…ˆ++ å†è¿”å›</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; ++myInt &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++ å…ˆè¿”å› å†++</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; myInt++ &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼</p></blockquote><h4 id="4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½">4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><p>c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°</p><ol><li>é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li><li>èµ‹å€¼è¿ç®—ç¬¦ operator=, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li></ol><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½èµ‹å€¼è¿ç®—ç¬¦ </span></span><br><span class="line">Person&amp; <span class="keyword">operator</span>=(Person &amp;p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´</span></span><br><span class="line"><span class="comment">//m_Age = p.m_Age;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_Age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›è‡ªèº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> *m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">30</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">p3 = p2 = p1; <span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p1.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p2.m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p3çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p3.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//int a = 10;</span></span><br><span class="line"><span class="comment">//int b = 20;</span></span><br><span class="line"><span class="comment">//int c = 30;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c = b = a;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-5-å…³ç³»è¿ç®—ç¬¦é‡è½½">4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½</h4><p>**ä½œç”¨ï¼š**é‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//int a = 0;</span></span><br><span class="line"><span class="comment">//int b = 0;</span></span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">a</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">b</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a != b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½">4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h4><ul><li>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ ()  ä¹Ÿå¯ä»¥é‡è½½</li><li>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</li><li>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; text &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•°</span></span><br><span class="line">MyPrint myFunc;</span><br><span class="line"><span class="built_in">myFunc</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd add;</span><br><span class="line"><span class="type">int</span> ret = <span class="built_in">add</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¿åå¯¹è±¡è°ƒç”¨  </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;MyAdd()(100,100) = &quot;</span> &lt;&lt; <span class="built_in">MyAdd</span>()(<span class="number">100</span>, <span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-6-ç»§æ‰¿">4.6  ç»§æ‰¿</h3><p><strong>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>æœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼š</p><p><img src="assets/1544861202252.png" alt="1544861202252"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç </p><h4 id="4-6-1-ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•">4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h4><p>ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„</p><p><strong>æ™®é€šå®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»§æ‰¿å®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¬å…±é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasePage</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>ç»§æ‰¿çš„å¥½å¤„ï¼š==å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç ==</p><p>class A : public B;</p><p>A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»</p><p>B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»</p><p><strong>æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†</strong>ï¼š</p><p>ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚</p><p>ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚</p><h4 id="4-6-2-ç»§æ‰¿æ–¹å¼">4.6.2 ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿çš„è¯­æ³•ï¼š<code>class å­ç±» : ç»§æ‰¿æ–¹å¼  çˆ¶ç±»</code></p><p><strong>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</strong></p><ul><li>å…¬å…±ç»§æ‰¿</li><li>ä¿æŠ¤ç»§æ‰¿</li><li>ç§æœ‰ç»§æ‰¿</li></ul><p><img src="assets/clip_image002.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son1</span> :<span class="keyword">public</span> Base1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® publicæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son1 s1;</span><br><span class="line">s1.m_A; <span class="comment">//å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿æŠ¤ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span>:<span class="keyword">protected</span> Base2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2 s;</span><br><span class="line"><span class="comment">//s.m_A; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§æœ‰ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son3</span>:<span class="keyword">private</span> Base3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandSon3</span> :<span class="keyword">public</span> Son3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ°</span></span><br><span class="line"><span class="comment">//m_A;</span></span><br><span class="line"><span class="comment">//m_B;</span></span><br><span class="line"><span class="comment">//m_C;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4-6-3-ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹">4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h4><p>**é—®é¢˜ï¼š**ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C; <span class="comment">//ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(Son) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š</p><p><img src="assets/1545881904150.png" alt="1545881904150"></p><p>æ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰CPPæ–‡ä»¶çš„ç›˜ç¬¦</p><p>ç„¶åè¾“å…¥ï¼š cl /d1 reportSingleClassLayoutæŸ¥çœ‹çš„ç±»å   æ‰€å±æ–‡ä»¶å</p><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="assets/1545882158050.png" alt="1545882158050"></p><blockquote><p>ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°</p></blockquote><h4 id="4-6-4-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº">4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h4><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line">Son s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</p></blockquote><h4 id="4-6-5-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼">4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func(int a)è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonä¸‹çš„m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseä¸‹çš„m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜</li><li>å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜</li><li>å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°</li></ol><h4 id="4-6-6-ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼">4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ</p><p>é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜   ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜   éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func(int a)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Base::m_A = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Son::m_A = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å±æ€§</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡ç±»åè®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; Son::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; Son::Base::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son::<span class="built_in">func</span>();</span><br><span class="line">Son::Base::<span class="built_in">func</span>();</span><br><span class="line"><span class="comment">//å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—®</span></span><br><span class="line">Son::Base::<span class="built_in">func</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰</p></blockquote><h4 id="4-6-7-å¤šç»§æ‰¿è¯­æ³•">4.6.7 å¤šç»§æ‰¿è¯­æ³•</h4><p>C++å…è®¸<strong>ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</strong></p><p>è¯­æ³•ï¼š<code> class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...</code></p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p><strong>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base1</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base2</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;  <span class="comment">//å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base2, <span class="keyword">public</span> Base1 </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_C = <span class="number">300</span>;</span><br><span class="line">m_D = <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">//é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(s) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base1::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base2::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ</p></blockquote><h4 id="4-6-8-è±å½¢ç»§æ‰¿">4.6.8 è±å½¢ç»§æ‰¿</h4><p><strong>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š</strong></p><p>â€‹ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»</p><p>â€‹åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»</p><p>â€‹è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><p><strong>å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š</strong></p><p><img src="assets/clip_image002.jpg" alt="IMG_256"></p><p><strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼š</strong></p><ol><li><pre><code>ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚</code></pre></li><li><p>è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheep</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tuo</span>   : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SheepTuo</span> : <span class="keyword">public</span> Sheep, <span class="keyword">public</span> Tuo &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SheepTuo st;</span><br><span class="line">st.Sheep::m_Age = <span class="number">100</span>;</span><br><span class="line">st.Tuo::m_Age = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Sheep::m_Age = &quot;</span> &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Tuo::m_Age = &quot;</span> &lt;&lt;  st.Tuo::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.m_Age = &quot;</span> &lt;&lt; st.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰</li><li>åˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜</li></ul><h3 id="4-7-å¤šæ€">4.7  å¤šæ€</h3><h4 id="4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ">4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ</h4><p><strong>å¤šæ€æ˜¯C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><ul><li>é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</li><li>åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</li></ul><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><ul><li>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š  -  ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li><li>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š  -  è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li></ul><p>ä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ¨ç‰©åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°ç‹—åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoSpeak</span><span class="params">(Animal &amp; animal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">animal.<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š </span></span><br><span class="line"><span class="comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span></span><br><span class="line"><span class="comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å¤šæ€ä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="comment">//çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Cat cat;</span><br><span class="line"><span class="built_in">DoSpeak</span>(cat);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dog dog;</span><br><span class="line"><span class="built_in">DoSpeak</span>(dog);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><ul><li>æœ‰ç»§æ‰¿å…³ç³»</li><li>å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</li></ul><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><ul><li>çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li></ul><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹  å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h4 id="4-7-2-å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»">4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»</p><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°</li><li>å¯è¯»æ€§å¼º</li><li>åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">(string oper)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (oper == <span class="string">&quot;+&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ™®é€šå®ç°æµ‹è¯•</span></span><br><span class="line">Calculator c;</span><br><span class="line">c.m_Num1 = <span class="number">10</span>;</span><br><span class="line">c.m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;+&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;-&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;*&quot;</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šæ€å®ç°</span></span><br><span class="line"><span class="comment">//æŠ½è±¡è®¡ç®—å™¨ç±»</span></span><br><span class="line"><span class="comment">//å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractCalculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºåŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line">AbstractCalculator *abc = <span class="keyword">new</span> AddCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;  <span class="comment">//ç”¨å®Œäº†è®°å¾—é”€æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå‡æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> SubCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> MulCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š</p></blockquote><h4 id="4-7-3-çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»">4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h4><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹</p><p>å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º<strong>çº¯è™šå‡½æ•°</strong></p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼š<code>virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;</code></p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º==æŠ½è±¡ç±»==</p><p><strong>æŠ½è±¡ç±»ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li><li>å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çº¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">//æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">//å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Base * base = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//base = new Base; // é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">base = <span class="keyword">new</span> Son;</span><br><span class="line">base-&gt;<span class="built_in">func</span>();</span><br><span class="line"><span class="keyword">delete</span> base;<span class="comment">//è®°å¾—é”€æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-4-å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“">4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ -  å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™</p><p>åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶</p><p><img src="assets/1545985945198.png" alt="1545985945198"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡åˆ¶ä½œé¥®å“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractDrinking</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//è§„å®šæµç¨‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MakeDrink</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">Boil</span>();</span><br><span class="line"><span class="built_in">Brew</span>();</span><br><span class="line"><span class="built_in">PourInCup</span>();</span><br><span class="line"><span class="built_in">PutSomething</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œå’–å•¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coffee</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®å†œå¤«å±±æ³‰!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡å’–å•¡!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥ç‰›å¥¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œèŒ¶æ°´</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®è‡ªæ¥æ°´!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡èŒ¶å¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥æ¸æ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸šåŠ¡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoWork</span><span class="params">(AbstractDrinking* drink)</span> </span>&#123;</span><br><span class="line">drink-&gt;<span class="built_in">MakeDrink</span>();</span><br><span class="line"><span class="keyword">delete</span> drink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Coffee);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Tea);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-5-è™šææ„å’Œçº¯è™šææ„">4.7.5 è™šææ„å’Œçº¯è™šææ„</h4><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸º<strong>è™šææ„</strong>æˆ–è€…<strong>çº¯è™šææ„</strong></p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><ul><li>å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</li><li>éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</li></ul><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li></ul><p>è™šææ„è¯­æ³•ï¼š</p><p><code>virtual ~ç±»å()&#123;&#125;</code></p><p>çº¯è™šææ„è¯­æ³•ï¼š</p><p><code> virtual ~ç±»å() = 0;</code></p><p><code>ç±»å::~ç±»å()&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//virtual ~Animal()</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Animal::~<span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Cat</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_Name = <span class="keyword">new</span> <span class="built_in">string</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; *m_Name &lt;&lt;  <span class="string">&quot;å°çŒ«åœ¨è¯´è¯!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Cat</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catææ„å‡½æ•°è°ƒç”¨!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span> m_Name;</span><br><span class="line">m_Name = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string *m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Animal *animal = <span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">animal-&gt;<span class="built_in">Speak</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼</span></span><br><span class="line"><span class="comment">//æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</span></span><br><span class="line"><span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹1. è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>â€‹2. å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p><p>â€‹3. æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</p><h4 id="4-7-6-å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…">4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰</p><p>å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intelå‚å•†å’ŒLenovoå‚å•†</p><p>åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£</p><p>æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡CPUç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„è®¡ç®—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡æ˜¾å¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoCard</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡å†…å­˜æ¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„å­˜å‚¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µè„‘ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Computer</span>(CPU * cpu, VideoCard * vc, Memory * mem)</span><br><span class="line">&#123;</span><br><span class="line">m_cpu = cpu;</span><br><span class="line">m_vc = vc;</span><br><span class="line">m_mem = mem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›å·¥ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£</span></span><br><span class="line">m_cpu-&gt;<span class="built_in">calculate</span>();</span><br><span class="line"></span><br><span class="line">m_vc-&gt;<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">m_mem-&gt;<span class="built_in">storage</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶</span></span><br><span class="line">~<span class="built_in">Computer</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾CPUé›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_cpu != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_cpu;</span><br><span class="line">m_cpu = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾æ˜¾å¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_vc != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_vc;</span><br><span class="line">m_vc = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_mem != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_mem;</span><br><span class="line">m_mem = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">CPU * m_cpu; <span class="comment">//CPUçš„é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">VideoCard * m_vc; <span class="comment">//æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">Memory * m_mem; <span class="comment">//å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“å‚å•†</span></span><br><span class="line"><span class="comment">//Intelå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lenovoå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶</span></span><br><span class="line">CPU * intelCpu = <span class="keyword">new</span> IntelCPU;</span><br><span class="line">VideoCard * intelCard = <span class="keyword">new</span> IntelVideoCard;</span><br><span class="line">Memory * intelMem = <span class="keyword">new</span> IntelMemory;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//åˆ›å»ºç¬¬ä¸€å°ç”µè„‘</span></span><br><span class="line">Computer * computer1 = <span class="keyword">new</span> <span class="built_in">Computer</span>(intelCpu, intelCard, intelMem);</span><br><span class="line">computer1-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer1;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬äºŒå°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer2 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> LenovoVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer2-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰å°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer3 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> IntelVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer3-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer3;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-æ–‡ä»¶æ“ä½œ">5 æ–‡ä»¶æ“ä½œ</h2><p>ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾</p><p>é€šè¿‡<strong>æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–</strong></p><p>C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ ==&lt; fstream &gt;==</p><p>æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li><strong>æ–‡æœ¬æ–‡ä»¶</strong>     -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>ASCIIç </strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­</li><li><strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong> -  æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>äºŒè¿›åˆ¶</strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬</li></ol><p>æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»:</p><ol><li>ofstreamï¼šå†™æ“ä½œ</li><li>ifstreamï¼š è¯»æ“ä½œ</li><li>fstream ï¼š è¯»å†™æ“ä½œ</li></ol><h3 id="5-1æ–‡æœ¬æ–‡ä»¶">5.1æ–‡æœ¬æ–‡ä»¶</h3><h4 id="5-1-1å†™æ–‡ä»¶">5.1.1å†™æ–‡ä»¶</h4><p>å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ofstream ofs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶</p><p>ofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>å†™æ•°æ®</p><p>ofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€;</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ofs.close();</p></li></ol><p>æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š</p><table><thead><tr><th>æ‰“å¼€æ–¹å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>ios::in</td><td>ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::out</td><td>ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::ate</td><td>åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾</td></tr><tr><td>ios::app</td><td>è¿½åŠ æ–¹å¼å†™æ–‡ä»¶</td></tr><tr><td>ios::trunc</td><td>å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º</td></tr><tr><td>ios::binary</td><td>äºŒè¿›åˆ¶æ–¹å¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼š</strong> æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦</p><p>**ä¾‹å¦‚ï¼š**ç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ <code>ios::binary |  ios:: out</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ofstream ofs;</span><br><span class="line">ofs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::out);</span><br><span class="line"></span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;æ€§åˆ«ï¼šç”·&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š18&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream</li><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream  ï¼Œæˆ–è€…fstreamç±»</li><li>æ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼</li><li>åˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®</li><li>æ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶</li></ul><h4 id="5-1-2è¯»æ–‡ä»¶">5.1.2è¯»æ–‡ä»¶</h4><p>è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š</p><p>è¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ifstream ifs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>ifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>è¯»æ•°æ®</p><p>å››ç§æ–¹å¼è¯»å–</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ifs.close();</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ifstream ifs;</span><br><span class="line">ifs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::in);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs &gt;&gt; buf)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs.getline(buf,sizeof(buf)))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§</span></span><br><span class="line"><span class="comment">//string buf;</span></span><br><span class="line"><span class="comment">//while (getline(ifs, buf))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="keyword">while</span> ((c = ifs.<span class="built_in">get</span>()) != EOF)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ifs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream  ï¼Œæˆ–è€…fstreamç±»</li><li>åˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</li><li>close å…³é—­æ–‡ä»¶</li></ul><h3 id="5-2-äºŒè¿›åˆ¶æ–‡ä»¶">5.2 äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p><p>æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º ==ios::binary==</p><h4 id="5-2-1-å†™æ–‡ä»¶">5.2.1 å†™æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°write</p><p>å‡½æ•°åŸå‹ ï¼š<code>ostream&amp; write(const char * buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒè¿›åˆ¶æ–‡ä»¶  å†™æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€åŒ…å«å¤´æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span></span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::out | ios::binary)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//ofs.open(&quot;person.txt&quot;, ios::out | ios::binary);</span></span><br><span class="line"></span><br><span class="line">Person p = &#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>  , <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€å†™æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line"><span class="comment">//5ã€å…³é—­æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡writeå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ®</li></ul><h4 id="5-2-2-è¯»æ–‡ä»¶">5.2.2 è¯»æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°read</p><p>å‡½æ•°åŸå‹ï¼š<code>istream&amp; read(char *buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::in | ios::binary)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">ifs.<span class="built_in">read</span>((<span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡readå‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®</li></ul><h1>C++æé«˜ç¼–ç¨‹</h1><ul><li>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹C++==æ³›å‹ç¼–ç¨‹==å’Œ==STL==æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨C++æ›´æ·±å±‚çš„ä½¿ç”¨</li></ul><h2 id="1-æ¨¡æ¿">1 æ¨¡æ¿</h2><h3 id="1-1-æ¨¡æ¿çš„æ¦‚å¿µ">1.1 æ¨¡æ¿çš„æ¦‚å¿µ</h3><p>æ¨¡æ¿å°±æ˜¯å»ºç«‹<strong>é€šç”¨çš„æ¨¡å…·</strong>ï¼Œå¤§å¤§<strong>æé«˜å¤ç”¨æ€§</strong></p><p>ä¾‹å¦‚ç”Ÿæ´»ä¸­çš„æ¨¡æ¿</p><p>æ¨¡æ¿çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¨¡æ¿ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¡†æ¶</li><li>æ¨¡æ¿çš„é€šç”¨å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><h3 id="1-2-å‡½æ•°æ¨¡æ¿">1.2 å‡½æ•°æ¨¡æ¿</h3><ul><li><p>C++å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³ç§°ä¸º ==æ³›å‹ç¼–ç¨‹== ï¼Œä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯å°±æ˜¯æ¨¡æ¿</p></li><li><p>C++æä¾›ä¸¤ç§æ¨¡æ¿æœºåˆ¶:<strong>å‡½æ•°æ¨¡æ¿</strong>å’Œ<strong>ç±»æ¨¡æ¿</strong></p></li></ul><h4 id="1-2-1-å‡½æ•°æ¨¡æ¿è¯­æ³•">1.2.1 å‡½æ•°æ¨¡æ¿è¯­æ³•</h4><p>å‡½æ•°æ¨¡æ¿ä½œç”¨ï¼š</p><p>å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">å‡½æ•°å£°æ˜æˆ–å®šä¹‰</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢æ•´å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapInt</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢æµ®ç‚¹å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapDouble</span><span class="params">(<span class="type">double</span>&amp; a, <span class="type">double</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//swapInt(a, b);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿å®ç°äº¤æ¢</span></span><br><span class="line"><span class="comment">//1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line"><span class="built_in">mySwap</span>(a, b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</span></span><br><span class="line"><span class="built_in">mySwap</span>&lt;<span class="type">int</span>&gt;(a, b);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿åˆ©ç”¨å…³é”®å­— template</li><li>ä½¿ç”¨å‡½æ•°æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</li><li>æ¨¡æ¿çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å¤ç”¨æ€§ï¼Œå°†ç±»å‹å‚æ•°åŒ–</li></ul><h4 id="1-2-2-å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹">1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹</h4><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap</span>(a, b); <span class="comment">// æ­£ç¡®ï¼Œå¯ä»¥æ¨å¯¼å‡ºä¸€è‡´çš„T</span></span><br><span class="line"><span class="comment">//mySwap(a, c); // é”™è¯¯ï¼Œæ¨å¯¼ä¸å‡ºä¸€è‡´çš„Tç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//func(); //é”™è¯¯ï¼Œæ¨¡æ¿ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»ç¡®å®šå‡ºTçš„ç±»å‹</span></span><br><span class="line"><span class="built_in">func</span>&lt;<span class="type">int</span>&gt;(); <span class="comment">//åˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œç»™Tä¸€ä¸ªç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä½¿ç”¨æ¨¡æ¿æ—¶å¿…é¡»ç¡®å®šå‡ºé€šç”¨æ•°æ®ç±»å‹Tï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨å¯¼å‡ºä¸€è‡´çš„ç±»å‹</li></ul><h4 id="1-2-3-å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹">1.2.3 å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><ul><li>åˆ©ç”¨å‡½æ•°æ¨¡æ¿å°è£…ä¸€ä¸ªæ’åºçš„å‡½æ•°ï¼Œå¯ä»¥å¯¹<strong>ä¸åŒæ•°æ®ç±»å‹æ•°ç»„</strong>è¿›è¡Œæ’åº</li><li>æ’åºè§„åˆ™ä»å¤§åˆ°å°ï¼Œæ’åºç®—æ³•ä¸º<strong>é€‰æ‹©æ’åº</strong></li><li>åˆ†åˆ«åˆ©ç”¨<strong>charæ•°ç»„</strong>å’Œ<strong>intæ•°ç»„</strong>è¿›è¡Œæµ‹è¯•</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T &amp;a, T&amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="comment">// ä¹Ÿå¯ä»¥æ›¿æ¢æˆtypename</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨é€‰æ‹©æ’åºï¼Œè¿›è¡Œå¯¹æ•°ç»„ä»å¤§åˆ°å°çš„æ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySort</span><span class="params">(T arr[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> max = i; <span class="comment">//æœ€å¤§æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; len; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[max] &lt; arr[j])</span><br><span class="line">&#123;</span><br><span class="line">max = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (max != i) <span class="comment">//å¦‚æœæœ€å¤§æ•°çš„ä¸‹æ ‡ä¸æ˜¯iï¼Œäº¤æ¢ä¸¤è€…</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">mySwap</span>(arr[max], arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printArray</span><span class="params">(T arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•charæ•°ç»„</span></span><br><span class="line"><span class="type">char</span> charArr[] = <span class="string">&quot;bdcfeagh&quot;</span>;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(charArr) / <span class="built_in">sizeof</span>(<span class="type">char</span>);</span><br><span class="line"><span class="built_in">mySort</span>(charArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(charArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•intæ•°ç»„</span></span><br><span class="line"><span class="type">int</span> intArr[] = &#123; <span class="number">7</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> &#125;;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(intArr) / <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"><span class="built_in">mySort</span>(intArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(intArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ¨¡æ¿å¯ä»¥æé«˜ä»£ç å¤ç”¨ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="1-2-4-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«">1.2.4 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h4><p><strong>æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ï¼š</strong></p><ul><li>æ™®é€šå‡½æ•°è°ƒç”¨æ—¶å¯ä»¥å‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰</li><li>å‡½æ•°æ¨¡æ¿è°ƒç”¨æ—¶ï¼Œå¦‚æœåˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li><li>å¦‚æœåˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">myAdd01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">myAdd02</span><span class="params">(T a, T b)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œå¦‚æœç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢,å³éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd01</span>(a, c) &lt;&lt; endl; <span class="comment">//æ­£ç¡®ï¼Œå°†charç±»å‹çš„&#x27;c&#x27;éšå¼è½¬æ¢ä¸ºintç±»å‹  &#x27;c&#x27; å¯¹åº” ASCIIç  99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//myAdd02(a, c); // æŠ¥é”™ï¼Œä½¿ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼æ—¶ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">myAdd02</span>&lt;<span class="type">int</span>&gt;(a, c); <span class="comment">//æ­£ç¡®ï¼Œå¦‚æœç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼Œå› ä¸ºå¯ä»¥è‡ªå·±ç¡®å®šé€šç”¨ç±»å‹T</p><h4 id="1-2-5-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™">1.2.5 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™</h4><p>è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œ<strong>ä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</strong></li><li><strong>å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</strong></li><li>å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</li><li>å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿è°ƒç”¨è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ™®é€šå‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b, T c)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨é‡è½½çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="comment">// æ³¨æ„ å¦‚æœå‘Šè¯‰ç¼–è¯‘å™¨  æ™®é€šå‡½æ•°æ˜¯æœ‰çš„ï¼Œä½†åªæ˜¯å£°æ˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…ä¸åœ¨å½“å‰æ–‡ä»¶å†…å®ç°ï¼Œå°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b); <span class="comment">//è°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">myPrint&lt;&gt;(a, b); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</span></span><br><span class="line"><span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b, c); <span class="comment">//è°ƒç”¨é‡è½½çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€ å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">char</span> c1 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> c2 = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(c1, c2); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ—¢ç„¶æä¾›äº†å‡½æ•°æ¨¡æ¿ï¼Œæœ€å¥½å°±ä¸è¦æä¾›æ™®é€šå‡½æ•°ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§</p><h4 id="1-2-6-æ¨¡æ¿çš„å±€é™æ€§">1.2.6 æ¨¡æ¿çš„å±€é™æ€§</h4><p><strong>å±€é™æ€§ï¼š</strong></p><ul><li>æ¨¡æ¿çš„é€šç”¨æ€§å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">   a = b;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­æä¾›çš„èµ‹å€¼æ“ä½œï¼Œå¦‚æœä¼ å…¥çš„aå’Œbæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ— æ³•å®ç°äº†</p><p>å†ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">   <span class="keyword">if</span>(a &gt; b) &#123; ... &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœTçš„æ•°æ®ç±»å‹ä¼ å…¥çš„æ˜¯åƒPersonè¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ</p><p>å› æ­¤C++ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæä¾›æ¨¡æ¿çš„é‡è½½ï¼Œå¯ä»¥ä¸ºè¿™äº›<strong>ç‰¹å®šçš„ç±»å‹</strong>æä¾›<strong>å…·ä½“åŒ–çš„æ¨¡æ¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ï¼Œæ˜¾ç¤ºå…·ä½“åŒ–çš„åŸå‹å’Œå®šæ„æ€ä»¥template&lt;&gt;å¼€å¤´ï¼Œå¹¶é€šè¿‡åç§°æ¥æŒ‡å‡ºç±»å‹</span></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ä¼˜å…ˆäºå¸¸è§„æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(Person &amp;p1, Person &amp;p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> ( p1.m_Name  == p2.m_Name &amp;&amp; p1.m_Age == p2.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(a, b);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a == b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a != b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¸ä¼šè°ƒç”¨æ™®é€šçš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="comment">//å¯ä»¥åˆ›å»ºå…·ä½“åŒ–çš„Personæ•°æ®ç±»å‹çš„æ¨¡æ¿ï¼Œç”¨äºç‰¹æ®Šå¤„ç†è¿™ä¸ªç±»å‹</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(p1, p2);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 == p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 != p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨å…·ä½“åŒ–çš„æ¨¡æ¿ï¼Œå¯ä»¥è§£å†³è‡ªå®šä¹‰ç±»å‹çš„é€šç”¨åŒ–</li><li><strong>å­¦ä¹ æ¨¡æ¿å¹¶ä¸æ˜¯ä¸ºäº†å†™æ¨¡æ¿ï¼Œè€Œæ˜¯åœ¨STLèƒ½å¤Ÿè¿ç”¨ç³»ç»Ÿæä¾›çš„æ¨¡æ¿</strong></li></ul><h3 id="1-3-ç±»æ¨¡æ¿">1.3 ç±»æ¨¡æ¿</h3><h4 id="1-3-1-ç±»æ¨¡æ¿è¯­æ³•">1.3.1 ç±»æ¨¡æ¿è¯­æ³•</h4><p>ç±»æ¨¡æ¿ä½œç”¨ï¼š</p><ul><li>å»ºç«‹ä¸€ä¸ªé€šç”¨ç±»ï¼Œç±»ä¸­çš„æˆå‘˜ æ•°æ®ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ç±»</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template  â€”  å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename  â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>T    â€”   é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// æŒ‡å®šNameType ä¸ºstringç±»å‹ï¼ŒAgeType ä¸º intç±»å‹</span></span><br><span class="line">Person&lt;string, <span class="type">int</span>&gt;<span class="built_in">P1</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">999</span>);</span><br><span class="line">P1.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿è¯­æ³•ç›¸ä¼¼ï¼Œåœ¨å£°æ˜æ¨¡æ¿templateåé¢åŠ ç±»ï¼Œæ­¤ç±»ç§°ä¸ºç±»æ¨¡æ¿</p><h4 id="1-3-2-ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«">1.3.2 ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«</h4><p>ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</li><li>ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­<strong>å¯ä»¥æœ‰é»˜è®¤å‚æ•°</strong></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt; </span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Person p(&quot;å­™æ‚Ÿç©º&quot;, 1000); // é”™è¯¯ ç±»æ¨¡æ¿ä½¿ç”¨æ—¶å€™ï¼Œä¸å¯ä»¥ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line">Person &lt;string ,<span class="type">int</span>&gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>); <span class="comment">//å¿…é¡»ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œä½¿ç”¨ç±»æ¨¡æ¿</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string&gt; <span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">999</span>); <span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨ å¯ä»¥æŒ‡å®šé»˜è®¤å‚æ•°</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><strong>ç±»æ¨¡æ¿ä½¿ç”¨åªèƒ½ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹æ–¹å¼</strong></li><li>ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ul><h4 id="1-3-3-ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº">1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº</h4><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°å’Œæ™®é€šç±»ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><ul><li>æ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°ä¸€å¼€å§‹å°±å¯ä»¥åˆ›å»º</li><li>ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person1 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person2 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œè€Œæ˜¯åœ¨æ¨¡æ¿è°ƒç”¨æ—¶å†ç”Ÿæˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson1</span>(); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson2</span>(); &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyClass&lt;Person1&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">fun1</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//m.fun2();//ç¼–è¯‘ä¼šå‡ºé”™ï¼Œè¯´æ˜å‡½æ•°è°ƒç”¨æ‰ä¼šå»åˆ›å»ºæˆå‘˜å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œåœ¨è°ƒç”¨æ—¶æ‰å»åˆ›å»º</p><h4 id="1-3-4-ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°">1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>ç±»æ¨¡æ¿å®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ï¼Œå‘å‡½æ•°ä¼ å‚çš„æ–¹å¼</li></ul><p>ä¸€å…±æœ‰ä¸‰ç§ä¼ å…¥æ–¹å¼ï¼š</p><ol><li>æŒ‡å®šä¼ å…¥çš„ç±»å‹   â€” ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„æ•°æ®ç±»å‹</li><li>å‚æ•°æ¨¡æ¿åŒ–           â€” å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’</li><li>æ•´ä¸ªç±»æ¨¡æ¿åŒ–       â€” å°†è¿™ä¸ªå¯¹è±¡ç±»å‹ æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt; </span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€æŒ‡å®šä¼ å…¥çš„ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson1</span><span class="params">(Person&lt;string, <span class="type">int</span>&gt; &amp;p)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printPerson1</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‚æ•°æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt;&amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T1çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T2çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ•´ä¸ªç±»æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson3</span><span class="params">(T &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Tçš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson3</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é€šè¿‡ç±»æ¨¡æ¿åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸‰ç§æ–¹å¼å‘å‡½æ•°ä¸­è¿›è¡Œä¼ å‚</li><li>ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›æ˜¯ç¬¬ä¸€ç§ï¼šæŒ‡å®šä¼ å…¥çš„ç±»å‹</li></ul><h4 id="1-3-5-ç±»æ¨¡æ¿ä¸ç»§æ‰¿">1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿</h4><p>å½“ç±»æ¨¡æ¿ç¢°åˆ°ç»§æ‰¿æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å½“å­ç±»ç»§æ‰¿çš„çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»åœ¨å£°æ˜çš„æ—¶å€™ï¼Œè¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹</li><li>å¦‚æœä¸æŒ‡å®šï¼Œç¼–è¯‘å™¨æ— æ³•ç»™å­ç±»åˆ†é…å†…å­˜</li><li>å¦‚æœæƒ³çµæ´»æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹ï¼Œå­ç±»ä¹Ÿéœ€å˜ä¸ºç±»æ¨¡æ¿</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line">T m;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class Son:public Base  //é”™è¯¯ï¼Œc++ç¼–è¯‘éœ€è¦ç»™å­ç±»åˆ†é…å†…å­˜ï¼Œå¿…é¡»çŸ¥é“çˆ¶ç±»ä¸­Tçš„ç±»å‹æ‰å¯ä»¥å‘ä¸‹ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base&lt;<span class="type">int</span>&gt; <span class="comment">//å¿…é¡»æŒ‡å®šä¸€ä¸ªç±»å‹</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ç»§æ‰¿ç±»æ¨¡æ¿ ,å¯ä»¥ç”¨T2æŒ‡å®šçˆ¶ç±»ä¸­çš„Tç±»å‹</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span> :<span class="keyword">public</span> Base&lt;T2&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son2</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2&lt;<span class="type">int</span>, <span class="type">char</span>&gt; child1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœçˆ¶ç±»æ˜¯ç±»æ¨¡æ¿ï¼Œå­ç±»éœ€è¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„æ•°æ®ç±»å‹</p><h4 id="1-3-6-ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°">1.3.6 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</h4><p>å­¦ä¹ ç›®æ ‡ï¼šèƒ½å¤ŸæŒæ¡ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°ç±»å†…å£°æ˜</span></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°åˆ—è¡¨</p><h4 id="1-3-7-ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™">1.3.7 ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™äº§ç”Ÿçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹å¼</li></ul><p>é—®é¢˜ï¼š</p><ul><li>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´åˆ†æ–‡ä»¶ç¼–å†™æ—¶é“¾æ¥ä¸åˆ°</li></ul><p>è§£å†³ï¼š</p><ul><li>è§£å†³æ–¹å¼1ï¼šç›´æ¥åŒ…å«.cppæºæ–‡ä»¶</li><li>è§£å†³æ–¹å¼2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º.hppï¼Œhppæ˜¯çº¦å®šçš„åç§°ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>person.hppä¸­ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™.cppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//#include &quot;person.h&quot;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.cpp&quot;</span> <span class="comment">//è§£å†³æ–¹å¼1ï¼ŒåŒ…å«cppæºæ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£å†³æ–¹å¼2ï¼Œå°†å£°æ˜å’Œå®ç°å†™åˆ°ä¸€èµ·ï¼Œæ–‡ä»¶åç¼€åæ”¹ä¸º.hpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.hpp&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸»æµçš„è§£å†³æ–¹å¼æ˜¯ç¬¬äºŒç§ï¼Œå°†ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°å†™åˆ°ä¸€èµ·ï¼Œå¹¶å°†åç¼€åæ”¹ä¸º.hpp</p><h4 id="1-3-8-ç±»æ¨¡æ¿ä¸å‹å…ƒ">1.3.8 ç±»æ¨¡æ¿ä¸å‹å…ƒ</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿é…åˆå‹å…ƒå‡½æ•°çš„ç±»å†…å’Œç±»å¤–å®ç°</li></ul><p>å…¨å±€å‡½æ•°ç±»å†…å®ç° - ç›´æ¥åœ¨ç±»å†…å£°æ˜å‹å…ƒå³å¯</p><p>å…¨å±€å‡½æ•°ç±»å¤–å®ç° - éœ€è¦æå‰è®©ç¼–è¯‘å™¨çŸ¥é“å…¨å±€å‡½æ•°çš„å­˜åœ¨</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç° - å…ˆåšå‡½æ•°æ¨¡æ¿å£°æ˜ï¼Œä¸‹æ–¹åœ¨åšå‡½æ•°æ¨¡æ¿å®šä¹‰ï¼Œåœ¨åšå‹å…ƒ</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt; <span class="keyword">class</span> <span class="title class_">Person</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå£°æ˜äº†å‡½æ•°æ¨¡æ¿ï¼Œå¯ä»¥å°†å®ç°å†™åˆ°åé¢ï¼Œå¦åˆ™éœ€è¦å°†å®ç°ä½“å†™åˆ°ç±»çš„å‰é¢è®©ç¼–è¯‘å™¨æå‰çœ‹åˆ°</span></span><br><span class="line"><span class="comment">//template&lt;class T1, class T2&gt; void printPerson2(Person&lt;T1, T2&gt; &amp; p); </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç±»å¤–å®ç° ---- å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ   ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">printPerson</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">friend</span> <span class="type">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; &amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°åœ¨ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="built_in">printPerson</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°åœ¨ç±»å¤–å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®å…¨å±€å‡½æ•°åšç±»å†…å®ç°ï¼Œç”¨æ³•ç®€å•ï¼Œè€Œä¸”ç¼–è¯‘å™¨å¯ä»¥ç›´æ¥è¯†åˆ«</p><h4 id="1-3-9-ç±»æ¨¡æ¿æ¡ˆä¾‹">1.3.9 ç±»æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°:  å®ç°ä¸€ä¸ªé€šç”¨çš„æ•°ç»„ç±»ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥å¯¹å†…ç½®æ•°æ®ç±»å‹ä»¥åŠè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æ•°æ®è¿›è¡Œå­˜å‚¨</li><li>å°†æ•°ç»„ä¸­çš„æ•°æ®å­˜å‚¨åˆ°å †åŒº</li><li>æ„é€ å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥æ•°ç»„çš„å®¹é‡</li><li>æä¾›å¯¹åº”çš„æ‹·è´æ„é€ å‡½æ•°ä»¥åŠoperator=é˜²æ­¢æµ…æ‹·è´é—®é¢˜</li><li>æä¾›å°¾æ’æ³•å’Œå°¾åˆ æ³•å¯¹æ•°ç»„ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ å’Œåˆ é™¤</li><li>å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ </li><li>å¯ä»¥è·å–æ•°ç»„ä¸­å½“å‰å…ƒç´ ä¸ªæ•°å’Œæ•°ç»„çš„å®¹é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>myArray.hppä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">int</span> capacity)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">const</span> MyArray &amp; arr)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = arr.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = arr.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å¦‚æœTä¸ºå¯¹è±¡ï¼Œè€Œä¸”è¿˜åŒ…å«æŒ‡é’ˆï¼Œå¿…é¡»éœ€è¦é‡è½½ = æ“ä½œç¬¦ï¼Œå› ä¸ºè¿™ä¸ªç­‰å·ä¸æ˜¯ æ„é€  è€Œæ˜¯èµ‹å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">// æ™®é€šç±»å‹å¯ä»¥ç›´æ¥= ä½†æ˜¯æŒ‡é’ˆç±»å‹éœ€è¦æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = arr.pAddress[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½= æ“ä½œç¬¦  é˜²æ­¢æµ…æ‹·è´é—®é¢˜</span></span><br><span class="line">MyArray&amp; <span class="keyword">operator</span>=(<span class="type">const</span> MyArray&amp; myarray) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = myarray.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = myarray.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = myarray[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½[] æ“ä½œç¬¦  arr[0]</span></span><br><span class="line">T&amp; <span class="keyword">operator</span> [](<span class="type">int</span> index)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;pAddress[index]; <span class="comment">//ä¸è€ƒè™‘è¶Šç•Œï¼Œç”¨æˆ·è‡ªå·±å»å¤„ç†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾æ’æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push_back</span><span class="params">(<span class="type">const</span> T &amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Capacity == <span class="keyword">this</span>-&gt;m_Size)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[<span class="keyword">this</span>-&gt;m_Size] = val;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Pop_back</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Size == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å®¹é‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getCapacity</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">int</span><span class="title">getSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">~<span class="built_in">MyArray</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T * pAddress;  <span class="comment">//æŒ‡å‘ä¸€ä¸ªå †ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å­˜å‚¨çœŸæ­£çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> m_Capacity; <span class="comment">//å®¹é‡</span></span><br><span class="line"><span class="type">int</span> m_Size;   <span class="comment">// å¤§å°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿æ¡ˆä¾‹â€”æ•°ç»„ç±»å°è£….cppä¸­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myArray.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printIntArray</span><span class="params">(MyArray&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">array1.<span class="built_in">Push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array1.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array1.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array2</span><span class="params">(array1)</span></span>;</span><br><span class="line">array2.<span class="built_in">Pop_back</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array2);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array2.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array2.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125; </span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPersonArray</span><span class="params">(MyArray&lt;Person&gt;&amp; personArr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; personArr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; personArr[i].m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; personArr[i].m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°ç»„</span></span><br><span class="line"><span class="function">MyArray&lt;Person&gt; <span class="title">pArray</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;éŸ©ä¿¡&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¦²å·±&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ç‹æ˜­å›&quot;</span>, <span class="number">15</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">24</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p1);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p2);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p3);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p4);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printPersonArray</span>(pArray);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å¤§å°ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å®¹é‡ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>èƒ½å¤Ÿåˆ©ç”¨æ‰€å­¦çŸ¥è¯†ç‚¹å®ç°é€šç”¨çš„æ•°ç»„</p><h3 id="1-4-ç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿çš„åŒºåˆ«">1.4 ç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h3><p>ç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿æ˜¯C++ä¸­çš„ä¸¤ç§ä¸åŒç±»å‹çš„æ¨¡æ¿ï¼Œå®ƒä»¬åœ¨ä½¿ç”¨æ–¹å¼å’Œåº”ç”¨é¢†åŸŸä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚</p><ol><li><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿ï¼šå‡½æ•°æ¨¡æ¿ç”¨äºå®šä¹‰é€šç”¨å‡½æ•°ï¼Œå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°ã€‚å‡½æ•°æ¨¡æ¿çš„å®šä¹‰ä»¥ <code>template&lt;typename T&gt;</code> å¼€å§‹ï¼Œåé¢è·Ÿç€å‡½æ•°çš„å®šä¹‰ã€‚å‡½æ•°æ¨¡æ¿å¯ä»¥æ ¹æ®å‡½æ•°å‚æ•°çš„ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨å¯¼ã€‚</li><li>ç±»æ¨¡æ¿ï¼šç±»æ¨¡æ¿ç”¨äºå®šä¹‰é€šç”¨ç±»ï¼Œå¯ä»¥åœ¨ç±»çš„æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ä¸­ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°ã€‚ç±»æ¨¡æ¿çš„å®šä¹‰ä»¥ <code>template&lt;typename T&gt;</code> å¼€å§‹ï¼Œåé¢è·Ÿç€ç±»çš„å®šä¹‰ã€‚ç±»æ¨¡æ¿éœ€è¦åœ¨å®ä¾‹åŒ–æ—¶æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‚æ•°çš„ç±»å‹ã€‚</li></ul></li><li><p>åº”ç”¨é¢†åŸŸï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿ï¼šå‡½æ•°æ¨¡æ¿é€šå¸¸ç”¨äºå®šä¹‰é€šç”¨çš„ç®—æ³•æˆ–æ“ä½œï¼Œå¯ä»¥é€‚ç”¨äºå¤šç§æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªé€šç”¨çš„æ’åºå‡½æ•°æ¨¡æ¿ï¼Œç”¨äºå¯¹æ•´æ•°æ•°ç»„ã€æµ®ç‚¹æ•°æ•°ç»„æˆ–å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œæ’åºã€‚</li><li>ç±»æ¨¡æ¿ï¼šç±»æ¨¡æ¿é€šå¸¸ç”¨äºå®šä¹‰é€šç”¨çš„æ•°æ®ç»“æ„æˆ–å®¹å™¨ï¼Œå¯ä»¥å­˜å‚¨å’Œæ“ä½œå¤šç§æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªé€šç”¨çš„é“¾è¡¨ç±»æ¨¡æ¿ï¼Œç”¨äºå­˜å‚¨æ•´æ•°ã€æµ®ç‚¹æ•°æˆ–è‡ªå®šä¹‰ç±»å‹çš„èŠ‚ç‚¹ã€‚</li></ul></li><li><p>å®ä¾‹åŒ–ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿ï¼šå‡½æ•°æ¨¡æ¿åœ¨è°ƒç”¨æ—¶å¯ä»¥æ ¹æ®å‡½æ•°å‚æ•°çš„ç±»å‹è¿›è¡Œè‡ªåŠ¨æ¨å¯¼ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„å…·ä½“å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>getMax(5, 10)</code> å¯ä»¥è‡ªåŠ¨æ¨å¯¼å‡º <code>getMax&lt;int&gt;(5, 10)</code>ï¼Œå¹¶è°ƒç”¨å…·ä½“çš„æ•´æ•°ç±»å‹å‡½æ•°ã€‚</li><li>ç±»æ¨¡æ¿ï¼šç±»æ¨¡æ¿éœ€è¦åœ¨å®ä¾‹åŒ–æ—¶æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‚æ•°çš„ç±»å‹ï¼Œä»¥åˆ›å»ºå…·ä½“çš„ç±»å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œ<code>Stack&lt;int&gt;</code> å®ä¾‹åŒ–ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æ ˆç±»ï¼Œ<code>Stack&lt;double&gt;</code> å®ä¾‹åŒ–ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°ç±»å‹çš„æ ˆç±»ã€‚</li></ul></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œå‡½æ•°æ¨¡æ¿ç”¨äºå®šä¹‰é€šç”¨å‡½æ•°ï¼Œå‡½æ•°å‚æ•°çš„ç±»å‹å¯ä»¥è‡ªåŠ¨æ¨å¯¼ï¼›ç±»æ¨¡æ¿ç”¨äºå®šä¹‰é€šç”¨ç±»ï¼Œéœ€è¦åœ¨å®ä¾‹åŒ–æ—¶æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‚æ•°çš„ç±»å‹ã€‚å‡½æ•°æ¨¡æ¿é€šå¸¸ç”¨äºé€šç”¨ç®—æ³•ï¼Œç±»æ¨¡æ¿é€šå¸¸ç”¨äºé€šç”¨æ•°æ®ç»“æ„æˆ–å®¹å™¨ã€‚</p><h2 id="2-STLåˆè¯†">2 STLåˆè¯†</h2><h3 id="2-1-STLçš„è¯ç”Ÿ">2.1 STLçš„è¯ç”Ÿ</h3><ul><li><p>é•¿ä¹…ä»¥æ¥ï¼Œè½¯ä»¶ç•Œä¸€ç›´å¸Œæœ›å»ºç«‹ä¸€ç§å¯é‡å¤åˆ©ç”¨çš„ä¸œè¥¿</p></li><li><p>C++çš„<strong>é¢å‘å¯¹è±¡</strong>å’Œ<strong>æ³›å‹ç¼–ç¨‹</strong>æ€æƒ³ï¼Œç›®çš„å°±æ˜¯<strong>å¤ç”¨æ€§çš„æå‡</strong></p></li><li><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•éƒ½æœªèƒ½æœ‰ä¸€å¥—æ ‡å‡†,å¯¼è‡´è¢«è¿«ä»äº‹å¤§é‡é‡å¤å·¥ä½œ</p></li><li><p>ä¸ºäº†å»ºç«‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸€å¥—æ ‡å‡†,è¯ç”Ÿäº†<strong>STL</strong></p></li></ul><h3 id="2-2-STLåŸºæœ¬æ¦‚å¿µ">2.2 STLåŸºæœ¬æ¦‚å¿µ</h3><ul><li>STL(Standard Template Library,<strong>æ ‡å‡†æ¨¡æ¿åº“</strong>)</li><li>STL ä»å¹¿ä¹‰ä¸Šåˆ†ä¸º: <strong>å®¹å™¨(container) ç®—æ³•(algorithm) è¿­ä»£å™¨(iterator)</strong></li><li><strong>å®¹å™¨</strong>å’Œ<strong>ç®—æ³•</strong>ä¹‹é—´é€šè¿‡<strong>è¿­ä»£å™¨</strong>è¿›è¡Œæ— ç¼è¿æ¥ã€‚</li><li>STL å‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°</li></ul><h3 id="2-3-STLå…­å¤§ç»„ä»¶">2.3 STLå…­å¤§ç»„ä»¶</h3><p>STLå¤§ä½“åˆ†ä¸ºå…­å¤§ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯:<strong>å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ï¼ˆé…æ¥å™¨ï¼‰ã€ç©ºé—´é…ç½®å™¨</strong></p><ol><li>å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚vectorã€listã€dequeã€setã€mapç­‰,ç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</li><li>ç®—æ³•ï¼šå„ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå¦‚sortã€findã€copyã€for_eachç­‰</li><li>è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ã€‚</li><li>ä»¿å‡½æ•°ï¼šè¡Œä¸ºç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥ã€‚</li><li>é€‚é…å™¨ï¼šä¸€ç§ç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–è€…ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚</li><li>ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´çš„é…ç½®ä¸ç®¡ç†ã€‚</li></ol><h3 id="2-4-STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨">2.4  STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨</h3><p>**å®¹å™¨ï¼š**ç½®ç‰©ä¹‹æ‰€ä¹Ÿ</p><p>STL<strong>å®¹å™¨</strong>å°±æ˜¯å°†è¿ç”¨<strong>æœ€å¹¿æ³›çš„ä¸€äº›æ•°æ®ç»“æ„</strong>å®ç°å‡ºæ¥</p><p>å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„, é“¾è¡¨,æ ‘, æ ˆ, é˜Ÿåˆ—, é›†åˆ, æ˜ å°„è¡¨ ç­‰</p><p>è¿™äº›å®¹å™¨åˆ†ä¸º<strong>åºåˆ—å¼å®¹å™¨</strong>å’Œ<strong>å…³è”å¼å®¹å™¨</strong>ä¸¤ç§:</p><p>â€‹<strong>åºåˆ—å¼å®¹å™¨</strong>:å¼ºè°ƒå€¼çš„æ’åºï¼Œåºåˆ—å¼å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šçš„ä½ç½®ã€‚<br>â€‹<strong>å…³è”å¼å®¹å™¨</strong>:äºŒå‰æ ‘ç»“æ„ï¼Œå„å…ƒç´ ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„ç‰©ç†ä¸Šçš„é¡ºåºå…³ç³»</p><p>**ç®—æ³•ï¼š**é—®é¢˜ä¹‹è§£æ³•ä¹Ÿ</p><p>æœ‰é™çš„æ­¥éª¤ï¼Œè§£å†³é€»è¾‘æˆ–æ•°å­¦ä¸Šçš„é—®é¢˜ï¼Œè¿™ä¸€é—¨å­¦ç§‘æˆ‘ä»¬å«åšç®—æ³•(Algorithms)</p><p>ç®—æ³•åˆ†ä¸º:<strong>è´¨å˜ç®—æ³•</strong>å’Œ<strong>éè´¨å˜ç®—æ³•</strong>ã€‚</p><p>è´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ çš„å†…å®¹ã€‚ä¾‹å¦‚æ‹·è´ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ç­‰ç­‰</p><p>éè´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¸ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œä¾‹å¦‚æŸ¥æ‰¾ã€è®¡æ•°ã€éå†ã€å¯»æ‰¾æå€¼ç­‰ç­‰</p><p>**è¿­ä»£å™¨ï¼š**å®¹å™¨å’Œç®—æ³•ä¹‹é—´ç²˜åˆå‰‚</p><p>æä¾›ä¸€ç§æ–¹æ³•ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¾åºå¯»è®¿æŸä¸ªå®¹å™¨æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— éœ€æš´éœ²è¯¥å®¹å™¨çš„å†…éƒ¨è¡¨ç¤ºæ–¹å¼ã€‚</p><p>æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„è¿­ä»£å™¨</p><p>è¿­ä»£å™¨ä½¿ç”¨éå¸¸ç±»ä¼¼äºæŒ‡é’ˆï¼Œåˆå­¦é˜¶æ®µæˆ‘ä»¬å¯ä»¥å…ˆç†è§£è¿­ä»£å™¨ä¸ºæŒ‡é’ˆ</p><p>è¿­ä»£å™¨ç§ç±»ï¼š</p><table><thead><tr><th>ç§ç±»</th><th>åŠŸèƒ½</th><th>æ”¯æŒè¿ç®—</th></tr></thead><tbody><tr><td>è¾“å…¥è¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªè¯»è®¿é—®</td><td>åªè¯»ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>è¾“å‡ºè¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªå†™è®¿é—®</td><td>åªå†™ï¼Œæ”¯æŒ++</td></tr><tr><td>å‰å‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰æ¨è¿›è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>åŒå‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰å’Œå‘åæ“ä½œ</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ï¼Œ</td></tr><tr><td>éšæœºè®¿é—®è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¯ä»¥ä»¥è·³è·ƒçš„æ–¹å¼è®¿é—®ä»»æ„æ•°æ®ï¼ŒåŠŸèƒ½æœ€å¼ºçš„è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ã€[n]ã€-nã€&lt;ã€&lt;=ã€&gt;ã€&gt;=</td></tr></tbody></table><p>å¸¸ç”¨çš„å®¹å™¨ä¸­è¿­ä»£å™¨ç§ç±»ä¸ºåŒå‘è¿­ä»£å™¨ï¼Œå’Œéšæœºè®¿é—®è¿­ä»£å™¨</p><h3 id="2-5-å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†">2.5 å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†</h3><p>äº†è§£STLä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬åˆ©ç”¨ä»£ç æ„Ÿå—STLçš„é­…åŠ›</p><p>STLä¸­æœ€å¸¸ç”¨çš„å®¹å™¨ä¸ºVectorï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å‘è¿™ä¸ªå®¹å™¨ä¸­æ’å…¥æ•°æ®ã€å¹¶éå†è¿™ä¸ªå®¹å™¨</p><h4 id="2-5-1-vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹">2.5.1 vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</h4><p>å®¹å™¨ï¼š     <code>vector</code></p><p>ç®—æ³•ï¼š     <code>for_each</code></p><p>è¿­ä»£å™¨ï¼š <code>vector&lt;int&gt;::iterator</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºvectorå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šå®¹å™¨ä¸­å­˜æ”¾çš„æ•°æ®çš„ç±»å‹</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="comment">//å‘å®¹å™¨ä¸­æ”¾æ•°æ®</span></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ˜¯ç”¨æ¥éå†å®¹å™¨ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//v.begin()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment">//v.end()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨å…ƒç´ çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">//vector&lt;int&gt;::iterator æ‹¿åˆ°vector&lt;int&gt;è¿™ç§å®¹å™¨çš„è¿­ä»£å™¨ç±»å‹</span></span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pBegin = v.<span class="built_in">begin</span>();</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pEnd = v.<span class="built_in">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">while</span> (pBegin != pEnd) &#123;</span><br><span class="line">cout &lt;&lt; *pBegin &lt;&lt; endl;</span><br><span class="line">pBegin++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨STLæä¾›æ ‡å‡†éå†ç®—æ³•  å¤´æ–‡ä»¶ algorithm</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), MyPrint);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-2-Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹">2.5.2 Vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</h4><p>å­¦ä¹ ç›®æ ‡ï¼švectorä¸­å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¹¶æ‰“å°è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line">mName = name;</span><br><span class="line">mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string mName;</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å­˜æ”¾å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; (*it).mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it).mAge &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¾å¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person*&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person*&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">Person * p = (*it);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; p-&gt;mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it)-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-3-Vectorå®¹å™¨åµŒå¥—å®¹å™¨">2.5.3 Vectorå®¹å™¨åµŒå¥—å®¹å™¨</h4><p>å­¦ä¹ ç›®æ ‡ï¼šå®¹å™¨ä¸­åµŒå¥—å®¹å™¨ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ•°æ®è¿›è¡Œéå†è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®¹å™¨åµŒå¥—å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt; vector&lt;<span class="type">int</span>&gt; &gt;  v;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i + <span class="number">2</span>);</span><br><span class="line">v3.<span class="built_in">push_back</span>(i + <span class="number">3</span>);</span><br><span class="line">v4.<span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨å…ƒç´ æ’å…¥åˆ°vector vä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(v1);</span><br><span class="line">v.<span class="built_in">push_back</span>(v2);</span><br><span class="line">v.<span class="built_in">push_back</span>(v3);</span><br><span class="line">v.<span class="built_in">push_back</span>(v4);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator vit = (*it).<span class="built_in">begin</span>(); vit != (*it).<span class="built_in">end</span>(); vit++) &#123;</span><br><span class="line">cout &lt;&lt; *vit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-STL-å¸¸ç”¨å®¹å™¨">3 STL- å¸¸ç”¨å®¹å™¨</h2><h3 id="3-1-stringå®¹å™¨">3.1 stringå®¹å™¨</h3><h4 id="3-1-1-stringåŸºæœ¬æ¦‚å¿µ">3.1.1 stringåŸºæœ¬æ¦‚å¿µ</h4><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>stringæ˜¯C++é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œstringæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»</li></ul><p><strong>stringå’Œchar * åŒºåˆ«ï¼š</strong></p><ul><li>char * æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li><li>stringæ˜¯ä¸€ä¸ªç±»ï¼Œç±»å†…éƒ¨å°è£…äº†char*ï¼Œç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªchar*å‹çš„å®¹å™¨ã€‚</li></ul><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p>string ç±»å†…éƒ¨å°è£…äº†å¾ˆå¤šæˆå‘˜æ–¹æ³•</p><p>ä¾‹å¦‚ï¼šæŸ¥æ‰¾findï¼Œæ‹·è´copyï¼Œåˆ é™¤delete æ›¿æ¢replaceï¼Œæ’å…¥insert</p><p>stringç®¡ç†char*æ‰€åˆ†é…çš„å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒå¤åˆ¶è¶Šç•Œå’Œå–å€¼è¶Šç•Œç­‰ï¼Œç”±ç±»å†…éƒ¨è¿›è¡Œè´Ÿè´£</p><h4 id="3-1-2-stringæ„é€ å‡½æ•°">3.1.2 stringæ„é€ å‡½æ•°</h4><p>æ„é€ å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string();</code>          //åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² ä¾‹å¦‚: string str;<br><code>string(const char* s);</code>        //ä½¿ç”¨å­—ç¬¦ä¸²såˆå§‹åŒ–</li><li><code>string(const string&amp; str);</code>    //ä½¿ç”¨ä¸€ä¸ªstringå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªstringå¯¹è±¡</li><li><code>string(int n, char c);</code>           //ä½¿ç”¨nä¸ªå­—ç¬¦cåˆå§‹åŒ–</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//stringæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string s1; <span class="comment">//åˆ›å»ºç©ºå­—ç¬¦ä¸²ï¼Œè°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; s1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">s2</span><span class="params">(str)</span></span>; <span class="comment">//æŠŠc_stringè½¬æ¢æˆäº†string</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; s2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s3</span><span class="params">(s2)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s4</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-1-3-stringèµ‹å€¼æ“ä½œ">3.1.3 stringèµ‹å€¼æ“ä½œ</h4><p>åŠŸèƒ½æè¿°ï¼š</p><ul><li>ç»™stringå­—ç¬¦ä¸²è¿›è¡Œèµ‹å€¼</li></ul><p>èµ‹å€¼çš„å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string&amp; operator=(const char* s);</code>             //char*ç±»å‹å­—ç¬¦ä¸² èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(const string &amp;s);</code>         //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(char c);</code>                          //å­—ç¬¦èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s);</code>                  //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s, int n);</code>     //æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const string &amp;s);</code>              //æŠŠå­—ç¬¦ä¸²sèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li><li><code>string&amp; assign(int n, char c);</code>                  //ç”¨nä¸ªå­—ç¬¦cèµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1;</span><br><span class="line">str1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2;</span><br><span class="line">str2 = str1;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; str2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3;</span><br><span class="line">str3 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str4;</span><br><span class="line">str4.<span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str4 = &quot;</span> &lt;&lt; str4 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str5;</span><br><span class="line">str5.<span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>,<span class="number">5</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str5 = &quot;</span> &lt;&lt; str5 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string str6;</span><br><span class="line">str6.<span class="built_in">assign</span>(str5);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str6 = &quot;</span> &lt;&lt; str6 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str7;</span><br><span class="line">str7.<span class="built_in">assign</span>(<span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str7 = &quot;</span> &lt;&lt; str7 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹stringçš„èµ‹å€¼æ–¹å¼å¾ˆå¤šï¼Œ<code>operator=</code>  è¿™ç§æ–¹å¼æ˜¯æ¯”è¾ƒå®ç”¨çš„</p><h4 id="3-1-4-stringå­—ç¬¦ä¸²æ‹¼æ¥">3.1.4 stringå­—ç¬¦ä¸²æ‹¼æ¥</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°åœ¨å­—ç¬¦ä¸²æœ«å°¾æ‹¼æ¥å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; operator+=(const char* str);</code>                   //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const char c);</code>                         //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const string&amp; str);</code>                //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; append(const char *s); </code>                               //æŠŠå­—ç¬¦ä¸²sè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const char *s, int n);</code>                 //æŠŠå­—ç¬¦ä¸²sçš„å‰nä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const string &amp;s);</code>                           //åŒoperator+=(const string&amp; str)</li><li><code>string&amp; append(const string &amp;s, int pos, int n);</code>//å­—ç¬¦ä¸²sä¸­ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦è¿æ¥åˆ°å­—ç¬¦ä¸²ç»“å°¾</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1 = <span class="string">&quot;æˆ‘&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&quot;çˆ±ç©æ¸¸æˆ&quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2 = <span class="string">&quot;LOL DNF&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += str2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3 = <span class="string">&quot;I&quot;</span>;</span><br><span class="line">str3.<span class="built_in">append</span>(<span class="string">&quot; love &quot;</span>);</span><br><span class="line">str3.<span class="built_in">append</span>(<span class="string">&quot;game abcde&quot;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//str3.append(str2);</span></span><br><span class="line">str3.<span class="built_in">append</span>(str2, <span class="number">4</span>, <span class="number">3</span>); <span class="comment">// ä»ä¸‹æ ‡4ä½ç½®å¼€å§‹ ï¼Œæˆªå–3ä¸ªå­—ç¬¦ï¼Œæ‹¼æ¥åˆ°å­—ç¬¦ä¸²æœ«å°¾</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²æ‹¼æ¥çš„é‡è½½ç‰ˆæœ¬å¾ˆå¤šï¼Œåˆå­¦é˜¶æ®µè®°ä½å‡ ç§å³å¯</p><h4 id="3-1-5-stringæŸ¥æ‰¾å’Œæ›¿æ¢">3.1.5 stringæŸ¥æ‰¾å’Œæ›¿æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ï¼šæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨</li><li>æ›¿æ¢ï¼šåœ¨æŒ‡å®šçš„ä½ç½®æ›¿æ¢å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int find(const string&amp; str, int pos = 0) const;</code>              //æŸ¥æ‰¾strç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos = 0) const; </code>                     //æŸ¥æ‰¾sç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos, int n) const; </code>               //ä»posä½ç½®æŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡ä½ç½®</li><li><code>int find(const char c, int pos = 0) const; </code>                       //æŸ¥æ‰¾å­—ç¬¦cç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>int rfind(const string&amp; str, int pos = npos) const;</code>      //æŸ¥æ‰¾stræœ€åä¸€æ¬¡ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos = npos) const;</code>              //æŸ¥æ‰¾sæœ€åä¸€æ¬¡å‡ºç°ä½ç½®,ä»poså¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos, int n) const;</code>              //ä»posæŸ¥æ‰¾sçš„å‰nä¸ªå­—ç¬¦æœ€åä¸€æ¬¡ä½ç½®</li><li><code>int rfind(const char c, int pos = 0) const;  </code>                      //æŸ¥æ‰¾å­—ç¬¦cæœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>string&amp; replace(int pos, int n, const string&amp; str); </code>       //æ›¿æ¢ä»poså¼€å§‹nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²str</li><li><code>string&amp; replace(int pos, int n,const char* s); </code>                 //æ›¿æ¢ä»poså¼€å§‹çš„nä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸²s</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œæ›¿æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> pos = str1.<span class="built_in">find</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pos = str1.<span class="built_in">rfind</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ›¿æ¢</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line">str1.<span class="built_in">replace</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="string">&quot;1111&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>findæŸ¥æ‰¾æ˜¯ä»å·¦å¾€åï¼Œrfindä»å³å¾€å·¦</li><li>findæ‰¾åˆ°å­—ç¬¦ä¸²åè¿”å›æŸ¥æ‰¾çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</li><li>replaceåœ¨æ›¿æ¢æ—¶ï¼Œè¦æŒ‡å®šä»å“ªä¸ªä½ç½®èµ·ï¼Œå¤šå°‘ä¸ªå­—ç¬¦ï¼Œæ›¿æ¢æˆä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²</li></ul><h4 id="3-1-6-stringå­—ç¬¦ä¸²æ¯”è¾ƒ">3.1.6 stringå­—ç¬¦ä¸²æ¯”è¾ƒ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²ä¹‹é—´çš„æ¯”è¾ƒ</li></ul><p><strong>æ¯”è¾ƒæ–¹å¼ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—ç¬¦çš„ASCIIç è¿›è¡Œå¯¹æ¯”</li></ul><p>= è¿”å›   0</p><p>&gt; è¿”å›   1</p><p>&lt; è¿”å›  -1</p><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int compare(const string &amp;s) const; </code>  //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li><li><code>int compare(const char *s) const;</code>      //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string s1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">string s2 = <span class="string">&quot;aello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = s1.<span class="built_in">compare</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (ret == <span class="number">0</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 ç­‰äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (ret &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å¤§äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å°äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²å¯¹æ¯”ä¸»è¦æ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­è°å¤§è°å°çš„æ„ä¹‰å¹¶ä¸æ˜¯å¾ˆå¤§</p><h4 id="3-1-7-stringå­—ç¬¦å­˜å–">3.1.7 stringå­—ç¬¦å­˜å–</h4><p>stringä¸­å•ä¸ªå­—ç¬¦å­˜å–æ–¹å¼æœ‰ä¸¤ç§</p><ul><li><code>char&amp; operator[](int n); </code>     //é€šè¿‡[]æ–¹å¼å–å­—ç¬¦</li><li><code>char&amp; at(int n);   </code>                    //é€šè¿‡atæ–¹æ³•è·å–å­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¿®æ”¹</span></span><br><span class="line">str[<span class="number">0</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">str.<span class="built_in">at</span>(<span class="number">1</span>) = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstringå­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦å­˜å–æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ©ç”¨ [ ] æˆ– at</p><h4 id="3-1-8-stringæ’å…¥å’Œåˆ é™¤">3.1.8 stringæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹stringå­—ç¬¦ä¸²è¿›è¡Œæ’å…¥å’Œåˆ é™¤å­—ç¬¦æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; insert(int pos, const char* s);  </code>                //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, const string&amp; str); </code>        //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, int n, char c);</code>                //åœ¨æŒ‡å®šä½ç½®æ’å…¥nä¸ªå­—ç¬¦c</li><li><code>string&amp; erase(int pos, int n = npos);</code>                    //åˆ é™¤ä»Poså¼€å§‹çš„nä¸ªå­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">str.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str.<span class="built_in">erase</span>(<span class="number">1</span>, <span class="number">3</span>);  <span class="comment">//ä»1å·ä½ç½®å¼€å§‹3ä¸ªå­—ç¬¦</span></span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æ’å…¥å’Œåˆ é™¤çš„èµ·å§‹ä¸‹æ ‡éƒ½æ˜¯ä»0å¼€å§‹</p><h4 id="3-1-9-stringå­ä¸²">3.1.9 stringå­ä¸²</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä»å­—ç¬¦ä¸²ä¸­è·å–æƒ³è¦çš„å­ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string substr(int pos = 0, int n = npos) const;</code>   //è¿”å›ç”±poså¼€å§‹çš„nä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ä¸²</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string str = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line">string subStr = str.<span class="built_in">substr</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;subStr = &quot;</span> &lt;&lt; subStr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string email = <span class="string">&quot;hello@sina.com&quot;</span>;</span><br><span class="line"><span class="type">int</span> pos = email.<span class="built_in">find</span>(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">string username = email.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;username: &quot;</span> &lt;&lt; username &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**çµæ´»çš„è¿ç”¨æ±‚å­ä¸²åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å®é™…å¼€å‘ä¸­è·å–æœ‰æ•ˆçš„ä¿¡æ¯</p><h3 id="3-2-vectorå®¹å™¨">3.2 vectorå®¹å™¨</h3><h4 id="3-2-1-vectoråŸºæœ¬æ¦‚å¿µ">3.2.1 vectoråŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>vectoræ•°æ®ç»“æ„å’Œ<strong>æ•°ç»„éå¸¸ç›¸ä¼¼</strong>ï¼Œä¹Ÿç§°ä¸º<strong>å•ç«¯æ•°ç»„</strong></li></ul><p><strong>vectorä¸æ™®é€šæ•°ç»„åŒºåˆ«ï¼š</strong></p><ul><li>ä¸åŒä¹‹å¤„åœ¨äºæ•°ç»„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œvectorå¯ä»¥<strong>åŠ¨æ€æ‰©å±•</strong></li></ul><p><strong>åŠ¨æ€æ‰©å±•ï¼š</strong></p><ul><li><strong>å¹¶ä¸æ˜¯åœ¨åŸç©ºé—´ä¹‹åç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†åŸæ•°æ®æ‹·è´æ–°ç©ºé—´ï¼Œé‡Šæ”¾åŸç©ºé—´</strong></li></ul><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002.jpg" alt="è¯´æ˜: 2015-11-10_151152"></p><ul><li>vectorå®¹å™¨çš„è¿­ä»£å™¨æ˜¯æ”¯æŒéšæœºè®¿é—®çš„è¿­ä»£å™¨</li></ul><h4 id="3-2-2-vectoræ„é€ å‡½æ•°">3.2.2 vectoræ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºvectorå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>vector&lt;T&gt; v; </code>                    //é‡‡ç”¨æ¨¡æ¿å®ç°ç±»å®ç°ï¼Œé»˜è®¤æ„é€ å‡½æ•°</li><li><code>vector(v.begin(), v.end());   </code>       //å°†v[begin(), end())åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(n, elem);</code>                            //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(const vector &amp;vec);</code>         //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(v1.begin(), v1.end())</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">10</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v4</span><span class="params">(v3)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**vectorçš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-2-3-vectorèµ‹å€¼æ“ä½œ">3.2.3 vectorèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™vectorå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>vector&amp; operator=(const vector &amp;vec);</code>//é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>       //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>        //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line">v2 = v1;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v3;</span><br><span class="line">v3.<span class="built_in">assign</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v4;</span><br><span class="line">v4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š vectorèµ‹å€¼æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨operator=ï¼Œæˆ–è€…assignéƒ½å¯ä»¥</p><h4 id="3-2-4-vectorå®¹é‡å’Œå¤§å°">3.2.4  vectorå®¹é‡å’Œå¤§å°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨çš„å®¹é‡å’Œå¤§å°æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>empty(); </code>                            //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>capacity();</code>                      //å®¹å™¨çš„å®¹é‡</p></li><li><p><code>size();</code>                              //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>resize(int num);</code>             //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹      //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(int num, elem);</code>  //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹              //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="keyword">if</span> (v1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å®¹é‡ = &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å¤§å° = &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å¤§ï¼Œé»˜è®¤ç”¨0å¡«å……æ–°ä½ç½®ï¼Œå¯ä»¥åˆ©ç”¨é‡è½½ç‰ˆæœ¬æ›¿æ¢é»˜è®¤å¡«å……</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">15</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å°ï¼Œè¶…å‡ºéƒ¨åˆ†å…ƒç´ è¢«åˆ é™¤</span></span><br><span class="line">v1.<span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º  â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°  â€” size</li><li>è¿”å›å®¹å™¨å®¹é‡  â€” capacity</li><li>é‡æ–°æŒ‡å®šå¤§å°  â€”  resize</li></ul><h4 id="3-2-5-vectoræ’å…¥å’Œåˆ é™¤">3.2.5 vectoræ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorå®¹å™¨è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>push_back(ele);</code>                                         //å°¾éƒ¨æ’å…¥å…ƒç´ ele</li><li><code>pop_back();</code>                                                //åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>insert(const_iterator pos, ele);</code>        //è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥å…ƒç´ ele</li><li><code>insert(const_iterator pos, int count,ele);</code>//è¿­ä»£å™¨æŒ‡å‘ä½ç½®posæ’å…¥countä¸ªå…ƒç´ ele</li><li><code>erase(const_iterator pos);</code>                     //åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ </li><li><code>erase(const_iterator start, const_iterator end);</code>//åˆ é™¤è¿­ä»£å™¨ä»startåˆ°endä¹‹é—´çš„å…ƒç´ </li><li><code>clear();</code>                                                        //åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v1.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">v1.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">2</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">v1.<span class="built_in">erase</span>(v1.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">v1.<span class="built_in">erase</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line">v1.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’  â€” push_back</li><li>å°¾åˆ   â€” pop_back</li><li>æ’å…¥  â€” insert    (ä½ç½®è¿­ä»£å™¨)</li><li>åˆ é™¤  â€” erase  ï¼ˆä½ç½®è¿­ä»£å™¨ï¼‰</li><li>æ¸…ç©º  â€”  clear</li></ul><h4 id="3-2-6-vectoræ•°æ®å­˜å–">3.2.6 vectoræ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹vectorä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>       //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v1.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v1.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v1.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–vectorå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-2-7-vectoräº’æ¢å®¹å™¨">3.2.7 vectoräº’æ¢å®¹å™¨</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°ä¸¤ä¸ªå®¹å™¨å†…å…ƒç´ è¿›è¡Œäº’æ¢</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>swap(vec);</code>  // å°†vecä¸æœ¬èº«çš„å…ƒç´ äº’æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">v2.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº’æ¢å®¹å™¨</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº’æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">v1.<span class="built_in">swap</span>(v2);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¶ç¼©å†…å­˜</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v).<span class="built_in">swap</span>(v); <span class="comment">//åŒ¿åå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šswapå¯ä»¥ä½¿ä¸¤ä¸ªå®¹å™¨äº’æ¢ï¼Œå¯ä»¥è¾¾åˆ°å®ç”¨çš„æ”¶ç¼©å†…å­˜æ•ˆæœ</p><h4 id="3-2-8-vectoré¢„ç•™ç©ºé—´">3.2.8 vectoré¢„ç•™ç©ºé—´</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‡å°‘vectoråœ¨åŠ¨æ€æ‰©å±•å®¹é‡æ—¶çš„æ‰©å±•æ¬¡æ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reserve(int len);</code>//å®¹å™¨é¢„ç•™lenä¸ªå…ƒç´ é•¿åº¦ï¼Œé¢„ç•™ä½ç½®ä¸åˆå§‹åŒ–ï¼Œå…ƒç´ ä¸å¯è®¿é—®ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¢„ç•™ç©ºé—´</span></span><br><span class="line">v.<span class="built_in">reserve</span>(<span class="number">100000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span>* p = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="keyword">if</span> (p != &amp;v[<span class="number">0</span>]) &#123;</span><br><span class="line">p = &amp;v[<span class="number">0</span>];</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num:&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥ä¸€å¼€å§‹åˆ©ç”¨reserveé¢„ç•™ç©ºé—´</p><h3 id="3-3-dequeå®¹å™¨">3.3 dequeå®¹å™¨</h3><h4 id="3-3-1-dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ">3.3.1 dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>åŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œ</li></ul><p><strong>dequeä¸vectoråŒºåˆ«ï¼š</strong></p><ul><li>vectorå¯¹äºå¤´éƒ¨çš„æ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½</li><li>dequeç›¸å¯¹è€Œè¨€ï¼Œå¯¹å¤´éƒ¨çš„æ’å…¥åˆ é™¤é€Ÿåº¦å›æ¯”vectorå¿«</li><li>vectorè®¿é—®å…ƒç´ æ—¶çš„é€Ÿåº¦ä¼šæ¯”dequeå¿«,è¿™å’Œä¸¤è€…å†…éƒ¨å®ç°æœ‰å…³</li></ul><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547547642923.jpg" alt="è¯´æ˜: 2015-11-19_204101"></p><p>dequeå†…éƒ¨å·¥ä½œåŸç†:</p><p>dequeå†…éƒ¨æœ‰ä¸ª<strong>ä¸­æ§å™¨</strong>ï¼Œç»´æŠ¤æ¯æ®µç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®æ•°æ®</p><p>ä¸­æ§å™¨ç»´æŠ¤çš„æ˜¯æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—ä½¿ç”¨dequeæ—¶åƒä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´</p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547547896341.jpg" alt="clip_image002-1547547896341"></p><ul><li>dequeå®¹å™¨çš„è¿­ä»£å™¨ä¹Ÿæ˜¯æ”¯æŒéšæœºè®¿é—®çš„</li></ul><h4 id="3-3-2-dequeæ„é€ å‡½æ•°">3.3.2 dequeæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>dequeå®¹å™¨æ„é€ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>deque&lt;T&gt;</code> deqT;                      //é»˜è®¤æ„é€ å½¢å¼</li><li><code>deque(beg, end);</code>                  //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(n, elem);</code>                    //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(const deque &amp;deq);</code>   //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dequeæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"><span class="function">deque&lt;<span class="type">int</span>&gt; <span class="title">d2</span><span class="params">(d1.begin(),d1.end())</span></span>;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;<span class="built_in">d3</span>(<span class="number">10</span>,<span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4 = d3;</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**dequeå®¹å™¨å’Œvectorå®¹å™¨çš„æ„é€ æ–¹å¼å‡ ä¹ä¸€è‡´ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-3-3-dequeèµ‹å€¼æ“ä½œ">3.3.3 dequeèµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™dequeå®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque&amp; operator=(const deque &amp;deq); </code>         //é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code>                                           //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code>                                             //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d2 = d1;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d3;</span><br><span class="line">d3.<span class="built_in">assign</span>(d1.<span class="built_in">begin</span>(), d1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4;</span><br><span class="line">d4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šdequeèµ‹å€¼æ“ä½œä¹Ÿä¸vectorç›¸åŒï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="3-3-4-dequeå¤§å°æ“ä½œ">3.3.4 dequeå¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹dequeå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque.empty();</code>                       //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>deque.size();</code>                         //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>deque.resize(num);</code>                //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                             //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™<strong>æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤</strong>ã€‚</p></li><li><p><code>deque.resize(num, elem);</code>     //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnum,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹                                                     //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d1.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> (d1.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç»Ÿè®¡å¤§å°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1çš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; d1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">d1.<span class="built_in">resize</span>(<span class="number">15</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">d1.<span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>dequeæ²¡æœ‰å®¹é‡çš„æ¦‚å¿µ</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-3-5-deque-æ’å…¥å’Œåˆ é™¤">3.3.5 deque æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘dequeå®¹å™¨ä¸­æ’å…¥å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p>ä¸¤ç«¯æ’å…¥æ“ä½œï¼š</p><ul><li><code>push_back(elem);</code>          //åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®</li><li><code>push_front(elem);</code>        //åœ¨å®¹å™¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</li><li><code>pop_back();</code>                   //åˆ é™¤å®¹å™¨æœ€åä¸€ä¸ªæ•°æ®</li><li><code>pop_front();</code>                 //åˆ é™¤å®¹å™¨ç¬¬ä¸€ä¸ªæ•°æ®</li></ul><p>æŒ‡å®šä½ç½®æ“ä½œï¼š</p><ul><li><p><code>insert(pos,elem);</code>         //åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>insert(pos,n,elem);</code>     //åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>insert(pos,beg,end);</code>    //åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>clear();</code>                           //æ¸…ç©ºå®¹å™¨çš„æ‰€æœ‰æ•°æ®</p></li><li><p><code>erase(beg,end);</code>             //åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>erase(pos);</code>                    //åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸¤ç«¯æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">2</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">d2.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), d2.<span class="built_in">begin</span>(), d2.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line">d.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test03</span>();</span><br><span class="line">    </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥å’Œåˆ é™¤æä¾›çš„ä½ç½®æ˜¯è¿­ä»£å™¨ï¼</li><li>å°¾æ’   â€”  push_back</li><li>å°¾åˆ    â€”  pop_back</li><li>å¤´æ’   â€”  push_front</li><li>å¤´åˆ    â€”  pop_front</li></ul><h4 id="3-3-6-deque-æ•°æ®å­˜å–">3.3.6 deque æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹deque ä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code>     //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code>      //è¿”å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code>            //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code>              //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;front:&quot;</span> &lt;&lt; d.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;back:&quot;</span> &lt;&lt; d.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å–dequeå®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œatä¹Ÿå¯ä»¥</li><li>frontè¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>backè¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-3-7-deque-æ’åº">3.3.7  deque æ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ©ç”¨ç®—æ³•å®ç°å¯¹dequeå®¹å™¨è¿›è¡Œæ’åº</li></ul><p><strong>ç®—æ³•ï¼š</strong></p><ul><li><code>sort(iterator beg, iterator end)</code>  //å¯¹begå’ŒendåŒºé—´å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šsortç®—æ³•éå¸¸å®ç”¨ï¼Œä½¿ç”¨æ—¶åŒ…å«å¤´æ–‡ä»¶ algorithmå³å¯</p><h3 id="3-4-æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†">3.4 æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†</h3><h4 id="3-4-1-æ¡ˆä¾‹æè¿°">3.4.1 æ¡ˆä¾‹æè¿°</h4><p>æœ‰5åé€‰æ‰‹ï¼šé€‰æ‰‹ABCDEï¼Œ10ä¸ªè¯„å§”åˆ†åˆ«å¯¹æ¯ä¸€åé€‰æ‰‹æ‰“åˆ†ï¼Œå»é™¤æœ€é«˜åˆ†ï¼Œå»é™¤è¯„å§”ä¸­æœ€ä½åˆ†ï¼Œå–å¹³å‡åˆ†ã€‚</p><h4 id="3-4-2-å®ç°æ­¥éª¤">3.4.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»ºäº”åé€‰æ‰‹ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¥æ¯ä¸€ä¸ªé€‰æ‰‹ï¼Œæ‰§è¡Œforå¾ªç¯ï¼Œå¯ä»¥æŠŠ10ä¸ªè¯„åˆ†æ‰“åˆ†å­˜åˆ°dequeå®¹å™¨ä¸­</li><li>sortç®—æ³•å¯¹dequeå®¹å™¨ä¸­åˆ†æ•°æ’åºï¼Œå»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</li><li>dequeå®¹å™¨éå†ä¸€éï¼Œç´¯åŠ æ€»åˆ†</li><li>è·å–å¹³å‡åˆ†</li></ol><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€‰æ‰‹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Score = score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name; <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Score;  <span class="comment">//å¹³å‡åˆ†</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createPerson</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">string name = <span class="string">&quot;é€‰æ‰‹&quot;</span>;</span><br><span class="line">name += nameSeed[i];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(name, score)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†åˆ›å»ºçš„personå¯¹è±¡ æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“åˆ†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†è¯„å§”çš„åˆ†æ•° æ”¾å…¥åˆ°dequeå®¹å™¨ä¸­</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> score = <span class="built_in">rand</span>() % <span class="number">41</span> + <span class="number">60</span>;  <span class="comment">// 60 ~ 100</span></span><br><span class="line">d.<span class="built_in">push_back</span>(score);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;é€‰æ‰‹ï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; æ‰“åˆ†ï¼š &quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//for (deque&lt;int&gt;::iterator dit = d.begin(); dit != d.end(); dit++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; *dit &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–å¹³å‡åˆ†</span></span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::iterator dit = d.<span class="built_in">begin</span>(); dit != d.<span class="built_in">end</span>(); dit++)</span><br><span class="line">&#123;</span><br><span class="line">sum += *dit; <span class="comment">//ç´¯åŠ æ¯ä¸ªè¯„å§”çš„åˆ†æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> avg = sum / d.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å¹³å‡åˆ† èµ‹å€¼ç»™é€‰æ‰‹èº«ä¸Š</span></span><br><span class="line">it-&gt;m_Score = avg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹³å‡åˆ†ï¼š &quot;</span> &lt;&lt; it-&gt;m_Score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éšæœºæ•°ç§å­</span></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»º5åé€‰æ‰‹</span></span><br><span class="line">vector&lt;Person&gt;v;  <span class="comment">//å­˜æ”¾é€‰æ‰‹å®¹å™¨</span></span><br><span class="line"><span class="built_in">createPerson</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Person&gt;::iterator it = v.begin(); it != v.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; (*it).m_Name &lt;&lt; &quot; åˆ†æ•°ï¼š &quot; &lt;&lt; (*it).m_Score &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç»™5åé€‰æ‰‹æ‰“åˆ†</span></span><br><span class="line"><span class="built_in">setScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ˜¾ç¤ºæœ€åå¾—åˆ†</span></span><br><span class="line"><span class="built_in">showScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> é€‰å–ä¸åŒçš„å®¹å™¨æ“ä½œæ•°æ®ï¼Œå¯ä»¥æå‡ä»£ç çš„æ•ˆç‡</p><h3 id="3-5-stackå®¹å™¨">3.5 stackå®¹å™¨</h3><h4 id="3-5-1-stack-åŸºæœ¬æ¦‚å¿µ">3.5.1 stack åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>stackæ˜¯ä¸€ç§</strong>å…ˆè¿›åå‡º</strong>(First In Last Out,FILO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‡ºå£</p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547604555425.jpg" alt="è¯´æ˜: 2015-11-15_195707"></p><p>æ ˆä¸­åªæœ‰é¡¶ç«¯çš„å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>æ ˆä¸­è¿›å…¥æ•°æ®ç§°ä¸º  â€” <strong>å…¥æ ˆ</strong>  <code>push</code></p><p>æ ˆä¸­å¼¹å‡ºæ•°æ®ç§°ä¸º  â€” <strong>å‡ºæ ˆ</strong>  <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„æ ˆï¼š</p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002.png" alt="img"></p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547605111510.jpg" alt="img"></p><h4 id="3-5-2-stack-å¸¸ç”¨æ¥å£">3.5.2 stack å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>stack&lt;T&gt; stk;</code>                                 //stacké‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œ stackå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>stack(const stack &amp;stk);</code>            //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>stack&amp; operator=(const stack &amp;stk);</code>           //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>      //å‘æ ˆé¡¶æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                //ä»æ ˆé¡¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>top(); </code>                //è¿”å›æ ˆé¡¶å…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆå®¹å™¨å¸¸ç”¨æ¥å£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ ˆå®¹å™¨ æ ˆå®¹å™¨å¿…é¡»ç¬¦åˆå…ˆè¿›åå‡º</span></span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘æ ˆä¸­æ·»åŠ å…ƒç´ ï¼Œå«åš å‹æ ˆ å…¥æ ˆ</span></span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">10</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">20</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆé¡¶å…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; s.<span class="built_in">top</span>() &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">s.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; s.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥æ ˆ   â€” push</li><li>å‡ºæ ˆ   â€” pop</li><li>è¿”å›æ ˆé¡¶   â€” top</li><li>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›æ ˆå¤§å°   â€” size</li></ul><h3 id="3-6-queue-å®¹å™¨">3.6 queue å®¹å™¨</h3><h4 id="3-6-1-queue-åŸºæœ¬æ¦‚å¿µ">3.6.1 queue åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>Queueæ˜¯ä¸€ç§</strong>å…ˆè¿›å…ˆå‡º</strong>(First In First Out,FIFO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡ºå£</p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547606475892.jpg" alt="è¯´æ˜: 2015-11-15_214429"></p><p>é˜Ÿåˆ—å®¹å™¨å…è®¸ä»ä¸€ç«¯æ–°å¢å…ƒç´ ï¼Œä»å¦ä¸€ç«¯ç§»é™¤å…ƒç´ </p><p>é˜Ÿåˆ—ä¸­åªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤é˜Ÿåˆ—ä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>é˜Ÿåˆ—ä¸­è¿›æ•°æ®ç§°ä¸º â€” <strong>å…¥é˜Ÿ</strong>    <code>push</code></p><p>é˜Ÿåˆ—ä¸­å‡ºæ•°æ®ç§°ä¸º â€” <strong>å‡ºé˜Ÿ</strong>    <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„é˜Ÿåˆ—ï¼š</p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/1547606785041.png" alt="1547606785041"></p><h4 id="3-6-2-queue-å¸¸ç”¨æ¥å£">3.6.2 queue å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼š<strong>æ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</strong></p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>queue&lt;T&gt; que;</code>                                 //queueé‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œqueueå¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>queue(const queue &amp;que);</code>            //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>queue&amp; operator=(const queue &amp;que);</code>           //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code>                             //å¾€é˜Ÿå°¾æ·»åŠ å…ƒç´ </li><li><code>pop();</code>                                      //ä»é˜Ÿå¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>back();</code>                                    //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>front(); </code>                                  //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code>            //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code>              //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">queue&lt;Person&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡†å¤‡æ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">900</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;æ²™åƒ§&quot;</span>, <span class="number">800</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´   å…¥é˜Ÿæ“ä½œ</span></span><br><span class="line">q.<span class="built_in">push</span>(p1);</span><br><span class="line">q.<span class="built_in">push</span>(p2);</span><br><span class="line">q.<span class="built_in">push</span>(p3);</span><br><span class="line">q.<span class="built_in">push</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜Ÿåˆ—ä¸æä¾›è¿­ä»£å™¨ï¼Œæ›´ä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line"><span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå¤´å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">front</span>().m_Name </span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span>&lt;&lt; q.<span class="built_in">front</span>().m_Age &lt;&lt; endl;</span><br><span class="line">        </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå°¾å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Name  </span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Age &lt;&lt; endl;</span><br><span class="line">        </span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">q.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; q.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥é˜Ÿ   â€” push</li><li>å‡ºé˜Ÿ   â€” pop</li><li>è¿”å›é˜Ÿå¤´å…ƒç´    â€” front</li><li>è¿”å›é˜Ÿå°¾å…ƒç´    â€” back</li><li>åˆ¤æ–­é˜Ÿæ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›é˜Ÿåˆ—å¤§å°   â€” size</li></ul><h3 id="3-7-listå®¹å™¨">3.7 listå®¹å™¨</h3><h4 id="3-7-1-liståŸºæœ¬æ¦‚å¿µ">3.7.1 liståŸºæœ¬æ¦‚å¿µ</h4><p>**åŠŸèƒ½ï¼š**å°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨</p><p><strong>é“¾è¡¨</strong>ï¼ˆlistï¼‰æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥å®ç°çš„</p><p>é“¾è¡¨çš„ç»„æˆï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—<strong>ç»“ç‚¹</strong>ç»„æˆ</p><p>ç»“ç‚¹çš„ç»„æˆï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„<strong>æ•°æ®åŸŸ</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„<strong>æŒ‡é’ˆåŸŸ</strong></p><p><strong>STLä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨</strong></p><p><img src="image/C++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B_Image/clip_image002-1547608564071.jpg" alt="è¯´æ˜: 2015-11-15_225145"></p><p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨listä¸­çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äº<strong>åŒå‘è¿­ä»£å™¨</strong></p><p>listçš„ä¼˜ç‚¹ï¼š</p><ul><li>é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º</li><li>é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </li></ul><p>listçš„ç¼ºç‚¹ï¼š</p><ul><li>é“¾è¡¨çµæ´»ï¼Œä½†æ˜¯ç©ºé—´(æŒ‡é’ˆåŸŸ) å’Œ æ—¶é—´ï¼ˆéå†ï¼‰é¢å¤–è€—è´¹è¾ƒå¤§</li></ul><p>Listæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œéƒ½ä¸ä¼šé€ æˆåŸæœ‰listè¿­ä»£å™¨çš„å¤±æ•ˆï¼Œè¿™åœ¨vectoræ˜¯ä¸æˆç«‹çš„ã€‚</p><p>æ€»ç»“ï¼šSTLä¸­<strong>Listå’Œvectoræ˜¯ä¸¤ä¸ªæœ€å¸¸è¢«ä½¿ç”¨çš„å®¹å™¨</strong>ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹</p><h4 id="3-7-2-listæ„é€ å‡½æ•°">3.7.2  listæ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»ºlistå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>list&lt;T&gt; lst;</code>                               //listé‡‡ç”¨é‡‡ç”¨æ¨¡æ¿ç±»å®ç°,å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼ï¼š</li><li><code>list(beg,end);</code>                           //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(n,elem);</code>                             //æ„é€ å‡½æ•°å°†nä¸ªelemæ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(const list &amp;lst);</code>            //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L2</span>(L1.<span class="built_in">begin</span>(),L1.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L3</span>(L2);</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L4</span>(<span class="number">10</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistæ„é€ æ–¹å¼åŒå…¶ä»–å‡ ä¸ªSTLå¸¸ç”¨å®¹å™¨ï¼Œç†Ÿç»ƒæŒæ¡å³å¯</p><h4 id="3-7-3-list-èµ‹å€¼å’Œäº¤æ¢">3.7.3 list èµ‹å€¼å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™listå®¹å™¨è¿›è¡Œèµ‹å€¼ï¼Œä»¥åŠäº¤æ¢listå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>assign(beg, end);</code>            //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>assign(n, elem);</code>              //å°†nä¸ªelemæ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>list&amp; operator=(const list &amp;lst);</code>         //é‡è½½ç­‰å·æ“ä½œç¬¦</li><li><code>swap(lst);</code>                         //å°†lstä¸æœ¬èº«çš„å…ƒç´ äº’æ¢ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼å’Œäº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L2 = L1;</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L3;</span><br><span class="line">L3.<span class="built_in">assign</span>(L2.<span class="built_in">begin</span>(), L2.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L4;</span><br><span class="line">L4.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L2.<span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">L1.<span class="built_in">swap</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlistèµ‹å€¼å’Œäº¤æ¢æ“ä½œèƒ½å¤Ÿçµæ´»è¿ç”¨å³å¯</p><h4 id="3-7-4-list-å¤§å°æ“ä½œ">3.7.4 list å¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>size(); </code>                             //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>empty(); </code>                           //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>resize(num);</code>                   //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹    //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(num, elem); </code>       //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸ºnumï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥elemå€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>//å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (L1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">L1.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">L1.<span class="built_in">resize</span>(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•°   â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•°   â€” resize</li></ul><h4 id="3-7-5-list-æ’å…¥å’Œåˆ é™¤">3.7.5 list æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨è¿›è¡Œæ•°æ®çš„æ’å…¥å’Œåˆ é™¤</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li>push_back(elem);//åœ¨å®¹å™¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_back();//åˆ é™¤å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </li><li>push_front(elem);//åœ¨å®¹å™¨å¼€å¤´æ’å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_front();//ä»å®¹å™¨å¼€å¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>insert(pos,elem);//åœ¨posä½ç½®æ’elemå…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</li><li>insert(pos,n,elem);//åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>insert(pos,beg,end);//åœ¨posä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>clear();//ç§»é™¤å®¹å™¨çš„æ‰€æœ‰æ•°æ®</li><li>erase(beg,end);//åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>erase(pos);//åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>remove(elem);//åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ä¸elemå€¼åŒ¹é…çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">L.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">L.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">insert</span>(++it, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">erase</span>(++it);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§»é™¤</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">L.<span class="built_in">remove</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ¸…ç©º</span></span><br><span class="line">L.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’   â€” push_back</li><li>å°¾åˆ    â€” pop_back</li><li>å¤´æ’   â€” push_front</li><li>å¤´åˆ    â€” pop_front</li><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>ç§»é™¤   â€” remove</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-7-6-list-æ•°æ®å­˜å–">3.7.6 list æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹listå®¹å™¨ä¸­æ•°æ®è¿›è¡Œå­˜å–</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>front();</code>        //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>back();</code>         //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L1.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1.at(0) &lt;&lt; endl;//é”™è¯¯ ä¸æ”¯æŒatè®¿é—®æ•°æ®</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1[0] &lt;&lt; endl; //é”™è¯¯  ä¸æ”¯æŒ[]æ–¹å¼è®¿é—®æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L1.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//listå®¹å™¨çš„è¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L1.<span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//it = it + 1;//é”™è¯¯ï¼Œä¸å¯ä»¥è·³è·ƒè®¿é—®ï¼Œå³ä½¿æ˜¯+1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>listå®¹å™¨ä¸­ä¸å¯ä»¥é€šè¿‡[]æˆ–è€…atæ–¹å¼è®¿é—®æ•°æ®</li><li>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´    â€” front</li><li>è¿”å›æœ€åä¸€ä¸ªå…ƒç´    â€” back</li></ul><h4 id="3-7-7-list-åè½¬å’Œæ’åº">3.7.7 list åè½¬å’Œæ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬ï¼Œä»¥åŠå°†å®¹å™¨ä¸­çš„æ•°æ®è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reverse();</code>   //åè½¬é“¾è¡¨</li><li><code>sort();</code>        //é“¾è¡¨æ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(<span class="type">int</span> val1 , <span class="type">int</span> val2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å’Œæ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">90</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">70</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å®¹å™¨çš„å…ƒç´ </span></span><br><span class="line">L.<span class="built_in">reverse</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line">L.<span class="built_in">sort</span>(); <span class="comment">//é»˜è®¤çš„æ’åºè§„åˆ™ ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">sort</span>(myCompare); <span class="comment">//æŒ‡å®šè§„åˆ™ï¼Œä»å¤§åˆ°å°</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åè½¬   â€” reverse</li><li>æ’åº   â€” sort ï¼ˆæˆå‘˜å‡½æ•°ï¼‰</li></ul><h4 id="3-7-8-æ’åºæ¡ˆä¾‹">3.7.8 æ’åºæ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼šå°†Personè‡ªå®šä¹‰æ•°æ®ç±»å‹è¿›è¡Œæ’åºï¼ŒPersonä¸­å±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜</p><p>æ’åºè§„åˆ™ï¼šæŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰ç…§èº«é«˜è¿›è¡Œé™åº</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age , <span class="type">int</span> height) &#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">m_Age = age;</span><br><span class="line">m_Height = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> m_Height;   <span class="comment">//èº«é«˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ComparePerson</span><span class="params">(Person&amp; p1, Person&amp; p2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (p1.m_Age == p2.m_Age) &#123;</span><br><span class="line"><span class="keyword">return</span> p1.m_Height  &gt; p2.m_Height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>  p1.m_Age &lt; p2.m_Age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;Person&gt; L;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span> , <span class="number">175</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">45</span> , <span class="number">180</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å­™æƒ&quot;</span>, <span class="number">40</span> , <span class="number">170</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">25</span> , <span class="number">190</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span> , <span class="number">160</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span> , <span class="number">200</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">push_back</span>(p1);</span><br><span class="line">L.<span class="built_in">push_back</span>(p2);</span><br><span class="line">L.<span class="built_in">push_back</span>(p3);</span><br><span class="line">L.<span class="built_in">push_back</span>(p4);</span><br><span class="line">L.<span class="built_in">push_back</span>(p5);</span><br><span class="line">L.<span class="built_in">push_back</span>(p6);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age </span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">L.<span class="built_in">sort</span>(ComparePerson); <span class="comment">//æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age </span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“å¦‚ä½•è¿›è¡Œæ’åº</p></li><li><p>é«˜çº§æ’åºåªæ˜¯åœ¨æ’åºè§„åˆ™ä¸Šå†è¿›è¡Œä¸€æ¬¡é€»è¾‘è§„åˆ™åˆ¶å®šï¼Œå¹¶ä¸å¤æ‚</p></li></ul><h3 id="3-8-set-multiset-å®¹å™¨">3.8 set/ multiset å®¹å™¨</h3><h4 id="3-8-1-setåŸºæœ¬æ¦‚å¿µ">3.8.1 setåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶è‡ªåŠ¨è¢«æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>set/multisetå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨<strong>äºŒå‰æ ‘</strong>å®ç°ã€‚</li></ul><p><strong>setå’ŒmultisetåŒºåˆ«</strong>ï¼š</p><ul><li>setä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li><li>multisetå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li></ul><h4 id="3-8-2-setæ„é€ å’Œèµ‹å€¼">3.8.2 setæ„é€ å’Œèµ‹å€¼</h4><p>åŠŸèƒ½æè¿°ï¼šåˆ›å»ºsetå®¹å™¨ä»¥åŠèµ‹å€¼</p><p>æ„é€ ï¼š</p><ul><li><code>set&lt;T&gt; st;</code>                        //é»˜è®¤æ„é€ å‡½æ•°ï¼š</li><li><code>set(const set &amp;st);</code>       //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼ï¼š</p><ul><li><code>set&amp; operator=(const set &amp;st);</code>    //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å’Œèµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;<span class="built_in">s2</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;s3;</span><br><span class="line">s3 = s2;</span><br><span class="line"><span class="built_in">printSet</span>(s3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>setå®¹å™¨æ’å…¥æ•°æ®æ—¶ç”¨insert</li><li>setå®¹å™¨æ’å…¥æ•°æ®çš„æ•°æ®ä¼šè‡ªåŠ¨æ’åº</li></ul><h4 id="3-8-3-setå¤§å°å’Œäº¤æ¢">3.8.3 setå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡setå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢setå®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>size();</code>          //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s1.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; s1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s2;</span><br><span class="line"></span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">100</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">300</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">200</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">s1.<span class="built_in">swap</span>(s2);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-8-4-setæ’å…¥å’Œåˆ é™¤">3.8.4 setæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>setå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              //åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(elem);</code>            //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºelemçš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">s1.<span class="built_in">erase</span>(s1.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">s1.<span class="built_in">erase</span>(<span class="number">30</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line"><span class="comment">//s1.erase(s1.begin(), s1.end());</span></span><br><span class="line">s1.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-8-5-setæŸ¥æ‰¾å’Œç»Ÿè®¡">3.8.5 setæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹setå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  //æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›set.end();</li><li><code>count(key);</code>                //ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator pos = s1.<span class="built_in">find</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != s1.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  ï¼š &quot;</span> &lt;&lt; *pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = s1.<span class="built_in">count</span>(<span class="number">30</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºsetï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-8-6-setå’ŒmultisetåŒºåˆ«">3.8.6 setå’ŒmultisetåŒºåˆ«</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡setå’Œmultisetçš„åŒºåˆ«</li></ul><p><strong>åŒºåˆ«ï¼š</strong></p><ul><li>setä¸å¯ä»¥æ’å…¥é‡å¤æ•°æ®ï¼Œè€Œmultisetå¯ä»¥</li><li>setæ’å…¥æ•°æ®çš„åŒæ—¶ä¼šè¿”å›æ’å…¥ç»“æœï¼Œè¡¨ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸ</li><li>multisetä¸ä¼šæ£€æµ‹æ•°æ®ï¼Œå› æ­¤å¯ä»¥æ’å…¥é‡å¤æ•°æ®</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//setå’ŒmultisetåŒºåˆ«</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">pair&lt;set&lt;<span class="type">int</span>&gt;::iterator, <span class="type">bool</span>&gt;  ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//multiset</span></span><br><span class="line">multiset&lt;<span class="type">int</span>&gt; ms;</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (multiset&lt;<span class="type">int</span>&gt;::iterator it = ms.<span class="built_in">begin</span>(); it != ms.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å¦‚æœä¸å…è®¸æ’å…¥é‡å¤æ•°æ®å¯ä»¥åˆ©ç”¨set</li><li>å¦‚æœéœ€è¦æ’å…¥é‡å¤æ•°æ®åˆ©ç”¨multiset</li></ul><h4 id="3-8-7-pairå¯¹ç»„åˆ›å»º">3.8.7 pairå¯¹ç»„åˆ›å»º</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æˆå¯¹å‡ºç°çš„æ•°æ®ï¼Œåˆ©ç”¨å¯¹ç»„å¯ä»¥è¿”å›ä¸¤ä¸ªæ•°æ®</li></ul><p><strong>ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</strong></p><ul><li><code>pair&lt;type, type&gt; p ( value1, value2 );</code></li><li><code>pair&lt;type, type&gt; p = make_pair( value1, value2 );</code></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹ç»„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">pair&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(string(<span class="string">&quot;Tom&quot;</span>), <span class="number">20</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt;  p.first &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">pair&lt;string, <span class="type">int</span>&gt; p2 = <span class="built_in">make_pair</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p2.first &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p2.second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åˆ›å»ºå¯¹ç»„ï¼Œè®°ä½ä¸€ç§å³å¯</p><h4 id="3-8-8-setå®¹å™¨æ’åº">3.8.8 setå®¹å™¨æ’åº</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>setå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸ºä»å°åˆ°å¤§ï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p>ä¸»è¦æŠ€æœ¯ç‚¹ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ä¸€</strong>   setå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;    </span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s1.<span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s1.<span class="built_in">begin</span>(); it != s1.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šæ’åºè§„åˆ™</span></span><br><span class="line">set&lt;<span class="type">int</span>,MyCompare&gt; s2;</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>, MyCompare&gt;::iterator it = s2.<span class="built_in">begin</span>(); it != s2.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šsetå®¹å™¨çš„æ’åºè§„åˆ™</p><p><strong>ç¤ºä¾‹äºŒ</strong> setå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">comparePerson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person&amp; p1, <span class="type">const</span> Person &amp;p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº  é™åº</span></span><br><span class="line"><span class="keyword">return</span> p1.m_Age &gt; p2.m_Age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;Person, comparePerson&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">27</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">21</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">insert</span>(p1);</span><br><span class="line">s.<span class="built_in">insert</span>(p2);</span><br><span class="line">s.<span class="built_in">insert</span>(p3);</span><br><span class="line">s.<span class="built_in">insert</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œsetå¿…é¡»æŒ‡å®šæ’åºè§„åˆ™æ‰å¯ä»¥æ’å…¥æ•°æ®</p><h3 id="3-9-map-multimapå®¹å™¨">3.9 map/ multimapå®¹å™¨</h3><h4 id="3-9-1-mapåŸºæœ¬æ¦‚å¿µ">3.9.1 mapåŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>mapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯pair</li><li>pairä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºkeyï¼ˆé”®å€¼ï¼‰ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºvalueï¼ˆå®å€¼ï¼‰</li><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®å€¼è‡ªåŠ¨æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>map/multimapå±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å¯ä»¥æ ¹æ®keyå€¼å¿«é€Ÿæ‰¾åˆ°valueå€¼</li></ul><p>mapå’Œmultimap<strong>åŒºåˆ«</strong>ï¼š</p><ul><li>mapä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li><li>multimapå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </li></ul><h4 id="3-9-2-mapæ„é€ å’Œèµ‹å€¼">3.9.2  mapæ„é€ å’Œèµ‹å€¼</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡Œæ„é€ å’Œèµ‹å€¼æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p><strong>æ„é€ ï¼š</strong></p><ul><li><code>map&lt;T1, T2&gt; mp;</code>                     //mapé»˜è®¤æ„é€ å‡½æ•°:</li><li><code>map(const map &amp;mp);</code>             //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>èµ‹å€¼ï¼š</strong></p><ul><li><code>map&amp; operator=(const map &amp;mp);</code>    //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;m; <span class="comment">//é»˜è®¤æ„é€ </span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;<span class="built_in">m2</span>(m); <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m3;</span><br><span class="line">m3 = m2; <span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="built_in">printMap</span>(m3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šmapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œæ’å…¥æ•°æ®æ—¶å€™è¦ä½¿ç”¨å¯¹ç»„</p><h4 id="3-9-3-mapå¤§å°å’Œäº¤æ¢">3.9.3 mapå¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡mapå®¹å™¨å¤§å°ä»¥åŠäº¤æ¢mapå®¹å™¨</li></ul><p>å‡½æ•°åŸå‹ï¼š</p><ul><li><code>size();</code>          //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code>        //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code>      //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (m.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mçš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; m.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m2;</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">4</span>, <span class="number">100</span>));</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">5</span>, <span class="number">200</span>));</span><br><span class="line">m2.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">6</span>, <span class="number">300</span>));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">m.<span class="built_in">swap</span>(m2);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å°   â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º   â€” empty</li><li>äº¤æ¢å®¹å™¨   â€” swap</li></ul><h4 id="3-9-4-mapæ’å…¥å’Œåˆ é™¤">3.9.4 mapæ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>mapå®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code>           //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code>                    //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code>              //åˆ é™¤posè¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code>    //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(key);</code>            //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸ºkeyçš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::<span class="built_in">value_type</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="comment">//ç¬¬å››ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">40</span>; </span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">erase</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>(),m.<span class="built_in">end</span>());</span><br><span class="line">m.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>mapæ’å…¥æ–¹å¼å¾ˆå¤šï¼Œè®°ä½å…¶ä¸€å³å¯</li></ul><ul><li>æ’å…¥   â€” insert</li><li>åˆ é™¤   â€” erase</li><li>æ¸…ç©º   â€” clear</li></ul><h4 id="3-9-5-mapæŸ¥æ‰¾å’Œç»Ÿè®¡">3.9.5 mapæŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹mapå®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code>                  //æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å›set.end();</li><li><code>count(key);</code>                //ç»Ÿè®¡keyçš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m; </span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator pos = m.<span class="built_in">find</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != m.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  key = &quot;</span> &lt;&lt; (*pos).first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; (*pos).second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = m.<span class="built_in">count</span>(<span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾   â€”  find    ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡   â€”  count  ï¼ˆå¯¹äºmapï¼Œç»“æœä¸º0æˆ–è€…1ï¼‰</li></ul><h4 id="3-9-6-mapå®¹å™¨æ’åº">3.9.6 mapå®¹å™¨æ’åº</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>mapå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸º æŒ‰ç…§keyå€¼è¿›è¡Œ ä»å°åˆ°å¤§æ’åºï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ä¸»è¦æŠ€æœ¯ç‚¹:</strong></p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨ä»¿å‡½æ•°å®ç°ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">4</span>, <span class="number">40</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">5</span>, <span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key:&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value:&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®šmapå®¹å™¨çš„æ’åºè§„åˆ™</li><li>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œmapå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™,åŒsetå®¹å™¨</li></ul><h3 id="3-10-æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„">3.10 æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„</h3><h4 id="3-10-1-æ¡ˆä¾‹æè¿°">3.10.1 æ¡ˆä¾‹æè¿°</h4><ul><li>å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</li><li>å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</li><li>éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</li><li>é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ul><h4 id="3-10-2-å®ç°æ­¥éª¤">3.10.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»º10åå‘˜å·¥ï¼Œæ”¾åˆ°vectorä¸­</li><li>éå†vectorå®¹å™¨ï¼Œå–å‡ºæ¯ä¸ªå‘˜å·¥ï¼Œè¿›è¡Œéšæœºåˆ†ç»„</li><li>åˆ†ç»„åï¼Œå°†å‘˜å·¥éƒ¨é—¨ç¼–å·ä½œä¸ºkeyï¼Œå…·ä½“å‘˜å·¥ä½œä¸ºvalueï¼Œæ”¾å…¥åˆ°multimapå®¹å™¨ä¸­</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ol><p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">- å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</span></span><br><span class="line"><span class="comment">- å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</span></span><br><span class="line"><span class="comment">- éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</span></span><br><span class="line"><span class="comment">- é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</span></span><br><span class="line"><span class="comment">- åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CEHUA  0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEISHU 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> YANFA  2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Salary;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createWorker</span><span class="params">(vector&lt;Worker&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">Worker worker;</span><br><span class="line">worker.m_Name = <span class="string">&quot;å‘˜å·¥&quot;</span>;</span><br><span class="line">worker.m_Name += nameSeed[i];</span><br><span class="line"></span><br><span class="line">worker.m_Salary = <span class="built_in">rand</span>() % <span class="number">10000</span> + <span class="number">10000</span>; <span class="comment">// 10000 ~ 19999</span></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(worker);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘˜å·¥åˆ†ç»„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGroup</span><span class="params">(vector&lt;Worker&gt;&amp;v,multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Worker&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//äº§ç”Ÿéšæœºéƒ¨é—¨ç¼–å·</span></span><br><span class="line"><span class="type">int</span> deptId = <span class="built_in">rand</span>() % <span class="number">3</span>; <span class="comment">// 0 1 2 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ’å…¥åˆ°åˆ†ç»„ä¸­</span></span><br><span class="line"><span class="comment">//keyéƒ¨é—¨ç¼–å·ï¼Œvalueå…·ä½“å‘˜å·¥</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(deptId, *it));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showWorkerByGourp</span><span class="params">(multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 0  A  B  C   1  D  E   2  F G ...</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç­–åˆ’éƒ¨é—¨ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">multimap&lt;<span class="type">int</span>,Worker&gt;::iterator pos = m.<span class="built_in">find</span>(CEHUA);</span><br><span class="line"><span class="type">int</span> count = m.<span class="built_in">count</span>(CEHUA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line"><span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++ , index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¾æœ¯éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(MEISHU);</span><br><span class="line">count = m.<span class="built_in">count</span>(MEISHU); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç ”å‘éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(YANFA);</span><br><span class="line">count = m.<span class="built_in">count</span>(YANFA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»ºå‘˜å·¥</span></span><br><span class="line">vector&lt;Worker&gt;vWorker;</span><br><span class="line"><span class="built_in">createWorker</span>(vWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‘˜å·¥åˆ†ç»„</span></span><br><span class="line">multimap&lt;<span class="type">int</span>, Worker&gt;mWorker;</span><br><span class="line"><span class="built_in">setGroup</span>(vWorker, mWorker);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€åˆ†ç»„æ˜¾ç¤ºå‘˜å·¥</span></span><br><span class="line"><span class="built_in">showWorkerByGourp</span>(mWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">////æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Worker&gt;::iterator it = vWorker.begin(); it != vWorker.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; å·¥èµ„ï¼š &quot; &lt;&lt; it-&gt;m_Salary &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å½“æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘ç”¨map æˆ– multimap</li></ul><h2 id="4-STL-å‡½æ•°å¯¹è±¡">4 STL- å‡½æ•°å¯¹è±¡</h2><h3 id="4-1-å‡½æ•°å¯¹è±¡">4.1 å‡½æ•°å¯¹è±¡</h3><h4 id="4-1-1-å‡½æ•°å¯¹è±¡æ¦‚å¿µ">4.1.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>é‡è½½<strong>å‡½æ•°è°ƒç”¨æ“ä½œç¬¦</strong>çš„ç±»ï¼Œå…¶å¯¹è±¡å¸¸ç§°ä¸º<strong>å‡½æ•°å¯¹è±¡</strong></li><li><strong>å‡½æ•°å¯¹è±¡</strong>ä½¿ç”¨é‡è½½çš„()æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«<strong>ä»¿å‡½æ•°</strong></li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><p>å‡½æ•°å¯¹è±¡(ä»¿å‡½æ•°)æ˜¯ä¸€ä¸ª<strong>ç±»</strong>ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°</p><h4 id="4-1-2-å‡½æ•°å¯¹è±¡ä½¿ç”¨">4.1.2  å‡½æ•°å¯¹è±¡ä½¿ç”¨</h4><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</li><li>å‡½æ•°å¯¹è±¡è¶…å‡ºæ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</li><li>å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd myAdd;</span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd</span>(<span class="number">10</span>, <span class="number">10</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyPrint</span>()</span><br><span class="line">&#123;</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">count++; <span class="comment">//ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> count; <span class="comment">//å†…éƒ¨è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;myPrintè°ƒç”¨æ¬¡æ•°ä¸ºï¼š &quot;</span> &lt;&lt; myPrint.count &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doPrint</span><span class="params">(MyPrint &amp;mp , string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">mp</span>(test);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">doPrint</span>(myPrint, <span class="string">&quot;Hello C++&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><strong>ä»¿å‡½æ•°å†™æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</strong></li></ul><h3 id="4-2-è°“è¯">4.2  è°“è¯</h3><h4 id="4-2-1-è°“è¯æ¦‚å¿µ">4.2.1 è°“è¯æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>è¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ç§°ä¸º<strong>è°“è¯</strong></li><li>å¦‚æœoperator()æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšä¸€å…ƒè°“è¯</li><li>å¦‚æœoperator()æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšäºŒå…ƒè°“è¯</li></ul><h4 id="4-2-2-ä¸€å…ƒè°“è¯">4.2.2 ä¸€å…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä¸€å…ƒè°“è¯</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GreaterFive</span>&#123;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸€ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºä¸€å…ƒè°“è¯</p><h4 id="4-2-3-äºŒå…ƒè°“è¯">4.2.3 äºŒå…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="comment">//äºŒå…ƒè°“è¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> num1 &gt; num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°å¯¹è±¡æ”¹å˜ç®—æ³•ç­–ç•¥ï¼Œæ’åºä»å¤§åˆ°å°</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyCompare</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸¤ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºäºŒå…ƒè°“è¯</p><h3 id="4-3-å†…å»ºå‡½æ•°å¯¹è±¡">4.3 å†…å»ºå‡½æ•°å¯¹è±¡</h3><h4 id="4-3-1-å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰">4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>STLå†…å»ºäº†ä¸€äº›å‡½æ•°å¯¹è±¡</li></ul><p><strong>åˆ†ç±»:</strong></p><ul><li><p>ç®—æœ¯ä»¿å‡½æ•°</p></li><li><p>å…³ç³»ä»¿å‡½æ•°</p></li><li><p>é€»è¾‘ä»¿å‡½æ•°</p></li></ul><p><strong>ç”¨æ³•ï¼š</strong></p><ul><li>è¿™äº›ä»¿å‡½æ•°æ‰€äº§ç”Ÿçš„å¯¹è±¡ï¼Œç”¨æ³•å’Œä¸€èˆ¬å‡½æ•°å®Œå…¨ç›¸åŒ</li><li>ä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include&lt;functional&gt;</code></li></ul><h4 id="4-3-2-ç®—æœ¯ä»¿å‡½æ•°">4.3.2 ç®—æœ¯ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å››åˆ™è¿ç®—</li><li>å…¶ä¸­negateæ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä»–éƒ½æ˜¯äºŒå…ƒè¿ç®—</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; T plus&lt;T&gt;</code>                //åŠ æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T minus&lt;T&gt;</code>              //å‡æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code>    //ä¹˜æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T divides&lt;T&gt;</code>         //é™¤æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code>         //å–æ¨¡ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T negate&lt;T&gt;</code>           //å–åä»¿å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="comment">//negate</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">negate&lt;<span class="type">int</span>&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="built_in">n</span>(<span class="number">50</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//plus</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">plus&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">cout &lt;&lt; <span class="built_in">p</span>(<span class="number">10</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡æ—¶ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include &lt;functional&gt;</code></p><h4 id="4-3-3-å…³ç³»ä»¿å‡½æ•°">4.3.3 å…³ç³»ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å…³ç³»å¯¹æ¯”</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code>                    //ç­‰äº</li><li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code>            //ä¸ç­‰äº</li><li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code>                      //å¤§äº</li><li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code>          //å¤§äºç­‰äº</li><li><code>template&lt;class T&gt; bool less&lt;T&gt;</code>                           //å°äº</li><li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code>               //å°äºç­‰äº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå·±å®ç°ä»¿å‡½æ•°</span></span><br><span class="line"><span class="comment">//sort(v.begin(), v.end(), MyCompare());</span></span><br><span class="line"><span class="comment">//STLå†…å»ºä»¿å‡½æ•°  å¤§äºä»¿å‡½æ•°</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå…³ç³»ä»¿å‡½æ•°ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯greater&lt;&gt;å¤§äº</p><h4 id="4-3-4-é€»è¾‘ä»¿å‡½æ•°">4.3.4 é€»è¾‘ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°é€»è¾‘è¿ç®—</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code>              //é€»è¾‘ä¸</li><li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code>                //é€»è¾‘æˆ–</li><li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code>              //é€»è¾‘é</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v.<span class="built_in">begin</span>();it!= v.<span class="built_in">end</span>();it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€»è¾‘é  å°†vå®¹å™¨æ¬è¿åˆ°v2ä¸­ï¼Œå¹¶æ‰§è¡Œé€»è¾‘éè¿ç®—</span></span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v2;</span><br><span class="line">v2.<span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),  v2.<span class="built_in">begin</span>(), <span class="built_in">logical_not</span>&lt;<span class="type">bool</span>&gt;());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v2.<span class="built_in">begin</span>(); it != v2.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé€»è¾‘ä»¿å‡½æ•°å®é™…åº”ç”¨è¾ƒå°‘ï¼Œäº†è§£å³å¯</p><h2 id="5-STL-å¸¸ç”¨ç®—æ³•">5 STL- å¸¸ç”¨ç®—æ³•</h2><p><strong>æ¦‚è¿°</strong>:</p><ul><li><p>ç®—æ³•ä¸»è¦æ˜¯ç”±å¤´æ–‡ä»¶<code>&lt;algorithm&gt;</code> <code>&lt;functional&gt;</code> <code>&lt;numeric&gt;</code>ç»„æˆã€‚</p></li><li><p><code>&lt;algorithm&gt;</code>æ˜¯æ‰€æœ‰STLå¤´æ–‡ä»¶ä¸­æœ€å¤§çš„ä¸€ä¸ªï¼ŒèŒƒå›´æ¶‰åŠåˆ°æ¯”è¾ƒã€ äº¤æ¢ã€æŸ¥æ‰¾ã€éå†æ“ä½œã€å¤åˆ¶ã€ä¿®æ”¹ç­‰ç­‰</p></li><li><p><code>&lt;numeric&gt;</code>ä½“ç§¯å¾ˆå°ï¼ŒåªåŒ…æ‹¬å‡ ä¸ªåœ¨åºåˆ—ä¸Šé¢è¿›è¡Œç®€å•æ•°å­¦è¿ç®—çš„æ¨¡æ¿å‡½æ•°</p></li><li><p><code>&lt;functional&gt;</code>å®šä¹‰äº†ä¸€äº›æ¨¡æ¿ç±»,ç”¨ä»¥å£°æ˜å‡½æ•°å¯¹è±¡ã€‚</p></li></ul><h3 id="5-1-å¸¸ç”¨éå†ç®—æ³•">5.1 å¸¸ç”¨éå†ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„éå†ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>for_each</code>     //éå†å®¹å™¨</li><li><code>transform</code>   //æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><h4 id="5-1-1-for-each">5.1.1 for_each</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°éå†å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>for_each(iterator beg, iterator end, _func);  </code></p><p>// éå†ç®—æ³• éå†å®¹å™¨å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print01</span><span class="params">(<span class="type">int</span> val)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">print02</span> </span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for_eachç®—æ³•åŸºæœ¬ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) </span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†ç®—æ³•</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), print01);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">print02</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**for_eachåœ¨å®é™…å¼€å‘ä¸­æ˜¯æœ€å¸¸ç”¨éå†ç®—æ³•ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="5-1-2-transform">5.1.2 transform</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>transform(iterator beg1, iterator end1, iterator beg2, _func);</code></li></ul><p>//beg1 æºå®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//end1 æºå®¹å™¨ç»“æŸè¿­ä»£å™¨</p><p>//beg2 ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//_func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸ç”¨éå†ç®—æ³•  æ¬è¿ transform</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TransForm</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;vTarget; <span class="comment">//ç›®æ ‡å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v.<span class="built_in">size</span>()); <span class="comment">// ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ã€v.begin()åˆ°v.end()ä¹‹é—´çš„å…ƒç´ ç»è¿‡TransForm()ä»¿å‡½æ•°å¤„ç†åè¿”å›ï¼Œä¼ ç»™vTarget.begin()ã€‘</span></span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>(), <span class="built_in">TransForm</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), vTarget.<span class="built_in">end</span>(), <span class="built_in">MyPrint</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> æ¬è¿çš„ç›®æ ‡å®¹å™¨å¿…é¡»è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¬è¿</p><h3 id="5-2-å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•">5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•</h3><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡å¸¸ç”¨çš„æŸ¥æ‰¾ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>find</code>                     //æŸ¥æ‰¾å…ƒç´ </li><li><code>find_if</code>               //æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li><li><code>adjacent_find</code>    //æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li><li><code>binary_search</code>    //äºŒåˆ†æŸ¥æ‰¾æ³•</li><li><code>count</code>                   //ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li><li><code>count_if</code>             //æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><h4 id="5-2-1-find">5.2.1 find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨end()</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find(iterator beg, iterator end, value);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å®¹å™¨ä¸­æ˜¯å¦æœ‰ 5 è¿™ä¸ªå…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡è½½==</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Person&amp; p) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p2);</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š åˆ©ç”¨findå¯ä»¥åœ¨å®¹å™¨ä¸­æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯<strong>è¿­ä»£å™¨</strong></p><h4 id="5-2-2-find-if">5.2.2 find_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred å‡½æ•°æˆ–è€…è°“è¯ï¼ˆè¿”å›boolç±»å‹çš„ä»¿å‡½æ•°ï¼‰</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreaterFive</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å¤§äº5çš„æ•°å­—:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater20</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &gt; <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater20</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šfind_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ä½¿æŸ¥æ‰¾æ›´åŠ çµæ´»ï¼Œæä¾›çš„ä»¿å‡½æ•°å¯ä»¥æ”¹å˜ä¸åŒçš„ç­–ç•¥</p><h4 id="5-2-3-adjacent-find">5.2.3 adjacent_find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>adjacent_find(iterator beg, iterator end);  </code></p><p>// æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ,è¿”å›ç›¸é‚»å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">adjacent_find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾ä¸åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°ç›¸é‚»é‡å¤å…ƒç´ ä¸º:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé¢è¯•é¢˜ä¸­å¦‚æœå‡ºç°æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ï¼Œè®°å¾—ç”¨STLä¸­çš„adjacent_findç®—æ³•</p><h4 id="5-2-4-binary-search">5.2.4 binary_search</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>bool binary_search(iterator beg, iterator end, value);  </code></p><p>// æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼ŒæŸ¥åˆ° è¿”å›true  å¦åˆ™false</p><p>// æ³¨æ„: åœ¨<strong>æ— åºåºåˆ—ä¸­ä¸å¯ç”¨</strong></p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">binary_search</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æŸ¥æ‰¾çš„å®¹å™¨ä¸­å…ƒç´ å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-2-5-count">5.2.5 count</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count(iterator beg, iterator end, value);  </code></p><p>// ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value ç»Ÿè®¡çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line">    </span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;è¯¸è‘›äº®&quot;</span>,<span class="number">35</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> ç»Ÿè®¡è‡ªå®šä¹‰æ•°æ®ç±»å‹æ—¶å€™ï¼Œéœ€è¦é…åˆé‡è½½ <code>operator==</code></p><h4 id="5-2-6-count-if">5.2.6 count_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater4</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater4</span>());</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¤§äº4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AgeLess35</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &lt; <span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">AgeLess35</span>());</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°äº35å²çš„ä¸ªæ•°ï¼š&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æŒ‰å€¼ç»Ÿè®¡ç”¨countï¼ŒæŒ‰æ¡ä»¶ç»Ÿè®¡ç”¨count_if</p><h3 id="5-3-å¸¸ç”¨æ’åºç®—æ³•">5.3 å¸¸ç”¨æ’åºç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ’åºç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>sort</code>             //å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li><li><code>random_shuffle</code>   //æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li><li><code>merge </code>           // å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>reverse</code>       // åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </li></ul><h4 id="5-3-1-sort">5.3.1 sort</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>sort(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>//  beg    å¼€å§‹è¿­ä»£å™¨</p><p>//  end    ç»“æŸè¿­ä»£å™¨</p><p>// _Pred  è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//sorté»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**sortå±äºå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="5-3-2-random-shuffle">5.3.2 random_shuffle</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ´—ç‰Œ   æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>random_shuffle(iterator beg, iterator end);  </code></p><p>// æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“ä¹±é¡ºåº</span></span><br><span class="line"><span class="built_in">random_shuffle</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**random_shuffleæ´—ç‰Œç®—æ³•æ¯”è¾ƒå®ç”¨ï¼Œä½¿ç”¨æ—¶è®°å¾—åŠ éšæœºæ•°ç§å­</p><h4 id="5-3-3-merge">5.3.3 merge</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä¸¤ä¸ªå®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</p><p>// æ³¨æ„: ä¸¤ä¸ªå®¹å™¨å¿…é¡»æ˜¯<strong>æœ‰åºçš„</strong></p><p>// beg1   å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>// end1   å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>// beg2   å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>// end2   å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>// dest    ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span> ; i++) </span><br><span class="line">    &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vtarget;</span><br><span class="line"><span class="comment">//ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vtarget.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"><span class="comment">//åˆå¹¶  éœ€è¦ä¸¤ä¸ªæœ‰åºåºåˆ—</span></span><br><span class="line"><span class="built_in">merge</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vtarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vtarget.<span class="built_in">begin</span>(), vtarget.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**mergeåˆå¹¶çš„ä¸¤ä¸ªå®¹å™¨å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-3-4-reverse">5.3.4 reverse</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…å…ƒç´ è¿›è¡Œåè½¬</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>reverse(iterator beg, iterator end);  </code></p><p>// åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">reverse</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**reverseåè½¬åŒºé—´å†…å…ƒç´ ï¼Œé¢è¯•é¢˜å¯èƒ½æ¶‰åŠåˆ°</p><h3 id="5-4-å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•">5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ‹·è´å’Œæ›¿æ¢ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>copy</code>                      // å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>replace</code>                // å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li><li><code>replace_if </code>          // å®¹å™¨å†…æŒ‡å®šèŒƒå›´æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ›¿æ¢ä¸ºæ–°å…ƒç´ </li><li><code>swap</code>                     // äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><h4 id="5-4-1-copy">5.4.1 copy</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>copy(iterator beg, iterator end, iterator dest);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg  å¼€å§‹è¿­ä»£å™¨</p><p>// end  ç»“æŸè¿­ä»£å™¨</p><p>// dest ç›®æ ‡èµ·å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">v2.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">copy</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨copyç®—æ³•åœ¨æ‹·è´æ—¶ï¼Œç›®æ ‡å®¹å™¨è®°å¾—æå‰å¼€è¾Ÿç©ºé—´</p><h4 id="5-4-2-replace">5.4.2 replace</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace(iterator beg, iterator end, oldvalue, newvalue);  </code></p><p>// å°†åŒºé—´å†…æ—§å…ƒç´  æ›¿æ¢æˆ æ–°å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// oldvalue æ—§å…ƒç´ </p><p>// newvalue æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­çš„20 æ›¿æ¢æˆ 2000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">20</span>,<span class="number">2000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replaceä¼šæ›¿æ¢åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </p><h4 id="5-4-3-replace-if">5.4.3 replace_if</h4><p><strong>åŠŸèƒ½æè¿°:</strong></p><ul><li>å°†åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œæ›¿æ¢æˆæŒ‡å®šå…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace_if(iterator beg, iterator end, _pred, newvalue);  </code></p><p>// æŒ‰æ¡ä»¶æ›¿æ¢å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶çš„æ›¿æ¢æˆæŒ‡å®šå…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _pred è°“è¯</p><p>// newvalue æ›¿æ¢çš„æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReplaceGreater30</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­å¤§äºç­‰äºçš„30 æ›¿æ¢æˆ 3000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">ReplaceGreater30</span>(), <span class="number">3000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replace_ifæŒ‰æ¡ä»¶æŸ¥æ‰¾ï¼Œå¯ä»¥åˆ©ç”¨ä»¿å‡½æ•°çµæ´»ç­›é€‰æ»¡è¶³çš„æ¡ä»¶</p><h4 id="5-4-4-swap">5.4.4 swap</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>swap(container c1, container c2);  </code></p><p>// äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </p><p>// c1å®¹å™¨1</p><p>// c2å®¹å™¨2</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">swap</span>(v1, v2);</span><br><span class="line">for_each(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**swapäº¤æ¢å®¹å™¨æ—¶ï¼Œæ³¨æ„äº¤æ¢çš„å®¹å™¨è¦åŒç§ç±»å‹</p><h3 id="5-5-å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•">5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„ç®—æœ¯ç”Ÿæˆç®—æ³•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ç®—æœ¯ç”Ÿæˆç®—æ³•å±äºå°å‹ç®—æ³•ï¼Œä½¿ç”¨æ—¶åŒ…å«çš„å¤´æ–‡ä»¶ä¸º <code>#include &lt;numeric&gt;</code></li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>accumulate</code>      // è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p></li><li><p><code>fill</code>                 // å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ </p></li></ul><h4 id="5-5-1-accumulate">5.5.1 accumulate</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>è®¡ç®—åŒºé—´å†… å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>accumulate(iterator beg, iterator end, value);  </code></p><p>// è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value èµ·å§‹å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> total = <span class="built_in">accumulate</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;total = &quot;</span> &lt;&lt; total &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**accumulateä½¿ç”¨æ—¶å¤´æ–‡ä»¶æ³¨æ„æ˜¯ numericï¼Œè¿™ä¸ªç®—æ³•å¾ˆå®ç”¨</p><h4 id="5-5-2-fill">5.5.2 fill</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘å®¹å™¨ä¸­å¡«å……æŒ‡å®šçš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>fill(iterator beg, iterator end, value);  </code></p><p>// å‘å®¹å™¨ä¸­å¡«å……å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value å¡«å……çš„å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//å¡«å……</span></span><br><span class="line"><span class="built_in">fill</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨fillå¯ä»¥å°†å®¹å™¨åŒºé—´å†…å…ƒç´ å¡«å……ä¸º æŒ‡å®šçš„å€¼</p><h3 id="5-6-å¸¸ç”¨é›†åˆç®—æ³•">5.6 å¸¸ç”¨é›†åˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„é›†åˆç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>set_intersection</code>          // æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</p></li><li><p><code>set_union</code>                       // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å¹¶é›†</p></li><li><p><code>set_difference </code>              // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å·®é›†</p></li></ul><h4 id="5-6-1-set-intersection">5.6.1 set_intersection</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå°çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(<span class="built_in">min</span>(v1.<span class="built_in">size</span>(), v2.<span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_intersection</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚äº¤é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨ä¸­å–å°å€¼</strong></li><li>set_intersectionè¿”å›å€¼æ—¢æ˜¯äº¤é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-2-set-union">5.6.2 set_union</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªå®¹å™¨çš„å’Œç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v1.<span class="built_in">size</span>() + v2.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_union</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å¹¶é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦<strong>ä¸¤ä¸ªå®¹å™¨ç›¸åŠ </strong></li><li>set_unionè¿”å›å€¼æ—¢æ˜¯å¹¶é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-3-set-difference">5.6.3  set_difference</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨1å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨1ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨2å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨2ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">v2.<span class="built_in">push_back</span>(i+<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå¤§çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>( <span class="built_in">max</span>(v1.<span class="built_in">size</span>() , v2.<span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸v2çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd = </span><br><span class="line">        <span class="built_in">set_difference</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v2ä¸v1çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">itEnd = <span class="built_in">set_difference</span>(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å·®é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨å–è¾ƒå¤§å€¼</strong></li><li>set_differenceè¿”å›å€¼æ—¢æ˜¯å·®é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h1>STLå¸¸ç”¨å®¹å™¨</h1><h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>åœ¨STLï¼ˆæ ‡å‡†æ¨¡æ¿åº“ï¼‰ä¸­ï¼Œå¸¸ç”¨çš„å®¹å™¨æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p><code>vector</code>ï¼ˆå‘é‡ï¼‰ï¼šåŠ¨æ€æ•°ç»„ï¼Œæ”¯æŒå¿«é€Ÿçš„éšæœºè®¿é—®å’Œå°¾éƒ¨æ’å…¥/åˆ é™¤æ“ä½œã€‚</p></li><li><p><code>list</code>ï¼ˆé“¾è¡¨ï¼‰ï¼šåŒå‘é“¾è¡¨ï¼Œæ”¯æŒåœ¨ä»»æ„ä½ç½®é«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚</p></li><li><p><code>deque</code>ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ï¼šåŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒåœ¨ä¸¤ç«¯é«˜æ•ˆåœ°æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚</p></li><li><p><code>stack</code>ï¼ˆæ ˆï¼‰ï¼šåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œåªèƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p></li><li><p><code>queue</code>ï¼ˆé˜Ÿåˆ—ï¼‰ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œåªèƒ½åœ¨é˜Ÿåˆ—çš„å‰ç«¯è¿›è¡Œæ’å…¥ï¼Œåç«¯è¿›è¡Œåˆ é™¤æ“ä½œã€‚</p></li><li><p><code>priority_queue</code>ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼šåŸºäºå †çš„æ•°æ®ç»“æ„ï¼Œæ¯æ¬¡åˆ é™¤æ“ä½œéƒ½ä¼šåˆ é™¤æœ€å¤§æˆ–æœ€å°å…ƒç´ ã€‚</p></li><li><p><code>set</code>ï¼ˆé›†åˆï¼‰ï¼šæœ‰åºé›†åˆï¼Œä¸å…è®¸é‡å¤å…ƒç´ çš„å­˜åœ¨ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚</p></li><li><p><code>map</code>ï¼ˆæ˜ å°„ï¼‰ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œæ¯ä¸ªé”®å”¯ä¸€ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚</p></li><li><p><code>unordered_set</code>ï¼ˆæ— åºé›†åˆï¼‰ï¼šæ— åºé›†åˆï¼Œä¸å…è®¸é‡å¤å…ƒç´ çš„å­˜åœ¨ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚</p></li><li><p><code>unordered_map</code>ï¼ˆæ— åºæ˜ å°„ï¼‰ï¼šæ— åºçš„é”®å€¼å¯¹é›†åˆï¼Œæ¯ä¸ªé”®å”¯ä¸€ï¼Œæ”¯æŒé«˜æ•ˆçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚</p></li></ol><p>ä»¥ä¸Šæ˜¯STLä¸­çš„ä¸€äº›å¸¸ç”¨å®¹å™¨ï¼Œæ¯ç§å®¹å™¨éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œé€‚ç”¨åœºæ™¯ã€‚æ ¹æ®å…·ä½“çš„éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„å®¹å™¨å¯ä»¥æé«˜ä»£ç çš„æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="vector">vector</h2><p>ä¸‹é¢æ˜¯<code>std::vector</code>çš„å¸¸ç”¨æ–¹æ³•åˆ—è¡¨åŠå…¶ç®€è¦æè¿°ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push_back(value)</code></td><td>åœ¨å‘é‡æœ«å°¾æ’å…¥å…ƒç´ </td></tr><tr><td><code>pop_back()</code></td><td>åˆ é™¤å‘é‡æœ«å°¾çš„å…ƒç´ </td></tr><tr><td><code>insert(pos, value)</code></td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </td></tr><tr><td><code>erase(pos)</code></td><td>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºå‘é‡ä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td><code>size()</code></td><td>è¿”å›å‘é‡ä¸­å…ƒç´ çš„æ•°é‡</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥å‘é‡æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>at(index)</code></td><td>è®¿é—®æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ </td></tr><tr><td><code>front()</code></td><td>è¿”å›å‘é‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>back()</code></td><td>è¿”å›å‘é‡çš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>resize(newSize)</code></td><td>æ”¹å˜å‘é‡çš„å¤§å°</td></tr><tr><td><code>reserve(newCapacity)</code></td><td>æ”¹å˜å‘é‡çš„å®¹é‡</td></tr><tr><td><code>swap(otherVector)</code></td><td>äº¤æ¢ä¸¤ä¸ªå‘é‡çš„å†…å®¹</td></tr><tr><td><code>begin()</code></td><td>è¿”å›æŒ‡å‘å‘é‡èµ·å§‹ä½ç½®çš„è¿­ä»£å™¨</td></tr><tr><td><code>end()</code></td><td>è¿”å›æŒ‡å‘å‘é‡æœ«å°¾ä½ç½®çš„è¿­ä»£å™¨</td></tr><tr><td><code>rbegin()</code></td><td>è¿”å›æŒ‡å‘å‘é‡æœ«å°¾çš„é€†å‘è¿­ä»£å™¨</td></tr><tr><td><code>rend()</code></td><td>è¿”å›æŒ‡å‘å‘é‡èµ·å§‹ä½ç½®çš„é€†å‘è¿­ä»£å™¨</td></tr><tr><td><code>operator[]</code></td><td>è®¿é—®æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ </td></tr></tbody></table><p>ä¸‹é¢æ˜¯ä½¿ç”¨è¿™äº›æ–¹æ³•çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; numbers;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// push_back() æ’å…¥å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// insert() åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">insert</span>(numbers.<span class="built_in">begin</span>() + <span class="number">1</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// erase() åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">erase</span>(numbers.<span class="built_in">begin</span>() + <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// size() è·å–å…ƒç´ æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å…ƒç´ æ•°é‡ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ range-based for å¾ªç¯éå†å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ‰€æœ‰å…ƒç´ ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¿é—®å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">front</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// empty() æ£€æŸ¥æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (numbers.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;vectorä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;vectorä¸ä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ‰€æœ‰å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// empty() æ£€æŸ¥æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (numbers.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;vectorä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†<code>std::vector</code>çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•çš„ç”¨æ³•ï¼ŒåŒ…æ‹¬æ’å…¥</p><p>ã€åˆ é™¤ã€è®¿é—®ã€éå†ã€å¤§å°æ£€æŸ¥å’Œæ¸…ç©ºæ“ä½œã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œå‘é‡çš„æ“ä½œã€‚</p><h2 id="list">list</h2><p>ä¸‹é¢æ˜¯<code>std::list</code>çš„å¸¸ç”¨æ–¹æ³•åˆ—è¡¨åŠå…¶ç®€è¦æè¿°ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push_back(value)</code></td><td>åœ¨åˆ—è¡¨æœ«å°¾æ’å…¥å…ƒç´ </td></tr><tr><td><code>push_front(value)</code></td><td>åœ¨åˆ—è¡¨å¤´éƒ¨æ’å…¥å…ƒç´ </td></tr><tr><td><code>pop_back()</code></td><td>åˆ é™¤åˆ—è¡¨æœ«å°¾çš„å…ƒç´ </td></tr><tr><td><code>pop_front()</code></td><td>åˆ é™¤åˆ—è¡¨å¤´éƒ¨çš„å…ƒç´ </td></tr><tr><td><code>insert(pos, value)</code></td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </td></tr><tr><td><code>erase(pos)</code></td><td>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td><code>size()</code></td><td>è¿”å›åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°é‡</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>front()</code></td><td>è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>back()</code></td><td>è¿”å›åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>resize(newSize)</code></td><td>æ”¹å˜åˆ—è¡¨çš„å¤§å°</td></tr><tr><td><code>reverse()</code></td><td>åè½¬åˆ—è¡¨ä¸­çš„å…ƒç´ é¡ºåº</td></tr><tr><td><code>sort()</code></td><td>å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ’åº</td></tr><tr><td><code>splice(pos, other)</code></td><td>å°†å¦ä¸€ä¸ªåˆ—è¡¨çš„å…ƒç´ æ’å…¥åˆ°æŒ‡å®šä½ç½®</td></tr><tr><td><code>merge(other)</code></td><td>å°†å¦ä¸€ä¸ªå·²æ’åºçš„åˆ—è¡¨åˆå¹¶åˆ°å½“å‰åˆ—è¡¨ä¸­</td></tr><tr><td><code>unique()</code></td><td>ç§»é™¤åˆ—è¡¨ä¸­çš„è¿ç»­é‡å¤å…ƒç´ </td></tr><tr><td><code>remove(value)</code></td><td>ç§»é™¤åˆ—è¡¨ä¸­æ‰€æœ‰åŒ¹é…ç»™å®šå€¼çš„å…ƒç´ </td></tr><tr><td><code>begin()</code></td><td>è¿”å›æŒ‡å‘åˆ—è¡¨èµ·å§‹ä½ç½®çš„è¿­ä»£å™¨</td></tr><tr><td><code>end()</code></td><td>è¿”å›æŒ‡å‘åˆ—è¡¨æœ«å°¾ä½ç½®çš„è¿­ä»£å™¨</td></tr><tr><td><code>rbegin()</code></td><td>è¿”å›æŒ‡å‘åˆ—è¡¨æœ«å°¾çš„é€†å‘è¿­ä»£å™¨</td></tr><tr><td><code>rend()</code></td><td>è¿”å›æŒ‡å‘åˆ—è¡¨èµ·å§‹ä½ç½®çš„é€†å‘è¿­ä»£å™¨</td></tr><tr><td><code>iterator</code></td><td>åŒå‘è¿­ä»£å™¨ï¼Œç”¨äºè®¿é—®å’Œæ“ä½œåˆ—è¡¨ä¸­çš„å…ƒç´ </td></tr></tbody></table><p>ä¸‹é¢æ˜¯ä½¿ç”¨è¿™äº›æ–¹æ³•çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::list&lt;<span class="type">int</span>&gt; numbers;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// push_back() æ’å…¥å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">    numbers.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// push_front() åœ¨å¤´éƒ¨æ’å…¥å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">push_front</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// insert() åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </span></span><br><span class="line">    <span class="keyword">auto</span> it = numbers.<span class="built_in">begin</span>();</span><br><span class="line">    std::<span class="built_in">advance</span>(it, <span class="number">2</span>);</span><br><span class="line">    numbers.<span class="built_in">insert</span>(it, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// erase() åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    it = numbers.<span class="built_in">begin</span>();</span><br><span class="line">    std::<span class="built_in">advance</span>(it, <span class="number">1</span>);</span><br><span class="line">    numbers.<span class="built_in">erase</span>(it);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// size() è·å–å…ƒç´ æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å…ƒç´ æ•°é‡ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ range-based for å¾ªç¯éå†å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æ‰€æœ‰å…ƒç´ ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : numbers) &#123;</span><br><span class="line">        std::cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¿é—®å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">front</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ï¼š&quot;</span> &lt;&lt; numbers.<span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// empty() æ£€æŸ¥æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (numbers.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;listä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;listä¸ä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ‰€æœ‰å…ƒç´ </span></span><br><span class="line">    numbers.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// empty() æ£€æŸ¥æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (numbers.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;listä¸ºç©º&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†<code>std::list</code>çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•çš„ç”¨æ³•ï¼ŒåŒ…æ‹¬æ’å…¥ã€åˆ é™¤ã€è®¿é—®ã€éå†ã€å¤§å°æ£€æŸ¥å’Œæ¸…ç©ºæ“ä½œã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œé“¾è¡¨çš„æ“ä½œã€‚</p><h2 id="deque">deque</h2><p>dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ˜¯C++æ ‡å‡†åº“ä¸­çš„å®¹å™¨ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥åœ¨ä¸¤ç«¯è¿›è¡Œé«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚dequeçš„åç§°æ˜¯&quot;double-ended queue&quot;çš„ç¼©å†™ï¼Œå®ƒå…è®¸åœ¨é˜Ÿåˆ—çš„å‰ç«¯å’Œåç«¯è¿›è¡Œå¸¸æ•°æ—¶é—´çš„æ“ä½œï¼Œå› æ­¤éå¸¸é€‚ç”¨äºéœ€è¦é¢‘ç¹åœ¨ä¸¤ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„åœºæ™¯ã€‚</p><p>ä¸‹é¢æ˜¯å¸¸ç”¨çš„dequeæ–¹æ³•çš„å›¾è¡¨ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push_back()</code></td><td>åœ¨dequeçš„å°¾éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>push_front()</code></td><td>åœ¨dequeçš„å¤´éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>pop_back()</code></td><td>åˆ é™¤dequeçš„å°¾éƒ¨å…ƒç´ </td></tr><tr><td><code>pop_front()</code></td><td>åˆ é™¤dequeçš„å¤´éƒ¨å…ƒç´ </td></tr><tr><td><code>front()</code></td><td>è¿”å›dequeçš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>back()</code></td><td>è¿”å›dequeçš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>at()</code></td><td>è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ </td></tr><tr><td><code>size()</code></td><td>è¿”å›dequeä¸­å…ƒç´ çš„ä¸ªæ•°</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥dequeæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºdequeä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td><code>erase()</code></td><td>åˆ é™¤æŒ‡å®šä½ç½®æˆ–èŒƒå›´å†…çš„å…ƒç´ </td></tr><tr><td><code>insert()</code></td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </td></tr><tr><td><code>resize()</code></td><td>æ”¹å˜dequeçš„å¤§å°</td></tr><tr><td><code>swap()</code></td><td>äº¤æ¢ä¸¤ä¸ªdequeçš„å†…å®¹</td></tr><tr><td><code>begin()</code></td><td>è¿”å›æŒ‡å‘dequeç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</td></tr><tr><td><code>end()</code></td><td>è¿”å›æŒ‡å‘dequeæœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä½ç½®çš„è¿­ä»£å™¨</td></tr><tr><td><code>rbegin()</code></td><td>è¿”å›æŒ‡å‘é€†åºï¼ˆæœ«å°¾ï¼‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</td></tr><tr><td><code>rend()</code></td><td>è¿”å›æŒ‡å‘é€†åºï¼ˆæœ«å°¾ï¼‰çš„æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åä½ç½®çš„è¿­ä»£å™¨</td></tr></tbody></table><p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€ä½¿ç”¨dequeçš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::deque&lt;<span class="type">int</span>&gt; myDeque;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å…ƒç´ åˆ°dequeçš„å°¾éƒ¨</span></span><br><span class="line">    myDeque.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">    myDeque.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">    myDeque.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å…ƒç´ åˆ°dequeçš„å¤´éƒ¨</span></span><br><span class="line">    myDeque.<span class="built_in">push_front</span>(<span class="number">5</span>);</span><br><span class="line">    myDeque.<span class="built_in">push_front</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¿é—®dequeçš„å…ƒç´ </span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Front element: &quot;</span> &lt;&lt; myDeque.<span class="built_in">front</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Back element: &quot;</span> &lt;&lt; myDeque.<span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤dequeçš„å°¾éƒ¨å…ƒç´ </span></span><br><span class="line">    myDeque.<span class="built_in">pop_back</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤dequeçš„å¤´éƒ¨å…ƒç´ </span></span><br><span class="line">    myDeque.<span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨è¿­ä»£å™¨éå†deque</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Elements in deque:&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it = myDeque.<span class="built_in">begin</span>(); it != myDeque.<span class="built_in">end</span>(); ++it) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; *it;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥dequeæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myDeque.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Deque is empty.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Deque is not empty. Size: &quot;</span> &lt;&lt; myDeque.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºdeque</span></span><br><span class="line">    myDeque.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ¼”ç¤ºäº†dequeçš„åŸºæœ¬ç”¨æ³•ã€‚é€šè¿‡<code>push_back()</code>å’Œ<code>push_front()</code>æ–¹æ³•å¯ä»¥åœ¨dequeçš„å°¾éƒ¨å’Œå¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œé€šè¿‡<code>pop_back()</code>å’Œ<code>pop_front()</code>æ–¹æ³•å¯ä»¥åˆ é™¤å°¾éƒ¨å’Œå¤´éƒ¨çš„å…ƒç´ ã€‚<code>front()</code>å’Œ<code>back()</code>æ–¹æ³•åˆ†åˆ«è¿”å›dequeçš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚ä½¿ç”¨è¿­ä»£å™¨å¯ä»¥éå†dequeä¸­çš„å…ƒç´ ã€‚æœ€åï¼Œé€šè¿‡<code>empty()</code>æ–¹æ³•å¯ä»¥æ£€æŸ¥dequeæ˜¯å¦ä¸ºç©ºï¼Œé€šè¿‡<code>size()</code>æ–¹æ³•å¯ä»¥è·å–dequeä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚<code>clear()</code>æ–¹æ³•ç”¨äºæ¸…ç©ºdequeä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p><h2 id="stack">stack</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::stack</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºæ ˆæ•°æ®ç»“æ„ã€‚å®ƒæ˜¯åŸºäºä¸€ä¸ªåº•å±‚å®¹å™¨å®ç°çš„ï¼Œé€šå¸¸ä½¿ç”¨<code>std::deque</code> æˆ– <code>std::list</code> ä½œä¸ºé»˜è®¤å®¹å™¨ç±»å‹ã€‚æ ˆéµå¾ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„åŸåˆ™ï¼Œå³æœ€åæ’å…¥çš„å…ƒç´ æœ€å…ˆè¢«ç§»é™¤ã€‚</p><p>ä¸‹é¢æ˜¯<code>std::stack</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push(const T&amp; value)</code></td><td>åœ¨æ ˆé¡¶æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>pop()</code></td><td>ç§»é™¤æ ˆé¡¶å…ƒç´ </td></tr><tr><td><code>top()</code></td><td>è¿”å›æ ˆé¡¶å…ƒç´ çš„å¼•ç”¨</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›æ ˆä¸­å…ƒç´ çš„æ•°é‡</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::stack</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::stack&lt;<span class="type">int</span>&gt; myStack;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨æ ˆä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line">    myStack.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    myStack.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line">    myStack.<span class="built_in">push</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆé¡¶å…ƒç´ å¹¶æ‰“å°</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Top element: &quot;</span> &lt;&lt; myStack.<span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">    myStack.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myStack.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Stack is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Stack is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ ˆä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Stack size: &quot;</span> &lt;&lt; myStack.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Top</span> <span class="variable">element</span><span class="operator">:</span> <span class="number">3</span></span><br><span class="line"><span class="built_in">Stack</span> <span class="variable">is</span> <span class="variable">not</span> <span class="variable">empty</span></span><br><span class="line"><span class="built_in">Stack</span> <span class="variable">size</span><span class="operator">:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::stack</code> å¯¹è±¡ <code>myStack</code>ï¼Œå¹¶ä½¿ç”¨<code>push()</code> æ–¹æ³•å°†ä¸‰ä¸ªå…ƒç´ æ’å…¥æ ˆä¸­ã€‚ç„¶åï¼Œä½¿ç”¨<code>top()</code> æ–¹æ³•è·å–æ ˆé¡¶å…ƒç´ å¹¶æ‰“å°ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>pop()</code> æ–¹æ³•ç§»é™¤æ ˆé¡¶å…ƒç´ ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å–æ ˆä¸­å…ƒç´ çš„æ•°é‡ã€‚</p><h2 id="queue">queue</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::queue</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºé˜Ÿåˆ—æ•°æ®ç»“æ„ã€‚å®ƒæ˜¯åŸºäºä¸€ä¸ªåº•å±‚å®¹å™¨å®ç°çš„ï¼Œé€šå¸¸ä½¿ç”¨<code>std::deque</code> æˆ– <code>std::list</code> ä½œä¸ºé»˜è®¤å®¹å™¨ç±»å‹ã€‚é˜Ÿåˆ—éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™ï¼Œå³æœ€å…ˆæ’å…¥çš„å…ƒç´ æœ€å…ˆè¢«ç§»é™¤ã€‚</p><p>ä¸‹é¢æ˜¯<code>std::queue</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push(const T&amp; value)</code></td><td>åœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>pop()</code></td><td>ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </td></tr><tr><td><code>front()</code></td><td>è¿”å›é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ çš„å¼•ç”¨</td></tr><tr><td><code>back()</code></td><td>è¿”å›é˜Ÿåˆ—å°¾éƒ¨å…ƒç´ çš„å¼•ç”¨</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::queue</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::queue&lt;<span class="type">int</span>&gt; myQueue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨é˜Ÿåˆ—ä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line">    myQueue.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    myQueue.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line">    myQueue.<span class="built_in">push</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ å¹¶æ‰“å°</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Front element: &quot;</span> &lt;&lt; myQueue.<span class="built_in">front</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span></span><br><span class="line">    myQueue.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–é˜Ÿåˆ—å°¾éƒ¨å…ƒç´ å¹¶æ‰“å°</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Back element: &quot;</span> &lt;&lt; myQueue.<span class="built_in">back</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myQueue.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Queue is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Queue is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Queue size: &quot;</span> &lt;&lt; myQueue.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Front</span> element: <span class="number">1</span></span><br><span class="line"><span class="attribute">Back</span> element: <span class="number">3</span></span><br><span class="line"><span class="attribute">Queue</span> is not empty</span><br><span class="line"><span class="attribute">Queue</span> size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::queue</code> å¯¹è±¡ <code>myQueue</code>ï¼Œå¹¶ä½¿ç”¨<code>push()</code> æ–¹æ³•å°†ä¸‰ä¸ªå…ƒç´ æ’å…¥é˜Ÿåˆ—å°¾éƒ¨ã€‚ç„¶åï¼Œä½¿ç”¨<code>front()</code> æ–¹æ³•è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ å¹¶æ‰“å°ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>pop()</code> æ–¹æ³•ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>back()</code> æ–¹æ³•è·å–é˜Ÿåˆ—å°¾éƒ¨å…ƒç´ å¹¶æ‰“å°ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å–é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡ã€‚</p><h2 id="set">set</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::set</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºé›†åˆæ•°æ®ç»“æ„ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ‰åºé›†åˆï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ã€‚<code>std::set</code> ä½¿ç”¨çº¢é»‘æ ‘ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œç¡®ä¿å…ƒç´ çš„å¿«é€Ÿæ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚</p><p>ä¸‹é¢æ˜¯<code>std::set</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>insert(const T&amp; value)</code></td><td>åœ¨é›†åˆä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>erase(const T&amp; value)</code></td><td>ä»é›†åˆä¸­ç§»é™¤ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>find(const T&amp; value)</code></td><td>æŸ¥æ‰¾é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥é›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›é›†åˆä¸­å…ƒç´ çš„æ•°é‡</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºé›†åˆ</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::set</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::set&lt;<span class="type">int</span>&gt; mySet;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨é›†åˆä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾å…ƒç´ </span></span><br><span class="line">    <span class="type">int</span> target = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> it = mySet.<span class="built_in">find</span>(target);</span><br><span class="line">    <span class="keyword">if</span> (it != mySet.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; found in the set.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; not found in the set.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤å…ƒç´ </span></span><br><span class="line">    mySet.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥é›†åˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (mySet.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Set is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Set is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–é›†åˆä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Set size: &quot;</span> &lt;&lt; mySet.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºé›†åˆ</span></span><br><span class="line">    mySet.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> found <span class="keyword">in</span> the <span class="keyword">set</span>.</span><br><span class="line"><span class="keyword">Set</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">empty</span></span><br><span class="line"><span class="keyword">Set</span> size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::set</code> å¯¹è±¡ <code>mySet</code>ï¼Œå¹¶ä½¿ç”¨<code>insert()</code> æ–¹æ³•å°†ä¸‰ä¸ªå…ƒç´ æ’å…¥é›†åˆä¸­ã€‚ç„¶åï¼Œä½¿ç”¨<code>find()</code> æ–¹æ³•æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>erase()</code> æ–¹æ³•ä»é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥é›†åˆæ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å–é›†åˆä¸­å…ƒç´ çš„æ•°é‡ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>clear()</code> æ–¹æ³•æ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p><h2 id="map">map</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::map</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºé”®å€¼å¯¹çš„å…³è”å®¹å™¨ã€‚å®ƒæ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ç”±ä¸€ä¸ªé”®å’Œä¸€ä¸ªå€¼ç»„æˆã€‚<code>std::map</code> ä¸­çš„é”®æ˜¯å”¯ä¸€çš„ï¼Œä¸”æŒ‰ç…§é”®çš„æ’åºé¡ºåºè¿›è¡Œå­˜å‚¨ã€‚</p><p>ä¸‹é¢æ˜¯<code>std::map</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>insert(const std::pair&lt;Key, Value&gt;&amp; pair)</code></td><td>åœ¨ map ä¸­æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹</td></tr><tr><td><code>erase(const Key&amp; key)</code></td><td>ä» map ä¸­ç§»é™¤æŒ‡å®šé”®çš„é”®å€¼å¯¹</td></tr><tr><td><code>find(const Key&amp; key)</code></td><td>æŸ¥æ‰¾æŒ‡å®šé”®çš„é”®å€¼å¯¹</td></tr><tr><td><code>at(const Key&amp; key)</code></td><td>è¿”å›æŒ‡å®šé”®å¯¹åº”çš„å€¼</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥ map æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å› map ä¸­é”®å€¼å¯¹çš„æ•°é‡</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©º map</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::map</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::map&lt;<span class="type">int</span>, std::string&gt; myMap;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨ map ä¸­æ’å…¥é”®å€¼å¯¹</span></span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="string">&quot;John&quot;</span>));</span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="string">&quot;Bob&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾é”®å€¼å¯¹</span></span><br><span class="line">    <span class="type">int</span> targetKey = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> it = myMap.<span class="built_in">find</span>(targetKey);</span><br><span class="line">    <span class="keyword">if</span> (it != myMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value for key &quot;</span> &lt;&lt; targetKey &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Key &quot;</span> &lt;&lt; targetKey &lt;&lt; <span class="string">&quot; not found in the map.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤é”®å€¼å¯¹</span></span><br><span class="line">    myMap.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥ map æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myMap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Map is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Map is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å– map ä¸­é”®å€¼å¯¹çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Map size: &quot;</span> &lt;&lt; myMap.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©º map</span></span><br><span class="line">    myMap.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Value <span class="keyword">for</span><span class="built_in"> key</span> <span class="number">2</span>: Alice</span><br><span class="line">Map <span class="literal">is</span><span class="built_in"> not</span><span class="built_in"> empty</span></span><br><span class="line">Map size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::map</code> å¯¹è±¡ <code>myMap</code>ï¼Œå¹¶ä½¿ç”¨<code>insert()</code> æ–¹æ³•æ’å…¥ä¸‰ä¸ªé”®å€¼å¯¹ã€‚ç„¶åï¼Œä½¿ç”¨<code>find()</code> æ–¹æ³•æŸ¥æ‰¾æŒ‡å®šçš„é”®ï¼Œå¹¶è·å–ç›¸åº”çš„å€¼ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>erase()</code> æ–¹æ³•ä» map ä¸­ç§»é™¤æŒ‡å®šçš„é”®å€¼å¯¹ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥ map æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å– map ä¸­é”®å€¼å¯¹çš„æ•°é‡ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>clear()</code> æ–¹æ³•æ¸…ç©º map ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ã€‚</p><h2 id="priority-queue">priority_queue</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::priority_queue</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºä¼˜å…ˆé˜Ÿåˆ—æ•°æ®ç»“æ„ã€‚å®ƒæ˜¯åŸºäºä¸€ä¸ªåº•å±‚å®¹å™¨å®ç°çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨<code>std::vector</code> ä½œä¸ºå®¹å™¨ç±»å‹ã€‚ä¼˜å…ˆé˜Ÿåˆ—æ ¹æ®å…ƒç´ çš„ä¼˜å…ˆçº§è¿›è¡Œæ’åºï¼Œæ¯æ¬¡å¼¹å‡ºçš„å…ƒç´ éƒ½æ˜¯å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚</p><p>ä¸‹é¢æ˜¯<code>std::priority_queue</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>push(const T&amp; value)</code></td><td>å‘ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>pop()</code></td><td>ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­ç§»é™¤å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ </td></tr><tr><td><code>top()</code></td><td>è¿”å›å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ çš„å¼•ç”¨</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::priority_queue</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::priority_queue&lt;<span class="type">int</span>&gt; myPriorityQueue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line">    myPriorityQueue.<span class="built_in">push</span>(<span class="number">3</span>);</span><br><span class="line">    myPriorityQueue.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    myPriorityQueue.<span class="built_in">push</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ å¹¶æ‰“å°</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Top element: &quot;</span> &lt;&lt; myPriorityQueue.<span class="built_in">top</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ </span></span><br><span class="line">    myPriorityQueue.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myPriorityQueue.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Priority queue is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Priority queue is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Priority queue size: &quot;</span> &lt;&lt; myPriorityQueue.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Top element: <span class="number">3</span></span><br><span class="line">Priority queue is <span class="keyword">not</span> empty</span><br><span class="line">Priority queue size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::priority_queue</code> å¯¹è±¡ <code>myPriorityQueue</code>ï¼Œå¹¶ä½¿ç”¨<code>push()</code> æ–¹æ³•å‘ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ’å…¥ä¸‰ä¸ªå…ƒç´ ã€‚ç„¶åï¼Œä½¿ç”¨<code>top()</code> æ–¹æ³•è·å–å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ å¹¶æ‰“å°ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>pop()</code> æ–¹æ³•ç§»é™¤å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å–ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡ã€‚</p><h2 id="unordered-set">unordered_set</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::unordered_set</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºæ— åºé›†åˆæ•°æ®ç»“æ„ã€‚å®ƒåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œå¯ä»¥æä¾›å¿«é€Ÿçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚<code>std::unordered_set</code> ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œä¸”æ²¡æœ‰ç‰¹å®šçš„é¡ºåºã€‚</p><p>ä¸‹é¢æ˜¯<code>std::unordered_set</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>insert(const T&amp; value)</code></td><td>å‘æ— åºé›†åˆä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>erase(const T&amp; value)</code></td><td>ä»æ— åºé›†åˆä¸­ç§»é™¤ä¸€ä¸ªå…ƒç´ </td></tr><tr><td><code>find(const T&amp; value)</code></td><td>æŸ¥æ‰¾æ— åºé›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥æ— åºé›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›æ— åºé›†åˆä¸­å…ƒç´ çš„æ•°é‡</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºæ— åºé›†åˆ</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::unordered_set</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::unordered_set&lt;<span class="type">int</span>&gt; mySet;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘æ— åºé›†åˆä¸­æ’å…¥å…ƒç´ </span></span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">    mySet.<span class="built_in">insert</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾å…ƒç´ </span></span><br><span class="line">    <span class="type">int</span> target = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> it = mySet.<span class="built_in">find</span>(target);</span><br><span class="line">    <span class="keyword">if</span> (it != mySet.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; found in the set.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; target &lt;&lt; <span class="string">&quot; not found in the set.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤å…ƒç´ </span></span><br><span class="line">    mySet.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ— åºé›†åˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (mySet.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Set is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Set is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ— åºé›†åˆä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Set size: &quot;</span> &lt;&lt; mySet.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ— åºé›†åˆ</span></span><br><span class="line">    mySet.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> found <span class="keyword">in</span> the <span class="keyword">set</span>.</span><br><span class="line"><span class="keyword">Set</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">empty</span></span><br><span class="line"><span class="keyword">Set</span> size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::unordered_set</code> å¯¹è±¡ <code>mySet</code>ï¼Œå¹¶ä½¿ç”¨<code>insert()</code> æ–¹æ³•æ’å…¥ä¸‰ä¸ªå…ƒç´ ã€‚ç„¶åï¼Œä½¿ç”¨<code>find()</code> æ–¹æ³•æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>erase()</code> æ–¹æ³•ä»æ— åºé›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥æ— åºé›†åˆæ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨<code>size()</code> æ–¹æ³•è·å–æ— åºé›†åˆä¸­å…ƒç´ çš„æ•°é‡ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>clear()</code> æ–¹æ³•æ¸…ç©ºæ— åºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p><h2 id="unordered-map">unordered_map</h2><p>åœ¨C++ä¸­ï¼Œ<code>std::unordered_map</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºè¡¨ç¤ºæ— åºé”®å€¼å¯¹çš„å…³è”å®¹å™¨ã€‚å®ƒåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œå¯ä»¥æä¾›å¿«é€Ÿçš„æ’å…¥ã€æŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œã€‚<code>std::unordered_map</code> ä¸­çš„é”®æ˜¯å”¯ä¸€çš„ï¼Œä¸”æ²¡æœ‰ç‰¹å®šçš„é¡ºåºã€‚</p><p>ä¸‹é¢æ˜¯<code>std::unordered_map</code> çš„å¸¸ç”¨æ–¹æ³•çš„å›¾è¡¨ï¼Œä»¥åŠç”¨ä»£ç æ¼”ç¤ºçš„åŸºç¡€ä½¿ç”¨æ–¹å¼ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>insert(const std::pair&lt;Key, Value&gt;&amp; pair)</code></td><td>å‘æ— åºæ˜ å°„ä¸­æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹</td></tr><tr><td><code>erase(const Key&amp; key)</code></td><td>ä»æ— åºæ˜ å°„ä¸­ç§»é™¤æŒ‡å®šé”®çš„é”®å€¼å¯¹</td></tr><tr><td><code>find(const Key&amp; key)</code></td><td>æŸ¥æ‰¾æŒ‡å®šé”®çš„é”®å€¼å¯¹</td></tr><tr><td><code>at(const Key&amp; key)</code></td><td>è¿”å›æŒ‡å®šé”®å¯¹åº”çš„å€¼</td></tr><tr><td><code>empty()</code></td><td>æ£€æŸ¥æ— åºæ˜ å°„æ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>size()</code></td><td>è¿”å›æ— åºæ˜ å°„ä¸­é”®å€¼å¯¹çš„æ•°é‡</td></tr><tr><td><code>clear()</code></td><td>æ¸…ç©ºæ— åºæ˜ å°„</td></tr></tbody></table><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>std::unordered_map</code> è¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::unordered_map&lt;<span class="type">int</span>, std::string&gt; myMap;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘æ— åºæ˜ å°„ä¸­æ’å…¥é”®å€¼å¯¹</span></span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="string">&quot;John&quot;</span>));</span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="string">&quot;Alice&quot;</span>));</span><br><span class="line">    myMap.<span class="built_in">insert</span>(std::<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="string">&quot;Bob&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾é”®å€¼å¯¹</span></span><br><span class="line">    <span class="type">int</span> targetKey = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">auto</span> it = myMap.<span class="built_in">find</span>(targetKey);</span><br><span class="line">    <span class="keyword">if</span> (it != myMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Value for key &quot;</span> &lt;&lt; targetKey &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Key &quot;</span> &lt;&lt; targetKey &lt;&lt; <span class="string">&quot; not found in the map.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§»é™¤é”®å€¼å¯¹</span></span><br><span class="line">    myMap.<span class="built_in">erase</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ— åºæ˜ å°„æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (myMap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Map is empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Map is not empty&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ— åºæ˜ å°„ä¸­é”®å€¼å¯¹çš„æ•°é‡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Map size: &quot;</span> &lt;&lt; myMap.<span class="built_in">size</span>() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ— åºæ˜ å°„</span></span><br><span class="line">    myMap.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Value <span class="keyword">for</span><span class="built_in"> key</span> <span class="number">2</span>: Alice</span><br><span class="line">Map <span class="literal">is</span><span class="built_in"> not</span><span class="built_in"> empty</span></span><br><span class="line">Map size: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::unordered_map</code> å¯¹è±¡ <code>myMap</code>ï¼Œå¹¶ä½¿ç”¨<code>insert()</code> æ–¹æ³•æ’å…¥ä¸‰ä¸ªé”®å€¼å¯¹ã€‚ç„¶åï¼Œä½¿ç”¨<code>find()</code> æ–¹æ³•æŸ¥æ‰¾æŒ‡å®šçš„é”®ï¼Œå¹¶è·å–ç›¸åº”çš„å€¼ã€‚æ¥ç€ï¼Œä½¿ç”¨<code>erase()</code> æ–¹æ³•ä»æ— åºæ˜ å°„ä¸­ç§»é™¤æŒ‡å®šçš„é”®å€¼å¯¹ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨<code>empty()</code> æ–¹æ³•æ£€æŸ¥æ— åºæ˜ å°„æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ä½¿ç”¨</p><h1>å¤šçº¿ç¨‹</h1><p>å½“åœ¨C++ä¸­ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„<code>&lt;thread&gt;</code>å¤´æ–‡ä»¶å’Œç›¸å…³ç±»æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨å¤šçº¿ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿ç¨‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">threadFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello from thread!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºçº¿ç¨‹å¹¶å¯åŠ¨</span></span><br><span class="line">    <span class="function">std::thread <span class="title">t</span><span class="params">(threadFunction)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»çº¿ç¨‹æ‰§è¡Œå…¶ä»–ä»»åŠ¡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello from main thread!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    t.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåŒ…å«äº†<code>&lt;iostream&gt;</code>å’Œ<code>&lt;thread&gt;</code>å¤´æ–‡ä»¶ã€‚ç„¶åå®šä¹‰äº†ä¸€ä¸ªåä¸º<code>threadFunction</code>çš„å‡½æ•°ï¼Œè¿™å°†ä½œä¸ºæˆ‘ä»¬è¦åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°ã€‚å‡½æ•°ç®€å•åœ°è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚</p><p>åœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>std::thread</code>å¯¹è±¡<code>t</code>ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º<code>threadFunction</code>ã€‚ç„¶ååœ¨ä¸»çº¿ç¨‹ä¸­è¾“å‡ºå¦ä¸€æ¡æ¶ˆæ¯ã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨<code>join</code>å‡½æ•°ç­‰å¾…çº¿ç¨‹<code>t</code>ç»“æŸã€‚</p><p>è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä½ å°†çœ‹åˆ°è¾“å‡ºä¸­äº¤æ›¿å‡ºç°äº†æ¥è‡ªä¸»çº¿ç¨‹å’Œæ–°çº¿ç¨‹çš„æ¶ˆæ¯ï¼Œè¡¨ç¤ºä¸¤ä¸ªçº¿ç¨‹åœ¨åŒæ—¶æ‰§è¡Œã€‚</p><p>é™¤äº†åˆ›å»ºçº¿ç¨‹ï¼ŒC++æ ‡å‡†åº“è¿˜æä¾›äº†å…¶ä»–åŠŸèƒ½ï¼Œå¦‚äº’æ–¥é‡ï¼ˆ<code>std::mutex</code>ï¼‰ã€æ¡ä»¶å˜é‡ï¼ˆ<code>std::condition_variable</code>ï¼‰å’ŒåŸå­æ“ä½œï¼ˆ<code>std::atomic</code>ï¼‰ï¼Œä»¥æ”¯æŒå¤šçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹éœ€è¦ä»”ç»†å¤„ç†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œå…±äº«èµ„æºçš„è®¿é—®ï¼Œä»¥é¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®æŸåç­‰é—®é¢˜ã€‚ä½¿ç”¨é€‚å½“çš„åŒæ­¥æœºåˆ¶æ¥ä¿æŠ¤å…±äº«æ•°æ®æ˜¯è‡³å…³é‡è¦çš„ã€‚</p><p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†åœ¨C++ä¸­ä½¿ç”¨å¤šçº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µå’Œä»£ç ç»“æ„ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤šçº¿ç¨‹ç¼–ç¨‹å¯èƒ½ä¼šæ›´åŠ å¤æ‚ï¼Œéœ€è¦è€ƒè™‘å¹¶å‘è®¿é—®ã€çº¿ç¨‹å®‰å…¨æ€§å’Œæ€§èƒ½ç­‰å› ç´ ã€‚</p><h2 id="å¤šçº¿ç¨‹å’Œé”">å¤šçº¿ç¨‹å’Œé”</h2><p>åœ¨C++ä¸­ï¼Œçº¿ç¨‹å’Œé”æ˜¯ç”¨äºå®ç°å¹¶å‘ç¼–ç¨‹å’Œå¤šçº¿ç¨‹åŒæ­¥çš„é‡è¦å·¥å…·ã€‚C++æ ‡å‡†åº“æä¾›äº†<code>&lt;thread&gt;</code>å¤´æ–‡ä»¶å’Œ<code>&lt;mutex&gt;</code>å¤´æ–‡ä»¶æ¥æ”¯æŒçº¿ç¨‹å’Œé”çš„ä½¿ç”¨ã€‚</p><ol><li><p>çº¿ç¨‹ï¼ˆThreadï¼‰ï¼š</p><ul><li>åˆ›å»ºçº¿ç¨‹ï¼šä½¿ç”¨<code>std::thread</code>ç±»æ¥åˆ›å»ºæ–°çº¿ç¨‹ã€‚éœ€è¦æä¾›ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ä½œä¸ºçº¿ç¨‹çš„å…¥å£ç‚¹ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myThreadFunction</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// çº¿ç¨‹çš„å…·ä½“å®ç°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">myThread</span><span class="params">(myThreadFunction)</span></span>; <span class="comment">// åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    myThread.<span class="built_in">join</span>(); <span class="comment">// ç­‰å¾…çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨çº¿ç¨‹ï¼šé€šè¿‡åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶è°ƒç”¨å…¶<code>join()</code>å‡½æ•°æ¥å¯åŠ¨çº¿ç¨‹ã€‚<code>join()</code>å‡½æ•°å°†ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆã€‚</li><li>çº¿ç¨‹åŒæ­¥ï¼šåœ¨çº¿ç¨‹é—´è¿›è¡ŒåŒæ­¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨äº’æ–¥é‡å’Œæ¡ä»¶å˜é‡ç­‰æœºåˆ¶æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œæœ‰åºè®¿é—®å…±äº«æ•°æ®ã€‚</li></ul></li><li><p>äº’æ–¥é‡ï¼ˆMutexï¼‰ï¼š</p><ul><li>åˆ›å»ºäº’æ–¥é‡ï¼šä½¿ç”¨<code>std::mutex</code>ç±»æ¥åˆ›å»ºäº’æ–¥é‡å¯¹è±¡ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex myMutex; <span class="comment">// åˆ›å»ºäº’æ–¥é‡å¯¹è±¡</span></span><br></pre></td></tr></table></figure><ul><li>é”å®šäº’æ–¥é‡ï¼šé€šè¿‡è°ƒç”¨äº’æ–¥é‡å¯¹è±¡çš„<code>lock()</code>å‡½æ•°æ¥é”å®šäº’æ–¥é‡ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myMutex.<span class="built_in">lock</span>(); <span class="comment">// é”å®šäº’æ–¥é‡</span></span><br></pre></td></tr></table></figure><ul><li>è§£é”äº’æ–¥é‡ï¼šé€šè¿‡è°ƒç”¨äº’æ–¥é‡å¯¹è±¡çš„<code>unlock()</code>å‡½æ•°æ¥è§£é”äº’æ–¥é‡ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myMutex.<span class="built_in">unlock</span>(); <span class="comment">// è§£é”äº’æ–¥é‡</span></span><br></pre></td></tr></table></figure></li><li><p>æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ï¼š</p><ul><li>åˆ›å»ºæ¡ä»¶å˜é‡ï¼šä½¿ç”¨<code>std::condition_variable</code>ç±»æ¥åˆ›å»ºæ¡ä»¶å˜é‡å¯¹è±¡ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::condition_variable myConditionVariable; <span class="comment">// åˆ›å»ºæ¡ä»¶å˜é‡å¯¹è±¡</span></span><br></pre></td></tr></table></figure><ul><li>ç­‰å¾…æ¡ä»¶ï¼šé€šè¿‡è°ƒç”¨æ¡ä»¶å˜é‡å¯¹è±¡çš„<code>wait()</code>å‡½æ•°åœ¨æ¡ä»¶ä¸æ»¡è¶³æ—¶ç­‰å¾…ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(myMutex)</span></span>;</span><br><span class="line">myConditionVariable.<span class="built_in">wait</span>(lock, [] &#123; <span class="keyword">return</span> condition; &#125;); <span class="comment">// ç­‰å¾…æ¡ä»¶æ»¡è¶³</span></span><br></pre></td></tr></table></figure><ul><li>å”¤é†’ç­‰å¾…çº¿ç¨‹ï¼šé€šè¿‡è°ƒç”¨æ¡ä»¶å˜é‡å¯¹è±¡çš„<code>notify_one()</code>æˆ–<code>notify_all()</code>å‡½æ•°æ¥å”¤é†’ä¸€ä¸ªæˆ–æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myConditionVariable.<span class="built_in">notify_one</span>(); <span class="comment">// å”¤é†’ä¸€ä¸ªç­‰å¾…çº¿ç¨‹</span></span><br><span class="line">myConditionVariable.<span class="built_in">notify_all</span>(); <span class="comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span></span><br></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸Šæ˜¯çº¿ç¨‹å’Œé”åœ¨C++ä¸­çš„åŸºæœ¬ç”¨æ³•ç¤ºä¾‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçº¿ç¨‹ç¼–ç¨‹å’Œå¤šçº¿ç¨‹åŒæ­¥æ¶‰åŠåˆ°å¤æ‚çš„å¹¶å‘ç¼–ç¨‹æ¦‚å¿µå’ŒæŠ€æœ¯ï¼Œå¦‚æ­»é”ã€ç«æ€æ¡ä»¶ç­‰ã€‚ä¸ºäº†æ­£ç¡®ä¸”å®‰å…¨åœ°ä½¿ç”¨çº¿ç¨‹å’Œé”ï¼Œåœ¨</p><h2 id="äº’æ–¥é‡">äº’æ–¥é‡</h2><p>äº’æ–¥é‡ï¼ˆMutexï¼‰æ˜¯ä¸€ç§ç”¨äºçº¿ç¨‹åŒæ­¥çš„æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤å…±äº«èµ„æºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„äº’æ–¥è®¿é—®ã€‚äº’æ–¥é‡ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®è¢«ä¿æŠ¤çš„ä»£ç æ®µæˆ–å…±äº«æ•°æ®ï¼Œä»è€Œé¿å…äº†æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´çš„ç»“æœã€‚</p><p>åœ¨C++ä¸­ï¼Œä½¿ç”¨<code>std::mutex</code>ç±»æ¥åˆ›å»ºäº’æ–¥é‡å¯¹è±¡ï¼Œå¹¶é€šè¿‡å¯¹äº’æ–¥é‡çš„é”å®šå’Œè§£é”æ¥å®ç°çº¿ç¨‹é—´çš„åŒæ­¥ã€‚</p><p><strong>ä½¿ç”¨äº’æ–¥é‡æ¥ç»™æ–¹æ³•åŠ é”</strong></p><p>ä»¥ä¸‹æ˜¯äº’æ–¥é‡çš„åŸºæœ¬ç”¨æ³•ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx;  <span class="comment">// åˆ›å»ºäº’æ–¥é‡å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sharedResourceAccess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>; <span class="comment">// è‡ªåŠ¨é”å®šäº’æ–¥é‡ï¼Œå¹¶åœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨è§£é”</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œè¿›è¡Œå¯¹å…±äº«èµ„æºçš„è®¿é—®å’Œæ“ä½œ</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// è®¿é—®å…±äº«èµ„æºçš„ä»£ç </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº’æ–¥é‡ä¼šåœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨è§£é”ï¼Œå³ä½¿å‡ºç°å¼‚å¸¸ä¹Ÿèƒ½ä¿è¯è§£é”</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(sharedResourceAccess)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(sharedResourceAccess)</span></span>;</span><br><span class="line"></span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼ˆ<code>t1</code>å’Œ<code>t2</code>ï¼‰åŒæ—¶è®¿é—®<code>sharedResourceAccess()</code>å‡½æ•°ä¸­çš„å…±äº«èµ„æºã€‚ä¸ºäº†ä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®å…±äº«èµ„æºï¼Œä½¿ç”¨äº†<code>std::mutex</code>å¯¹è±¡<code>mtx</code>è¿›è¡Œäº’æ–¥è®¿é—®çš„æ§åˆ¶ã€‚</p><p>é€šè¿‡<code>std::lock_guard</code>ç±»æ¥é”å®šäº’æ–¥é‡<code>mtx</code>ï¼Œå®ƒä¼šåœ¨æ„é€ æ—¶é”å®šäº’æ–¥é‡ï¼Œåœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨è§£é”äº’æ–¥é‡ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å¾—äº’æ–¥é‡çš„é”ã€‚</p><p>äº’æ–¥é‡çš„ä½¿ç”¨æœ‰åŠ©äºé¿å…æ•°æ®ç«äº‰å’Œä¿æŠ¤å…±äº«èµ„æºçš„å®Œæ•´æ€§ã€‚å½“å¤šä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œé€šè¿‡å¯¹äº’æ–¥é‡çš„åŠ é”å’Œè§£é”ï¼Œå¯ä»¥ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®å…±äº«èµ„æºï¼Œä»è€Œé¿å…äº†ä¸ä¸€è‡´çš„ç»“æœå’Œç«æ€æ¡ä»¶ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº’æ–¥é‡åº”è¯¥è¢«åˆç†åœ°ä½¿ç”¨ï¼Œé¿å…è¿‡å¤šçš„é”å®šå’Œé•¿æ—¶é—´çš„å ç”¨ï¼Œä»¥å‡å°‘çº¿ç¨‹ä¹‹é—´çš„ç«äº‰å’Œæé«˜å¹¶å‘æ€§èƒ½ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„é¿å…æ­»é”çš„æƒ…å†µï¼Œå³å¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”å¯¼è‡´æ— æ³•ç»§ç»­æ‰§è¡Œçš„æƒ…å†µã€‚</p><h2 id="ä¸åŒæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡">ä¸åŒæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡</h2><p><strong>ä¾‹å¦‚ï¼šåœ¨å¯¹ä¸€ä¸ªæ•°è¿›è¡ŒåŠ å’Œå‡çš„ä¸¤ä¸ªæ–¹æ³•ä¸­ï¼Œä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡</strong></p><p>æ˜¯çš„ï¼Œå¯ä»¥åœ¨ä¸åŒæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡è¿›è¡ŒåŠ é”ã€‚</p><p>äº’æ–¥é‡å¯ä»¥åœ¨å¤šä¸ªæ–¹æ³•ï¼ˆå‡½æ•°ï¼‰ä¹‹é—´å…±äº«ï¼Œå¹¶ç”¨äºå®ç°è·¨æ–¹æ³•çš„çº¿ç¨‹åŒæ­¥ã€‚é€šè¿‡åœ¨å¤šä¸ªæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡ï¼Œå¯ä»¥ç¡®ä¿åœ¨ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®è¢«ä¿æŠ¤çš„å…±äº«èµ„æºã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†åœ¨ä¸åŒæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡è¿›è¡ŒåŠ é”çš„æƒ…å†µï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx; <span class="comment">// åˆ›å»ºäº’æ–¥é‡å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">method1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œéœ€è¦ä¿æŠ¤çš„ä»£ç </span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">method2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œéœ€è¦ä¿æŠ¤çš„ä»£ç </span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¤šä¸ªçº¿ç¨‹è°ƒç”¨ä¸åŒçš„æ–¹æ³•</span></span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(method1)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">t2</span><span class="params">(method2)</span></span>;</span><br><span class="line"></span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line">    t2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>method1()</code>å’Œ<code>method2()</code>æ–¹æ³•éƒ½ä½¿ç”¨äº†åŒä¸€ä¸ªäº’æ–¥é‡å¯¹è±¡<code>mtx</code>è¿›è¡ŒåŠ é”ã€‚æ— è®ºæ˜¯åœ¨<code>method1()</code>è¿˜æ˜¯<code>method2()</code>ä¸­ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–äº’æ–¥é‡çš„é”ï¼Œå¹¶æ‰§è¡Œéœ€è¦ä¿æŠ¤çš„ä»£ç å—ã€‚</p><p>é€šè¿‡åœ¨ä¸åŒæ–¹æ³•ä¸­ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡ï¼Œå¯ä»¥å®ç°ä¸åŒæ–¹æ³•ä¹‹é—´çš„çº¿ç¨‹åŒæ­¥ï¼Œä¿æŠ¤å…±äº«èµ„æºçš„è®¿é—®å®‰å…¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨åŒä¸€ä¸ªäº’æ–¥é‡è¿›è¡ŒåŠ é”æ—¶ï¼Œéœ€è¦æ³¨æ„é¿å…æ­»é”çš„æƒ…å†µã€‚æ­»é”å¯èƒ½å‘ç”Ÿåœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¾ªç¯ç­‰å¾…å¯¹æ–¹æ‰€æŒæœ‰çš„é”ã€‚å› æ­¤ï¼Œç¡®ä¿åœ¨ä¸åŒæ–¹æ³•ä¸­è·å–é”çš„é¡ºåºä¿æŒä¸€è‡´ï¼Œå¹¶é¿å…åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹è°ƒç”¨å¯èƒ½ä¼šå†æ¬¡è·å–åŒä¸€ä¸ªé”çš„æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©é¿å…æ­»é”çš„å‘ç”Ÿã€‚</p><h1>C++è¡¥å……</h1><h2 id="å‹å…ƒå‡½æ•°">å‹å…ƒå‡½æ•°</h2>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»C++çš„å†…å­˜ã€å¼•ç”¨ã€æ–‡ä»¶æ“ä½œã€æ¨¡æ¿ã€STLã€å¤šçº¿ç¨‹ç­‰æ ¸å¿ƒç¼–ç¨‹éƒ¨åˆ†</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Redis</title>
    <link href="https://momoao.github.io/posts/202308241944.html"/>
    <id>https://momoao.github.io/posts/202308241944.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:43:12.766Z</updated>
    
    <content type="html"><![CDATA[<h1>Redis</h1><p>Remote Dictionary Server</p><h1>GPT</h1><h2 id="åŸºç¡€æŒ‡ä»¤">åŸºç¡€æŒ‡ä»¤</h2><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼Œæ”¯æŒå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤é›†ï¼Œç”¨äºæ“ä½œå’Œç®¡ç†å­˜å‚¨åœ¨Redisä¸­çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›Redisçš„åŸºæœ¬æŒ‡ä»¤ï¼š</p><ol><li><p><strong>å­—ç¬¦ä¸²æ“ä½œ</strong>ï¼š</p><ul><li><code>SET key value</code>: è®¾ç½®æŒ‡å®šé”®çš„å€¼ã€‚</li><li><code>GET key</code>: è·å–æŒ‡å®šé”®çš„å€¼ã€‚</li><li><code>DEL key</code>: åˆ é™¤æŒ‡å®šé”®åŠå…¶å€¼ã€‚</li><li><code>EXISTS key</code>: æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ã€‚</li></ul></li><li><p><strong>å“ˆå¸Œè¡¨æ“ä½œ</strong>ï¼š</p><ul><li><code>HSET key field value</code>: è®¾ç½®æŒ‡å®šå“ˆå¸Œè¡¨ä¸­å­—æ®µçš„å€¼ã€‚</li><li><code>HGET key field</code>: è·å–æŒ‡å®šå“ˆå¸Œè¡¨ä¸­å­—æ®µçš„å€¼ã€‚</li><li><code>HDEL key field [field ...]</code>: åˆ é™¤æŒ‡å®šå“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</li><li><code>HGETALL key</code>: è·å–æŒ‡å®šå“ˆå¸Œè¡¨çš„æ‰€æœ‰å­—æ®µå’Œå€¼ã€‚</li></ul></li><li><p><strong>åˆ—è¡¨æ“ä½œ</strong>ï¼š</p><ul><li><code>LPUSH key value [value ...]</code>: å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å¤´éƒ¨ã€‚</li><li><code>RPUSH key value [value ...]</code>: å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨çš„å°¾éƒ¨ã€‚</li><li><code>LPOP key</code>: å¼¹å‡ºå¹¶è¿”å›åˆ—è¡¨çš„å¤´éƒ¨å…ƒç´ ã€‚</li><li><code>RPOP key</code>: å¼¹å‡ºå¹¶è¿”å›åˆ—è¡¨çš„å°¾éƒ¨å…ƒç´ ã€‚</li><li><code>LRANGE key start stop</code>: è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´çš„å…ƒç´ ã€‚</li></ul></li><li><p><strong>é›†åˆæ“ä½œ</strong>ï¼š</p><ul><li><code>SADD key member [member ...]</code>: å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°é›†åˆã€‚</li><li><code>SMEMBERS key</code>: è·å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li><li><code>SREM key member [member ...]</code>: ä»é›†åˆä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</li><li><code>SINTER key [key ...]</code>: è·å–å¤šä¸ªé›†åˆçš„äº¤é›†ã€‚</li></ul></li><li><p><strong>æœ‰åºé›†åˆæ“ä½œ</strong>ï¼š</p><ul><li><code>ZADD key score member [score member ...]</code>: å°†ä¸€ä¸ªæˆ–å¤šä¸ªå¸¦æœ‰åˆ†æ•°çš„å…ƒç´ æ·»åŠ åˆ°æœ‰åºé›†åˆã€‚</li><li><code>ZRANGE key start stop [WITHSCORES]</code>: è·å–æœ‰åºé›†åˆæŒ‡å®šèŒƒå›´çš„å…ƒç´ ã€‚</li><li><code>ZREM key member [member ...]</code>: ä»æœ‰åºé›†åˆä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</li><li><code>ZCOUNT key min max</code>: è·å–æœ‰åºé›†åˆæŒ‡å®šåˆ†æ•°èŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚</li></ul></li><li><p><strong>å…¶ä»–å¸¸ç”¨æŒ‡ä»¤</strong>ï¼š</p><ul><li><code>PING</code>: æ£€æµ‹RedisæœåŠ¡å™¨æ˜¯å¦è¿è¡Œã€‚</li><li><code>SELECT index</code>: åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“ã€‚</li><li><code>FLUSHDB</code>: æ¸…ç©ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰é”®ã€‚</li><li><code>FLUSHALL</code>: æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰é”®ã€‚</li></ul></li></ol><p>è¿™åªæ˜¯Redisæä¾›çš„ä¸€å°éƒ¨åˆ†åŸºæœ¬æŒ‡ä»¤ï¼ŒRedisè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é«˜çº§æŒ‡ä»¤å’ŒåŠŸèƒ½ï¼Œå¦‚äº‹åŠ¡ã€å‘å¸ƒè®¢é˜…ã€æŒä¹…åŒ–ã€è¿‡æœŸæ—¶é—´ç­‰ã€‚è¯·å‚è€ƒRediså®˜æ–¹æ–‡æ¡£æˆ–ç›¸å…³æ•™ç¨‹ä»¥äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œç”¨æ³•ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Redisçš„å®‰è£…å’Œä½¿ç”¨</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://momoao.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="https://momoao.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>QTé£æœºå¤§æˆ˜æºç </title>
    <link href="https://momoao.github.io/posts/202308241942.html"/>
    <id>https://momoao.github.io/posts/202308241942.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-25T12:43:05.626Z</updated>
    
    <content type="html"><![CDATA[<h1>QT é£æœºå¤§æˆ˜æºç </h1><h2 id="å¤´æ–‡ä»¶">å¤´æ–‡ä»¶</h2><h3 id="bomb-h">bomb.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> BOMB_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOMB_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bomb</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bomb</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°ä¿¡æ¯ï¼ˆæ’­æ”¾å›¾ç‰‡ä¸‹æ ‡ã€æ’­æ”¾é—´éš”ï¼‰</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">updateInfo</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ”¾çˆ†ç‚¸èµ„æºæ•°ç»„</span></span><br><span class="line">    QVector&lt;QPixmap&gt; m_pixArr;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çˆ†ç‚¸ä½ç½®</span></span><br><span class="line">    <span class="type">int</span> m_X;</span><br><span class="line">    <span class="type">int</span> m_Y;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çˆ†ç‚¸åˆ‡å›¾çš„æ—¶é—´é—´éš”</span></span><br><span class="line">    <span class="type">int</span> m_Recoder;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çˆ†ç‚¸æ—¶åŠ è½½çš„å›¾ç‰‡ä¸‹æ ‡</span></span><br><span class="line">    <span class="type">int</span> m_index;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºé—²çŠ¶æ€è®°å½•</span></span><br><span class="line">    <span class="type">bool</span> m_Free;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// BOMB_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="bullet-h">bullet.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> BULLET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BULLET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bullet</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Bullet</span>();</span><br><span class="line">    \</span><br><span class="line">    <span class="comment">//æ›´æ–°å­å¼¹åæ ‡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">updatePosition</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹çš„å›¾ç‰‡</span></span><br><span class="line">    QPixmap m_Bullet;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹çš„åæ ‡</span></span><br><span class="line">    <span class="type">int</span> m_X;</span><br><span class="line">    <span class="type">int</span> m_Y;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹çš„é€Ÿåº¦</span></span><br><span class="line">    <span class="type">int</span> m_Speed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹æ˜¯å¦é—²ç½®</span></span><br><span class="line">    <span class="type">bool</span> m_Free;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹çš„ç¢°æ’ä½“ç§¯</span></span><br><span class="line">    QRect m_Rect;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// BULLET_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="config-h">config.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CONFIG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CONFIG_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          æ¸¸æˆçª—å£  èµ„æºåŠ è½½          */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_WIDTH 512</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_HEIGHT 768</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_TITLE <span class="string">&quot;é£æœºå¤§æˆ˜ v1.0&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_RES_PATH <span class="string">&quot;PlaneWar/plane.rcc&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_ICON <span class="string">&quot;:/res/Hero1.png&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GAME_RATE 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          åœ°å›¾é…ç½®                   */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_PATH <span class="string">&quot;:/res/background.png&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_SCROLL_SPEED 2  <span class="comment">//åœ°å›¾æ»šåŠ¨é€Ÿåº¦</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          é£æœºé…ç½®                    */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HERO_PATH <span class="string">&quot;:/res/Hero1.png&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          å­å¼¹é…ç½®                */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BULLET_PATH <span class="string">&quot;:/res/bullet.png&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BULLET_SPEED 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BULLET_NUM 30   <span class="comment">//å­å¼¹æ•°é‡</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BULLET_INTERVAL 20  <span class="comment">//å­å¼¹å‘å°„é—´éš”ï¼Œå› ä¸ºç”»é¢é‡ç»˜é—´éš”æ˜¯10ï¼Œæ‰€ä»¥å­å¼¹å‘å°„é—´éš”æ¯10æ¯«ç§’+1ï¼ŒåŠ åˆ°20æ—¶å‘å°„å­å¼¹</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          æ•Œæœºç›¸å…³é…ç½®          */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENEMY_PATH <span class="string">&quot;:/res/airplane.png&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENEMY_SPEED 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENEMY_NUM 20</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENEMY_INTERVAL 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*          çˆ†ç‚¸é…ç½®                */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOMB_PATH <span class="string">&quot;:/res/airplane_ember%1&quot;</span>  <span class="comment">//%1æ˜¯å ä½ç¬¦ï¼Œå¯ä»¥ç”¨ QString(BOMB_PATH).arg(i)è¿›è¡Œè¡¥ä½</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOMB_NUM 20     <span class="comment">//çˆ†ç‚¸æ•°é‡ï¼ˆéœ€è¦ä½¿ç”¨è¿™ä¸ªçˆ†ç‚¸åŠ¨ç”»çš„æ•Œæœºæ•°é‡ï¼‰</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOMB_MAX 3      <span class="comment">//çˆ†ç‚¸åŠ¨ç”»ä¸€å…±å¤šå°‘å›¾ç‰‡å•Š</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BOMB_INTERVAL 20    <span class="comment">//çˆ†ç‚¸å›¾ç‰‡åˆ‡æ¢é—´éš”</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*           éŸ³æ•ˆé…ç½®           */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SOUND_BACKGROUD <span class="string">&quot;:/res/bk.wav&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SOUND_BOMB <span class="string">&quot;:/res/bit.wav&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CONFIG_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="enemyplane-h">enemyplane.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ENEMYPLANE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENEMYPLANE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QRect&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EnemyPlane</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">EnemyPlane</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°åæ ‡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">updatePosition</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//æ•Œæœºå›¾ç‰‡</span></span><br><span class="line">    QPixmap m_enemy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½ç½®</span></span><br><span class="line">    <span class="type">int</span> m_X;</span><br><span class="line">    <span class="type">int</span> m_Y;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºçš„çŸ©å½¢è¾¹æ¡†</span></span><br><span class="line">    QRect m_Rect;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çŠ¶æ€ï¼Œæ˜¯å¦é—²ç½®</span></span><br><span class="line">    <span class="type">bool</span> m_Free;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€Ÿåº¦</span></span><br><span class="line">    <span class="type">int</span> m_Speed;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// ENEMYPLANE_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="heroplane-h">heroplane.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> HEROPLANE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HEROPLANE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bullet.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroPlane</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">HeroPlane</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å°„å­å¼¹</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">shoot</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é‡ç½®é£æœºåæ ‡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setPosition</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//å­˜å‚¨è‹±é›„é£æœºå›¾ç‰‡</span></span><br><span class="line">    QPixmap m_Plane;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°„å‡»é—´éš”è®°å½•</span></span><br><span class="line">    <span class="type">int</span> m_recorder;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼¹å¤¹</span></span><br><span class="line">    Bullet m_Bullets[BULLET_NUM];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é£æœºçš„åæ ‡</span></span><br><span class="line">    <span class="type">int</span> m_X;</span><br><span class="line">    <span class="type">int</span> m_Y;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‹±é›„é£æœºç¢°æ’ç®±</span></span><br><span class="line">    QRect m_Rect;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// HEROPLANE_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="mainscene-h">mainscene.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINSCENE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINSCENE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Bullet.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;map.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;heroplane.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;enemyplane.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bomb.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainScene</span> : <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MainScene</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">MainScene</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">initScene</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯åŠ¨æ¸¸æˆ</span></span><br><span class="line">    <span class="comment">//æ›´æ–°æ¸¸æˆä¸­æ‰€æœ‰å…ƒç´ çš„åæ ‡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">playGame</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶åˆ°å±å¹•ä¸­        è¿™ä¸ªå‡½æ•°åç§°å¿…é¡»æ˜¯è¿™ä¸ªï¼Œä¸èƒ½æ”¹</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">paintEvent</span><span class="params">(QPaintEvent *)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°æ‰€æœ‰å…ƒç´ åæ ‡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">updatePosition</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é‡å†™é¼ æ ‡ç§»åŠ¨æ—¶é—´  å‡½æ•°åç§°ä¸èƒ½å˜</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mouseMoveEvent</span><span class="params">(QMouseEvent * event)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ°å›¾å¯¹è±¡</span></span><br><span class="line">    Map m_map;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é£æœºå¯¹è±¡</span></span><br><span class="line">    HeroPlane m_hero;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šæ—¶å™¨</span></span><br><span class="line">    QTimer m_Timer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºå‡ºåœº</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">enemyToScene</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºæ•°ç»„</span></span><br><span class="line">    EnemyPlane m_enemys[ENEMY_NUM];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºå‡ºåœºé—´éš”</span></span><br><span class="line">    <span class="type">int</span> m_recorder;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¢°æ’æ£€æµ‹</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">collisionDetection</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çˆ†ç‚¸æ•°ç»„</span></span><br><span class="line">    Bomb m_bombs[BOMB_NUM];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•ç”¨çš„å­å¼¹å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//Bullet temp_Bullet;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINSCENE_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="map-h">map.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAP_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;config.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Map</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ°å›¾æ»šåŠ¨è‡³åæ ‡è®¡ç®—</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mapPosition</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//åœ°å›¾å›¾ç‰‡å¯¹è±¡</span></span><br><span class="line">    QPixmap m_map1;</span><br><span class="line">    QPixmap m_map2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ°å›¾Yè½´åæ ‡</span></span><br><span class="line">    <span class="type">int</span> m_map1_posY;</span><br><span class="line">    <span class="type">int</span> m_map2_posY;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ°å›¾æ»šåŠ¨é€Ÿåº¦</span></span><br><span class="line">    <span class="type">int</span> m_scroll_speed;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAP_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æºæ–‡ä»¶">æºæ–‡ä»¶</h2><h3 id="bomb-cpp">bomb.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bomb.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Bomb::<span class="built_in">Bomb</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å°†æ‰€æœ‰çˆ†ç‚¸çš„pixmapæ”¾åœ¨å‘é‡ä¸­</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;BOMB_MAX;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        QString str= <span class="built_in">QString</span>(BOMB_PATH).<span class="built_in">arg</span>(i);</span><br><span class="line">        m_pixArr.<span class="built_in">push_back</span>(<span class="built_in">QPixmap</span>(str));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åæ ‡</span></span><br><span class="line">    m_X=<span class="number">0</span>;</span><br><span class="line">    m_Y=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºé—²çŠ¶æ€</span></span><br><span class="line">    m_Free=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“å‰æ’­æ”¾çš„å›¾ç‰‡ä¸‹æ ‡</span></span><br><span class="line">    m_index=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’­æ”¾çˆ†ç‚¸çš„é—´éš”</span></span><br><span class="line">    m_Recoder=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bomb::updateInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ç©ºé—²çŠ¶æ€ä¸‹çš„ç›´æ¥return</span></span><br><span class="line">    <span class="keyword">if</span>(m_Free)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_Recoder++;</span><br><span class="line">    <span class="keyword">if</span>(m_Recoder &lt; BOMB_INTERVAL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœçˆ†ç‚¸</span></span><br><span class="line">    m_Recoder=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ‡æ¢çˆ†ç‚¸æ’­æ”¾å›¾ç‰‡çš„ä¸‹æ ‡</span></span><br><span class="line">    m_index++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœçˆ†ç‚¸æ’­æ”¾å®Œæ¯•</span></span><br><span class="line">    <span class="keyword">if</span>(m_index &gt; BOMB_MAX<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_index=<span class="number">0</span>;</span><br><span class="line">        m_Free=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="bullet-cpp">bullet.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;bullet.h&quot;</span>9</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;heroplane.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">Bullet::<span class="built_in">Bullet</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åŠ è½½å­å¼¹èµ„æº</span></span><br><span class="line">    m_Bullet.<span class="built_in">load</span>(BULLET_PATH);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹çš„åæ ‡</span></span><br><span class="line">   <span class="comment">// m_X = ;</span></span><br><span class="line">    m_Y = <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹åˆå§‹æ˜¯é—²ç½®çš„</span></span><br><span class="line">    m_Free = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»é…ç½®æ–‡ä»¶åˆå§‹åŒ–å­å¼¹é€Ÿåº¦</span></span><br><span class="line">    m_Speed = BULLET_SPEED;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–ç¢°æ’ä½“ç§¯åæ ‡</span></span><br><span class="line">    m_Rect.<span class="built_in">setWidth</span>(m_Bullet.<span class="built_in">width</span>());</span><br><span class="line">    m_Rect.<span class="built_in">setHeight</span>(m_Bullet.<span class="built_in">height</span>());</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Bullet::updatePosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯é—²ç½®çš„å°±ä¸éœ€è¦åæ ‡æ›´æ–°</span></span><br><span class="line">    <span class="keyword">if</span>(m_Free)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åæ ‡æ›´æ–°</span></span><br><span class="line">    m_Y-=m_Speed;</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­å¼¹è¶…å‡ºå±å¹•ï¼Œå­å¼¹å˜ä¸ºç©ºé—²</span></span><br><span class="line">    <span class="keyword">if</span>(m_Y &lt;= - m_Bullet.<span class="built_in">height</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        m_Free = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="enemyplane-cpp">enemyplane.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;enemyplane.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">EnemyPlane::<span class="built_in">EnemyPlane</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æ•Œæœºèµ„æºåŠ è½½</span></span><br><span class="line">    m_enemy.<span class="built_in">load</span>(ENEMY_PATH);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºçš„ä½ç½®</span></span><br><span class="line">    m_X=<span class="number">0</span>;</span><br><span class="line">    m_Y=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•ŒæœºçŠ¶æ€</span></span><br><span class="line">    m_Free = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ•Œæœºé€Ÿåº¦</span></span><br><span class="line">    m_Speed = ENEMY_SPEED;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®ç¢°æ’ç®±</span></span><br><span class="line">    m_Rect.<span class="built_in">setWidth</span>(m_enemy.<span class="built_in">width</span>());</span><br><span class="line">    m_Rect.<span class="built_in">setHeight</span>(m_enemy.<span class="built_in">height</span>());</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">EnemyPlane::updatePosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ç©ºé—²çŠ¶ä½“å°±ä¸å˜åŒ–</span></span><br><span class="line">    <span class="keyword">if</span>(m_Free)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åæ ‡å˜åŒ–</span></span><br><span class="line">    m_Y += m_Speed;</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¶…å‡ºå±å¹•å°±å˜ä¸ºé—²ç½®</span></span><br><span class="line">    <span class="keyword">if</span>(m_Y &gt;= GAME_HEIGHT + m_Rect.<span class="built_in">height</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        m_Free=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="heroplane-cpp">heroplane.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;heroplane.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">HeroPlane::<span class="built_in">HeroPlane</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åŠ è½½é£æœºå›¾ç‰‡èµ„æº</span></span><br><span class="line">    m_Plane.<span class="built_in">load</span>(HERO_PATH);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–é£æœºåæ ‡</span></span><br><span class="line">    m_X = (GAME_WIDTH - m_Plane.<span class="built_in">width</span>()) * <span class="number">0.5</span>;</span><br><span class="line">    m_Y = GAME_HEIGHT - m_Plane.<span class="built_in">height</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–çŸ©å½¢è¾¹æ¡†</span></span><br><span class="line">    m_Rect.<span class="built_in">setWidth</span>(m_Plane.<span class="built_in">width</span>());</span><br><span class="line">    m_Rect.<span class="built_in">setHeight</span>(m_Plane.<span class="built_in">height</span>());</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">HeroPlane::shoot</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ç´¯åŠ æ—¶é—´é—´éš”</span></span><br><span class="line">    m_recorder++;</span><br><span class="line">    <span class="comment">//cout&lt;&lt;m_recorder&lt;&lt;endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœè®°å½•çš„é—´éš”æ²¡è¾¾åˆ°è®¾ç½®çš„é—´éš”ï¼Œä¸è¿›è¡Œå‘å°„å­å¼¹</span></span><br><span class="line">    <span class="keyword">if</span>(m_recorder&lt;BULLET_INTERVAL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å°„å­å¼¹</span></span><br><span class="line">    m_recorder = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt; BULLET_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_Bullets[i].m_Free==<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å°†ç©ºé—²çŠ¶æ€æ”¹ä¸º false</span></span><br><span class="line">            m_Bullets[i].m_Free=<span class="literal">false</span>;</span><br><span class="line">            <span class="comment">//è®¾ç½®å‘å°„åæ ‡</span></span><br><span class="line">            m_Bullets[i].m_X = m_X+m_Plane.<span class="built_in">width</span>()/<span class="number">2</span>- m_Bullets[i].m_Bullet.<span class="built_in">width</span>()/<span class="number">2</span>;</span><br><span class="line">            m_Bullets[i].m_Y = m_Y+m_Bullets[i].m_Bullet.<span class="built_in">height</span>()/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//cout&lt;&lt;&quot;&quot;&lt;&lt;endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">HeroPlane::setPosition</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    m_X=x;</span><br><span class="line">    m_Y=y;</span><br><span class="line">    m_Rect.<span class="built_in">moveTo</span>(m_X,m_Y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="main-cpp">main.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainscene.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QResource&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å†ŒäºŒè¿›åˆ¶æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//QResource::registerResource(GAME_RES_PATH);</span></span><br><span class="line"></span><br><span class="line">    MainScene w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="mainscene-cpp">mainscene.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainscene.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QIcon&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPainter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMouseEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMediaPlayer&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QSoundEffect&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">MainScene::<span class="built_in">MainScene</span>(QWidget *parent)</span><br><span class="line">    : <span class="built_in">QWidget</span>(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–åœºæ™¯</span></span><br><span class="line">    <span class="built_in">initScene</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯åŠ¨æ¸¸æˆ</span></span><br><span class="line">    <span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainScene::~<span class="built_in">MainScene</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::initScene</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®çª—å£å›ºå®šå°ºå¯¸</span></span><br><span class="line">    <span class="built_in">setFixedSize</span>(GAME_WIDTH,GAME_HEIGHT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">setWindowTitle</span>(GAME_TITLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŠ è½½å›¾æ ‡</span></span><br><span class="line">    <span class="built_in">setWindowIcon</span>(<span class="built_in">QIcon</span>(GAME_ICON));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šæ—¶å™¨åˆå§‹åŒ–</span></span><br><span class="line">    m_Timer.<span class="built_in">setInterval</span>(GAME_RATE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éšæœºæ•°ç§å­</span></span><br><span class="line">    <span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//    QSoundEffect * startSound = new QSoundEffect(this);</span></span><br><span class="line"><span class="comment">//    startSound-&gt;setSource(QUrl::fromLocalFile(SOUND_BACKGROUD));</span></span><br><span class="line"><span class="comment">//    startSound-&gt;play();</span></span><br><span class="line">    <span class="comment">//å¯åŠ¨å®šæ—¶å™¨</span></span><br><span class="line">    m_Timer.<span class="built_in">start</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›‘å¬ç›‘å¬å™¨å‘é€çš„ä¿¡å·</span></span><br><span class="line">    <span class="comment">//ï¼ˆå“ªä¸ªç›‘å¬å™¨ï¼Œæ—¶é—´åˆ°äº†å‘é€ä»€ä¹ˆä¿¡å·ï¼Œç”¨æ–¹æ³•å¤„ç†ï¼‰</span></span><br><span class="line">    <span class="built_in">connect</span>(&amp;m_Timer,&amp;QTimer::timeout,[=]()&#123;</span><br><span class="line">        <span class="comment">//æ•Œæœºå‡ºåœº</span></span><br><span class="line">        <span class="built_in">enemyToScene</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¢°æ’æ£€æµ‹</span></span><br><span class="line">        <span class="built_in">collisionDetection</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ›´æ–°æ¸¸æˆä¸­æ‰€æœ‰å…ƒç´ çš„åæ ‡</span></span><br><span class="line">        <span class="built_in">updatePosition</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»˜åˆ¶åˆ°å±å¹•ä¸Š</span></span><br><span class="line">        <span class="built_in">update</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::paintEvent</span><span class="params">(QPaintEvent *)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªç”»å®¶ï¼ŒæŒ‡å®šåœ¨å“ªä¸ªç±»ä¸­</span></span><br><span class="line">    <span class="function">QPainter <span class="title">painter</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶åœ°å›¾</span></span><br><span class="line">    <span class="comment">//(xåæ ‡ï¼Œyåæ ‡ï¼ŒQPixmapå¯¹è±¡)</span></span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map1_posY,m_map.m_map1);</span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(<span class="number">0</span>,m_map.m_map2_posY,m_map.m_map2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶è‹±é›„é£æœº</span></span><br><span class="line">    painter.<span class="built_in">drawPixmap</span>(m_hero.m_X,m_hero.m_Y,m_hero.m_Plane);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶å­å¼¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;BULLET_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœéç©ºé—²å°±ç»˜åˆ¶</span></span><br><span class="line">        <span class="keyword">if</span>(m_hero.m_Bullets[i].m_Free==<span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            painter.<span class="built_in">drawPixmap</span>(m_hero.m_Bullets[i].m_X,m_hero.m_Bullets[i].m_Y,m_hero.m_Bullets[i].m_Bullet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶æ•Œæœº</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;ENEMY_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_enemys[i].m_Free == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            painter.<span class="built_in">drawPixmap</span>(m_enemys[i].m_X, m_enemys[i].m_Y,m_enemys[i].m_enemy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶çˆ†ç‚¸</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;BOMB_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_bombs[i].m_Free == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            painter.<span class="built_in">drawPixmap</span>(m_bombs[i].m_X,m_bombs[i].m_Y,m_bombs[i].m_pixArr[m_bombs[i].m_index]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»˜åˆ¶æµ‹è¯•å­å¼¹</span></span><br><span class="line">    <span class="comment">//painter.drawPixmap(temp_Bullet.m_X,temp_Bullet.m_Y,temp_Bullet.m_Bullet);</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::updatePosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//åœ°å›¾åæ ‡æ›´æ–°</span></span><br><span class="line">    m_map.<span class="built_in">mapPosition</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å°„å­å¼¹</span></span><br><span class="line">    m_hero.<span class="built_in">shoot</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—å­å¼¹åæ ‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;BULLET_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        m_hero.m_Bullets[i].<span class="built_in">updatePosition</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—æ•Œæœºåæ ‡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;ENEMY_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        m_enemys[i].<span class="built_in">updatePosition</span>();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®—çˆ†ç‚¸çš„æ’­æ”¾</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;BOMB_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_bombs[i].m_Free == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_bombs[i].<span class="built_in">updateInfo</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•å­å¼¹çš„åæ ‡æ›´æ–°</span></span><br><span class="line">    <span class="comment">//temp_Bullet.m_Free = false;</span></span><br><span class="line">    <span class="comment">//temp_Bullet.updatePosition();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::mouseMoveEvent</span><span class="params">(QMouseEvent * event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x= event-&gt;<span class="built_in">x</span>();</span><br><span class="line">    <span class="type">int</span> y=event-&gt;<span class="built_in">y</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(x &lt;=m_hero.m_Plane.<span class="built_in">width</span>()/<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x=m_hero.m_Plane.<span class="built_in">width</span>()/<span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (x&gt;=GAME_WIDTH-m_hero.m_Plane.<span class="built_in">width</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        x=GAME_WIDTH - m_hero.m_Plane.<span class="built_in">width</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(y&lt;=m_hero.m_Plane.<span class="built_in">height</span>()/<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        y=m_hero.m_Plane.<span class="built_in">height</span>()/<span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(y&gt;=GAME_HEIGHT-m_hero.m_Plane.<span class="built_in">height</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        y=GAME_HEIGHT-m_hero.m_Plane.<span class="built_in">height</span>()/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    m_hero.<span class="built_in">setPosition</span>(x-m_hero.m_Plane.<span class="built_in">width</span>()/<span class="number">2</span>,y-m_hero.m_Plane.<span class="built_in">height</span>()/<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::enemyToScene</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    m_recorder++;</span><br><span class="line">    <span class="comment">//æœªè¾¾åˆ°å‡ºåœºé—´éš”ï¼Œç›´æ¥return</span></span><br><span class="line">    <span class="keyword">if</span>(m_recorder &lt; ENEMY_INTERVAL)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    m_recorder=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;ENEMY_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ç©ºé—²æ•Œæœºå‡ºåœº</span></span><br><span class="line">        <span class="keyword">if</span>(m_enemys[i].m_Free == <span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            m_enemys[i].m_Free =<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åæ ‡</span></span><br><span class="line">            m_enemys[i].m_X=<span class="built_in">rand</span>()%(GAME_WIDTH - m_enemys[i].m_enemy.<span class="built_in">width</span>());</span><br><span class="line">            m_enemys[i].m_Y=- m_enemys[i].m_enemy.<span class="built_in">height</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainScene::collisionDetection</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//éå†æ‰€æœ‰éç©ºé—²æ•Œæœº</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;ENEMY_NUM;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç©ºé—²ï¼Œå°±è·³è¿‡æ£€æµ‹ä¸‹ä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span>(m_enemys[i].m_Free)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†æ‰€æœ‰éç©ºé—²å­å¼¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;BULLET_NUM;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœç©ºé—²æ£€æµ‹ä¸‹ä¸€ä¸ªå­å¼¹</span></span><br><span class="line">            <span class="keyword">if</span>(m_hero.m_Bullets[j].m_Free)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ£€æµ‹æ•Œæœºæ˜¯å¦ä¸å­å¼¹ç¢°æ’</span></span><br><span class="line">            <span class="keyword">if</span>(m_enemys[i].m_Rect.<span class="built_in">intersects</span>(m_hero.m_Bullets[j].m_Rect))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//ç¢°æ’äº†</span></span><br><span class="line">                m_hero.m_Bullets[j].m_Free=<span class="literal">true</span>;</span><br><span class="line">                m_enemys[i].m_Free=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//çˆ†ç‚¸æ•ˆæœ</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt; BOMB_NUM;k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//æ‰¾ä¸€ä¸ªç©ºé—²çš„çˆ†ç‚¸</span></span><br><span class="line">                    <span class="keyword">if</span>(m_bombs[k].m_Free)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ</span></span><br><span class="line"><span class="comment">//                        QMediaPlayer mediaPlayer;</span></span><br><span class="line"><span class="comment">//                        mediaPlayer.setSource(QUrl::fromLocalFile(SOUND_BOMB));</span></span><br><span class="line"><span class="comment">//                        mediaPlayer.set</span></span><br><span class="line"><span class="comment">//                        mediaPlayer.play();</span></span><br><span class="line"></span><br><span class="line">                        QSoundEffect * startSound = <span class="keyword">new</span> <span class="built_in">QSoundEffect</span>(<span class="keyword">this</span>);</span><br><span class="line">                        startSound-&gt;<span class="built_in">setSource</span>(QUrl::<span class="built_in">fromLocalFile</span>(SOUND_BOMB));</span><br><span class="line">                        startSound-&gt;<span class="built_in">play</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        <span class="comment">//æ”¹ä¸ºéç©ºé—²</span></span><br><span class="line">                        m_bombs[k].m_Free=<span class="literal">false</span>;</span><br><span class="line">                        <span class="comment">//æ›´æ–°çˆ†ç‚¸åæ ‡</span></span><br><span class="line">                        m_bombs[k].m_X=m_enemys[i].m_X;</span><br><span class="line">                        m_bombs[k].m_Y=m_enemys[i].m_Y;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="map-cpp">map.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;map.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Map::<span class="built_in">Map</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line">    m_map1.<span class="built_in">load</span>(MAP_PATH);</span><br><span class="line">    m_map2.<span class="built_in">load</span>(MAP_PATH);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–Yè½´åæ ‡</span></span><br><span class="line">    m_map1_posY = -GAME_HEIGHT;</span><br><span class="line">    m_map2_posY = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ°å›¾æ»šåŠ¨é€Ÿåº¦</span></span><br><span class="line">    m_scroll_speed = MAP_SCROLL_SPEED;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Map::mapPosition</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†ç¬¬ä¸€å¼ å›¾ç‰‡çš„æ»šåŠ¨ä½ç½®</span></span><br><span class="line">    m_map1_posY += m_scroll_speed;</span><br><span class="line">    <span class="keyword">if</span>(m_map1_posY &gt;=GAME_HEIGHT)</span><br><span class="line">    &#123;</span><br><span class="line">        m_map1_posY = -GAME_HEIGHT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†ç¬¬äºŒå¼ å›¾ç‰‡çš„æ»šåŠ¨ä½ç½®</span></span><br><span class="line">    m_map2_posY += m_scroll_speed;</span><br><span class="line">    <span class="keyword">if</span>(m_map2_posY &gt;=GAME_HEIGHT)</span><br><span class="line">    &#123;</span><br><span class="line">        m_map2_posY = -GAME_HEIGHT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ¥§ä½¿ç”¨QTå†™çš„é£æœºå¤§æˆ˜çš„çº¯æºç </summary>
    
    
    
    <category term="æºç " scheme="https://momoao.github.io/categories/%E6%BA%90%E7%A0%81/"/>
    
    
    <category term="C++" scheme="https://momoao.github.io/tags/C/"/>
    
    <category term="QT" scheme="https://momoao.github.io/tags/QT/"/>
    
  </entry>
  
  <entry>
    <title>Shellç¼–ç¨‹</title>
    <link href="https://momoao.github.io/posts/202308241921.html"/>
    <id>https://momoao.github.io/posts/202308241921.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-08-30T09:46:58.634Z</updated>
    
    <content type="html"><![CDATA[<h1>Shellç¼–ç¨‹</h1><h1>Shellå¸¸è§çš„äº”ç§ç±»å‹</h1><h2 id="äº”ç§ç±»å‹è®²è§£">äº”ç§ç±»å‹è®²è§£</h2><p>åœ¨Unixå’Œç±»Unixç³»ç»Ÿä¸­ï¼Œå¸¸è§çš„äº”ç§Shellç±»å‹æ˜¯Bourne Shell (sh)ï¼ŒBourne Again Shell (bash)ï¼ŒC Shell (csh)ï¼ŒKorn Shell (ksh)ï¼Œå’Œ Z Shell (zsh)ã€‚è¿™äº›Shellä¹‹é—´æœ‰ä¸€äº›åŒºåˆ«ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹æ–¹é¢ï¼š</p><ol><li><p><strong>åŠŸèƒ½å’Œè¯­æ³•</strong>ï¼š</p><ul><li>Bourne Shell (sh)ï¼šæ˜¯æœ€æ—©çš„Unix Shellï¼ŒåŠŸèƒ½ç›¸å¯¹è¾ƒå°‘ï¼Œè¯­æ³•ç›¸å¯¹ç®€å•ï¼Œç¼ºä¹ä¸€äº›ç°ä»£Shellçš„ç‰¹æ€§ã€‚</li><li>Bourne Again Shell (bash)ï¼šæ˜¯Bourne Shellçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œæ˜¯å¤§å¤šæ•°Linuxç³»ç»Ÿçš„é»˜è®¤Shellã€‚å®ƒä¿ç•™äº†Bourne Shellçš„ç‰¹æ€§ï¼Œå¹¶æ·»åŠ äº†è®¸å¤šé¢å¤–çš„åŠŸèƒ½å’Œå‘½ä»¤ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œç¼–ç¨‹èƒ½åŠ›ã€‚</li><li>C Shell (csh)ï¼šè¯­æ³•ä¸Cè¯­è¨€ç±»ä¼¼ï¼Œæ”¯æŒç”¨Cé£æ ¼çš„è¯­æ³•ç¼–å†™Shellè„šæœ¬ã€‚æœ‰ä¸€äº›æ–¹ä¾¿çš„ç‰¹æ€§ï¼Œä½†åœ¨è„šæœ¬ç¼–ç¨‹æ–¹é¢ä¸å¦‚bashçµæ´»ã€‚</li><li>Korn Shell (ksh)ï¼šç”±David Kornè®¾è®¡ï¼Œç»¼åˆäº†Bourne Shellå’ŒC Shellçš„ç‰¹æ€§ï¼Œæä¾›äº†æ›´å¤šçš„ç¼–ç¨‹ç‰¹æ€§å’Œå‘½ä»¤ã€‚</li><li>Z Shell (zsh)ï¼šåœ¨åŠŸèƒ½ä¸Šæ‰©å±•äº†bashå’Œkshï¼Œå¹¶å¼•å…¥äº†è®¸å¤šæ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚å®ƒå¼ºè°ƒäº¤äº’å¼ä½¿ç”¨ï¼Œæä¾›æ›´å¥½çš„å‘½ä»¤è¡¥å…¨ã€ä¸»é¢˜å’Œæ’ä»¶æ”¯æŒã€‚</li></ul></li><li><p><strong>äº¤äº’å¼ä½¿ç”¨</strong>ï¼š</p><ul><li>zshåœ¨äº¤äº’å¼ä½¿ç”¨æ–¹é¢è¾ƒå…¶ä»–Shellæ›´å¼ºå¤§ï¼Œæä¾›æ›´å¤šçš„ä¾¿åˆ©åŠŸèƒ½å’Œè‡ªå®šä¹‰é€‰é¡¹ã€‚</li></ul></li><li><p><strong>å…¼å®¹æ€§</strong>ï¼š</p><ul><li>bashå’Œshå…·æœ‰è¾ƒé«˜çš„å…¼å®¹æ€§ï¼Œå‡ ä¹åœ¨æ‰€æœ‰Unixç³»ç»Ÿä¸­éƒ½å¯ä»¥æ‰¾åˆ°ã€‚</li><li>cshåœ¨æŸäº›ç³»ç»Ÿä¸Šå¯èƒ½ä¸å¯ç”¨ï¼Œä¹Ÿä¸å¤ªé€‚åˆç¼–å†™å¤æ‚çš„è„šæœ¬ã€‚</li><li>zshåœ¨å¤§å¤šæ•°ç°ä»£ç³»ç»Ÿä¸Šéƒ½å¯ç”¨ï¼Œä½†å¯èƒ½éœ€è¦å•ç‹¬å®‰è£…ã€‚</li></ul></li><li><p><strong>é»˜è®¤Shell</strong>ï¼š</p><ul><li>å¤§å¤šæ•°Linuxç³»ç»Ÿä½¿ç”¨bashä½œä¸ºé»˜è®¤Shellã€‚</li><li>macOSä½¿ç”¨zshä½œä¸ºé»˜è®¤Shellã€‚</li></ul></li><li><p><strong>å¯ç¼–ç¨‹æ€§</strong>ï¼š</p><ul><li>bashã€kshå’Œzshéƒ½æä¾›å¼ºå¤§çš„ç¼–ç¨‹åŠŸèƒ½ï¼Œå¯ä»¥ç¼–å†™å¤æ‚çš„Shellè„šæœ¬ã€‚</li><li>cshåœ¨ç¼–ç¨‹æ–¹é¢ç›¸å¯¹è¾ƒå¼±ï¼Œæ›´é€‚åˆä½œä¸ºäº¤äº’å¼Shellä½¿ç”¨ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼Œå¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªç”¨äºç®€å•ä»»åŠ¡å’Œäº¤äº’å¼ä½¿ç”¨çš„Shellï¼Œbashæˆ–zshå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœä½ éœ€è¦æ›´é«˜çº§çš„Shellç¼–ç¨‹åŠŸèƒ½ï¼Œå¯ä»¥é€‰æ‹©bashã€kshæˆ–zshä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå…·ä½“å–å†³äºä½ å¯¹ç‰¹å®šåŠŸèƒ½çš„éœ€æ±‚å’Œä¸ªäººåå¥½ã€‚</p><h2 id="bashå’Œzsh">bashå’Œzsh</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¤§å¤šæ•°Linuxç³»ç»Ÿä½¿ç”¨bashä½œä¸ºé»˜è®¤<span class="keyword">Shell</span><span class="language-bash">ã€‚</span></span><br><span class="line">macOSä½¿ç”¨zshä½œä¸ºé»˜è®¤<span class="keyword">Shell</span><span class="language-bash">ã€‚</span></span><br></pre></td></tr></table></figure><p>Zshï¼ˆZ Shellï¼‰å’ŒBashï¼ˆBourne Again Shellï¼‰æ˜¯ä¸¤ç§åŠŸèƒ½å¼ºå¤§çš„Unix Shellï¼Œå®ƒä»¬åœ¨å¾ˆå¤šæ–¹é¢ç›¸ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ä¸åŒä¹‹å¤„ã€‚ä¸‹é¢æ˜¯å®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼š</p><p><strong>Zshçš„ä¼˜ç‚¹ï¼š</strong></p><ol><li><p><strong>æ›´å¼ºå¤§çš„è‡ªåŠ¨è¡¥å…¨</strong>ï¼šZshæä¾›æ›´é«˜çº§çš„å‘½ä»¤è¡¥å…¨åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®å‘½ä»¤å†å²å’Œè·¯å¾„è‡ªåŠ¨è¡¥å…¨å‘½ä»¤ã€æ–‡ä»¶åå’Œé€‰é¡¹ï¼Œæå¤§åœ°æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚</p></li><li><p><strong>æ›´å¥½çš„ä¸»é¢˜å’Œå¤–è§‚</strong>ï¼šZshæ”¯æŒæ›´å¤šçš„ä¸»é¢˜å’Œå¤–è§‚å®šåˆ¶é€‰é¡¹ï¼Œä½¿Shellç•Œé¢æ›´å…·å¸å¼•åŠ›å’Œä¸ªæ€§åŒ–ã€‚</p></li><li><p><strong>æ›´å¥½çš„æ‹¼å†™çº æ­£</strong>ï¼šZshå¯ä»¥è‡ªåŠ¨çº æ­£å¸¸è§çš„æ‹¼å†™é”™è¯¯ï¼Œå‡å°‘ç”¨æˆ·è¾“å…¥é”™è¯¯çš„æœºä¼šã€‚</p></li><li><p><strong>æ›´å¼ºå¤§çš„åˆ«åï¼ˆaliasï¼‰åŠŸèƒ½</strong>ï¼šZshçš„åˆ«ååŠŸèƒ½æ›´çµæ´»ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šçš„é€‰é¡¹å’Œå‚æ•°ã€‚</p></li><li><p><strong>æ›´é«˜çº§çš„å†å²ç®¡ç†</strong>ï¼šZshå…è®¸æ›´å¤æ‚çš„å†å²è®°å½•å’Œç®¡ç†ï¼ŒåŒ…æ‹¬ä¿å­˜æ—¶é—´æˆ³ã€åˆ é™¤é‡å¤è®°å½•ç­‰ã€‚</p></li><li><p><strong>æ›´å¥½çš„é€šé…ç¬¦æ”¯æŒ</strong>ï¼šZshæ”¯æŒæ›´å¤šçš„é€šé…ç¬¦é€‰é¡¹ï¼Œä½¿æ–‡ä»¶åŒ¹é…æ›´æ–¹ä¾¿ã€‚</p></li></ol><p><strong>Zshçš„ç¼ºç‚¹ï¼š</strong></p><ol><li><p><strong>å®‰è£…å’Œé»˜è®¤æ”¯æŒ</strong>ï¼šè™½ç„¶Zshåœ¨å¤§å¤šæ•°ç°ä»£ç³»ç»Ÿä¸Šéƒ½å¯ä»¥æ‰¾åˆ°ï¼Œä½†æœ‰äº›è¾ƒæ—§æˆ–ç‰¹æ®Šçš„ç³»ç»Ÿå¯èƒ½æ²¡æœ‰é¢„è£…Zshï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦å•ç‹¬å®‰è£…ã€‚</p></li><li><p><strong>èµ„æºå ç”¨</strong>ï¼šZshç›¸å¯¹äºBashæ¥è¯´ï¼Œå¯èƒ½å ç”¨æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå°¤å…¶åœ¨è¾ƒæ—§çš„ç¡¬ä»¶ä¸Šå¯èƒ½ä¼šæ„Ÿè§‰è¾ƒæ…¢ã€‚</p></li></ol><p><strong>Bashçš„ä¼˜ç‚¹ï¼š</strong></p><ol><li><p><strong>å¹¿æ³›æ”¯æŒ</strong>ï¼šBashæ˜¯å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆå’ŒUnixç³»ç»Ÿçš„é»˜è®¤Shellï¼Œå‡ ä¹å¯ä»¥åœ¨ä»»ä½•Unixç³»ç»Ÿä¸Šæ‰¾åˆ°ã€‚</p></li><li><p><strong>è¾ƒä½çš„èµ„æºå ç”¨</strong>ï¼šç›¸æ¯”äºZshï¼ŒBashå¯èƒ½å ç”¨è¾ƒå°‘çš„ç³»ç»Ÿèµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨è¾ƒæ—§çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ—¶æ›´ä¸ºæ˜æ˜¾ã€‚</p></li><li><p><strong>è¾ƒå°‘çš„å­¦ä¹ æ›²çº¿</strong>ï¼šç”±äºBashæ˜¯é»˜è®¤Shellï¼Œæ›´å¤šçš„æ•™ç¨‹å’Œèµ„æºå¯ç”¨äºå­¦ä¹ Bashï¼Œé€‚åˆåˆå­¦è€…å…¥é—¨å­¦ä¹ ã€‚</p></li></ol><p><strong>Bashçš„ç¼ºç‚¹ï¼š</strong></p><ol><li><p><strong>è¾ƒå¼±çš„è‡ªåŠ¨è¡¥å…¨</strong>ï¼šè™½ç„¶Bashä¹Ÿæ”¯æŒå‘½ä»¤è¡¥å…¨ï¼Œä½†å®ƒåœ¨åŠŸèƒ½å’Œå®šåˆ¶é€‰é¡¹ä¸Šæ¯”Zshå¼±ä¸€äº›ã€‚</p></li><li><p><strong>è¾ƒå°‘çš„ä¸»é¢˜å’Œå¤–è§‚é€‰é¡¹</strong>ï¼šç›¸æ¯”Zshï¼ŒBashçš„å¤–è§‚å’Œä¸»é¢˜å®šåˆ¶é€‰é¡¹è¾ƒå°‘ã€‚</p></li><li><p><strong>è¾ƒå¼±çš„åˆ«åï¼ˆaliasï¼‰åŠŸèƒ½</strong>ï¼šBashçš„åˆ«ååŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸æ”¯æŒä¸€äº›é«˜çº§é€‰é¡¹ã€‚</p></li></ol><p>ç»¼åˆè€Œè¨€ï¼Œå¦‚æœä½ éœ€è¦ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„Shellï¼Œç‰¹åˆ«æ˜¯åœ¨æ—¥å¸¸äº¤äº’å¼ä½¿ç”¨å’Œç¼–ç¨‹æ–¹é¢ï¼ŒZshå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä½†å¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Shellï¼Œå¹¶ä¸”å¯¹äºå­¦ä¹ Shellç¼–ç¨‹æ¥è¯´ï¼ŒBashå¯èƒ½æ›´é€‚åˆåˆå­¦è€…ã€‚æ— è®ºé€‰æ‹©å“ªä¸ªShellï¼Œéƒ½å–å†³äºä¸ªäººåå¥½å’Œç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ã€‚</p><h1>æ•™ç¨‹</h1><h2 id="ç¼–å†™-Hello-è„šæœ¬">ç¼–å†™&quot;Hello&quot;è„šæœ¬</h2><p>æ²¡æœ‰lpå’ŒlpræŒ‡ä»¤</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> cups</span><br></pre></td></tr></table></figure><p>å¯åŠ¨cupsæœåŠ¡</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> cups</span><br></pre></td></tr></table></figure><p>binç›®å½•ä¸‹ä¹Ÿæœ‰äº†unix-lpr.shæ–‡ä»¶</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less <span class="regexp">/bin/u</span>nix-lpr.sh</span><br></pre></td></tr></table></figure><p>è„šæœ¬æ–‡ä»¶ä»¥æŸä¸ªè§£é‡Šå™¨å¼€å¤´ä½œä¸ºè¿™ä¸ªæ–‡ä»¶çš„è§£é‡Šå™¨</p><p>å½“ä¸æŒ‡å®šè§£é‡Šå™¨çš„æ—¶å€™ï¼Œé»˜è®¤ç”¨æ–‡ä»¶å¼€å¤´æŒ‡ç¤ºçš„è§£é‡Šå™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br></pre></td></tr></table></figure><p>å¼€å§‹åˆ›å»ºæ–‡ä»¶ç¼–å†™è„šæœ¬</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@192</span> ~]<span class="meta"># mkdir scripts/</span></span><br><span class="line">[root<span class="symbol">@192</span> ~]<span class="meta"># cd scripts/</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># touch hello.sh</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># vim hello.sh </span></span><br></pre></td></tr></table></figure><p>æ–‡ä»¶ä¸­ç¼–å†™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello World!!!&quot;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè„šæœ¬</p><p>ä½¿ç”¨sh [æ–‡ä»¶å] æˆ–è€…bash [æ–‡ä»¶å]çš„æ–¹å¼æ‰§è¡Œè„šæœ¬ä¸éœ€è¦xæƒé™</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="number">192</span> scripts]# sh hello.sh </span><br><span class="line">Hello World!!!</span><br><span class="line">[root@<span class="number">192</span> scripts]# bash hello.sh </span><br><span class="line">Hello World!!!</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç›´æ¥æ‰§è¡Œå°±éœ€è¦æƒé™./æ–‡ä»¶å</p><p>Linux/Unix ç³»ç»Ÿé»˜è®¤ä¸ä¼šåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ç¡®ä¿èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œè„šæœ¬ï¼Œæˆ‘ä»¬éœ€è¦æä¾›è„šæœ¬çš„å®Œæ•´è·¯å¾„æˆ–ä½¿ç”¨ <code>./</code> æ¥æŒ‡å®šå½“å‰ç›®å½•ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># ./hello.sh</span></span><br><span class="line">-bash: ./hello.sh: æƒé™ä¸å¤Ÿ</span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># ll</span></span><br><span class="line">æ€»ç”¨é‡ <span class="number">4</span></span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">34</span> <span class="number">7</span>æœˆ  <span class="number">18</span> <span class="number">18</span>:<span class="number">15</span> hello.sh</span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># chmod 777 hello.sh </span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># ./hello.sh </span></span><br><span class="line">Hello World!!!</span><br></pre></td></tr></table></figure><h2 id="sourceæ‰§è¡Œè„šæœ¬">sourceæ‰§è¡Œè„šæœ¬</h2><p>(ä¹Ÿå¯ä»¥ç”¨äºæ›´æ–°ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œsourceä»£è¡¨åœ¨å½“å‰ç¯å¢ƒä¸‹é‡è½½é…ç½®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å­shellä¸‹ï¼Œé‚£æ ·å½±å“ä¸åˆ°å½“å‰çš„ä¸»ç¯å¢ƒ)</p><p><strong>ç­‰ä»·äº . <a href="http://hello.sh">hello.sh</a>  ä½†ä¸ç­‰ä»·äº./ <a href="http://hello.sh">hello.sh</a></strong></p><p>ä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè„šæœ¬å’Œç›´æ¥æ‰§è¡Œè„šæœ¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ <code>source</code> å‘½ä»¤çš„ä¸åŒä¹‹å¤„ï¼š</p><ol><li><p><strong>è¿è¡Œç¯å¢ƒ</strong>ï¼šä½¿ç”¨ <code>source</code> å‘½ä»¤ï¼ˆæˆ– <code>.</code> å‘½ä»¤ï¼Œå®ƒä»¬ç­‰æ•ˆï¼‰æ‰§è¡Œè„šæœ¬æ—¶ï¼Œè„šæœ¬ä¼šåœ¨å½“å‰ Shell è¿›ç¨‹ä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ä¸­ã€‚è¿™æ„å‘³ç€è„šæœ¬ä¸­çš„ä»»ä½•å˜é‡ã€å‡½æ•°å’Œç¯å¢ƒå˜åŒ–éƒ½ä¼šç›´æ¥å½±å“å½“å‰çš„ Shell ç¯å¢ƒã€‚è¿™å¯¹äºé…ç½®ç¯å¢ƒå˜é‡æˆ–æ‰§è¡Œä¿®æ”¹å½“å‰ Shell ç¯å¢ƒçš„è„šæœ¬éå¸¸æœ‰ç”¨ã€‚</p></li><li><p><strong>è·¯å¾„æŸ¥æ‰¾</strong>ï¼šä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä¸éœ€è¦è„šæœ¬å…·æœ‰å¯æ‰§è¡Œæƒé™æˆ–è€…åœ¨ <code>PATH</code> ç¯å¢ƒå˜é‡æ‰€å®šä¹‰çš„ç›®å½•ä¸­ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹ä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè„šæœ¬ï¼Œåªè¦æä¾›è„šæœ¬çš„å®Œæ•´è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„å³å¯ã€‚</p></li><li><p><strong>é€€å‡ºè¡Œä¸º</strong>ï¼šä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè„šæœ¬åï¼Œè„šæœ¬æ‰§è¡Œç»“æŸåä¸ä¼šé€€å‡ºå½“å‰çš„ Shell ç¯å¢ƒã€‚è„šæœ¬ä¸­çš„ä»»ä½•æ”¹å˜ä»ç„¶ä¼šä¿ç•™åœ¨å½“å‰çš„ Shell ä¸­ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè„šæœ¬çš„ç¤ºä¾‹ï¼š</p><p>å‡è®¾æœ‰ä¸€ä¸ªåä¸º <code>myscript.sh</code> çš„è„šæœ¬æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello, I am a script!&quot;</span></span><br></pre></td></tr></table></figure><p>è¦ä½¿ç”¨ <code>source</code> å‘½ä»¤æ‰§è¡Œè¯¥è„šæœ¬ï¼Œåªéœ€åœ¨å½“å‰ Shell ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> myscript.sh</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">. myscript.sh</span><br></pre></td></tr></table></figure><p>è¿™æ ·è„šæœ¬ä¸­çš„ <code>echo</code> å‘½ä»¤å°†ä¼šåœ¨å½“å‰ Shell ä¸­æ‰§è¡Œï¼Œå¹¶æ˜¾ç¤º â€œHello, I am a script!â€ã€‚è€Œä¸æ˜¯åœ¨ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ä¸­æ‰§è¡Œè„šæœ¬ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œä½¿ç”¨ <code>source</code> å‘½ä»¤å¯ä»¥åœ¨å½“å‰ Shell ç¯å¢ƒä¸­æ‰§è¡Œè„šæœ¬ï¼Œä½¿å¾—è„šæœ¬ä¸­çš„å˜é‡å’Œç¯å¢ƒè®¾ç½®å¯¹å½“å‰ Shell ç”Ÿæ•ˆã€‚è¿™åœ¨éœ€è¦åœ¨å½“å‰ Shell ä¸­è®¾ç½®ç¯å¢ƒå˜é‡æˆ–æ‰§è¡Œç‰¹å®šé…ç½®è„šæœ¬æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h2 id="æŸ¥çœ‹å½“å‰è¿è¡Œè¿›ç¨‹">æŸ¥çœ‹å½“å‰è¿è¡Œè¿›ç¨‹</h2><p><code>ps</code> æ˜¯ä¸€ä¸ªç”¨äºæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯çš„å‘½ä»¤ã€‚å®ƒç”¨äºæ˜¾ç¤ºç³»ç»Ÿä¸­è¿è¡Œçš„è¿›ç¨‹çš„çŠ¶æ€ã€èµ„æºä½¿ç”¨æƒ…å†µå’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚<code>ps</code> å‘½ä»¤åœ¨ Linux/Unix ç³»ç»Ÿä¸­éå¸¸å¸¸ç”¨ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†ç³»ç»Ÿè¿›ç¨‹ã€‚</p><p>æ‰§è¡Œ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ps</span> <span class="operator">-f</span></span><br></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">UID</span>         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line"><span class="attribute">root</span>      <span class="number">10507</span>  <span class="number">10503</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">22</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> -bash</span><br><span class="line"><span class="attribute">root</span>      <span class="number">10533</span>  <span class="number">10507</span>  <span class="number">0</span> <span class="number">19</span>:<span class="number">22</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> ps -f</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬è§£è¯»ä¸Šé¢æ˜¾ç¤ºçš„è¿›ç¨‹ä¿¡æ¯ï¼š</p><ul><li><strong>UID</strong>ï¼šç”¨æˆ·æ ‡è¯†ç¬¦ï¼ˆUser IDï¼‰ï¼Œæ˜¾ç¤ºè¿›ç¨‹çš„æ‰€æœ‰è€…ã€‚åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªè¿›ç¨‹çš„æ‰€æœ‰è€…éƒ½æ˜¯ <code>root</code>ï¼Œå³è¶…çº§ç”¨æˆ·ã€‚</li><li><strong>PID</strong>ï¼šè¿›ç¨‹æ ‡è¯†ç¬¦ï¼ˆProcess IDï¼‰ï¼Œæ˜¯ç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…çš„å”¯ä¸€æ ‡è¯†å·ã€‚å®ƒç”¨äºæ ‡è¯†è¿›ç¨‹ã€‚</li><li><strong>PPID</strong>ï¼šçˆ¶è¿›ç¨‹æ ‡è¯†ç¬¦ï¼ˆParent Process IDï¼‰ï¼Œæ˜¾ç¤ºåˆ›å»ºå½“å‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹çš„ PIDã€‚åœ¨è¿™é‡Œï¼Œç¬¬äºŒä¸ªè¿›ç¨‹ï¼ˆPID 10533ï¼‰çš„çˆ¶è¿›ç¨‹æ˜¯ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆPID 10507ï¼‰ã€‚</li><li><strong>C</strong>ï¼šCPU å ç”¨ç‡ï¼ˆCPU Utilizationï¼‰ï¼Œè¡¨ç¤ºè¿›ç¨‹åœ¨ CPU ä¸Šçš„å ç”¨ç‡ã€‚åœ¨è¿™é‡Œï¼ŒC åˆ—æ˜¾ç¤ºä¸º 0ï¼Œè¡¨ç¤ºè¿›ç¨‹å½“å‰æ²¡æœ‰åœ¨ CPU ä¸Šæ‰§è¡Œã€‚</li><li><strong>STIME</strong>ï¼šè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´ï¼ˆStart Timeï¼‰ï¼Œæ˜¾ç¤ºè¿›ç¨‹å¯åŠ¨çš„æ—¶é—´æˆ³ã€‚åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´éƒ½æ˜¯åœ¨ 19:22ã€‚</li><li><strong>TTY</strong>ï¼šè¿›ç¨‹æ‰€è¿æ¥çš„ç»ˆç«¯è®¾å¤‡ï¼ˆTerminalï¼‰ã€‚åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªè¿›ç¨‹éƒ½è¿æ¥åˆ° <code>pts/0</code> ç»ˆç«¯ã€‚</li><li><strong>TIME</strong>ï¼šè¿›ç¨‹çš„ç´¯è®¡ CPU æ—¶é—´ï¼ˆCPU Timeï¼‰ï¼Œæ˜¾ç¤ºè¿›ç¨‹åœ¨ CPU ä¸Šæ‰§è¡Œçš„ç´¯è®¡æ—¶é—´ã€‚åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªè¿›ç¨‹çš„ç´¯è®¡ CPU æ—¶é—´éƒ½æ˜¯ 00:00:00ï¼Œè¡¨ç¤ºå®ƒä»¬è¿˜æ²¡æœ‰åœ¨ CPU ä¸Šæ‰§è¡Œã€‚</li><li><strong>CMD</strong>ï¼šè¿›ç¨‹çš„å‘½ä»¤è¡Œï¼ˆCommandï¼‰ï¼Œæ˜¾ç¤ºå¯åŠ¨è¿›ç¨‹çš„å®Œæ•´å‘½ä»¤ã€‚åœ¨è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ª <code>-bash</code>ï¼Œè¡¨ç¤ºä¸€ä¸ª Bash Shell è¿›ç¨‹ï¼Œç¬¬äºŒä¸ªè¿›ç¨‹æ˜¯ <code>ps -f</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªæ‰§è¡Œ <code>ps -f</code> å‘½ä»¤çš„è¿›ç¨‹ã€‚</li></ul><p>æ€»ç»“èµ·æ¥ï¼Œä¸Šé¢çš„è¾“å‡ºæ˜¾ç¤ºäº†ä¸¤ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œå®ƒä»¬éƒ½æ˜¯ç”± <code>root</code> ç”¨æˆ·åˆ›å»ºçš„ã€‚ç¬¬ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ª Bash Shell è¿›ç¨‹ï¼ˆPID 10507ï¼‰ï¼Œå®ƒæ˜¯å½“å‰ç»ˆç«¯ä¼šè¯çš„ Shellã€‚ç¬¬äºŒä¸ªè¿›ç¨‹æ˜¯æ‰§è¡Œ <code>ps -f</code> å‘½ä»¤çš„è¿›ç¨‹ï¼ˆPID 10533ï¼‰ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­çš„è¿›ç¨‹ä¿¡æ¯ã€‚ç¬¬äºŒä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯ç¬¬ä¸€ä¸ªè¿›ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ª <code>ps</code> å‘½ä»¤çš„è¾“å‡ºç¤ºä¾‹ï¼Œç”¨äºæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">bash</span></span><br></pre></td></tr></table></figure><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ <code>bash</code> å‘½ä»¤ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Bash Shellã€‚è¿™ä¸ªæ–°çš„ Bash Shell ä¼šåœ¨å½“å‰ç»ˆç«¯ä¼šè¯ä¸­è¿è¡Œï¼Œä½œä¸ºå½“å‰ Shell çš„å­ Shellã€‚å®ƒä¼šç»§æ‰¿å½“å‰ Shell çš„ç¯å¢ƒå˜é‡ã€å½“å‰ç›®å½•å’Œå…¶ä»–ä¸€äº›è®¾ç½®ï¼Œä½†æ˜¯åœ¨å­ Shell ä¸­å¯¹è¿™äº›ç¯å¢ƒçš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°çˆ¶ Shellã€‚</p><p>æŸ¥çœ‹è‡ªå·±æ˜¯å¦å‡ºå»å­shellä¸­</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># echo $SHLVL</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># bash</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># echo $SHLVL</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># bash</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># echo $SHLVL</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># exit</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># echo $SHLVL</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><p>ç­‰äº1æ—¶ä»£è¡¨å‡ºå»æœ€åˆçš„shellï¼Œå¤§äº1æ—¶ï¼Œä»£è¡¨å¤„äºç¬¬å‡ ä¸ªshell</p><p>è¾“å…¥bashä¸¤æ¬¡å</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@192 scripts]<span class="comment"># ps -f</span></span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root     <span class="number"> 10507 </span><span class="number"> 10503 </span><span class="number"> 0 </span>19:22 pts/0    00:00:00 -bash</span><br><span class="line">root     <span class="number"> 10553 </span><span class="number"> 10507 </span><span class="number"> 0 </span>19:29 pts/0    00:00:00 bash</span><br><span class="line">root     <span class="number"> 10581 </span><span class="number"> 10553 </span><span class="number"> 0 </span>19:31 pts/0    00:00:00 bash</span><br><span class="line">root     <span class="number"> 10592 </span><span class="number"> 10581 </span><span class="number"> 0 </span>19:31 pts/0    00:00:00 ps -f</span><br></pre></td></tr></table></figure><p><strong>å…¨å±€å˜é‡æ˜¯å¯ä»¥åœ¨çˆ¶ Shell å’Œå­ Shell ä¹‹é—´è¿›è¡Œé€šä¿¡çš„ä¸€ç§æ–¹å¼ã€‚åœ¨çˆ¶ Shell ä¸­å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œåœ¨å­ Shell ä¸­ä¹Ÿå¯ä»¥è®¿é—®å’Œä½¿ç”¨ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­ Shell ä¸­å¯¹å…¨å±€å˜é‡çš„ä¿®æ”¹ä¸ä¼šç›´æ¥å½±å“åˆ°çˆ¶ Shell ä¸­çš„å˜é‡ã€‚è¿™æ˜¯å› ä¸ºå­ Shell åœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå®ƒç»§æ‰¿äº†çˆ¶ Shell çš„ç¯å¢ƒå˜é‡ï¼Œä½†å¯¹å˜é‡çš„æ›´æ”¹åªä¼šå½±å“åˆ°å½“å‰å­ Shellã€‚</strong></p><h2 id="ç³»ç»Ÿå¸¸ç”¨å˜é‡">ç³»ç»Ÿå¸¸ç”¨å˜é‡</h2><p>åœ¨ Linux/Unix ç³»ç»Ÿä¸­ï¼Œæœ‰è®¸å¤šå¸¸ç”¨çš„ç³»ç»Ÿå˜é‡ï¼Œè¿™äº›å˜é‡ç”¨äºå­˜å‚¨æœ‰å…³ç³»ç»Ÿé…ç½®ã€è¿è¡Œç¯å¢ƒå’Œç”¨æˆ·ä¿¡æ¯ç­‰çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç³»ç»Ÿå˜é‡ï¼š</p><ol><li><p><strong><code>PATH</code></strong>ï¼šåŒ…å«å¯æ‰§è¡Œæ–‡ä»¶çš„ç›®å½•åˆ—è¡¨ï¼Œç”¨äºåœ¨ç»ˆç«¯ä¸­æŸ¥æ‰¾å‘½ä»¤ã€‚å½“ä½ è¾“å…¥ä¸€ä¸ªå‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨ <code>PATH</code> ä¸­æŒ‡å®šçš„ç›®å½•ä¸­æŸ¥æ‰¾è¯¥å‘½ä»¤çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p></li><li><p><strong><code>HOME</code></strong>ï¼šè¡¨ç¤ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•è·¯å¾„ã€‚é€šå¸¸ç”¨äºæŒ‡å®šç”¨æˆ·çš„é»˜è®¤å·¥ä½œç›®å½•ã€‚</p></li><li><p><strong><code>USER</code></strong> æˆ– <strong><code>LOGNAME</code></strong>ï¼šè¡¨ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åã€‚</p></li><li><p><strong><code>SHELL</code></strong>ï¼šè¡¨ç¤ºå½“å‰ç”¨æˆ·æ‰€ä½¿ç”¨çš„é»˜è®¤ Shell è§£é‡Šå™¨çš„è·¯å¾„ã€‚</p></li><li><p><strong><code>PWD</code></strong>ï¼šè¡¨ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ã€‚</p></li><li><p><strong><code>PS1</code></strong>ï¼šè¡¨ç¤ºå‘½ä»¤è¡Œæç¤ºç¬¦çš„æ ¼å¼ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹è¯¥å˜é‡æ¥è‡ªå®šä¹‰ç»ˆç«¯æç¤ºç¬¦çš„æ ·å¼ã€‚</p></li><li><p><strong><code>PS2</code></strong>ï¼šè¡¨ç¤ºå‘½ä»¤è¡Œç»­è¡Œæç¤ºç¬¦çš„æ ¼å¼ã€‚å½“ä½ è¾“å…¥ä¸€è¡Œå‘½ä»¤å¤ªé•¿éœ€è¦æ¢è¡Œæ—¶ï¼Œä¼šæ˜¾ç¤º <code>PS2</code> æç¤ºç¬¦ã€‚</p></li><li><p><strong><code>LANG</code></strong> å’Œ <strong><code>LC_*</code></strong>ï¼šç”¨äºè®¾ç½®ç³»ç»Ÿçš„è¯­è¨€å’Œåœ°åŒºè®¾ç½®ã€‚<code>LANG</code> è®¾ç½®æ•´ä½“è¯­è¨€ç¯å¢ƒï¼Œè€Œ <code>LC_*</code> å˜é‡å¯ä»¥è®¾ç½®ç‰¹å®šæ–¹é¢çš„è¯­è¨€å’Œåœ°åŒºï¼Œä¾‹å¦‚æ—¶é—´æ ¼å¼ã€è´§å¸ç¬¦å·ç­‰ã€‚</p></li><li><p><strong><code>UID</code></strong> å’Œ <strong><code>EUID</code></strong>ï¼šåˆ†åˆ«è¡¨ç¤ºå½“å‰ç”¨æˆ·çš„çœŸå®ç”¨æˆ· ID å’Œæœ‰æ•ˆç”¨æˆ· IDã€‚é€šå¸¸ï¼Œ<code>UID</code> æ˜¯å½“å‰ç”¨æˆ·çš„çœŸå® IDï¼Œè€Œ <code>EUID</code> å¯èƒ½æ˜¯ä¸åŒäº <code>UID</code> çš„ç‰¹æ®Šæƒé™çš„ç”¨æˆ· IDã€‚</p></li><li><p><strong><code>TERM</code></strong>ï¼šè¡¨ç¤ºå½“å‰ç»ˆç«¯ç±»å‹ã€‚ç”¨äºå‘Šè¯‰ç³»ç»Ÿå¦‚ä½•æ­£ç¡®åœ°æ˜¾ç¤ºå­—ç¬¦å’Œé¢œè‰²ã€‚</p></li><li><p><strong><code>HOSTNAME</code></strong>ï¼šè¡¨ç¤ºå½“å‰ç³»ç»Ÿçš„ä¸»æœºåã€‚</p></li><li><p><strong><code>OSTYPE</code></strong>ï¼šè¡¨ç¤ºå½“å‰æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé€šå¸¸æ˜¯ <code>linux-gnu</code>ã€‚</p></li></ol><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§çš„ç³»ç»Ÿå˜é‡ï¼Œå®ƒä»¬åœ¨ç»ˆç«¯å’Œè„šæœ¬ä¸­ç»å¸¸ä½¿ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ <code>echo</code> å‘½ä»¤æ¥æŸ¥çœ‹è¿™äº›å˜é‡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œè¦æŸ¥çœ‹ <code>PATH</code> å˜é‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>è¦æŸ¥çœ‹å…¶ä»–å˜é‡çš„å€¼ï¼Œå°†å˜é‡åæ›¿æ¢ä¸ºç›¸åº”çš„åç§°å³å¯ã€‚</p><p>é€šè¿‡æŒ‡ä»¤æŸ¥çœ‹å…¨å±€å˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span></span><br></pre></td></tr></table></figure><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@192</span> scripts]<span class="comment"># env</span></span><br><span class="line"><span class="title class_">XDG_SESSION_ID</span>=<span class="number">38</span></span><br><span class="line"><span class="title class_">HOSTNAME</span>=<span class="number">192.168</span>.<span class="number">1.4</span></span><br><span class="line"><span class="title class_">SELINUX_ROLE_REQUESTED</span>=</span><br><span class="line"><span class="title class_">TERM</span>=xterm<span class="number">-256</span>color</span><br><span class="line"><span class="title class_">SHELL</span>=/bin/bash</span><br><span class="line"><span class="title class_">HISTSIZE</span>=<span class="number">1000</span></span><br><span class="line"></span><br><span class="line">   ç»ˆç«¯è½¯ä»¶çš„ipåœ°å€   è½¯ä»¶çš„ç«¯å£   è¿œç¨‹<span class="title class_">SSH</span>æœåŠ¡çš„ç«¯å£</span><br><span class="line"><span class="title class_">SSH_CLIENT</span>=<span class="number">192.168</span>.<span class="number">1.6</span> <span class="number">54200</span> <span class="number">22</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">SELINUX_USE_CURRENT_RANGE</span>=</span><br><span class="line"><span class="title class_">SSH_TTY</span>=/dev/pts/<span class="number">0</span></span><br><span class="line"><span class="title class_">USER</span>=root</span><br><span class="line"><span class="title class_">LS_COLORS</span>=rs=<span class="number">0</span><span class="symbol">:di=</span><span class="number">38</span>;<span class="number">5</span>;<span class="number">27</span><span class="symbol">:ln=</span><span class="number">38</span>;<span class="number">5</span>;<span class="number">51</span><span class="symbol">:mh=</span><span class="number">44</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span><span class="symbol">:pi=</span><span class="number">40</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">11</span><span class="symbol">:so=</span><span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:do=</span><span class="number">38</span>;<span class="number">5</span>;<span class="number">5</span><span class="symbol">:bd=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">11</span><span class="symbol">:cd=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">3</span><span class="symbol">:or=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:mi=</span><span class="number">05</span>;<span class="number">48</span>;<span class="number">5</span>;<span class="number">232</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span><span class="symbol">:su=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">196</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span><span class="symbol">:sg=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">11</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">16</span><span class="symbol">:ca=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">196</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">226</span><span class="symbol">:tw=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">10</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">16</span><span class="symbol">:ow=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">10</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">21</span><span class="symbol">:st=</span><span class="number">48</span>;<span class="number">5</span>;<span class="number">21</span>;<span class="number">38</span>;<span class="number">5</span>;<span class="number">15</span><span class="symbol">:ex=</span><span class="number">38</span>;<span class="number">5</span>;<span class="number">34</span><span class="symbol">:*</span>.tar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tgz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.arc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.arj=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.taz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lha=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lz4=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lzh=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lzma=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tlz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.txz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tzo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.t7z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.zip=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.Z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.dz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.gz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lrz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.lzo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.xz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.bz2=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.bz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tbz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tbz2=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.tz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.deb=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.rpm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.jar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.war=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.ear=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.sar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.rar=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.alz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.ace=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.zoo=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.cpio=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.<span class="number">7</span>z=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.rz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.cab=<span class="number">38</span>;<span class="number">5</span>;<span class="number">9</span><span class="symbol">:*</span>.jpg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.jpeg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.gif=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.bmp=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.pbm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.pgm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.ppm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.tga=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.xbm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.xpm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.tif=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.tiff=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.png=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.svg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.svgz=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mng=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.pcx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mov=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mpg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mpeg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.m2v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mkv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.webm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.ogm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mp4=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.m4v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.mp4v=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.vob=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.qt=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.nuv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.wmv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.asf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.rm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.rmvb=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.flc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.avi=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.fli=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.flv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.gl=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.dl=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.xcf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.xwd=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.yuv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.cgm=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.emf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.axv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.anx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.ogv=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.ogx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">13</span><span class="symbol">:*</span>.aac=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.au=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.flac=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.mid=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.midi=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.mka=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.mp3=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.mpc=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.ogg=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.ra=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.wav=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.axa=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.oga=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.spx=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span><span class="symbol">:*</span>.xspf=<span class="number">38</span>;<span class="number">5</span>;<span class="number">45</span>:</span><br><span class="line"><span class="title class_">MAIL</span>=/var/spool/mail/root</span><br><span class="line"><span class="title class_">PATH</span>=/usr/local/<span class="symbol">sbin:</span>/usr/local/<span class="symbol">bin:</span>/usr/<span class="symbol">sbin:</span>/usr/<span class="symbol">bin:</span>/root/bin</span><br><span class="line"><span class="title class_">PWD</span>=/root/scripts</span><br><span class="line"><span class="title class_">LANG</span>=zh_CN.<span class="title class_">UTF</span><span class="number">-8</span></span><br><span class="line"><span class="title class_">SELINUX_LEVEL_REQUESTED</span>=</span><br><span class="line"><span class="title class_">HISTCONTROL</span>=ignoredups</span><br><span class="line"><span class="title class_">SHLVL</span>=<span class="number">1</span></span><br><span class="line"><span class="title class_">HOME</span>=/root</span><br><span class="line"><span class="title class_">LOGNAME</span>=root</span><br><span class="line"><span class="title class_">SSH_CONNECTION</span>=<span class="number">192.168</span>.<span class="number">1.6</span> <span class="number">54200</span> <span class="number">192.168</span>.<span class="number">1.4</span> <span class="number">22</span></span><br><span class="line"><span class="title class_">LESSOPEN</span>=||/usr/bin/lesspipe.sh %s</span><br><span class="line"><span class="title class_">XDG_RUNTIME_DIR</span>=/run/user/<span class="number">0</span></span><br><span class="line">_=/usr/bin/env</span><br><span class="line"><span class="title class_">OLDPWD</span>=/root</span><br></pre></td></tr></table></figure><p>æ‰“å°æŸä¸ªç¯å¢ƒå˜é‡ä¿¡æ¯</p><p>å’Œecho $SHELLå·®ä¸å¤š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="number">192</span> scripts]<span class="comment"># printenv SHELL</span></span><br><span class="line"><span class="regexp">/bin/</span>bash</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰å˜é‡</p><p>åŒ…å«å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span></span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰å˜é‡åŸºæœ¬è¯­æ³•">å®šä¹‰å˜é‡åŸºæœ¬è¯­æ³•</h2><p>åœ¨ Shell ä¸­å®šä¹‰å˜é‡çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variable_name=value</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>variable_name</code> æ˜¯å˜é‡çš„åç§°ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ä»»ä½•åˆæ³•çš„å˜é‡åç§°ã€‚å˜é‡åç§°é€šå¸¸ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚Shell å˜é‡æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥ <code>myVariable</code> å’Œ <code>myvariable</code> æ˜¯ä¸åŒçš„å˜é‡ã€‚</p><p><code>value</code> æ˜¯è¦èµ‹ç»™å˜é‡çš„å€¼ã€‚è¿™å¯ä»¥æ˜¯æ–‡æœ¬ã€æ•°å­—ã€å‘½ä»¤è¾“å‡ºï¼Œæˆ–è€…å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚</p><p>ä¾‹å¦‚ï¼Œè¦å®šä¹‰ä¸€ä¸ªåä¸º <code>name</code> çš„å˜é‡ï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸º â€œJohnâ€ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">&quot;John&quot;</span></span><br></pre></td></tr></table></figure><p>å˜é‡å®šä¹‰æ—¶ï¼Œç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸ºå‘½ä»¤æˆ–å…¶ä»–è¯­æ³•é”™è¯¯ã€‚</p><p>å®šä¹‰å®Œå˜é‡åï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å˜é‡åå‰æ·»åŠ  <code>$</code> ç¬¦å·æ¥å¼•ç”¨å˜é‡çš„å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$name</span></span><br></pre></td></tr></table></figure><p>è¿™å°†è¾“å‡ºå˜é‡ <code>name</code> çš„å€¼ï¼Œå³ â€œJohnâ€ã€‚</p><p>æ³¨æ„ï¼Œåœ¨ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚ <code>variable_name = value</code> æ˜¯é”™è¯¯çš„å†™æ³•ã€‚å¦å¤–ï¼Œåœ¨å¼•ç”¨å˜é‡æ—¶ï¼Œè¦è®°å¾—åœ¨å˜é‡åå‰é¢åŠ ä¸Š <code>$</code> ç¬¦å·ï¼Œå¦åˆ™ Shell å°†ä¼šæŠŠå˜é‡åè§†ä¸ºæ™®é€šçš„å­—ç¬¦ä¸²ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“ä½ åœ¨ Shell ä¸­å®šä¹‰çš„å˜é‡åªåœ¨å½“å‰ Shell ç¯å¢ƒä¸­æœ‰æ•ˆï¼Œå³å±€éƒ¨å˜é‡ã€‚å¦‚æœä½ å¸Œæœ›å°†å˜é‡ä¼ é€’ç»™å­ Shell æˆ–å…¶ä»– Shell ç¯å¢ƒï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>export</code> å‘½ä»¤å°†å˜é‡å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡ã€‚</p><p>èµ‹å€¼æ—¶=ä¸¤ä¾§ä¸è¦åŠ ç©ºæ ¼ï¼Œå­—ç¬¦ä¸²å¯ä»¥åŠ åŒå¼•å·</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># a=2</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># echo a</span></span><br><span class="line">a</span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># echo $a</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># a=hghg</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># echo $a</span></span><br><span class="line">hghg</span><br></pre></td></tr></table></figure><p>å¦‚æœå˜é‡ä¸­é—´æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·è¿›è¡Œ</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># my_var=<span class="string">&quot;Hello World&quot;</span></span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># echo $my_var </span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><p>æ£€æµ‹å‘ç°è¿™ç§å®šä¹‰æ–¹æ³•å®šä¹‰çš„æ˜¯å±€éƒ¨å˜é‡</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[root@192 scripts]</span><span class="comment"># set | grep my_var</span></span><br><span class="line"><span class="attr">my_var</span>=<span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"><span class="section">[root@192 scripts]</span><span class="comment"># env | grep my_var</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨exportå¯¼å‡ºå°±å¯ä»¥å°†å±€éƒ¨å˜é‡å˜ä¸ºå…¨å±€å˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@192 scripts]# export my_var</span><br><span class="line">[root@192 scripts]# env | grep my_var</span><br><span class="line">my_var=Hello World</span><br><span class="line">[root@192 scripts]# bash</span><br><span class="line">[root@192 scripts]# echo $my_var</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><p>å°†è®¡ç®—ç»“æœèµ‹å€¼ç»™å˜é‡</p><p>åœ¨ Shell ä¸­ä½¿ç”¨äº†ç®—æœ¯å±•å¼€ï¼ˆarithmetic expansionï¼‰çš„è¯­æ³•ï¼Œå°† <code>a</code> å˜é‡èµ‹å€¼ä¸º <code>1+5</code> è¡¨è¾¾å¼çš„ç»“æœã€‚åœ¨ Shell ä¸­ï¼Œç®—æœ¯å±•å¼€å¯ä»¥é€šè¿‡ <code>$(())</code> æˆ–è€… <code>$[ ]</code> æ¥æ‰§è¡Œç®—æœ¯è¿ç®—ï¼Œç”¨äºè®¡ç®—è¡¨è¾¾å¼çš„ç»“æœå¹¶å°†å…¶èµ‹å€¼ç»™å˜é‡ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># b=$[2+5]</span></span><br><span class="line">[root<span class="symbol">@192</span> scripts]<span class="meta"># echo $b</span></span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure><p>åªè¯»å˜é‡</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="number">192</span> <span class="keyword">scripts]# </span>readonly <span class="keyword">b=56</span></span><br><span class="line"><span class="keyword"></span>[root@<span class="number">192</span> <span class="keyword">scripts]# </span><span class="keyword">b=10</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">bash: </span><span class="keyword">b: </span>åªè¯»å˜é‡</span><br></pre></td></tr></table></figure><p>æ’¤é”€å˜é‡</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="subst">@192</span> scripts]<span class="meta"># unset b</span></span><br><span class="line"><span class="symbol">bash:</span> unset: b: æ— æ³•åè®¾å®š: åªè¯» variable</span><br><span class="line">[root<span class="subst">@192</span> scripts]<span class="meta"># unset a</span></span><br></pre></td></tr></table></figure><p>å°†shæ–‡ä»¶æ”¾åœ¨/binä¸‹åå¯ä»¥ç›´æ¥è¾“å…¥æ–‡ä»¶åæ¥è¿è¡Œï¼Œå¯ä»¥ä¸åŠ ./</p><p>ç‰¹æ®Šå˜é‡</p><h1>GPTå›ç­”åŸºç¡€</h1><p>Shellç¼–ç¨‹æ˜¯åœ¨Linuxå’Œå…¶ä»–ç±»Unixæ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œè„šæœ¬ç¼–ç¨‹çš„ä¸€ç§æ–¹æ³•ã€‚Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå¯ä»¥æ‰§è¡Œç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥ç”¨æ¥ç¼–å†™è„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–ä»»åŠ¡å’Œæ‰¹å¤„ç†ã€‚ä¸‹é¢æ˜¯Shellç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼š</p><ol><li><p><strong>Shellè„šæœ¬æ–‡ä»¶</strong>ï¼šShellè„šæœ¬æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œé€šå¸¸ä»¥<code>.sh</code>ä¸ºæ‰©å±•åã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚viã€nanoã€geditç­‰ï¼‰æ¥åˆ›å»ºShellè„šæœ¬æ–‡ä»¶ã€‚</p></li><li><p><strong>Shebang</strong>ï¼šåœ¨Shellè„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œé€šå¸¸æŒ‡å®šä¸€ä¸ªShebangï¼ˆè§£é‡Šå™¨æŒ‡ä»¤ï¼‰ï¼Œç”¨äºå‘Šè¯‰ç³»ç»Ÿç”¨å“ªä¸ªShellè§£é‡Šå™¨æ¥æ‰§è¡Œè„šæœ¬ã€‚ä¾‹å¦‚ï¼Œ<code>#!/bin/bash</code>è¡¨ç¤ºä½¿ç”¨Bashè§£é‡Šå™¨æ‰§è¡Œè„šæœ¬ã€‚</p></li><li><p><strong>å˜é‡</strong>ï¼šåœ¨Shellä¸­ä½¿ç”¨å˜é‡æ¥å­˜å‚¨æ•°æ®ã€‚å®šä¹‰å˜é‡æ—¶ä¸éœ€è¦å£°æ˜ç±»å‹ï¼Œç›´æ¥èµ‹å€¼å³å¯ã€‚ä¾‹å¦‚ï¼š<code>name=&quot;John&quot;</code>ï¼Œç„¶åå¯ä»¥é€šè¿‡<code>$name</code>æ¥å¼•ç”¨å˜é‡çš„å€¼ã€‚</p></li><li><p><strong>è¾“å‡º</strong>ï¼šä½¿ç”¨<code>echo</code>å‘½ä»¤æ¥è¾“å‡ºæ–‡æœ¬æˆ–å˜é‡çš„å€¼åˆ°ç»ˆç«¯ã€‚ä¾‹å¦‚ï¼š<code>echo &quot;Hello, World!&quot;</code>ã€‚</p></li><li><p><strong>è¾“å…¥</strong>ï¼šä½¿ç”¨<code>read</code>å‘½ä»¤ä»ç”¨æˆ·è·å–è¾“å…¥ï¼Œå¹¶å°†è¾“å…¥ä¿å­˜åˆ°å˜é‡ä¸­ã€‚ä¾‹å¦‚ï¼š<code>read name</code>ã€‚</p></li><li><p><strong>æ¡ä»¶è¯­å¥</strong>ï¼šä½¿ç”¨æ¡ä»¶è¯­å¥æ¥æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚å¸¸è§çš„æ¡ä»¶è¯­å¥æœ‰<code>if</code>ã€<code>else</code>ã€<code>elif</code>ã€‚ä¾‹å¦‚ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$age</span> -gt 18 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;You are an adult.&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;You are a minor.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å¾ªç¯</strong>ï¼šä½¿ç”¨å¾ªç¯ç»“æ„æ¥é‡å¤æ‰§è¡Œä»£ç å—ã€‚å¸¸è§çš„å¾ªç¯æœ‰<code>for</code>å¾ªç¯å’Œ<code>while</code>å¾ªç¯ã€‚ä¾‹å¦‚ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1 2 3 4 5; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å‡½æ•°</strong>ï¼šä½¿ç”¨å‡½æ•°å°†ä¸€ç³»åˆ—å‘½ä»¤å°è£…èµ·æ¥ï¼Œæ–¹ä¾¿åœ¨ä¸åŒåœ°æ–¹å¤šæ¬¡ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">greet</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Hello, <span class="variable">$1</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">greet <span class="string">&quot;John&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>æ³¨é‡Š</strong>ï¼šä½¿ç”¨<code>#</code>ç¬¦å·æ¥æ·»åŠ æ³¨é‡Šï¼Œæ³¨é‡Šå†…å®¹å°†è¢«è§£é‡Šå™¨å¿½ç•¥ã€‚</p></li><li><p><strong>æ‰§è¡Œè„šæœ¬</strong>ï¼šæ‰§è¡ŒShellè„šæœ¬éœ€è¦ç»™äºˆæ‰§è¡Œæƒé™ï¼Œä½¿ç”¨<code>chmod +x script.sh</code>å‘½ä»¤æ·»åŠ æ‰§è¡Œæƒé™ï¼Œç„¶åé€šè¿‡<code>./script.sh</code>æ¥æ‰§è¡Œè„šæœ¬ã€‚</p></li></ol><p>è¿™äº›æ˜¯Shellç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼Œé€šè¿‡å­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œä½ å¯ä»¥ç¼–å†™ç®€å•çš„Shellè„šæœ¬æ¥å®Œæˆå„ç§ä»»åŠ¡ï¼Œæé«˜å·¥ä½œæ•ˆç‡å¹¶ç®€åŒ–é‡å¤æ€§å·¥ä½œã€‚éšç€ç»éªŒçš„å¢åŠ ï¼Œä½ è¿˜å¯ä»¥å­¦ä¹ æ›´å¤šé«˜çº§çš„Shellç¼–ç¨‹æŠ€å·§å’Œå·¥å…·ï¼Œä»¥åŠæŒæ¡æ›´å¤šç³»ç»Ÿç®¡ç†å’Œè‡ªåŠ¨åŒ–çš„èƒ½åŠ›ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡æ±‡æ€»Shellç¼–ç¨‹çš„åŸºç¡€</summary>
    
    
    
    <category term="ç¼–ç¨‹" scheme="https://momoao.github.io/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="Shell" scheme="https://momoao.github.io/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootåˆè¯†</title>
    <link href="https://momoao.github.io/posts/202308301711.html"/>
    <id>https://momoao.github.io/posts/202308301711.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-09-13T10:45:19.021Z</updated>
    
    <content type="html"><![CDATA[<h1>SpringBoot</h1><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://www.bilibili.com/video/BV1Es4y1q7Bf/?share_source=copy_web&amp;vd_source=aff3d5a6c89df5e200cc71287221c16c">éƒ¨åˆ†ç¬”è®°å‚è€ƒå°šç¡…è°·SPringBoot3é›¶åŸºç¡€æ•™ç¨‹</a></p></div><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">Spring Bootå®˜æ–¹æ–‡æ¡£</a></p></div><h1>åŠŸèƒ½æè¿°</h1><h1>å¿«é€Ÿå…¥é—¨</h1><h2 id="å¼€å‘æµç¨‹">å¼€å‘æµç¨‹</h2><ol><li><p>åˆ›å»ºé¡¹ç›®</p><ol><li><p>åˆ›å»ºmavené¡¹ç›®ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ‰€æœ‰springbooté¡¹ç›®éƒ½å¿…é¡»ç»§æ‰¿è‡ª spring-boot-starter-parent --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li><li><p>å¯¼å…¥ç¯å¢ƒ</p><ol><li><p>å¯¼å…¥webçš„åœºæ™¯å¯åŠ¨å™¨</p></li><li><p>æ›´å¤šåœºæ™¯å¯åŠ¨å™¨å¯ä»¥æŸ¥è¯¢<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">SpringBootåœºæ™¯å¯åŠ¨å™¨-å®˜æ–¹</a>ï¼Œè¿™äº›æ˜¯å®˜æ–¹æ”¯æŒçš„åœºæ™¯éƒ½ä¼šä»¥spring-boot-starter-*å‘½åï¼Œè¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åœºæ™¯éƒ½æ˜¯ä»¥*-spring-boot-starterçš„æ–¹å¼å‘½åã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ä»¥åå¼€å‘ç›´æ¥å¼•å…¥starterå°±è¡Œäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªwebå¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><p>å¯¼å…¥æ‰“åŒ…ç”¨çš„ç¯å¢ƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è¿™æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ˜¯springbootå®˜æ–¹æä¾›çš„åº”ç”¨æ‰“åŒ…æ’ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†™ä¸»ç¨‹åºï¼ˆå›ºå®šå†™æ³•ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.boot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜ç¡®å‘Šè¯‰springbootï¼Œè¿™æ˜¯ä¸€ä¸ªspringbootåº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å›ºå®šå†™æ³•</span></span><br><span class="line">        SpringApplication.run(MainApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å°†ç¯å¢ƒæ‰“åŒ…">å°†ç¯å¢ƒæ‰“åŒ…</h2><p>åœ¨å³ä¾§mavenæ§åˆ¶ç•Œé¢æ‰§è¡Œcleanå’Œpackageï¼Œå°†pom.xmlä¸­çš„ç¯å¢ƒæ‰“åŒ…ï¼Œæ‰“åŒ…å¥½çš„ç¯å¢ƒä¼šåœ¨æ¨¡å—æ–‡ä»¶å¤¹ä¸­çš„targetæ–‡ä»¶å¤¹ä¸­ï¼Œå°†è¿™ä¸ªåŒ…ä¸Šä¼ åˆ°linuxæœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨ç‰¹æ„å®‰è£…tomcatï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒwebæœåŠ¡ã€‚</p><p><img src="../assets/image/SpringBoot_Image/image-20230903193024953.png" alt="image-20230903193024953"></p><p>ä¹Ÿå¯ä»¥åœ¨cmdä¸­ä½¿ç”¨java -jarç›´æ¥è¿è¡ŒjaråŒ…å°±å¯ä»¥åœ¨æœ¬æœºç›´æ¥è¿è¡ŒwebæœåŠ¡ï¼Œå’Œåœ¨IDEAä¸­æä¾›çš„æœåŠ¡ä¸€æ ·</p><p><img src="../assets/image/SpringBoot_Image/image-20230903193420233.png" alt="image-20230903193420233"></p><p>ä¹‹å‰æ”¹é…ç½®éœ€è¦å†jaråŒ…ä¸­çš„xmlæ–‡ä»¶ä¸­æ”¹ï¼Œç°åœ¨åªéœ€è¦åœ¨ä¸jaråŒ…åŒä¸€ä¸ªç›®å½•çš„åˆ›å»ºä¸€ä¸ªapplication.propertiesæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¡«å†™é…ç½®å°±å¯ä»¥äº†ã€‚SSMçš„æ‰€æœ‰é…ç½®éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­</p><p><img src="../assets/image/SpringBoot_Image/image-20230903194137996.png" alt="image-20230903194137996"></p><p><img src="../assets/image/SpringBoot_Image/image-20230903194129152.png" alt="image-20230903194129152"></p><p>å¯ä»¥ä½¿ç”¨IDEAï¼Œç¼–å†™ï¼Œä¼šæœ‰å¾ˆå¤šæç¤º</p><p><img src="../assets/image/SpringBoot_Image/image-20230903195607190.png" alt="image-20230903195607190"></p><p>æ›´å¤šé…ç½®å¯ä»¥æŸ¥çœ‹spring bootå®˜æ–¹çš„<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">Appication Propertiesæ–‡æ¡£-å®˜æ–¹</a></p><h2 id="IDEAç›´æ¥åˆ›å»ºSpringbooté¡¹ç›®">IDEAç›´æ¥åˆ›å»ºSpringbooté¡¹ç›®</h2><p>åˆ›å»ºæ–°çš„æ¨¡å—</p><p><img src="../assets/image/SpringBoot_Image/image-20230904163117321.png" alt="image-20230904163117321"></p><p>ä¸‹ä¸€æ­¥ä¹‹åå°±å¯ä»¥é€‰æ‹©å¯åŠ¨å™¨åœºæ™¯äº†</p><p><img src="../assets/image/SpringBoot_Image/image-20230903201324810.png" alt="image-20230903201324810"></p><p>IDEAä¼šåˆ›å»ºå¥½ä¸»å‡½æ•°å’Œé…ç½®æ–‡ä»¶</p><p><img src="../assets/image/SpringBoot_Image/image-20230903201446502.png" alt="image-20230903201446502"></p><p>Springbootåªæ‰«æä¸»ç¨‹åºæ ¹ç›®å½•å’Œä»¥ä¸‹çš„åŒ…ï¼Œå†™åœ¨ä¸»ç¨‹åºçˆ¶ç›®å½•åŠå…¶ä»¥ä¸Šçš„å†…å®¹ä¸è¢«æ‰«æ</p><p>ç›®å½•ç»“æ„</p><p><img src="../assets/image/SpringBoot_Image/image-20230904161351951.png" alt="image-20230904161351951"></p><h2 id="åº”ç”¨åˆ†æ">åº”ç”¨åˆ†æ</h2><h3 id="ä¸ºä»€ä¹ˆå¯¼å…¥starter-webæ‰€æœ‰ç›¸å…³ä¾èµ–éƒ½å¯¼å…¥è¿›æ¥">ä¸ºä»€ä¹ˆå¯¼å…¥starter-webæ‰€æœ‰ç›¸å…³ä¾èµ–éƒ½å¯¼å…¥è¿›æ¥</h3><ul><li>å®˜æ–¹ä¼šæ•´ç†å¥½ç‰ˆæœ¬</li><li>mavençš„ä¾èµ–ä¼ é€’åŸåˆ™ã€‚å¦‚æœAä¾èµ–Bï¼ŒBä¾èµ–Cï¼Œé‚£ä¹ˆå¯¼å…¥Aï¼Œå°±æ‹¥æœ‰äº†ABC</li><li>æ‰€ä»¥ï¼Œå¯¼å…¥åœºæ™¯å¯åŠ¨å™¨è‡ªåŠ¨æŠŠæ‰€æœ‰ä¾èµ–å¯¼å…¥</li></ul><h3 id="ä¸ºä»€ä¹ˆç‰ˆæœ¬å·éƒ½ä¸ç”¨å†™">ä¸ºä»€ä¹ˆç‰ˆæœ¬å·éƒ½ä¸ç”¨å†™</h3><ul><li>æ¯ä¸ªbooté¡¹ç›®éƒ½æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›®spring-boot-starter-parent</li><li>parentçš„çˆ¶é¡¹ç›®å¼spinrg-boot-dependencies<ul><li>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æœ‰æ‰€æœ‰å¯åŠ¨å™¨çš„å¯¼å…¥ï¼Œå’Œç‰ˆæœ¬æŒ‡å®š</li><li>è¿™ä¸ªé¡¹ç›®å¯ä»¥å« çˆ¶é¡¹ç›®çš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼Œæ‰€æœ‰çš„å¸¸è§çš„jaråŒ…ç‰ˆæœ¬éƒ½å£°æ˜å¥½äº†</li></ul></li></ul><h3 id="è‡ªå®šä¹‰ç‰ˆæœ¬å·">è‡ªå®šä¹‰ç‰ˆæœ¬å·</h3><ul><li>mavençš„å°±è¿‘åŸåˆ™ï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­ç›´æ¥å°†æƒ³è¦çš„ç‰ˆæœ¬å£°æ˜å³å¯ã€‚åœ¨çˆ¶é¡¹ç›®ä¸­æ ‡ç­¾ç”¨çš„ä»€ä¹ˆï¼Œè¿™é‡Œå°±ç”¨ä»€ä¹ˆ</li><li>è¿™ä¸¤ç§å†™æ³•éƒ½å¯ä»¥</li><li><img src="../assets/image/SpringBoot_Image/image-20230904170126458.png" alt="image-20230904170126458"></li></ul><h3 id="ä¾èµ–">ä¾èµ–</h3><ul><li><p>Appå°±æ˜¯springbootæ¨¡å—</p></li><li><p>å¦‚æœbootçˆ¶é¡¹ç›®æ²¡æœ‰åŒ…æ‹¬çš„éœ€è¦è‡ªè¡Œå£°æ˜</p></li><li><p><img src="../assets/image/SpringBoot_Image/image-20230905134400792.png" alt="image-20230905134400792"></p></li></ul><h3 id="è‡ªåŠ¨é…ç½®æœºåˆ¶">è‡ªåŠ¨é…ç½®æœºåˆ¶</h3><h4 id="åˆæ­¥äº†è§£">åˆæ­¥äº†è§£</h4><ol><li><p>è‡ªåŠ¨é…ç½®äº†Tomcatã€SPringMVCç­‰</p><ol><li>ä»¥å‰ï¼šViewResolverã€DispatcherServletã€CharacterEncodingFitler</li><li>ç°åœ¨ï¼šè‡ªåŠ¨é…ç½®å¥½çš„è¿™äº›ç»„ä»¶</li><li>éªŒè¯ï¼šå®¹å™¨ä¸­æœ‰ä»€ä¹ˆç»„ä»¶ï¼Œå°±æœ‰ä»€ä¹ˆåŠŸèƒ½<ol><li><img src="../assets/image/SpringBoot_Image/image-20230905135520950.png" alt="image-20230905135520950"></li></ol></li></ol></li><li><p>é»˜è®¤åŒ…æ‰«æ</p><ol><li><p>springbootåªä¼šæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…å’Œä»¥ä¸‹çš„åŒ…</p></li><li><p>@SPringBootApplicationæ³¨è§£æ ‡æ³¨çš„ç±»å°±æ˜¯springbootä¸»ç¨‹åºæ‰€åœ¨çš„ç±»</p></li><li><p>ä¹Ÿå¯ä»¥é€šè¿‡æ”¹å˜æ³¨è§£çš„å±æ€§ï¼ŒæŒ‡å®šæ‰«æå“ªä¸ªåŒ…ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„æ³¨è§£æ‰€åœ¨åŒ…</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages = <span class="string">&quot;com.atguigu&quot;</span>)</span></span><br></pre></td></tr></table></figure></li><li><p>@SpringBootApplicationç­‰åŒäºè¿™ä¸‰ä¸ªæ³¨è§£ï¼Œå…¶ä¸­æœ‰ä¸ªæ³¨è§£ä¹Ÿå¯ä»¥æŒ‡å®šæ‰«æåŒ…çš„è·¯å¾„</p><p><img src="../assets/image/SpringBoot_Image/image-20230905140340266.png" alt="image-20230905140340266"></p></li><li><p>é…ç½®é»˜è®¤å€¼</p><ol><li>é…ç½®æ–‡ä»¶çš„æ‰€æœ‰é…ç½®é¡¹å’ŒæŸä¸€ä¸ªç±»çš„å¯¹è±¡è¿›è¡Œç»‘å®š</li><li>ç»‘å®šäº†é…ç½®æˆ‘å‘¢è§ä¸­æ¯ä¸€é¡¹å€¼çš„ç±»ï¼š<strong>é…ç½®å±æ€§ç±»</strong></li><li>æ¯”å¦‚ï¼š<ol><li>ServerPropertiesï¼šç»‘å®šäº†æ‰€æœ‰TomcatæœåŠ¡å™¨æœ‰å…³çš„é…ç½®</li><li>MultipartPropertiesï¼šç»‘å®šäº†æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ çš„ç›¸å…³é…ç½®</li></ol></li></ol></li><li><p>æŒ‰éœ€åŠ è½½é…ç½®åœºæ™¯</p><ol><li>å¯¼å…¥åœºæ™¯spring-boot-starter-webï¼Œè¿™ä¸ªåœºæ™¯é‡Œæœ‰ä¸€ä¸ªspring-boot-starterï¼Œè¿™æ˜¯æ‰€æœ‰starterçš„starter</li><li>è€Œspring-boot-starterå¯¼å…¥äº†spring-boot-aotuconfigureï¼Œè¿™ä¸ªåŒ…é‡Œé¢æ˜¯å„ç§åœºæ™¯çš„<strong>é…ç½®å±æ€§ç±»</strong></li><li>è™½ç„¶éƒ½åœ¨è¿™ä¸ªåŒ…ä¸­ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯é»˜è®¤å…¨å¼€å¯ï¼Œå¯¼å…¥äº†å“ªä¸ªåœºæ™¯ï¼Œå“ªä¸ªåœºæ™¯çš„é…ç½®ç±»å°±ä¼šè‡ªåŠ¨åŠ è½½</li></ol></li></ol></li></ol><h4 id="å®Œæ•´æµç¨‹">å®Œæ•´æµç¨‹</h4><ol><li><img src="../assets/image/SpringBoot_Image/image-20230905151416080.png" alt="image-20230905151416080"></li></ol><p><em><strong>è‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†ï¼š</strong></em></p><p>**1ã€**å¯¼å…¥<code>starter-web</code>ï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯</p><ul><li>1ã€åœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº†ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–ï¼š<code>starter-json</code>ã€<code>starter-tomcat</code>ã€<code>springmvc</code></li><li>2ã€æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½å¼•å…¥äº†ä¸€ä¸ª<code>spring-boot-starter</code>ï¼Œæ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨ã€‚</li><li>3ã€<strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong>å¼•å…¥äº†<code>spring-boot-autoconfigure</code>åŒ…ã€‚</li><li>4ã€<code>spring-boot-autoconfigure</code>é‡Œé¢å›Šæ‹¬äº†æ‰€æœ‰åœºæ™¯çš„æ‰€æœ‰é…ç½®ã€‚</li><li>5ã€åªè¦è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆç›¸å½“äºSpringBootå®˜æ–¹å†™å¥½çš„æ•´åˆåŠŸèƒ½å°±ç”Ÿæ•ˆäº†ã€‚</li><li>6ã€SpringBooté»˜è®¤å´æ‰«æä¸åˆ° <code>spring-boot-autoconfigure</code>ä¸‹å†™å¥½çš„æ‰€æœ‰<strong>é…ç½®ç±»</strong>ã€‚ï¼ˆè¿™äº›<strong>é…ç½®ç±»</strong>ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œï¼‰ï¼Œ<strong>é»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…</strong>ã€‚</li></ul><p>**2ã€**<strong>ä¸»ç¨‹åº</strong>ï¼š<code>@SpringBootApplication</code></p><ul><li><p>1ã€<code>@SpringBootApplication</code>ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆ<code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguratio</code>ã€<code>@ComponentScan</code></p></li><li><p>2ã€SpringBooté»˜è®¤åªèƒ½æ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œæ‰«æä¸åˆ° <code>spring-boot-autoconfigure</code>åŒ…ä¸­å®˜æ–¹å†™å¥½çš„<strong>é…ç½®ç±»</strong></p></li><li><p>3ã€<code>**@EnableAutoConfiguration**</code>ï¼šSpringBoot <strong>å¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒ</strong>ã€‚</p></li><li><ul><li>\1. æ˜¯ç”±<code>@Import(AutoConfigurationImportSelector.class)</code>æä¾›åŠŸèƒ½ï¼šæ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚</li><li>\2. SpringBootå¯åŠ¨ä¼šé»˜è®¤åŠ è½½ 142ä¸ªé…ç½®ç±»ã€‚</li><li>\3. è¿™<strong>142ä¸ªé…ç½®ç±»</strong>æ¥è‡ªäº<code>spring-boot-autoconfigure</code>ä¸‹ <code>META-INF/spring/**org.springframework.boot.autoconfigure.AutoConfiguration**.imports</code>æ–‡ä»¶æŒ‡å®šçš„</li><li>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åˆ©ç”¨ @Import æ‰¹é‡å¯¼å…¥ç»„ä»¶æœºåˆ¶æŠŠ <code>autoconfigure</code> åŒ…ä¸‹çš„142 <code>xxxxAutoConfiguration</code>ç±»å¯¼å…¥è¿›æ¥ï¼ˆ<strong>è‡ªåŠ¨é…ç½®ç±»</strong>ï¼‰</li><li>è™½ç„¶å¯¼å…¥äº†<code>142</code>ä¸ªè‡ªåŠ¨é…ç½®ç±»</li></ul></li><li><p>4ã€æŒ‰éœ€ç”Ÿæ•ˆï¼š</p></li><li><ul><li>å¹¶ä¸æ˜¯è¿™<code>142</code>ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½èƒ½ç”Ÿæ•ˆ</li><li>æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œéƒ½æœ‰æ¡ä»¶æ³¨è§£<code>@ConditionalOnxxx</code>ï¼Œåªæœ‰æ¡ä»¶æˆç«‹ï¼Œæ‰èƒ½ç”Ÿæ•ˆ</li></ul></li></ul><p><strong>3ã€</strong><code>**xxxxAutoConfiguration**</code><strong>è‡ªåŠ¨é…ç½®ç±»</strong></p><ul><li><strong>1ã€ç»™å®¹å™¨ä¸­ä½¿ç”¨@Bean æ”¾ä¸€å †ç»„ä»¶ã€‚</strong></li><li>2ã€æ¯ä¸ª<strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£<code>@EnableConfigurationProperties(**ServerProperties**.class)</code>ï¼Œç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„æŒ‡å®šå‰ç¼€çš„å±æ€§å€¼å°è£…åˆ° <code>xxxProperties</code><strong>å±æ€§ç±»</strong>ä¸­</li><li>3ã€ä»¥Tomcatä¸ºä¾‹ï¼šæŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥<code>server</code>å¼€å¤´çš„ã€‚é…ç½®éƒ½å°è£…åˆ°äº†å±æ€§ç±»ä¸­ã€‚</li><li>4ã€ç»™<strong>å®¹å™¨</strong>ä¸­æ”¾çš„æ‰€æœ‰<strong>ç»„ä»¶</strong>çš„ä¸€äº›<strong>æ ¸å¿ƒå‚æ•°</strong>ï¼Œéƒ½æ¥è‡ªäº<code>**xxxProperties**</code><strong>ã€‚</strong><code>**xxxProperties**</code><strong>éƒ½æ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šã€‚</strong></li><li><strong>åªéœ€è¦æ”¹é…ç½®æ–‡ä»¶çš„å€¼ï¼Œæ ¸å¿ƒç»„ä»¶çš„åº•å±‚å‚æ•°éƒ½èƒ½ä¿®æ”¹</strong></li></ul><p>**4ã€**å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚è¿™äº›æ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰</p><p><strong>æ ¸å¿ƒæµç¨‹æ€»ç»“ï¼š</strong></p><p>1ã€å¯¼å…¥<code>starter</code>ï¼Œå°±ä¼šå¯¼å…¥<code>autoconfigure</code>åŒ…ã€‚</p><p>2ã€<code>autoconfigure</code> åŒ…é‡Œé¢ æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>META-INF/spring/**org.springframework.boot.autoconfigure.AutoConfiguration**.imports</code>,é‡Œé¢æŒ‡å®šçš„æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»</p><p>3ã€@EnableAutoConfiguration ä¼šè‡ªåŠ¨çš„æŠŠä¸Šé¢æ–‡ä»¶é‡Œé¢å†™çš„æ‰€æœ‰<strong>è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥è¿›æ¥ã€‚xxxAutoConfiguration æ˜¯æœ‰æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½</strong></p><p>4ã€<code>xxxAutoConfiguration</code>ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶ï¼Œç»„ä»¶éƒ½æ˜¯ä» <code>xxxProperties</code>ä¸­æå–å±æ€§å€¼</p><p>5ã€<code>xxxProperties</code>åˆæ˜¯å’Œ<strong>é…ç½®æ–‡ä»¶</strong>è¿›è¡Œäº†ç»‘å®š</p><p>**æ•ˆæœï¼š**å¯¼å…¥<code>starter</code>ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ä¿®æ”¹åº•å±‚è¡Œä¸ºã€‚</p><h4 id="å¦‚ä½•å­¦å¥½SpringBoot">å¦‚ä½•å­¦å¥½SpringBoot</h4><p>æ¡†æ¶çš„æ¡†æ¶ã€åº•å±‚åŸºäºSpringã€‚èƒ½è°ƒæ•´æ¯ä¸€ä¸ªåœºæ™¯çš„åº•å±‚è¡Œä¸ºã€‚100%é¡¹ç›®ä¸€å®šä¼šç”¨åˆ°<strong>åº•å±‚è‡ªå®šä¹‰</strong></p><p>æ‘„å½±ï¼š</p><ul><li>å‚»ç“œï¼šè‡ªåŠ¨é…ç½®å¥½ã€‚</li><li><strong>å•å</strong>ï¼šç„¦è·ã€å…‰åœˆã€å¿«é—¨ã€æ„Ÿå…‰åº¦â€¦</li><li>å‚»ç“œ+<strong>å•å</strong>ï¼š</li></ul><ol><li><p>ç†è§£<strong>è‡ªåŠ¨é…ç½®åŸç†</strong></p></li><li><ol><li><strong>å¯¼å…¥starter</strong> <strong>â€“&gt; ç”Ÿæ•ˆxxxxAutoConfiguration --&gt;</strong> <strong>ç»„ä»¶</strong> <strong>â€“&gt; xxxProperties --&gt;</strong> <strong>é…ç½®æ–‡ä»¶</strong></li></ol></li><li><p>ç†è§£<strong>å…¶ä»–æ¡†æ¶åº•å±‚</strong></p></li><li><ol><li>æ‹¦æˆªå™¨</li></ol></li><li><p>å¯ä»¥éšæ—¶<strong>å®šåˆ¶åŒ–ä»»ä½•ç»„ä»¶</strong></p></li><li><ol><li><strong>é…ç½®æ–‡ä»¶</strong></li><li><strong>è‡ªå®šä¹‰ç»„ä»¶</strong></li></ol></li></ol><p>æ™®é€šå¼€å‘ï¼š<code>å¯¼å…¥starter</code>ï¼ŒControllerã€Serviceã€Mapperã€å¶å°”ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p><strong>é«˜çº§å¼€å‘</strong>ï¼šè‡ªå®šä¹‰ç»„ä»¶ã€è‡ªå®šä¹‰é…ç½®ã€è‡ªå®šä¹‰starter</p><p>æ ¸å¿ƒï¼š</p><ul><li>è¿™ä¸ªåœºæ™¯è‡ªåŠ¨é…ç½®å¯¼å…¥äº†å“ªäº›ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½Autowiredè¿›æ¥ä½¿ç”¨</li><li>èƒ½ä¸èƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ”¹å˜ç»„ä»¶çš„ä¸€äº›é»˜è®¤å‚æ•°</li><li>éœ€ä¸éœ€è¦è‡ªå·±å®Œå…¨å®šä¹‰è¿™ä¸ªç»„ä»¶</li><li>åœºæ™¯å®šåˆ¶åŒ–</li></ul><p><strong>æœ€ä½³å®æˆ˜</strong>ï¼š</p><ul><li><p><strong>é€‰åœºæ™¯</strong>ï¼Œå¯¼å…¥åˆ°é¡¹ç›®</p></li><li><ul><li>å®˜æ–¹ï¼šstarter</li><li>ç¬¬ä¸‰æ–¹ï¼šå»ä»“åº“æœ</li></ul></li><li><p><strong>å†™é…ç½®ï¼Œæ”¹é…ç½®æ–‡ä»¶å…³é”®é¡¹</strong></p></li><li><ul><li>æ•°æ®åº“å‚æ•°ï¼ˆè¿æ¥åœ°å€ã€è´¦å·å¯†ç â€¦ï¼‰</li></ul></li><li><p>åˆ†æè¿™ä¸ªåœºæ™¯ç»™æˆ‘ä»¬å¯¼å…¥äº†<strong>å“ªäº›èƒ½ç”¨çš„ç»„ä»¶</strong></p></li><li><ul><li><strong>è‡ªåŠ¨è£…é…</strong>è¿™äº›ç»„ä»¶è¿›è¡Œåç»­ä½¿ç”¨</li><li>ä¸æ»¡æ„bootæä¾›çš„è‡ªåŠ¨é…å¥½çš„é»˜è®¤ç»„ä»¶</li></ul></li><li><ul><li><ul><li><strong>å®šåˆ¶åŒ–</strong></li></ul></li></ul></li><li><ul><li><ul><li><ul><li>æ”¹é…ç½®</li><li>è‡ªå®šä¹‰ç»„ä»¶</li></ul></li></ul></li></ul></li></ul><p>æ•´åˆredisï¼š</p><ul><li><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">é€‰åœºæ™¯</a>ï¼š<code>spring-boot-starter-data-redis </code></p></li><li><ul><li>åœºæ™¯AutoConfiguration å°±æ˜¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»</li></ul></li><li><p>å†™é…ç½®ï¼š</p><ul><li><p>ä½¿ç”¨IDEAæŸ¥æ‰¾åŠŸèƒ½æŸ¥æ‰¾ç±»RedisAutoConfigurationï¼Œé…ç½®éƒ½æ˜¯å†™åœ¨XXXAutoConfigurationç±»ä¸­ï¼Œç„¶åå‘ç°æ³¨è§£@EnableConfigurationPropertiesï¼ŒæŸ¥çœ‹æ³¨è§£ä¸­ä½¿ç”¨çš„ç±»ï¼Œå°±æ˜¯å†™redisé…ç½®çš„ç±»ï¼Œ</p><p><img src="../assets/image/SpringBoot_Image/image-20230907082338070.png" alt="image-20230907082338070"></p></li></ul></li><li><ul><li><p>è¿›åˆ°ç±»ä¸­æŸ¥çœ‹æ³¨è§£@ConfigurationPropertiesä¸­å£°æ˜äº†é…ç½®æ–‡ä»¶ä¸­è¯»å–çš„ä¿¡æ¯çš„å‰ç¼€ï¼Œç„¶ååœ¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‰ç¼€æ¥é…ç½®RedisPropertiesç±»ä¸­çš„å±æ€§</p><p><img src="../assets/image/SpringBoot_Image/image-20230907082445135.png" alt="image-20230907082445135"></p></li><li><p>é…ç½®redisï¼Œä¾‹å¦‚åœ¨application.propertiesä¸­é…ç½®</p><p><img src="../assets/image/SpringBoot_Image/image-20230907082609726.png" alt="image-20230907082609726"></p></li><li><p>åˆ†æåˆ°è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®ç±»å¼€å¯äº†å“ªäº›å±æ€§ç»‘å®šå…³ç³»</p></li><li><p><code>@EnableConfigurationProperties(RedisProperties.class)</code></p></li><li><p>ä¿®æ”¹redisç›¸å…³çš„é…ç½®</p></li></ul></li><li><p>åˆ†æç»„ä»¶ï¼š</p></li><li><ul><li><p>åˆ†æåˆ° <code>RedisAutoConfiguration</code>  ç»™å®¹å™¨ä¸­æ”¾äº† <code>StringRedisTemplate</code>ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ç”¨äºç»™redisåšå¢åˆ æ”¹æŸ¥æ“ä½œçš„</p></li><li><p>@ConditionalOnMissingBeanè¡¨ç¤ºï¼Œå½“å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶æ—¶ï¼ŒSpringBootæ‰ä¼šåŠ å…¥ï¼Œæœ‰çš„è¯å°±ä¸ä¼šå†è¿›è¡ŒåŠ å…¥</p><p><img src="../assets/image/SpringBoot_Image/image-20230907082755115.png" alt="image-20230907082755115"></p></li><li><p>ä½¿ç”¨@Autowiredï¼Œå°†StringRedisTemplateè‡ªåŠ¨æ³¨å…¥</p></li><li><p>redisTemplate.opsForValue()æ–¹æ³•å¯ä»¥è·å–å¯¹rediså­—ç¬¦ä¸²å€¼æ“ä½œçš„æ¥å£ValueOperationsã€‚</p><p>ValueOperationsæä¾›äº†å¯¹rediså­—ç¬¦ä¸²å€¼çš„å¸¸ç”¨æ“ä½œ,incrementå°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</p><p>incrementæ–¹æ³•å¯ä»¥å¯¹redisä¸­çš„æ•°å­—å€¼è¿›è¡Œå¢é‡æ“ä½œã€‚å®ƒéœ€è¦ä¸¤ä¸ªå‚æ•°:</p><ul><li>key - redisä¸­çš„é”®</li><li>delta - è¦å¢åŠ çš„æ•°å€¼ã€‚é»˜è®¤æ˜¯1ã€‚</li></ul><p>incrementæ–¹æ³•ä¼šè¿”å›å¢åŠ åçš„å€¼ã€‚</p><p><img src="../assets/image/SpringBoot_Image/image-20230907083036741.png" alt="image-20230907083036741"></p></li></ul></li><li><p>å®šåˆ¶åŒ–</p></li><li><ul><li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li><li>è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå·±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª <code>StringRedisTemplate</code></li></ul></li></ul><h2 id="æ ¸å¿ƒæŠ€èƒ½">æ ¸å¿ƒæŠ€èƒ½</h2><h3 id="å¸¸ç”¨æ³¨è§£">å¸¸ç”¨æ³¨è§£</h3><ol><li>spring bootæ‘’å¼ƒäº†XMLé…ç½®æ–¹å¼ï¼Œæ”¹ä¸ºå…¨æ³¨è§£é©±åŠ¨</li></ol><h4 id="ç»„ä»¶æ³¨å†Œ">ç»„ä»¶æ³¨å†Œ</h4><ol><li><p><strong>@Configuration</strong>ã€<strong>@SpringBootConfiguration</strong></p><p><strong>@Bean</strong>ã€<strong>@Scope</strong></p><p><strong>@Controllerã€ @Serviceã€@Repositoryã€@Component</strong></p><p><strong>@Import</strong></p><p>@ComponentScan</p></li><li><p>ä¹‹å‰éƒ½æ˜¯åœ¨é…ç½®xmlæ–‡ä»¶ä¸­ï¼Œç°åœ¨å¯ä»¥ç”¨æ³¨è§£ç›´æ¥ä½¿ç”¨</p></li></ol><p>æ­¥éª¤ï¼š</p><p><strong>1ã€@Configuration ç¼–å†™ä¸€ä¸ªé…ç½®ç±»</strong></p><p><strong>2ã€åœ¨é…ç½®ç±»ä¸­ï¼Œè‡ªå®šä¹‰æ–¹æ³•ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚é…åˆ@Bean</strong></p><p><strong>3ã€æˆ–ä½¿ç”¨@Import å¯¼å…¥ç¬¬ä¸‰æ–¹çš„ç»„ä»¶</strong></p><h4 id="æ¡ä»¶æ³¨è§£">æ¡ä»¶æ³¨è§£</h4><ol><li><p>å¦‚æœæ³¨è§£æŒ‡å®šçš„<strong>æ¡ä»¶æˆç«‹</strong>ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</p><p><em><strong>@ConditionalOnXxx</strong></em></p><p><strong>@ConditionalOnClassï¼šå¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</strong></p><p><strong>@ConditionalOnMissingClassï¼šå¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</strong></p><p><strong>@ConditionalOnBeanï¼šå¦‚æœå®¹å™¨ä¸­å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</strong></p><p><strong>@ConditionalOnMissingBeanï¼šå¦‚æœå®¹å™¨ä¸­ä¸å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</strong></p><p>åœºæ™¯ï¼š</p><ul><li><p>å¦‚æœå­˜åœ¨<code>FastsqlException</code>è¿™ä¸ªç±»ï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>Cat</code>ç»„ä»¶ï¼Œåcat01ï¼Œ</p><ul><li><p>åœ¨@Beanæ³¨è§£çš„ä¸Šé¢ä½¿ç”¨@ConditionalOnClassæ³¨è§£å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnMissingClass(value=&quot;com.alibaba.druid.FastsqlException&quot;)</span> <span class="comment">//æ”¾åœ¨ç±»çº§åˆ«ï¼Œå¦‚æœæ³¨è§£åˆ¤æ–­ç”Ÿæ•ˆï¼Œåˆ™æ•´ä¸ªé…ç½®ç±»æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConditionalOnClass(name=&quot;com.alibaba.druid.FastsqlException&quot;)</span> <span class="comment">//æ”¾åœ¨æ–¹æ³•çº§åˆ«ï¼Œå•ç‹¬å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ³¨è§£åˆ¤æ–­ã€‚</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">cat01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¦åˆ™ï¼Œå°±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>Dog</code>ç»„ä»¶ï¼Œådog01</p></li><li><p>å¦‚æœç³»ç»Ÿä¸­æœ‰<code>dog01</code>è¿™ä¸ªç»„ä»¶ï¼Œå°±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª Userç»„ä»¶ï¼Œåzhangsan</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnBean(value = Dog.class)</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">zhangsan</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦åˆ™ï¼Œå°±æ”¾ä¸€ä¸ªUserï¼Œåå«lisi</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnMissingBean(value = Dog.class)</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">lisi</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>@ConditionalOnBeanï¼ˆvalue=ç»„ä»¶ç±»å‹ï¼Œname=ç»„ä»¶åå­—ï¼‰ï¼šåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªç±»å‹çš„ç»„ä»¶ï¼Œå¹¶ä¸”åå­—æ˜¯æŒ‡å®šçš„å€¼</strong></p></li></ol><h4 id="å±æ€§ç»‘å®š">å±æ€§ç»‘å®š</h4><ol><li><p><strong>@ConfigurationPropertiesï¼š å£°æ˜ç»„ä»¶çš„å±æ€§å’Œé…ç½®æ–‡ä»¶å“ªäº›å‰ç¼€å¼€å§‹é¡¹è¿›è¡Œç»‘å®š</strong></p><ol><li>è¿™æ ·é…ç½®ï¼Œå°±ä¼šåœ¨å®¹å™¨çš„propertiesæ–‡ä»¶ä¸­è¯»å–å‰ç¼€ä¸ºpigçš„å±æ€§å€¼</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;pig&quot;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¾‹å¦‚ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pig.id</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">pig.name</span>=ä½©å¥‡</span><br><span class="line"><span class="attr">pig.age</span>=<span class="number">5</span></span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>é…ç½®ç±»</strong>è¿›è¡Œå±æ€§ç»‘å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œæ›¿ä»£ä»¥å‰çš„é…ç½®æ–‡ä»¶ã€‚é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;pig&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pig <span class="title function_">pig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pig</span>(); <span class="comment">//æˆ‘ä»¬è‡ªå·±newæ–°pig</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>@ConfigurationPropertiesæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šæˆ–ç±»ä¸Šï¼Œä¸Šé¢çš„ä»‹ç»æ˜¯ç”¨åœ¨äº†æ–¹æ³•ä¸Šï¼Œä¸‹é¢ä»‹ç»ç”¨åœ¨ç±»ä¸Šçš„å†™æ³•</p></li></ul><p><strong>@EnableConfigurationPropertiesï¼šå¿«é€Ÿæ³¨å†Œæ³¨è§£ï¼š</strong></p><ul><li><p><strong>ä¸»è¦ç”¨äºå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå› ä¸ºspring bootåªæ‰«ææ‰€åœ¨åŒ…ï¼Œæ‰€ä»¥ç¬¬ä¸‰æ–¹åŒ…å°±ç®—å†™äº†@Componentæ³¨è§£ä¹Ÿæ‰«æä¸åˆ°ï¼Œåªèƒ½ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œå¯¼å…¥å’Œå±æ€§ç»‘å®š</strong></p></li><li><p>è¿™ä¸ªæ³¨è§£ç›¸å½“äº@Importå’Œ@ConfigurationProperties</p></li><li><p>**åœºæ™¯ï¼š**SpringBooté»˜è®¤åªæ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ã€‚å¦‚æœå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå³ä½¿ç»„ä»¶ä¸Šæ ‡æ³¨äº† @Componentã€@ConfigurationProperties æ³¨è§£ï¼Œä¹Ÿæ²¡ç”¨ã€‚å› ä¸ºç»„ä»¶éƒ½æ‰«æä¸è¿›æ¥ï¼Œæ­¤æ—¶ä½¿ç”¨è¿™ä¸ªæ³¨è§£å°±å¯ä»¥å¿«é€Ÿè¿›è¡Œå±æ€§ç»‘å®šå¹¶æŠŠç»„ä»¶æ³¨å†Œè¿›å®¹å™¨</p></li><li><p>ä¹‹å‰éœ€è¦å†è¦åŠ å…¥çš„ç»„ä»¶çš„ç±»ä¸Šä½¿ç”¨@ConfigurationPropertieså’Œ@Componentæ³¨è§£ï¼Œè¿™é‡Œåªéœ€è¦å†™å‰è€…å°±è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;sheep&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sheep</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ–‡ä»¶ä¸­å†™</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sheep.id</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">sheep.name</span>=è‹è¥¿</span><br><span class="line"><span class="attr">sheep.age</span>=<span class="number">5</span>r</span><br></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨é…ç½®ç±»ä¸Šä½¿ç”¨@EnableConfigurationPropertiesæ³¨è§£å¯¼å…¥ç¬¬ä¸‰æ–¹å†™å¥½çš„ç»„ä»¶è¿›è¡Œå±æ€§é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€å¼€å¯Sheepç»„ä»¶çš„å±æ€§ç»‘å®š</span></span><br><span class="line"><span class="comment"> * 2ã€é»˜è®¤ä¼šæŠŠè¿™ä¸ªç»„ä»¶è‡ªå·±æ”¾åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(Sheep.class)</span> <span class="comment">//å¯¼å…¥ç¬¬ä¸‰æ–¹å†™å¥½çš„ç»„ä»¶è¿›è¡Œå±æ€§ç»‘å®š</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œæ›¿ä»£ä»¥å‰çš„é…ç½®æ–‡ä»¶ã€‚é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å°†å®¹å™¨ä¸­ä»»æ„<strong>ç»„ä»¶ï¼ˆBeanï¼‰çš„å±æ€§å€¼</strong>å’Œ<strong>é…ç½®æ–‡ä»¶</strong>çš„é…ç½®é¡¹çš„å€¼<strong>è¿›è¡Œç»‘å®š</strong></p><ul><li><strong>1ã€ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ï¼ˆ@Componentã€@Beanï¼‰</strong></li><li><strong>2ã€ä½¿ç”¨</strong>**@ConfigurationProperties å£°æ˜ç»„ä»¶å’Œé…ç½®æ–‡ä»¶çš„å“ªäº›é…ç½®é¡¹è¿›è¡Œç»‘å®š**</li></ul></li></ol><h3 id="YAMLé…ç½®æ–‡ä»¶">YAMLé…ç½®æ–‡ä»¶</h3><p><strong>ç—›ç‚¹</strong>ï¼šSpringBoot é›†ä¸­åŒ–ç®¡ç†é…ç½®ï¼Œ<code>application.properties</code></p><p><strong>é—®é¢˜</strong>ï¼šé…ç½®å¤šä»¥åéš¾é˜…è¯»å’Œä¿®æ”¹ï¼Œ<strong>å±‚çº§ç»“æ„è¾¨è¯†åº¦ä¸é«˜</strong></p><p>YAML æ˜¯ â€œYAML Ainâ€™t a Markup Languageâ€ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€œYet Another Markup Languageâ€ï¼ˆæ˜¯å¦ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚</p><ul><li>è®¾è®¡ç›®æ ‡ï¼Œå°±æ˜¯<strong>æ–¹ä¾¿äººç±»è¯»å†™</strong></li><li><strong>å±‚æ¬¡åˆ†æ˜</strong>ï¼Œæ›´é€‚åˆåšé…ç½®æ–‡ä»¶</li><li>ä½¿ç”¨<code>.yaml</code>æˆ– <code>.yml</code>ä½œä¸ºæ–‡ä»¶åç¼€</li></ul><h4 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</h4><ul><li><p><strong>å¤§å°å†™æ•æ„Ÿ</strong></p></li><li><p>ä½¿ç”¨<strong>ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œk: vï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å‰²k,v</strong></p></li><li><p>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸<strong>ä½¿ç”¨ç©ºæ ¼</strong>ã€‚æ¢è¡Œ</p></li><li><p>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦<strong>ç›¸åŒå±‚çº§</strong>çš„å…ƒç´ <strong>å·¦ä¾§å¯¹é½</strong>å³å¯</p></li><li><p><strong># è¡¨ç¤ºæ³¨é‡Š</strong>ï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚</p></li><li><p>åœ¨propertiesä¸­ä½¿ç”¨&quot;.â€œï¼Œåœ¨ymlä¸­ä½¿ç”¨â€:&quot;å’Œç­‰é‡çš„ç¼©è¿›æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š</p><p><img src="../assets/image/SpringBoot_Image/image-20230907084708284.png" alt="image-20230907084708284"></p></li></ul><p>æ”¯æŒçš„å†™æ³•ï¼š</p><ul><li><strong>å¯¹è±¡</strong>ï¼š<strong>é”®å€¼å¯¹</strong>çš„é›†åˆï¼Œå¦‚ï¼šæ˜ å°„ï¼ˆmapï¼‰/ å“ˆå¸Œï¼ˆhashï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰</li><li><strong>æ•°ç»„</strong>ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œå¦‚ï¼šåºåˆ—ï¼ˆsequenceï¼‰ / åˆ—è¡¨ï¼ˆlistï¼‰</li><li><strong>çº¯é‡</strong>ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ï¼Œå¦‚ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€boolã€æ—¥æœŸ</li></ul><h4 id="ç¤ºä¾‹">ç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span> <span class="comment">//å’Œé…ç½®æ–‡ä»¶personå‰ç¼€çš„æ‰€æœ‰é…ç½®è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="meta">@Data</span> <span class="comment">//è‡ªåŠ¨ç”ŸæˆJavaBeanå±æ€§çš„getter/setter</span></span><br><span class="line"><span class="comment">//@NoArgsConstructor //è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ å™¨</span></span><br><span class="line"><span class="comment">//@AllArgsConstructor //è‡ªåŠ¨ç”Ÿæˆå…¨å‚æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> Boolean like;</span><br><span class="line">    <span class="keyword">private</span> Child child; <span class="comment">//åµŒå¥—å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Dog&gt; dogs; <span class="comment">//æ•°ç»„ï¼ˆé‡Œé¢æ˜¯å¯¹è±¡ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Cat&gt; cats; <span class="comment">//è¡¨ç¤ºMap</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Child</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthDay;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; text; <span class="comment">//æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>propertiesè¡¨ç¤ºæ³•</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person.name</span>=<span class="string">å¼ ä¸‰</span></span><br><span class="line"><span class="attr">person.age</span>=<span class="string">18</span></span><br><span class="line"><span class="attr">person.birthDay</span>=<span class="string">2010/10/12 12:12:12</span></span><br><span class="line"><span class="attr">person.like</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">person.child.name</span>=<span class="string">æå››</span></span><br><span class="line"><span class="attr">person.child.age</span>=<span class="string">12</span></span><br><span class="line"><span class="attr">person.child.birthDay</span>=<span class="string">2018/10/12</span></span><br><span class="line"><span class="attr">person.child.text[0]</span>=<span class="string">abc</span></span><br><span class="line"><span class="attr">person.child.text[1]</span>=<span class="string">def</span></span><br><span class="line"><span class="attr">person.dogs[0].name</span>=<span class="string">å°é»‘</span></span><br><span class="line"><span class="attr">person.dogs[0].age</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">person.dogs[1].name</span>=<span class="string">å°ç™½</span></span><br><span class="line"><span class="attr">person.dogs[1].age</span>=<span class="string">2</span></span><br><span class="line"><span class="attr">person.cats.c1.name</span>=<span class="string">å°è“</span></span><br><span class="line"><span class="attr">person.cats.c1.age</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">person.cats.c2.name</span>=<span class="string">å°ç°</span></span><br><span class="line"><span class="attr">person.cats.c2.age</span>=<span class="string">2</span></span><br></pre></td></tr></table></figure><p>yamlè¡¨ç¤ºæ³•</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">å¼ ä¸‰</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">birthDay:</span> <span class="number">2010</span><span class="string">/10/10</span> <span class="number">12</span><span class="string">:12:12</span></span><br><span class="line">  <span class="attr">like:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">child:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æå››</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">birthDay:</span> <span class="number">2018</span><span class="string">/10/10</span></span><br><span class="line"><span class="comment">#    text: [&quot;abc&quot;,&quot;def&quot;]</span></span><br><span class="line">    <span class="attr">text:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">abc</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">def</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">        dogs:</span></span><br><span class="line"><span class="string">          - name: å°é»‘</span></span><br><span class="line"><span class="string">            age: 3</span></span><br><span class="line"><span class="string">          - name: å°ç™½</span></span><br><span class="line"><span class="string">            age: 2</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="string">&gt;</span></span><br><span class="line"><span class="string">        æ´»åŠ¨ç»“æŸçœ‹å¤§</span></span><br><span class="line"><span class="string">        å·èŠ‚è¯¾ç¬¬ä¸‰</span></span><br><span class="line"><span class="string">        å¸¦å›å®¶çœ‹</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">        dhhdh</span></span><br><span class="line"><span class="string">        fjkdsl</span></span><br><span class="line"><span class="string">        gflkd</span></span><br><span class="line"><span class="string"></span>  <span class="attr">dogs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å°é»‘</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å°ç™½</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">cats:</span></span><br><span class="line">    <span class="attr">c1:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">å°è“</span></span><br><span class="line">      <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">c2:</span> &#123;<span class="attr">name:</span> <span class="string">å°ç»¿</span>,<span class="attr">age:</span> <span class="number">2</span>&#125; <span class="comment">#å¯¹è±¡ä¹Ÿå¯ç”¨&#123;&#125;è¡¨ç¤º</span></span><br></pre></td></tr></table></figure><h4 id="ç»†èŠ‚">ç»†èŠ‚</h4><ul><li><p>birthDay æ¨èå†™ä¸º birth-day</p></li><li><p><strong>æ–‡æœ¬</strong>ï¼š</p></li><li><ul><li><strong>å•å¼•å·</strong>ä¸ä¼šè½¬ä¹‰ã€\n åˆ™ä¸ºæ™®é€šå­—ç¬¦ä¸²æ˜¾ç¤ºã€‘</li><li><strong>åŒå¼•å·</strong>ä¼šè½¬ä¹‰ã€\nä¼šæ˜¾ç¤ºä¸º<strong>æ¢è¡Œç¬¦</strong>ã€‘</li></ul></li><li><p><strong>å¤§æ–‡æœ¬</strong></p></li><li><ul><li><code>|</code>å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼Œ<strong>ä¿ç•™æ–‡æœ¬æ ¼å¼</strong>ï¼Œ<strong>æ¢è¡Œç¬¦æ­£ç¡®æ˜¾ç¤º</strong></li><li><code>&gt;</code>å¼€å¤´ï¼Œå¤§æ–‡æœ¬å†™åœ¨ä¸‹å±‚ï¼ŒæŠ˜å æ¢è¡Œç¬¦</li></ul></li><li><p><strong>å¤šæ–‡æ¡£åˆå¹¶</strong></p></li><li><ul><li>ä½¿ç”¨<code>---</code>å¯ä»¥æŠŠå¤šä¸ªyamlæ–‡æ¡£åˆå¹¶åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£åŒºä¾ç„¶è®¤ä¸ºå†…å®¹ç‹¬ç«‹</li></ul></li></ul><h4 id="å°æŠ€å·§ï¼šlombok">å°æŠ€å·§ï¼šlombok</h4><p>è¿™ä¸ªæ’ä»¶åªåœ¨ç¼–è¯‘æ—¶æœ‰æ•ˆ</p><p>ç®€åŒ–JavaBean å¼€å‘ã€‚è‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€è‡ªåŠ¨ç”ŸæˆBuilderæ¨¡å¼ç­‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>@Data</code>ç­‰æ³¨è§£</p><p>è¿˜æœ‰ç±»ä¼¼çš„æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@NoArgsConstructor //è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ å™¨</span></span><br><span class="line"><span class="comment">//@AllArgsConstructor //è‡ªåŠ¨ç”Ÿæˆå…¨å‚æ„é€ å™¨</span></span><br></pre></td></tr></table></figure><h3 id="æ—¥å¿—é…ç½®">æ—¥å¿—é…ç½®</h3><p>è§„èŒƒï¼šé¡¹ç›®å¼€å‘ä¸è¦ç¼–å†™<code>System.out.println()</code>ï¼Œåº”è¯¥ç”¨<strong>æ—¥å¿—</strong>è®°å½•ä¿¡æ¯</p><p><img src="../assets/image/SpringBoot_Image/image.png" alt="image"></p><p>é—¨é¢å°±æ˜¯æ¥å£ï¼Œç±»ä¼¼äºJDBCçš„ä½œç”¨ï¼Œè€Œæ—¥å¿—å®ç°å°±æ˜¯å…·ä½“çš„è®°å½•æ–¹å¼ï¼Œç±»ä¼¼äºmysqlã€orcal</p><h4 id="ç®€ä»‹">ç®€ä»‹</h4><ol><li><p>Springä½¿ç”¨commons-loggingä½œä¸ºå†…éƒ¨æ—¥å¿—ï¼Œä½†åº•å±‚æ—¥å¿—å®ç°æ˜¯å¼€æ”¾çš„ã€‚å¯å¯¹æ¥å…¶ä»–æ—¥å¿—æ¡†æ¶ã€‚</p></li><li><ol><li>spring5åŠä»¥å commons-loggingè¢«springç›´æ¥è‡ªå·±å†™äº†ã€‚</li></ol></li><li><p>æ”¯æŒ julï¼Œlog4j2,logbackã€‚SpringBoot æä¾›äº†é»˜è®¤çš„æ§åˆ¶å°è¾“å‡ºé…ç½®ï¼Œä¹Ÿå¯ä»¥é…ç½®è¾“å‡ºä¸ºæ–‡ä»¶ã€‚</p></li><li><p>logbackæ˜¯é»˜è®¤ä½¿ç”¨çš„ã€‚</p></li><li><p>è™½ç„¶<strong>æ—¥å¿—æ¡†æ¶å¾ˆå¤š</strong>ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒï¼Œä½¿ç”¨ SpringBoot çš„<strong>é»˜è®¤é…ç½®å°±èƒ½å·¥ä½œçš„å¾ˆå¥½</strong>ã€‚</p></li></ol><p><strong>SpringBootæ€ä¹ˆæŠŠæ—¥å¿—é»˜è®¤é…ç½®å¥½çš„</strong></p><p>1ã€æ¯ä¸ª<code>starter</code>åœºæ™¯ï¼Œéƒ½ä¼šå¯¼å…¥ä¸€ä¸ªæ ¸å¿ƒåœºæ™¯<code>spring-boot-starter</code></p><p>2ã€æ ¸å¿ƒåœºæ™¯å¼•å…¥äº†æ—¥å¿—çš„æ‰€ç”¨åŠŸèƒ½<code>spring-boot-starter-logging</code></p><p>3ã€é»˜è®¤ä½¿ç”¨äº†<code>**logback + slf4j**</code> ç»„åˆä½œä¸ºé»˜è®¤åº•å±‚æ—¥å¿—</p><p>â€‹åŒæ—¶ä¹Ÿå¯¼å…¥äº†å…¶ä»–æ—¥å¿—æ¡†æ¶å¯¹è¿™ä¸¤ä¸ªæ¡†æ¶çš„é€‚é…</p><p>4ã€<code>æ—¥å¿—æ˜¯ç³»ç»Ÿï¼ˆSpringBootï¼‰ä¸€å¯åŠ¨å°±è¦ç”¨</code>ï¼Œ<code>xxxAutoConfiguration</code>æ˜¯ç³»ç»Ÿå¯åŠ¨å¥½äº†ä»¥åæ”¾å¥½çš„ç»„ä»¶ï¼Œåæ¥ç”¨çš„ã€‚</p><p>5ã€æ—¥å¿—æ˜¯åˆ©ç”¨<strong>ç›‘å¬å™¨æœºåˆ¶</strong>é…ç½®å¥½çš„ã€‚<code>ApplicationListener</code>ã€‚</p><p>6ã€æ—¥å¿—æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å®ç°ã€‚ä»¥<code>logging</code>å¼€å§‹çš„æ‰€æœ‰é…ç½®ã€‚</p><h4 id="æ—¥å¿—æ ¼å¼">æ—¥å¿—æ ¼å¼</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2023</span>-<span class="number">03</span>-<span class="number">31</span>T13:<span class="number">56</span>:<span class="number">17</span>.<span class="number">511</span>+<span class="number">08</span>:<span class="number">00</span>  INFO <span class="number">4944</span> ---<span class="meta"> [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span></span><br><span class="line"><span class="attribute">2023</span>-<span class="number">03</span>-<span class="number">31</span>T13:<span class="number">56</span>:<span class="number">17</span>.<span class="number">511</span>+<span class="number">08</span>:<span class="number">00</span>  INFO <span class="number">4944</span> ---<span class="meta"> [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.7]</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤è¾“å‡ºæ ¼å¼ï¼š</p><ul><li>æ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦</li><li>æ—¥å¿—çº§åˆ«ï¼šERROR, WARN, INFO, DEBUG, or TRACE.</li><li>è¿›ç¨‹ ID</li><li>â€”ï¼š æ¶ˆæ¯åˆ†å‰²ç¬¦</li><li>çº¿ç¨‹åï¼š ä½¿ç”¨[]åŒ…å«</li><li>Logger åï¼š é€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„<strong>ç±»å</strong></li><li>æ¶ˆæ¯ï¼š æ—¥å¿—è®°å½•çš„å†…å®¹</li></ul><p>æ³¨æ„ï¼š logback æ²¡æœ‰FATALçº§åˆ«ï¼Œå¯¹åº”çš„æ˜¯ERROR</p><p>é»˜è®¤å€¼ï¼šå‚ç…§ï¼š<code>spring-boot</code>åŒ…<code>additional-spring-configuration-metadata.json</code>æ–‡ä»¶</p><p>é»˜è®¤è¾“å‡ºæ ¼å¼å€¼ï¼š<code>%clr(%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX&#125;&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;</code></p><p>é»˜è®¤å€¼å­˜å‚¨åœ¨spring bootæ ¸å¿ƒåŒ…ä¸­</p><p><img src="../assets/image/SpringBoot_Image/image-20230907152226390.png" alt="image-20230907152226390"></p><p>å¯ä¿®æ”¹ä¸ºï¼š<code>'%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level [%thread] %logger&#123;15&#125; ===&gt; %msg%n'</code></p><p>åœ¨é…ç½®æ–‡ä»¶(application.propertiese)ä¸­å¯ä»¥æ›´æ”¹æ ¼å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#logging.pattern.console=%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5level [%thread] %logger&#123;15&#125; ===&gt; %msg%n</span><br><span class="line">logging.pattern.dateformat=yyyy-MM-dd HH:mm:ss.SSS</span><br><span class="line">#2023-03-31 13:59:58 INFO  [main] o.s.b.w.e.t.TomcatWebServer ===&gt; Tomcat initialized with port(s): 8080 (http)</span><br><span class="line"></span><br><span class="line">#é»˜è®¤æ‰€æœ‰æ—¥å¿—æ²¡æœ‰ç²¾ç¡®æŒ‡å®šçº§åˆ«å°±ä½¿ç”¨rootçš„é»˜è®¤çº§åˆ«</span><br><span class="line">#logging.level.root=info</span><br><span class="line"></span><br><span class="line">#ç²¾ç¡®è°ƒæ•´æŸä¸ªåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«</span><br><span class="line">#logging.level.com.atguigu.logging.controller=debug</span><br><span class="line">#logging.level.com.atguigu.logging.service=debug</span><br><span class="line">#logging.level.com.aaa=debug</span><br><span class="line">#logging.level.com.bbb=debug</span><br><span class="line"></span><br><span class="line">logging.group.abc=com.atguigu.logging.controller,com.atguigu.logging.service,com.aaa,com.bbb</span><br><span class="line"></span><br><span class="line">logging.level.abc=debug</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging.level.sql=debug</span><br></pre></td></tr></table></figure><h4 id="è®°å½•æ—¥å¿—">è®°å½•æ—¥å¿—</h4><p>æ ¹æ®æ¥æ”¶ä¸åŒçš„æŒ‡ä»¤æ¥è®°å½•ä¸åŒçš„æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹æ³•è®°å½•ä¸åŒç­‰çº§çš„æ—¥å¿—</p><p>é»˜è®¤çº§åˆ«æ˜¯infoï¼Œæ‰€ä»¥åªä¼šæ‰“å°infoå’Œæ›´é«˜çº§åˆ«çš„æ—¥å¿—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"><span class="comment">//    Logger logger = LoggerFactory.getLogger(getClass());</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/h/**&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            log.trace(<span class="string">&quot;trace æ—¥å¿—.....&quot;</span>);</span><br><span class="line">            log.debug(<span class="string">&quot;debug æ—¥å¿—.....&quot;</span>);</span><br><span class="line">            <span class="comment">//SpringBootåº•å±‚é»˜è®¤çš„æ—¥å¿—çº§åˆ« info</span></span><br><span class="line">            log.info(<span class="string">&quot;info æ—¥å¿—..... å‚æ•°a:&#123;&#125; b:&#123;&#125;&quot;</span>,a,b);</span><br><span class="line">            log.warn(<span class="string">&quot;warn æ—¥å¿—...&quot;</span>);</span><br><span class="line">            log.error(<span class="string">&quot;error æ—¥å¿—...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°æ—¥å¿—å¹¶ä¸æ˜¯ä½¿ç”¨System.out.println();ï¼Œè€Œæ˜¯ä¸Šé¢æ¼”ç¤ºçš„é‚£æ ·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">æˆ–è€…ä½¿ç”¨Lombokçš„<span class="meta">@Slf4j</span>æ³¨è§£</span><br></pre></td></tr></table></figure><h4 id="æ—¥å¿—çº§åˆ«">æ—¥å¿—çº§åˆ«</h4><ul><li><p>ç”±ä½åˆ°é«˜ï¼š<code>ALL,TRACE, DEBUG, INFO, WARN, ERROR,FATAL,OFF</code>ï¼›</p></li><li><ul><li><strong>åªä¼šæ‰“å°æŒ‡å®šçº§åˆ«åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—</strong></li><li>ALLï¼šæ‰“å°æ‰€æœ‰æ—¥å¿—</li><li>TRACEï¼šè¿½è¸ªæ¡†æ¶è¯¦ç»†æµç¨‹æ—¥å¿—ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</li><li>DEBUGï¼šå¼€å‘è°ƒè¯•ç»†èŠ‚æ—¥å¿—</li><li>INFOï¼šå…³é”®ã€æ„Ÿå…´è¶£ä¿¡æ¯æ—¥å¿—</li><li>WARNï¼šè­¦å‘Šä½†ä¸æ˜¯é”™è¯¯çš„ä¿¡æ¯æ—¥å¿—ï¼Œæ¯”å¦‚ï¼šç‰ˆæœ¬è¿‡æ—¶</li><li>ERRORï¼šä¸šåŠ¡é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚å‡ºç°å„ç§å¼‚å¸¸</li><li>FATALï¼šè‡´å‘½é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚jvmç³»ç»Ÿå´©æºƒ</li><li>OFFï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•</li></ul></li><li><p>ä¸æŒ‡å®šçº§åˆ«çš„æ‰€æœ‰ç±»ï¼Œéƒ½ä½¿ç”¨rootæŒ‡å®šçš„çº§åˆ«ä½œä¸ºé»˜è®¤çº§åˆ«</p></li><li><p>SpringBootæ—¥å¿—<strong>é»˜è®¤çº§åˆ«æ˜¯</strong> <strong>INFO</strong></p></li></ul><p>â€‹åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨logging.level.root=infoå¯ä»¥è°ƒæ•´æ—¥å¿—çº§åˆ«</p><ol><li>åœ¨application.properties/yamlä¸­é…ç½®logging.level.<logger-name>=<level>æŒ‡å®šæ—¥å¿—çº§åˆ«</li><li>levelå¯å–å€¼èŒƒå›´ï¼š<code>TRACE, DEBUG, INFO, WARN, ERROR, FATAL, or OFF</code>ï¼Œå®šä¹‰åœ¨ <code>LogLevel</code>ç±»ä¸­</li><li>root çš„logger-nameå«rootï¼Œå¯ä»¥é…ç½®logging.level.root=warnï¼Œä»£è¡¨æ‰€æœ‰æœªæŒ‡å®šæ—¥å¿—çº§åˆ«éƒ½ä½¿ç”¨ root çš„ warn çº§åˆ«</li></ol><h4 id="æ—¥å¿—åˆ†ç»„">æ—¥å¿—åˆ†ç»„</h4><p>æ¯”è¾ƒæœ‰ç”¨çš„æŠ€å·§æ˜¯ï¼š</p><p>å°†ç›¸å…³çš„loggeråˆ†ç»„åœ¨ä¸€èµ·ï¼Œç»Ÿä¸€é…ç½®ã€‚SpringBoot ä¹Ÿæ”¯æŒã€‚æ¯”å¦‚ï¼šTomcat ç›¸å…³çš„æ—¥å¿—ç»Ÿä¸€è®¾ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logging.group.tomcat=org.apache.catalina,org.apache.coyote,org.apache.tomcat</span><br><span class="line">logging.level.tomcat=trace</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åˆ†åˆ«é…ç½®æŸä¸ªåŒ…çš„æ—¥å¿—çº§åˆ«</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#ç²¾ç¡®è°ƒæ•´æŸä¸ªåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«</span><br><span class="line"><span class="selector-id">#logging</span><span class="selector-class">.level</span><span class="selector-class">.com</span><span class="selector-class">.atguigu</span><span class="selector-class">.logging</span>.controller=debug</span><br><span class="line"><span class="selector-id">#logging</span><span class="selector-class">.level</span><span class="selector-class">.com</span><span class="selector-class">.atguigu</span><span class="selector-class">.logging</span>.service=debug</span><br><span class="line"><span class="selector-id">#logging</span><span class="selector-class">.level</span><span class="selector-class">.com</span>.aaa=debug</span><br><span class="line"><span class="selector-id">#logging</span><span class="selector-class">.level</span><span class="selector-class">.com</span>.bbb=debug</span><br></pre></td></tr></table></figure><p>SpringBoot é¢„å®šä¹‰ä¸¤ä¸ªç»„</p><table><thead><tr><th>Name</th><th>Loggers</th></tr></thead><tbody><tr><td>web</td><td>org.springframework.core.codec, org.springframework.http, <a href="http://org.springframework.web">org.springframework.web</a>, <a href="http://org.springframework.boot.actuate.endpoint.web">org.springframework.boot.actuate.endpoint.web</a>, org.springframework.boot.web.servlet.ServletContextInitializerBeans</td></tr><tr><td>sql</td><td>org.springframework.jdbc.core, org.hibernate.SQL, org.jooq.tools.LoggerListener</td></tr></tbody></table><h4 id="æ–‡ä»¶è¾“å‡º">æ–‡ä»¶è¾“å‡º</h4><p>SpringBoot é»˜è®¤åªæŠŠæ—¥å¿—å†™åœ¨æ§åˆ¶å°ï¼Œå¦‚æœæƒ³é¢å¤–è®°å½•åˆ°æ–‡ä»¶ï¼Œ<a href="http://xn--application-2u0r773cbuk.xn--propertieslogging-4g60al23dy78j.file.name">å¯ä»¥åœ¨application.propertiesä¸­æ·»åŠ logging.file.name</a> or logging.file.pathé…ç½®é¡¹ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„, æ—¥å¿—æ–‡ä»¶é»˜è®¤åå« spring.log</span></span><br><span class="line"><span class="comment">#logging.file.path=D:\\</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„åï¼š filename å’Œ pathçš„é…ç½®åŒæ—¶å­˜åœ¨åªçœ‹filename</span></span><br><span class="line"><span class="comment"># 1ã€åªå†™åå­—ï¼š å°±ç”Ÿæˆåˆ°å½“å‰é¡¹ç›®åŒä½ç½®çš„ my.log</span></span><br><span class="line"><span class="comment"># 2ã€å†™åå­—+è·¯å¾„ï¼šç”Ÿæˆåˆ°æŒ‡å®šä½ç½®çš„æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line"><span class="attr">logging.file.name</span>=<span class="string">my.log</span></span><br></pre></td></tr></table></figure><p><a href="http://xn--pathnamelog-z18qomo3ff65awvl2ms3q1ax5dwupus6kyftd.info">åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®špathæˆ–nameä¹‹ålog.info</a>()ç­‰æ–¹æ³•å°±ä¼šç›´æ¥å°†æ—¥å¿—å†™åœ¨æ–‡ä»¶ä¸­</p><table><thead><tr><th><a href="http://logging.file.name">logging.file.name</a></th><th>logging.file.path</th><th>ç¤ºä¾‹</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>æœªæŒ‡å®š</td><td>æœªæŒ‡å®š</td><td></td><td>ä»…æ§åˆ¶å°è¾“å‡º</td></tr><tr><td><strong>æŒ‡å®š</strong></td><td>æœªæŒ‡å®š</td><td>my.log</td><td>å†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚å¯ä»¥åŠ è·¯å¾„</td></tr><tr><td>æœªæŒ‡å®š</td><td><strong>æŒ‡å®š</strong></td><td>/var/log</td><td>å†™å…¥æŒ‡å®šç›®å½•ï¼Œæ–‡ä»¶åä¸ºspring.log</td></tr><tr><td><strong>æŒ‡å®š</strong></td><td><strong>æŒ‡å®š</strong></td><td></td><td>ä»¥logging.file.nameä¸ºå‡†</td></tr></tbody></table><h4 id="æ–‡ä»¶å½’æ¡£ä¸æ–‡ä»¶åˆ‡å‰²">æ–‡ä»¶å½’æ¡£ä¸æ–‡ä»¶åˆ‡å‰²</h4><p>å½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚</p><p>åˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶10MBï¼Œè¶…è¿‡å¤§å°åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚</p><ol><li>æ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£ã€‚å¦‚æœä½¿ç”¨logbackï¼ˆSpringBoot é»˜è®¤æ•´åˆï¼‰ï¼Œå¯ä»¥é€šè¿‡application.properties/yamlæ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™ã€‚</li><li>å¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œé…ç½®ï¼ˆæ·»åŠ log4j2.xmlæˆ–log4j2-spring.xmlï¼‰</li><li>æ”¯æŒçš„æ»šåŠ¨è§„åˆ™è®¾ç½®å¦‚ä¸‹</li></ol><table><thead><tr><th>é…ç½®é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>logging.logback.rollingpolicy.file-name-pattern</td><td>æ—¥å¿—å­˜æ¡£çš„æ–‡ä»¶åæ ¼å¼ï¼ˆé»˜è®¤å€¼ï¼š${LOG_FILE}.%d{yyyy-MM-dd}.%i.gzï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.clean-history-on-start</td><td>åº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…é™¤ä»¥å‰å­˜æ¡£ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.max-file-size</td><td>å­˜æ¡£å‰ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š10MBï¼‰</td></tr><tr><td>logging.logback.rollingpolicy.total-size-cap</td><td>æ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œå¯ä»¥å®¹çº³çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š0Bï¼‰ã€‚è®¾ç½®1GBåˆ™ç£ç›˜å­˜å‚¨è¶…è¿‡ 1GB æ—¥å¿—åå°±ä¼šåˆ é™¤æ—§æ—¥å¿—æ–‡ä»¶</td></tr><tr><td>logging.logback.rollingpolicy.max-history</td><td>æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æœ€å¤§å¤©æ•°(é»˜è®¤å€¼ï¼š7).</td></tr></tbody></table><p>é…ç½®æ–‡ä»¶å†™æ³•</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å½’æ¡£ã€åˆ‡å‰²</span></span><br><span class="line"><span class="comment">#%iæ˜¯å½“å¤©çš„ç¬¬å‡ ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.file-name-pattern</span>=<span class="string">$&#123;LOG_FILE&#125;.%d&#123;yyyy-MM-dd&#125;.%i.gz</span></span><br><span class="line"><span class="attr">logging.logback.rollingpolicy.max-file-size</span>=<span class="string">1MB</span></span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰é…ç½®">è‡ªå®šä¹‰é…ç½®</h4><p>é€šå¸¸æˆ‘ä»¬é…ç½® application.properties å°±å¤Ÿäº†ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚æ¯”å¦‚ï¼š</p><table><thead><tr><th>æ—¥å¿—ç³»ç»Ÿ</th><th>è‡ªå®šä¹‰</th></tr></thead><tbody><tr><td>Logback</td><td>logback-spring.xml, logback-spring.groovy, logback.xml, or logback.groovy</td></tr><tr><td>Log4j2</td><td>log4j2-spring.xml or log4j2.xml</td></tr><tr><td>JDK (Java Util Logging)</td><td>logging.properties</td></tr></tbody></table><p><strong>åœ¨æŒ‡å®šçš„æ–‡ä»¶åçš„æ–‡ä»¶ä¸­é…ç½®ä¹Ÿå¯ä»¥è¿›è¡Œé…ç½®</strong></p><p>å¦‚æœå¯èƒ½ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨åœ¨æ—¥å¿—é…ç½®ä¸­ä½¿ç”¨<code>-spring</code> å˜é‡ï¼ˆä¾‹å¦‚ï¼Œ<code>logback-spring.xml</code> è€Œä¸æ˜¯ <code>logback.xml</code>ï¼‰ã€‚å¦‚æœæ‚¨ä½¿ç”¨æ ‡å‡†é…ç½®æ–‡ä»¶ï¼Œspring æ— æ³•å®Œå…¨æ§åˆ¶æ—¥å¿—åˆå§‹åŒ–ã€‚</p><p>æœ€ä½³å®æˆ˜ï¼šè‡ªå·±è¦å†™é…ç½®ï¼Œé…ç½®æ–‡ä»¶ååŠ ä¸Š <code>xx-spring.xml</code></p><h4 id="åˆ‡æ¢æ—¥å¿—ç»„åˆ">åˆ‡æ¢æ—¥å¿—ç»„åˆ</h4><p>ä¸æƒ³ç”¨é»˜è®¤çš„æ—¥å¿—ç³»ç»Ÿï¼Œå¯ä»¥åœ¨pomæ–‡ä»¶ä¸­å£°æ˜ä¸è¦é»˜è®¤çš„æ—¥å¿—ç³»ç»Ÿï¼Œç„¶ååœ¨æŒ‡å®šæƒ³è¦çš„æ—¥å¿—ç³»ç»Ÿä¸‹é¢æ¼”ç¤ºå°†loggingæ›¿æ¢ä¸ºlog4j2</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>log4j2æ”¯æŒyamlå’Œjsonæ ¼å¼çš„é…ç½®æ–‡ä»¶</p><table><thead><tr><th>æ ¼å¼</th><th>ä¾èµ–</th><th>æ–‡ä»¶å</th></tr></thead><tbody><tr><td>YAML</td><td>com.fasterxml.jackson.core:jackson-databind + com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</td><td>log4j2.yaml + log4j2.yml</td></tr><tr><td>JSON</td><td>com.fasterxml.jackson.core:jackson-databind</td><td>log4j2.json + log4j2.jsn</td></tr></tbody></table><h4 id="æœ€ä½³å®æˆ˜">æœ€ä½³å®æˆ˜</h4><p>1å¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œå…ˆæ’é™¤å®ƒçš„æ—¥å¿—åŒ…ï¼Œå› ä¸ºBootåº•å±‚æ§åˆ¶å¥½äº†æ—¥å¿—<br>2ä¿®æ”¹ application.properties é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸ºã€‚å¦‚æœä¸å¤Ÿï¼Œå¯ä»¥ç¼–å†™æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸‹å°±è¡Œï¼Œæ¯”å¦‚logback-spring.xmlï¼Œlog4j2-spring.xml<br>3å¦‚éœ€å¯¹æ¥ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿï¼Œä¹Ÿåªéœ€è¦æŠŠ logback è®°å½•çš„æ—¥å¿—çŒå€’ kafkaä¹‹ç±»çš„ä¸­é—´ä»¶ï¼Œè¿™å’ŒSpringBootæ²¡å…³ç³»ï¼Œéƒ½æ˜¯æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯<br><strong>4</strong>ä¸šåŠ¡ä¸­ä½¿ç”¨slf4j-apiè®°å½•æ—¥å¿—ã€‚ä¸è¦å† sout äº†</p><h1>Webå¼€å‘</h1><p>SpringBootçš„Webå¼€å‘èƒ½åŠ›ï¼Œç”±<strong>SpringMVC</strong>æä¾›ã€‚</p><h2 id="WebMvcAutoConfigurationç±»åŸç†">WebMvcAutoConfigurationç±»åŸç†</h2><h3 id="ç”Ÿæ•ˆæ¡ä»¶">ç”Ÿæ•ˆæ¡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = &#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">ValidationAutoConfiguration.class &#125;)</span> <span class="comment">//åœ¨è¿™äº›è‡ªåŠ¨é…ç½®ä¹‹å,åœ¨è¿›è¡Œ@AutoConfigurationçš„é…ç½®</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span> <span class="comment">//å¦‚æœæ˜¯webåº”ç”¨å°±ç”Ÿæ•ˆï¼Œè¿™é‡ŒæŒ‡æ˜ç±»å‹å¿…é¡»æ˜¯SERVLETï¼Œè¿˜æœ‰ä¸€äº›ç±»å‹ï¼šREACTIVE å“åº”å¼web</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span> <span class="comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªBeanï¼Œè¿™ä¸ªé…ç½®æ‰ç”Ÿæ•ˆã€‚</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><span class="comment">//ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(WebResourcesRuntimeHints.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœ">æ•ˆæœ</h3><ol><li><p>æ”¾äº†ä¸¤ä¸ªFilterï¼š</p><ol><li><p>HiddenHttpMethodFilter`ï¼›é¡µé¢è¡¨å•æäº¤Restè¯·æ±‚ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰</p><ol><li><p>è¡¨å•é»˜è®¤åªæœ‰GETã€POSTï¼Œä½†æ˜¯åŠ äº†è¿™ä¸ªFilterä¹‹åå°±å¯ä»¥æäº¤Restè¯·æ±‚</p></li><li><p><code>FormContentFilter</code>ï¼š è¡¨å•å†…å®¹Filterï¼ŒGETï¼ˆæ•°æ®æ”¾URLåé¢ï¼‰ã€POSTï¼ˆæ•°æ®æ”¾è¯·æ±‚ä½“ï¼‰è¯·æ±‚å¯ä»¥æºå¸¦æ•°æ®ï¼ŒPUTã€DELETE çš„è¯·æ±‚ä½“æ•°æ®ä¼šè¢«å¿½ç•¥ï¼Œä½†æ˜¯åŠ äº†è¿™ä¸ªFilterä¹‹åå°±ä¸ä¼šè¢«å¿½ç•¥</p></li></ol></li></ol></li><li><p>ç»™å®¹å™¨ä¸­æ”¾äº†<code>WebMvcConfigurerï¼ˆè¿™æ˜¯æ¥å£ï¼‰</code>ç»„ä»¶ï¼›ç»™SpringMVCæ·»åŠ å„ç§å®šåˆ¶åŠŸèƒ½</p><ol><li><p>æ‰€æœ‰çš„åŠŸèƒ½æœ€ç»ˆä¼šå’Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®š</p><ol><li>WebMvcPropertiesï¼š ç”¨è¿™ä¸ªå‰ç¼€<code>spring.mvc</code>é…ç½®æ–‡ä»¶</li><li>WebPropertiesï¼š ç”¨è¿™ä¸ªå‰ç¼€<code>spring.web</code>é…ç½®æ–‡ä»¶</li><li>è¿™ä¸¤ä¸ªå‰ç¼€å¯ä»¥é…ç½®åº•å±‚æ˜¯å› ä¸ºåœ¨WebMvcConfigureræ¥å£ä¸­æ˜¯ä»€ä¹ˆå†™çš„</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span> <span class="comment">//é¢å¤–å¯¼å…¥äº†å…¶ä»–é…ç½®</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123; WebMvcProperties.class, WebProperties.class &#125;)</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>, ServletContextAware&#123;</span><br><span class="line">       </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="WebMvcConfigureræ¥å£">WebMvcConfigureræ¥å£</h3><p>ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ¥å£ï¼Œå‡ ä¹åŒ…æ‹¬æ‰€æœ‰å¯é…ç½®çš„SpringMVCåº•å±‚çš„</p><p><strong>æä¾›äº†é…ç½®SpringMVCåº•å±‚çš„æ‰€æœ‰ç»„ä»¶å…¥å£</strong></p><ul><li>å‚æ•°è§£æå™¨ï¼š@Controllerä¸Šæ‰€æœ‰é…ç½®çš„ä¿¡æ¯éƒ½ç”±ä»–æ¥è§£æ<ul><li>çŸ¥è¯†å›é¡¾ï¼šè¢«@Controlleræ ‡è®°çš„ç±»ç”¨äºå¤„ç†HTTPè¯·æ±‚ï¼Œç±»ä¸­çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨@GetMapping(â€œ/helloâ€)æ³¨è§£æ¥æŒ‡å®šå“ªä¸ªé“¾æ¥ç”±è¿™ä¸ªæ–¹æ³•å¤„ç†</li><li>@Controllerå’Œ@RestController<ul><li>å¦‚æœæ‚¨çš„Spring MVCåº”ç”¨ç¨‹åºéœ€è¦è¿”å›HTMLè§†å›¾ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>@Controller</code>æ³¨è§£æ¥åˆ›å»ºæ§åˆ¶å™¨ã€‚</li><li>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸»è¦æ˜¯æä¾›RESTful APIï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>@RestController</code>æ³¨è§£ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ–¹æ³•çš„è¿”å›å€¼è½¬æ¢ä¸ºJSONæˆ–XMLå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ul></li></ul></li><li>è·¨åŸŸ</li><li>æ ¼å¼åŒ–å™¨ï¼šæ—¥æœŸæ ¼å¼çš„è½¬æ¢ç­‰</li><li>æ‹¦æˆªå™¨</li><li>æ·»åŠ èµ„æºå¤„ç†å™¨ï¼šç”¨äºå¤„ç†é™æ€èµ„æºè§„åˆ™</li><li>è¿”å›å€¼å¤„ç†å™¨ï¼šä¾‹å¦‚å¤„ç†è¯·æ±‚çš„æ–¹æ³•è¿”å›çš„æ˜¯Stringï¼Œç”±è¿™ä¸ªå¤„ç†å™¨è§£æ</li><li>è§†å›¾æ§åˆ¶å™¨ï¼šç”¨äºå¤„ç†è¯·æ±‚æ—¶è·³è½¬é¡µé¢</li><li>å¼‚æ­¥æ”¯æŒ</li><li>å†…å®¹åå•†ï¼š</li><li>é»˜è®¤å¤„ç†ï¼šå¤„ç†é»˜è®¤æ¥æ”¶/è¯·æ±‚</li><li>é…ç½®å¼‚å¸¸è§£æå™¨ï¼šé…ç½®å¼‚å¸¸è§£æå™¨æ—¶éœ€è¦ä½¿ç”¨è¿™ä¸ªæ¥å£<ul><li>å¦‚æœæœ‰éœ€è¦å¤„ç†çš„å¼‚å¸¸ï¼Œå¯ä»¥å®ç°è¿™ä¸ªæ¥å£ä¸­çš„æ–¹æ³•</li></ul></li><li>æ¶ˆæ¯è½¬åŒ–å™¨ï¼šä¸€èˆ¬ç”¨äºæ ¼å¼åŒ–ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ç®¡</li><li>è·¯åŠ²åŒ¹é…ï¼š@GetMapping(â€œ/helloâ€)ç”±è¿™ä¸ªè´Ÿè´£æ ¹æ®è·¯å¾„å¯»æ‰¾èµ„æº</li><li>è§†å›¾è§£æ</li><li>æ‹“å±•ï¼šå¼‚å¸¸è§£æ<ul><li>ç”¨äºå¢åŠ æ›´å¤šçš„å¼‚å¸¸å¤„ç†</li></ul></li><li>æ‰©å±•ï¼šæ¶ˆæ¯è½¬åŒ–</li></ul><p><img src="../assets/image/SpringBoot_Image/1681093891854-26205c88-4c20-4b63-a2c3-02574778072f.png" alt="image.png"></p><h3 id="é™æ€èµ„æºè§„åˆ™æºç ">é™æ€èµ„æºè§„åˆ™æºç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1ã€</span></span><br><span class="line">    addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getWebjarsPathPattern(),</span><br><span class="line">            <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">    addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getStaticPathPattern(), (registration) -&gt; &#123;</span><br><span class="line">        registration.addResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.servletContext != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">ServletContextResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextResource</span>(<span class="built_in">this</span>.servletContext, SERVLET_LOCATION);</span><br><span class="line">            registration.addResourceLocations(resource);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>è§„åˆ™ä¸€ï¼šè®¿é—®ï¼š <code>/webjars/**</code>è·¯å¾„å°±å» <code>classpath:/META-INF/resources/webjars/</code>ä¸‹æ‰¾èµ„æº.</p><ol><li><p><code>classpath</code>å¯ä»¥æ˜¯javaçš„æ ¹ç›®å½•æˆ–<code>resources</code>çš„æ ¹ç›®å½•ï¼Œæ‰€ä»¥META-INFåˆ›å»ºåœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ä»»æ„ä¸€ä¸ªå°±è¡Œ</p></li><li><p>maven å¯¼å…¥ä¾èµ–ï¼Œå°±å¯ä»¥ä½¿ç”¨cssæˆ–è€…jsäº†ï¼ˆä¸å¸¸ç”¨ï¼‰</p><ol><li><p>åœ¨ç½‘ç«™<a href="https://www.webjars.org/">webjars</a>ä¸­å¯ä»¥æ‰¾åˆ°mavenä¾èµ–</p></li><li><p>å¯¼å…¥ä¸€ä¸ªä»¥åï¼Œå°±å¯ä»¥åœ¨IDEAçš„å¤–éƒ¨åº“çš„mavenç³»åˆ—åº“ä¸­æ‰¾åˆ°å¯¹åº”çš„åº“</p><p><img src="../assets/image/SpringBoot_Image/image-20230909161259082.png" alt="image-20230909161259082"></p></li></ol></li></ol></li><li><p>è§„åˆ™äºŒï¼šè®¿é—®ï¼š <code>/**</code>è·¯å¾„å°±å» <code>é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æº</code></p><ol><li><p>è¿™å››ä¸ªè·¯å¾„åªè¦åœ¨resourcesæ–‡ä»¶å¤¹ä¸­åˆ›å»ºï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨ä¸­çš„åœ°å€æ è®¿é—®</p><ol><li>ä¾‹å¦‚<code>resources/public/1.jpg</code>å¯ä»¥é€šè¿‡<code>localhost:8080/1.jpg</code>æ¥è®¿é—®</li></ol></li><li><p><code>classpath:/META-INF/resources/</code></p></li><li><p><code>classpath:/resources/</code></p></li><li><p><code>classpath:/static/</code></p></li><li><p><code>classpath:/public/</code></p></li></ol></li><li><p>è§„åˆ™ä¸‰ï¼š<strong>é™æ€èµ„æºé»˜è®¤éƒ½æœ‰ç¼“å­˜è§„åˆ™çš„è®¾ç½®</strong></p><ol><li><p>æ‰€æœ‰ç¼“å­˜çš„è®¾ç½®ï¼Œç›´æ¥é€šè¿‡<strong>é…ç½®æ–‡ä»¶</strong>ï¼š <code>spring.web</code>ï¼Œé…ç½®äº†ä»¥ä¸‹å±æ€§</p></li><li><p>cachePeriodï¼š ç¼“å­˜å‘¨æœŸï¼› å¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ã€‚ é»˜è®¤æ²¡æœ‰ï¼Œä»¥sä¸ºå•ä½</p></li><li><p>cacheControlï¼š <strong>HTTPç¼“å­˜</strong>æ§åˆ¶ï¼›</p><ol><li>æ›´å¤šå‚ç…§ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching#%E6%A6%82%E8%A7%88">HTTPç¼“å­˜è§„èŒƒ</a></li></ol></li><li><p><strong>useLastModified</strong>ï¼šæ˜¯å¦ä½¿ç”¨æœ€åä¸€æ¬¡ä¿®æ”¹ã€‚é…åˆHTTP Cacheè§„åˆ™</p><ol><li>trueï¼šå¦‚æœè¯¢é—®æœåŠ¡å™¨å¾—åˆ°çš„æœ€åä¸€ä¸ªèµ„æºä¿®æ”¹çš„æ—¶é—´å’Œæœ¬åœ°å¯¹ä¸ä¸Šï¼Œå°±ä¼šåœ¨å‘æœåŠ¡å™¨ç´¢è¦æ–°çš„ä¿®æ”¹</li><li>falseï¼šå°±ç®—æœ€åä¸€ä¸ªæ—¶é—´å¯¹ä¸ä¸Šï¼ŒçŸ­æ—¶é—´å†…ä¹Ÿä¸ä¼šåœ¨å‘æœåŠ¡å™¨è¦æ–°çš„ä¿®æ”¹</li></ol></li></ol></li></ol><p>å¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº <code>index.js</code>ï¼Œå¦‚æœæœåŠ¡è¿™ä¸ªèµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘è¯·æ±‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registration.setCachePeriod(getSeconds(<span class="built_in">this</span>.resourceProperties.getCache().getPeriod()));</span><br><span class="line">registration.setCacheControl(<span class="built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());</span><br><span class="line">registration.setUseLastModified(<span class="built_in">this</span>.resourceProperties.getCache().isUseLastModified());</span><br></pre></td></tr></table></figure><h3 id="EnableWebMvcConfiguration-æºç ">EnableWebMvcConfiguration æºç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SpringBoot é»˜è®¤ç»™å®¹å™¨ä¸­æ”¾ WebMvcConfigurationSupport ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¦‚æœè‡ªå·±æ”¾äº† WebMvcConfigurationSupport ç»„ä»¶ï¼ŒBootçš„WebMvcAutoConfigurationéƒ½ä¼šå¤±æ•ˆã€‚</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(WebProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">DelegatingWebMvcConfiguration</span> <span class="keyword">implements</span> <span class="title class_">ResourceLoaderAware</span> </span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><code>HandlerMapping</code>ï¼š æ ¹æ®è¯·æ±‚è·¯å¾„ <code> /a</code> æ‰¾é‚£ä¸ªhandlerèƒ½å¤„ç†è¯·æ±‚<ol><li><code>WelcomePageHandlerMapping</code>ï¼š<ol><li>è®¿é—® <code>/**</code>è·¯å¾„ä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½åœ¨ä»¥å‰å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æ‰¾ï¼Œæ¬¢è¿é¡µä¹Ÿä¸€æ ·</li><li>æ‰¾<code>index.html</code>ï¼šåªè¦é™æ€èµ„æºçš„ä½ç½®æœ‰ä¸€ä¸ª <code>index.html</code>é¡µé¢ï¼Œé¡¹ç›®å¯åŠ¨é»˜è®¤è®¿é—®</li></ol></li></ol></li></ol><h3 id="ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½é…ç½®åº•å±‚è¡Œä¸º">ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>WebMvcConfigurer</code>å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º</h3><ol><li>WebMvcAutoConfiguration æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª <code>EnableWebMvcConfiguration</code></li><li><code>EnableWebMvcConfiguration</code>ç»§æ‰¿ä¸ <code>DelegatingWebMvcConfiguration</code>ï¼Œè¿™ä¸¤ä¸ªéƒ½ç”Ÿæ•ˆ</li><li><code>DelegatingWebMvcConfiguration</code>åˆ©ç”¨ IOCä¸­çš„DI æŠŠå®¹å™¨ä¸­ æ‰€æœ‰ <code>WebMvcConfigurer </code>æ³¨å…¥è¿›æ¥</li><li>åˆ«äººè°ƒç”¨ <code>DelegatingWebMvcConfiguration</code> çš„æ–¹æ³•é…ç½®åº•å±‚è§„åˆ™ï¼Œè€Œå®ƒè°ƒç”¨æ‰€æœ‰ <code>WebMvcConfigurer</code>çš„é…ç½®åº•å±‚æ–¹æ³•ã€‚</li></ol><h3 id="WebMvcConfigurationSupport">WebMvcConfigurationSupport</h3><p>æä¾›äº†å¾ˆå¤šçš„é»˜è®¤è®¾ç½®ã€‚</p><p>åˆ¤æ–­ç³»ç»Ÿä¸­æ˜¯å¦æœ‰ç›¸åº”çš„ç±»ï¼šå¦‚æœæœ‰ï¼Œå°±åŠ å…¥ç›¸åº”çš„<code>HttpMessageConverter</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jackson2Present = ClassUtils.isPresent(<span class="string">&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;</span>, classLoader) &amp;&amp;</span><br><span class="line">ClassUtils.isPresent(<span class="string">&quot;com.fasterxml.jackson.core.JsonGenerator&quot;</span>, classLoader);</span><br><span class="line">jackson2XmlPresent = ClassUtils.isPresent(<span class="string">&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;</span>, classLoader);</span><br><span class="line">jackson2SmilePresent = ClassUtils.isPresent(<span class="string">&quot;com.fasterxml.jackson.dataformat.smile.SmileFactory&quot;</span>, classLoader);</span><br></pre></td></tr></table></figure><h2 id="Webåœºæ™¯">Webåœºæ™¯</h2><h3 id="è‡ªåŠ¨é…ç½®">è‡ªåŠ¨é…ç½®</h3><p>1ã€æ•´åˆwebåœºæ™¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€å¼•å…¥äº† <code>autoconfigure</code>åŠŸèƒ½</p><p>3ã€<code>@EnableAutoConfiguration</code>æ³¨è§£ä½¿ç”¨<code>@Import(AutoConfigurationImportSelector.class)</code>æ‰¹é‡å¯¼å…¥ç»„ä»¶</p><p>4ã€åŠ è½½ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰ç»„ä»¶</p><p>5ã€æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»å¦‚ä¸‹</p><p>â€‹è¿™äº›è‡ªåŠ¨é…ç½®ç±»ç»™å®¹å™¨ä¸­æ”¾äº†å¾ˆå¤šç»„ä»¶ï¼Œæä¾›äº†å¾ˆå¤šé»˜è®¤åŠŸèƒ½</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration</span><br><span class="line">====ä»¥ä¸‹æ˜¯å“åº”å¼webåœºæ™¯å’Œç°åœ¨çš„æ²¡å…³ç³»======</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration</span><br><span class="line">================ä»¥ä¸Šæ²¡å…³ç³»=================</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</span><br></pre></td></tr></table></figure><p>6ã€ç»‘å®šäº†é…ç½®æ–‡ä»¶çš„ä¸€å †é…ç½®é¡¹</p><ul><li>1ã€SpringMVCçš„æ‰€æœ‰é…ç½® <code>spring.mvc</code></li><li>2ã€Webåœºæ™¯é€šç”¨é…ç½® <code>spring.web</code></li><li>3ã€æ–‡ä»¶ä¸Šä¼ é…ç½® <code>spring.servlet.multipart</code></li><li>4ã€æœåŠ¡å™¨çš„é…ç½® <code>server</code>: æ¯”å¦‚ï¼šç¼–ç æ–¹å¼</li></ul><h3 id="é»˜è®¤æ•ˆæœ">é»˜è®¤æ•ˆæœ</h3><p><strong>SpringBootçš„æœåŠ¡ç«¯ä¸€èˆ¬ä¸ºå‰ç«¯æä¾›jsonæ•°æ®</strong></p><p>é»˜è®¤é…ç½®ï¼š</p><ol><li><p>åŒ…å«äº† ContentNegotiatingViewResolver å’Œ BeanNameViewResolver ç»„ä»¶ï¼Œ<strong>æ–¹ä¾¿è§†å›¾è§£æ</strong></p></li><li><p><strong>é»˜è®¤çš„é™æ€èµ„æºå¤„ç†æœºåˆ¶</strong>ï¼š é™æ€èµ„æºæ”¾åœ¨ static æ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®</p></li><li><p><strong>è‡ªåŠ¨æ³¨å†Œ</strong>äº† <strong>Converter</strong>,GenericConverter,<strong>Formatter</strong>ç»„ä»¶ï¼Œç”¨äºé€‚é…å¸¸è§<strong>æ•°æ®ç±»å‹è½¬æ¢</strong>å’Œ<strong>æ ¼å¼åŒ–éœ€æ±‚</strong></p><ol><li>ä¾‹å¦‚ï¼šæ—¶é—´æ ¼å¼çš„è¯†åˆ«ï¼Œæ—¥æœŸé»˜è®¤ï¼š2023/9/9 12:12:12</li></ol></li><li><p><strong>æ”¯æŒ</strong> <strong>HttpMessageConverters</strong>ï¼Œå¯ä»¥<strong>æ–¹ä¾¿è¿”å›</strong>jsonç­‰<strong>æ•°æ®ç±»å‹</strong></p><ol><li><p>å¯ä»¥å°†æ–¹æ³•è¿”å›çš„æ•°æ®ç›´æ¥è½¬æ¢ä¸ºjsonæ ¼å¼</p></li><li><p>ä¾‹å¦‚ï¼šä¸‹é¢è¿™ä¸ªæ–¹æ³•è¿”å›çš„Stringï¼Œä¼šè¢«è½¬æ¢ä¸ºjsonæ ¼å¼</p><p><img src="../assets/image/SpringBoot_Image/image-20230909075914104.png" alt="image-20230909075914104"></p></li></ol></li><li><p><strong>æ³¨å†Œ</strong> MessageCodesResolverï¼Œæ–¹ä¾¿<strong>å›½é™…åŒ–</strong>åŠé”™è¯¯æ¶ˆæ¯å¤„ç†</p><ol><li>ä¾‹å¦‚ï¼šä¸€ä¸ªç½‘ç«™åœ¨ä¸åŒçš„å›½å®¶è®¿é—®ï¼Œä¼šæ˜¾ç¤ºä¸åŒçš„è¯­è¨€</li></ol></li><li><p><strong>æ”¯æŒ é™æ€</strong> index.html</p></li><li><p><strong>è‡ªåŠ¨ä½¿ç”¨</strong>ConfigurableWebBindingInitializerï¼ˆWebæ•°æ®ç»‘å®šå·¥ä½œï¼‰ï¼Œå®ç°æ¶ˆæ¯å¤„ç†ã€æ•°æ®ç»‘å®šã€ç±»å‹è½¬åŒ–ã€æ•°æ®æ ¡éªŒç­‰åŠŸèƒ½</p><ol><li>ä¾‹å¦‚ï¼šå¦‚æœå‰ç«¯ç”¨httpåè®®æäº¤äº†ä¸€æ¨å‚æ•°ï¼Œå…ˆåˆ¤æ–­æ•°æ®æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œç„¶åè¿™ä¸ªç»„ä»¶è´Ÿè´£å°†ç±»å‹è½¬æ¢ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦æ¥å—å¾ˆå¤šæ•°æ®å°±éœ€è¦åœ¨æ–¹æ³•ä¸­å†™å¾ˆå¤šå‚æ•°ï¼Œä½†æ˜¯æœ‰äº†è¿™ä¸ªç»„ä»¶ä»¥åå°±å¯ä»¥é€šè¿‡ä¸€ä¸ªbeanæ›¿ä»£å‚æ•°</li></ol></li></ol><p><strong>é‡è¦ï¼š</strong></p><ul><li><em>å¦‚æœæƒ³ä¿æŒ</em> <em><strong>boot mvc çš„é»˜è®¤é…ç½®*</strong></em>ï¼Œå¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„ mvc é…ç½®ï¼Œå¦‚ï¼š<em><em><strong>interceptors*</strong></em>,</em> <em><strong>formatters*</strong></em>,* <em><strong>view controllers*</strong> <em>ç­‰ã€‚å¯ä»¥ä½¿ç”¨</em></em>@Configuration**æ³¨è§£æ·»åŠ ä¸€ä¸ª* <em>WebMvcConfigurer</em> <em>ç±»å‹çš„é…ç½®ç±»ï¼Œå¹¶ä¸è¦æ ‡æ³¨</em> <em>@EnableWebMvc</em><ul><li>ä½¿ç”¨ <em>@EnableWebMvc</em>å°†è¡¨æ˜MVCè¦è¿›è¡Œå…¨æ‰‹åŠ¨é…ç½®ï¼Œæ”¾å¼ƒ<strong>å…¨è‡ªåŠ¨</strong>å’Œ<strong>æ‰‹è‡ªä¸€ä½“</strong>æ¨¡å¼</li></ul></li><li><em>å¦‚æœæƒ³ä¿æŒ boot mvc çš„é»˜è®¤é…ç½®ï¼Œä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶å®ä¾‹ï¼Œæ¯”å¦‚ï¼š<strong>RequestMappingHandlerMapping</strong>,</em> <em>RequestMappingHandlerAdapter</em>*, æˆ–<strong>ExceptionHandlerExceptionResolver</strong>ï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª* <em>WebMvcRegistrations</em> <em>ç»„ä»¶å³å¯</em></li><li><em>å¦‚æœæƒ³å…¨é¢æ¥ç®¡ Spring MVCï¼Œ**@Configuration</em> <em>æ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œå¹¶åŠ ä¸Š</em> <em>@EnableWebMvc**æ³¨è§£ï¼Œå®ç°</em> <em>WebMvcConfigurer</em> <em>æ¥å£</em></li></ul><h2 id="é™æ€èµ„æº">é™æ€èµ„æº</h2><h3 id="é»˜è®¤è§„åˆ™">é»˜è®¤è§„åˆ™</h3><h4 id="é™æ€èµ„æºæ˜ å°„">é™æ€èµ„æºæ˜ å°„</h4><p>é™æ€èµ„æºæ˜ å°„è§„åˆ™åœ¨ WebMvcAutoConfiguration ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p><ol><li><p>/webjars/** çš„æ‰€æœ‰è·¯å¾„ èµ„æºéƒ½åœ¨ classpath:/META-INF/resources/webjars/</p></li><li><p>/** çš„æ‰€æœ‰è·¯å¾„ èµ„æºéƒ½åœ¨ classpath:/META-INF/resources/ã€classpath:/resources/ã€classpath:/static/ã€classpath:/public/</p></li><li><p>æ‰€æœ‰é™æ€èµ„æºéƒ½å®šä¹‰äº†ç¼“å­˜è§„åˆ™ã€‚ã€æµè§ˆå™¨è®¿é—®è¿‡ä¸€æ¬¡ï¼Œå°±ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ã€‘ï¼Œä½†æ­¤åŠŸèƒ½å‚æ•°æ— é»˜è®¤å€¼</p></li><li><ol><li>periodï¼š ç¼“å­˜é—´éš”ã€‚ é»˜è®¤ 0Sï¼›</li><li>cacheControlï¼šç¼“å­˜æ§åˆ¶ã€‚ é»˜è®¤æ— ï¼›</li><li>useLastModifiedï¼šæ˜¯å¦ä½¿ç”¨lastModifiedå¤´ã€‚ é»˜è®¤ falseï¼›</li></ol></li></ol><h4 id="é™æ€èµ„æºç¼“å­˜">é™æ€èµ„æºç¼“å­˜</h4><p>å¦‚å‰é¢æ‰€è¿°</p><ol><li><p>æ‰€æœ‰é™æ€èµ„æºéƒ½å®šä¹‰äº†ç¼“å­˜è§„åˆ™ã€‚ã€æµè§ˆå™¨è®¿é—®è¿‡ä¸€æ¬¡ï¼Œå°±ä¼šç¼“å­˜ä¸€æ®µæ—¶é—´ã€‘ï¼Œä½†æ­¤åŠŸèƒ½å‚æ•°æ— é»˜è®¤å€¼</p></li><li><ol><li>periodï¼š ç¼“å­˜é—´éš”ã€‚ é»˜è®¤ 0Sï¼›</li><li>cacheControlï¼šç¼“å­˜æ§åˆ¶ã€‚ é»˜è®¤æ— ï¼›</li><li>useLastModifiedï¼šæ˜¯å¦ä½¿ç”¨lastModifiedå¤´ã€‚ é»˜è®¤ falseï¼›</li></ol></li></ol><h4 id="æ¬¢è¿é¡µ">æ¬¢è¿é¡µ</h4><p>æ¬¢è¿é¡µè§„åˆ™åœ¨ WebMvcAutoConfiguration ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p><ol><li>åœ¨<strong>é™æ€èµ„æº</strong>ç›®å½•ä¸‹æ‰¾ index.html</li><li>æ²¡æœ‰å°±åœ¨ templatesä¸‹æ‰¾indexæ¨¡æ¿é¡µ</li></ol><h4 id="Favicion">Favicion</h4><ol><li>æµè§ˆå™¨å¯¼èˆªæ ä¸Šç½‘ç«™çš„å°å›¾æ ‡</li><li>åœ¨é™æ€èµ„æºç›®å½•ä¸‹æ‰¾ favicon.ico</li><li>å’Œspringbootæ²¡å•¥å…³ç³»ï¼Œæµè§ˆå™¨æ¯æ¬¡éƒ½ä¼šç‰¹æ„è®¿é—®ç½‘ç«™çš„logoï¼ŒSpringBootåªæ˜¯æä¾›äº†è®¿é—®è§„åˆ™ï¼Œå¤„ç†Favicionè¯·æ±‚æ—¶ä¼šå°†æŒ‡å®šè·¯å¾„ä¸‹çš„æŒ‡å®šå›¾ç‰‡ç­”å¤ç»™æµè§ˆå™¨</li></ol><h4 id="ç¼“å­˜å®éªŒ">ç¼“å­˜å®éªŒ</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">9000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#1ã€spring.webï¼š</span></span><br><span class="line"><span class="comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™</span></span><br><span class="line"><span class="attr">spring.web.resources.add-mappings</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®ç¼“å­˜</span></span><br><span class="line"><span class="comment">#spring.web.resources.cache.period=3600   å•ä½ï¼šç§’</span></span><br><span class="line"><span class="comment">##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š</span></span><br><span class="line"><span class="comment">## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.max-age</span>=<span class="string">7200</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304ï¼ˆHTTPè¯·æ±‚çš„ä¸€ä¸ªçŠ¶æ€ï¼‰</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.use-last-modified</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><p>304ï¼šæœåŠ¡å™¨å’Œç£ç›˜ç¼“å­˜ä¸­çš„èµ„æºä¸€æ ·ï¼Œä¸‹æ¬¡å†å‘é€è¯·æ±‚æ—¶çŠ¶æ€å°±ä¼šæ˜¯200ï¼Œç„¶åä»ç£ç›˜ä¸­è¯»å–èµ„æº</p><p>200ï¼šåœ¨ç£ç›˜ç¼“å­˜ä¸­è¯»å–çš„æ•°æ®</p><p>å¿«é€Ÿåˆ·æ–°å¯ä»¥è®©æµè§ˆå™¨é‡æ–°è¯¢é—®æœåŠ¡å™¨è¿™ä¸ªèµ„æºæ˜¯å¦æ˜¯æœ€æ–°ï¼Œä¸æ˜¯çš„è¯å°±æ›´æ–°èµ„æº</p><p><img src="../assets/image/SpringBoot_Image/image-20230909164009158.png" alt="image-20230909164009158"></p><h3 id="è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™">è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</h3><p>è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„ã€è‡ªå®šä¹‰ç¼“å­˜è§„åˆ™</p><p><strong>æ€»ç»“ï¼šå®¹å™¨ä¸­åªè¦åˆä¸€ä¸ªWebMvcConfigurerç»„ä»¶ï¼Œå®¹å™¨ä¸­é…ç½®çš„åº•å±‚è¡Œä¸ºéƒ½ä¼šç”Ÿæ•ˆï¼›ä¸ç®¡åœ¨å“ªä¸ªç±»ä¸ŠåŠ äº†@EnableWebMvcæ³¨è§£ï¼Œå°±ä¼šç¦ç”¨bootæä¾›çš„mvcçš„é»˜è®¤é…ç½®ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸åŠ </strong></p><h4 id="é…ç½®æ–¹å¼">é…ç½®æ–¹å¼</h4><p><code>spring.mvc</code>ï¼š é™æ€èµ„æºè®¿é—®å‰ç¼€è·¯å¾„</p><p><code>spring.web</code>ï¼š</p><ul><li><p>é™æ€èµ„æºç›®å½•</p></li><li><p>é™æ€èµ„æºç¼“å­˜ç­–ç•¥</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1ã€spring.webï¼š</span></span><br><span class="line"><span class="comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™</span></span><br><span class="line"><span class="attr">spring.web.resources.add-mappings</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®ç¼“å­˜</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.period</span>=<span class="string">3600</span></span><br><span class="line"><span class="comment">##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š</span></span><br><span class="line"><span class="comment">## æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.max-age</span>=<span class="string">7200</span></span><br><span class="line"><span class="comment">## å…±äº«ç¼“å­˜</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.cache-public</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.use-last-modified</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰é™æ€èµ„æºæ–‡ä»¶å¤¹ä½ç½®</span></span><br><span class="line"><span class="comment">#è¿™æ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„åœ¨propertiesä¸­çš„é…ç½®ç”¨&#x27;,&#x27;åˆ†éš”å¼€å°±è¡Œ</span></span><br><span class="line"><span class="attr">spring.web.resources.static-locations</span>=<span class="string">classpath:/a/,classpath:/b/,classpath:/static/</span></span><br><span class="line"><span class="comment">#æ”¾åœ¨resources/aå’Œresources/bä¸‹çš„é™æ€èµ„æºä¹Ÿå¯ä»¥è¢«è®¿é—®åˆ°äº†</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#2ã€ spring.mvc</span></span><br><span class="line"><span class="comment">## 2.1. è‡ªå®šä¹‰webjarsè·¯å¾„å‰ç¼€</span></span><br><span class="line"><span class="attr">spring.mvc.webjars-path-pattern</span>=<span class="string">/wj/**</span></span><br><span class="line"><span class="comment"># é…ç½®äº†è¿™ä¸ªä¹‹åä¹‹å‰é»˜è®¤çš„è®¿é—®è·¯å¾„/wabjars/å°±ä¼šåˆ°/MATE-INF/resources/wabjars/ï¼Œå¯ä»¥ç”¨/wj/è·¯å¾„æ›¿ä»£/wabjars/</span></span><br><span class="line"><span class="comment">## 2.2. é™æ€èµ„æºè®¿é—®è·¯å¾„å‰ç¼€</span></span><br><span class="line"><span class="attr">spring.mvc.static-path-pattern</span>=<span class="string">/static/**</span></span><br><span class="line"><span class="comment"># ä¹‹å‰ç›´æ¥è®¿é—®localhost:8080/1.jpgå°±å¯ä»¥è®¿é—®åˆ°å›¾ç‰‡ï¼ŒåŠ äº†è¿™ä¸ªä»¥åå°±éœ€è¦localhost:8080/static/1.jpgæ‰èƒ½è®¿é—®åˆ°</span></span><br></pre></td></tr></table></figure></li></ul><p>spring.web.resources.static-locationsï¼šä¸»è¦é…ç½®æŒ‡å®šçš„é™æ€èµ„æºè·¯å¾„ï¼Œåªæœ‰é…ç½®äº†çš„è·¯å¾„ä¸­çš„é™æ€èµ„æºå¯ä»¥è¢«è¯»å–ï¼Œä¸€æ—¦é…ç½®ï¼Œé»˜è®¤çš„å››ä¸ªè·¯å¾„å°†ä¸åœ¨å¥½ç”¨ï¼Œä»¥ä¸‹æ˜¯é»˜è®¤çš„4ä¸ªé™æ€èµ„æºè·¯å¾„</p><p><img src="../assets/image/SpringBoot_Image/image-20230909170416832.png" alt="image-20230909170416832"></p><p>spring.mvc.static-path-patternï¼šæŒ‡å®šçš„æ˜¯è®¿é—®é™æ€èµ„æºæ—¶éœ€è¦åŠ çš„URLå‰ç¼€</p><h4 id="ä»£ç æ–¹å¼">ä»£ç æ–¹å¼</h4><ul><li><p>é‡å†™WebMvcConfigureræ¥å£ä¸­çš„addResourceHandlersï¼ˆæ·»åŠ èµ„æºå¤„ç†å™¨ï¼‰æ–¹æ³•</p></li><li><p>å®¹å™¨ä¸­åªè¦æœ‰ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ã€‚é…ç½®çš„åº•å±‚è¡Œä¸ºéƒ½ä¼šç”Ÿæ•ˆ</p></li><li><p>@EnableWebMvc //ç¦ç”¨bootçš„é»˜è®¤é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¿ç•™ä»¥å‰è§„åˆ™</span></span><br><span class="line">        <span class="comment">//è‡ªå·±å†™æ–°çš„è§„åˆ™ã€‚</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">&quot;classpath:/a/&quot;</span>,<span class="string">&quot;classpath:/b/&quot;</span>)</span><br><span class="line">                .setCacheControl(CacheControl.maxAge(<span class="number">1180</span>, TimeUnit.SECONDS));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥é€šè¿‡å¾€å®¹å™¨ä¸­æ”¾Beanæ¥æ·»åŠ è‡ªå·±æ–°çš„é…ç½®</p></li><li><p>å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›å€¼å’Œåç§°éƒ½æ˜¯webMvcConfigurerï¼Œæ–¹æ³•è¿”å›ä¸€ä¸ªWebMvcConfigurerå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»,ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª WebMvcConfigurer ç»„ä»¶ï¼Œå°±èƒ½è‡ªå®šä¹‰åº•å±‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span> <span class="comment">//é…ç½®é™æ€èµ„æº</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">                registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)</span><br><span class="line">                        .addResourceLocations(<span class="string">&quot;classpath:/a/&quot;</span>, <span class="string">&quot;classpath:/b/&quot;</span>)</span><br><span class="line">                        .setCacheControl(CacheControl.maxAge(<span class="number">1180</span>, TimeUnit.SECONDS));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span> <span class="comment">//é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span> <span class="comment">//é…ç½®ä¸€ä¸ªèƒ½æŠŠå¯¹è±¡è½¬ä¸ºyamlçš„messageConverter</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">                converters.add(<span class="keyword">new</span> <span class="title class_">MyYamlHttpMessageConverter</span>());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="è·¯å¾„åŒ¹é…">è·¯å¾„åŒ¹é…</h2><p><strong>Spring5.3</strong> ä¹‹ååŠ å…¥äº†æ›´å¤šçš„è¯·æ±‚è·¯å¾„åŒ¹é…çš„å®ç°ç­–ç•¥ï¼›</p><p>ä»¥å‰åªæ”¯æŒ AntPathMatcher ç­–ç•¥, ç°åœ¨æä¾›äº† <strong>PathPatternParser</strong> ç­–ç•¥ã€‚å¹¶ä¸”å¯ä»¥è®©æˆ‘ä»¬æŒ‡å®šåˆ°åº•ä½¿ç”¨é‚£ç§ç­–ç•¥</p><h3 id="Anté£æ ¼è·¯å¾„ç”¨æ³•">Anté£æ ¼è·¯å¾„ç”¨æ³•</h3><p>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>*ï¼šè¡¨ç¤º<strong>ä»»æ„æ•°é‡</strong>çš„å­—ç¬¦ã€‚</li><li>?ï¼šè¡¨ç¤ºä»»æ„<strong>ä¸€ä¸ªå­—ç¬¦</strong>ã€‚</li><li><strong>ï¼šè¡¨ç¤º</strong>ä»»æ„æ•°é‡çš„ç›®å½•**ã€‚</li><li>{}ï¼šè¡¨ç¤ºä¸€ä¸ªå‘½åçš„æ¨¡å¼<strong>å ä½ç¬¦</strong>ã€‚</li><li>[]ï¼šè¡¨ç¤º<strong>å­—ç¬¦é›†åˆ</strong>ï¼Œä¾‹å¦‚[a-z]è¡¨ç¤ºå°å†™å­—æ¯ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li>*.html åŒ¹é…ä»»æ„åç§°ï¼Œæ‰©å±•åä¸º.htmlçš„æ–‡ä»¶ã€‚</li><li>/folder1/<em>/</em>.java åŒ¹é…åœ¨folder1ç›®å½•ä¸‹çš„ä»»æ„ä¸¤çº§ç›®å½•ä¸‹çš„.javaæ–‡ä»¶ã€‚</li><li>/folder2/**/*.jsp åŒ¹é…åœ¨folder2ç›®å½•ä¸‹ä»»æ„ç›®å½•æ·±åº¦çš„.jspæ–‡ä»¶ã€‚</li><li>/{type}/{id}.html åŒ¹é…ä»»æ„æ–‡ä»¶åä¸º{id}.htmlï¼Œåœ¨ä»»æ„å‘½åçš„{type}ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</li></ul><p>æ³¨æ„ï¼šAnt é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œå¦‚ï¼š</p><ul><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\*ã€‚</li><li>è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„é—®å·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\?ã€‚</li></ul><h3 id="æ¨¡å¼åˆ‡æ¢">æ¨¡å¼åˆ‡æ¢</h3><h4 id="AntPathMatcher-ä¸-PathPatternParser">AntPathMatcher ä¸ <code>PathPatternParser</code></h4><ul><li><p>PathPatternParser åœ¨ jmh åŸºå‡†æµ‹è¯•ä¸‹ï¼Œæœ‰ 6~8 å€ååé‡æå‡ï¼Œé™ä½ 30%~40%ç©ºé—´åˆ†é…ç‡</p></li><li><p>PathPatternParser å…¼å®¹ AntPathMatcherè¯­æ³•ï¼Œå¹¶æ”¯æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼</p></li><li><p>PathPatternParser  &quot;<em><strong>*</strong>&quot; <strong>å¤šæ®µåŒ¹é…</strong>çš„æ”¯æŒ</em><em>ä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿ç”¨</em>*</p><ul><li>æ‰€ä»¥å¦‚æœ/**åœ¨è·¯å¾„ä¸­é—´çš„è¯ï¼Œéœ€è¦ä½¿ç”¨è€ç‰ˆçš„ç­–ç•¥AntPathMatcher</li></ul></li><li><p>è®¿é—®ä»¥ä¸‹å†…å®¹å¯ä»¥ä½¿ç”¨<code>localhost:8080/ahfy67/b3/aabbccde</code>/tt/rr/yy</p><ul><li>è§£é‡Šï¼š<ul><li><code>*</code>åŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦</li><li><code>?</code>åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</li><li><code>&#123;p1:[a-f]+&#125;</code>åŒ¹é…aåˆ°fåŒºé—´ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œç„¶ååœ¨æ–¹æ³•çš„å‚æ•°ä¸­å¯ä»¥ä½¿ç”¨@PathVariableå°†p1å–å‡ºåˆ°æŒ‡å®šçš„Stringä¸­ï¼Œè¿™é‡Œå–åˆ°äº†pathä¸­</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/a*/b?/&#123;p1:[a-f]+&#125;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(HttpServletRequest request, </span></span><br><span class="line"><span class="params">                    <span class="meta">@PathVariable(&quot;p1&quot;)</span> String path)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    log.info(<span class="string">&quot;è·¯å¾„å˜é‡p1ï¼š &#123;&#125;&quot;</span>, path);</span><br><span class="line">    <span class="comment">//è·å–è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">    <span class="keyword">return</span> uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>ä½¿ç”¨é»˜è®¤çš„è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œæ˜¯ç”± PathPatternParser  æä¾›çš„</p><ul><li>ï¼ˆé»˜è®¤ä½¿ç”¨æ–°ç‰ˆç­–ç•¥ï¼‰æƒ³ç”¨è€ç‰ˆç­–ç•¥å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹</li></ul></li><li><p>å¦‚æœè·¯å¾„ä¸­é—´éœ€è¦æœ‰ **ï¼Œæ›¿æ¢æˆanté£æ ¼è·¯å¾„</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ”¹å˜è·¯å¾„åŒ¹é…ç­–ç•¥ï¼š</span></span><br><span class="line"><span class="comment"># ant_path_matcher è€ç‰ˆç­–ç•¥ï¼›</span></span><br><span class="line"><span class="comment"># path_pattern_parser æ–°ç‰ˆç­–ç•¥ï¼›</span></span><br><span class="line"><span class="attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="å†…å®¹åå•†">å†…å®¹åå•†</h2><p>mvcå¸¦è¿™ä¸ªåŠŸèƒ½ä½†æ˜¯bootåšäº†æ•´åˆï¼Œé…ç½®èµ·æ¥æ›´æ–¹ä¾¿äº†</p><p>ä¸€å¥—ç³»ç»Ÿé€‚é…å¤šç«¯æ•°æ®è¿”å›</p><p><img src="../assets/image/SpringBoot_Image/1681217799861-dde49224-a767-489b-80b7-7d8d503e33cf.png" alt="image.png"></p><h3 id="å¤šç«¯å†…å®¹é€‚é…">å¤šç«¯å†…å®¹é€‚é…</h3><h4 id="é»˜è®¤è§„åˆ™-2">é»˜è®¤è§„åˆ™</h4><ol><li><p><strong>SpringBoot å¤šç«¯å†…å®¹é€‚é…</strong>ã€‚</p></li><li><ol><li><strong>åŸºäº</strong> <strong>è¯·æ±‚å¤´</strong> <strong>å†…å®¹åå•†</strong>ï¼šï¼ˆé»˜è®¤å¼€å¯ï¼‰</li></ol></li><li><ol><li><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œæºå¸¦HTTPæ ‡å‡†çš„<strong>Acceptè¯·æ±‚å¤´</strong>ã€‚</li></ol></li></ol></li><li><ol><li><ol><li><ol><li><strong>Accept</strong>: <code>application/json</code>ã€<code>text/xml</code>ã€<code>text/yaml</code></li><li>æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯<strong>è¯·æ±‚å¤´æœŸæœ›çš„æ•°æ®ç±»å‹</strong>è¿›è¡Œ<strong>åŠ¨æ€è¿”å›</strong></li></ol></li></ol></li></ol></li><li><ol><li><strong>åŸºäº</strong> <strong>è¯·æ±‚å‚æ•°</strong> <strong>å†…å®¹åå•†ï¼šï¼ˆéœ€è¦å¼€å¯ï¼‰</strong></li></ol></li><li><ol><li><ol><li>å‘é€è¯·æ±‚ GET /projects/spring-boot?format=json</li><li>åŒ¹é…åˆ° @GetMapping(â€œ/projects/spring-bootâ€)</li><li>æ ¹æ®<strong>å‚æ•°åå•†</strong>ï¼Œä¼˜å…ˆè¿”å› json ç±»å‹æ•°æ®ã€<strong>éœ€è¦å¼€å¯å‚æ•°åŒ¹é…è®¾ç½®</strong>ã€‘</li><li>å‘é€è¯·æ±‚ GET /projects/spring-boot?format=xml,ä¼˜å…ˆè¿”å› xml ç±»å‹æ•°æ®</li></ol></li></ol></li></ol><h4 id="æ•ˆæœæ¼”ç¤º">æ•ˆæœæ¼”ç¤º</h4><ul><li>æ€»ç»“<ul><li>éœ€è¦è¿”å›xmlæ ¼å¼<ul><li>å¯¼åŒ…ï¼Œå¹¶ä¸”åœ¨æƒ³è¦è¿”å›xmlæ ¼å¼çš„ç±»ä¸Šæ·»åŠ æ³¨è§£</li></ul></li><li>éœ€è¦æ ¹æ®å‚æ•°æ¥æŒ‡å®šè¿”å›æ ¼å¼<ul><li>éœ€è¦<code>å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†</code>ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨<code>URL+type=xml</code>çš„æ ¼å¼æ¥æŒ‡å®šè¿”å›çš„å†…å®¹æ ¼å¼</li><li>ä¸å¼€å¯çš„è¯å°±åªèƒ½é€šè¿‡ä¿®æ”¹è¯·æ±‚å¤´æ¥æŒ‡å®šè¿”å›æ ¼å¼ä¸ºxml</li></ul></li></ul></li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* <span class="number">1</span>ã€é»˜è®¤æ”¯æŒæŠŠå¯¹è±¡å†™ä¸º<span class="type">json</span>ã€‚å› ä¸ºé»˜è®¤webåœºæ™¯å¯¼å…¥äº†jacksonå¤„ç†<span class="type">json</span>çš„åŒ…;jackson-core</span><br><span class="line">* <span class="number">2</span>ã€jacksonä¹Ÿæ”¯æŒæŠŠæ•°æ®å†™ä¸º<span class="type">xml</span>ã€‚å¯¼å…¥<span class="type">xml</span>ç›¸å…³ä¾èµ–</span><br></pre></td></tr></table></figure><p>è¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è¿”å›jsonå’Œxmlä¸åŒæ ¼å¼æ•°æ®</p><ol><li><p>å¼•å…¥æ”¯æŒå†™å‡ºxmlå†…å®¹ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æ ‡æ³¨æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JacksonXmlRootElement</span>  <span class="comment">// å¯ä»¥å†™å‡ºä¸ºxmlæ–‡æ¡£</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚ é»˜è®¤å‚æ•°åï¼šformatã€‚ é»˜è®¤æ­¤åŠŸèƒ½ä¸å¼€å¯</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åã€‚é»˜è®¤æ˜¯ format</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></table></figure></li><li><p>æ•ˆæœ</p><p><img src="../assets/image/SpringBoot_Image/1681220124448-e8611612-97bc-4823-9b00-20dd9d579abf.png" alt="image.png"></p></li></ol><p>ä½¿ç”¨apifoxè¿›è¡Œæµ‹è¯•ï¼ŒæŒ‡å®šè¦xmlæ ¼å¼çš„</p><p><img src="../assets/image/SpringBoot_Image/image-20230910182303167.png" alt="image-20230910182303167"></p><h4 id="é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹">é…ç½®åå•†è§„åˆ™ä¸æ”¯æŒç±»å‹</h4><ol><li><p>ä¿®æ”¹<strong>å†…å®¹åå•†æ–¹å¼</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯å‚æ•°è¿›è¡Œå†…å®¹åå•†</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true  </span></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰å‚æ•°åï¼Œé»˜è®¤ä¸ºformat</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">myparam </span></span><br></pre></td></tr></table></figure></li><li><p>å¤§å¤šæ•° MediaType éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ã€‚ä¹Ÿå¯ä»¥<strong>è‡ªå®šä¹‰å†…å®¹ç±»å‹ï¼Œå¦‚ï¼š</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="è‡ªå®šä¹‰è¿”å›å†…å®¹">è‡ªå®šä¹‰è¿”å›å†…å®¹</h3><h4 id="å¢åŠ yamlè¿”å›æ”¯æŒ">å¢åŠ yamlè¿”å›æ”¯æŒ</h4><p>yamlä¸­æœ‰ä¸ªå¤šæ–‡æ¡£è§„èŒƒï¼Œæ¯â€™â€”'ç”¨äºåˆ†å‰²ä¸€ä¸ªæ–‡æ¡£</p><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-yaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŠŠå¯¹è±¡å†™å‡ºæˆYAML</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person.setId(<span class="number">1L</span>);</span><br><span class="line">    person.setUserName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    person.setEmail(<span class="string">&quot;aaa@qq.com&quot;</span>);</span><br><span class="line">    person.setAge(<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">YAMLFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YAMLFactory</span>().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);</span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(factory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éªŒè¯æ˜¯å¦å˜ä¸ºyamlæ ¼å¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> mapper.writeValueAsString(person);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ–°å¢ä¸€ç§åª’ä½“ç±»å‹</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br></pre></td></tr></table></figure><p>å¢åŠ <code>HttpMessageConverter</code>ç»„ä»¶ï¼Œä¸“é—¨è´Ÿè´£æŠŠå¯¹è±¡å†™å‡ºä¸ºyamlæ ¼å¼</p><p>å› ä¸ºæœ‰xmlå’Œjsonæ ¼å¼çš„MessageConverterï¼Œä½†æ˜¯æ²¡æœ‰yamlçš„ï¼Œæ‰€ä»¥è¦åŠ ä¸€ä¸ªyamlçš„MessageConverter</p><p>åœ¨é…ç½®ç±»ä¸­å†™ä»¥ä¸‹æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span> <span class="comment">//é…ç½®ä¸€ä¸ªèƒ½æŠŠå¯¹è±¡è½¬ä¸ºyamlçš„messageConverter</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;</span><br><span class="line">            converters.add(<span class="keyword">new</span> <span class="title class_">MyYamlHttpMessageConverter</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿”å›æ ¼å¼æ˜¯yamlæ—¶ï¼Œbootä¼šå¼€å§‹éå†æ‰€æœ‰</p><p><img src="../assets/image/SpringBoot_Image/image-20230913181113319.png" alt="image-20230913181113319"></p><h4 id="æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–ç±»å‹æ•°æ®çš„é€‚é…">æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–ç±»å‹æ•°æ®çš„é€‚é…</h4><ul><li><p>é…ç½®åª’ä½“ç±»å‹æ”¯æŒ:</p><ul><li><code>spring.mvc.contentnegotiation.media-types.yaml=text/yaml</code></li></ul></li><li><p>ç¼–å†™å¯¹åº”çš„<code>HttpMessageConverter</code>ï¼Œè¦å‘Šè¯‰Bootè¿™ä¸ªæ”¯æŒçš„åª’ä½“ç±»å‹</p><ul><li>æŒ‰ç…§3çš„ç¤ºä¾‹</li></ul></li><li><p>æŠŠMessageConverterç»„ä»¶åŠ å…¥åˆ°åº•å±‚</p><ul><li>å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>WebMvcConfigurer</code> ç»„ä»¶ï¼Œå¹¶é…ç½®åº•å±‚çš„<code>MessageConverter</code></li></ul></li></ul><h4 id="HttpMessageConverterçš„ç¤ºä¾‹å†™æ³•">HttpMessageConverterçš„ç¤ºä¾‹å†™æ³•</h4><p>ï¼ˆAbstract==æ‘˜è¦ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyYamlHttpMessageConverter</span> <span class="keyword">extends</span> <span class="title class_">AbstractHttpMessageConverter</span>&lt;Object&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">//æŠŠå¯¹è±¡è½¬æˆyaml</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyYamlHttpMessageConverter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//å‘Šè¯‰SpringBootè¿™ä¸ªMessageConverteræ”¯æŒå“ªç§åª’ä½“ç±»å‹  //åª’ä½“ç±»å‹</span></span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">MediaType</span>(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;yaml&quot;</span>, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>)));</span><br><span class="line">        <span class="type">YAMLFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YAMLFactory</span>()</span><br><span class="line">                .disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);</span><br><span class="line">        <span class="built_in">this</span>.objectMapper = <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(factory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="comment">//åªè¦æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¸æ˜¯åŸºæœ¬ç±»å‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  <span class="comment">//@RequestBody</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">readInternal</span><span class="params">(Class&lt;?&gt; clazz, HttpInputMessage inputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotReadableException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//@ResponseBody æŠŠå¯¹è±¡æ€ä¹ˆå†™å‡ºå»</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">writeInternal</span><span class="params">(Object methodReturnValue, HttpOutputMessage outputMessage)</span> <span class="keyword">throws</span> IOException, HttpMessageNotWritableException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//try-withå†™æ³•ï¼Œè‡ªåŠ¨å…³æµ</span></span><br><span class="line">        <span class="keyword">try</span>(<span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> outputMessage.getBody())&#123;</span><br><span class="line">            <span class="built_in">this</span>.objectMapper.writeValue(os,methodReturnValue);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å†…å®¹åå•†åŸç†-HttpMessageConverter-Httpä¿¡æ¯è½¬æ¢å™¨">å†…å®¹åå•†åŸç†-HttpMessageConverter(Httpä¿¡æ¯è½¬æ¢å™¨)</h3><ul><li><code>HttpMessageConverter</code> æ€ä¹ˆå·¥ä½œï¼Ÿåˆé€‚å·¥ä½œï¼Ÿ</li><li>å®šåˆ¶ <code>HttpMessageConverter</code>  æ¥å®ç°å¤šç«¯å†…å®¹åå•†</li><li>ç¼–å†™<code>WebMvcConfigurer</code>æä¾›çš„<code>configureMessageConverters</code>åº•å±‚ï¼Œä¿®æ”¹åº•å±‚çš„<code>MessageConverter</code></li></ul><h4 id="ResponseBodyç”±HttpMessageConverterå¤„ç†"><code>@ResponseBody</code>ç”±<code>HttpMessageConverter</code>å¤„ç†</h4><p>æ ‡æ³¨äº†<code>@ResponseBody</code>çš„è¿”å›å€¼ å°†ä¼šç”±æ”¯æŒå®ƒçš„ <code>HttpMessageConverter</code>å†™ç»™æµè§ˆå™¨</p><ol><li><p>å¦‚æœcontrolleræ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº† <code>@ResponseBody </code>æ³¨è§£</p></li><li><ol><li>è¯·æ±‚è¿›æ¥å…ˆæ¥åˆ°<code>DispatcherServlet</code>çš„<code>doDispatch()</code>è¿›è¡Œå¤„ç†ï¼ˆDispatcher==è°ƒåº¦ç¨‹åºï¼‰</li><li>æ‰¾åˆ°ä¸€ä¸ª <code>HandlerAdapter </code>é€‚é…å™¨ï¼ˆå¤„ç†ç¨‹åºé€‚é…å™¨ï¼‰ã€‚åˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼ˆHandler==å¤„ç†ç¨‹åºï¼‰</li><li><code>RequestMappingHandlerAdapter</code>æ¥æ‰§è¡Œï¼Œè°ƒç”¨<code>invokeHandlerMethodï¼ˆï¼‰</code>æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼ˆinvoke==è°ƒç”¨ï¼‰ï¼ˆmapper==æ˜ å°„å™¨ï¼‰</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå‡†å¤‡å¥½ä¸¤ä¸ªä¸œè¥¿</li></ol></li><li><ol><li><ol><li><p><code>HandlerMethodArgumentResolver</code>ï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸ªå‚æ•°å€¼ï¼ˆArgument==è®ºç‚¹ï¼‰ï¼ˆResolver==è§£æå™¨ï¼‰</p></li><li><p><code>HandlerMethodReturnValueHandler</code>ï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼æ”¹æ€ä¹ˆå¤„ç†</p><ol><li><p>ä¾‹å¦‚ï¼šè¿”å›Personå¯¹è±¡æ—¶å¤„ç†æˆå¯¹åº”çš„æ•°æ®æ ¼å¼</p></li><li><p>ä¼šéå†æ‹¥æœ‰çš„æ‰€æœ‰å¤„ç†å™¨æ‰¾å‡ºé€‚åˆå¤„ç†æŸç§æ•°æ®ç±»å‹çš„å¤„ç†å™¨</p></li><li><p>ä¸‹é¢æ˜¯ç”¨äºé€‰æ‹©åˆé€‚å¤„ç†å™¨çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">private</span> HandlerMethodReturnValueHandler <span class="title function_">selectHandler</span><span class="params">(<span class="meta">@Nullable</span> Object value, MethodParameter returnType)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isAsyncValue</span> <span class="operator">=</span> <span class="built_in">this</span>.isAsyncReturnValue(value, returnType);</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var4</span> <span class="operator">=</span> <span class="built_in">this</span>.returnValueHandlers.iterator();</span><br><span class="line">                </span><br><span class="line">    HandlerMethodReturnValueHandler handler;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!var4.hasNext()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">                </span><br><span class="line">            handler = (HandlerMethodReturnValueHandler)var4.next();</span><br><span class="line">        &#125; <span class="keyword">while</span>(isAsyncValue &amp;&amp; !(handler <span class="keyword">instanceof</span> AsyncHandlerMethodReturnValueHandler));</span><br><span class="line">    &#125; <span class="keyword">while</span>(!handler.supportsReturnType(returnType));</span><br><span class="line">                </span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol></li><li><ol><li><code>RequestMappingHandlerAdapter</code> é‡Œé¢çš„<code>invokeAndHandle()</code>çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›<strong>è¿”å›å€¼å¯¹è±¡</strong></li><li><strong>æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨</strong> <code>HandlerMethodReturnValueHandler</code></li><li>æœ€ç»ˆæ‰¾åˆ° <code>RequestResponseBodyMethodProcessor</code>èƒ½å¤„ç† æ ‡æ³¨äº† <code>@ResponseBody</code>æ³¨è§£çš„æ–¹æ³•ï¼ˆProcessor==å¤„ç†å™¨ï¼‰</li><li><code>RequestResponseBodyMethodProcessor</code> è°ƒç”¨<code>writeWithMessageConverters </code>,åˆ©ç”¨<code>MessageConverter</code>æŠŠè¿”å›å€¼å†™å‡ºå»</li></ol></li></ol><p>ä¸Šé¢è§£é‡Šï¼š<code>@ResponseBody</code>ç”±<code>HttpMessageConverter</code>å¤„ç†</p><ol><li><p><code>HttpMessageConverter</code> ä¼š<strong>å…ˆè¿›è¡Œå†…å®¹åå•†</strong></p></li><li><ol><li><p>éå†æ‰€æœ‰çš„<code>MessageConverter</code>çœ‹è°æ”¯æŒè¿™ç§<strong>å†…å®¹ç±»å‹çš„æ•°æ®</strong>ï¼ˆConverter==è½¬æ¢å™¨ï¼‰</p></li><li><p>é»˜è®¤<code>MessageConverter</code>æœ‰ä»¥ä¸‹</p><p><img src="../assets/image/SpringBoot_Image/1681275459547-89d8d651-b52f-4d47-bff9-6db123624424.png" alt="image.png"></p><ol><li><ol><li>æœ€ç»ˆå› ä¸ºè¦<code>json</code>æ‰€ä»¥<code>MappingJackson2HttpMessageConverter</code>æ”¯æŒå†™å‡ºjson</li><li>jacksonç”¨<code>ObjectMapper</code>æŠŠå¯¹è±¡å†™å‡ºå»</li></ol></li></ol></li></ol></li></ol><h4 id="WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters">WebMvcAutoConfiguration<code>æä¾›å‡ ç§é»˜è®¤</code>HttpMessageConverters</h4><ul><li><p><code>EnableWebMvcConfiguration</code>é€šè¿‡ <code>addDefaultHttpMessageConverters</code>æ·»åŠ äº†é»˜è®¤çš„<code>MessageConverter</code>ï¼›å¦‚ä¸‹ï¼š</p></li><li><ul><li><code>ByteArrayHttpMessageConverter</code>ï¼š æ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™</li><li><code>StringHttpMessageConverter</code>ï¼š æ”¯æŒå­—ç¬¦ä¸²è¯»å†™</li><li><code>ResourceHttpMessageConverter</code>ï¼šæ”¯æŒèµ„æºè¯»å†™</li><li><code>ResourceRegionHttpMessageConverter</code>: æ”¯æŒåˆ†åŒºèµ„æºå†™å‡º</li><li><code>AllEncompassingFormHttpMessageConverter</code>ï¼šæ”¯æŒè¡¨å•xml/jsonè¯»å†™</li><li><code>MappingJackson2HttpMessageConverter</code>ï¼š æ”¯æŒè¯·æ±‚å“åº”ä½“Jsonè¯»å†™</li></ul></li></ul><p>é»˜è®¤8ä¸ªï¼š</p><p><img src="../assets/image/SpringBoot_Image/1681302411019-0c0425aa-6679-4b2b-a456-b31c151c6e83.png" alt="image.png"></p><p>ç³»ç»Ÿæä¾›é»˜è®¤çš„MessageConverter åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äºjsonæˆ–è€…æ™®é€šè¿”å›æ•°æ®ã€‚é¢å¤–å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»å¢åŠ æ–°çš„<code>HttpMessageConverter</code></p><h2 id="æ¨¡æ¿å¼•æ“">æ¨¡æ¿å¼•æ“</h2><ul><li><p>ç”±äº <strong>SpringBoot</strong> ä½¿ç”¨äº†<strong>åµŒå…¥å¼ Servlet å®¹å™¨</strong>ã€‚æ‰€ä»¥ <strong>JSP</strong> é»˜è®¤æ˜¯<strong>ä¸èƒ½ä½¿ç”¨</strong>çš„ã€‚</p></li><li><p>å¦‚æœéœ€è¦<strong>æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“</strong>ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ æ¨¡æ¿å¼•æ“ã€‚</p><p><img src="../assets/image/SpringBoot_Image/1681354523290-b89d7e0d-b9aa-40f5-8d22-d3d09d02b136.png" alt="image.png"></p></li></ul><p>æ¨¡æ¿å¼•æ“é¡µé¢é»˜è®¤æ”¾åœ¨ src/main/resources/templates</p><p><strong>SpringBoot</strong> åŒ…å«ä»¥ä¸‹æ¨¡æ¿å¼•æ“çš„è‡ªåŠ¨é…ç½®</p><ul><li>FreeMarker</li><li>Groovy</li><li><strong>Thymeleaf</strong></li><li>Mustache</li></ul><p><strong>Thymeleafå®˜ç½‘</strong>ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/gtvg.css&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;home.welcome&#125;&quot;</span>&gt;</span>Welcome to our grocery store!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">&lt;/body</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Thymeleafæ•´åˆ">Thymeleafæ•´åˆ</h3><h3 id="åŸºç¡€è¯­æ³•">åŸºç¡€è¯­æ³•</h3><h3 id="å±æ€§é…ç½®">å±æ€§é…ç½®</h3><h3 id="éå†">éå†</h3><h3 id="åˆ¤æ–­">åˆ¤æ–­</h3><h3 id="å±æ€§ä¼˜å…ˆçº§">å±æ€§ä¼˜å…ˆçº§</h3><h3 id="è¡Œå†…å†™æ³•">è¡Œå†…å†™æ³•</h3><h3 id="å˜é‡é€‰æ‹©">å˜é‡é€‰æ‹©</h3><h2 id="å›½é™…åŒ–">å›½é™…åŒ–</h2><h2 id="é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</h2><h2 id="åµŒå…¥å¼å®¹å™¨">åµŒå…¥å¼å®¹å™¨</h2><h2 id="å…¨é¢æ¥ç®¡SpringMVC">å…¨é¢æ¥ç®¡SpringMVC</h2><h2 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h2><h3 id="ä¸‰ç§æ–¹æ³•">ä¸‰ç§æ–¹æ³•</h3><table><thead><tr><th>æ–¹å¼</th><th>ç”¨æ³•</th><th>æ•ˆæœ</th><th></th></tr></thead><tbody><tr><td><strong>å…¨è‡ªåŠ¨</strong></td><td>ç›´æ¥ç¼–å†™æ§åˆ¶å™¨é€»è¾‘</td><td></td><td>å…¨éƒ¨ä½¿ç”¨<strong>è‡ªåŠ¨é…ç½®é»˜è®¤æ•ˆæœ</strong></td></tr><tr><td><strong>æ‰‹è‡ªä¸€ä½“</strong></td><td><code>@Configuration</code> +   é…ç½®<code>**WebMvcConfigurer**</code>+ <em>é…ç½® WebMvcRegistrations</em></td><td><strong>ä¸è¦æ ‡æ³¨</strong> <code>@**EnableWebMvc**</code></td><td><strong>ä¿ç•™è‡ªåŠ¨é…ç½®æ•ˆæœ</strong> <strong>æ‰‹åŠ¨è®¾ç½®éƒ¨åˆ†åŠŸèƒ½</strong> å®šä¹‰MVCåº•å±‚ç»„ä»¶</td></tr><tr><td><strong>å…¨æ‰‹åŠ¨</strong></td><td><code>@Configuration</code> +   é…ç½®<code>**WebMvcConfigurer**</code></td><td><strong>æ ‡æ³¨</strong> <code>@**EnableWebMvc**</code></td><td><strong>ç¦ç”¨è‡ªåŠ¨é…ç½®æ•ˆæœ</strong> <strong>å…¨æ‰‹åŠ¨è®¾ç½®</strong></td></tr></tbody></table><p>æ€»ç»“ï¼š</p><p><strong>ç»™å®¹å™¨ä¸­å†™ä¸€ä¸ªé…ç½®ç±»</strong><code>**@Configuration**</code><strong>å®ç°</strong> <code>**WebMvcConfigurer**</code><strong>ä½†æ˜¯ä¸è¦æ ‡æ³¨</strong> <code>**@EnableWebMvc**</code><strong>æ³¨è§£ï¼Œå®ç°æ‰‹è‡ªä¸€ä½“çš„æ•ˆæœã€‚</strong></p><h3 id="ä¸¤ç§æ¨¡å¼">ä¸¤ç§æ¨¡å¼</h3><p>1ã€<code>å‰ååˆ†ç¦»æ¨¡å¼</code>ï¼š <code>@RestController </code>å“åº”JSONæ•°æ®</p><p>2ã€<code>å‰åä¸åˆ†ç¦»æ¨¡å¼</code>ï¼š@Controller + Thymeleafæ¨¡æ¿å¼•æ“</p><h2 id="Webæ–°ç‰¹æ€§">Webæ–°ç‰¹æ€§</h2><h1>AIæ€»ç»“</h1><h2 id="SpringBootå¸¸ç”¨æ³¨è§£">SpringBootå¸¸ç”¨æ³¨è§£</h2><p>Spring Bootä¸­å¸¸ç”¨çš„æ³¨è§£æœ‰:</p><p>@SpringBootApplication:ç”³æ˜è®©spring bootè‡ªåŠ¨ç»™ç¨‹åºè¿›è¡Œå¿…è¦çš„é…ç½®,è¿™ä¸ªæ³¨è§£EQUALäºä»¥é»˜è®¤å±æ€§ä½¿ç”¨@Configurationã€@EnableAutoConfigurationå’Œ@ComponentScanã€‚</p><p>@RestController:ç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ç»„ä»¶(å¦‚strutsä¸­çš„action),è¿™äº›ç»„ä»¶è¿”å›JSON,XMLæˆ–è‡ªå®šä¹‰mediaTypeå†…å®¹åˆ°å®¢æˆ·ç«¯ã€‚</p><p>@RequestMapping:æä¾›è·¯ç”±ä¿¡æ¯,è´Ÿè´£URLåˆ°Controllerä¸­çš„å…·ä½“å‡½æ•°çš„æ˜ å°„ã€‚</p><p>@Autowired:è‡ªåŠ¨å¯¼å…¥ä¾èµ–çš„beanã€‚</p><p>@Component:é€šç”¨çš„æ³¨è§£,å¯æ ‡æ³¨ä»»æ„ç±»ä¸ºSpringç»„ä»¶ã€‚</p><p>@Service:ä¸€èˆ¬ç”¨äºä¿®é¥°serviceå±‚çš„ç»„ä»¶ã€‚</p><p>@Repository:ä½¿ç”¨@Repositoryæ³¨è§£å¯ä»¥ç¡®ä¿DAOæˆ–è€…repositoriesæä¾›å¼‚å¸¸è½¬è¯‘,è¿™ä¸ªæ³¨è§£ä¿®é¥°çš„DAOæˆ–è€…repositoriesç±»ä¼šè¢«ComponetScanå‘ç°å¹¶é…ç½®,åŒæ—¶ä¹Ÿä¸éœ€è¦ä¸ºå®ƒä»¬æä¾›XMLé…ç½®é¡¹ã€‚</p><p>@Configuration:ç›¸å½“äºä¼ ç»Ÿçš„xmlé…ç½®æ–‡ä»¶,å¦‚æœæœ‰äº›ç¬¬ä¸‰æ–¹åº“éœ€è¦ç”¨åˆ°xmlæ–‡ä»¶,å»ºè®®ä»ç„¶é€šè¿‡@Configurationç±»ä½œä¸ºé¡¹ç›®ä¸­å”¯ä¸€çš„é…ç½®ã€‚</p><p>@Bean:ç”¨åœ¨è¿”å›å®ä¾‹çš„æ–¹æ³•ä¸Š(é€šå¸¸æ˜¯å·¥å‚æ¨¡å¼),æ³¨æ˜å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼åŠ å…¥Beanå®¹å™¨ä¸­,é»˜è®¤åç§°ä¸ºæ–¹æ³•åã€‚</p><p>@Value:æ³¨å…¥Spring boot application.propertiesé…ç½®æ–‡ä»¶çš„é”®å€¼å¯¹è¿›æ¥ã€‚</p><p>@Conditional:æ¡ä»¶è£…é…:æ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶,åˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥ã€‚</p><p>è¿™äº›æ˜¯Spring Bootä¸­å¸¸è§å’Œé‡è¦çš„æ³¨è§£,ç”¨äºé…ç½®Springå®¹å™¨ã€å®ç°è‡ªåŠ¨é…ç½®ã€ç»„ä»¶æ‰«æç­‰åŠŸèƒ½ã€‚åˆç†åˆ©ç”¨æ³¨è§£å¯ä»¥ç®€åŒ–Spring Booté¡¹ç›®çš„é…ç½®ã€‚</p><h2 id="jpsæŒ‡ä»¤">jpsæŒ‡ä»¤</h2><p>jps(JVM Process Status Tool) æ˜¯JDKæä¾›çš„ä¸€ä¸ªæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­Javaè¿›ç¨‹çŠ¶æ€çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p><p>jpsä¸»è¦åŠŸèƒ½:</p><ul><li>æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­çš„çƒ­ç‚¹Javaè¿›ç¨‹çŠ¶æ€</li><li>æ˜¾ç¤ºJavaè¿›ç¨‹çš„è¿›ç¨‹å·(PID)</li><li>æ˜¾ç¤ºJavaè¿›ç¨‹æ‰€å¯¹åº”çš„ä¸»ç±»å®Œæ•´åŒ…åæˆ–Jarè·¯å¾„</li></ul><p>jpsåŸºæœ¬è¯­æ³•:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">jps</span><span class="meta"> [options]</span></span><br></pre></td></tr></table></figure><p>å¸¸ç”¨é€‰é¡¹:</p><ul><li>-q :åªè¾“å‡ºè¿›ç¨‹ID</li><li>-m :è¾“å‡ºè¿›ç¨‹å¯¹åº”çš„main classçš„å®Œæ•´è·¯å¾„</li><li>-l :è¾“å‡ºä¸»ç±»çš„å…¨å,å¦‚æœè¿›ç¨‹æ‰§è¡Œçš„æ˜¯JaråŒ…,è¾“å‡ºJarè·¯å¾„</li><li>-v :è¾“å‡ºè¿›ç¨‹å¯åŠ¨æ—¶çš„JVMå‚æ•°</li></ul><p>ä¾‹å­:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">jps -<span class="selector-tag">q</span> </span><br><span class="line"><span class="number">2991</span></span><br><span class="line"><span class="number">28972</span></span><br><span class="line"></span><br><span class="line">jps -m</span><br><span class="line"><span class="number">2991</span> org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.startup</span><span class="selector-class">.Bootstrap</span></span><br><span class="line"><span class="number">28972</span> com<span class="selector-class">.xxx</span><span class="selector-class">.MainClass</span></span><br><span class="line"></span><br><span class="line">jps -l</span><br><span class="line"><span class="number">2991</span> org<span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.startup</span><span class="selector-class">.Bootstrap</span></span><br><span class="line"><span class="number">28972</span> com<span class="selector-class">.xxx</span><span class="selector-class">.MainClass</span></span><br><span class="line"></span><br><span class="line">jps -v</span><br><span class="line"><span class="number">2991</span> Catalina -Djava<span class="selector-class">.util</span><span class="selector-class">.logging</span>.manager=org<span class="selector-class">.apache</span><span class="selector-class">.juli</span><span class="selector-class">.ClassLoaderLogManager</span> </span><br><span class="line"><span class="number">28972</span> -Xms512m -Xmx1024m -XX:MetaspaceSize=<span class="number">128</span>m</span><br></pre></td></tr></table></figure><p>jpsç»“åˆgrepå‘½ä»¤å¯ä»¥æ–¹ä¾¿æœç´¢è¿›ç¨‹ã€‚</p><p>jpsé€šè¿‡æŸ¥çœ‹æœ¬åœ°JVMè¿›ç¨‹æ¥å®ç°æŸ¥çœ‹Javaè¿›ç¨‹å½“å‰çŠ¶æ€çš„åŠŸèƒ½ã€‚ä¸Linuxä¸‹pså‘½ä»¤çš„ä½œç”¨ç±»ä¼¼ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»SpringBootçš„åŸºç¡€çŸ¥è¯†</summary>
    
    
    
    <category term="æ¡†æ¶" scheme="https://momoao.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="Java" scheme="https://momoao.github.io/tags/Java/"/>
    
    <category term="SpringBoot" scheme="https://momoao.github.io/tags/SpringBoot/"/>
    
  </entry>
  
</feed>
